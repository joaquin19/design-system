{"ast":null,"code":"import * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from './sidebar-container.component';\nimport * as ɵngcc2 from '@angular/common';\nvar _c0 = [\"sidebar\"];\nvar _c1 = [\"*\"];\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __metadata = this && this.__metadata || function (k, v) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, ElementRef, EventEmitter, Inject, Input, Optional, Output, PLATFORM_ID, ViewChild } from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\nimport { SidebarContainer } from './sidebar-container.component';\nimport { isLTR, isIOS } from './utils';\n\nvar Sidebar = function () {\n  function Sidebar(_container, _ref, platformId) {\n    this._container = _container;\n    this._ref = _ref;\n    this.opened = false;\n    this.openedChange = new EventEmitter();\n    this.mode = 'over';\n    this.dock = false;\n    this.dockedSize = '0px';\n    this.position = 'start';\n    this.animate = true;\n    this.autoCollapseOnInit = true;\n    this.trapFocus = false;\n    this.autoFocus = true;\n    this.showBackdrop = false;\n    this.closeOnClickBackdrop = false;\n    this.closeOnClickOutside = false;\n    this.keyClose = false;\n    this.keyCode = 27;\n    this.onContentInit = new EventEmitter();\n    this.onOpenStart = new EventEmitter();\n    this.onOpened = new EventEmitter();\n    this.onCloseStart = new EventEmitter();\n    this.onClosed = new EventEmitter();\n    this.onTransitionEnd = new EventEmitter();\n    this.onModeChange = new EventEmitter();\n    this.onPositionChange = new EventEmitter();\n    this._onRerender = new EventEmitter();\n    this._focusableElementsString = 'a[href], area[href], input:not([disabled]), select:not([disabled]),' + 'textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex], [contenteditable]';\n    this._tabIndexAttr = '__tabindex__';\n    this._tabIndexIndicatorAttr = '__ngsidebar-tabindex__';\n    this._clickEvent = 'click';\n    this._onClickOutsideAttached = false;\n    this._onKeyDownAttached = false;\n    this._onResizeAttached = false;\n\n    if (!this._container) {\n      throw new Error('<ng-sidebar> must be inside a <ng-sidebar-container>. ' + 'See https://github.com/arkon/ng-sidebar#usage for more info.');\n    }\n\n    this._isBrowser = isPlatformBrowser(platformId);\n\n    if (this._isBrowser && isIOS() && !('onclick' in window)) {\n      this._clickEvent = 'touchstart';\n    }\n\n    this._normalizePosition();\n\n    this.open = this.open.bind(this);\n    this.close = this.close.bind(this);\n    this._onTransitionEnd = this._onTransitionEnd.bind(this);\n    this._onFocusTrap = this._onFocusTrap.bind(this);\n    this._onClickOutside = this._onClickOutside.bind(this);\n    this._onKeyDown = this._onKeyDown.bind(this);\n    this._collapse = this._collapse.bind(this);\n  }\n\n  Sidebar.prototype.ngOnInit = function () {\n    if (!this._isBrowser) {\n      return;\n    }\n\n    if (this.animate) {\n      this._shouldAnimate = true;\n      this.animate = false;\n    }\n\n    this._container._addSidebar(this);\n\n    if (this.autoCollapseOnInit) {\n      this._collapse();\n    }\n  };\n\n  Sidebar.prototype.ngAfterContentInit = function () {\n    this.onContentInit.emit();\n  };\n\n  Sidebar.prototype.ngOnChanges = function (changes) {\n    var _this = this;\n\n    if (!this._isBrowser) {\n      return;\n    }\n\n    if (changes['animate'] && this._shouldAnimate) {\n      this._shouldAnimate = changes['animate'].currentValue;\n    }\n\n    if (changes['closeOnClickOutside']) {\n      if (changes['closeOnClickOutside'].currentValue) {\n        this._initCloseClickListener();\n      } else {\n        this._destroyCloseClickListener();\n      }\n    }\n\n    if (changes['keyClose']) {\n      if (changes['keyClose'].currentValue) {\n        this._initCloseKeyDownListener();\n      } else {\n        this._destroyCloseKeyDownListener();\n      }\n    }\n\n    if (changes['position']) {\n      this._normalizePosition();\n\n      setTimeout(function () {\n        _this.onPositionChange.emit(changes['position'].currentValue);\n      });\n    }\n\n    if (changes['mode']) {\n      setTimeout(function () {\n        _this.onModeChange.emit(changes['mode'].currentValue);\n      });\n    }\n\n    if (changes['dock']) {\n      this.triggerRerender();\n    }\n\n    if (changes['opened']) {\n      if (this._shouldAnimate) {\n        this.animate = true;\n        this._shouldAnimate = false;\n      }\n\n      if (changes['opened'].currentValue) {\n        this.open();\n      } else {\n        this.close();\n      }\n    }\n\n    if (changes['autoCollapseHeight'] || changes['autoCollapseWidth']) {\n      this._initCollapseListeners();\n    }\n  };\n\n  Sidebar.prototype.ngOnDestroy = function () {\n    if (!this._isBrowser) {\n      return;\n    }\n\n    this._destroyCloseListeners();\n\n    this._destroyCollapseListeners();\n\n    this._container._removeSidebar(this);\n  };\n\n  Sidebar.prototype.open = function () {\n    var _this = this;\n\n    if (!this._isBrowser) {\n      return;\n    }\n\n    this.opened = true;\n    this.openedChange.emit(true);\n    this.onOpenStart.emit();\n\n    this._ref.detectChanges();\n\n    setTimeout(function () {\n      if (_this.animate && !_this._isModeSlide) {\n        _this._elSidebar.nativeElement.addEventListener('transitionend', _this._onTransitionEnd);\n      } else {\n        _this._setFocused();\n\n        _this._initCloseListeners();\n\n        if (_this.opened) {\n          _this.onOpened.emit();\n        }\n      }\n    });\n  };\n\n  Sidebar.prototype.close = function () {\n    var _this = this;\n\n    if (!this._isBrowser) {\n      return;\n    }\n\n    this.opened = false;\n    this.openedChange.emit(false);\n    this.onCloseStart.emit();\n\n    this._ref.detectChanges();\n\n    setTimeout(function () {\n      if (_this.animate && !_this._isModeSlide) {\n        _this._elSidebar.nativeElement.addEventListener('transitionend', _this._onTransitionEnd);\n      } else {\n        _this._setFocused();\n\n        _this._destroyCloseListeners();\n\n        if (!_this.opened) {\n          _this.onClosed.emit();\n        }\n      }\n    });\n  };\n\n  Sidebar.prototype.triggerRerender = function () {\n    var _this = this;\n\n    if (!this._isBrowser) {\n      return;\n    }\n\n    setTimeout(function () {\n      _this._onRerender.emit();\n    });\n  };\n\n  Sidebar.prototype._getStyle = function () {\n    var transformStyle = '';\n\n    if (!this.opened) {\n      var transformDir = 'translate' + (this._isLeftOrRight ? 'X' : 'Y');\n      var translateAmt = (this._isLeftOrTop ? '-' : '') + \"100%\";\n      transformStyle = transformDir + \"(\" + translateAmt + \")\";\n\n      if (this.dock && this._dockedSize > 0 && !(this._isModeSlide && this.opened)) {\n        transformStyle += \" \" + transformDir + \"(\" + (this._isLeftOrTop ? '+' : '-') + this.dockedSize + \")\";\n      }\n    }\n\n    return {\n      webkitTransform: transformStyle,\n      transform: transformStyle\n    };\n  };\n\n  Sidebar.prototype._onTransitionEnd = function (e) {\n    if (e.target === this._elSidebar.nativeElement && e.propertyName.endsWith('transform')) {\n      this._setFocused();\n\n      if (this.opened) {\n        this._initCloseListeners();\n\n        this.onOpened.emit();\n      } else {\n        this._destroyCloseListeners();\n\n        this.onClosed.emit();\n      }\n\n      this.onTransitionEnd.emit();\n\n      this._elSidebar.nativeElement.removeEventListener('transitionend', this._onTransitionEnd);\n    }\n  };\n\n  Object.defineProperty(Sidebar.prototype, \"_shouldTrapFocus\", {\n    get: function () {\n      return this.opened && this.trapFocus;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Sidebar.prototype._focusFirstItem = function () {\n    if (this._focusableElements && this._focusableElements.length > 0) {\n      this._focusableElements[0].focus();\n    }\n  };\n\n  Sidebar.prototype._onFocusTrap = function (e) {\n    if (this._shouldTrapFocus && !this._elSidebar.nativeElement.contains(e.target)) {\n      this._focusFirstItem();\n    }\n  };\n\n  Sidebar.prototype._setFocused = function () {\n    this._focusableElements = Array.from(this._elSidebar.nativeElement.querySelectorAll(this._focusableElementsString));\n\n    if (this.opened) {\n      this._focusedBeforeOpen = document.activeElement;\n\n      for (var _i = 0, _a = this._focusableElements; _i < _a.length; _i++) {\n        var el = _a[_i];\n        var prevTabIndex = el.getAttribute(this._tabIndexAttr);\n        var wasTabIndexSet = el.getAttribute(this._tabIndexIndicatorAttr) !== null;\n\n        if (prevTabIndex !== null) {\n          el.setAttribute('tabindex', prevTabIndex);\n          el.removeAttribute(this._tabIndexAttr);\n        } else if (wasTabIndexSet) {\n          el.removeAttribute('tabindex');\n          el.removeAttribute(this._tabIndexIndicatorAttr);\n        }\n      }\n\n      if (this.autoFocus) {\n        this._focusFirstItem();\n      }\n\n      document.addEventListener('focus', this._onFocusTrap, true);\n    } else {\n      for (var _b = 0, _c = this._focusableElements; _b < _c.length; _b++) {\n        var el = _c[_b];\n        var existingTabIndex = el.getAttribute('tabindex');\n        el.setAttribute('tabindex', '-1');\n        el.setAttribute(this._tabIndexIndicatorAttr, '');\n\n        if (existingTabIndex !== null) {\n          el.setAttribute(this._tabIndexAttr, existingTabIndex);\n        }\n      }\n\n      document.removeEventListener('focus', this._onFocusTrap, true);\n\n      if (this._focusedBeforeOpen && this.autoFocus && this._isModeOver) {\n        this._focusedBeforeOpen.focus();\n\n        this._focusedBeforeOpen = null;\n      }\n    }\n  };\n\n  Sidebar.prototype._initCloseListeners = function () {\n    this._initCloseClickListener();\n\n    this._initCloseKeyDownListener();\n  };\n\n  Sidebar.prototype._initCloseClickListener = function () {\n    var _this = this;\n\n    setTimeout(function () {\n      if (_this.opened && _this.closeOnClickOutside && !_this._onClickOutsideAttached) {\n        document.addEventListener(_this._clickEvent, _this._onClickOutside);\n        _this._onClickOutsideAttached = true;\n      }\n    });\n  };\n\n  Sidebar.prototype._initCloseKeyDownListener = function () {\n    var _this = this;\n\n    setTimeout(function () {\n      if (_this.opened && _this.keyClose && !_this._onKeyDownAttached) {\n        document.addEventListener('keydown', _this._onKeyDown);\n        _this._onKeyDownAttached = true;\n      }\n    });\n  };\n\n  Sidebar.prototype._destroyCloseListeners = function () {\n    this._destroyCloseClickListener();\n\n    this._destroyCloseKeyDownListener();\n  };\n\n  Sidebar.prototype._destroyCloseClickListener = function () {\n    if (this._onClickOutsideAttached) {\n      document.removeEventListener(this._clickEvent, this._onClickOutside);\n      this._onClickOutsideAttached = false;\n    }\n  };\n\n  Sidebar.prototype._destroyCloseKeyDownListener = function () {\n    if (this._onKeyDownAttached) {\n      document.removeEventListener('keydown', this._onKeyDown);\n      this._onKeyDownAttached = false;\n    }\n  };\n\n  Sidebar.prototype._onClickOutside = function (e) {\n    if (this._onClickOutsideAttached && this._elSidebar && !this._elSidebar.nativeElement.contains(e.target)) {\n      this.close();\n    }\n  };\n\n  Sidebar.prototype._onKeyDown = function (e) {\n    e = e || window.event;\n\n    if (e.keyCode === this.keyCode) {\n      this.close();\n    }\n  };\n\n  Sidebar.prototype._initCollapseListeners = function () {\n    var _this = this;\n\n    if (this.autoCollapseHeight || this.autoCollapseWidth) {\n      setTimeout(function () {\n        if (!_this._onResizeAttached) {\n          window.addEventListener('resize', _this._collapse);\n          _this._onResizeAttached = true;\n        }\n      });\n    }\n  };\n\n  Sidebar.prototype._destroyCollapseListeners = function () {\n    if (this._onResizeAttached) {\n      window.removeEventListener('resize', this._collapse);\n      this._onResizeAttached = false;\n    }\n  };\n\n  Sidebar.prototype._collapse = function () {\n    var winHeight = window.innerHeight;\n    var winWidth = window.innerWidth;\n\n    if (this.autoCollapseHeight) {\n      if (winHeight <= this.autoCollapseHeight && this.opened) {\n        this._wasCollapsed = true;\n        this.close();\n      } else if (winHeight > this.autoCollapseHeight && this._wasCollapsed) {\n        this.open();\n        this._wasCollapsed = false;\n      }\n    }\n\n    if (this.autoCollapseWidth) {\n      if (winWidth <= this.autoCollapseWidth && this.opened) {\n        this._wasCollapsed = true;\n        this.close();\n      } else if (winWidth > this.autoCollapseWidth && this._wasCollapsed) {\n        this.open();\n        this._wasCollapsed = false;\n      }\n    }\n  };\n\n  Object.defineProperty(Sidebar.prototype, \"_height\", {\n    get: function () {\n      if (this._elSidebar.nativeElement) {\n        return this._isDocked ? this._dockedSize : this._elSidebar.nativeElement.offsetHeight;\n      }\n\n      return 0;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sidebar.prototype, \"_width\", {\n    get: function () {\n      if (this._elSidebar.nativeElement) {\n        return this._isDocked ? this._dockedSize : this._elSidebar.nativeElement.offsetWidth;\n      }\n\n      return 0;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sidebar.prototype, \"_dockedSize\", {\n    get: function () {\n      return parseFloat(this.dockedSize);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sidebar.prototype, \"_isModeOver\", {\n    get: function () {\n      return this.mode === 'over';\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sidebar.prototype, \"_isModePush\", {\n    get: function () {\n      return this.mode === 'push';\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sidebar.prototype, \"_isModeSlide\", {\n    get: function () {\n      return this.mode === 'slide';\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sidebar.prototype, \"_isDocked\", {\n    get: function () {\n      return this.dock && this.dockedSize && !this.opened;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sidebar.prototype, \"_isLeftOrTop\", {\n    get: function () {\n      return this.position === 'left' || this.position === 'top';\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sidebar.prototype, \"_isLeftOrRight\", {\n    get: function () {\n      return this.position === 'left' || this.position === 'right';\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sidebar.prototype, \"_isInert\", {\n    get: function () {\n      return !this.opened && !this.dock;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Sidebar.prototype._normalizePosition = function () {\n    var ltr = isLTR();\n\n    if (this.position === 'start') {\n      this.position = ltr ? 'left' : 'right';\n    } else if (this.position === 'end') {\n      this.position = ltr ? 'right' : 'left';\n    }\n  };\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], Sidebar.prototype, \"opened\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], Sidebar.prototype, \"openedChange\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], Sidebar.prototype, \"mode\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], Sidebar.prototype, \"dock\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], Sidebar.prototype, \"dockedSize\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], Sidebar.prototype, \"position\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], Sidebar.prototype, \"animate\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Number)], Sidebar.prototype, \"autoCollapseHeight\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Number)], Sidebar.prototype, \"autoCollapseWidth\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], Sidebar.prototype, \"autoCollapseOnInit\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], Sidebar.prototype, \"sidebarClass\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], Sidebar.prototype, \"ariaLabel\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], Sidebar.prototype, \"trapFocus\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], Sidebar.prototype, \"autoFocus\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], Sidebar.prototype, \"showBackdrop\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], Sidebar.prototype, \"closeOnClickBackdrop\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], Sidebar.prototype, \"closeOnClickOutside\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], Sidebar.prototype, \"keyClose\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Number)], Sidebar.prototype, \"keyCode\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], Sidebar.prototype, \"onContentInit\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], Sidebar.prototype, \"onOpenStart\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], Sidebar.prototype, \"onOpened\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], Sidebar.prototype, \"onCloseStart\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], Sidebar.prototype, \"onClosed\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], Sidebar.prototype, \"onTransitionEnd\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], Sidebar.prototype, \"onModeChange\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], Sidebar.prototype, \"onPositionChange\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], Sidebar.prototype, \"_onRerender\", void 0);\n\n  __decorate([ViewChild('sidebar', {\n    static: false\n  }), __metadata(\"design:type\", ElementRef)], Sidebar.prototype, \"_elSidebar\", void 0);\n\n  Sidebar = __decorate([__param(0, Optional()), __param(2, Inject(PLATFORM_ID)), __metadata(\"design:paramtypes\", [SidebarContainer, ChangeDetectorRef, Object])], Sidebar);\n\n  Sidebar.ɵfac = function Sidebar_Factory(t) {\n    return new (t || Sidebar)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.SidebarContainer, 8), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(PLATFORM_ID));\n  };\n\n  Sidebar.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: Sidebar,\n    selectors: [[\"ng-sidebar\"]],\n    viewQuery: function Sidebar_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c0, 5);\n      }\n\n      if (rf & 2) {\n        var _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx._elSidebar = _t.first);\n      }\n    },\n    inputs: {\n      opened: \"opened\",\n      mode: \"mode\",\n      dock: \"dock\",\n      dockedSize: \"dockedSize\",\n      position: \"position\",\n      animate: \"animate\",\n      autoCollapseOnInit: \"autoCollapseOnInit\",\n      trapFocus: \"trapFocus\",\n      autoFocus: \"autoFocus\",\n      showBackdrop: \"showBackdrop\",\n      closeOnClickBackdrop: \"closeOnClickBackdrop\",\n      closeOnClickOutside: \"closeOnClickOutside\",\n      keyClose: \"keyClose\",\n      keyCode: \"keyCode\",\n      autoCollapseHeight: \"autoCollapseHeight\",\n      autoCollapseWidth: \"autoCollapseWidth\",\n      sidebarClass: \"sidebarClass\",\n      ariaLabel: \"ariaLabel\"\n    },\n    outputs: {\n      openedChange: \"openedChange\",\n      onContentInit: \"onContentInit\",\n      onOpenStart: \"onOpenStart\",\n      onOpened: \"onOpened\",\n      onCloseStart: \"onCloseStart\",\n      onClosed: \"onClosed\",\n      onTransitionEnd: \"onTransitionEnd\",\n      onModeChange: \"onModeChange\",\n      onPositionChange: \"onPositionChange\",\n      _onRerender: \"_onRerender\"\n    },\n    features: [ɵngcc0.ɵɵNgOnChangesFeature],\n    ngContentSelectors: _c1,\n    decls: 3,\n    vars: 15,\n    consts: [[\"role\", \"complementary\", 3, \"ngClass\", \"ngStyle\"], [\"sidebar\", \"\"]],\n    template: function Sidebar_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵelementStart(0, \"aside\", 0, 1);\n        ɵngcc0.ɵɵprojection(2);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassMapInterpolate3(\"ng-sidebar ng-sidebar--\", ctx.opened ? \"opened\" : \"closed\", \" ng-sidebar--\", ctx.position, \" ng-sidebar--\", ctx.mode, \"\");\n        ɵngcc0.ɵɵclassProp(\"ng-sidebar--docked\", ctx._isDocked)(\"ng-sidebar--inert\", ctx._isInert)(\"ng-sidebar--animate\", ctx.animate);\n        ɵngcc0.ɵɵproperty(\"ngClass\", ctx.sidebarClass)(\"ngStyle\", ctx._getStyle());\n        ɵngcc0.ɵɵattribute(\"aria-hidden\", !ctx.opened)(\"aria-label\", ctx.ariaLabel);\n      }\n    },\n    directives: [ɵngcc2.NgClass, ɵngcc2.NgStyle],\n    styles: [\".ng-sidebar[_ngcontent-%COMP%] {\\n      -webkit-overflow-scrolling: touch;\\n      overflow: auto;\\n      pointer-events: auto;\\n      position: absolute;\\n      touch-action: auto;\\n      will-change: initial;\\n      z-index: 2;\\n    }\\n\\n    .ng-sidebar--left[_ngcontent-%COMP%] {\\n      bottom: 0;\\n      left: 0;\\n      top: 0;\\n    }\\n\\n    .ng-sidebar--right[_ngcontent-%COMP%] {\\n      bottom: 0;\\n      right: 0;\\n      top: 0;\\n    }\\n\\n    .ng-sidebar--top[_ngcontent-%COMP%] {\\n      left: 0;\\n      right: 0;\\n      top: 0;\\n    }\\n\\n    .ng-sidebar--bottom[_ngcontent-%COMP%] {\\n      bottom: 0;\\n      left: 0;\\n      right: 0;\\n    }\\n\\n    .ng-sidebar--inert[_ngcontent-%COMP%] {\\n      pointer-events: none;\\n      touch-action: none;\\n      will-change: transform;\\n    }\\n\\n    .ng-sidebar--animate[_ngcontent-%COMP%] {\\n      -webkit-transition: -webkit-transform 0.3s cubic-bezier(0, 0, 0.3, 1);\\n      transition: transform 0.3s cubic-bezier(0, 0, 0.3, 1);\\n    }\"],\n    changeDetection: 0\n  });\n\n  (function () {\n    (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n  })();\n\n  return Sidebar;\n}();\n\nexport { Sidebar }; //# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2lkZWJhci5jb21wb25lbnQuanMiLCJzb3VyY2VzIjpbInNpZGViYXIuY29tcG9uZW50LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBT087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQSIsInNvdXJjZXNDb250ZW50IjpbInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbnZhciBfX21ldGFkYXRhID0gKHRoaXMgJiYgdGhpcy5fX21ldGFkYXRhKSB8fCBmdW5jdGlvbiAoaywgdikge1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShrLCB2KTtcbn07XG52YXIgX19wYXJhbSA9ICh0aGlzICYmIHRoaXMuX19wYXJhbSkgfHwgZnVuY3Rpb24gKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxufTtcbmltcG9ydCB7IENoYW5nZURldGVjdGlvblN0cmF0ZWd5LCBDaGFuZ2VEZXRlY3RvclJlZiwgQ29tcG9uZW50LCBFbGVtZW50UmVmLCBFdmVudEVtaXR0ZXIsIEluamVjdCwgSW5wdXQsIE9wdGlvbmFsLCBPdXRwdXQsIFBMQVRGT1JNX0lELCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IGlzUGxhdGZvcm1Ccm93c2VyIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IFNpZGViYXJDb250YWluZXIgfSBmcm9tICcuL3NpZGViYXItY29udGFpbmVyLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBpc0xUUiwgaXNJT1MgfSBmcm9tICcuL3V0aWxzJztcbnZhciBTaWRlYmFyID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTaWRlYmFyKF9jb250YWluZXIsIF9yZWYsIHBsYXRmb3JtSWQpIHtcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gX2NvbnRhaW5lcjtcbiAgICAgICAgdGhpcy5fcmVmID0gX3JlZjtcbiAgICAgICAgdGhpcy5vcGVuZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5vcGVuZWRDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMubW9kZSA9ICdvdmVyJztcbiAgICAgICAgdGhpcy5kb2NrID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZG9ja2VkU2l6ZSA9ICcwcHgnO1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gJ3N0YXJ0JztcbiAgICAgICAgdGhpcy5hbmltYXRlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5hdXRvQ29sbGFwc2VPbkluaXQgPSB0cnVlO1xuICAgICAgICB0aGlzLnRyYXBGb2N1cyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmF1dG9Gb2N1cyA9IHRydWU7XG4gICAgICAgIHRoaXMuc2hvd0JhY2tkcm9wID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY2xvc2VPbkNsaWNrQmFja2Ryb3AgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jbG9zZU9uQ2xpY2tPdXRzaWRlID0gZmFsc2U7XG4gICAgICAgIHRoaXMua2V5Q2xvc2UgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5rZXlDb2RlID0gMjc7XG4gICAgICAgIHRoaXMub25Db250ZW50SW5pdCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5vbk9wZW5TdGFydCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5vbk9wZW5lZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5vbkNsb3NlU3RhcnQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMub25DbG9zZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMub25UcmFuc2l0aW9uRW5kID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLm9uTW9kZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5vblBvc2l0aW9uQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLl9vblJlcmVuZGVyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLl9mb2N1c2FibGVFbGVtZW50c1N0cmluZyA9ICdhW2hyZWZdLCBhcmVhW2hyZWZdLCBpbnB1dDpub3QoW2Rpc2FibGVkXSksIHNlbGVjdDpub3QoW2Rpc2FibGVkXSksJyArXG4gICAgICAgICAgICAndGV4dGFyZWE6bm90KFtkaXNhYmxlZF0pLCBidXR0b246bm90KFtkaXNhYmxlZF0pLCBpZnJhbWUsIG9iamVjdCwgZW1iZWQsIFt0YWJpbmRleF0sIFtjb250ZW50ZWRpdGFibGVdJztcbiAgICAgICAgdGhpcy5fdGFiSW5kZXhBdHRyID0gJ19fdGFiaW5kZXhfXyc7XG4gICAgICAgIHRoaXMuX3RhYkluZGV4SW5kaWNhdG9yQXR0ciA9ICdfX25nc2lkZWJhci10YWJpbmRleF9fJztcbiAgICAgICAgdGhpcy5fY2xpY2tFdmVudCA9ICdjbGljayc7XG4gICAgICAgIHRoaXMuX29uQ2xpY2tPdXRzaWRlQXR0YWNoZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fb25LZXlEb3duQXR0YWNoZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fb25SZXNpemVBdHRhY2hlZCA9IGZhbHNlO1xuICAgICAgICBpZiAoIXRoaXMuX2NvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCc8bmctc2lkZWJhcj4gbXVzdCBiZSBpbnNpZGUgYSA8bmctc2lkZWJhci1jb250YWluZXI+LiAnICtcbiAgICAgICAgICAgICAgICAnU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hcmtvbi9uZy1zaWRlYmFyI3VzYWdlIGZvciBtb3JlIGluZm8uJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5faXNCcm93c2VyID0gaXNQbGF0Zm9ybUJyb3dzZXIocGxhdGZvcm1JZCk7XG4gICAgICAgIGlmICh0aGlzLl9pc0Jyb3dzZXIgJiYgaXNJT1MoKSAmJiAhKCdvbmNsaWNrJyBpbiB3aW5kb3cpKSB7XG4gICAgICAgICAgICB0aGlzLl9jbGlja0V2ZW50ID0gJ3RvdWNoc3RhcnQnO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX25vcm1hbGl6ZVBvc2l0aW9uKCk7XG4gICAgICAgIHRoaXMub3BlbiA9IHRoaXMub3Blbi5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmNsb3NlID0gdGhpcy5jbG9zZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9vblRyYW5zaXRpb25FbmQgPSB0aGlzLl9vblRyYW5zaXRpb25FbmQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5fb25Gb2N1c1RyYXAgPSB0aGlzLl9vbkZvY3VzVHJhcC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9vbkNsaWNrT3V0c2lkZSA9IHRoaXMuX29uQ2xpY2tPdXRzaWRlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX29uS2V5RG93biA9IHRoaXMuX29uS2V5RG93bi5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9jb2xsYXBzZSA9IHRoaXMuX2NvbGxhcHNlLmJpbmQodGhpcyk7XG4gICAgfVxuICAgIFNpZGViYXIucHJvdG90eXBlLm5nT25Jbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuX2lzQnJvd3Nlcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmFuaW1hdGUpIHtcbiAgICAgICAgICAgIHRoaXMuX3Nob3VsZEFuaW1hdGUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5hbmltYXRlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY29udGFpbmVyLl9hZGRTaWRlYmFyKHRoaXMpO1xuICAgICAgICBpZiAodGhpcy5hdXRvQ29sbGFwc2VPbkluaXQpIHtcbiAgICAgICAgICAgIHRoaXMuX2NvbGxhcHNlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNpZGViYXIucHJvdG90eXBlLm5nQWZ0ZXJDb250ZW50SW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5vbkNvbnRlbnRJbml0LmVtaXQoKTtcbiAgICB9O1xuICAgIFNpZGViYXIucHJvdG90eXBlLm5nT25DaGFuZ2VzID0gZnVuY3Rpb24gKGNoYW5nZXMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKCF0aGlzLl9pc0Jyb3dzZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hhbmdlc1snYW5pbWF0ZSddICYmIHRoaXMuX3Nob3VsZEFuaW1hdGUpIHtcbiAgICAgICAgICAgIHRoaXMuX3Nob3VsZEFuaW1hdGUgPSBjaGFuZ2VzWydhbmltYXRlJ10uY3VycmVudFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjaGFuZ2VzWydjbG9zZU9uQ2xpY2tPdXRzaWRlJ10pIHtcbiAgICAgICAgICAgIGlmIChjaGFuZ2VzWydjbG9zZU9uQ2xpY2tPdXRzaWRlJ10uY3VycmVudFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5faW5pdENsb3NlQ2xpY2tMaXN0ZW5lcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZGVzdHJveUNsb3NlQ2xpY2tMaXN0ZW5lcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjaGFuZ2VzWydrZXlDbG9zZSddKSB7XG4gICAgICAgICAgICBpZiAoY2hhbmdlc1sna2V5Q2xvc2UnXS5jdXJyZW50VmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9pbml0Q2xvc2VLZXlEb3duTGlzdGVuZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX2Rlc3Ryb3lDbG9zZUtleURvd25MaXN0ZW5lcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjaGFuZ2VzWydwb3NpdGlvbiddKSB7XG4gICAgICAgICAgICB0aGlzLl9ub3JtYWxpemVQb3NpdGlvbigpO1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMub25Qb3NpdGlvbkNoYW5nZS5lbWl0KGNoYW5nZXNbJ3Bvc2l0aW9uJ10uY3VycmVudFZhbHVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjaGFuZ2VzWydtb2RlJ10pIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzLm9uTW9kZUNoYW5nZS5lbWl0KGNoYW5nZXNbJ21vZGUnXS5jdXJyZW50VmFsdWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoYW5nZXNbJ2RvY2snXSkge1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyUmVyZW5kZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hhbmdlc1snb3BlbmVkJ10pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9zaG91bGRBbmltYXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hbmltYXRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLl9zaG91bGRBbmltYXRlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2hhbmdlc1snb3BlbmVkJ10uY3VycmVudFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoYW5nZXNbJ2F1dG9Db2xsYXBzZUhlaWdodCddIHx8IGNoYW5nZXNbJ2F1dG9Db2xsYXBzZVdpZHRoJ10pIHtcbiAgICAgICAgICAgIHRoaXMuX2luaXRDb2xsYXBzZUxpc3RlbmVycygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTaWRlYmFyLnByb3RvdHlwZS5uZ09uRGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9pc0Jyb3dzZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9kZXN0cm95Q2xvc2VMaXN0ZW5lcnMoKTtcbiAgICAgICAgdGhpcy5fZGVzdHJveUNvbGxhcHNlTGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5fcmVtb3ZlU2lkZWJhcih0aGlzKTtcbiAgICB9O1xuICAgIFNpZGViYXIucHJvdG90eXBlLm9wZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICghdGhpcy5faXNCcm93c2VyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vcGVuZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLm9wZW5lZENoYW5nZS5lbWl0KHRydWUpO1xuICAgICAgICB0aGlzLm9uT3BlblN0YXJ0LmVtaXQoKTtcbiAgICAgICAgdGhpcy5fcmVmLmRldGVjdENoYW5nZXMoKTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoX3RoaXMuYW5pbWF0ZSAmJiAhX3RoaXMuX2lzTW9kZVNsaWRlKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuX2VsU2lkZWJhci5uYXRpdmVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBfdGhpcy5fb25UcmFuc2l0aW9uRW5kKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIF90aGlzLl9zZXRGb2N1c2VkKCk7XG4gICAgICAgICAgICAgICAgX3RoaXMuX2luaXRDbG9zZUxpc3RlbmVycygpO1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5vcGVuZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMub25PcGVuZWQuZW1pdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBTaWRlYmFyLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKCF0aGlzLl9pc0Jyb3dzZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9wZW5lZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLm9wZW5lZENoYW5nZS5lbWl0KGZhbHNlKTtcbiAgICAgICAgdGhpcy5vbkNsb3NlU3RhcnQuZW1pdCgpO1xuICAgICAgICB0aGlzLl9yZWYuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChfdGhpcy5hbmltYXRlICYmICFfdGhpcy5faXNNb2RlU2xpZGUpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5fZWxTaWRlYmFyLm5hdGl2ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIF90aGlzLl9vblRyYW5zaXRpb25FbmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuX3NldEZvY3VzZWQoKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5fZGVzdHJveUNsb3NlTGlzdGVuZXJzKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5vcGVuZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMub25DbG9zZWQuZW1pdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBTaWRlYmFyLnByb3RvdHlwZS50cmlnZ2VyUmVyZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICghdGhpcy5faXNCcm93c2VyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5fb25SZXJlbmRlci5lbWl0KCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgU2lkZWJhci5wcm90b3R5cGUuX2dldFN0eWxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdHJhbnNmb3JtU3R5bGUgPSAnJztcbiAgICAgICAgaWYgKCF0aGlzLm9wZW5lZCkge1xuICAgICAgICAgICAgdmFyIHRyYW5zZm9ybURpciA9ICd0cmFuc2xhdGUnICsgKHRoaXMuX2lzTGVmdE9yUmlnaHQgPyAnWCcgOiAnWScpO1xuICAgICAgICAgICAgdmFyIHRyYW5zbGF0ZUFtdCA9ICh0aGlzLl9pc0xlZnRPclRvcCA/ICctJyA6ICcnKSArIFwiMTAwJVwiO1xuICAgICAgICAgICAgdHJhbnNmb3JtU3R5bGUgPSB0cmFuc2Zvcm1EaXIgKyBcIihcIiArIHRyYW5zbGF0ZUFtdCArIFwiKVwiO1xuICAgICAgICAgICAgaWYgKHRoaXMuZG9jayAmJiB0aGlzLl9kb2NrZWRTaXplID4gMCAmJiAhKHRoaXMuX2lzTW9kZVNsaWRlICYmIHRoaXMub3BlbmVkKSkge1xuICAgICAgICAgICAgICAgIHRyYW5zZm9ybVN0eWxlICs9IFwiIFwiICsgdHJhbnNmb3JtRGlyICsgXCIoXCIgKyAodGhpcy5faXNMZWZ0T3JUb3AgPyAnKycgOiAnLScpICsgdGhpcy5kb2NrZWRTaXplICsgXCIpXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHdlYmtpdFRyYW5zZm9ybTogdHJhbnNmb3JtU3R5bGUsXG4gICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zZm9ybVN0eWxlXG4gICAgICAgIH07XG4gICAgfTtcbiAgICBTaWRlYmFyLnByb3RvdHlwZS5fb25UcmFuc2l0aW9uRW5kID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKGUudGFyZ2V0ID09PSB0aGlzLl9lbFNpZGViYXIubmF0aXZlRWxlbWVudCAmJiBlLnByb3BlcnR5TmFtZS5lbmRzV2l0aCgndHJhbnNmb3JtJykpIHtcbiAgICAgICAgICAgIHRoaXMuX3NldEZvY3VzZWQoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wZW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2luaXRDbG9zZUxpc3RlbmVycygpO1xuICAgICAgICAgICAgICAgIHRoaXMub25PcGVuZWQuZW1pdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZGVzdHJveUNsb3NlTGlzdGVuZXJzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkNsb3NlZC5lbWl0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9uVHJhbnNpdGlvbkVuZC5lbWl0KCk7XG4gICAgICAgICAgICB0aGlzLl9lbFNpZGViYXIubmF0aXZlRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgdGhpcy5fb25UcmFuc2l0aW9uRW5kKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNpZGViYXIucHJvdG90eXBlLCBcIl9zaG91bGRUcmFwRm9jdXNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9wZW5lZCAmJiB0aGlzLnRyYXBGb2N1cztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgU2lkZWJhci5wcm90b3R5cGUuX2ZvY3VzRmlyc3RJdGVtID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5fZm9jdXNhYmxlRWxlbWVudHMgJiYgdGhpcy5fZm9jdXNhYmxlRWxlbWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5fZm9jdXNhYmxlRWxlbWVudHNbMF0uZm9jdXMoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU2lkZWJhci5wcm90b3R5cGUuX29uRm9jdXNUcmFwID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKHRoaXMuX3Nob3VsZFRyYXBGb2N1cyAmJiAhdGhpcy5fZWxTaWRlYmFyLm5hdGl2ZUVsZW1lbnQuY29udGFpbnMoZS50YXJnZXQpKSB7XG4gICAgICAgICAgICB0aGlzLl9mb2N1c0ZpcnN0SXRlbSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTaWRlYmFyLnByb3RvdHlwZS5fc2V0Rm9jdXNlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fZm9jdXNhYmxlRWxlbWVudHMgPSBBcnJheS5mcm9tKHRoaXMuX2VsU2lkZWJhci5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fZm9jdXNhYmxlRWxlbWVudHNTdHJpbmcpKTtcbiAgICAgICAgaWYgKHRoaXMub3BlbmVkKSB7XG4gICAgICAgICAgICB0aGlzLl9mb2N1c2VkQmVmb3JlT3BlbiA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5fZm9jdXNhYmxlRWxlbWVudHM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHZhciBwcmV2VGFiSW5kZXggPSBlbC5nZXRBdHRyaWJ1dGUodGhpcy5fdGFiSW5kZXhBdHRyKTtcbiAgICAgICAgICAgICAgICB2YXIgd2FzVGFiSW5kZXhTZXQgPSBlbC5nZXRBdHRyaWJ1dGUodGhpcy5fdGFiSW5kZXhJbmRpY2F0b3JBdHRyKSAhPT0gbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAocHJldlRhYkluZGV4ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCBwcmV2VGFiSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUodGhpcy5fdGFiSW5kZXhBdHRyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAod2FzVGFiSW5kZXhTZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCd0YWJpbmRleCcpO1xuICAgICAgICAgICAgICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUodGhpcy5fdGFiSW5kZXhJbmRpY2F0b3JBdHRyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hdXRvRm9jdXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9mb2N1c0ZpcnN0SXRlbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLl9vbkZvY3VzVHJhcCwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfYiA9IDAsIF9jID0gdGhpcy5fZm9jdXNhYmxlRWxlbWVudHM7IF9iIDwgX2MubGVuZ3RoOyBfYisrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsID0gX2NbX2JdO1xuICAgICAgICAgICAgICAgIHZhciBleGlzdGluZ1RhYkluZGV4ID0gZWwuZ2V0QXR0cmlidXRlKCd0YWJpbmRleCcpO1xuICAgICAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnLTEnKTtcbiAgICAgICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUodGhpcy5fdGFiSW5kZXhJbmRpY2F0b3JBdHRyLCAnJyk7XG4gICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nVGFiSW5kZXggIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKHRoaXMuX3RhYkluZGV4QXR0ciwgZXhpc3RpbmdUYWJJbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLl9vbkZvY3VzVHJhcCwgdHJ1ZSk7XG4gICAgICAgICAgICBpZiAodGhpcy5fZm9jdXNlZEJlZm9yZU9wZW4gJiYgdGhpcy5hdXRvRm9jdXMgJiYgdGhpcy5faXNNb2RlT3Zlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuX2ZvY3VzZWRCZWZvcmVPcGVuLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fZm9jdXNlZEJlZm9yZU9wZW4gPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBTaWRlYmFyLnByb3RvdHlwZS5faW5pdENsb3NlTGlzdGVuZXJzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9pbml0Q2xvc2VDbGlja0xpc3RlbmVyKCk7XG4gICAgICAgIHRoaXMuX2luaXRDbG9zZUtleURvd25MaXN0ZW5lcigpO1xuICAgIH07XG4gICAgU2lkZWJhci5wcm90b3R5cGUuX2luaXRDbG9zZUNsaWNrTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKF90aGlzLm9wZW5lZCAmJiBfdGhpcy5jbG9zZU9uQ2xpY2tPdXRzaWRlICYmICFfdGhpcy5fb25DbGlja091dHNpZGVBdHRhY2hlZCkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoX3RoaXMuX2NsaWNrRXZlbnQsIF90aGlzLl9vbkNsaWNrT3V0c2lkZSk7XG4gICAgICAgICAgICAgICAgX3RoaXMuX29uQ2xpY2tPdXRzaWRlQXR0YWNoZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFNpZGViYXIucHJvdG90eXBlLl9pbml0Q2xvc2VLZXlEb3duTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKF90aGlzLm9wZW5lZCAmJiBfdGhpcy5rZXlDbG9zZSAmJiAhX3RoaXMuX29uS2V5RG93bkF0dGFjaGVkKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIF90aGlzLl9vbktleURvd24pO1xuICAgICAgICAgICAgICAgIF90aGlzLl9vbktleURvd25BdHRhY2hlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgU2lkZWJhci5wcm90b3R5cGUuX2Rlc3Ryb3lDbG9zZUxpc3RlbmVycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fZGVzdHJveUNsb3NlQ2xpY2tMaXN0ZW5lcigpO1xuICAgICAgICB0aGlzLl9kZXN0cm95Q2xvc2VLZXlEb3duTGlzdGVuZXIoKTtcbiAgICB9O1xuICAgIFNpZGViYXIucHJvdG90eXBlLl9kZXN0cm95Q2xvc2VDbGlja0xpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5fb25DbGlja091dHNpZGVBdHRhY2hlZCkge1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLl9jbGlja0V2ZW50LCB0aGlzLl9vbkNsaWNrT3V0c2lkZSk7XG4gICAgICAgICAgICB0aGlzLl9vbkNsaWNrT3V0c2lkZUF0dGFjaGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNpZGViYXIucHJvdG90eXBlLl9kZXN0cm95Q2xvc2VLZXlEb3duTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLl9vbktleURvd25BdHRhY2hlZCkge1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX29uS2V5RG93bik7XG4gICAgICAgICAgICB0aGlzLl9vbktleURvd25BdHRhY2hlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTaWRlYmFyLnByb3RvdHlwZS5fb25DbGlja091dHNpZGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAodGhpcy5fb25DbGlja091dHNpZGVBdHRhY2hlZCAmJiB0aGlzLl9lbFNpZGViYXIgJiYgIXRoaXMuX2VsU2lkZWJhci5uYXRpdmVFbGVtZW50LmNvbnRhaW5zKGUudGFyZ2V0KSkge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTaWRlYmFyLnByb3RvdHlwZS5fb25LZXlEb3duID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZSA9IGUgfHwgd2luZG93LmV2ZW50O1xuICAgICAgICBpZiAoZS5rZXlDb2RlID09PSB0aGlzLmtleUNvZGUpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU2lkZWJhci5wcm90b3R5cGUuX2luaXRDb2xsYXBzZUxpc3RlbmVycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKHRoaXMuYXV0b0NvbGxhcHNlSGVpZ2h0IHx8IHRoaXMuYXV0b0NvbGxhcHNlV2lkdGgpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICghX3RoaXMuX29uUmVzaXplQXR0YWNoZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIF90aGlzLl9jb2xsYXBzZSk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLl9vblJlc2l6ZUF0dGFjaGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU2lkZWJhci5wcm90b3R5cGUuX2Rlc3Ryb3lDb2xsYXBzZUxpc3RlbmVycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuX29uUmVzaXplQXR0YWNoZWQpIHtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLl9jb2xsYXBzZSk7XG4gICAgICAgICAgICB0aGlzLl9vblJlc2l6ZUF0dGFjaGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNpZGViYXIucHJvdG90eXBlLl9jb2xsYXBzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHdpbkhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICAgICAgdmFyIHdpbldpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgIGlmICh0aGlzLmF1dG9Db2xsYXBzZUhlaWdodCkge1xuICAgICAgICAgICAgaWYgKHdpbkhlaWdodCA8PSB0aGlzLmF1dG9Db2xsYXBzZUhlaWdodCAmJiB0aGlzLm9wZW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3dhc0NvbGxhcHNlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAod2luSGVpZ2h0ID4gdGhpcy5hdXRvQ29sbGFwc2VIZWlnaHQgJiYgdGhpcy5fd2FzQ29sbGFwc2VkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fd2FzQ29sbGFwc2VkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYXV0b0NvbGxhcHNlV2lkdGgpIHtcbiAgICAgICAgICAgIGlmICh3aW5XaWR0aCA8PSB0aGlzLmF1dG9Db2xsYXBzZVdpZHRoICYmIHRoaXMub3BlbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fd2FzQ29sbGFwc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh3aW5XaWR0aCA+IHRoaXMuYXV0b0NvbGxhcHNlV2lkdGggJiYgdGhpcy5fd2FzQ29sbGFwc2VkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fd2FzQ29sbGFwc2VkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTaWRlYmFyLnByb3RvdHlwZSwgXCJfaGVpZ2h0XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fZWxTaWRlYmFyLm5hdGl2ZUVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5faXNEb2NrZWQgPyB0aGlzLl9kb2NrZWRTaXplIDogdGhpcy5fZWxTaWRlYmFyLm5hdGl2ZUVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTaWRlYmFyLnByb3RvdHlwZSwgXCJfd2lkdGhcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9lbFNpZGViYXIubmF0aXZlRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9pc0RvY2tlZCA/IHRoaXMuX2RvY2tlZFNpemUgOiB0aGlzLl9lbFNpZGViYXIubmF0aXZlRWxlbWVudC5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2lkZWJhci5wcm90b3R5cGUsIFwiX2RvY2tlZFNpemVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHRoaXMuZG9ja2VkU2l6ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTaWRlYmFyLnByb3RvdHlwZSwgXCJfaXNNb2RlT3ZlclwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubW9kZSA9PT0gJ292ZXInO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2lkZWJhci5wcm90b3R5cGUsIFwiX2lzTW9kZVB1c2hcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1vZGUgPT09ICdwdXNoJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNpZGViYXIucHJvdG90eXBlLCBcIl9pc01vZGVTbGlkZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubW9kZSA9PT0gJ3NsaWRlJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNpZGViYXIucHJvdG90eXBlLCBcIl9pc0RvY2tlZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZG9jayAmJiB0aGlzLmRvY2tlZFNpemUgJiYgIXRoaXMub3BlbmVkO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2lkZWJhci5wcm90b3R5cGUsIFwiX2lzTGVmdE9yVG9wXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbiA9PT0gJ2xlZnQnIHx8IHRoaXMucG9zaXRpb24gPT09ICd0b3AnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2lkZWJhci5wcm90b3R5cGUsIFwiX2lzTGVmdE9yUmlnaHRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uID09PSAnbGVmdCcgfHwgdGhpcy5wb3NpdGlvbiA9PT0gJ3JpZ2h0JztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNpZGViYXIucHJvdG90eXBlLCBcIl9pc0luZXJ0XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gIXRoaXMub3BlbmVkICYmICF0aGlzLmRvY2s7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFNpZGViYXIucHJvdG90eXBlLl9ub3JtYWxpemVQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGx0ciA9IGlzTFRSKCk7XG4gICAgICAgIGlmICh0aGlzLnBvc2l0aW9uID09PSAnc3RhcnQnKSB7XG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uID0gbHRyID8gJ2xlZnQnIDogJ3JpZ2h0JztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnBvc2l0aW9uID09PSAnZW5kJykge1xuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbiA9IGx0ciA/ICdyaWdodCcgOiAnbGVmdCc7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbiAgICBdLCBTaWRlYmFyLnByb3RvdHlwZSwgXCJvcGVuZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgT3V0cHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG4gICAgXSwgU2lkZWJhci5wcm90b3R5cGUsIFwib3BlbmVkQ2hhbmdlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgU2lkZWJhci5wcm90b3R5cGUsIFwibW9kZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbiAgICBdLCBTaWRlYmFyLnByb3RvdHlwZSwgXCJkb2NrXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgU2lkZWJhci5wcm90b3R5cGUsIFwiZG9ja2VkU2l6ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIFNpZGViYXIucHJvdG90eXBlLCBcInBvc2l0aW9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuICAgIF0sIFNpZGViYXIucHJvdG90eXBlLCBcImFuaW1hdGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlcilcbiAgICBdLCBTaWRlYmFyLnByb3RvdHlwZSwgXCJhdXRvQ29sbGFwc2VIZWlnaHRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlcilcbiAgICBdLCBTaWRlYmFyLnByb3RvdHlwZSwgXCJhdXRvQ29sbGFwc2VXaWR0aFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbiAgICBdLCBTaWRlYmFyLnByb3RvdHlwZSwgXCJhdXRvQ29sbGFwc2VPbkluaXRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBTaWRlYmFyLnByb3RvdHlwZSwgXCJzaWRlYmFyQ2xhc3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBTaWRlYmFyLnByb3RvdHlwZSwgXCJhcmlhTGFiZWxcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG4gICAgXSwgU2lkZWJhci5wcm90b3R5cGUsIFwidHJhcEZvY3VzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuICAgIF0sIFNpZGViYXIucHJvdG90eXBlLCBcImF1dG9Gb2N1c1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbiAgICBdLCBTaWRlYmFyLnByb3RvdHlwZSwgXCJzaG93QmFja2Ryb3BcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG4gICAgXSwgU2lkZWJhci5wcm90b3R5cGUsIFwiY2xvc2VPbkNsaWNrQmFja2Ryb3BcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG4gICAgXSwgU2lkZWJhci5wcm90b3R5cGUsIFwiY2xvc2VPbkNsaWNrT3V0c2lkZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbiAgICBdLCBTaWRlYmFyLnByb3RvdHlwZSwgXCJrZXlDbG9zZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKVxuICAgIF0sIFNpZGViYXIucHJvdG90eXBlLCBcImtleUNvZGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgT3V0cHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG4gICAgXSwgU2lkZWJhci5wcm90b3R5cGUsIFwib25Db250ZW50SW5pdFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPdXRwdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbiAgICBdLCBTaWRlYmFyLnByb3RvdHlwZSwgXCJvbk9wZW5TdGFydFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPdXRwdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbiAgICBdLCBTaWRlYmFyLnByb3RvdHlwZSwgXCJvbk9wZW5lZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPdXRwdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbiAgICBdLCBTaWRlYmFyLnByb3RvdHlwZSwgXCJvbkNsb3NlU3RhcnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgT3V0cHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG4gICAgXSwgU2lkZWJhci5wcm90b3R5cGUsIFwib25DbG9zZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgT3V0cHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG4gICAgXSwgU2lkZWJhci5wcm90b3R5cGUsIFwib25UcmFuc2l0aW9uRW5kXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE91dHB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuICAgIF0sIFNpZGViYXIucHJvdG90eXBlLCBcIm9uTW9kZUNoYW5nZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPdXRwdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbiAgICBdLCBTaWRlYmFyLnByb3RvdHlwZSwgXCJvblBvc2l0aW9uQ2hhbmdlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE91dHB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuICAgIF0sIFNpZGViYXIucHJvdG90eXBlLCBcIl9vblJlcmVuZGVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIFZpZXdDaGlsZCgnc2lkZWJhcicsIHsgc3RhdGljOiBmYWxzZSB9KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEVsZW1lbnRSZWYpXG4gICAgXSwgU2lkZWJhci5wcm90b3R5cGUsIFwiX2VsU2lkZWJhclwiLCB2b2lkIDApO1xuICAgIFNpZGViYXIgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmctc2lkZWJhcicsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCJcXG4gICAgPGFzaWRlICNzaWRlYmFyXFxuICAgICAgcm9sZT1cXFwiY29tcGxlbWVudGFyeVxcXCJcXG4gICAgICBbYXR0ci5hcmlhLWhpZGRlbl09XFxcIiFvcGVuZWRcXFwiXFxuICAgICAgW2F0dHIuYXJpYS1sYWJlbF09XFxcImFyaWFMYWJlbFxcXCJcXG4gICAgICBjbGFzcz1cXFwibmctc2lkZWJhciBuZy1zaWRlYmFyLS17e29wZW5lZCA/ICdvcGVuZWQnIDogJ2Nsb3NlZCd9fSBuZy1zaWRlYmFyLS17e3Bvc2l0aW9ufX0gbmctc2lkZWJhci0te3ttb2RlfX1cXFwiXFxuICAgICAgW2NsYXNzLm5nLXNpZGViYXItLWRvY2tlZF09XFxcIl9pc0RvY2tlZFxcXCJcXG4gICAgICBbY2xhc3Mubmctc2lkZWJhci0taW5lcnRdPVxcXCJfaXNJbmVydFxcXCJcXG4gICAgICBbY2xhc3Mubmctc2lkZWJhci0tYW5pbWF0ZV09XFxcImFuaW1hdGVcXFwiXFxuICAgICAgW25nQ2xhc3NdPVxcXCJzaWRlYmFyQ2xhc3NcXFwiXFxuICAgICAgW25nU3R5bGVdPVxcXCJfZ2V0U3R5bGUoKVxcXCI+XFxuICAgICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxcbiAgICA8L2FzaWRlPlxcbiAgXCIsXG4gICAgICAgICAgICBzdHlsZXM6IFtcIlxcbiAgICAubmctc2lkZWJhciB7XFxuICAgICAgLXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6IHRvdWNoO1xcbiAgICAgIG92ZXJmbG93OiBhdXRvO1xcbiAgICAgIHBvaW50ZXItZXZlbnRzOiBhdXRvO1xcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gICAgICB0b3VjaC1hY3Rpb246IGF1dG87XFxuICAgICAgd2lsbC1jaGFuZ2U6IGluaXRpYWw7XFxuICAgICAgei1pbmRleDogMjtcXG4gICAgfVxcblxcbiAgICAubmctc2lkZWJhci0tbGVmdCB7XFxuICAgICAgYm90dG9tOiAwO1xcbiAgICAgIGxlZnQ6IDA7XFxuICAgICAgdG9wOiAwO1xcbiAgICB9XFxuXFxuICAgIC5uZy1zaWRlYmFyLS1yaWdodCB7XFxuICAgICAgYm90dG9tOiAwO1xcbiAgICAgIHJpZ2h0OiAwO1xcbiAgICAgIHRvcDogMDtcXG4gICAgfVxcblxcbiAgICAubmctc2lkZWJhci0tdG9wIHtcXG4gICAgICBsZWZ0OiAwO1xcbiAgICAgIHJpZ2h0OiAwO1xcbiAgICAgIHRvcDogMDtcXG4gICAgfVxcblxcbiAgICAubmctc2lkZWJhci0tYm90dG9tIHtcXG4gICAgICBib3R0b206IDA7XFxuICAgICAgbGVmdDogMDtcXG4gICAgICByaWdodDogMDtcXG4gICAgfVxcblxcbiAgICAubmctc2lkZWJhci0taW5lcnQge1xcbiAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xcbiAgICAgIHRvdWNoLWFjdGlvbjogbm9uZTtcXG4gICAgICB3aWxsLWNoYW5nZTogdHJhbnNmb3JtO1xcbiAgICB9XFxuXFxuICAgIC5uZy1zaWRlYmFyLS1hbmltYXRlIHtcXG4gICAgICAtd2Via2l0LXRyYW5zaXRpb246IC13ZWJraXQtdHJhbnNmb3JtIDAuM3MgY3ViaWMtYmV6aWVyKDAsIDAsIDAuMywgMSk7XFxuICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuM3MgY3ViaWMtYmV6aWVyKDAsIDAsIDAuMywgMSk7XFxuICAgIH1cXG4gIFwiXSxcbiAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG4gICAgICAgIH0pLFxuICAgICAgICBfX3BhcmFtKDAsIE9wdGlvbmFsKCkpLFxuICAgICAgICBfX3BhcmFtKDIsIEluamVjdChQTEFURk9STV9JRCkpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW1NpZGViYXJDb250YWluZXIsXG4gICAgICAgICAgICBDaGFuZ2VEZXRlY3RvclJlZixcbiAgICAgICAgICAgIE9iamVjdF0pXG4gICAgXSwgU2lkZWJhcik7XG4gICAgcmV0dXJuIFNpZGViYXI7XG59KCkpO1xuZXhwb3J0IHsgU2lkZWJhciB9O1xuIl19","map":null,"metadata":{},"sourceType":"module"}