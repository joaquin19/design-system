{"ast":null,"code":"import HasObservers from '../core/has-observers';\nconst push = [].push;\nconst pop = [].pop;\nconst splice = [].splice;\nconst shift = [].shift;\nconst slice = [].slice;\nconst unshift = [].unshift;\n\nclass ElementsArray extends HasObservers {\n  constructor(array = []) {\n    super();\n    this.length = 0;\n\n    this._splice(0, array.length, array);\n  }\n\n  elements(value) {\n    if (value) {\n      this._splice(0, this.length, value);\n\n      this._change();\n\n      return this;\n    }\n\n    return this.slice(0);\n  }\n\n  push() {\n    const elements = arguments;\n    const result = push.apply(this, elements);\n\n    this._add(elements);\n\n    return result;\n  }\n\n  slice() {\n    return slice.call(this);\n  }\n\n  pop() {\n    const length = this.length;\n    const result = pop.apply(this);\n\n    if (length) {\n      this._remove([result]);\n    }\n\n    return result;\n  }\n\n  splice(index, howMany) {\n    const elements = slice.call(arguments, 2);\n\n    const result = this._splice(index, howMany, elements);\n\n    this._change();\n\n    return result;\n  }\n\n  shift() {\n    const length = this.length;\n    const result = shift.apply(this);\n\n    if (length) {\n      this._remove([result]);\n    }\n\n    return result;\n  }\n\n  unshift() {\n    const elements = arguments;\n    const result = unshift.apply(this, elements);\n\n    this._add(elements);\n\n    return result;\n  }\n\n  indexOf(element) {\n    const length = this.length;\n\n    for (let idx = 0; idx < length; idx++) {\n      if (this[idx] === element) {\n        return idx;\n      }\n    }\n\n    return -1;\n  }\n\n  _splice(index, howMany, elements) {\n    const result = splice.apply(this, [index, howMany].concat(elements));\n\n    this._clearObserver(result);\n\n    this._setObserver(elements);\n\n    return result;\n  }\n\n  _add(elements) {\n    this._setObserver(elements);\n\n    this._change();\n  }\n\n  _remove(elements) {\n    this._clearObserver(elements);\n\n    this._change();\n  }\n\n  _setObserver(elements) {\n    for (let idx = 0; idx < elements.length; idx++) {\n      elements[idx].addObserver(this);\n    }\n  }\n\n  _clearObserver(elements) {\n    for (let idx = 0; idx < elements.length; idx++) {\n      elements[idx].removeObserver(this);\n    }\n  }\n\n  _change() {}\n\n}\n\nexport default ElementsArray;","map":null,"metadata":{},"sourceType":"module"}