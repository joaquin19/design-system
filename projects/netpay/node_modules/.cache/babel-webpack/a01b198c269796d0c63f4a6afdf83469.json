{"ast":null,"code":"/**-----------------------------------------------------------------------------------------\n* Copyright © 2021 Progress Software Corporation. All rights reserved.\n* Licensed under commercial license. See LICENSE.md in the project root for more information\n*-------------------------------------------------------------------------------------------*/\nimport { __decorate, __metadata, __param } from 'tslib';\nimport { EventEmitter, Input, Output, ViewChild, ElementRef, HostBinding, Component, Renderer2, Directive, TemplateRef, Injectable, ViewChildren, QueryList, ChangeDetectorRef, NgZone, InjectionToken, forwardRef, isDevMode, ContentChild, ViewContainerRef, Optional, Inject, KeyValueDiffers, ContentChildren, ChangeDetectionStrategy, NgModule, HostListener } from '@angular/core';\nimport { isDocumentAvailable, Keys, isChanged, hasObservers, KendoInput, anyChanged, guid, ResizeSensorModule, EventsModule } from '@progress/kendo-angular-common';\nimport { NG_VALUE_ACCESSOR, FormsModule } from '@angular/forms';\nimport { validatePackage } from '@progress/kendo-licensing';\nimport { getter, pointers, touchEnabled } from '@progress/kendo-common';\nimport { LocalizationService, L10N_PREFIX, ComponentMessages } from '@progress/kendo-angular-l10n';\nimport { merge, fromEvent, Subject, Subscription, of, interval } from 'rxjs';\nimport { PopupService, PopupModule } from '@progress/kendo-angular-popup';\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@progress/kendo-angular-l10n';\nimport * as ɵngcc2 from '@progress/kendo-angular-common';\nimport * as ɵngcc3 from '@angular/common';\nimport * as ɵngcc4 from '@progress/kendo-angular-popup';\nimport * as ɵngcc5 from '@angular/forms';\nimport * as ɵngcc6 from '@progress/kendo-angular-treeview';\nconst _c0 = [\"input\"];\n\nconst _c1 = function (a0, a1) {\n  return {\n    focus: a0,\n    blur: a1\n  };\n};\n\nconst _c2 = [\"content\"];\nconst _c3 = [\"list\"];\nconst _c4 = [\"virtualContainer\"];\n\nfunction ListComponent_div_0_1_ng_template_0_Template(rf, ctx) {}\n\nconst _c5 = function (a0, a1) {\n  return {\n    templateRef: a0,\n    $implicit: a1\n  };\n};\n\nfunction ListComponent_div_0_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, ListComponent_div_0_1_ng_template_0_Template, 0, 0, \"ng-template\", 10);\n  }\n\n  if (rf & 2) {\n    const ctx_r7 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"templateContext\", ɵngcc0.ɵɵpureFunction2(1, _c5, ctx_r7.fixedGroupTemplate.templateRef, ctx_r7.currentGroup));\n  }\n}\n\nfunction ListComponent_div_0_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"strong\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r8 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r8.currentGroup);\n  }\n}\n\nconst _c6 = function (a0) {\n  return {\n    \"k-virtual-item\": a0\n  };\n};\n\nconst _c7 = function (a0, a1, a2) {\n  return {\n    \"height.px\": a0,\n    \"minHeight.px\": a1,\n    \"boxSizing\": a2\n  };\n};\n\nfunction ListComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 8);\n    ɵngcc0.ɵɵtemplate(1, ListComponent_div_0_1_Template, 1, 4, undefined, 5);\n    ɵngcc0.ɵɵtemplate(2, ListComponent_div_0_ng_template_2_Template, 2, 1, \"ng-template\", 9);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngClass\", ɵngcc0.ɵɵpureFunction1(4, _c6, ctx_r0.virtual))(\"ngStyle\", ɵngcc0.ɵɵpureFunction3(6, _c7, ctx_r0.virtual == null ? null : ctx_r0.virtual.itemHeight, ctx_r0.virtual == null ? null : ctx_r0.virtual.itemHeight, ctx_r0.virtual ? \"border-box\" : \"inherit\"));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.fixedGroupTemplate);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r0.fixedGroupTemplate);\n  }\n}\n\nfunction ListComponent_5_ng_template_0_label_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"label\", 14);\n    ɵngcc0.ɵɵelementStart(1, \"input\", 15);\n    ɵngcc0.ɵɵlistener(\"change\", function ListComponent_5_ng_template_0_label_1_Template_input_change_1_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r18);\n      const itemIndex_r12 = ɵngcc0.ɵɵnextContext().index;\n      const ctx_r16 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r16.onCheckedChange($event, itemIndex_r12);\n    });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const itemIndex_r12 = ɵngcc0.ɵɵnextContext().index;\n    const ctx_r13 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"checked\", ctx_r13.isChecked(itemIndex_r12));\n  }\n}\n\nfunction ListComponent_5_ng_template_0_2_ng_template_0_Template(rf, ctx) {}\n\nfunction ListComponent_5_ng_template_0_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, ListComponent_5_ng_template_0_2_ng_template_0_Template, 0, 0, \"ng-template\", 10);\n  }\n\n  if (rf & 2) {\n    const dataItem_r11 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r14 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"templateContext\", ɵngcc0.ɵɵpureFunction2(1, _c5, ctx_r14.template.templateRef, dataItem_r11));\n  }\n}\n\nfunction ListComponent_5_ng_template_0_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n  }\n\n  if (rf & 2) {\n    const dataItem_r11 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r15 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r15.getText(dataItem_r11));\n  }\n}\n\nconst _c8 = function (a0, a1) {\n  return {\n    \"k-virtual-item\": a0,\n    \"k-state-disabled\": a1\n  };\n};\n\nfunction ListComponent_5_ng_template_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"li\", 12);\n    ɵngcc0.ɵɵtemplate(1, ListComponent_5_ng_template_0_label_1_Template, 2, 1, \"label\", 13);\n    ɵngcc0.ɵɵtemplate(2, ListComponent_5_ng_template_0_2_Template, 1, 4, undefined, 5);\n    ɵngcc0.ɵɵtemplate(3, ListComponent_5_ng_template_0_ng_template_3_Template, 1, 1, \"ng-template\", 9);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const dataItem_r11 = ctx.$implicit;\n    const itemIndex_r12 = ctx.index;\n    const ctx_r10 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"checkboxes\", ctx_r10.checkboxes)(\"height\", ctx_r10.virtual == null ? null : ctx_r10.virtual.itemHeight)(\"index\", itemIndex_r12 + ctx_r10.startFrom)(\"multipleSelection\", ctx_r10.multipleSelection)(\"ngClass\", ɵngcc0.ɵɵpureFunction2(10, _c8, ctx_r10.virtual, ctx_r10.isDisabled(itemIndex_r12)));\n    ɵngcc0.ɵɵattribute(\"id\", ctx_r10.optionPrefix + \"-\" + ctx_r10.getValue(dataItem_r11))(\"tabIndex\", -1);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r10.checkboxes.enabled);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r10.template);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r10.template);\n  }\n}\n\nfunction ListComponent_5_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, ListComponent_5_ng_template_0_Template, 4, 13, \"ng-template\", 11);\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r3.data);\n  }\n}\n\nfunction ListComponent_6_ng_template_0_li_0_1_ng_template_0_Template(rf, ctx) {}\n\nfunction ListComponent_6_ng_template_0_li_0_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, ListComponent_6_ng_template_0_li_0_1_ng_template_0_Template, 0, 0, \"ng-template\", 10);\n  }\n\n  if (rf & 2) {\n    const dataItem_r24 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    const ctx_r28 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"templateContext\", ɵngcc0.ɵɵpureFunction2(1, _c5, ctx_r28.groupTemplate.templateRef, dataItem_r24.value));\n  }\n}\n\nfunction ListComponent_6_ng_template_0_li_0_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"strong\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const dataItem_r24 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", dataItem_r24.value, \"\");\n  }\n}\n\nfunction ListComponent_6_ng_template_0_li_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"li\", 18);\n    ɵngcc0.ɵɵtemplate(1, ListComponent_6_ng_template_0_li_0_1_Template, 1, 4, undefined, 5);\n    ɵngcc0.ɵɵtemplate(2, ListComponent_6_ng_template_0_li_0_ng_template_2_Template, 2, 1, \"ng-template\", 9);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const dataItem_r24 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r26 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"ngClass\", ɵngcc0.ɵɵpureFunction1(7, _c6, ctx_r26.virtual))(\"ngStyle\", ɵngcc0.ɵɵpureFunction3(9, _c7, ctx_r26.virtual == null ? null : ctx_r26.virtual.itemHeight, ctx_r26.virtual == null ? null : ctx_r26.virtual.itemHeight, ctx_r26.virtual ? \"border-box\" : \"inherit\"));\n    ɵngcc0.ɵɵattribute(\"group-index\", dataItem_r24.index)(\"id\", ctx_r26.optionPrefix + \"-\" + ctx_r26.getValue(dataItem_r24.value))(\"tabIndex\", -1);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r26.groupTemplate);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r26.groupTemplate);\n  }\n}\n\nfunction ListComponent_6_ng_template_0_li_1_1_ng_template_0_Template(rf, ctx) {}\n\nfunction ListComponent_6_ng_template_0_li_1_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, ListComponent_6_ng_template_0_li_1_1_ng_template_0_Template, 0, 0, \"ng-template\", 10);\n  }\n\n  if (rf & 2) {\n    const dataItem_r24 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    const ctx_r34 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"templateContext\", ɵngcc0.ɵɵpureFunction2(1, _c5, ctx_r34.template.templateRef, dataItem_r24.value));\n  }\n}\n\nfunction ListComponent_6_ng_template_0_li_1_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n  }\n\n  if (rf & 2) {\n    const dataItem_r24 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    const ctx_r35 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r35.getText(dataItem_r24.value));\n  }\n}\n\nfunction ListComponent_6_ng_template_0_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"li\", 19);\n    ɵngcc0.ɵɵtemplate(1, ListComponent_6_ng_template_0_li_1_1_Template, 1, 4, undefined, 5);\n    ɵngcc0.ɵɵtemplate(2, ListComponent_6_ng_template_0_li_1_ng_template_2_Template, 1, 1, \"ng-template\", 9);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const dataItem_r24 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r27 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"height\", ctx_r27.virtual == null ? null : ctx_r27.virtual.itemHeight)(\"index\", dataItem_r24.offsetIndex)(\"multipleSelection\", ctx_r27.multipleSelection)(\"ngClass\", ɵngcc0.ɵɵpureFunction2(9, _c8, ctx_r27.virtual, ctx_r27.isDisabled(dataItem_r24.offsetIndex)));\n    ɵngcc0.ɵɵattribute(\"absolute-index\", dataItem_r24.index)(\"id\", ctx_r27.optionPrefix + \"-\" + ctx_r27.getValue(dataItem_r24.value))(\"tabIndex\", -1);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r27.template);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r27.template);\n  }\n}\n\nfunction ListComponent_6_ng_template_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, ListComponent_6_ng_template_0_li_0_Template, 3, 13, \"li\", 16);\n    ɵngcc0.ɵɵtemplate(1, ListComponent_6_ng_template_0_li_1_Template, 3, 12, \"li\", 17);\n  }\n\n  if (rf & 2) {\n    const dataItem_r24 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"ngIf\", dataItem_r24.header && dataItem_r24.index > 0);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !dataItem_r24.header);\n  }\n}\n\nfunction ListComponent_6_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, ListComponent_6_ng_template_0_Template, 2, 2, \"ng-template\", 11);\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r4.data);\n  }\n}\n\nfunction ListComponent_kendo_resize_sensor_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r41 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"kendo-resize-sensor\", 20);\n    ɵngcc0.ɵɵlistener(\"resize\", function ListComponent_kendo_resize_sensor_7_Template_kendo_resize_sensor_resize_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r41);\n      const ctx_r40 = ɵngcc0.ɵɵnextContext();\n      return ctx_r40.listResize.emit();\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n}\n\nfunction ListComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r44 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"div\", 21, 22);\n    ɵngcc0.ɵɵelementStart(2, \"div\");\n    ɵngcc0.ɵɵelementStart(3, \"kendo-resize-sensor\", 20);\n    ɵngcc0.ɵɵlistener(\"resize\", function ListComponent_div_8_Template_kendo_resize_sensor_resize_3_listener() {\n      ɵngcc0.ɵɵrestoreView(_r44);\n      const ctx_r43 = ɵngcc0.ɵɵnextContext();\n      return ctx_r43.listResize.emit();\n    });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵstyleProp(\"height\", ctx_r6.scrollHeight, \"px\");\n  }\n}\n\nconst _c9 = function (a0, a1) {\n  return {\n    \"k-virtual-content\": a0,\n    \"k-list-scroller\": a1\n  };\n};\n\nconst _c10 = function (a0) {\n  return {\n    \"k-virtual-list\": a0\n  };\n};\n\nconst _c11 = [\"container\"];\nconst _c12 = [\"popupTemplate\"];\nconst _c13 = [\"optionsList\"];\n\nfunction AutoCompleteComponent_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"span\", 8);\n    ɵngcc0.ɵɵlistener(\"click\", function AutoCompleteComponent_span_3_Template_span_click_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r8);\n      const ctx_r7 = ɵngcc0.ɵɵnextContext();\n      return ctx_r7.clearValue($event);\n    })(\"mousedown\", function AutoCompleteComponent_span_3_Template_span_mousedown_0_listener($event) {\n      return $event.preventDefault();\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵstyleProp(\"visibility\", ctx_r1.clearButtonVisiblity);\n    ɵngcc0.ɵɵattribute(\"title\", ctx_r1.clearTitle);\n  }\n}\n\nfunction AutoCompleteComponent_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"span\", 9);\n  }\n}\n\nfunction AutoCompleteComponent_ng_template_5_0_ng_template_0_Template(rf, ctx) {}\n\nconst _c18 = function (a0) {\n  return {\n    templateRef: a0\n  };\n};\n\nfunction AutoCompleteComponent_ng_template_5_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, AutoCompleteComponent_ng_template_5_0_ng_template_0_Template, 0, 0, \"ng-template\", 14);\n  }\n\n  if (rf & 2) {\n    const ctx_r10 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"templateContext\", ɵngcc0.ɵɵpureFunction1(1, _c18, ctx_r10.headerTemplate.templateRef));\n  }\n}\n\nfunction AutoCompleteComponent_ng_template_5_div_3_ng_template_1_Template(rf, ctx) {}\n\nfunction AutoCompleteComponent_ng_template_5_div_3_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r16 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r16.noDataText);\n  }\n}\n\nfunction AutoCompleteComponent_ng_template_5_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 15);\n    ɵngcc0.ɵɵtemplate(1, AutoCompleteComponent_ng_template_5_div_3_ng_template_1_Template, 0, 0, \"ng-template\", 16);\n    ɵngcc0.ɵɵtemplate(2, AutoCompleteComponent_ng_template_5_div_3_ng_template_2_Template, 2, 1, \"ng-template\", 6);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r12 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r12.noDataTemplate)(\"templateContext\", ɵngcc0.ɵɵpureFunction1(3, _c18, ctx_r12.noDataTemplate == null ? null : ctx_r12.noDataTemplate.templateRef));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r12.noDataTemplate);\n  }\n}\n\nfunction AutoCompleteComponent_ng_template_5_4_ng_template_0_Template(rf, ctx) {}\n\nfunction AutoCompleteComponent_ng_template_5_4_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, AutoCompleteComponent_ng_template_5_4_ng_template_0_Template, 0, 0, \"ng-template\", 14);\n  }\n\n  if (rf & 2) {\n    const ctx_r13 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"templateContext\", ɵngcc0.ɵɵpureFunction1(1, _c18, ctx_r13.footerTemplate.templateRef));\n  }\n}\n\nfunction AutoCompleteComponent_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵtemplate(0, AutoCompleteComponent_ng_template_5_0_Template, 1, 3, undefined, 10);\n    ɵngcc0.ɵɵelementStart(1, \"kendo-list\", 11, 12);\n    ɵngcc0.ɵɵlistener(\"pageChange\", function AutoCompleteComponent_ng_template_5_Template_kendo_list_pageChange_1_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r19);\n      const ctx_r18 = ɵngcc0.ɵɵnextContext();\n      return ctx_r18.pageChange($event);\n    });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(3, AutoCompleteComponent_ng_template_5_div_3_Template, 3, 5, \"div\", 13);\n    ɵngcc0.ɵɵtemplate(4, AutoCompleteComponent_ng_template_5_4_Template, 1, 3, undefined, 10);\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r4.headerTemplate);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"id\", ctx_r4.listBoxId)(\"optionPrefix\", ctx_r4.optionPrefix)(\"data\", ctx_r4.data)(\"textField\", ctx_r4.valueField)(\"valueField\", ctx_r4.valueField)(\"template\", ctx_r4.template)(\"groupTemplate\", ctx_r4.groupTemplate)(\"fixedGroupTemplate\", ctx_r4.fixedGroupTemplate)(\"height\", ctx_r4.listHeight)(\"show\", ctx_r4.isOpen)(\"virtual\", ctx_r4.virtual);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r4.data.length === 0);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r4.footerTemplate);\n  }\n}\n\nfunction AutoCompleteComponent_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"kendo-resize-sensor\", 17);\n    ɵngcc0.ɵɵlistener(\"resize\", function AutoCompleteComponent_ng_template_7_Template_kendo_resize_sensor_resize_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r21);\n      const ctx_r20 = ɵngcc0.ɵɵnextContext();\n      return ctx_r20.onResize();\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n}\n\nconst _c19 = [\"wrapper\"];\nconst _c20 = [\"select\"];\n\nconst _c25 = function (a0) {\n  return {\n    mousedown: a0\n  };\n};\n\nfunction ComboBoxComponent_span_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"span\", 12);\n    ɵngcc0.ɵɵlistener(\"click\", function ComboBoxComponent_span_5_Template_span_click_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r9);\n      const ctx_r8 = ɵngcc0.ɵɵnextContext();\n      return ctx_r8.clearValue($event);\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵstyleProp(\"visibility\", ctx_r2.clearButtonVisiblity);\n    ɵngcc0.ɵɵproperty(\"kendoEventsOutsideAngular\", ɵngcc0.ɵɵpureFunction1(4, _c25, ctx_r2.preventEventDefault));\n    ɵngcc0.ɵɵattribute(\"title\", ctx_r2.clearTitle);\n  }\n}\n\nfunction ComboBoxComponent_ng_template_9_0_ng_template_0_Template(rf, ctx) {}\n\nfunction ComboBoxComponent_ng_template_9_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, ComboBoxComponent_ng_template_9_0_ng_template_0_Template, 0, 0, \"ng-template\", 17);\n  }\n\n  if (rf & 2) {\n    const ctx_r10 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"templateContext\", ɵngcc0.ɵɵpureFunction1(1, _c18, ctx_r10.headerTemplate.templateRef));\n  }\n}\n\nfunction ComboBoxComponent_ng_template_9_div_3_ng_template_1_Template(rf, ctx) {}\n\nfunction ComboBoxComponent_ng_template_9_div_3_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r16 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r16.noDataText);\n  }\n}\n\nfunction ComboBoxComponent_ng_template_9_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 18);\n    ɵngcc0.ɵɵtemplate(1, ComboBoxComponent_ng_template_9_div_3_ng_template_1_Template, 0, 0, \"ng-template\", 19);\n    ɵngcc0.ɵɵtemplate(2, ComboBoxComponent_ng_template_9_div_3_ng_template_2_Template, 2, 1, \"ng-template\", 10);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r12 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r12.noDataTemplate)(\"templateContext\", ɵngcc0.ɵɵpureFunction1(3, _c18, ctx_r12.noDataTemplate ? ctx_r12.noDataTemplate.templateRef : undefined));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r12.noDataTemplate);\n  }\n}\n\nfunction ComboBoxComponent_ng_template_9_4_ng_template_0_Template(rf, ctx) {}\n\nfunction ComboBoxComponent_ng_template_9_4_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, ComboBoxComponent_ng_template_9_4_ng_template_0_Template, 0, 0, \"ng-template\", 17);\n  }\n\n  if (rf & 2) {\n    const ctx_r13 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"templateContext\", ɵngcc0.ɵɵpureFunction1(1, _c18, ctx_r13.footerTemplate.templateRef));\n  }\n}\n\nfunction ComboBoxComponent_ng_template_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵtemplate(0, ComboBoxComponent_ng_template_9_0_Template, 1, 3, undefined, 13);\n    ɵngcc0.ɵɵelementStart(1, \"kendo-list\", 14, 15);\n    ɵngcc0.ɵɵlistener(\"pageChange\", function ComboBoxComponent_ng_template_9_Template_kendo_list_pageChange_1_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r19);\n      const ctx_r18 = ɵngcc0.ɵɵnextContext();\n      return ctx_r18.pageChange($event);\n    });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(3, ComboBoxComponent_ng_template_9_div_3_Template, 3, 5, \"div\", 16);\n    ɵngcc0.ɵɵtemplate(4, ComboBoxComponent_ng_template_9_4_Template, 1, 3, undefined, 13);\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r5.headerTemplate);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"id\", ctx_r5.listBoxId)(\"optionPrefix\", ctx_r5.optionPrefix)(\"data\", ctx_r5.data)(\"textField\", ctx_r5.textField)(\"valueField\", ctx_r5.valueField)(\"template\", ctx_r5.template)(\"groupTemplate\", ctx_r5.groupTemplate)(\"fixedGroupTemplate\", ctx_r5.fixedGroupTemplate)(\"height\", ctx_r5.listHeight)(\"show\", ctx_r5.isOpen)(\"virtual\", ctx_r5.virtual);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r5.data.length === 0);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r5.footerTemplate);\n  }\n}\n\nfunction ComboBoxComponent_ng_template_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"kendo-resize-sensor\", 20);\n    ɵngcc0.ɵɵlistener(\"resize\", function ComboBoxComponent_ng_template_11_Template_kendo_resize_sensor_resize_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r21);\n      const ctx_r20 = ɵngcc0.ɵɵnextContext();\n      return ctx_r20.onResize();\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n}\n\nconst _c26 = function (a0) {\n  return {\n    \"k-state-disabled\": a0\n  };\n};\n\nfunction DropDownListComponent_4_ng_template_0_Template(rf, ctx) {}\n\nfunction DropDownListComponent_4_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, DropDownListComponent_4_ng_template_0_Template, 0, 0, \"ng-template\", 10);\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"templateContext\", ɵngcc0.ɵɵpureFunction2(1, _c5, ctx_r1.valueTemplate.templateRef, ctx_r1.dataItem));\n  }\n}\n\nfunction DropDownListComponent_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵtextInterpolate(ctx_r2.getText());\n  }\n}\n\nfunction DropDownListComponent_ng_template_8_ng_template_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"span\", 14);\n    ɵngcc0.ɵɵlistener(\"click\", function DropDownListComponent_ng_template_8_ng_template_0_Template_span_click_0_listener($event) {\n      return $event.stopImmediatePropagation();\n    });\n    ɵngcc0.ɵɵelementStart(1, \"input\", 15);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function DropDownListComponent_ng_template_8_ng_template_0_Template_input_ngModelChange_1_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r17);\n      const ctx_r16 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r16.filterText = $event;\n    })(\"keydown\", function DropDownListComponent_ng_template_8_ng_template_0_Template_input_keydown_1_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r17);\n      const ctx_r18 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r18.keydown($event);\n    })(\"input\", function DropDownListComponent_ng_template_8_ng_template_0_Template_input_input_1_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r17);\n      const ctx_r19 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r19.handleFilter($event);\n    })(\"focus\", function DropDownListComponent_ng_template_8_ng_template_0_Template_input_focus_1_listener() {\n      ɵngcc0.ɵɵrestoreView(_r17);\n      const ctx_r20 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r20.onFilterFocus();\n    })(\"blur\", function DropDownListComponent_ng_template_8_ng_template_0_Template_input_blur_1_listener() {\n      ɵngcc0.ɵɵrestoreView(_r17);\n      const ctx_r21 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r21.blurFilterInput();\n    });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(2, \"span\", 16);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r8 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"filterInput\", ctx_r8.isFocused && !ctx_r8.touchEnabled)(\"dir\", ctx_r8.direction)(\"ngModel\", ctx_r8.filterText);\n    ɵngcc0.ɵɵattribute(\"aria-owns\", ctx_r8.ariaOwns)(\"aria-activedescendant\", ctx_r8.ariaActivedescendant)(\"aria-label\", ctx_r8.noDataLabel);\n  }\n}\n\nfunction DropDownListComponent_ng_template_8_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 17);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r9 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"ngClass\", ɵngcc0.ɵɵpureFunction1(3, _c26, ctx_r9.isDisabledDefaultItem))(\"index\", -1);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ctx_r9.getDefaultItemText(), \" \");\n  }\n}\n\nfunction DropDownListComponent_ng_template_8_ng_template_2_ng_template_1_Template(rf, ctx) {}\n\nfunction DropDownListComponent_ng_template_8_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 17);\n    ɵngcc0.ɵɵtemplate(1, DropDownListComponent_ng_template_8_ng_template_2_ng_template_1_Template, 0, 0, \"ng-template\", 10);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r10 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"ngClass\", ɵngcc0.ɵɵpureFunction1(3, _c26, ctx_r10.isDisabledDefaultItem))(\"index\", -1);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"templateContext\", ɵngcc0.ɵɵpureFunction2(5, _c5, ctx_r10.itemTemplate.templateRef, ctx_r10.defaultItem));\n  }\n}\n\nfunction DropDownListComponent_ng_template_8_3_ng_template_0_Template(rf, ctx) {}\n\nfunction DropDownListComponent_ng_template_8_3_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, DropDownListComponent_ng_template_8_3_ng_template_0_Template, 0, 0, \"ng-template\", 10);\n  }\n\n  if (rf & 2) {\n    const ctx_r11 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"templateContext\", ɵngcc0.ɵɵpureFunction1(1, _c18, ctx_r11.headerTemplate.templateRef));\n  }\n}\n\nfunction DropDownListComponent_ng_template_8_div_6_ng_template_1_Template(rf, ctx) {}\n\nfunction DropDownListComponent_ng_template_8_div_6_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r25 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r25.noDataText);\n  }\n}\n\nfunction DropDownListComponent_ng_template_8_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 18);\n    ɵngcc0.ɵɵtemplate(1, DropDownListComponent_ng_template_8_div_6_ng_template_1_Template, 0, 0, \"ng-template\", 19);\n    ɵngcc0.ɵɵtemplate(2, DropDownListComponent_ng_template_8_div_6_ng_template_2_Template, 2, 1, \"ng-template\", 5);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r13 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r13.noDataTemplate)(\"templateContext\", ɵngcc0.ɵɵpureFunction1(3, _c18, ctx_r13.noDataTemplate ? ctx_r13.noDataTemplate.templateRef : undefined));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r13.noDataTemplate);\n  }\n}\n\nfunction DropDownListComponent_ng_template_8_7_ng_template_0_Template(rf, ctx) {}\n\nfunction DropDownListComponent_ng_template_8_7_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, DropDownListComponent_ng_template_8_7_ng_template_0_Template, 0, 0, \"ng-template\", 10);\n  }\n\n  if (rf & 2) {\n    const ctx_r14 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"templateContext\", ɵngcc0.ɵɵpureFunction1(1, _c18, ctx_r14.footerTemplate.templateRef));\n  }\n}\n\nfunction DropDownListComponent_ng_template_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r28 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵtemplate(0, DropDownListComponent_ng_template_8_ng_template_0_Template, 3, 6, \"ng-template\", 5);\n    ɵngcc0.ɵɵtemplate(1, DropDownListComponent_ng_template_8_ng_template_1_Template, 2, 5, \"ng-template\", 5);\n    ɵngcc0.ɵɵtemplate(2, DropDownListComponent_ng_template_8_ng_template_2_Template, 2, 8, \"ng-template\", 5);\n    ɵngcc0.ɵɵtemplate(3, DropDownListComponent_ng_template_8_3_Template, 1, 3, undefined, 4);\n    ɵngcc0.ɵɵelementStart(4, \"kendo-list\", 11, 12);\n    ɵngcc0.ɵɵlistener(\"pageChange\", function DropDownListComponent_ng_template_8_Template_kendo_list_pageChange_4_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r28);\n      const ctx_r27 = ɵngcc0.ɵɵnextContext();\n      return ctx_r27.pageChange($event);\n    });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(6, DropDownListComponent_ng_template_8_div_6_Template, 3, 5, \"div\", 13);\n    ɵngcc0.ɵɵtemplate(7, DropDownListComponent_ng_template_8_7_Template, 1, 3, undefined, 4);\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r4.filterable);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r4.defaultItem && !ctx_r4.itemTemplate);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r4.defaultItem && ctx_r4.itemTemplate);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r4.headerTemplate);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"id\", ctx_r4.listBoxId)(\"optionPrefix\", ctx_r4.optionPrefix)(\"data\", ctx_r4.data)(\"textField\", ctx_r4.textField)(\"valueField\", ctx_r4.valueField)(\"template\", ctx_r4.itemTemplate)(\"groupTemplate\", ctx_r4.groupTemplate)(\"fixedGroupTemplate\", ctx_r4.fixedGroupTemplate)(\"height\", ctx_r4.listHeight)(\"show\", ctx_r4.isOpen)(\"virtual\", ctx_r4.virtual);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r4.data.length === 0);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r4.footerTemplate);\n  }\n}\n\nfunction DropDownListComponent_ng_template_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r30 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"kendo-resize-sensor\", 20);\n    ɵngcc0.ɵɵlistener(\"resize\", function DropDownListComponent_ng_template_10_Template_kendo_resize_sensor_resize_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r30);\n      const ctx_r29 = ɵngcc0.ɵɵnextContext();\n      return ctx_r29.onResize();\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n}\n\nconst _c29 = function (a1) {\n  return {\n    \"k-dropdown-wrap\": true,\n    \"k-state-disabled\": a1\n  };\n};\n\nfunction MultiSelectComponent_span_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"span\", 11);\n    ɵngcc0.ɵɵlistener(\"mousedown\", function MultiSelectComponent_span_6_Template_span_mousedown_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r9);\n      const ctx_r8 = ɵngcc0.ɵɵnextContext();\n      return ctx_r8.clearAll($event);\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵstyleProp(\"visibility\", ctx_r2.clearButtonVisiblity);\n    ɵngcc0.ɵɵattribute(\"title\", ctx_r2.clearTitle);\n  }\n}\n\nfunction MultiSelectComponent_span_7_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"span\", 12);\n  }\n}\n\nfunction MultiSelectComponent_ng_template_8_0_ng_template_0_Template(rf, ctx) {}\n\nfunction MultiSelectComponent_ng_template_8_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, MultiSelectComponent_ng_template_8_0_ng_template_0_Template, 0, 0, \"ng-template\", 18);\n  }\n\n  if (rf & 2) {\n    const ctx_r10 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"templateContext\", ɵngcc0.ɵɵpureFunction1(1, _c18, ctx_r10.headerTemplate.templateRef));\n  }\n}\n\nfunction MultiSelectComponent_ng_template_8_div_1_2_ng_template_0_Template(rf, ctx) {}\n\nfunction MultiSelectComponent_ng_template_8_div_1_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, MultiSelectComponent_ng_template_8_div_1_2_ng_template_0_Template, 0, 0, \"ng-template\", 18);\n  }\n\n  if (rf & 2) {\n    const ctx_r16 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵproperty(\"templateContext\", ɵngcc0.ɵɵpureFunction2(1, _c5, ctx_r16.customItemTemplate.templateRef, ctx_r16.text));\n  }\n}\n\nfunction MultiSelectComponent_ng_template_8_div_1_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n  }\n\n  if (rf & 2) {\n    const ctx_r18 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r18.text);\n  }\n}\n\nfunction MultiSelectComponent_ng_template_8_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 19);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 20);\n    ɵngcc0.ɵɵtemplate(2, MultiSelectComponent_ng_template_8_div_1_2_Template, 1, 4, undefined, 21);\n    ɵngcc0.ɵɵtemplate(3, MultiSelectComponent_ng_template_8_div_1_ng_template_3_Template, 1, 1, \"ng-template\", null, 22, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelement(5, \"span\", 23);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const _r17 = ɵngcc0.ɵɵreference(4);\n\n    const ctx_r11 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"multipleSelection\", true)(\"index\", -1);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r11.customItemTemplate)(\"ngIfElse\", _r17);\n  }\n}\n\nfunction MultiSelectComponent_ng_template_8_div_4_ng_template_1_Template(rf, ctx) {}\n\nfunction MultiSelectComponent_ng_template_8_div_4_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r21 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r21.noDataText);\n  }\n}\n\nfunction MultiSelectComponent_ng_template_8_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 24);\n    ɵngcc0.ɵɵtemplate(1, MultiSelectComponent_ng_template_8_div_4_ng_template_1_Template, 0, 0, \"ng-template\", 25);\n    ɵngcc0.ɵɵtemplate(2, MultiSelectComponent_ng_template_8_div_4_ng_template_2_Template, 2, 1, \"ng-template\", 9);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r13 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r13.noDataTemplate)(\"templateContext\", ɵngcc0.ɵɵpureFunction1(3, _c18, ctx_r13.noDataTemplate ? ctx_r13.noDataTemplate.templateRef : undefined));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r13.noDataTemplate);\n  }\n}\n\nfunction MultiSelectComponent_ng_template_8_5_ng_template_0_Template(rf, ctx) {}\n\nfunction MultiSelectComponent_ng_template_8_5_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, MultiSelectComponent_ng_template_8_5_ng_template_0_Template, 0, 0, \"ng-template\", 18);\n  }\n\n  if (rf & 2) {\n    const ctx_r14 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"templateContext\", ɵngcc0.ɵɵpureFunction1(1, _c18, ctx_r14.footerTemplate.templateRef));\n  }\n}\n\nfunction MultiSelectComponent_ng_template_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵtemplate(0, MultiSelectComponent_ng_template_8_0_Template, 1, 3, undefined, 13);\n    ɵngcc0.ɵɵtemplate(1, MultiSelectComponent_ng_template_8_div_1_Template, 6, 4, \"div\", 14);\n    ɵngcc0.ɵɵelementStart(2, \"kendo-list\", 15, 16);\n    ɵngcc0.ɵɵlistener(\"pageChange\", function MultiSelectComponent_ng_template_8_Template_kendo_list_pageChange_2_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r24);\n      const ctx_r23 = ɵngcc0.ɵɵnextContext();\n      return ctx_r23.pageChange($event);\n    });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(4, MultiSelectComponent_ng_template_8_div_4_Template, 3, 5, \"div\", 17);\n    ɵngcc0.ɵɵtemplate(5, MultiSelectComponent_ng_template_8_5_Template, 1, 3, undefined, 13);\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r5.headerTemplate);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r5.allowCustom && ctx_r5.text);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"id\", ctx_r5.listBoxId)(\"optionPrefix\", ctx_r5.optionPrefix)(\"data\", ctx_r5.data)(\"textField\", ctx_r5.textField)(\"valueField\", ctx_r5.valueField)(\"height\", ctx_r5.listHeight)(\"template\", ctx_r5.template)(\"groupTemplate\", ctx_r5.groupTemplate)(\"fixedGroupTemplate\", ctx_r5.fixedGroupTemplate)(\"show\", ctx_r5.isOpen)(\"multipleSelection\", true)(\"virtual\", ctx_r5.virtual)(\"checkboxes\", ctx_r5.checkboxes);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r5.data.length === 0);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r5.footerTemplate);\n  }\n}\n\nfunction MultiSelectComponent_ng_template_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r26 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"kendo-resize-sensor\", 26);\n    ɵngcc0.ɵɵlistener(\"resize\", function MultiSelectComponent_ng_template_10_Template_kendo_resize_sensor_resize_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r26);\n      const ctx_r25 = ɵngcc0.ɵɵnextContext();\n      return ctx_r25.onResize();\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n}\n\nconst _c34 = [\"header\"];\n\nfunction MultiColumnComboBoxComponent_span_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"span\", 12);\n    ɵngcc0.ɵɵlistener(\"click\", function MultiColumnComboBoxComponent_span_5_Template_span_click_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r9);\n      const ctx_r8 = ɵngcc0.ɵɵnextContext();\n      return ctx_r8.clearValue($event);\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵstyleProp(\"visibility\", ctx_r2.clearButtonVisiblity);\n    ɵngcc0.ɵɵproperty(\"kendoEventsOutsideAngular\", ɵngcc0.ɵɵpureFunction1(4, _c25, ctx_r2.preventEventDefault));\n    ɵngcc0.ɵɵattribute(\"title\", ctx_r2.clearTitle);\n  }\n}\n\nfunction MultiColumnComboBoxComponent_ng_template_9_0_ng_template_0_Template(rf, ctx) {}\n\nfunction MultiColumnComboBoxComponent_ng_template_9_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, MultiColumnComboBoxComponent_ng_template_9_0_ng_template_0_Template, 0, 0, \"ng-template\", 23);\n  }\n\n  if (rf & 2) {\n    const ctx_r10 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"templateContext\", ɵngcc0.ɵɵpureFunction1(1, _c18, ctx_r10.headerTemplate == null ? null : ctx_r10.headerTemplate.templateRef));\n  }\n}\n\nfunction MultiColumnComboBoxComponent_ng_template_9_ng_container_6_col_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"col\");\n  }\n\n  if (rf & 2) {\n    const column_r20 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵstyleProp(\"width\", column_r20.width, \"px\");\n  }\n}\n\nfunction MultiColumnComboBoxComponent_ng_template_9_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, MultiColumnComboBoxComponent_ng_template_9_ng_container_6_col_1_Template, 1, 2, \"col\", 24);\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const column_r20 = ctx.$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !column_r20.hidden && column_r20.matchesMedia);\n  }\n}\n\nfunction MultiColumnComboBoxComponent_ng_template_9_ng_container_9_th_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const column_r23 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", column_r23.title || column_r23.field, \" \");\n  }\n}\n\nfunction MultiColumnComboBoxComponent_ng_template_9_ng_container_9_th_1_2_ng_template_0_Template(rf, ctx) {}\n\nconst _c39 = function (a0, a1, a2) {\n  return {\n    templateRef: a0,\n    $implicit: a1,\n    column: a2\n  };\n};\n\nfunction MultiColumnComboBoxComponent_ng_template_9_ng_container_9_th_1_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, MultiColumnComboBoxComponent_ng_template_9_ng_container_9_th_1_2_ng_template_0_Template, 0, 0, \"ng-template\", 23);\n  }\n\n  if (rf & 2) {\n    const column_r23 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    ɵngcc0.ɵɵproperty(\"templateContext\", ɵngcc0.ɵɵpureFunction3(1, _c39, column_r23.headerTemplate == null ? null : column_r23.headerTemplate.templateRef, column_r23, column_r23));\n  }\n}\n\nfunction MultiColumnComboBoxComponent_ng_template_9_ng_container_9_th_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"th\", 26);\n    ɵngcc0.ɵɵtemplate(1, MultiColumnComboBoxComponent_ng_template_9_ng_container_9_th_1_ng_container_1_Template, 2, 1, \"ng-container\", 13);\n    ɵngcc0.ɵɵtemplate(2, MultiColumnComboBoxComponent_ng_template_9_ng_container_9_th_1_2_Template, 1, 5, undefined, 13);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const column_r23 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵproperty(\"ngStyle\", column_r23.headerStyle)(\"ngClass\", column_r23.headerClass);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !column_r23.headerTemplate);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", column_r23.headerTemplate);\n  }\n}\n\nfunction MultiColumnComboBoxComponent_ng_template_9_ng_container_9_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, MultiColumnComboBoxComponent_ng_template_9_ng_container_9_th_1_Template, 3, 4, \"th\", 25);\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const column_r23 = ctx.$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !column_r23.hidden && column_r23.matchesMedia);\n  }\n}\n\nfunction MultiColumnComboBoxComponent_ng_template_9_ng_template_10_ng_container_0_span_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const column_r33 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    const dataItem_r31 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r35 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ctx_r35.textFrom(dataItem_r31, column_r33.field), \" \");\n  }\n}\n\nfunction MultiColumnComboBoxComponent_ng_template_9_ng_template_10_ng_container_0_span_1_2_ng_template_0_Template(rf, ctx) {}\n\nconst _c40 = function (a0, a1, a2, a3) {\n  return {\n    templateRef: a0,\n    $implicit: a1,\n    dataItem: a2,\n    column: a3\n  };\n};\n\nfunction MultiColumnComboBoxComponent_ng_template_9_ng_template_10_ng_container_0_span_1_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, MultiColumnComboBoxComponent_ng_template_9_ng_template_10_ng_container_0_span_1_2_ng_template_0_Template, 0, 0, \"ng-template\", 23);\n  }\n\n  if (rf & 2) {\n    const column_r33 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    const dataItem_r31 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵproperty(\"templateContext\", ɵngcc0.ɵɵpureFunction4(1, _c40, column_r33.cellTemplate == null ? null : column_r33.cellTemplate.templateRef, dataItem_r31, dataItem_r31, column_r33));\n  }\n}\n\nfunction MultiColumnComboBoxComponent_ng_template_9_ng_template_10_ng_container_0_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\", 28);\n    ɵngcc0.ɵɵtemplate(1, MultiColumnComboBoxComponent_ng_template_9_ng_template_10_ng_container_0_span_1_ng_container_1_Template, 2, 1, \"ng-container\", 13);\n    ɵngcc0.ɵɵtemplate(2, MultiColumnComboBoxComponent_ng_template_9_ng_template_10_ng_container_0_span_1_2_Template, 1, 6, undefined, 13);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const column_r33 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵstyleProp(\"width\", column_r33.width, \"px\");\n    ɵngcc0.ɵɵproperty(\"ngClass\", column_r33.class)(\"ngStyle\", column_r33.style);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !column_r33.cellTemplate);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", column_r33.cellTemplate);\n  }\n}\n\nfunction MultiColumnComboBoxComponent_ng_template_9_ng_template_10_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, MultiColumnComboBoxComponent_ng_template_9_ng_template_10_ng_container_0_span_1_Template, 3, 6, \"span\", 27);\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const column_r33 = ctx.$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !column_r33.hidden && column_r33.matchesMedia);\n  }\n}\n\nfunction MultiColumnComboBoxComponent_ng_template_9_ng_template_10_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, MultiColumnComboBoxComponent_ng_template_9_ng_template_10_ng_container_0_Template, 2, 1, \"ng-container\", 18);\n  }\n\n  if (rf & 2) {\n    const ctx_r15 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r15.columns);\n  }\n}\n\nfunction MultiColumnComboBoxComponent_ng_template_9_div_14_ng_template_1_Template(rf, ctx) {}\n\nfunction MultiColumnComboBoxComponent_ng_template_9_div_14_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r44 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r44.noDataText);\n  }\n}\n\nfunction MultiColumnComboBoxComponent_ng_template_9_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 29);\n    ɵngcc0.ɵɵtemplate(1, MultiColumnComboBoxComponent_ng_template_9_div_14_ng_template_1_Template, 0, 0, \"ng-template\", 30);\n    ɵngcc0.ɵɵtemplate(2, MultiColumnComboBoxComponent_ng_template_9_div_14_ng_template_2_Template, 2, 1, \"ng-template\", 31);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r17 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r17.noDataTemplate)(\"templateContext\", ɵngcc0.ɵɵpureFunction1(3, _c18, ctx_r17.noDataTemplate == null ? null : ctx_r17.noDataTemplate.templateRef));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r17.noDataTemplate);\n  }\n}\n\nfunction MultiColumnComboBoxComponent_ng_template_9_ng_container_15_ng_template_2_Template(rf, ctx) {}\n\nfunction MultiColumnComboBoxComponent_ng_template_9_ng_container_15_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 32);\n    ɵngcc0.ɵɵtemplate(2, MultiColumnComboBoxComponent_ng_template_9_ng_container_15_ng_template_2_Template, 0, 0, \"ng-template\", 23);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r18 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"templateContext\", ɵngcc0.ɵɵpureFunction1(1, _c18, ctx_r18.footerTemplate.templateRef));\n  }\n}\n\nfunction MultiColumnComboBoxComponent_ng_template_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r47 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵtemplate(0, MultiColumnComboBoxComponent_ng_template_9_0_Template, 1, 3, undefined, 13);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 14, 15);\n    ɵngcc0.ɵɵelementStart(3, \"div\", 16);\n    ɵngcc0.ɵɵelementStart(4, \"table\", 17);\n    ɵngcc0.ɵɵelementStart(5, \"colgroup\");\n    ɵngcc0.ɵɵtemplate(6, MultiColumnComboBoxComponent_ng_template_9_ng_container_6_Template, 2, 1, \"ng-container\", 18);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(7, \"tbody\");\n    ɵngcc0.ɵɵelementStart(8, \"tr\");\n    ɵngcc0.ɵɵtemplate(9, MultiColumnComboBoxComponent_ng_template_9_ng_container_9_Template, 2, 1, \"ng-container\", 18);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(10, MultiColumnComboBoxComponent_ng_template_9_ng_template_10_Template, 1, 1, \"ng-template\", null, 19, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementStart(12, \"kendo-list\", 20, 21);\n    ɵngcc0.ɵɵlistener(\"pageChange\", function MultiColumnComboBoxComponent_ng_template_9_Template_kendo_list_pageChange_12_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r47);\n      const ctx_r46 = ɵngcc0.ɵɵnextContext();\n      return ctx_r46.pageChange($event);\n    })(\"listResize\", function MultiColumnComboBoxComponent_ng_template_9_Template_kendo_list_listResize_12_listener() {\n      ɵngcc0.ɵɵrestoreView(_r47);\n\n      const _r11 = ɵngcc0.ɵɵreference(2);\n\n      const ctx_r48 = ɵngcc0.ɵɵnextContext();\n      return ctx_r48.updateHeaderPadding(_r11);\n    });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(14, MultiColumnComboBoxComponent_ng_template_9_div_14_Template, 3, 5, \"div\", 22);\n    ɵngcc0.ɵɵtemplate(15, MultiColumnComboBoxComponent_ng_template_9_ng_container_15_Template, 3, 3, \"ng-container\", 13);\n  }\n\n  if (rf & 2) {\n    const _r14 = ɵngcc0.ɵɵreference(11);\n\n    const ctx_r5 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r5.headerTemplate);\n    ɵngcc0.ɵɵadvance(6);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r5.columns);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r5.columns);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"id\", ctx_r5.listBoxId)(\"optionPrefix\", ctx_r5.optionPrefix)(\"data\", ctx_r5.data)(\"textField\", ctx_r5.textField)(\"valueField\", ctx_r5.valueField)(\"template\", ɵngcc0.ɵɵpureFunction1(17, _c18, _r14))(\"groupTemplate\", ctx_r5.groupTemplate)(\"fixedGroupTemplate\", ctx_r5.fixedGroupTemplate)(\"height\", ctx_r5.listHeight)(\"show\", ctx_r5.isOpen)(\"virtual\", ctx_r5.virtual)(\"listClass\", \"k-reset k-grid-list\");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r5.data.length === 0);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r5.footerTemplate);\n  }\n}\n\nfunction MultiColumnComboBoxComponent_kendo_resize_sensor_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r50 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"kendo-resize-sensor\", 33);\n    ɵngcc0.ɵɵlistener(\"resize\", function MultiColumnComboBoxComponent_kendo_resize_sensor_11_Template_kendo_resize_sensor_resize_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r50);\n      const ctx_r49 = ɵngcc0.ɵɵnextContext();\n      return ctx_r49.onResize();\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n}\n\nconst _c41 = [\"treeview\"];\nconst _c42 = [\"filterInput\"];\n\nfunction DropDownTreeComponent_4_ng_template_0_Template(rf, ctx) {}\n\nfunction DropDownTreeComponent_4_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, DropDownTreeComponent_4_ng_template_0_Template, 0, 0, \"ng-template\", 11);\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"templateContext\", ɵngcc0.ɵɵpureFunction2(1, _c5, ctx_r1.valueTemplate.templateRef, ctx_r1.dataItem));\n  }\n}\n\nfunction DropDownTreeComponent_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ctx_r2.text || ctx_r2.placeholder, \" \");\n  }\n}\n\nfunction DropDownTreeComponent_span_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"span\", 12);\n    ɵngcc0.ɵɵlistener(\"click\", function DropDownTreeComponent_span_6_Template_span_click_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r9);\n      const ctx_r8 = ɵngcc0.ɵɵnextContext();\n      return ctx_r8.clearValue($event);\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵstyleProp(\"visibility\", ctx_r3.clearButtonVisiblity);\n    ɵngcc0.ɵɵattribute(\"title\", ctx_r3.messageFor(\"clearTitle\"));\n  }\n}\n\nconst _c47 = function (a0) {\n  return {\n    blur: a0\n  };\n};\n\nfunction DropDownTreeComponent_ng_template_9_span_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"span\", 16);\n    ɵngcc0.ɵɵelementStart(1, \"input\", 17, 18);\n    ɵngcc0.ɵɵlistener(\"input\", function DropDownTreeComponent_ng_template_9_span_0_Template_input_input_1_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r17);\n      const ctx_r16 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r16.handleFilterInputChange($event.target.value);\n    })(\"keydown.arrowdown\", function DropDownTreeComponent_ng_template_9_span_0_Template_input_keydown_arrowdown_1_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r17);\n      const ctx_r18 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r18.handleKeydown($event);\n    })(\"keydown.alt.arrowup\", function DropDownTreeComponent_ng_template_9_span_0_Template_input_keydown_alt_arrowup_1_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r17);\n      const ctx_r19 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r19.handleKeydown($event);\n    })(\"ngModelChange\", function DropDownTreeComponent_ng_template_9_span_0_Template_input_ngModelChange_1_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r17);\n      const ctx_r20 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r20.filter = $event;\n    });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(3, \"span\", 19);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r10 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"filterInput\", ctx_r10.filterable && !ctx_r10.touchEnabled)(\"ngModel\", ctx_r10.filter)(\"kendoEventsOutsideAngular\", ɵngcc0.ɵɵpureFunction1(4, _c47, ctx_r10.handleBlur))(\"scope\", ctx_r10);\n  }\n}\n\nfunction DropDownTreeComponent_ng_template_9_1_ng_template_0_Template(rf, ctx) {}\n\nfunction DropDownTreeComponent_ng_template_9_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, DropDownTreeComponent_ng_template_9_1_ng_template_0_Template, 0, 0, \"ng-template\", 11);\n  }\n\n  if (rf & 2) {\n    const ctx_r11 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"templateContext\", ɵngcc0.ɵɵpureFunction1(1, _c18, ctx_r11.headerTemplate == null ? null : ctx_r11.headerTemplate.templateRef));\n  }\n}\n\nfunction DropDownTreeComponent_ng_template_9_kendo_treeview_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"kendo-treeview\", 20, 21);\n    ɵngcc0.ɵɵlistener(\"selectedKeysChange\", function DropDownTreeComponent_ng_template_9_kendo_treeview_2_Template_kendo_treeview_selectedKeysChange_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r24);\n      const ctx_r23 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r23.selectedKeys = $event;\n    })(\"focusout\", function DropDownTreeComponent_ng_template_9_kendo_treeview_2_Template_kendo_treeview_focusout_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r24);\n      const ctx_r25 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r25.handleBlur($event);\n    })(\"keydown\", function DropDownTreeComponent_ng_template_9_kendo_treeview_2_Template_kendo_treeview_keydown_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r24);\n      const ctx_r26 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r26.handleKeydown($event);\n    })(\"selectionChange\", function DropDownTreeComponent_ng_template_9_kendo_treeview_2_Template_kendo_treeview_selectionChange_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r24);\n      const ctx_r27 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r27.onSelectionChange($event);\n    })(\"expand\", function DropDownTreeComponent_ng_template_9_kendo_treeview_2_Template_kendo_treeview_expand_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r24);\n      const ctx_r28 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r28.nodeExpand.emit($event);\n    })(\"collapse\", function DropDownTreeComponent_ng_template_9_kendo_treeview_2_Template_kendo_treeview_collapse_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r24);\n      const ctx_r29 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r29.nodeCollapse.emit($event);\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r12 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵstyleProp(\"max-height\", ctx_r12.listHeight, \"px\");\n    ɵngcc0.ɵɵproperty(\"nodes\", ctx_r12.data)(\"animate\", false)(\"selectedKeys\", ctx_r12.selectedKeys)(\"selectBy\", ctx_r12.selectBy)(\"textField\", ctx_r12.textField)(\"children\", ctx_r12.children)(\"hasChildren\", ctx_r12.hasChildren)(\"loadOnDemand\", ctx_r12.loadOnDemand)(\"isExpanded\", ctx_r12.isNodeExpanded)(\"isDisabled\", ctx_r12.itemDisabled)(\"nodeTemplate\", ctx_r12.nodeTemplate)(\"filter\", ctx_r12.filter)(\"isVisible\", ctx_r12.isNodeVisible);\n  }\n}\n\nfunction DropDownTreeComponent_ng_template_9_3_ng_template_0_Template(rf, ctx) {}\n\nfunction DropDownTreeComponent_ng_template_9_3_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, DropDownTreeComponent_ng_template_9_3_ng_template_0_Template, 0, 0, \"ng-template\", 11);\n  }\n\n  if (rf & 2) {\n    const ctx_r13 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"templateContext\", ɵngcc0.ɵɵpureFunction1(1, _c18, ctx_r13.footerTemplate == null ? null : ctx_r13.footerTemplate.templateRef));\n  }\n}\n\nfunction DropDownTreeComponent_ng_template_9_div_4_ng_template_1_Template(rf, ctx) {}\n\nfunction DropDownTreeComponent_ng_template_9_div_4_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r32 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r32.messageFor(\"noDataText\"));\n  }\n}\n\nfunction DropDownTreeComponent_ng_template_9_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 22);\n    ɵngcc0.ɵɵtemplate(1, DropDownTreeComponent_ng_template_9_div_4_ng_template_1_Template, 0, 0, \"ng-template\", 23);\n    ɵngcc0.ɵɵtemplate(2, DropDownTreeComponent_ng_template_9_div_4_ng_template_2_Template, 2, 1, \"ng-template\", 5);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r14 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r14.noDataTemplate)(\"templateContext\", ɵngcc0.ɵɵpureFunction1(3, _c18, ctx_r14.noDataTemplate == null ? null : ctx_r14.noDataTemplate.templateRef));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r14.noDataTemplate);\n  }\n}\n\nfunction DropDownTreeComponent_ng_template_9_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, DropDownTreeComponent_ng_template_9_span_0_Template, 4, 6, \"span\", 13);\n    ɵngcc0.ɵɵtemplate(1, DropDownTreeComponent_ng_template_9_1_Template, 1, 3, undefined, 4);\n    ɵngcc0.ɵɵtemplate(2, DropDownTreeComponent_ng_template_9_kendo_treeview_2_Template, 2, 15, \"kendo-treeview\", 14);\n    ɵngcc0.ɵɵtemplate(3, DropDownTreeComponent_ng_template_9_3_Template, 1, 3, undefined, 4);\n    ɵngcc0.ɵɵtemplate(4, DropDownTreeComponent_ng_template_9_div_4_Template, 3, 5, \"div\", 15);\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r5.filterable);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r5.headerTemplate);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r5.data.length !== 0 && !ctx_r5.allNodesHidden);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r5.footerTemplate);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r5.data.length === 0 || ctx_r5.allNodesHidden);\n  }\n}\n\nfunction MultiSelectTreeComponent_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\", 9);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ctx_r1.placeholder, \" \");\n  }\n}\n\nfunction MultiSelectTreeComponent_span_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"span\", 10);\n    ɵngcc0.ɵɵlistener(\"click\", function MultiSelectTreeComponent_span_5_Template_span_click_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r8);\n      const ctx_r7 = ɵngcc0.ɵɵnextContext();\n      return ctx_r7.clearAll($event);\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵattribute(\"title\", ctx_r2.messageFor(\"clearTitle\"));\n  }\n}\n\nfunction MultiSelectTreeComponent_span_6_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"span\", 11);\n  }\n}\n\nfunction MultiSelectTreeComponent_ng_template_7_span_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"span\", 17);\n    ɵngcc0.ɵɵelementStart(1, \"input\", 18, 19);\n    ɵngcc0.ɵɵlistener(\"input\", function MultiSelectTreeComponent_ng_template_7_span_0_Template_input_input_1_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r16);\n      const ctx_r15 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r15.handleFilterInputChange($event.target.value);\n    })(\"keydown.arrowdown\", function MultiSelectTreeComponent_ng_template_7_span_0_Template_input_keydown_arrowdown_1_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r16);\n      const ctx_r17 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r17.handleKeydown($event);\n    })(\"keydown.arrowup\", function MultiSelectTreeComponent_ng_template_7_span_0_Template_input_keydown_arrowup_1_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r16);\n      const ctx_r18 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r18.handleKeydown($event);\n    })(\"keydown.alt.arrowup\", function MultiSelectTreeComponent_ng_template_7_span_0_Template_input_keydown_alt_arrowup_1_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r16);\n      const ctx_r19 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r19.handleKeydown($event);\n    })(\"ngModelChange\", function MultiSelectTreeComponent_ng_template_7_span_0_Template_input_ngModelChange_1_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r16);\n      const ctx_r20 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r20.filter = $event;\n    });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(3, \"span\", 20);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r9 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"filterInput\", ctx_r9.filterable && !ctx_r9.touchEnabled)(\"ngModel\", ctx_r9.filter)(\"kendoEventsOutsideAngular\", ɵngcc0.ɵɵpureFunction1(4, _c47, ctx_r9.handleBlur))(\"scope\", ctx_r9);\n  }\n}\n\nfunction MultiSelectTreeComponent_ng_template_7_1_ng_template_0_Template(rf, ctx) {}\n\nfunction MultiSelectTreeComponent_ng_template_7_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, MultiSelectTreeComponent_ng_template_7_1_ng_template_0_Template, 0, 0, \"ng-template\", 21);\n  }\n\n  if (rf & 2) {\n    const ctx_r10 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"templateContext\", ɵngcc0.ɵɵpureFunction1(1, _c18, ctx_r10.headerTemplate == null ? null : ctx_r10.headerTemplate.templateRef));\n  }\n}\n\nfunction MultiSelectTreeComponent_ng_template_7_4_ng_template_0_Template(rf, ctx) {}\n\nfunction MultiSelectTreeComponent_ng_template_7_4_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, MultiSelectTreeComponent_ng_template_7_4_ng_template_0_Template, 0, 0, \"ng-template\", 21);\n  }\n\n  if (rf & 2) {\n    const ctx_r12 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"templateContext\", ɵngcc0.ɵɵpureFunction1(1, _c18, ctx_r12.footerTemplate == null ? null : ctx_r12.footerTemplate.templateRef));\n  }\n}\n\nfunction MultiSelectTreeComponent_ng_template_7_div_5_ng_template_1_Template(rf, ctx) {}\n\nfunction MultiSelectTreeComponent_ng_template_7_div_5_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r24 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r24.messageFor(\"noDataText\"));\n  }\n}\n\nfunction MultiSelectTreeComponent_ng_template_7_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 22);\n    ɵngcc0.ɵɵtemplate(1, MultiSelectTreeComponent_ng_template_7_div_5_ng_template_1_Template, 0, 0, \"ng-template\", 23);\n    ɵngcc0.ɵɵtemplate(2, MultiSelectTreeComponent_ng_template_7_div_5_ng_template_2_Template, 2, 1, \"ng-template\", 24);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r13 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r13.noDataTemplate)(\"templateContext\", ɵngcc0.ɵɵpureFunction1(3, _c18, ctx_r13.noDataTemplate == null ? null : ctx_r13.noDataTemplate.templateRef));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r13.noDataTemplate);\n  }\n}\n\nconst _c52 = function (a0) {\n  return {\n    focusout: a0\n  };\n};\n\nfunction MultiSelectTreeComponent_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r26 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵtemplate(0, MultiSelectTreeComponent_ng_template_7_span_0_Template, 4, 6, \"span\", 12);\n    ɵngcc0.ɵɵtemplate(1, MultiSelectTreeComponent_ng_template_7_1_Template, 1, 3, undefined, 13);\n    ɵngcc0.ɵɵelementStart(2, \"kendo-treeview\", 14, 15);\n    ɵngcc0.ɵɵlistener(\"keydown\", function MultiSelectTreeComponent_ng_template_7_Template_kendo_treeview_keydown_2_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r26);\n      const ctx_r25 = ɵngcc0.ɵɵnextContext();\n      return ctx_r25.handleKeydown($event);\n    })(\"nodeClick\", function MultiSelectTreeComponent_ng_template_7_Template_kendo_treeview_nodeClick_2_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r26);\n      const ctx_r27 = ɵngcc0.ɵɵnextContext();\n      return ctx_r27.handleNodeClick($event);\n    })(\"expand\", function MultiSelectTreeComponent_ng_template_7_Template_kendo_treeview_expand_2_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r26);\n      const ctx_r28 = ɵngcc0.ɵɵnextContext();\n      return ctx_r28.nodeExpand.emit($event);\n    })(\"collapse\", function MultiSelectTreeComponent_ng_template_7_Template_kendo_treeview_collapse_2_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r26);\n      const ctx_r29 = ɵngcc0.ɵɵnextContext();\n      return ctx_r29.nodeCollapse.emit($event);\n    })(\"checkedItemsChange\", function MultiSelectTreeComponent_ng_template_7_Template_kendo_treeview_checkedItemsChange_2_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r26);\n      const ctx_r30 = ɵngcc0.ɵɵnextContext();\n      return ctx_r30.handleCheckedItemsChange($event);\n    });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(4, MultiSelectTreeComponent_ng_template_7_4_Template, 1, 3, undefined, 13);\n    ɵngcc0.ɵɵtemplate(5, MultiSelectTreeComponent_ng_template_7_div_5_Template, 3, 5, \"div\", 16);\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r5.filterable);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r5.headerTemplate);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵstyleProp(\"max-height\", ctx_r5.listHeight, \"px\");\n    ɵngcc0.ɵɵproperty(\"nodes\", ctx_r5.data)(\"animate\", false)(\"checkable\", ctx_r5.checkableSettings)(\"checkedItems\", ctx_r5.checkedItems)(\"valueField\", ctx_r5.valueField)(\"textField\", ctx_r5.textField)(\"children\", ctx_r5.children)(\"hasChildren\", ctx_r5.hasChildren)(\"isExpanded\", ctx_r5.isNodeExpanded)(\"isDisabled\", ctx_r5.itemDisabled)(\"nodeTemplate\", ctx_r5.nodeTemplate)(\"loadOnDemand\", ctx_r5.loadOnDemand)(\"filter\", ctx_r5.filter)(\"isVisible\", ctx_r5.isNodeVisible)(\"kendoEventsOutsideAngular\", ɵngcc0.ɵɵpureFunction1(22, _c52, ctx_r5.handleBlur))(\"scope\", ctx_r5);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r5.footerTemplate);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", (ctx_r5.data == null ? null : ctx_r5.data.length) === 0 || ctx_r5.allNodesHidden);\n  }\n}\n\nconst _c53 = function (a2) {\n  return {\n    \"k-multiselect-wrap\": true,\n    \"k-floatwrap\": true,\n    \"k-state-disabled\": a2\n  };\n};\n\nfunction TagListComponent_li_1_1_ng_template_0_Template(rf, ctx) {}\n\nfunction TagListComponent_li_1_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, TagListComponent_li_1_1_ng_template_0_Template, 0, 0, \"ng-template\");\n  }\n}\n\nfunction TagListComponent_li_1_ng_template_2_1_ng_template_0_Template(rf, ctx) {}\n\nfunction TagListComponent_li_1_ng_template_2_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, TagListComponent_li_1_ng_template_2_1_ng_template_0_Template, 0, 0, \"ng-template\", 10);\n  }\n\n  if (rf & 2) {\n    const tag_r1 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    const ctx_r9 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"templateContext\", ɵngcc0.ɵɵpureFunction2(1, _c5, ctx_r9.groupTemplate.templateRef, tag_r1));\n  }\n}\n\nfunction TagListComponent_li_1_ng_template_2_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n  }\n\n  if (rf & 2) {\n    const tag_r1 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    ɵngcc0.ɵɵtextInterpolate2(\"\", tag_r1.length, \" \", tag_r1.length === 1 ? \"item\" : \"items\", \" selected\");\n  }\n}\n\nfunction TagListComponent_li_1_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\");\n    ɵngcc0.ɵɵtemplate(1, TagListComponent_li_1_ng_template_2_1_Template, 1, 4, undefined, 8);\n    ɵngcc0.ɵɵtemplate(2, TagListComponent_li_1_ng_template_2_ng_template_2_Template, 1, 2, \"ng-template\", 9);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r5.groupTemplate);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r5.groupTemplate);\n  }\n}\n\nfunction TagListComponent_li_1_ng_template_4_1_ng_template_0_Template(rf, ctx) {}\n\nfunction TagListComponent_li_1_ng_template_4_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, TagListComponent_li_1_ng_template_4_1_ng_template_0_Template, 0, 0, \"ng-template\", 10);\n  }\n\n  if (rf & 2) {\n    const tag_r1 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    const ctx_r14 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"templateContext\", ɵngcc0.ɵɵpureFunction2(1, _c5, ctx_r14.template.templateRef, tag_r1));\n  }\n}\n\nfunction TagListComponent_li_1_ng_template_4_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n  }\n\n  if (rf & 2) {\n    const ctx_r18 = ɵngcc0.ɵɵnextContext(2);\n    const tag_r1 = ctx_r18.$implicit;\n    const index_r2 = ctx_r18.index;\n    const ctx_r15 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵtextInterpolate(ctx_r15.tagProp(tag_r1, ctx_r15.textField, index_r2));\n  }\n}\n\nfunction TagListComponent_li_1_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\");\n    ɵngcc0.ɵɵtemplate(1, TagListComponent_li_1_ng_template_4_1_Template, 1, 4, undefined, 8);\n    ɵngcc0.ɵɵtemplate(2, TagListComponent_li_1_ng_template_4_ng_template_2_Template, 1, 1, \"ng-template\", 9);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r7 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r7.template);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r7.template);\n  }\n}\n\nconst _c54 = function (a0, a1) {\n  return {\n    \"k-state-focused\": a0,\n    \"k-state-disabled\": a1\n  };\n};\n\nfunction TagListComponent_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"li\", 2);\n    ɵngcc0.ɵɵtemplate(1, TagListComponent_li_1_1_Template, 1, 0, undefined, 3);\n    ɵngcc0.ɵɵtemplate(2, TagListComponent_li_1_ng_template_2_Template, 3, 2, \"ng-template\", null, 4, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵtemplate(4, TagListComponent_li_1_ng_template_4_Template, 3, 2, \"ng-template\", null, 5, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementStart(6, \"span\", 6);\n    ɵngcc0.ɵɵelementStart(7, \"span\", 7);\n    ɵngcc0.ɵɵlistener(\"mousedown\", function TagListComponent_li_1_Template_span_mousedown_7_listener($event) {\n      const restoredCtx = ɵngcc0.ɵɵrestoreView(_r20);\n      const tag_r1 = restoredCtx.$implicit;\n      const index_r2 = restoredCtx.index;\n      const ctx_r19 = ɵngcc0.ɵɵnextContext();\n      return ctx_r19.deleteTag($event, tag_r1, index_r2);\n    });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const tag_r1 = ctx.$implicit;\n    const index_r2 = ctx.index;\n\n    const _r4 = ɵngcc0.ɵɵreference(3);\n\n    const _r6 = ɵngcc0.ɵɵreference(5);\n\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngClass\", ɵngcc0.ɵɵpureFunction2(8, _c54, index_r2 === ctx_r0.focused, ctx_r0.isTagDisabled(tag_r1, index_r2)));\n    ɵngcc0.ɵɵattribute(\"id\", ctx_r0.itemId(tag_r1, index_r2))(\"aria-hidden\", ctx_r0.tagAriaHidden(index_r2))(\"aria-setsize\", ctx_r0.tags == null ? null : ctx_r0.tags.length);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.isGroupTag(tag_r1))(\"ngIfThen\", _r4)(\"ngIfElse\", _r6);\n    ɵngcc0.ɵɵadvance(5);\n    ɵngcc0.ɵɵattribute(\"aria-hidden\", index_r2 !== ctx_r0.focused);\n  }\n}\n\nexport { PopupComponent } from '@progress/kendo-angular-popup';\nimport { map, switchMap, take, auditTime, tap, filter, partition, throttleTime, catchError, skipWhile, concatMap, takeUntil } from 'rxjs/operators';\nimport { TreeViewComponent, DataBoundComponent, ExpandableComponent, FlatDataBindingDirective, HierarchyBindingDirective, ExpandDirective, TreeViewModule } from '@progress/kendo-angular-treeview';\nimport { CommonModule } from '@angular/common';\n/**\n * @hidden\n */\n\nconst packageMetadata = {\n  name: '@progress/kendo-angular-dropdowns',\n  productName: 'Kendo UI for Angular',\n  productCodes: ['KENDOUIANGULAR', 'KENDOUICOMPLETE'],\n  publishDate: 1631260317,\n  version: '',\n  licensingDocsUrl: 'https://www.telerik.com/kendo-angular-ui/my-license/?utm_medium=product&utm_source=kendoangular&utm_campaign=kendo-ui-angular-purchase-license-keys-warning'\n};\n/* tslint:disable:no-bitwise */\n\n/**\n * @hidden\n */\n\nconst isPresent = value => value !== null && value !== undefined;\n/**\n * @hidden\n */\n\n\nconst isNumber = value => !isNaN(value);\n/**\n * @hidden\n */\n\n\nconst guid$1 = () => {\n  let id = \"\";\n  let i;\n  let random;\n\n  for (i = 0; i < 32; i++) {\n    random = Math.random() * 16 | 0;\n\n    if (i === 8 || i === 12 || i === 16 || i === 20) {\n      id += \"-\";\n    }\n\n    id += (i === 12 ? 4 : i === 16 ? random & 3 | 8 : random).toString(16);\n  }\n\n  return id;\n};\n/**\n * @hidden\n */\n\n\nconst combineStr = (begin, end) => {\n  return begin.concat(end.substr(end.toLowerCase().indexOf(begin.toLowerCase()) + begin.length));\n};\n/**\n * @hidden\n */\n\n\nconst isArray = value => Array.isArray(value);\n/**\n * @hidden\n */\n\n\nconst isObject = value => isPresent(value) && typeof value === 'object';\n/**\n * @hidden\n */\n\n\nconst isEmptyString = value => typeof value === 'string' && value.length === 0;\n/**\n * @hidden\n */\n\n\nconst resolveValuesInArray = (values, data = [], valueField) => values.map(value => {\n  return data.find(item => getter$1(item, valueField) === value);\n}).filter(value => value !== undefined);\n/**\n * @hidden\n */\n\n\nconst validateComplexValues = (values, valueField) => isArray(values) && values.filter(item => {\n  return isObject(item) && isPresent(getter$1(item, valueField));\n});\n/**\n * @hidden\n */\n\n\nconst resolveAllValues = (value, data, valueField) => {\n  const customValues = validateComplexValues(value, valueField) || [];\n  const resolvedValues = resolveValuesInArray(value, data, valueField) || [];\n  return resolvedValues.concat(customValues);\n};\n/**\n * @hidden\n */\n\n\nconst isObjectArray = values => {\n  return isArray(values) && values.every(item => isObject(item));\n};\n/**\n * @hidden\n */\n\n\nconst selectedIndices = (values, data, valueField) => {\n  const extractedValues = data.map(item => {\n    return isPresent(item) && isPresent(getter$1(item, valueField)) ? getter$1(item, valueField) : item;\n  });\n  return values.reduce((arr, item) => {\n    const value = isPresent(item) && isPresent(getter$1(item, valueField)) ? getter$1(item, valueField) : item;\n    const index = extractedValues.indexOf(value);\n\n    if (index !== -1) {\n      arr.push(index);\n    }\n\n    return arr;\n  }, []);\n};\n/**\n * @hidden\n */\n\n\nconst getter$1 = (dataItem, field) => {\n  if (!isPresent(dataItem)) {\n    return null;\n  }\n\n  if (!isPresent(field) || !isObject(dataItem)) {\n    return dataItem;\n  } // creates a field accessor supporting nested fields processing\n\n\n  const valueFrom = getter(field);\n  return valueFrom(dataItem);\n};\n/**\n * @hidden\n */\n\n\nconst sameCharsOnly = (word, character) => {\n  for (let idx = 0; idx < word.length; idx++) {\n    if (word.charAt(idx) !== character) {\n      return false;\n    }\n  }\n\n  return true;\n};\n/**\n * @hidden\n */\n\n\nconst shuffleData = (data, splitIndex, defaultItem) => {\n  let result = data;\n\n  if (defaultItem) {\n    result = [defaultItem].concat(result);\n  }\n\n  return result.slice(splitIndex).concat(result.slice(0, splitIndex));\n};\n/**\n * @hidden\n */\n\n\nconst matchText = (text, word, ignoreCase) => {\n  if (!isPresent(text)) {\n    return false;\n  }\n\n  let temp = String(text);\n\n  if (ignoreCase) {\n    temp = temp.toLowerCase();\n  }\n\n  return temp.indexOf(word) === 0;\n};\n/**\n * @hidden\n *\n * Checks whether the passed object has all of the listed properties.\n */\n\n\nconst hasProps = (obj, props) => {\n  if (!isPresent(obj)) {\n    return false;\n  }\n\n  return props.every(prop => obj.hasOwnProperty(prop));\n};\n/**\n * @hidden\n *\n * Checks whether an element is untouched by looking for the ng-untouched css class\n */\n\n\nconst isUntouched = element => element.className.includes('ng-untouched');\n/**\n * @hidden\n */\n\n\nconst noop = _ => {};\n/**\n * IE element `matches` polyfill.\n * https://developer.mozilla.org/en-US/docs/Web/API/Element/matches\n */\n\n\nconst matches = (element, selector) => {\n  const matcher = element.matches || element.msMatchesSelector || element.webkitMatchesSelector;\n\n  if (!matcher) {\n    return false;\n  }\n\n  return matcher.call(element, selector);\n};\n/**\n * @hidden\n *\n * IE element `closest` polyfill.\n * https://developer.mozilla.org/en-US/docs/Web/API/Element/closest\n */\n\n\nconst closest = (element, selector) => {\n  let parent = element;\n\n  while (parent !== null && parent.nodeType === 1) {\n    if (matches(parent, selector)) {\n      return parent;\n    }\n\n    parent = parent.parentElement || parent.parentNode;\n  }\n\n  return null;\n};\n/**\n * @hidden\n *\n * Parses a provided value to its type 'number' representation.\n * If the parsed value (via Number(value)) is NaN, the provided default value is returned.\n * Uses 0 as default value if a second param is not provided.\n */\n\n\nconst parseNumber = (num, defaultValue = 0) => {\n  const normalizedValue = Number(num);\n  return isNaN(normalizedValue) ? defaultValue : normalizedValue;\n};\n/**\n * @hidden\n *\n * Checks whether the passed target element is inside the provided host or popupRef.\n */\n\n\nconst inDropDown = (host, target, popupRef) => {\n  return host.nativeElement.contains(target) || popupRef && popupRef.popupElement.contains(target);\n};\n/**\n * @hidden\n *\n * Calculates the hierarchical level of an item, based on the provided index.\n * The result level is zero-based (starts from 0).\n */\n\n\nconst getHierarchicalItemLevel = index => {\n  return (index || '').split('_').length - 1;\n};\n/**\n * @hidden\n *\n * Retrieves all descendant nodes' lookups which are currently registered in the provided lookup item as a flat array.\n */\n\n\nconst fetchDescendentNodes = (lookup, filterExpression) => {\n  if (!isPresent(lookup) || lookup.children.length === 0) {\n    return [];\n  }\n\n  let descendants = lookup.children;\n\n  if (isPresent(filterExpression)) {\n    descendants = descendants.filter(descendent => filterExpression(descendent.item));\n  }\n\n  descendants.forEach(child => descendants = descendants.concat(fetchDescendentNodes(child, filterExpression)));\n  return descendants;\n};\n/**\n * @hidden\n *\n * Retrieves the correct value based on the item's level and the provided value field/s.\n * Used in the MultiSelectTree component.\n */\n\n\nconst valueFrom = ({\n  dataItem,\n  index,\n  level\n}, valueField) => {\n  const fields = Array.isArray(valueField) ? valueField : [valueField]; // either use the explicitly provided value level, or infer it from the item index\n\n  const valueLevel = isPresent(level) ? level : getHierarchicalItemLevel(index); // fall-back to the last available one, if the current node is in a deeper level\n\n  const normalizedLevel = Math.min(valueLevel, fields.length - 1);\n  const field = fields[normalizedLevel];\n  return getter(field)(dataItem);\n};\n/* tslint:disable:member-ordering */\n\n/**\n * @hidden\n */\n\n\nlet SearchBarComponent = /*#__PURE__*/(() => {\n  let SearchBarComponent = class SearchBarComponent {\n    constructor(localization, renderer) {\n      this.localization = localization;\n      this.valueChange = new EventEmitter();\n      this.onBlur = new EventEmitter();\n      this.onFocus = new EventEmitter();\n      this.onClick = new EventEmitter();\n      this.onNavigate = new EventEmitter();\n      this.searchBarClass = true;\n      this._userInput = \"\";\n      this._previousValue = \"\";\n      this._placeholder = \"\";\n      this.direction = localization.rtl ? 'rtl' : 'ltr';\n      this.renderer = renderer;\n    }\n\n    get userInput() {\n      return this._userInput;\n    }\n\n    set userInput(userInput) {\n      this._userInput = userInput || \"\";\n    }\n\n    get value() {\n      return this.input.nativeElement.value;\n    }\n\n    set placeholder(text) {\n      this._placeholder = text || '';\n      this.setInputSize();\n    }\n\n    get placeholder() {\n      return this._placeholder;\n    }\n\n    ngOnInit() {\n      this.localizationChangeSubscription = this.localization.changes.subscribe(({\n        rtl\n      }) => this.direction = rtl ? 'rtl' : 'ltr');\n    }\n\n    ngOnChanges(changes) {\n      let previousUserInput;\n\n      if (this.input && (changes.userInput || changes.suggestedText)) {\n        if (changes.userInput && changes.userInput.previousValue) {\n          if (this._previousValue === changes.userInput.previousValue) {\n            previousUserInput = this._previousValue;\n          } else {\n            previousUserInput = changes.userInput.currentValue || \"\";\n          }\n        } else {\n          previousUserInput = this._previousValue;\n        }\n\n        const caretIndex = this.input.nativeElement.selectionStart;\n        const caretAtEnd = previousUserInput.length === caretIndex;\n        this.writeInputValue(this.suggestedText ? combineStr(this.userInput, this.suggestedText) : this.userInput);\n\n        if (this.suggestedText) {\n          this.setInputSelection(this.userInput.length, this.suggestedText.length);\n        } else if (caretAtEnd) {\n          this.setInputSelection(this.userInput.length, this.userInput.length);\n        } else {\n          this.setInputSelection(caretIndex, caretIndex);\n        }\n\n        this._previousValue = this.userInput;\n      }\n    }\n\n    ngOnDestroy() {\n      if (this.localizationChangeSubscription) {\n        this.localizationChangeSubscription.unsubscribe();\n      }\n    }\n\n    writeInputValue(text) {\n      if (isDocumentAvailable()) {\n        this.renderer.setProperty(this.input.nativeElement, 'value', text);\n      }\n    }\n\n    setInputSelection(start, end) {\n      if (isDocumentAvailable() && this.input.nativeElement === document.activeElement) {\n        try {\n          this.input.nativeElement.setSelectionRange(start, end);\n        } catch (e) {//Make sure that the element is in the DOM before you invoke its methods\n        }\n      }\n    }\n\n    handleInput(event) {\n      const value = event.target.value;\n\n      if (value !== this.userInput) {\n        this._previousValue = value;\n        this.valueChange.emit(value);\n      }\n    }\n\n    handleFocus(event) {\n      this.onFocus.emit(event);\n    }\n\n    handleBlur(event) {\n      this.onBlur.emit(event);\n    }\n\n    handleKeydown(event) {\n      const keyCode = event.keyCode;\n      const keys = [Keys.ArrowUp, Keys.ArrowDown, Keys.ArrowLeft, Keys.ArrowRight, Keys.Enter, Keys.Escape, Keys.Delete, Keys.Backspace, Keys.Home, Keys.End];\n\n      if (keys.indexOf(keyCode) > -1) {\n        this.onNavigate.emit(event);\n      }\n    }\n\n    focus() {\n      if (isDocumentAvailable()) {\n        this.input.nativeElement.focus();\n      }\n    }\n\n    blur() {\n      if (isDocumentAvailable()) {\n        this.input.nativeElement.blur();\n      }\n    }\n\n    setInputSize() {\n      const lengthOf = x => x ? x.length : 0;\n\n      const input = this.input.nativeElement;\n      const placeholderLength = lengthOf(this.placeholder);\n      const textLength = lengthOf(this.value);\n      const size = Math.max(placeholderLength, textLength, 1);\n      this.renderer.setAttribute(input, 'size', size.toString());\n    }\n\n  };\n\n  SearchBarComponent.ɵfac = function SearchBarComponent_Factory(t) {\n    return new (t || SearchBarComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2));\n  };\n\n  SearchBarComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: SearchBarComponent,\n    selectors: [[\"kendo-searchbar\"]],\n    viewQuery: function SearchBarComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c0, 7);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.input = _t.first);\n      }\n    },\n    hostVars: 2,\n    hostBindings: function SearchBarComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"k-searchbar\", ctx.searchBarClass);\n      }\n    },\n    inputs: {\n      userInput: \"userInput\",\n      placeholder: \"placeholder\",\n      id: \"id\",\n      listId: \"listId\",\n      tagListId: \"tagListId\",\n      activeDescendant: \"activeDescendant\",\n      noDataLabel: \"noDataLabel\",\n      disabled: \"disabled\",\n      readonly: \"readonly\",\n      tabIndex: \"tabIndex\",\n      popupOpen: \"popupOpen\",\n      role: \"role\",\n      suggestedText: \"suggestedText\"\n    },\n    outputs: {\n      valueChange: \"valueChange\",\n      onBlur: \"onBlur\",\n      onFocus: \"onFocus\",\n      onClick: \"onClick\",\n      onNavigate: \"onNavigate\"\n    },\n    features: [ɵngcc0.ɵɵNgOnChangesFeature],\n    decls: 2,\n    vars: 21,\n    consts: [[\"autocomplete\", \"off\", \"aria-haspopup\", \"listbox\", 3, \"id\", \"disabled\", \"readonly\", \"placeholder\", \"kendoEventsOutsideAngular\", \"scope\", \"input\", \"keydown\"], [\"input\", \"\"]],\n    template: function SearchBarComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"input\", 0, 1);\n        ɵngcc0.ɵɵlistener(\"input\", function SearchBarComponent_Template_input_input_0_listener($event) {\n          return ctx.handleInput($event);\n        })(\"keydown\", function SearchBarComponent_Template_input_keydown_0_listener($event) {\n          return ctx.handleKeydown($event);\n        });\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassMap(\"k-input\");\n        ɵngcc0.ɵɵproperty(\"id\", ctx.id)(\"disabled\", ctx.disabled)(\"readonly\", ctx.readonly)(\"placeholder\", ctx.placeholder)(\"kendoEventsOutsideAngular\", ɵngcc0.ɵɵpureFunction2(18, _c1, ctx.handleFocus, ctx.handleBlur))(\"scope\", ctx);\n        ɵngcc0.ɵɵattribute(\"tabIndex\", ctx.tabIndex)(\"dir\", ctx.direction)(\"role\", ctx.role)(\"aria-disabled\", ctx.disabled)(\"aria-readonly\", ctx.readonly)(\"aria-expanded\", ctx.popupOpen)(\"aria-owns\", ctx.listId)(\"aria-describedby\", ctx.tagListId)(\"aria-activedescendant\", ctx.activeDescendant)(\"aria-label\", ctx.noDataLabel);\n      }\n    },\n    directives: [ɵngcc2.EventsOutsideAngularDirective],\n    encapsulation: 2\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", String)], SearchBarComponent.prototype, \"id\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], SearchBarComponent.prototype, \"listId\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], SearchBarComponent.prototype, \"tagListId\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], SearchBarComponent.prototype, \"activeDescendant\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], SearchBarComponent.prototype, \"noDataLabel\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], SearchBarComponent.prototype, \"disabled\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], SearchBarComponent.prototype, \"readonly\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Number)], SearchBarComponent.prototype, \"tabIndex\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], SearchBarComponent.prototype, \"popupOpen\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], SearchBarComponent.prototype, \"role\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [String])], SearchBarComponent.prototype, \"userInput\", null);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], SearchBarComponent.prototype, \"suggestedText\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], SearchBarComponent.prototype, \"valueChange\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], SearchBarComponent.prototype, \"onBlur\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], SearchBarComponent.prototype, \"onFocus\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], SearchBarComponent.prototype, \"onClick\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], SearchBarComponent.prototype, \"onNavigate\", void 0);\n\n  __decorate([ViewChild('input', {\n    static: true\n  }), __metadata(\"design:type\", ElementRef)], SearchBarComponent.prototype, \"input\", void 0);\n\n  __decorate([HostBinding('class.k-searchbar'), __metadata(\"design:type\", Boolean)], SearchBarComponent.prototype, \"searchBarClass\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [String])], SearchBarComponent.prototype, \"placeholder\", null);\n\n  SearchBarComponent = __decorate([__metadata(\"design:paramtypes\", [LocalizationService, Renderer2])], SearchBarComponent);\n  /**\n   * Renders the list item content. To define the item template, nest an `<ng-template>` tag\n   * with the `kendo<ComponentName>ItemTemplate` directive inside the component tag. The template context is\n   * set to the current component. To get a reference to the current data item, use the `let-dataItem` directive.\n   *\n   * - [Using `ItemTemplate` with the AutoComplete]({% slug templates_autocomplete %}#toc-item-template)\n   * - [Using `ItemTemplate` with the ComboBox]({% slug templates_combobox %}#toc-item-template)\n   * - [Using `ItemTemplate` with the DropDownList]({% slug templates_ddl %}#toc-item-template)\n   * - [Using `ItemTemplate` with the MultiSelect]({% slug templates_multiselect %}#toc-item-template)\n   *\n   * @example\n   * ```ts\n   * _@Component({\n   * selector: 'my-app',\n   * template: `\n   *  <kendo-combobox [data]=\"listItems\">\n   *    <ng-template kendoComboBoxItemTemplate let-dataItem>\n   *      <span>{{dataItem}} option</span>\n   *    </ng-template>\n   *  </kendo-combobox>\n   * `\n   * })\n   * class AppComponent {\n   *   public listItems: Array<string> = [\"Item 1\", \"Item 2\", \"Item 3\", \"Item 4\"];\n   * }\n   * ```\n   */\n\n  return SearchBarComponent;\n})();\nlet ItemTemplateDirective = /*#__PURE__*/(() => {\n  let ItemTemplateDirective = class ItemTemplateDirective {\n    constructor(templateRef) {\n      this.templateRef = templateRef;\n    }\n\n  };\n\n  ItemTemplateDirective.ɵfac = function ItemTemplateDirective_Factory(t) {\n    return new (t || ItemTemplateDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef));\n  };\n\n  ItemTemplateDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: ItemTemplateDirective,\n    selectors: [[\"\", \"kendoDropDownListItemTemplate\", \"\"], [\"\", \"kendoComboBoxItemTemplate\", \"\"], [\"\", \"kendoAutoCompleteItemTemplate\", \"\"], [\"\", \"kendoMultiSelectItemTemplate\", \"\"]]\n  });\n  ItemTemplateDirective = __decorate([__metadata(\"design:paramtypes\", [TemplateRef])], ItemTemplateDirective);\n  /**\n   * Renders the header content of the list. To define the header template, nest an `<ng-template>` tag\n   * with the `kendo<ComponentName>HeaderTemplate` directive inside the component tag.\n   *\n   * - [Using `HeaderTemplate` with the AutoComplete]({% slug templates_autocomplete %}#toc-header-template)\n   * - [Using `HeaderTemplate` with the ComboBox]({% slug templates_combobox %}#toc-header-template)\n   * - [Using `HeaderTemplate` with the MultiColumnComboBox]({% slug templates_multicolumncombobox %}#toc-header-template)\n   * - [Using `HeaderTemplate` with the DropDownList]({% slug templates_ddl %}#toc-header-template)\n   * - [Using `HeaderTemplate` with the DropDownTree]({% slug templates_ddt %}#toc-header-template)\n   * - [Using `HeaderTemplate` with the MultiSelect]({% slug templates_multiselect %}#toc-header-template)\n   *\n   * @example\n   * ```ts\n   * _@Component({\n   * selector: 'my-app',\n   * template: `\n   *  <kendo-combobox [data]=\"listItems\">\n   *    <ng-template kendoComboBoxHeaderTemplate>\n   *      <h4>Header template</h4>\n   *    </ng-template>\n   *  </kendo-combobox>\n   * `\n   * })\n   * class AppComponent {\n   *   public listItems: Array<string> = [\"Item 1\", \"Item 2\", \"Item 3\", \"Item 4\"];\n   * }\n   * ```\n   */\n\n  return ItemTemplateDirective;\n})();\nlet HeaderTemplateDirective = /*#__PURE__*/(() => {\n  let HeaderTemplateDirective = class HeaderTemplateDirective {\n    constructor(templateRef) {\n      this.templateRef = templateRef;\n    }\n\n  };\n\n  HeaderTemplateDirective.ɵfac = function HeaderTemplateDirective_Factory(t) {\n    return new (t || HeaderTemplateDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef));\n  };\n\n  HeaderTemplateDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: HeaderTemplateDirective,\n    selectors: [[\"\", \"kendoDropDownListHeaderTemplate\", \"\"], [\"\", \"kendoComboBoxHeaderTemplate\", \"\"], [\"\", \"kendoDropDownTreeHeaderTemplate\", \"\"], [\"\", \"kendoMultiColumnComboBoxHeaderTemplate\", \"\"], [\"\", \"kendoAutoCompleteHeaderTemplate\", \"\"], [\"\", \"kendoMultiSelectHeaderTemplate\", \"\"], [\"\", \"kendoMultiSelectTreeHeaderTemplate\", \"\"]]\n  });\n  HeaderTemplateDirective = __decorate([__metadata(\"design:paramtypes\", [TemplateRef])], HeaderTemplateDirective);\n  /**\n   * Renders the footer content of the list. To define the footer template, nest an `<ng-template>` tag\n   * with the `kendo<ComponentName>FooterTemplate` directive inside the component tag.\n   *\n   * - [Using `FooterTemplate` with the AutoComplete]({% slug templates_autocomplete %}#toc-footer-template)\n   * - [Using `FooterTemplate` with the ComboBox]({% slug templates_combobox %}#toc-footer-template)\n   * - [Using `FooterTemplate` with the MultiColumnComboBox]({% slug templates_multicolumncombobox %}#toc-footer-template)\n   * - [Using `FooterTemplate` with the DropDownList]({% slug templates_ddl %}#toc-footer-template)\n   * - [Using `FooterTemplate` with the DropDownTree]({% slug templates_ddt %}#toc-footer-template)\n   * - [Using `FooterTemplate` with the MultiSelect]({% slug templates_multiselect %}#toc-footer-template)\n   *\n   * @example\n   * ```ts\n   * _@Component({\n   * selector: 'my-app',\n   * template: `\n   *  <kendo-combobox [data]=\"listItems\">\n   *    <ng-template kendoComboBoxFooterTemplate>\n   *      <h4>Footer template</h4>\n   *    </ng-template>\n   *  </kendo-combobox>\n   * `\n   * })\n   * class AppComponent {\n   *   public listItems: Array<string> = [\"Item 1\", \"Item 2\", \"Item 3\", \"Item 4\"];\n   * }\n   * ```\n   */\n\n  return HeaderTemplateDirective;\n})();\nlet FooterTemplateDirective = /*#__PURE__*/(() => {\n  let FooterTemplateDirective = class FooterTemplateDirective {\n    constructor(templateRef) {\n      this.templateRef = templateRef;\n    }\n\n  };\n\n  FooterTemplateDirective.ɵfac = function FooterTemplateDirective_Factory(t) {\n    return new (t || FooterTemplateDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef));\n  };\n\n  FooterTemplateDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: FooterTemplateDirective,\n    selectors: [[\"\", \"kendoDropDownListFooterTemplate\", \"\"], [\"\", \"kendoComboBoxFooterTemplate\", \"\"], [\"\", \"kendoDropDownTreeFooterTemplate\", \"\"], [\"\", \"kendoMultiColumnComboBoxFooterTemplate\", \"\"], [\"\", \"kendoAutoCompleteFooterTemplate\", \"\"], [\"\", \"kendoMultiSelectFooterTemplate\", \"\"], [\"\", \"kendoMultiSelectTreeFooterTemplate\", \"\"]]\n  });\n  FooterTemplateDirective = __decorate([__metadata(\"design:paramtypes\", [TemplateRef])], FooterTemplateDirective);\n  /**\n   * Renders the group header content. To define the group template, nest an `<ng-template>` tag\n   * with the `kendo<ComponentName>GroupTemplate` directive inside the component tag. The template context is\n   * set to the current component. To get a reference to the current data item, use the `let-groupName` directive.\n   *\n   * - [Using `GroupTemplate` with the AutoComplete]({% slug templates_autocomplete %}#toc-group-template)\n   * - [Using `GroupTemplate` with the ComboBox]({% slug templates_combobox %}#toc-group-template)\n   * - [Using `GroupTemplate` with the MultiColumnComboBox]({% slug templates_multicolumncombobox %}#toc-group-template)\n   * - [Using `GroupTemplate` with the DropDownList]({% slug templates_ddl %}#toc-group-template)\n   * - [Using `GroupTemplate` with the MultiSelect]({% slug templates_multiselect %}#toc-group-template)\n   *\n   * @example\n   * ```ts\n   * import { groupBy } from '@progress/kendo-data-query';\n   * _@Component({\n   * selector: 'my-app',\n   * template: `\n   *  <kendo-combobox [data]=\"groupedData\" textField=\"name\" valueField=\"name\">\n   *    <ng-template kendoComboBoxGroupTemplate let-groupName>\n   *      <span>Food type: {{groupName}} option</span>\n   *    </ng-template>\n   *  </kendo-combobox>\n   * `\n   * })\n   * class AppComponent {\n   *   public data = [\n   *       { name: \"Pork\", category: \"Food\", subcategory: \"Meat\" },\n   *       { name: \"Pepper\", category: \"Food\", subcategory: \"Vegetables\" },\n   *       { name: \"Beef\", category: \"Food\", subcategory: \"Meat\" }\n   *   ];\n   *   public groupedData = groupBy(this.data, [{field: \"subcategory\"}]);\n   * }\n   * ```\n   */\n\n  return FooterTemplateDirective;\n})();\nlet GroupTemplateDirective = /*#__PURE__*/(() => {\n  let GroupTemplateDirective = class GroupTemplateDirective {\n    constructor(templateRef) {\n      this.templateRef = templateRef;\n    }\n\n  };\n\n  GroupTemplateDirective.ɵfac = function GroupTemplateDirective_Factory(t) {\n    return new (t || GroupTemplateDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef));\n  };\n\n  GroupTemplateDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: GroupTemplateDirective,\n    selectors: [[\"\", \"kendoDropDownListGroupTemplate\", \"\"], [\"\", \"kendoComboBoxGroupTemplate\", \"\"], [\"\", \"kendoMultiColumnComboBoxGroupTemplate\", \"\"], [\"\", \"kendoAutoCompleteGroupTemplate\", \"\"], [\"\", \"kendoMultiSelectGroupTemplate\", \"\"]]\n  });\n  GroupTemplateDirective = __decorate([__metadata(\"design:paramtypes\", [TemplateRef])], GroupTemplateDirective);\n  /**\n   * Renders the fixed group header content. To define the fixed group template, nest an `<ng-template>` tag\n   * with the `kendo<ComponentName>FixedGroupTemplate` directive inside the component tag. The template context is\n   * set to the current component. To get a reference to the current data item, use the `let-groupName` directive.\n   *\n   * - [Using `FixedGroupTemplate` with the AutoComplete]({% slug templates_autocomplete %}#toc-fixed-group-template)\n   * - [Using `FixedGroupTemplate` with the ComboBox]({% slug templates_combobox %}#toc-fixed-group-template)\n   * - [Using `FixedGroupTemplate` with the MultiColumnComboBox]({% slug templates_multicolumncombobox %}#toc-fixed-group-template)\n   * - [Using `FixedGroupTemplate` with the DropDownList]({% slug templates_ddl %}#toc-fixed-group-template)\n   * - [Using `FixedGroupTemplate` with the MultiSelect]({% slug templates_multiselect %}#toc-fixed-group-template)\n   *\n   * @example\n   * ```ts\n   * import { groupBy } from '@progress/kendo-data-query';\n   * _@Component({\n   * selector: 'my-app',\n   * template: `\n   *  <kendo-combobox [data]=\"groupedData\" textField=\"name\" valueField=\"name\">\n   *    <ng-template kendoComboBoxFixedGroupTemplate let-groupName>\n   *      <span>Food type: {{groupName}} option</span>\n   *    </ng-template>\n   *  </kendo-combobox>\n   * `\n   * })\n   * class AppComponent {\n   *   public data = [\n   *       { name: \"Pork\", category: \"Food\", subcategory: \"Meat\" },\n   *       { name: \"Pepper\", category: \"Food\", subcategory: \"Vegetables\" },\n   *       { name: \"Beef\", category: \"Food\", subcategory: \"Meat\" }\n   *   ];\n   *   public groupedData = groupBy(this.data, [{field: \"subcategory\"}]);\n   * }\n   * ```\n   */\n\n  return GroupTemplateDirective;\n})();\nlet FixedGroupTemplateDirective = /*#__PURE__*/(() => {\n  let FixedGroupTemplateDirective = class FixedGroupTemplateDirective {\n    constructor(templateRef) {\n      this.templateRef = templateRef;\n    }\n\n  };\n\n  FixedGroupTemplateDirective.ɵfac = function FixedGroupTemplateDirective_Factory(t) {\n    return new (t || FixedGroupTemplateDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef));\n  };\n\n  FixedGroupTemplateDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: FixedGroupTemplateDirective,\n    selectors: [[\"\", \"kendoDropDownListFixedGroupTemplate\", \"\"], [\"\", \"kendoComboBoxFixedGroupTemplate\", \"\"], [\"\", \"kendoMultiColumnComboBoxFixedGroupTemplate\", \"\"], [\"\", \"kendoAutoCompleteFixedGroupTemplate\", \"\"], [\"\", \"kendoMultiSelectFixedGroupTemplate\", \"\"]]\n  });\n  FixedGroupTemplateDirective = __decorate([__metadata(\"design:paramtypes\", [TemplateRef])], FixedGroupTemplateDirective);\n  /**\n   * @hidden\n   */\n\n  return FixedGroupTemplateDirective;\n})();\nlet SelectionService = /*#__PURE__*/(() => {\n  let SelectionService = class SelectionService {\n    /**\n     * @hidden\n     */\n    constructor() {\n      this.onSelect = new EventEmitter();\n      this.onChange = new EventEmitter();\n      this.onFocus = new EventEmitter();\n      this.total = 0;\n      this.selectedIndices = [];\n    }\n\n    getTotal() {\n      return this.total;\n    }\n\n    isSelected(index) {\n      return isPresent(this.selectedIndices.find(current => current === index));\n    }\n\n    isFocused(index) {\n      return index === this.focused;\n    }\n\n    focus(index) {\n      if (this.isFocused(index)) {\n        return;\n      }\n\n      this.focused = index;\n      this.onFocus.emit(index);\n    }\n\n    select(index) {\n      if (this.isSelected(index)) {\n        return;\n      }\n\n      this.selectedIndices = [index];\n      this.focused = index;\n      this.onSelect.emit({\n        indices: [index],\n        newSelection: isPresent(index)\n      });\n    }\n\n    add(index) {\n      if (this.isSelected(index)) {\n        return;\n      }\n\n      this.selectedIndices.push(index);\n      this.focused = index;\n      this.onChange.emit({\n        added: index,\n        indices: this.selectedIndices.slice()\n      });\n    }\n\n    unselect(index) {\n      if (!this.isSelected(index)) {\n        return;\n      }\n\n      const position = this.selectedIndices.indexOf(index);\n      this.selectedIndices.splice(position, 1);\n      this.focused = index;\n      this.onChange.emit({\n        indices: this.selectedIndices.slice(),\n        removed: index\n      });\n    }\n\n    change(index) {\n      const newSelection = isPresent(index) && !this.isSelected(index);\n      this.selectedIndices = [index];\n      this.focused = index;\n      this.onChange.emit({\n        indices: [index],\n        newSelection: newSelection\n      });\n    }\n\n    resetSelection(index) {\n      this.selectedIndices = index instanceof Array ? index : [index];\n      this.focused = this.selectedIndices[this.selectedIndices.length - 1];\n    }\n\n    get selected() {\n      return this.selectedIndices.slice();\n    }\n\n    get focused() {\n      return this.focusedIndex;\n    }\n\n    set focused(index) {\n      if (this.focusedIndex !== index) {\n        this.focusedIndex = index;\n        this.onFocus.emit(index);\n      }\n    }\n\n  };\n\n  SelectionService.ɵfac = function SelectionService_Factory(t) {\n    return new (t || SelectionService)();\n  };\n\n  SelectionService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: SelectionService,\n    factory: function (t) {\n      return SelectionService.ɵfac(t);\n    }\n  });\n  /**\n   * @hidden\n   */\n\n  return SelectionService;\n})();\nvar NavigationAction = /*#__PURE__*/(() => {\n  (function (NavigationAction) {\n    NavigationAction[NavigationAction[\"Undefined\"] = 0] = \"Undefined\";\n    NavigationAction[NavigationAction[\"Open\"] = 1] = \"Open\";\n    NavigationAction[NavigationAction[\"Close\"] = 2] = \"Close\";\n    NavigationAction[NavigationAction[\"Enter\"] = 3] = \"Enter\";\n    NavigationAction[NavigationAction[\"Tab\"] = 4] = \"Tab\";\n    NavigationAction[NavigationAction[\"Esc\"] = 5] = \"Esc\";\n    NavigationAction[NavigationAction[\"Delete\"] = 6] = \"Delete\";\n    NavigationAction[NavigationAction[\"Backspace\"] = 7] = \"Backspace\";\n    NavigationAction[NavigationAction[\"Home\"] = 8] = \"Home\";\n    NavigationAction[NavigationAction[\"End\"] = 9] = \"End\";\n    NavigationAction[NavigationAction[\"Up\"] = 10] = \"Up\";\n    NavigationAction[NavigationAction[\"Down\"] = 11] = \"Down\";\n    NavigationAction[NavigationAction[\"Left\"] = 12] = \"Left\";\n    NavigationAction[NavigationAction[\"Right\"] = 13] = \"Right\";\n  })(NavigationAction || (NavigationAction = {}));\n\n  return NavigationAction;\n})();\n\n/**\n * @hidden\n */\nlet DataService = /*#__PURE__*/(() => {\n  let DataService = class DataService {\n    /**\n     * @hidden\n     */\n    constructor() {\n      this.grouped = false;\n      this.groupIndices = [];\n    }\n\n    set data(data) {\n      this._data = data;\n      this.grouped = this.isGrouped(data);\n\n      if (this.grouped) {\n        this.groupIndices = this.getGroupIndices(data);\n        this._flatData = this.flatten(data);\n      }\n    }\n\n    get data() {\n      if (this.grouped) {\n        return this._flatData;\n      }\n\n      return this._data;\n    }\n    /**\n     * @hidden\n     * Used to get the actual items count, i.e. excluding the header items in case of grouping.\n     */\n\n\n    get itemsCount() {\n      if (!isPresent(this.data) || this.data.length === 0) {\n        return 0;\n      }\n\n      const items = this.grouped ? this._flatData.filter(item => !item.header) : this.data;\n      return items.length;\n    }\n    /**\n     * @hidden\n     * Used to determine if the component received grouped data.\n     */\n\n\n    isGrouped(data) {\n      // GroupResult { aggregates: AggregateResult, field: string, items: object[], value: any }\n      // https://www.telerik.com/kendo-angular-ui/components/dataquery/api/GroupResult/\n      return isPresent(data) && data.length !== 0 && isPresent(data[0]) && hasProps(data[0], ['aggregates', 'field', 'items', 'value']);\n    }\n    /**\n     * @hidden\n     * Used to calculate the last item index of each group.\n     */\n\n\n    getGroupIndices(data) {\n      let groupIndices = [];\n\n      for (let i = 0; i <= data.length - 1; i++) {\n        groupIndices[i] = (groupIndices[i - 1] || 0) + data[i].items.length;\n      }\n\n      return groupIndices;\n    }\n    /**\n     * @hidden\n     * Used to get a flat array containing all items matching certain criteria.\n     */\n\n\n    filter(predicate) {\n      let result = [];\n\n      if (this.isGrouped(this.data)) {\n        for (let i = 0; i <= this.groupIndices.length - 1; i++) {\n          const matches = this.data[i].items.filter(predicate);\n\n          if (matches) {\n            result = result.concat(matches);\n          }\n        }\n      } else {\n        result = this.data.filter(predicate);\n      }\n\n      return result;\n    }\n    /**\n     * @hidden\n     * Used to get the index of a given data item.\n     */\n\n\n    indexOf(item, startFrom = 0) {\n      let predicate = element => {\n        return element === item;\n      };\n\n      if (this.grouped) {\n        predicate = element => {\n          return element.value === item;\n        };\n      }\n\n      return this.findIndex(predicate, startFrom);\n    }\n    /**\n     * @hidden\n     * Used to get the index of a data item based on an expression.\n     */\n\n\n    findIndex(predicate, startFrom = 0) {\n      let index = -1;\n\n      if (this.grouped) {\n        const data = this._flatData.filter(item => !item.header && item.offsetIndex >= startFrom);\n\n        index = data.findIndex(predicate);\n        index = data[index] ? data[index].offsetIndex : -1;\n      } else {\n        const data = this.data.slice(startFrom);\n        const itemIndex = data.findIndex(predicate);\n        index = itemIndex !== -1 ? itemIndex + startFrom : -1;\n      }\n\n      return index;\n    }\n    /**\n     * @hidden\n     * Used to get the closest group header prior to an item index.\n     */\n\n\n    closestGroup(index) {\n      for (let i = index; i >= 0; i--) {\n        if (this._flatData[i].header) {\n          return this._flatData[i];\n        }\n      }\n    }\n    /**\n     * @hidden\n     * Used to get the first item matching the criteria.\n     */\n\n\n    find(predicate) {\n      const index = this.findIndex(predicate);\n      return this.itemAt(index);\n    }\n    /**\n     * @hidden\n     * Used to get the true index in a flattened data array.\n     */\n\n\n    flatIndex(index) {\n      if (this.itemsCount === 0) {\n        return -1;\n      }\n\n      if (this.grouped) {\n        const match = this._flatData.find(item => !item.header && item.offsetIndex === index);\n\n        if (match) {\n          return match.index;\n        }\n      } else {\n        return index;\n      }\n\n      return -1;\n    }\n    /**\n     * @hidden\n     * Used to get the item at the provided index.\n     */\n\n\n    itemAt(index) {\n      let dataItem;\n\n      if (this.itemsCount === 0) {\n        return dataItem;\n      }\n\n      if (this.grouped) {\n        const match = this._flatData.find(item => !item.header && item.offsetIndex === index);\n\n        if (match) {\n          dataItem = match.value;\n        }\n      } else {\n        dataItem = this.data[index];\n      }\n\n      return dataItem;\n    }\n    /**\n     * @hidden\n     * Used to get the group at the provided index.\n     */\n\n\n    groupAt(index) {\n      if (this.itemsCount === 0 || !this.isGrouped) {\n        return;\n      }\n\n      return this._flatData.find(item => item.header && item.index === index);\n    }\n    /**\n     * @hidden\n     * Used to get the field by which the data is grouped.\n     */\n\n\n    groupField() {\n      if (this.itemsCount === 0 || !this.isGrouped) {\n        return null;\n      }\n\n      return this._data[0].field;\n    }\n    /**\n     * @hidden\n     * Used to get the group to which a dataItem belongs.\n     */\n\n\n    itemGroup(item) {\n      if (!item || this.itemsCount === 0 || !this.isGrouped) {\n        return;\n      }\n\n      const fieldName = this.groupField();\n\n      if (fieldName) {\n        return getter$1(item, fieldName);\n      }\n    }\n\n    flatten(data, group = undefined, offset = 0, groupIndex = 0) {\n      let flat = [];\n\n      if (isPresent(group)) {\n        flat.push({\n          header: true,\n          index: groupIndex + offset,\n          offsetIndex: groupIndex,\n          value: group\n        });\n      }\n\n      for (let i = 0; i < data.length; i++) {\n        let result = [];\n\n        if (data[i].items) {\n          result = this.flatten(data[i].items, data[i].value, offset, i);\n          offset = offset + data[i].items.length;\n        } else {\n          result.push({\n            header: false,\n            index: groupIndex + offset + i + 1,\n            offsetIndex: offset + i,\n            value: data[i]\n          });\n        }\n\n        flat = flat.concat(result);\n      }\n\n      return flat;\n    }\n\n  };\n\n  DataService.ɵfac = function DataService_Factory(t) {\n    return new (t || DataService)();\n  };\n\n  DataService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: DataService,\n    factory: function (t) {\n      return DataService.ɵfac(t);\n    }\n  });\n  /**\n   * @hidden\n   */\n\n  return DataService;\n})();\nlet DisabledItemsService = /*#__PURE__*/(() => {\n  let DisabledItemsService = class DisabledItemsService {\n    constructor(dataService) {\n      this.dataService = dataService;\n      this.itemDisabled = null;\n    }\n\n    isIndexDisabled(index) {\n      if (this.itemDisabled) {\n        const item = this.dataService.itemAt(index);\n\n        if (isPresent(item)) {\n          return this.itemDisabled({\n            dataItem: item,\n            index\n          });\n        } else if (isPresent(this.defaultItem)) {\n          return this.itemDisabled({\n            dataItem: this.defaultItem,\n            index: -1\n          });\n        }\n      }\n    }\n\n    isItemDisabled(item) {\n      if (this.itemDisabled) {\n        const index = this.dataService.indexOf(item);\n\n        if (index !== -1) {\n          return this.itemDisabled({\n            dataItem: item,\n            index\n          });\n        } else if (isPresent(this.defaultItem)) {\n          return this.itemDisabled({\n            dataItem: this.defaultItem,\n            index: -1\n          });\n        }\n      }\n    }\n\n  };\n\n  DisabledItemsService.ɵfac = function DisabledItemsService_Factory(t) {\n    return new (t || DisabledItemsService)(ɵngcc0.ɵɵinject(DataService));\n  };\n\n  DisabledItemsService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: DisabledItemsService,\n    factory: function (t) {\n      return DisabledItemsService.ɵfac(t);\n    }\n  });\n  DisabledItemsService = __decorate([__metadata(\"design:paramtypes\", [DataService])], DisabledItemsService);\n  return DisabledItemsService;\n})();\nconst MIN_INDEX = 0;\n/**\n * @hidden\n */\n\nclass NavigationEvent {\n  /**\n   * The index of the item to which the user navigated.\n   */\n  constructor(index, originalEvent) {\n    this.index = index;\n    this.originalEvent = originalEvent;\n  }\n\n}\n/**\n * @hidden\n */\n\n\nlet NavigationService = /*#__PURE__*/(() => {\n  let NavigationService = class NavigationService {\n    constructor(disabledItemsService, selectionService) {\n      this.disabledItemsService = disabledItemsService;\n      this.selectionService = selectionService;\n      this.open = new EventEmitter();\n      this.close = new EventEmitter();\n      this.enter = new EventEmitter();\n      this.tab = new EventEmitter();\n      this.esc = new EventEmitter();\n      this.up = new EventEmitter();\n      this.right = new EventEmitter();\n      this.down = new EventEmitter();\n      this.left = new EventEmitter();\n      this.delete = new EventEmitter();\n      this.backspace = new EventEmitter();\n      this.home = new EventEmitter();\n      this.end = new EventEmitter();\n    }\n\n    process(args) {\n      const keyCode = args.originalEvent.keyCode;\n      const altKey = args.originalEvent.altKey;\n      let index;\n      let action = NavigationAction.Undefined;\n\n      if (altKey && keyCode === Keys.ArrowDown) {\n        action = NavigationAction.Open;\n      } else if (altKey && keyCode === Keys.ArrowUp) {\n        action = NavigationAction.Close;\n      } else if (keyCode === Keys.Enter) {\n        action = NavigationAction.Enter;\n      } else if (keyCode === Keys.Escape) {\n        action = NavigationAction.Esc;\n      } else if (keyCode === Keys.Tab) {\n        action = NavigationAction.Tab;\n      } else if (keyCode === Keys.ArrowUp) {\n        index = this.next({\n          current: args.current,\n          start: args.min,\n          end: args.max,\n          step: -1\n        });\n        action = NavigationAction.Up;\n      } else if (keyCode === Keys.ArrowLeft) {\n        index = this.next({\n          current: args.current,\n          start: args.min,\n          end: args.max,\n          step: -1\n        });\n        action = NavigationAction.Left;\n      } else if (keyCode === Keys.ArrowDown) {\n        index = this.next({\n          current: args.current,\n          start: args.min,\n          end: args.max,\n          step: 1\n        });\n        action = NavigationAction.Down;\n      } else if (keyCode === Keys.ArrowRight) {\n        index = this.next({\n          current: args.current,\n          start: args.min,\n          end: args.max,\n          step: 1\n        });\n        action = NavigationAction.Right;\n      } else if (keyCode === Keys.Home) {\n        index = this.isDisabled(MIN_INDEX) ? args.current : MIN_INDEX;\n        action = NavigationAction.Home;\n      } else if (keyCode === Keys.End) {\n        index = this.isDisabled(args.max) ? args.current : args.max;\n        action = NavigationAction.End;\n      } else if (keyCode === Keys.Delete) {\n        action = NavigationAction.Delete;\n      } else if (keyCode === Keys.Backspace) {\n        action = NavigationAction.Backspace;\n      }\n\n      const eventData = new NavigationEvent(index, args.originalEvent);\n\n      if (action !== NavigationAction.Undefined) {\n        this[NavigationAction[action].toLowerCase()].emit(eventData);\n      }\n\n      return action;\n    }\n\n    next(args) {\n      const {\n        current,\n        start,\n        end,\n        step\n      } = args;\n      const nextIndex = !isPresent(current) ? start : this.clampIndex(current + step, start, end);\n      const firstFocusableIndex = this.firstFocusableIndex(nextIndex, start, end, step);\n\n      if (isPresent(firstFocusableIndex)) {\n        return firstFocusableIndex;\n      }\n\n      if (this.selectionService.isSelected(current) && current >= start) {\n        return current;\n      }\n\n      const inversedStep = -1 * step;\n      return this.firstFocusableIndex(nextIndex, start, end, inversedStep);\n    }\n\n    clampIndex(index, min, max) {\n      if (!isPresent(index) || index < min) {\n        return min;\n      }\n\n      if (index > max) {\n        return max;\n      }\n\n      return index;\n    }\n\n    firstFocusableIndex(startIndex, min, max, step) {\n      while (min <= startIndex && startIndex <= max) {\n        if (!this.isDisabled(startIndex)) {\n          return startIndex;\n        }\n\n        startIndex += step;\n      }\n\n      return undefined;\n    }\n\n    isDisabled(index) {\n      if (this.disabledItemsService) {\n        return this.disabledItemsService.isIndexDisabled(index);\n      }\n    }\n\n  };\n\n  NavigationService.ɵfac = function NavigationService_Factory(t) {\n    return new (t || NavigationService)(ɵngcc0.ɵɵinject(DisabledItemsService), ɵngcc0.ɵɵinject(SelectionService));\n  };\n\n  NavigationService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NavigationService,\n    factory: function (t) {\n      return NavigationService.ɵfac(t);\n    }\n  });\n  NavigationService = __decorate([__metadata(\"design:paramtypes\", [DisabledItemsService, SelectionService])], NavigationService);\n  /**\n   * Renders content when no data is available. To define the no-data template, nest a `<ng-template>` tag\n   * with the `kendo<ComponentName>NoDataTemplate` directive inside the component tag.\n   *\n   * - [Using `NoDataTemplate` with the AutoComplete]({% slug templates_autocomplete %}#toc-no-data-template)\n   * - [Using `NoDataTemplate` with the ComboBox]({% slug templates_combobox %}#toc-no-data-template)\n   * - [Using `NoDataTemplate` with the MultiColumnComboBox]({% slug templates_multicolumncombobox %}#toc-no-data-template)\n   * - [Using `NoDataTemplate` with the DropDownList]({% slug templates_ddl %}#toc-no-data-template)\n   * - [Using `NoDataTemplate` with the DropDownTree]({% slug templates_ddt %}#toc-no-data-template)\n   * - [Using `NoDataTemplate` with the MultiSelect]({% slug templates_multiselect %}#toc-no-data-template)\n   *\n   * @example\n   * ```ts\n   * _@Component({\n   * selector: 'my-app',\n   * template: `\n   *  <kendo-combobox [data]=\"listItems\">\n   *    <ng-template kendoComboBoxNoDataTemplate>\n   *      <h4>No data!</h4>\n   *    </ng-template>\n   *  </kendo-combobox>\n   * `\n   * })\n   * class AppComponent {\n   *   public listItems: Array<string> = [];\n   * }\n   * ```\n   */\n\n  return NavigationService;\n})();\nlet NoDataTemplateDirective = /*#__PURE__*/(() => {\n  let NoDataTemplateDirective = class NoDataTemplateDirective {\n    constructor(templateRef) {\n      this.templateRef = templateRef;\n    }\n\n  };\n\n  NoDataTemplateDirective.ɵfac = function NoDataTemplateDirective_Factory(t) {\n    return new (t || NoDataTemplateDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef));\n  };\n\n  NoDataTemplateDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NoDataTemplateDirective,\n    selectors: [[\"\", \"kendoDropDownListNoDataTemplate\", \"\"], [\"\", \"kendoDropDownTreeNoDataTemplate\", \"\"], [\"\", \"kendoComboBoxNoDataTemplate\", \"\"], [\"\", \"kendoMultiColumnComboBoxNoDataTemplate\", \"\"], [\"\", \"kendoAutoCompleteNoDataTemplate\", \"\"], [\"\", \"kendoMultiSelectNoDataTemplate\", \"\"], [\"\", \"kendoMultiSelectTreeNoDataTemplate\", \"\"]]\n  });\n  NoDataTemplateDirective = __decorate([__metadata(\"design:paramtypes\", [TemplateRef])], NoDataTemplateDirective);\n  /**\n   * @hidden\n   */\n\n  return NoDataTemplateDirective;\n})();\n\nclass PreventableEvent {\n  constructor() {\n    this.prevented = false;\n  }\n  /**\n   * Prevents the default action for a specified event.\n   * In this way, the source component suppresses the built-in behavior that follows the event.\n   */\n\n\n  preventDefault() {\n    this.prevented = true;\n  }\n  /**\n   * If the event is prevented by any of its subscribers, returns `true`.\n   *\n   * @returns `true` if the default action was prevented. Otherwise, returns `false`.\n   */\n\n\n  isDefaultPrevented() {\n    return this.prevented;\n  }\n\n}\n/**\n * Defines the mandatory properties of the `kendoDropDownFilter` directive\n * so that `kendoDropDownFilter` can be used with any of the DropDowns components\n * which implement the `FilterableDropDownComponentBase` class.\n *\n * @hidden\n */\n\n\nclass FilterableComponent {}\n/**\n * @hidden\n */\n\n\nlet ListItemDirective = /*#__PURE__*/(() => {\n  let ListItemDirective = class ListItemDirective {\n    constructor(element) {\n      this.element = element;\n    }\n\n  };\n\n  ListItemDirective.ɵfac = function ListItemDirective_Factory(t) {\n    return new (t || ListItemDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef));\n  };\n\n  ListItemDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: ListItemDirective,\n    selectors: [[\"li\", \"role\", \"option\"], [\"li\", \"role\", \"group\"]]\n  });\n  ListItemDirective = __decorate([__metadata(\"design:paramtypes\", [ElementRef])], ListItemDirective);\n  /**\n   * @hidden\n   */\n\n  return ListItemDirective;\n})();\nlet ListComponent = /*#__PURE__*/(() => {\n  let ListComponent = class ListComponent {\n    /* tslint:disable:member-ordering */\n    constructor(dataService, wrapper, selectionService, disabledItemsService, cdr, zone, renderer) {\n      this.dataService = dataService;\n      this.wrapper = wrapper;\n      this.selectionService = selectionService;\n      this.disabledItemsService = disabledItemsService;\n      this.cdr = cdr;\n      this.zone = zone;\n      this.renderer = renderer;\n      this.selected = [];\n      this.focused = -1;\n      this.show = true;\n      this.multipleSelection = false;\n      this.listClass = 'k-list k-reset';\n      this.checkboxes = {\n        enabled: false\n      };\n      this.onClick = new EventEmitter();\n      this.pageChange = new EventEmitter();\n      this.listResize = new EventEmitter();\n      this.startFrom = 0;\n      this.lastLoaded = 0;\n      this.lastScrollTop = 0;\n      this.scrollToFocused = false;\n      this.selectSubscription = merge(this.selectionService.onSelect.pipe(map(args => args.indices[0])), this.selectionService.onFocus).pipe( // handle only the very last onSelect/onFocus emission\n      switchMap(event => this.zone.onStable.pipe(take(1), map(() => event)))).subscribe(this.scrollToItem.bind(this));\n    }\n\n    set data(data) {\n      this._data = data[0] && data[0].header ? data.slice(0) : data;\n    }\n\n    get data() {\n      return this._data;\n    }\n\n    get pageSize() {\n      if (this.virtual.pageSize) {\n        return this.virtual.pageSize;\n      }\n\n      let size = Math.round(this.height / this.virtual.itemHeight);\n      return size;\n    }\n\n    get scrollHeight() {\n      return (this.dataService.grouped ? this.virtual.total - 1 : this.virtual.total) * this.virtual.itemHeight;\n    }\n\n    get overflowY() {\n      if (isPresent(this.virtual)) {\n        const overflow = this.hasVirtualScrollbar() ? 'scroll' : 'hidden';\n        return overflow;\n      }\n    }\n\n    ngOnChanges(changes) {\n      if (isChanged('data', changes, false)) {\n        if (this.lastLoaded <= 0) {\n          this.lastLoaded = this.data.length - 1;\n          this.scrollToFocused = !changes.data.isFirstChange();\n        }\n      }\n    }\n\n    ngAfterViewInit() {\n      this.zone.runOutsideAngular(() => {\n        this.scrollSubscription = fromEvent(this.content.nativeElement, \"scroll\").pipe(auditTime(100), tap(this.prefetchData.bind(this)), tap(this.findCurrentGroup.bind(this))).subscribe(() => {\n          this.lastScrollTop = this.content.nativeElement.scrollTop;\n        });\n      });\n    }\n\n    ngAfterViewChecked() {\n      if (this.virtual) {\n        this.positionItems();\n      }\n\n      if (this.items && this.scrollToFocused) {\n        this.scrollToFocused = false;\n        const scrollTarget = this.items.length && this.selectionService.focused === -1 ? 0 : this.selectionService.focused;\n        this.scrollToItem(scrollTarget);\n      }\n\n      if (this.dataService.grouped) {\n        this.findCurrentGroup();\n      }\n    }\n\n    ngOnDestroy() {\n      this.selectSubscription.unsubscribe();\n\n      if (this.scrollSubscription) {\n        this.scrollSubscription.unsubscribe();\n      }\n    }\n\n    onCheckedChange(e, index) {\n      const isChecked = e.target['checked'];\n\n      if (isChecked && !this.selectionService.isSelected(index)) {\n        this.selectionService.add(index);\n      }\n\n      if (!isChecked && this.selectionService.isSelected(index)) {\n        this.selectionService.unselect(index);\n      }\n    }\n\n    isChecked(index) {\n      const normalizedIndex = this.virtual ? index + this.virtual.skip : index;\n      return this.selectionService.isSelected(normalizedIndex);\n    }\n\n    firstVisibleItem() {\n      const content = this.content.nativeElement;\n      const rect = content.getBoundingClientRect(); // IE9 hack\n\n      const disabled = Array.prototype.slice.call(content.querySelectorAll(\".k-state-disabled\")); // This is a workaround for finding elements with pointer-events: none;\n\n      disabled.forEach(el => this.renderer.setStyle(el, \"pointer-events\", \"auto\"));\n      const item = document.elementFromPoint(rect.left + 1, rect.top + 1);\n      disabled.forEach(el => this.renderer.setStyle(el, \"pointer-events\", \"none\")); // return the closest `li` item to cover the custom template scenario\n\n      return closest(item, 'li');\n    }\n\n    findCurrentGroup() {\n      if (!this.dataService.grouped) {\n        this.currentGroup = undefined;\n        return;\n      }\n\n      const item = this.firstVisibleItem();\n\n      if (item) {\n        let index;\n\n        if (item.getAttribute(\"role\") === \"group\") {\n          index = parseInt(item.getAttribute(\"group-index\"), 10);\n          this.currentGroup = this.dataService.groupAt(index).value;\n        } else {\n          index = parseInt(item.getAttribute(\"index\"), 10);\n          this.currentGroup = this.dataService.itemGroup(this.dataService.itemAt(index));\n        }\n      } else {\n        this.currentGroup = undefined;\n      }\n\n      this.cdr.detectChanges();\n    }\n\n    prefetchData() {\n      if (!this.virtual) {\n        return;\n      }\n\n      const visibleItems = Math.trunc(this.content.nativeElement.clientHeight / this.virtual.itemHeight);\n      const offsetY = this.content.nativeElement.scrollTop;\n      const start = Math.trunc(offsetY / this.virtual.itemHeight);\n      const down = offsetY > this.lastScrollTop;\n      const nextPage = start + visibleItems >= this.lastLoaded && this.lastLoaded < this.virtual.total - 1;\n      const leftOver = this.pageSize - (this.lastLoaded - this.startFrom);\n      const prevPage = this.lastLoaded - this.pageSize + visibleItems >= start - leftOver;\n\n      if (down && nextPage) {\n        this.changePage(start);\n      }\n\n      if (!down && prevPage) {\n        this.changePage(start - this.pageSize + visibleItems + 1);\n      }\n    }\n\n    changePage(start) {\n      this.zone.run(() => {\n        let end = this.pageSize + start;\n\n        if (end > this.virtual.total) {\n          start--;\n          end = this.virtual.total;\n        }\n\n        if (start < 0) {\n          start = 0;\n        }\n\n        this.startFrom = start;\n        this.lastLoaded = end;\n        this.pageChange.emit({\n          skip: start,\n          take: this.pageSize\n        });\n      });\n    }\n\n    index(groupIndex, itemIndex) {\n      return groupIndex > 0 ? this.dataService.groupIndices[groupIndex - 1] + itemIndex : itemIndex;\n    }\n\n    getText(dataItem) {\n      return getter$1(dataItem, this.textField);\n    }\n\n    getValue(dataItem) {\n      return getter$1(dataItem, this.valueField);\n    }\n\n    isDisabled(index) {\n      if (isPresent(this.virtual)) {\n        index += this.virtual.skip;\n      }\n\n      return this.disabledItemsService.isIndexDisabled(index);\n    }\n\n    scrollToItem(index) {\n      let flatIndex = index;\n\n      if (this.dataService.grouped) {\n        // takes into account the group header items\n        flatIndex = this.dataService.flatIndex(index);\n        /* The first group header item is not rendered in the list (see template), so subtract 1 when calulating the flat index.\n           With virtualization enabled, the first group header could be in a previous page, in which case don't subtract anything. */\n\n        const groupHeaderOffset = this.firstGroupHeaderInTargetedPage(flatIndex) ? -1 : 0;\n        flatIndex += groupHeaderOffset;\n      }\n\n      if (this.virtual && flatIndex > -1) {\n        this.scrollToIndex(flatIndex);\n        return;\n      }\n\n      const items = this.items.toArray();\n\n      if (isPresent(items[flatIndex]) && flatIndex !== -1) {\n        this.scroll(items[flatIndex].element);\n      }\n    }\n\n    scrollToIndex(index) {\n      let content = this.content.nativeElement;\n      let contentScrollTop = content.scrollTop;\n      const itemOffsetTop = index * this.virtual.itemHeight;\n      const itemOffsetHeight = this.virtual.itemHeight;\n      const contentOffsetHeight = content.clientHeight;\n      const bottomDistance = itemOffsetTop + itemOffsetHeight;\n\n      if (contentScrollTop > itemOffsetTop) {\n        contentScrollTop = itemOffsetTop;\n      } else if (bottomDistance > contentScrollTop + contentOffsetHeight) {\n        contentScrollTop = bottomDistance - contentOffsetHeight;\n      }\n\n      content.scrollTop = contentScrollTop;\n    }\n\n    scroll(item) {\n      if (!item) {\n        return;\n      }\n\n      const nativeElement = item.nativeElement;\n      let content = this.content.nativeElement,\n          itemOffsetTop = nativeElement.offsetTop,\n          itemOffsetHeight = nativeElement.offsetHeight,\n          contentScrollTop = content.scrollTop,\n          contentOffsetHeight = content.clientHeight,\n          bottomDistance = itemOffsetTop + itemOffsetHeight;\n\n      if (contentScrollTop > itemOffsetTop) {\n        contentScrollTop = itemOffsetTop;\n      } else if (bottomDistance > contentScrollTop + contentOffsetHeight) {\n        contentScrollTop = bottomDistance - contentOffsetHeight;\n      }\n\n      content.scrollTop = contentScrollTop;\n    }\n    /**\n     * Indicates whether a scrollbar is currently rendered in the list.\n     */\n\n\n    hasScrollbar() {\n      if (!(isPresent(this.items) && this.items.length && isPresent(this.list) && isPresent(this.content))) {\n        return false;\n      }\n\n      const hasVirtualScroll = isPresent(this.virtual) && this.hasVirtualScrollbar();\n      return hasVirtualScroll || this.list.nativeElement.scrollHeight > this.content.nativeElement.offsetHeight;\n    }\n    /**\n     * Indicates whether the scrollbar should be visible in virtual mode.\n     */\n\n\n    hasVirtualScrollbar() {\n      const contentOffsetHeight = this.content.nativeElement.offsetHeight;\n      const virtualOffsetHeight = this.virtualContainer && this.virtualContainer.nativeElement.offsetHeight;\n      return this.virtualContainer && virtualOffsetHeight > contentOffsetHeight;\n    }\n\n    positionItems() {\n      this.items.forEach((item, index) => {\n        const offsetY = (index + this.startFrom) * this.virtual.itemHeight;\n        this.renderer.setStyle(item.element.nativeElement, \"transform\", `translateY(${offsetY}px`);\n      });\n    }\n    /**\n     * Indicates whether the first group header from the data set is in the targeted virtual page.\n     */\n\n\n    firstGroupHeaderInTargetedPage(itemIndex) {\n      if (!isPresent(this.virtual)) {\n        return true;\n      }\n\n      return this.virtual.skip === 0 && this.virtual.pageSize > itemIndex;\n    }\n\n  };\n\n  ListComponent.ɵfac = function ListComponent_Factory(t) {\n    return new (t || ListComponent)(ɵngcc0.ɵɵdirectiveInject(DataService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(SelectionService), ɵngcc0.ɵɵdirectiveInject(DisabledItemsService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2));\n  };\n\n  ListComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: ListComponent,\n    selectors: [[\"kendo-list\"]],\n    viewQuery: function ListComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c2, 7);\n        ɵngcc0.ɵɵviewQuery(_c3, 7);\n        ɵngcc0.ɵɵviewQuery(_c4, 5);\n        ɵngcc0.ɵɵviewQuery(ListItemDirective, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.content = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.list = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.virtualContainer = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.items = _t);\n      }\n    },\n    inputs: {\n      selected: \"selected\",\n      focused: \"focused\",\n      show: \"show\",\n      multipleSelection: \"multipleSelection\",\n      listClass: \"listClass\",\n      checkboxes: \"checkboxes\",\n      data: \"data\",\n      textField: \"textField\",\n      valueField: \"valueField\",\n      height: \"height\",\n      template: \"template\",\n      groupTemplate: \"groupTemplate\",\n      fixedGroupTemplate: \"fixedGroupTemplate\",\n      id: \"id\",\n      optionPrefix: \"optionPrefix\",\n      virtual: \"virtual\"\n    },\n    outputs: {\n      onClick: \"onClick\",\n      pageChange: \"pageChange\",\n      listResize: \"listResize\"\n    },\n    features: [ɵngcc0.ɵɵNgOnChangesFeature],\n    decls: 9,\n    vars: 20,\n    consts: [[\"class\", \"k-outer-group-header k-first\", 3, \"ngClass\", \"ngStyle\", 4, \"ngIf\"], [\"unselectable\", \"on\", 3, \"ngClass\"], [\"content\", \"\"], [\"role\", \"listbox\", 3, \"ngClass\"], [\"list\", \"\"], [4, \"ngIf\"], [3, \"resize\", 4, \"ngIf\"], [\"class\", \"k-height-container\", \"role\", \"presentation\", 4, \"ngIf\"], [1, \"k-outer-group-header\", \"k-first\", 3, \"ngClass\", \"ngStyle\"], [3, \"ngIf\"], [3, \"templateContext\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [\"role\", \"option\", \"kendoDropDownsSelectable\", \"\", 1, \"k-item\", 3, \"checkboxes\", \"height\", \"index\", \"multipleSelection\", \"ngClass\"], [\"class\", \"k-checkbox-label\", 4, \"ngIf\"], [1, \"k-checkbox-label\"], [\"type\", \"checkbox\", 1, \"k-checkbox\", 3, \"checked\", \"change\"], [\"role\", \"group\", \"class\", \"k-outer-group-header\", 3, \"ngClass\", \"ngStyle\", 4, \"ngIf\"], [\"role\", \"option\", \"kendoDropDownsSelectable\", \"\", \"class\", \"k-item\", 3, \"height\", \"index\", \"multipleSelection\", \"ngClass\", 4, \"ngIf\"], [\"role\", \"group\", 1, \"k-outer-group-header\", 3, \"ngClass\", \"ngStyle\"], [\"role\", \"option\", \"kendoDropDownsSelectable\", \"\", 1, \"k-item\", 3, \"height\", \"index\", \"multipleSelection\", \"ngClass\"], [3, \"resize\"], [\"role\", \"presentation\", 1, \"k-height-container\"], [\"virtualContainer\", \"\"]],\n    template: function ListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, ListComponent_div_0_Template, 3, 10, \"div\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"div\", 1, 2);\n        ɵngcc0.ɵɵelementStart(3, \"ul\", 3, 4);\n        ɵngcc0.ɵɵtemplate(5, ListComponent_5_Template, 1, 1, undefined, 5);\n        ɵngcc0.ɵɵtemplate(6, ListComponent_6_Template, 1, 1, undefined, 5);\n        ɵngcc0.ɵɵtemplate(7, ListComponent_kendo_resize_sensor_7_Template, 1, 0, \"kendo-resize-sensor\", 6);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(8, ListComponent_div_8_Template, 4, 2, \"div\", 7);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.dataService.grouped);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵstyleProp(\"max-height\", ctx.height, \"px\")(\"overflow-y\", ctx.overflowY);\n        ɵngcc0.ɵɵproperty(\"ngClass\", ɵngcc0.ɵɵpureFunction2(15, _c9, ctx.virtual, !ctx.virtual));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵclassMap(ctx.listClass);\n        ɵngcc0.ɵɵproperty(\"ngClass\", ɵngcc0.ɵɵpureFunction1(18, _c10, ctx.virtual));\n        ɵngcc0.ɵɵattribute(\"id\", ctx.id)(\"aria-hidden\", !ctx.show);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.dataService.grouped && ctx.show);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.dataService.grouped);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.virtual);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.virtual);\n      }\n    },\n    directives: function () {\n      return [ɵngcc3.NgIf, ɵngcc3.NgClass, ɵngcc3.NgStyle, TemplateContextDirective, ɵngcc3.NgForOf, ListItemDirective, SelectableDirective, ɵngcc2.ResizeSensorComponent];\n    },\n    encapsulation: 2\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", Array)], ListComponent.prototype, \"selected\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Number)], ListComponent.prototype, \"focused\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], ListComponent.prototype, \"textField\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], ListComponent.prototype, \"valueField\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Number)], ListComponent.prototype, \"height\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", ItemTemplateDirective)], ListComponent.prototype, \"template\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", GroupTemplateDirective)], ListComponent.prototype, \"groupTemplate\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", FixedGroupTemplateDirective)], ListComponent.prototype, \"fixedGroupTemplate\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], ListComponent.prototype, \"show\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], ListComponent.prototype, \"id\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], ListComponent.prototype, \"optionPrefix\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], ListComponent.prototype, \"multipleSelection\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], ListComponent.prototype, \"virtual\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], ListComponent.prototype, \"listClass\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], ListComponent.prototype, \"checkboxes\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Array), __metadata(\"design:paramtypes\", [Array])], ListComponent.prototype, \"data\", null);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], ListComponent.prototype, \"onClick\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], ListComponent.prototype, \"pageChange\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], ListComponent.prototype, \"listResize\", void 0);\n\n  __decorate([ViewChildren(ListItemDirective), __metadata(\"design:type\", QueryList)], ListComponent.prototype, \"items\", void 0);\n\n  __decorate([ViewChild('content', {\n    static: true\n  }), __metadata(\"design:type\", ElementRef)], ListComponent.prototype, \"content\", void 0);\n\n  __decorate([ViewChild('list', {\n    static: true\n  }), __metadata(\"design:type\", ElementRef)], ListComponent.prototype, \"list\", void 0);\n\n  __decorate([ViewChild('virtualContainer', {\n    static: false\n  }), __metadata(\"design:type\", ElementRef)], ListComponent.prototype, \"virtualContainer\", void 0);\n\n  ListComponent = __decorate([__metadata(\"design:paramtypes\", [DataService, ElementRef, SelectionService, DisabledItemsService, ChangeDetectorRef, NgZone, Renderer2])], ListComponent);\n  /**\n   * @hidden\n   */\n\n  return ListComponent;\n})();\nconst DEFAULTS = {\n  pageSize: 50,\n  itemHeight: 28\n};\n/**\n * @hidden\n */\n\nconst normalizeVirtualizationSettings = (settings, defaultOverrides) => {\n  const defaults = Object.assign({}, DEFAULTS, defaultOverrides);\n\n  if (settings === true) {\n    return defaults;\n  }\n\n  if (!settings) {\n    return null;\n  }\n\n  return Object.assign({\n    pageSize: DEFAULTS.pageSize\n  }, settings);\n};\n/**\n * @hidden\n */\n\n\nconst TOUCH_ENABLED = new InjectionToken('dropdowns-touch-enabled');\n/* tslint:disable:member-ordering */\n\nvar AutoCompleteComponent_1;\nconst NO_VALUE = \"\";\n/**\n * @hidden\n */\n\nconst AUTOCOMPLETE_VALUE_ACCESSOR = {\n  multi: true,\n  provide: NG_VALUE_ACCESSOR,\n  useExisting: forwardRef(() => AutoCompleteComponent)\n};\n/**\n * Represents the [Kendo UI AutoComplete component for Angular]({% slug overview_autocomplete %}).\n *\n * @example\n * ```ts\n * _@Component({\n * selector: 'my-app',\n * template: `\n *  <kendo-autocomplete\n *      [data]=\"listItems\"\n *      [placeholder]=\"placeholder\"\n *  >\n * `\n * })\n * class AppComponent {\n *   public placeholder: string = 'Type \"it\" for suggestions';\n *   public listItems: Array<string> = [\"Item 1\", \"Item 2\", \"Item 3\", \"Item 4\"];\n * }\n * ```\n */\n\nlet AutoCompleteComponent = AutoCompleteComponent_1 = class AutoCompleteComponent {\n  constructor(localization, dataService, popupService, selectionService, navigationService, disabledItemsService, _zone, cdr, renderer, hostElement, touchEnabled$$1) {\n    this.localization = localization;\n    this.dataService = dataService;\n    this.popupService = popupService;\n    this.selectionService = selectionService;\n    this.navigationService = navigationService;\n    this.disabledItemsService = disabledItemsService;\n    this._zone = _zone;\n    this.cdr = cdr;\n    this.renderer = renderer;\n    this.hostElement = hostElement;\n    this.touchEnabled = touchEnabled$$1;\n    /**\n     * Defines whether the first match from the suggestions list will be automatically focused.\n     * By default, `highlightFirst` is set to `true`.\n     */\n\n    this.highlightFirst = true;\n    /**\n     * @hidden\n     */\n\n    this.focusableId = `k-${guid$1()}`;\n    /**\n     * The hint which is displayed when the component is empty.\n     */\n\n    this.placeholder = \"\";\n    /**\n     * Sets the height of the suggestions list. By default, `listHeight` is 200px.\n     *\n     * > The `listHeight` property affects only the list of suggestions and not the whole popup container.\n     * > To set the height of the popup container, use `popupSettings.height`.\n     */\n\n    this.listHeight = 200;\n    /**\n     * @hidden\n     *\n     * If set to `true`, renders a button on hovering over the component.\n     * Clicking this button resets the value of the component to `undefined` and triggers the `change` event.\n     */\n\n    this.clearButton = true;\n    /**\n     * Sets the disabled state of the component.\n     */\n\n    this.disabled = false;\n    /**\n     * Sets the read-only state of the component.\n     */\n\n    this.readonly = false;\n    /**\n     * Specifies the [`tabindex`](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex) of the component.\n     */\n\n    this.tabindex = 0;\n    /**\n     * Enables the [filtering]({% slug filtering_autocomplete %}) functionality.\n     * If set to `true`, the component emits the `filterChange` event.\n     */\n\n    this.filterable = false;\n    /**\n     * Fires each time the value is changed&mdash;\n     * when the component is blurred or the value is cleared through the **Clear** button\n     * ([see example]({% slug overview_autocomplete %}#toc-events)).\n     * When the value of the component is programmatically changed to `ngModel` or `formControl`\n     * through its API or form binding, the `valueChange` event is not triggered because it\n     * might cause a mix-up with the built-in `valueChange` mechanisms of the `ngModel` or `formControl` bindings.\n     */\n\n    this.valueChange = new EventEmitter();\n    /**\n     * Fires each time the user types in the input field.\n     * You can filter the source based on the passed filtration value\n     * ([see example]({% slug overview_autocomplete %}#toc-events)).\n     */\n\n    this.filterChange = new EventEmitter();\n    /**\n     * Fires each time the popup is about to open.\n     * This event is preventable. If you cancel it, the popup will remain closed.\n     */\n\n    this.open = new EventEmitter();\n    /**\n     * Fires after the popup has been opened.\n     */\n\n    this.opened = new EventEmitter();\n    /**\n     * Fires each time the popup is about to close.\n     * This event is preventable. If you cancel it, the popup will remain open.\n     */\n\n    this.close = new EventEmitter();\n    /**\n     * Fires after the popup has been closed.\n     */\n\n    this.closed = new EventEmitter();\n    /**\n     * Fires each time the user focuses the AutoComplete.\n     */\n\n    this.onFocus = new EventEmitter();\n    /**\n     * Fires each time the AutoComplete gets blurred.\n     */\n\n    this.onBlur = new EventEmitter();\n    this.widgetClasses = true;\n    this.listBoxId = guid$1();\n    this.optionPrefix = guid$1();\n    this.onChangeCallback = noop;\n    this.onTouchedCallback = noop;\n\n    this.popupMouseDownHandler = event => event.preventDefault();\n\n    this._popupSettings = {\n      animate: true\n    };\n    this._open = false;\n    this._value = \"\";\n    this.valueChangeSubject = new Subject();\n    this._isFocused = false;\n    validatePackage(packageMetadata);\n    this.direction = localization.rtl ? 'rtl' : 'ltr';\n    this.wrapper = this.hostElement.nativeElement;\n    this.data = [];\n    this.subscribeEvents();\n    this.subscribeTouchEvents();\n    this.selectionService.resetSelection([-1]);\n  }\n\n  get width() {\n    let wrapperOffsetWidth = 0;\n\n    if (isDocumentAvailable()) {\n      wrapperOffsetWidth = this.wrapper.offsetWidth;\n    }\n\n    const width = this.popupSettings.width || wrapperOffsetWidth;\n    const minWidth = isNaN(wrapperOffsetWidth) ? wrapperOffsetWidth : `${wrapperOffsetWidth}px`;\n    const maxWidth = isNaN(width) ? width : `${width}px`;\n    return {\n      min: minWidth,\n      max: maxWidth\n    };\n  }\n\n  get height() {\n    const popupHeight = this.popupSettings.height;\n    return isPresent(popupHeight) ? `${popupHeight}px` : 'auto';\n  }\n\n  get listContainerClasses() {\n    const containerClasses = ['k-list-container', 'k-reset'];\n\n    if (this.popupSettings.popupClass) {\n      containerClasses.push(this.popupSettings.popupClass);\n    }\n\n    return containerClasses;\n  }\n\n  get suggestion() {\n    if (!this.text || !this.suggestedText) {\n      this.suggestedText = undefined;\n      return;\n    }\n\n    const hasMatch = this.suggestedText.toLowerCase().startsWith(this.text.toLowerCase());\n    const shouldSuggest = this.suggest && !this.backspacePressed;\n\n    if (shouldSuggest && hasMatch) {\n      return this.suggestedText;\n    }\n  }\n\n  get appendTo() {\n    const {\n      appendTo\n    } = this.popupSettings;\n\n    if (!appendTo || appendTo === 'root') {\n      return undefined;\n    }\n\n    return appendTo === 'component' ? this.container : appendTo;\n  }\n\n  get clearButtonVisiblity() {\n    if (this.touchEnabled) {\n      return 'visible';\n    }\n  }\n  /**\n   * Toggles the visibility of the popup.\n   * If you use the `toggle` method to open or close the popup, the `open` and `close` events will not be fired.\n   *\n   * @param open - The state of the popup.\n   */\n\n\n  toggle(open) {\n    Promise.resolve(null).then(() => {\n      const shouldOpen = isPresent(open) ? open : !this._open;\n\n      this._toggle(shouldOpen);\n    });\n  }\n  /**\n   * Returns the current open state of the popup.\n   */\n\n\n  get isOpen() {\n    return this._open;\n  }\n  /**\n   * @hidden\n   */\n\n\n  togglePopup(open) {\n    const isDisabled = this.disabled || this.readonly;\n    const sameState = this.isOpen === open;\n\n    if (isDisabled || sameState) {\n      return;\n    }\n\n    const isDefaultPrevented = this.triggerPopupEvents(open);\n\n    if (!isDefaultPrevented) {\n      this._toggle(open);\n    }\n  }\n\n  get activeDescendant() {\n    if (!this.isOpen || !isPresent(this.selectionService.focused) || this.selectionService.focused === -1) {\n      return null;\n    }\n\n    const dataItem = this.dataService.itemAt(this.selectionService.focused);\n    return this.optionPrefix + \"-\" + getter$1(dataItem, this.valueField);\n  }\n\n  get noDataLabel() {\n    if (this.data.length === 0) {\n      return this.noDataText;\n    }\n  }\n\n  get clearTitle() {\n    return this.localization.get('clearTitle');\n  }\n  /**\n   * Sets the data of the AutoComplete.\n   *\n   * > The data has to be provided in an array-like list.\n   */\n\n\n  set data(data) {\n    this.dataService.data = data || [];\n\n    if (this.virtual) {\n      this.virtual.skip = 0;\n    }\n\n    if (this.filterable) {\n      this.selectionService.focused = this.isOpen && this.data.length && this.highlightFirst ? this.firstFocusableIndex(0) : -1;\n    }\n\n    if (this.suggest && this.dataService.itemsCount > 0) {\n      this.suggestedText = getter$1(this.dataService.itemAt(0), this.valueField);\n    }\n  }\n\n  get data() {\n    const virtual = this.virtual;\n\n    if (virtual) {\n      const start = virtual.skip || 0;\n      const end = start + virtual.pageSize; // Use length instead of itemsCount because of the grouping.\n\n      virtual.total = this.dataService.data.length;\n      return this.dataService.data.slice(start, end);\n    }\n\n    return this.dataService.data;\n  }\n  /**\n   * Sets the value of the AutoComplete.\n   */\n\n\n  set value(newValue) {\n    this.verifySettings(newValue);\n    this._value = newValue || NO_VALUE;\n    this.text = this.value;\n    this.cdr.markForCheck();\n  }\n\n  get value() {\n    return this._value || NO_VALUE;\n  }\n  /**\n   * Configures the popup of the AutoComplete.\n   *\n   * The available options are:\n   * - `animate: Boolean`&mdash;Controls the popup animation. By default, the open and close animations are enabled.\n   * - `width: Number | String`&mdash;Sets the width of the popup container. By default, the width of the host element is used. If set to `auto`, the component automatically adjusts the width of the popup and no item labels are wrapped. The `auto` mode is not supported when virtual scrolling is enabled.\n   * - `height: Number`&mdash;Sets the height of the popup container.\n   * - `popupClass: String`&mdash;Specifies a list of CSS classes that are used to style the popup.\n   * - `appendTo: \"root\" | \"component\" | ViewContainerRef`&mdash;Specifies the component to which the popup will be appended.\n   */\n\n\n  set popupSettings(settings) {\n    this._popupSettings = Object.assign({\n      animate: true\n    }, settings);\n  }\n\n  get popupSettings() {\n    return this._popupSettings;\n  }\n  /**\n   * Defines a Boolean function that is executed for each data item in the component\n   * ([see examples]({% slug disableditems_autocomplete %})).\n   * Determines whether the item will be disabled.\n   */\n\n\n  set itemDisabled(fn) {\n    if (typeof fn !== 'function') {\n      throw new Error(`itemDisabled must be a function, but received ${JSON.stringify(fn)}.`);\n    }\n\n    this.disabledItemsService.itemDisabled = fn;\n  }\n  /**\n   * @hidden\n   */\n\n\n  set tabIndex(tabIndex) {\n    this.tabindex = tabIndex;\n  }\n\n  get tabIndex() {\n    return this.tabindex;\n  }\n  /**\n   * Enables the [virtualization]({% slug virtualization_autocomplete %}) functionality.\n   */\n\n\n  set virtual(settings) {\n    this._virtualSettings = normalizeVirtualizationSettings(settings);\n  }\n\n  get virtual() {\n    return this._virtualSettings;\n  }\n\n  get isFocused() {\n    return this._isFocused;\n  }\n\n  set isFocused(isFocused) {\n    this.renderer[isFocused ? 'addClass' : 'removeClass'](this.wrapper, \"k-state-focused\");\n    this._isFocused = isFocused;\n  }\n\n  get isDisabled() {\n    return this.disabled;\n  }\n\n  get dir() {\n    return this.direction;\n  }\n\n  ngOnInit() {\n    this.renderer.removeAttribute(this.wrapper, \"tabindex\");\n    this.localizationChangeSubscription = this.localization.changes.subscribe(({\n      rtl\n    }) => {\n      this.direction = rtl ? 'rtl' : 'ltr';\n      this.setMessages();\n    });\n    this.setMessages();\n  }\n\n  ngOnDestroy() {\n    this.destroyPopup();\n    this.unsubscribeEvents();\n    clearTimeout(this.messagesTimeout);\n\n    if (this.localizationChangeSubscription) {\n      this.localizationChangeSubscription.unsubscribe();\n    }\n  }\n\n  ngOnChanges(changes) {\n    const virtual = this.virtual;\n    const requestInitialData = virtual && changes.data && changes.data.isFirstChange();\n\n    if (requestInitialData) {\n      this.pageChange({\n        skip: 0,\n        take: virtual.pageSize\n      });\n    }\n  }\n  /**\n   * Resets the value of the AutoComplete.\n   * If you use the `reset` method to clear the value of the component,\n   * the model will not update automatically and the `selectionChange` and `valueChange` events will not be fired.\n   */\n\n\n  reset() {\n    this.value = NO_VALUE;\n  }\n  /**\n   * @hidden\n   */\n\n\n  clearValue(event) {\n    event.stopImmediatePropagation();\n    this.focus();\n    this.change(NO_VALUE);\n\n    if (this.filterable) {\n      this.filterChange.emit('');\n    }\n\n    this.selectionService.resetSelection([]);\n  }\n  /**\n   * @hidden\n   */\n\n\n  writeValue(value) {\n    this.value = value;\n  }\n  /**\n   * @hidden\n   */\n\n\n  registerOnChange(fn) {\n    this.onChangeCallback = fn;\n  }\n  /**\n   * @hidden\n   */\n\n\n  registerOnTouched(fn) {\n    this.onTouchedCallback = fn;\n  }\n  /**\n   * @hidden\n   */\n\n\n  setDisabledState(isDisabled) {\n    this.disabled = isDisabled;\n  }\n  /**\n   * Focuses a specific item of the AutoComplete based on a provided index.\n   * If null or invalid index is provided the focus will be removed.\n   */\n\n\n  focusItemAt(index) {\n    const isInRange = index >= 0 && index < this.data.length;\n\n    if (isPresent(index) && isInRange && !this.disabledItemsService.isIndexDisabled(index)) {\n      this.selectionService.focus(index);\n    } else {\n      this.selectionService.focus(-1);\n    }\n  }\n  /**\n   * Focuses the AutoComplete.\n   */\n\n\n  focus() {\n    if (!this.disabled) {\n      this.searchbar.focus();\n    }\n  }\n  /**\n   * Blurs the AutoComplete.\n   */\n\n\n  blur() {\n    if (!this.disabled) {\n      this.searchbar.blur();\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  onResize() {\n    if (this._open) {\n      const popupWrapper = this.popupRef.popupElement;\n      const {\n        min,\n        max\n      } = this.width;\n      popupWrapper.style.minWidth = min;\n      popupWrapper.style.width = max;\n    }\n  }\n\n  emitChange(value) {\n    this.onChangeCallback(value);\n    this.valueChange.emit(value);\n  }\n\n  verifySettings(newValue) {\n    if (!isDevMode()) {\n      return;\n    }\n\n    if (isPresent(newValue) && typeof newValue !== \"string\") {\n      throw new Error(\"Expected value of type string. See https://www.telerik.com/kendo-angular-ui/components/dropdowns/autocomplete/value-binding/\");\n    }\n  }\n\n  search(text, startFrom = 0) {\n    let index;\n\n    if (text.length && this.dataService.itemsCount) {\n      index = this.dataService.findIndex(this.findIndexPredicate(text), startFrom);\n    } else {\n      index = -1;\n    }\n\n    if (this.disabledItemsService.isIndexDisabled(index)) {\n      if (index + 1 < this.dataService.itemsCount) {\n        this.search(text, index + 1);\n      } else {\n        this.selectionService.focus(-1);\n      }\n    } else {\n      this.selectionService.focus(index);\n\n      if (this.suggest) {\n        this.suggestedText = getter$1(this.dataService.itemAt(index), this.valueField);\n      }\n    }\n  }\n\n  navigate(index) {\n    if (!this.isOpen) {\n      return;\n    }\n\n    this.selectionService.focus(index);\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleNavigate(event) {\n    const focused = isNaN(this.selectionService.focused) ? this.firstFocusableIndex(0) : this.selectionService.focused;\n\n    if (this.disabled || this.readonly || isNaN(focused)) {\n      return;\n    }\n\n    const action = this.navigationService.process({\n      current: focused,\n      max: this.dataService.itemsCount - 1,\n      min: 0,\n      originalEvent: event\n    });\n\n    if (action !== NavigationAction.Undefined && action !== NavigationAction.Backspace && action !== NavigationAction.Delete && action !== NavigationAction.Home && action !== NavigationAction.End && action !== NavigationAction.Left && action !== NavigationAction.Right && (action === NavigationAction.Enter && this.isOpen || action !== NavigationAction.Enter)) {\n      event.preventDefault();\n    }\n  }\n\n  handleEnter(event) {\n    const focused = this.selectionService.focused;\n    let value;\n\n    if (this.isOpen) {\n      event.originalEvent.preventDefault();\n    }\n\n    if (focused >= 0) {\n      value = getter$1(this.dataService.itemAt(focused), this.valueField);\n    } else {\n      const match = this.suggest && this.suggestedText && this.data.length && getter$1(this.dataService.itemAt(0), this.valueField).toLowerCase() === this.searchbar.value.toLowerCase();\n\n      if (this.isOpen && match) {\n        value = this.suggestedText;\n      } else {\n        value = this.searchbar.value;\n      }\n    }\n\n    this.change(value);\n  }\n\n  handleEscape() {\n    this.togglePopup(false);\n    this.selectionService.focused = -1;\n    this.suggestedText = null;\n  }\n  /**\n   * @hidden\n   */\n\n\n  searchBarChange(text) {\n    const currentTextLength = isPresent(this.text) ? this.text.length : 0;\n    this.backspacePressed = text.length < currentTextLength ? true : false;\n    this.text = text;\n    this.togglePopup(text.length > 0);\n\n    if (!this.highlightFirst) {\n      this.selectionService.focused = -1;\n    }\n\n    if (this.filterable) {\n      this.filterChange.emit(text);\n    } else if (this.highlightFirst) {\n      this.search(text);\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleFocus() {\n    this.isFocused = true;\n\n    if (hasObservers(this.onFocus)) {\n      this._zone.run(() => {\n        this.onFocus.emit();\n      });\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleBlur() {\n    const focused = this.filterable ? this.selectionService.focused : -1;\n    this.searchbar.input.nativeElement.scrollLeft = 0; // Firefox doesn't auto-scroll to the left on blur like other browsers\n\n    let dataItem;\n    let text;\n\n    if (focused !== -1) {\n      dataItem = this.dataService.itemAt(focused);\n      text = getter$1(dataItem, this.valueField) || \"\";\n    } else {\n      text = this.searchbar.value;\n    }\n\n    const exactMatch = text === this.searchbar.value;\n    const insensitiveMatch = text.toLowerCase() === this.searchbar.value.toLowerCase();\n\n    if (!exactMatch && insensitiveMatch) {\n      this.selectionService.resetSelection([]);\n    }\n\n    this.isFocused = false;\n    const valueHasChanged = this.value !== this.text;\n    const runInZone = hasObservers(this.onBlur) || hasObservers(this.close) || isUntouched(this.wrapper) || valueHasChanged;\n\n    if (runInZone) {\n      this._zone.run(() => {\n        if (valueHasChanged) {\n          this.change(this.searchbar.value);\n        }\n\n        this.onBlur.emit();\n        this.onTouchedCallback();\n        this.togglePopup(false);\n      });\n    } else {\n      this.togglePopup(false);\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  pageChange(event) {\n    const virtual = this.virtual;\n    virtual.skip = event.skip;\n  }\n\n  change(value) {\n    this.togglePopup(false);\n    this.valueChangeSubject.next(value);\n  }\n\n  subscribeEvents() {\n    if (!isDocumentAvailable()) {\n      return;\n    }\n\n    this.valueChangeSubscription = this.valueChangeSubject.subscribe(value => {\n      const hasChange = this.value !== value;\n      this.value = value;\n      this.text = value; // emit change after assigning `this.value` => allows the user to modify the component value on `valueChange`\n\n      if (hasChange) {\n        this.emitChange(value);\n      }\n    });\n    this.changeSubscription = this.selectionService.onChange.subscribe(this.handleItemChange.bind(this));\n    this.focusSubscription = this.selectionService.onFocus.subscribe(this.handleItemFocus.bind(this));\n    this.navigationSubscription = merge(this.navigationService.up, this.navigationService.down).subscribe(event => this.navigate(event.index));\n    this.closeSubscription = this.navigationService.close.subscribe(() => this.togglePopup(false));\n    this.enterSubscription = this.navigationService.enter.subscribe(this.handleEnter.bind(this));\n    this.escSubscription = this.navigationService.esc.subscribe(this.handleEscape.bind(this));\n  }\n\n  subscribeTouchEvents() {\n    if (!isDocumentAvailable() || !this.touchEnabled) {\n      return;\n    }\n\n    this._zone.runOutsideAngular(() => // Roll up AutoComplete on iOS when tapped outside\n    this.touchstartDisposeHandler = this.renderer.listen(document, 'touchstart', e => {\n      const target = e.target;\n\n      if (this.isFocused && !inDropDown(this.hostElement, target, this.popupRef)) {\n        this._zone.run(() => this.blur());\n      }\n    }));\n  }\n\n  unsubscribeEvents() {\n    if (!isDocumentAvailable()) {\n      return;\n    }\n\n    this.changeSubscription.unsubscribe();\n    this.navigationSubscription.unsubscribe();\n    this.closeSubscription.unsubscribe();\n    this.enterSubscription.unsubscribe();\n    this.escSubscription.unsubscribe();\n    this.valueChangeSubscription.unsubscribe();\n    this.focusSubscription.unsubscribe();\n\n    if (this.touchstartDisposeHandler) {\n      this.touchstartDisposeHandler();\n    }\n  }\n\n  handleItemChange(event) {\n    const index = event.indices.length ? event.indices[0] : undefined;\n    this.selectionService.resetSelection([-1]);\n\n    if (!isPresent(index)) {\n      return;\n    }\n\n    let text = getter$1(this.dataService.itemAt(index), this.valueField);\n    this.change(text);\n  }\n\n  handleItemFocus(_event) {\n    const focused = this.selectionService.focused;\n    const shouldSuggest = Boolean(this.suggest && this.data && this.data.length && focused >= 0);\n\n    if (shouldSuggest) {\n      this.suggestedText = getter$1(this.dataService.itemAt(focused), this.valueField);\n    }\n  }\n\n  createPopup() {\n    if (this.virtual) {\n      this.virtual.skip = 0;\n    }\n\n    const horizontalAlign = this.direction === \"rtl\" ? \"right\" : \"left\";\n    const anchorPosition = {\n      horizontal: horizontalAlign,\n      vertical: \"bottom\"\n    };\n    const popupPosition = {\n      horizontal: horizontalAlign,\n      vertical: \"top\"\n    };\n    this.popupRef = this.popupService.open({\n      anchor: this.wrapper,\n      animate: this.popupSettings.animate,\n      appendTo: this.appendTo,\n      content: this.popupTemplate,\n      popupClass: this.listContainerClasses,\n      positionMode: 'absolute',\n      popupAlign: popupPosition,\n      anchorAlign: anchorPosition\n    });\n    const popupWrapper = this.popupRef.popupElement;\n    const {\n      min,\n      max\n    } = this.width;\n    popupWrapper.addEventListener('mousedown', this.popupMouseDownHandler);\n    popupWrapper.style.minWidth = min;\n    popupWrapper.style.width = max;\n    popupWrapper.style.height = this.height;\n    popupWrapper.setAttribute(\"dir\", this.direction);\n    this.popupRef.popupOpen.subscribe(() => {\n      this.cdr.detectChanges();\n      this.optionsList.scrollToItem(this.selectionService.focused);\n      this.opened.emit();\n    });\n    this.popupRef.popupClose.subscribe(() => {\n      this.closed.emit();\n    });\n    this.popupRef.popupAnchorViewportLeave.subscribe(() => this.togglePopup(false));\n  }\n\n  destroyPopup() {\n    if (this.popupRef) {\n      this.popupRef.popupElement.removeEventListener('mousedown', this.popupMouseDownHandler);\n      this.popupRef.close();\n      this.popupRef = null;\n    }\n  }\n\n  _toggle(open) {\n    this._open = open;\n    this.destroyPopup();\n\n    if (this._open) {\n      this.createPopup();\n    }\n  }\n\n  triggerPopupEvents(open) {\n    const eventArgs = new PreventableEvent();\n\n    if (open) {\n      this.open.emit(eventArgs);\n    } else {\n      this.close.emit(eventArgs);\n    }\n\n    return eventArgs.isDefaultPrevented();\n  }\n\n  firstFocusableIndex(index) {\n    const maxIndex = this.data.length - 1;\n\n    if (this.disabledItemsService.isIndexDisabled(index)) {\n      return index < maxIndex ? this.firstFocusableIndex(index + 1) : undefined;\n    } else {\n      return index;\n    }\n  }\n\n  findIndexPredicate(text) {\n    if (this.dataService.grouped) {\n      return item => {\n        let itemText = getter$1(item.value, this.valueField);\n        itemText = !isPresent(itemText) ? \"\" : itemText.toString().toLowerCase();\n        return itemText.startsWith(text.toLowerCase());\n      };\n    } else {\n      return item => {\n        let itemText = getter$1(item, this.valueField);\n        itemText = !isPresent(itemText) ? \"\" : itemText.toString().toLowerCase();\n        return itemText.startsWith(text.toLowerCase());\n      };\n    }\n  }\n\n  setMessages() {\n    this._zone.runOutsideAngular(() => {\n      clearTimeout(this.messagesTimeout);\n      this.messagesTimeout = setTimeout(() => {\n        this.noDataText = this.localization.get('noDataText');\n        this.cdr.detectChanges();\n      });\n    });\n  }\n\n};\n\nAutoCompleteComponent.ɵfac = function AutoCompleteComponent_Factory(t) {\n  return new (t || AutoCompleteComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService), ɵngcc0.ɵɵdirectiveInject(DataService), ɵngcc0.ɵɵdirectiveInject(ɵngcc4.PopupService), ɵngcc0.ɵɵdirectiveInject(SelectionService), ɵngcc0.ɵɵdirectiveInject(NavigationService), ɵngcc0.ɵɵdirectiveInject(DisabledItemsService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(TOUCH_ENABLED, 8));\n};\n\nAutoCompleteComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: AutoCompleteComponent,\n  selectors: [[\"kendo-autocomplete\"]],\n  contentQueries: function AutoCompleteComponent_ContentQueries(rf, ctx, dirIndex) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵcontentQuery(dirIndex, ItemTemplateDirective, 5);\n      ɵngcc0.ɵɵcontentQuery(dirIndex, HeaderTemplateDirective, 5);\n      ɵngcc0.ɵɵcontentQuery(dirIndex, FooterTemplateDirective, 5);\n      ɵngcc0.ɵɵcontentQuery(dirIndex, NoDataTemplateDirective, 5);\n      ɵngcc0.ɵɵcontentQuery(dirIndex, GroupTemplateDirective, 5);\n      ɵngcc0.ɵɵcontentQuery(dirIndex, FixedGroupTemplateDirective, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.template = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.headerTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.footerTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.noDataTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.groupTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.fixedGroupTemplate = _t.first);\n    }\n  },\n  viewQuery: function AutoCompleteComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵviewQuery(_c11, 7, ViewContainerRef);\n      ɵngcc0.ɵɵviewQuery(_c12, 7);\n      ɵngcc0.ɵɵviewQuery(SearchBarComponent, 7);\n      ɵngcc0.ɵɵviewQuery(_c13, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.container = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.popupTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.searchbar = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.optionsList = _t.first);\n    }\n  },\n  hostVars: 7,\n  hostBindings: function AutoCompleteComponent_HostBindings(rf, ctx) {\n    if (rf & 2) {\n      ɵngcc0.ɵɵattribute(\"dir\", ctx.dir);\n      ɵngcc0.ɵɵclassProp(\"k-widget\", ctx.widgetClasses)(\"k-autocomplete\", ctx.widgetClasses)(\"k-state-disabled\", ctx.isDisabled);\n    }\n  },\n  inputs: {\n    highlightFirst: \"highlightFirst\",\n    focusableId: \"focusableId\",\n    placeholder: \"placeholder\",\n    listHeight: \"listHeight\",\n    clearButton: \"clearButton\",\n    disabled: \"disabled\",\n    readonly: \"readonly\",\n    tabindex: \"tabindex\",\n    filterable: \"filterable\",\n    data: \"data\",\n    value: \"value\",\n    popupSettings: \"popupSettings\",\n    itemDisabled: \"itemDisabled\",\n    tabIndex: \"tabIndex\",\n    virtual: \"virtual\",\n    valueField: \"valueField\",\n    loading: \"loading\",\n    suggest: \"suggest\"\n  },\n  outputs: {\n    valueChange: \"valueChange\",\n    filterChange: \"filterChange\",\n    open: \"open\",\n    opened: \"opened\",\n    close: \"close\",\n    closed: \"closed\",\n    onFocus: \"focus\",\n    onBlur: \"blur\"\n  },\n  exportAs: [\"kendoAutoComplete\"],\n  features: [ɵngcc0.ɵɵProvidersFeature([AUTOCOMPLETE_VALUE_ACCESSOR, DataService, SelectionService, NavigationService, DisabledItemsService, LocalizationService, {\n    provide: L10N_PREFIX,\n    useValue: 'kendo.autocomplete'\n  }, {\n    provide: FilterableComponent,\n    useExisting: forwardRef(() => AutoCompleteComponent_1)\n  }, {\n    provide: KendoInput,\n    useExisting: forwardRef(() => AutoCompleteComponent_1)\n  }]), ɵngcc0.ɵɵNgOnChangesFeature],\n  decls: 10,\n  vars: 15,\n  consts: function () {\n    let i18n_14;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The text displayed in the popup when there are no items\n       * @meaning kendo.autocomplete.noDataText\n       */\n      const MSG_EXTERNAL_2690656529626907484$$DIST_FESM2015_INDEX_JS_15 = goog.getMsg(\"NO DATA FOUND\");\n      i18n_14 = MSG_EXTERNAL_2690656529626907484$$DIST_FESM2015_INDEX_JS_15;\n    } else {\n      i18n_14 = $localize`:kendo.autocomplete.noDataText|The text displayed in the popup when there are no items␟4e9993e088a293543eb0c2801343518c115b6f20␟2690656529626907484:NO DATA FOUND`;\n    }\n\n    let i18n_16;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The title of the clear button\n       * @meaning kendo.autocomplete.clearTitle\n       */\n      const MSG_EXTERNAL_4821453594854847070$$DIST_FESM2015_INDEX_JS_17 = goog.getMsg(\"clear\");\n      i18n_16 = MSG_EXTERNAL_4821453594854847070$$DIST_FESM2015_INDEX_JS_17;\n    } else {\n      i18n_16 = $localize`:kendo.autocomplete.clearTitle|The title of the clear button␟7cf49cc2d50eebd29f8d61564512383caaaac7a6␟4821453594854847070:clear`;\n    }\n\n    return [[\"kendoAutoCompleteLocalizedMessages\", \"\", \"noDataText\", i18n_14, \"clearTitle\", i18n_16], [3, \"role\", \"id\", \"listId\", \"activeDescendant\", \"noDataLabel\", \"userInput\", \"suggestedText\", \"disabled\", \"readonly\", \"tabIndex\", \"popupOpen\", \"placeholder\", \"onNavigate\", \"valueChange\", \"onBlur\", \"onFocus\"], [\"searchbar\", \"\"], [\"class\", \"k-icon k-clear-value k-i-close\", \"role\", \"button\", \"tabindex\", \"-1\", 3, \"visibility\", \"click\", \"mousedown\", 4, \"ngIf\"], [\"class\", \"k-icon k-i-loading\", 4, \"ngIf\"], [\"popupTemplate\", \"\"], [3, \"ngIf\"], [\"container\", \"\"], [\"role\", \"button\", \"tabindex\", \"-1\", 1, \"k-icon\", \"k-clear-value\", \"k-i-close\", 3, \"click\", \"mousedown\"], [1, \"k-icon\", \"k-i-loading\"], [4, \"ngIf\"], [3, \"id\", \"optionPrefix\", \"data\", \"textField\", \"valueField\", \"template\", \"groupTemplate\", \"fixedGroupTemplate\", \"height\", \"show\", \"virtual\", \"pageChange\"], [\"optionsList\", \"\"], [\"class\", \"k-nodata\", 4, \"ngIf\"], [3, \"templateContext\"], [1, \"k-nodata\"], [3, \"ngIf\", \"templateContext\"], [3, \"resize\"]];\n  },\n  template: function AutoCompleteComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵelementContainer(0, 0);\n      ɵngcc0.ɵɵelementStart(1, \"kendo-searchbar\", 1, 2);\n      ɵngcc0.ɵɵlistener(\"onNavigate\", function AutoCompleteComponent_Template_kendo_searchbar_onNavigate_1_listener($event) {\n        return ctx.handleNavigate($event);\n      })(\"valueChange\", function AutoCompleteComponent_Template_kendo_searchbar_valueChange_1_listener($event) {\n        return ctx.searchBarChange($event);\n      })(\"onBlur\", function AutoCompleteComponent_Template_kendo_searchbar_onBlur_1_listener() {\n        return ctx.handleBlur();\n      })(\"onFocus\", function AutoCompleteComponent_Template_kendo_searchbar_onFocus_1_listener() {\n        return ctx.handleFocus();\n      });\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵtemplate(3, AutoCompleteComponent_span_3_Template, 1, 3, \"span\", 3);\n      ɵngcc0.ɵɵtemplate(4, AutoCompleteComponent_span_4_Template, 1, 0, \"span\", 4);\n      ɵngcc0.ɵɵtemplate(5, AutoCompleteComponent_ng_template_5_Template, 5, 14, \"ng-template\", null, 5, ɵngcc0.ɵɵtemplateRefExtractor);\n      ɵngcc0.ɵɵtemplate(7, AutoCompleteComponent_ng_template_7_Template, 1, 0, \"ng-template\", 6);\n      ɵngcc0.ɵɵelementContainer(8, null, 7);\n    }\n\n    if (rf & 2) {\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"role\", \"combobox\")(\"id\", ctx.focusableId)(\"listId\", ctx.listBoxId)(\"activeDescendant\", ctx.activeDescendant)(\"noDataLabel\", ctx.noDataLabel)(\"userInput\", ctx.text)(\"suggestedText\", ctx.suggestion)(\"disabled\", ctx.disabled)(\"readonly\", ctx.readonly)(\"tabIndex\", ctx.tabIndex)(\"popupOpen\", ctx.isOpen)(\"placeholder\", ctx.placeholder);\n      ɵngcc0.ɵɵadvance(2);\n      ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.loading && !ctx.readonly && ctx.clearButton && (ctx.text == null ? null : ctx.text.length));\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngIf\", ctx.loading);\n      ɵngcc0.ɵɵadvance(3);\n      ɵngcc0.ɵɵproperty(\"ngIf\", ctx.isOpen);\n    }\n  },\n  directives: function () {\n    return [LocalizedMessagesDirective, SearchBarComponent, ɵngcc3.NgIf, ListComponent, TemplateContextDirective, ɵngcc2.ResizeSensorComponent];\n  },\n  encapsulation: 2\n});\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], AutoCompleteComponent.prototype, \"highlightFirst\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], AutoCompleteComponent.prototype, \"focusableId\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], AutoCompleteComponent.prototype, \"data\", null);\n\n__decorate([Input(), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [String])], AutoCompleteComponent.prototype, \"value\", null);\n\n__decorate([Input(), __metadata(\"design:type\", String)], AutoCompleteComponent.prototype, \"valueField\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], AutoCompleteComponent.prototype, \"placeholder\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], AutoCompleteComponent.prototype, \"popupSettings\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Number)], AutoCompleteComponent.prototype, \"listHeight\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], AutoCompleteComponent.prototype, \"loading\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], AutoCompleteComponent.prototype, \"clearButton\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], AutoCompleteComponent.prototype, \"suggest\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], AutoCompleteComponent.prototype, \"disabled\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Function])], AutoCompleteComponent.prototype, \"itemDisabled\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], AutoCompleteComponent.prototype, \"readonly\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Number)], AutoCompleteComponent.prototype, \"tabindex\", void 0);\n\n__decorate([Input(\"tabIndex\"), __metadata(\"design:type\", Number), __metadata(\"design:paramtypes\", [Number])], AutoCompleteComponent.prototype, \"tabIndex\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], AutoCompleteComponent.prototype, \"filterable\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], AutoCompleteComponent.prototype, \"virtual\", null);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], AutoCompleteComponent.prototype, \"valueChange\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], AutoCompleteComponent.prototype, \"filterChange\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], AutoCompleteComponent.prototype, \"open\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], AutoCompleteComponent.prototype, \"opened\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], AutoCompleteComponent.prototype, \"close\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], AutoCompleteComponent.prototype, \"closed\", void 0);\n\n__decorate([Output('focus'), __metadata(\"design:type\", EventEmitter)], AutoCompleteComponent.prototype, \"onFocus\", void 0);\n\n__decorate([Output('blur'), __metadata(\"design:type\", EventEmitter)], AutoCompleteComponent.prototype, \"onBlur\", void 0);\n\n__decorate([ContentChild(ItemTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", ItemTemplateDirective)], AutoCompleteComponent.prototype, \"template\", void 0);\n\n__decorate([ContentChild(HeaderTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", HeaderTemplateDirective)], AutoCompleteComponent.prototype, \"headerTemplate\", void 0);\n\n__decorate([ContentChild(FooterTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", FooterTemplateDirective)], AutoCompleteComponent.prototype, \"footerTemplate\", void 0);\n\n__decorate([ContentChild(NoDataTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", NoDataTemplateDirective)], AutoCompleteComponent.prototype, \"noDataTemplate\", void 0);\n\n__decorate([ContentChild(GroupTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", GroupTemplateDirective)], AutoCompleteComponent.prototype, \"groupTemplate\", void 0);\n\n__decorate([ContentChild(FixedGroupTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", FixedGroupTemplateDirective)], AutoCompleteComponent.prototype, \"fixedGroupTemplate\", void 0);\n\n__decorate([ViewChild('container', {\n  read: ViewContainerRef,\n  static: true\n}), __metadata(\"design:type\", ViewContainerRef)], AutoCompleteComponent.prototype, \"container\", void 0);\n\n__decorate([ViewChild('popupTemplate', {\n  static: true\n}), __metadata(\"design:type\", TemplateRef)], AutoCompleteComponent.prototype, \"popupTemplate\", void 0);\n\n__decorate([ViewChild(SearchBarComponent, {\n  static: true\n}), __metadata(\"design:type\", SearchBarComponent)], AutoCompleteComponent.prototype, \"searchbar\", void 0);\n\n__decorate([ViewChild('optionsList', {\n  static: false\n}), __metadata(\"design:type\", ListComponent)], AutoCompleteComponent.prototype, \"optionsList\", void 0);\n\n__decorate([HostBinding('class.k-widget'), HostBinding('class.k-autocomplete'), __metadata(\"design:type\", Boolean)], AutoCompleteComponent.prototype, \"widgetClasses\", void 0);\n\n__decorate([HostBinding('class.k-state-disabled'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], AutoCompleteComponent.prototype, \"isDisabled\", null);\n\n__decorate([HostBinding('attr.dir'), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [])], AutoCompleteComponent.prototype, \"dir\", null);\n\nAutoCompleteComponent = AutoCompleteComponent_1 = __decorate([__param(10, Optional()), __param(10, Inject(TOUCH_ENABLED)), __metadata(\"design:paramtypes\", [LocalizationService, DataService, PopupService, SelectionService, NavigationService, DisabledItemsService, NgZone, ChangeDetectorRef, Renderer2, ElementRef, Boolean])], AutoCompleteComponent);\n/* tslint:disable:variable-name */\n\n/**\n * @hidden\n */\n\nconst MultiselectMessages = {\n  'array': 'Expected values of array type. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/multiselect/#value-selection',\n  'object': 'Expected values of Object type. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/multiselect/#value-selection',\n  'primitive': 'Expected values of primitive type. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/multiselect/#value-selection',\n  'textAndValue': 'Expected textField and valueField options to be set. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/multiselect/#toc-bind-to-arrays-of-complex-data'\n};\n/**\n * @hidden\n */\n\nconst MultiSelectTreeMessages = {\n  'array': 'Expected values of array type. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/multiselecttree/#value-selection',\n  'primitive': 'Expected values of primitive type. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/multiselecttree/value-binding/#toc-primitive-values',\n  'object': 'Expected values of type Object. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/multiselecttree/value-binding/#toc-object-values',\n  'dataItems': 'Expected dataItems of type Object[] to be set. See https://www.telerik.com/kendo-angular-ui/components/dropdowns/api/MultiSelectTreeComponent/#toc-dataitems',\n  'dataItemsLength': 'Expected dataItems length to match the number of provided values. See https://www.telerik.com/kendo-angular-ui/components/dropdowns/api/MultiSelectTreeComponent/#toc-dataitems',\n  'textAndValue': 'Expected textField and valueField options to be set. See https://www.telerik.com/kendo-angular-ui/components/dropdowns/multiselecttree/value-binding',\n  'valueDepth': 'Expected valueDepth of type number[] to be set. See https://www.telerik.com/kendo-angular-ui-develop/components/dropdowns/api/MultiSelectTreeComponent/#toc-valuedepth',\n  'valueDepthLength': 'Expected valueDepth length to match the number of provided values. See https://www.telerik.com/kendo-angular-ui-develop/components/dropdowns/api/MultiSelectTreeComponent/#toc-valuedepth'\n};\n/**\n * @hidden\n */\n\nconst ComboBoxMessages = {\n  'object': 'Expected value of type Object. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/combobox/#toc-value-selection',\n  'primitive': 'Expected value of primitive type. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/combobox/#toc-value-selection',\n  'textAndValue': 'Expected textField and valueField options to be set. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/combobox/#toc-bind-to-arrays-of-complex-data',\n  'noItemHeight': 'Expected virtual.itemHeight of type number.'\n};\n/**\n * @hidden\n */\n\nconst MultiColumnComboBoxMessages = {\n  'data': 'Provided data must consist only of objects. See https://www.telerik.com/kendo-angular-ui/components/dropdowns/multicolumncombobox/data-binding/',\n  'textAndValue': 'Expected textField and valueField options to be set. See https://www.telerik.com/kendo-angular-ui/components/dropdowns/multicolumncombobox/data-binding/#toc-fields-configuration'\n};\n/**\n * @hidden\n */\n\nconst DropDownListMessages = {\n  'defaultItem': 'defaultItem and data items must be of same type. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/api/DropDownListComponent/#toc-defaultitem',\n  'object': 'Expected value of type Object. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/dropdownlist/#toc-value-selection',\n  'primitive': 'Expected value of primitive type. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/dropdownlist/#toc-value-selection',\n  'textAndValue': 'Expected textField and valueField options to be set. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/dropdownlist/#toc-bind-to-arrays-of-complex-data'\n};\n/**\n * @hidden\n */\n\nconst DropDownTreeMessages = {\n  'primitive': 'Expected value of primitive type. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/dropdowntree/value-binding/#toc-primitive-values',\n  'object': 'Expected value of type Object. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/dropdowntree/value-binding/#toc-object-values',\n  'dataItem': 'Expected dataItem of type Object to be set. See https://www.telerik.com/kendo-angular-ui/components/dropdowns/api/DropDownTreeComponent/#toc-dataitem',\n  'textAndValue': 'Expected textField and valueField options to be set. See https://www.telerik.com/kendo-angular-ui/components/dropdowns/dropdowntree/value-binding',\n  'valueDepth': 'Expected valueDepth to be set. See https://www.telerik.com/kendo-angular-ui-develop/components/dropdowns/api/DropDownTreeComponent/#toc-valuedepth'\n};\n/* tslint:disable:member-ordering */\n\nvar ComboBoxComponent_1;\n/**\n * @hidden\n */\n\nconst COMBOBOX_VALUE_ACCESSOR = {\n  multi: true,\n  provide: NG_VALUE_ACCESSOR,\n  useExisting: forwardRef(() => ComboBoxComponent)\n};\n/**\n * Represents the [Kendo UI ComboBox component for Angular]({% slug overview_combobox %}).\n *\n * @example\n * ```ts\n * _@Component({\n * selector: 'my-app',\n * template: `\n *  <kendo-combobox [data]=\"listItems\">\n *  </kendo-combobox>\n * `\n * })\n * class AppComponent {\n *   public listItems: Array<string> = [\"Item 1\", \"Item 2\", \"Item 3\", \"Item 4\"];\n * }\n * ```\n */\n\nlet ComboBoxComponent = ComboBoxComponent_1 = class ComboBoxComponent {\n  constructor(localization, popupService, selectionService, navigationService, disabledItemsService, dataService, zone, cdr, renderer, hostElement, touchEnabled$$1) {\n    this.localization = localization;\n    this.popupService = popupService;\n    this.selectionService = selectionService;\n    this.navigationService = navigationService;\n    this.disabledItemsService = disabledItemsService;\n    this.dataService = dataService;\n    this.zone = zone;\n    this.cdr = cdr;\n    this.renderer = renderer;\n    this.hostElement = hostElement;\n    this.touchEnabled = touchEnabled$$1;\n    this.selected = [];\n    /**\n     * @hidden\n     */\n\n    this.focusableId = `k-${guid$1()}`;\n    /**\n     * Specifies whether the ComboBox allows user-defined values that are not present in the dataset\n     * ([more information and examples]({% slug custom_values_combobox %})).\n     * Defaults to `false`.\n     */\n\n    this.allowCustom = false;\n    /**\n     * A user-defined callback which returns normalized custom values.\n     * Typically used when the data items are different from type `string`.\n     * @param { Any } value - The custom value defined by the user.\n     * @returns { Any }\n     *\n     * @example\n     * ```ts\n     * import { map } from 'rxjs/operators';\n     *\n     * _@Component({\n     * selector: 'my-app',\n     * template: `\n     *   <kendo-combobox\n     *       [allowCustom]=\"true\"\n     *       [data]=\"listItems\"\n     *       textField=\"text\"\n     *       valueField=\"value\"\n     *       [valueNormalizer]=\"valueNormalizer\"\n     *       (valueChange)=\"onValueChange($event)\"\n     *   >\n     *   </kendo-combobox>\n     * `\n     * })\n     *\n     * class AppComponent {\n     *   public listItems: Array<{ text: string, value: number }> = [\n     *       { text: \"Small\", value: 1 },\n     *       { text: \"Medium\", value: 2 },\n     *       { text: \"Large\", value: 3 }\n     *   ];\n     *\n     *   public onValueChange(value) {\n     *       console.log(\"valueChange : \", value);\n     *   }\n     *\n     *   public valueNormalizer = (text$: Observable<string>) => text$.pipe(map((text: string) => {\n     *      return { ProductID: null, ProductName: text };\n     *   }));\n     *\n     * }\n     * ```\n     */\n\n    this.valueNormalizer = text => text.pipe(map(userInput => userInput));\n    /**\n     * The hint that is displayed when the component is empty.\n     *\n     */\n\n\n    this.placeholder = \"\";\n    /**\n     * Sets the height of the suggestions list. By default, `listHeight` is 200px.\n     *\n     * > The `listHeight` property affects only the list of suggestions and not the whole popup container.\n     * > To set the height of the popup container, use `popupSettings.height`.\n     */\n\n    this.listHeight = 200;\n    /**\n     * Enables the auto-completion of the text based on the first data item.\n     */\n\n    this.suggest = false;\n    /**\n     * If set to `true`, renders a button on hovering over the component.\n     * Clicking this button resets the value of the component to `undefined` and triggers the `change` event.\n     */\n\n    this.clearButton = true;\n    /**\n     * Sets the disabled state of the component.\n     */\n\n    this.disabled = false;\n    /**\n     * Sets the read-only state of the component.\n     */\n\n    this.readonly = false;\n    /**\n     * Specifies the [`tabindex`](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex) of the component.\n     */\n\n    this.tabindex = 0;\n    /**\n     * Enables the [filtering]({% slug filtering_combobox %}) functionality.\n     * If set to `true`, the component emits the `filterChange` event.\n     */\n\n    this.filterable = false;\n    /**\n     * Fires each time the value is changed&mdash;\n     * when the component is blurred or the value is cleared through the **Clear** button\n     * ([see example]({% slug overview_combobox %}#toc-events)).\n     * When the value of the component is programmatically changed to `ngModel` or `formControl`\n     * through its API or form binding, the `valueChange` event is not triggered because it\n     * might cause a mix-up with the built-in `valueChange` mechanisms of the `ngModel` or `formControl` bindings.\n     */\n\n    this.valueChange = new EventEmitter();\n    /**\n     * Fires each time an item selection is changed\n     * ([see example]({% slug overview_combobox %}#toc-events)).\n     */\n\n    this.selectionChange = new EventEmitter();\n    /**\n     * Fires each time the user types in the input field.\n     * You can filter the source based on the passed filtration value\n     * ([see example]({% slug overview_combobox %}#toc-events)).\n     */\n\n    this.filterChange = new EventEmitter();\n    /**\n     * Fires each time the popup is about to open.\n     * This event is preventable. If you cancel it, the popup will remain closed.\n     */\n\n    this.open = new EventEmitter();\n    /**\n     * Fires after the popup has been opened.\n     */\n\n    this.opened = new EventEmitter();\n    /**\n     * Fires each time the popup is about to close.\n     * This event is preventable. If you cancel it, the popup will remain open.\n     */\n\n    this.close = new EventEmitter();\n    /**\n     * Fires after the popup has been closed.\n     */\n\n    this.closed = new EventEmitter();\n    /**\n     * Fires each time the user focuses the ComboBox.\n     */\n\n    this.onFocus = new EventEmitter();\n    /**\n     * Fires each time the ComboBox gets blurred.\n     */\n\n    this.onBlur = new EventEmitter();\n    this.widgetClasses = true;\n    this._isFocused = false;\n    this.listBoxId = guid$1();\n    this.optionPrefix = guid$1();\n\n    this.onChangeCallback = _ => {};\n\n    this.onTouchedCallback = _ => {};\n    /**\n     * Used for the default virtualization settings config.\n     */\n\n\n    this.defaultVirtualItemHeight = 28;\n    /**\n     * Used for the default virtualization settings config.\n     */\n\n    this.defaultVirtualPageSize = 50;\n    this._filtering = false;\n    this._text = '';\n    this.filterText = '';\n    this._open = false;\n    this._popupSettings = {\n      animate: true\n    };\n\n    this.popupMouseDownHandler = event => event.preventDefault();\n\n    this.customValueSubject = new Subject();\n    this.valueSubject = new Subject();\n    this.clearValueSubject = new Subject();\n    this.subs = new Subscription();\n    validatePackage(packageMetadata);\n    this.direction = localization.rtl ? 'rtl' : 'ltr';\n    this.data = [];\n  }\n\n  set text(text) {\n    this._text = isPresent(text) ? text.toString() : \"\";\n  }\n\n  get text() {\n    return this._text;\n  }\n  /**\n   * @hidden\n   */\n\n\n  togglePopup(open) {\n    const isDisabled = this.disabled || this.readonly;\n    const sameState = this.isOpen === open;\n\n    if (isDisabled || sameState) {\n      return;\n    }\n\n    const isDefaultPrevented = this.triggerPopupEvents(open);\n\n    if (!isDefaultPrevented) {\n      this._toggle(open);\n    }\n  }\n\n  get activeDescendant() {\n    if (!this.isOpen || !isPresent(this.selectionService.focused) || this.selectionService.focused === -1) {\n      return null;\n    }\n\n    const dataItem = this.dataService.itemAt(this.selectionService.focused);\n    return this.optionPrefix + \"-\" + (dataItem ? getter$1(dataItem, this.valueField) : \"\");\n  }\n\n  get noDataLabel() {\n    if (this.data.length === 0) {\n      return this.noDataText;\n    }\n  }\n\n  get clearTitle() {\n    return this.localization.get('clearTitle');\n  }\n\n  get appendTo() {\n    const {\n      appendTo\n    } = this.popupSettings;\n\n    if (!appendTo || appendTo === 'root') {\n      return undefined;\n    }\n\n    return appendTo === 'component' ? this.container : appendTo;\n  }\n  /**\n   * Sets the data of the ComboBox.\n   *\n   * > The data has to be provided in an array-like list.\n   */\n\n\n  set data(data) {\n    this.dataService.data = data || [];\n\n    if (this.virtual) {\n      this.virtual.skip = 0;\n    }\n\n    this.setState();\n\n    if (this._filtering) {\n      const queryAndDataPresent = this.text.length > 0 && this.dataService.itemsCount > 0;\n      const index = queryAndDataPresent ? this.firstFocusableIndex(0) : -1;\n      this.selectionService.focused = index;\n    }\n\n    if (this.suggest && this.dataService.itemsCount && this.text) {\n      this.suggestedText = getter$1(this.dataService.itemAt(0), this.textField);\n    }\n  }\n\n  get data() {\n    const virtual = this.virtual;\n\n    if (virtual) {\n      const start = virtual.skip || 0;\n      const end = start + virtual.pageSize; // Use length instead of itemsCount because of the grouping.\n\n      virtual.total = this.dataService.data.length;\n      return this.dataService.data.slice(start, end);\n    }\n\n    return this.dataService.data;\n  }\n  /**\n   * Sets the value of the ComboBox.\n   * It can either be of the primitive (string, numbers) or of the complex (objects) type.\n   * To define the type, use the `valuePrimitive` option.\n   *\n   * > All selected values which are not present in the dataset are considered custom values.\n   * > When the `Enter` key is pressed or the component loses focus, custom values get dismissed unless `allowCustom` is set to `true`.\n   */\n\n\n  set value(newValue) {\n    this._value = newValue;\n    this.setState();\n    this.cdr.markForCheck();\n  }\n\n  get value() {\n    return this._value;\n  }\n  /**\n   * Specifies the type of the selected value.\n   * If set to `true`, the selected value has to be of the primitive type\n   * ([more information and example]({% slug valuebinding_combobox %}#toc-primitive-values-from-object-fields)).\n   */\n\n\n  set valuePrimitive(isPrimitive) {\n    this._valuePrimitive = isPrimitive;\n  }\n\n  get valuePrimitive() {\n    if (!isPresent(this._valuePrimitive)) {\n      return !isPresent(this.valueField);\n    }\n\n    return this._valuePrimitive;\n  }\n  /**\n   * Configures the popup of the ComboBox.\n   *\n   * The available options are:\n   * - `animate: Boolean`&mdash;Controls the popup animation. By default, the open and close animations are enabled.\n   * - `width: Number | String`&mdash;Sets the width of the popup container. By default, the width of the host element is used. If set to `auto`, the component automatically adjusts the width of the popup and no item labels are wrapped. The `auto` mode is not supported when virtual scrolling is enabled.\n   * - `height: Number`&mdash;Sets the height of the popup container.\n   * - `popupClass: String`&mdash;Specifies a list of CSS classes that are used to style the popup.\n   * - `appendTo: \"root\" | \"component\" | ViewContainerRef`&mdash;Specifies the component to which the popup will be appended.\n   */\n\n\n  set popupSettings(settings) {\n    this._popupSettings = Object.assign({\n      animate: true\n    }, settings);\n  }\n\n  get popupSettings() {\n    return this._popupSettings;\n  }\n  /**\n   * Defines a Boolean function that is executed for each data item in the component\n   * ([see examples]({% slug disableditems_combobox %})). Determines whether the item will be disabled.\n   */\n\n\n  set itemDisabled(fn) {\n    if (typeof fn !== 'function') {\n      throw new Error(`itemDisabled must be a function, but received ${JSON.stringify(fn)}.`);\n    }\n\n    this.disabledItemsService.itemDisabled = fn;\n  }\n  /**\n   * @hidden\n   */\n\n\n  set tabIndex(tabIndex) {\n    this.tabindex = tabIndex;\n  }\n\n  get tabIndex() {\n    return this.tabindex;\n  }\n  /**\n   * Enables the [virtualization]({% slug virtualization_combobox %}) functionality.\n   */\n\n\n  set virtual(settings) {\n    this._virtualSettings = normalizeVirtualizationSettings(settings, {\n      itemHeight: this.defaultVirtualItemHeight,\n      pageSize: this.defaultVirtualPageSize\n    });\n  }\n\n  get virtual() {\n    return this._virtualSettings;\n  }\n\n  get clearable() {\n    return this.clearButton;\n  }\n\n  get dir() {\n    return this.direction;\n  }\n\n  get isFocused() {\n    return this._isFocused;\n  }\n\n  set isFocused(value) {\n    this.renderer[value ? 'addClass' : 'removeClass'](this.wrapper.nativeElement, \"k-state-focused\");\n    this._isFocused = value;\n  }\n\n  get clearButtonVisiblity() {\n    if (this.touchEnabled) {\n      return 'visible';\n    }\n  }\n\n  get popupWidth() {\n    let wrapperOffsetWidth = 0;\n\n    if (isDocumentAvailable()) {\n      wrapperOffsetWidth = this.wrapper.nativeElement.offsetWidth;\n    }\n\n    const width = this.popupSettings.width || wrapperOffsetWidth;\n    const minWidth = isNaN(wrapperOffsetWidth) ? wrapperOffsetWidth : `${wrapperOffsetWidth}px`;\n    const maxWidth = isNaN(width) ? width : `${width}px`;\n    return {\n      min: minWidth,\n      max: maxWidth\n    };\n  }\n\n  get popupHeight() {\n    const popupHeight = this.popupSettings.height;\n    return isPresent(popupHeight) ? `${popupHeight}px` : 'auto';\n  }\n\n  ngOnInit() {\n    this.renderer.removeAttribute(this.hostElement.nativeElement, 'tabindex');\n    this.attachStreams();\n    this.createValueStream();\n    this.subscribeTouchEvents();\n    this.attachSelectClickHandler();\n    this.setMessages();\n  }\n\n  createValueStream() {\n    const valueStream = this.valueSubject.pipe(filter(candidate => {\n      const current = getter$1(this.value, this.valueField);\n      const newValue = getter$1(candidate, this.valueField);\n      let newText = getter$1(candidate, this.textField);\n\n      if (!isPresent(this.value) && !isPresent(newValue)) {\n        return false;\n      }\n\n      if (isPresent(newText)) {\n        newText = newText.toString();\n      }\n\n      if (current === newValue && this.text === newText) {\n        this.clearFilter();\n        return false;\n      } else {\n        return true;\n      }\n    }), map(candidate => {\n      const newValue = getter$1(candidate, this.valueField);\n      const newText = getter$1(candidate, this.textField);\n      return {\n        dataItem: candidate,\n        text: newText,\n        value: this.valuePrimitive ? newValue : candidate\n      };\n    }));\n    const customValueStreams = partition(() => this.allowCustom)(this.customValueSubject.pipe(throttleTime(300)));\n    const allowCustomValueStream = customValueStreams[0].pipe(tap(() => {\n      this.loading = true;\n      this.disabled = true;\n      this.cdr.detectChanges();\n    }), filter(() => {\n      const hasChange = this.text !== getter$1(this.value, this.valueField);\n      this.loading = hasChange;\n      this.disabled = hasChange;\n\n      if (!hasChange) {\n        this.clearFilter();\n      }\n\n      return hasChange;\n    }), this.valueNormalizer, map(normalizedValue => {\n      return {\n        custom: true,\n        dataItem: normalizedValue,\n        text: this.text,\n        value: normalizedValue\n      };\n    }));\n    const disableCustomValueStream = customValueStreams[1].pipe(map(() => {\n      return {\n        custom: true,\n        dataItem: undefined,\n        text: undefined,\n        value: undefined\n      };\n    }));\n    const clearValueStream = this.clearValueSubject.pipe(map(() => ({\n      dataItem: undefined,\n      text: undefined,\n      value: undefined\n    })));\n\n    if (this.valueSubscription) {\n      this.valueSubscription.unsubscribe();\n    }\n\n    const merged = merge(valueStream, allowCustomValueStream, disableCustomValueStream, clearValueStream);\n    this.valueSubscription = merged.pipe(catchError(() => {\n      const selectionChanged = getter$1(this.dataItem, this.valueField) !== undefined;\n      this.dataItem = undefined;\n      this.value = undefined;\n      this.text = undefined;\n      this.loading = false;\n      this.disabled = false;\n\n      if (selectionChanged) {\n        this.selectionChange.emit(undefined);\n      }\n\n      this.emitValueChange();\n      this.createValueStream();\n      return of(null);\n    })).subscribe(state => {\n      const selectionChanged = getter$1(this.dataItem, this.valueField) !== getter$1(state.dataItem, this.valueField);\n      this.dataItem = state.dataItem;\n      this.value = state.value;\n      this.text = state.text;\n      this.loading = false;\n      this.disabled = false;\n      this.clearFilter();\n\n      if (state.custom) {\n        this.selectionService.focused = -1;\n      }\n\n      if (selectionChanged) {\n        const selectionArgs = state.custom ? undefined : this.dataItem;\n        this.selectionChange.emit(selectionArgs);\n      }\n\n      this.emitValueChange();\n    });\n  }\n\n  attachStreams() {\n    if (!isDocumentAvailable()) {\n      return;\n    }\n\n    this.subs.add(this.localization.changes.subscribe(({\n      rtl\n    }) => {\n      this.direction = rtl ? 'rtl' : 'ltr';\n      this.setMessages();\n    }));\n    this.subs.add(merge(this.navigationService.up, this.navigationService.down, this.navigationService.home, this.navigationService.end).pipe(filter(event => isPresent(event.index))).subscribe(event => this.navigate(event.index)));\n    this.subs.add(this.navigationService.open.subscribe(this.handleNavigationOpen.bind(this)));\n    this.subs.add(this.navigationService.close.subscribe(() => this.togglePopup(false)));\n    this.subs.add(this.navigationService.esc.subscribe(this.handleEscape.bind(this)));\n    this.subs.add(this.navigationService.enter.pipe(tap(event => {\n      if (this.isOpen) {\n        event.originalEvent.preventDefault();\n      }\n    })).subscribe(this.handleEnter.bind(this)));\n    this.subs.add(merge(this.selectionService.onChange, this.selectionService.onSelect.pipe(filter(_ => !this.isOpen))).pipe(tap(_ => {\n      this._filtering = false;\n      this.togglePopup(false);\n    }), map(event => this.dataService.itemAt(event.indices[0]))).subscribe(dataItem => {\n      this.change(dataItem);\n    }));\n    this.subs.add(this.selectionService.onSelect.pipe(filter(_ => this.isOpen), tap(_ => this._filtering = false), map(event => this.dataService.itemAt(event.indices[0]))).subscribe(dataItem => {\n      const selectionChanged = getter$1(dataItem, this.valueField) !== getter$1(this.dataItem, this.valueField);\n      this.updateState({\n        dataItem\n      });\n\n      if (selectionChanged) {\n        this.selectionChange.emit(dataItem);\n      }\n    }));\n  }\n\n  ngOnDestroy() {\n    this.destroyPopup();\n    clearTimeout(this.messagesTimeout);\n    this.subs.unsubscribe();\n\n    if (isPresent(this.valueSubscription)) {\n      this.valueSubscription.unsubscribe();\n    }\n\n    if (this.touchstartDisposeHandler) {\n      this.touchstartDisposeHandler();\n    }\n\n    if (this.selectClickDisposeHandler) {\n      this.selectClickDisposeHandler();\n    }\n  }\n\n  ngOnChanges(changes) {\n    const virtual = this.virtual;\n    const requestInitialData = virtual && changes.data && changes.data.isFirstChange();\n\n    if (requestInitialData) {\n      this.pageChange({\n        skip: 0,\n        take: virtual.pageSize\n      });\n    }\n\n    if (isChanged('valueNormalizer', changes)) {\n      this.createValueStream();\n    }\n\n    if (anyChanged(['textField', 'valueField', 'valuePrimitive'], changes, false)) {\n      this.setState();\n    }\n  }\n\n  ngAfterContentChecked() {\n    this.verifySettings();\n  }\n  /**\n   * Focuses a specific item of the ComboBox based on a provided index.\n   * If null or invalid index is provided the focus will be removed.\n   */\n\n\n  focusItemAt(index) {\n    const isInRange = index >= 0 && index < this.data.length;\n\n    if (isPresent(index) && isInRange && !this.disabledItemsService.isIndexDisabled(index)) {\n      this.selectionService.focus(index);\n    } else {\n      this.selectionService.focus(-1);\n    }\n  }\n  /**\n   * Focuses the ComboBox.\n   */\n\n\n  focus() {\n    if (!this.disabled) {\n      this.searchbar.focus();\n    }\n  }\n  /**\n   * Blurs the ComboBox.\n   */\n\n\n  blur() {\n    if (!this.disabled) {\n      this.searchbar.blur();\n    }\n  }\n  /**\n   * Toggles the visibility of the popup. If you use the `toggle` method to open or close the popup,\n   * the `open` and `close` events will not be fired.\n   *\n   * @param open - The state of the popup.\n   */\n\n\n  toggle(open) {\n    Promise.resolve(null).then(() => {\n      const shouldOpen = isPresent(open) ? open : !this._open;\n\n      this._toggle(shouldOpen);\n\n      this.cdr.markForCheck();\n    });\n  }\n  /**\n   * Returns the current open state of the popup.\n   */\n\n\n  get isOpen() {\n    return this._open;\n  }\n  /**\n   * Resets the value of the ComboBox.\n   * If you use the `reset` method to clear the value of the component,\n   * the model will not update automatically and the `selectionChange` and `valueChange` events will not be fired.\n   */\n\n\n  reset() {\n    this.value = undefined;\n    this.clearState();\n    this.resetSelection();\n  }\n  /**\n   * @hidden\n   *\n   * Used by the TextBoxContainer to determine if the floating label\n   * should be rendered in the input when the component is not focused.\n   */\n\n\n  isEmpty() {\n    const textEmpty = !isPresent(this.text) || isEmptyString(this.text);\n    const valueEmpty = !isPresent(this.value) || isEmptyString(this.value);\n    return textEmpty && valueEmpty;\n  }\n  /**\n   * @hidden\n   */\n\n\n  clearValue(event) {\n    event.stopImmediatePropagation();\n    this.focus();\n    this._filtering = true;\n    this._previousDataItem = undefined;\n    this.selectionService.resetSelection([]);\n    this.clearValueSubject.next();\n    this._filtering = false;\n  }\n  /**\n   * @hidden\n   */\n\n\n  writeValue(value) {\n    this.value = value === null ? undefined : value;\n  }\n  /**\n   * @hidden\n   */\n\n\n  registerOnChange(fn) {\n    this.onChangeCallback = fn;\n  }\n  /**\n   * @hidden\n   */\n\n\n  registerOnTouched(fn) {\n    this.onTouchedCallback = fn;\n  }\n  /**\n   * @hidden\n   */\n\n\n  setDisabledState(isDisabled) {\n    this.disabled = isDisabled;\n  }\n  /**\n   * @hidden\n   */\n\n\n  get buttonClasses() {\n    return this.loading ? 'k-i-loading' : this.iconClass || 'k-i-arrow-s';\n  }\n  /**\n   * @hidden\n   */\n\n\n  onResize() {\n    if (this.isOpen) {\n      const popupWrapper = this.popupRef.popupElement;\n      const {\n        min,\n        max\n      } = this.popupWidth;\n      popupWrapper.style.minWidth = min;\n      popupWrapper.style.width = max;\n    }\n  }\n\n  verifySettings() {\n    if (!isDevMode()) {\n      return;\n    }\n\n    if (this.valuePrimitive === true && isPresent(this.value) && typeof this.value === \"object\") {\n      throw new Error(ComboBoxMessages.primitive);\n    }\n\n    if (this.valuePrimitive === false && isPresent(this.value) && typeof this.value !== \"object\") {\n      throw new Error(ComboBoxMessages.object);\n    }\n\n    const valueOrText = !isPresent(this.valueField) !== !isPresent(this.textField);\n\n    if (valueOrText) {\n      throw new Error(ComboBoxMessages.textAndValue);\n    }\n\n    if (this.virtual && isNaN(this.virtual.itemHeight)) {\n      throw new Error(ComboBoxMessages.noItemHeight);\n    }\n  }\n\n  setState() {\n    // Filtering in process, do nothing.\n    if (this._filtering) {\n      return;\n    }\n\n    const value = this.value;\n    const valueField = this.valueField;\n    const resolved = this.findDataItem({\n      valueField,\n      value\n    });\n\n    if (isPresent(resolved.index) && resolved.index !== -1) {\n      this.updateState({\n        dataItem: resolved.dataItem,\n        confirm: true\n      });\n      this.resetSelection(resolved.index);\n    } else if (isPresent(value) && this.allowCustom) {\n      this.updateState({\n        dataItem: value\n      });\n      this.resetSelection(-1);\n    } else if (this._previousDataItem && this.value) {\n      this.updateState({\n        dataItem: this._previousDataItem\n      });\n      this.resetSelection();\n    } else {\n      this.clearState();\n      this.resetSelection(-1);\n    }\n  }\n\n  updateState({\n    dataItem,\n    confirm = false\n  }) {\n    this.dataItem = dataItem;\n    this.text = getter$1(dataItem, this.textField);\n\n    if (confirm) {\n      this._previousDataItem = dataItem;\n    }\n  }\n\n  clearState() {\n    this.text = undefined;\n    this.dataItem = undefined;\n  }\n\n  resetSelection(index) {\n    const clear = !isPresent(index) || index < 0;\n    this.selectionService.resetSelection(clear ? [] : [index]);\n    this.selectionService.focused = index;\n  }\n\n  firstFocusableIndex(index) {\n    const maxIndex = this.data.length - 1;\n\n    if (this.disabledItemsService.isIndexDisabled(index)) {\n      return index < maxIndex ? this.firstFocusableIndex(index + 1) : undefined;\n    } else {\n      return index;\n    }\n  }\n\n  findIndexPredicate(text) {\n    if (this.dataService.grouped) {\n      return item => {\n        let itemText = getter$1(item.value, this.textField);\n        itemText = !isPresent(itemText) ? \"\" : itemText.toString().toLowerCase();\n        return itemText.startsWith(text.toLowerCase());\n      };\n    } else {\n      return item => {\n        let itemText = getter$1(item, this.textField);\n        itemText = !isPresent(itemText) ? \"\" : itemText.toString().toLowerCase();\n        return itemText.startsWith(text.toLowerCase());\n      };\n    }\n  }\n\n  findDataItem({\n    valueField,\n    value\n  }) {\n    const result = {\n      dataItem: null,\n      index: -1\n    };\n\n    const comparer = element => {\n      const dataItem = this.dataService.grouped ? element.value : element;\n      return getter$1(dataItem, valueField) === getter$1(value, valueField);\n    };\n\n    const index = this.dataService.findIndex(comparer);\n    result.dataItem = this.dataService.itemAt(index);\n    result.index = index;\n    return result;\n  }\n\n  search(text, startFrom = 0) {\n    let index;\n\n    if (text.length && this.dataService.itemsCount) {\n      index = this.dataService.findIndex(this.findIndexPredicate(text), startFrom);\n    } else {\n      index = -1;\n    }\n\n    if (this.disabledItemsService.isIndexDisabled(index)) {\n      if (index + 1 < this.dataService.itemsCount) {\n        this.search(text, index + 1);\n      } else {\n        this.selectionService.focus(-1);\n      }\n    } else {\n      this.selectionService.focus(index);\n\n      if (this.suggest) {\n        this.suggestedText = getter$1(this.dataService.itemAt(index), this.textField);\n      }\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  getSuggestion() {\n    const hasSelected = !!this.selectionService.selected.length;\n    const shouldSuggest = this.suggest && !this.backspacePressed && this.suggestedText && this.text;\n\n    if (!hasSelected && shouldSuggest && this.suggestedText.toLowerCase().startsWith(this.text.toLowerCase())) {\n      return this.suggestedText;\n    } else {\n      this.suggestedText = undefined;\n    }\n  }\n\n  navigate(index) {\n    if (this.dataService.itemsCount === 0) {\n      return;\n    }\n\n    this.text = getter$1(this.dataService.itemAt(index), this.textField);\n    this.selectionService.select(index);\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleNavigate(event) {\n    const hasSelected = isPresent(this.selectionService.selected[0]);\n    const focused = isNaN(this.selectionService.focused) ? this.firstFocusableIndex(0) : this.selectionService.focused;\n    let offset = 0;\n\n    if (this.disabled || this.readonly) {\n      return;\n    }\n\n    if (event.keyCode === Keys.Home || event.keyCode === Keys.End) {\n      return;\n    }\n\n    if (!hasSelected) {\n      if (event.keyCode === Keys.ArrowDown) {\n        offset = -1;\n      } else if (event.keyCode === Keys.ArrowUp) {\n        offset = 1;\n      }\n    }\n\n    const action = this.navigationService.process({\n      current: offset + focused,\n      max: this.dataService.itemsCount - 1,\n      min: 0,\n      originalEvent: event\n    });\n\n    if (action !== NavigationAction.Undefined && action !== NavigationAction.Left && action !== NavigationAction.Right && action !== NavigationAction.Backspace && action !== NavigationAction.Delete && (action === NavigationAction.Enter && this.isOpen || action !== NavigationAction.Enter)) {\n      event.preventDefault();\n    }\n  }\n\n  handleEnter() {\n    const text = this.text;\n    const focused = this.selectionService.focused;\n    const hasFocused = isPresent(focused) && focused !== -1;\n    const previousText = getter$1(this._previousDataItem, this.textField) || \"\";\n    const focusedItemText = getter$1(this.dataService.itemAt(focused), this.textField);\n    const textHasChanged = text !== previousText;\n    this.togglePopup(false);\n    this._filtering = false;\n\n    if (this.allowCustom && textHasChanged) {\n      if (text === focusedItemText || this.useSuggestion()) {\n        this.selectionService.change(focused);\n      } else {\n        this.change(text, true);\n      }\n    }\n\n    if (!this.allowCustom) {\n      if (hasFocused) {\n        this.selectionService.change(focused);\n      } else if (textHasChanged) {\n        this.change(text, true);\n      }\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleBlur() {\n    this._filtering = false;\n    this.searchbar.input.nativeElement.scrollLeft = 0; // Firefox doesn't auto-scroll to the left on blur like other browsers\n\n    this.isFocused = false;\n    const unresolvedSelection = getter$1(this.dataItem, this.valueField) !== getter$1(this.value, this.valueField);\n    const currentText = this.searchbar.value;\n    const textHasChanged = currentText !== (getter$1(this.dataItem, this.textField) || '');\n    const valueHasChanged = unresolvedSelection || textHasChanged;\n    const runInZone = valueHasChanged || hasObservers(this.onBlur) || hasObservers(this.close) || isUntouched(this.hostElement.nativeElement);\n\n    if (runInZone) {\n      this.zone.run(() => {\n        if (valueHasChanged) {\n          const lowerCaseMatch = isPresent(this.focusedItemText) && this.focusedItemText.toLowerCase() === currentText.toLowerCase();\n\n          if (lowerCaseMatch || unresolvedSelection) {\n            this.selectionService.change(this.selectionService.focused);\n          } else {\n            this.change(currentText, true);\n          }\n        }\n\n        this.onBlur.emit();\n        this.onTouchedCallback();\n        this.togglePopup(false);\n      });\n    } else {\n      this.togglePopup(false);\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleEscape() {\n    this.togglePopup(false); // clear the focus only if the focused item is not selected\n\n    const hasSelected = this.selectionService.selected.length > 0;\n\n    if (!hasSelected) {\n      this.suggestedText = null;\n      this.selectionService.focused = -1;\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleNavigationOpen() {\n    this.restoreItemFocus();\n    this.togglePopup(true);\n  }\n  /**\n   * @hidden\n   */\n\n\n  searchBarChange(text) {\n    const currentTextLength = this.text ? this.text.length : 0;\n    this.backspacePressed = text.length < currentTextLength ? true : false;\n    this.text = text; // Reset the selection prior to filter. If a match is present, it will be resolved. If a match is not present, it is not needed.\n\n    this.selectionService.resetSelection([]);\n    this.togglePopup(true);\n    this._filtering = true;\n\n    if (this.filterable && this.filterText !== text) {\n      this.filterText = text;\n      this.filterChange.emit(text);\n    } else {\n      this.search(text);\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleFocus() {\n    this.isFocused = true;\n\n    if (hasObservers(this.onFocus)) {\n      this.zone.run(() => this.onFocus.emit());\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  pageChange(event) {\n    const virtual = this.virtual;\n    virtual.skip = event.skip;\n  }\n\n  change(candidate, isCustom = false) {\n    if (isCustom) {\n      this.customValueSubject.next(candidate);\n    } else {\n      this.valueSubject.next(candidate);\n    }\n  }\n\n  emitValueChange() {\n    this.onChangeCallback(this.value);\n    this.valueChange.emit(this.value);\n    this._previousDataItem = this.dataItem;\n  }\n  /**\n   * @hidden\n   */\n\n\n  selectClick() {\n    if (!this.touchEnabled) {\n      this.searchbar.focus();\n    }\n\n    if (!this.isOpen) {\n      this.restoreItemFocus();\n    }\n\n    this.togglePopup(!this.isOpen);\n  }\n\n  get listContainerClasses() {\n    return ['k-list-container', 'k-reset'].concat(this.popupSettings.popupClass || []);\n  }\n  /**\n   * @hidden\n   */\n\n\n  preventEventDefault(event) {\n    event.preventDefault();\n  }\n\n  get focusedItemText() {\n    const focused = this.selectionService.focused;\n\n    if (!isPresent(focused) || focused === -1) {\n      return null;\n    }\n\n    const itemText = getter$1(this.dataService.itemAt(focused), this.textField);\n    return !isPresent(itemText) ? \"\" : itemText.toString();\n  }\n  /**\n   * Focuses the first match when there's text in the input field, but no focused item.\n   */\n\n\n  restoreItemFocus() {\n    const hasFocus = isPresent(this.selectionService.focused) && this.selectionService.focused > -1;\n\n    if (!hasFocus && this.text && this.dataService.itemsCount) {\n      if (this.filterable) {\n        this.selectionService.focused = this.firstFocusableIndex(0);\n      } else {\n        this.search(this.text);\n      }\n    }\n  }\n\n  useSuggestion() {\n    if (!(this.suggest && isPresent(this.searchbar.value))) {\n      return false;\n    }\n\n    const focusedDataItem = this.dataService.itemAt(this.selectionService.focused);\n    const focusedItemText = getter$1(focusedDataItem, this.textField);\n\n    if (!isPresent(focusedItemText)) {\n      return false;\n    }\n\n    return this.searchbar.value.toLowerCase() === focusedItemText.toLowerCase();\n  }\n\n  destroyPopup() {\n    if (this.popupRef) {\n      this.popupRef.popupElement.removeEventListener('mousedown', this.popupMouseDownHandler);\n      this.popupRef.close();\n      this.popupRef = null;\n    }\n  }\n\n  createPopup() {\n    if (this.virtual) {\n      this.virtual.skip = 0;\n    }\n\n    const horizontalAlign = this.direction === \"rtl\" ? \"right\" : \"left\";\n    const anchorPosition = {\n      horizontal: horizontalAlign,\n      vertical: \"bottom\"\n    };\n    const popupPosition = {\n      horizontal: horizontalAlign,\n      vertical: \"top\"\n    };\n    this.popupRef = this.popupService.open({\n      anchor: this.wrapper,\n      animate: this.popupSettings.animate,\n      appendTo: this.appendTo,\n      content: this.popupTemplate,\n      popupClass: this.listContainerClasses,\n      positionMode: 'absolute',\n      anchorAlign: anchorPosition,\n      popupAlign: popupPosition\n    });\n    const popupWrapper = this.popupRef.popupElement;\n    const {\n      min,\n      max\n    } = this.popupWidth;\n    popupWrapper.addEventListener('mousedown', this.popupMouseDownHandler);\n    popupWrapper.style.minWidth = min;\n    popupWrapper.style.width = max;\n    popupWrapper.style.height = this.popupHeight;\n    popupWrapper.setAttribute(\"dir\", this.direction);\n    this.popupRef.popupOpen.subscribe(() => {\n      this.cdr.detectChanges();\n      this.optionsList.scrollToItem(this.selectionService.focused);\n      this.opened.emit();\n    });\n    this.popupRef.popupClose.subscribe(() => {\n      this.closed.emit();\n    });\n    this.popupRef.popupAnchorViewportLeave.subscribe(() => this.togglePopup(false));\n  }\n\n  _toggle(open) {\n    this._open = open;\n    this.destroyPopup();\n\n    if (this._open) {\n      this.createPopup();\n    }\n  }\n\n  triggerPopupEvents(open) {\n    const eventArgs = new PreventableEvent();\n\n    if (open) {\n      this.open.emit(eventArgs);\n    } else {\n      this.close.emit(eventArgs);\n    }\n\n    return eventArgs.isDefaultPrevented();\n  }\n\n  clearFilter() {\n    if (!(this.filterable && this.filterText)) {\n      return;\n    }\n\n    this.filterText = '';\n    this.filterChange.emit(this.filterText);\n  }\n\n  setMessages() {\n    this.zone.runOutsideAngular(() => {\n      clearTimeout(this.messagesTimeout);\n      this.messagesTimeout = setTimeout(() => {\n        this.noDataText = this.localization.get('noDataText');\n        this.cdr.detectChanges();\n      });\n    });\n  }\n\n  subscribeTouchEvents() {\n    if (!isDocumentAvailable() || !this.touchEnabled) {\n      return;\n    }\n\n    this.zone.runOutsideAngular(() => // Roll up ComboBox on iOS when tapped outside\n    this.touchstartDisposeHandler = this.renderer.listen(document, 'touchstart', e => {\n      const target = e.target;\n      const isInDropDown = inDropDown(this.hostElement, target, this.popupRef);\n\n      if (this.isFocused && !isInDropDown) {\n        // Close popup and mobile keyboard if searchbar is focused\n        this.zone.run(() => this.blur());\n      } else if (this.isOpen && !isInDropDown) {\n        // Close popup if the popup is opened via the select click\n        this.zone.run(() => this.togglePopup(false));\n      }\n    }));\n  }\n\n  attachSelectClickHandler() {\n    const selectElement = this.select.nativeElement;\n    const event = pointers ? 'pointerdown' : 'click';\n    this.selectClickDisposeHandler = this.renderer.listen(selectElement, event, this.selectClick.bind(this));\n  }\n\n};\n\nComboBoxComponent.ɵfac = function ComboBoxComponent_Factory(t) {\n  return new (t || ComboBoxComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc4.PopupService), ɵngcc0.ɵɵdirectiveInject(SelectionService), ɵngcc0.ɵɵdirectiveInject(NavigationService), ɵngcc0.ɵɵdirectiveInject(DisabledItemsService), ɵngcc0.ɵɵdirectiveInject(DataService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(TOUCH_ENABLED, 8));\n};\n\nComboBoxComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: ComboBoxComponent,\n  selectors: [[\"kendo-combobox\"]],\n  contentQueries: function ComboBoxComponent_ContentQueries(rf, ctx, dirIndex) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵcontentQuery(dirIndex, ItemTemplateDirective, 5);\n      ɵngcc0.ɵɵcontentQuery(dirIndex, HeaderTemplateDirective, 5);\n      ɵngcc0.ɵɵcontentQuery(dirIndex, FooterTemplateDirective, 5);\n      ɵngcc0.ɵɵcontentQuery(dirIndex, NoDataTemplateDirective, 5);\n      ɵngcc0.ɵɵcontentQuery(dirIndex, GroupTemplateDirective, 5);\n      ɵngcc0.ɵɵcontentQuery(dirIndex, FixedGroupTemplateDirective, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.template = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.headerTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.footerTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.noDataTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.groupTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.fixedGroupTemplate = _t.first);\n    }\n  },\n  viewQuery: function ComboBoxComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵviewQuery(_c11, 7, ViewContainerRef);\n      ɵngcc0.ɵɵviewQuery(_c12, 7);\n      ɵngcc0.ɵɵviewQuery(SearchBarComponent, 7);\n      ɵngcc0.ɵɵviewQuery(_c13, 5);\n      ɵngcc0.ɵɵviewQuery(_c19, 7);\n      ɵngcc0.ɵɵviewQuery(_c20, 7);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.container = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.popupTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.searchbar = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.optionsList = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.wrapper = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.select = _t.first);\n    }\n  },\n  hostVars: 7,\n  hostBindings: function ComboBoxComponent_HostBindings(rf, ctx) {\n    if (rf & 2) {\n      ɵngcc0.ɵɵattribute(\"dir\", ctx.dir);\n      ɵngcc0.ɵɵclassProp(\"k-widget\", ctx.widgetClasses)(\"k-combobox\", ctx.widgetClasses)(\"k-combobox-clearable\", ctx.clearable);\n    }\n  },\n  inputs: {\n    focusableId: \"focusableId\",\n    allowCustom: \"allowCustom\",\n    valueNormalizer: \"valueNormalizer\",\n    placeholder: \"placeholder\",\n    listHeight: \"listHeight\",\n    suggest: \"suggest\",\n    clearButton: \"clearButton\",\n    disabled: \"disabled\",\n    readonly: \"readonly\",\n    tabindex: \"tabindex\",\n    filterable: \"filterable\",\n    data: \"data\",\n    value: \"value\",\n    valuePrimitive: \"valuePrimitive\",\n    popupSettings: \"popupSettings\",\n    itemDisabled: \"itemDisabled\",\n    tabIndex: \"tabIndex\",\n    virtual: \"virtual\",\n    loading: \"loading\",\n    textField: \"textField\",\n    valueField: \"valueField\",\n    iconClass: \"iconClass\"\n  },\n  outputs: {\n    valueChange: \"valueChange\",\n    selectionChange: \"selectionChange\",\n    filterChange: \"filterChange\",\n    open: \"open\",\n    opened: \"opened\",\n    close: \"close\",\n    closed: \"closed\",\n    onFocus: \"focus\",\n    onBlur: \"blur\"\n  },\n  exportAs: [\"kendoComboBox\"],\n  features: [ɵngcc0.ɵɵProvidersFeature([COMBOBOX_VALUE_ACCESSOR, DataService, SelectionService, NavigationService, DisabledItemsService, LocalizationService, {\n    provide: L10N_PREFIX,\n    useValue: 'kendo.combobox'\n  }, {\n    provide: FilterableComponent,\n    useExisting: forwardRef(() => ComboBoxComponent_1)\n  }, {\n    provide: KendoInput,\n    useExisting: forwardRef(() => ComboBoxComponent_1)\n  }]), ɵngcc0.ɵɵNgOnChangesFeature],\n  decls: 14,\n  vars: 21,\n  consts: function () {\n    let i18n_21;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The text displayed in the popup when there are no items\n       * @meaning kendo.combobox.noDataText\n       */\n      const MSG_EXTERNAL_7708502966028483300$$DIST_FESM2015_INDEX_JS_22 = goog.getMsg(\"NO DATA FOUND\");\n      i18n_21 = MSG_EXTERNAL_7708502966028483300$$DIST_FESM2015_INDEX_JS_22;\n    } else {\n      i18n_21 = $localize`:kendo.combobox.noDataText|The text displayed in the popup when there are no items␟2b6e00c74a6d9c98c03a6274d0224e9bd457ff89␟7708502966028483300:NO DATA FOUND`;\n    }\n\n    let i18n_23;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The title of the clear button\n       * @meaning kendo.combobox.clearTitle\n       */\n      const MSG_EXTERNAL_2025597431468961462$$DIST_FESM2015_INDEX_JS_24 = goog.getMsg(\"clear\");\n      i18n_23 = MSG_EXTERNAL_2025597431468961462$$DIST_FESM2015_INDEX_JS_24;\n    } else {\n      i18n_23 = $localize`:kendo.combobox.clearTitle|The title of the clear button␟069e8fae80677e3e785861123bef446b3ff41ab4␟2025597431468961462:clear`;\n    }\n\n    return [[\"kendoComboBoxLocalizedMessages\", \"\", \"noDataText\", i18n_21, \"clearTitle\", i18n_23], [\"unselectable\", \"on\", 1, \"k-dropdown-wrap\", 3, \"ngClass\"], [\"wrapper\", \"\"], [3, \"role\", \"id\", \"listId\", \"activeDescendant\", \"noDataLabel\", \"userInput\", \"suggestedText\", \"disabled\", \"readonly\", \"tabIndex\", \"popupOpen\", \"placeholder\", \"onNavigate\", \"valueChange\", \"onBlur\", \"onFocus\"], [\"searchbar\", \"\"], [\"class\", \"k-icon k-clear-value k-i-close\", \"aria-hidden\", \"true\", 3, \"visibility\", \"kendoEventsOutsideAngular\", \"click\", 4, \"ngIf\"], [\"aria-hidden\", \"true\", \"unselectable\", \"on\", 1, \"k-select\", 3, \"kendoEventsOutsideAngular\"], [\"select\", \"\"], [1, \"k-icon\", 3, \"ngClass\"], [\"popupTemplate\", \"\"], [3, \"ngIf\"], [\"container\", \"\"], [\"aria-hidden\", \"true\", 1, \"k-icon\", \"k-clear-value\", \"k-i-close\", 3, \"kendoEventsOutsideAngular\", \"click\"], [4, \"ngIf\"], [3, \"id\", \"optionPrefix\", \"data\", \"textField\", \"valueField\", \"template\", \"groupTemplate\", \"fixedGroupTemplate\", \"height\", \"show\", \"virtual\", \"pageChange\"], [\"optionsList\", \"\"], [\"class\", \"k-nodata\", 4, \"ngIf\"], [3, \"templateContext\"], [1, \"k-nodata\"], [3, \"ngIf\", \"templateContext\"], [3, \"resize\"]];\n  },\n  template: function ComboBoxComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵelementContainer(0, 0);\n      ɵngcc0.ɵɵelementStart(1, \"span\", 1, 2);\n      ɵngcc0.ɵɵelementStart(3, \"kendo-searchbar\", 3, 4);\n      ɵngcc0.ɵɵlistener(\"onNavigate\", function ComboBoxComponent_Template_kendo_searchbar_onNavigate_3_listener($event) {\n        return ctx.handleNavigate($event);\n      })(\"valueChange\", function ComboBoxComponent_Template_kendo_searchbar_valueChange_3_listener($event) {\n        return ctx.searchBarChange($event);\n      })(\"onBlur\", function ComboBoxComponent_Template_kendo_searchbar_onBlur_3_listener() {\n        return ctx.handleBlur();\n      })(\"onFocus\", function ComboBoxComponent_Template_kendo_searchbar_onFocus_3_listener() {\n        return ctx.handleFocus();\n      });\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵtemplate(5, ComboBoxComponent_span_5_Template, 1, 6, \"span\", 5);\n      ɵngcc0.ɵɵelementStart(6, \"span\", 6, 7);\n      ɵngcc0.ɵɵelement(8, \"span\", 8);\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵtemplate(9, ComboBoxComponent_ng_template_9_Template, 5, 14, \"ng-template\", null, 9, ɵngcc0.ɵɵtemplateRefExtractor);\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵtemplate(11, ComboBoxComponent_ng_template_11_Template, 1, 0, \"ng-template\", 10);\n      ɵngcc0.ɵɵelementContainer(12, null, 11);\n    }\n\n    if (rf & 2) {\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngClass\", ɵngcc0.ɵɵpureFunction1(17, _c26, ctx.disabled));\n      ɵngcc0.ɵɵadvance(2);\n      ɵngcc0.ɵɵproperty(\"role\", \"combobox\")(\"id\", ctx.focusableId)(\"listId\", ctx.listBoxId)(\"activeDescendant\", ctx.activeDescendant)(\"noDataLabel\", ctx.noDataLabel)(\"userInput\", ctx.text)(\"suggestedText\", ctx.getSuggestion())(\"disabled\", ctx.disabled)(\"readonly\", ctx.readonly)(\"tabIndex\", ctx.tabIndex)(\"popupOpen\", ctx.isOpen)(\"placeholder\", ctx.placeholder);\n      ɵngcc0.ɵɵadvance(2);\n      ɵngcc0.ɵɵproperty(\"ngIf\", ctx.clearButton && !ctx.loading && !ctx.disabled && !ctx.readonly && (ctx.text == null ? null : ctx.text.length));\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"kendoEventsOutsideAngular\", ɵngcc0.ɵɵpureFunction1(19, _c25, ctx.preventEventDefault));\n      ɵngcc0.ɵɵadvance(2);\n      ɵngcc0.ɵɵproperty(\"ngClass\", ctx.buttonClasses);\n      ɵngcc0.ɵɵadvance(3);\n      ɵngcc0.ɵɵproperty(\"ngIf\", ctx.isOpen);\n    }\n  },\n  directives: function () {\n    return [LocalizedMessagesDirective, ɵngcc3.NgClass, SearchBarComponent, ɵngcc3.NgIf, ɵngcc2.EventsOutsideAngularDirective, ListComponent, TemplateContextDirective, ɵngcc2.ResizeSensorComponent];\n  },\n  encapsulation: 2\n});\n\n__decorate([Input(), __metadata(\"design:type\", String)], ComboBoxComponent.prototype, \"focusableId\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], ComboBoxComponent.prototype, \"allowCustom\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], ComboBoxComponent.prototype, \"data\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], ComboBoxComponent.prototype, \"value\", null);\n\n__decorate([Input(), __metadata(\"design:type\", String)], ComboBoxComponent.prototype, \"textField\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], ComboBoxComponent.prototype, \"valueField\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [Boolean])], ComboBoxComponent.prototype, \"valuePrimitive\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Function)], ComboBoxComponent.prototype, \"valueNormalizer\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], ComboBoxComponent.prototype, \"placeholder\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], ComboBoxComponent.prototype, \"popupSettings\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Number)], ComboBoxComponent.prototype, \"listHeight\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], ComboBoxComponent.prototype, \"iconClass\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], ComboBoxComponent.prototype, \"loading\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], ComboBoxComponent.prototype, \"suggest\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], ComboBoxComponent.prototype, \"clearButton\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], ComboBoxComponent.prototype, \"disabled\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Function])], ComboBoxComponent.prototype, \"itemDisabled\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], ComboBoxComponent.prototype, \"readonly\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Number)], ComboBoxComponent.prototype, \"tabindex\", void 0);\n\n__decorate([Input(\"tabIndex\"), __metadata(\"design:type\", Number), __metadata(\"design:paramtypes\", [Number])], ComboBoxComponent.prototype, \"tabIndex\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], ComboBoxComponent.prototype, \"filterable\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], ComboBoxComponent.prototype, \"virtual\", null);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], ComboBoxComponent.prototype, \"valueChange\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], ComboBoxComponent.prototype, \"selectionChange\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], ComboBoxComponent.prototype, \"filterChange\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], ComboBoxComponent.prototype, \"open\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], ComboBoxComponent.prototype, \"opened\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], ComboBoxComponent.prototype, \"close\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], ComboBoxComponent.prototype, \"closed\", void 0);\n\n__decorate([Output('focus'), __metadata(\"design:type\", EventEmitter)], ComboBoxComponent.prototype, \"onFocus\", void 0);\n\n__decorate([Output('blur'), __metadata(\"design:type\", EventEmitter)], ComboBoxComponent.prototype, \"onBlur\", void 0);\n\n__decorate([ContentChild(ItemTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", ItemTemplateDirective)], ComboBoxComponent.prototype, \"template\", void 0);\n\n__decorate([ContentChild(HeaderTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", HeaderTemplateDirective)], ComboBoxComponent.prototype, \"headerTemplate\", void 0);\n\n__decorate([ContentChild(FooterTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", FooterTemplateDirective)], ComboBoxComponent.prototype, \"footerTemplate\", void 0);\n\n__decorate([ContentChild(NoDataTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", NoDataTemplateDirective)], ComboBoxComponent.prototype, \"noDataTemplate\", void 0);\n\n__decorate([ContentChild(GroupTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", GroupTemplateDirective)], ComboBoxComponent.prototype, \"groupTemplate\", void 0);\n\n__decorate([ContentChild(FixedGroupTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", FixedGroupTemplateDirective)], ComboBoxComponent.prototype, \"fixedGroupTemplate\", void 0);\n\n__decorate([ViewChild('container', {\n  read: ViewContainerRef,\n  static: true\n}), __metadata(\"design:type\", ViewContainerRef)], ComboBoxComponent.prototype, \"container\", void 0);\n\n__decorate([ViewChild('popupTemplate', {\n  static: true\n}), __metadata(\"design:type\", TemplateRef)], ComboBoxComponent.prototype, \"popupTemplate\", void 0);\n\n__decorate([ViewChild(SearchBarComponent, {\n  static: true\n}), __metadata(\"design:type\", SearchBarComponent)], ComboBoxComponent.prototype, \"searchbar\", void 0);\n\n__decorate([ViewChild('optionsList', {\n  static: false\n}), __metadata(\"design:type\", ListComponent)], ComboBoxComponent.prototype, \"optionsList\", void 0);\n\n__decorate([ViewChild('wrapper', {\n  static: true\n}), __metadata(\"design:type\", ElementRef)], ComboBoxComponent.prototype, \"wrapper\", void 0);\n\n__decorate([ViewChild('select', {\n  static: true\n}), __metadata(\"design:type\", ElementRef)], ComboBoxComponent.prototype, \"select\", void 0);\n\n__decorate([HostBinding('class.k-widget'), HostBinding('class.k-combobox'), __metadata(\"design:type\", Boolean)], ComboBoxComponent.prototype, \"widgetClasses\", void 0);\n\n__decorate([HostBinding('class.k-combobox-clearable'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], ComboBoxComponent.prototype, \"clearable\", null);\n\n__decorate([HostBinding('attr.dir'), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [])], ComboBoxComponent.prototype, \"dir\", null);\n\nComboBoxComponent = ComboBoxComponent_1 = __decorate([__param(10, Optional()), __param(10, Inject(TOUCH_ENABLED)), __metadata(\"design:paramtypes\", [LocalizationService, PopupService, SelectionService, NavigationService, DisabledItemsService, DataService, NgZone, ChangeDetectorRef, Renderer2, ElementRef, Boolean])], ComboBoxComponent);\n/**\n * Renders the selected value of the dropdown. To define the header template, nest an `<ng-template>` tag\n * with the `kendo<ComponentName>ValueTemplate` directive inside the component tag.\n *\n * The template context is set to the current component.\n * To get a reference to the current data item, use the `let-dataItem` directive.\n *\n * > The `ValueTemplate` directive can only be used with the DropDownList and DropDownTree components.\n *\n * - [Using `ValueTemplate` with the DropDownList]({% slug templates_ddl %}#toc-value-template)\n * - [Using `ValueTemplate` with the DropDownTree]({% slug templates_ddt %}#toc-value-template)\n *\n * @example\n * ```ts\n * _@Component({\n * selector: 'my-app',\n * template: `\n *  <kendo-dropdownlist [data]=\"listItems\">\n *    <ng-template kendoDropDownListValueTemplate let-dataItem>\n *      <span>{{dataItem}} option</span>\n *    </ng-template>\n *  </kendo-dropdownlist>\n * `\n * })\n * class AppComponent {\n *   public listItems: Array<string> = [\"Item 1\", \"Item 2\", \"Item 3\", \"Item 4\"];\n * }\n * ```\n */\n\nlet ValueTemplateDirective = /*#__PURE__*/(() => {\n  let ValueTemplateDirective = class ValueTemplateDirective {\n    constructor(templateRef) {\n      this.templateRef = templateRef;\n    }\n\n  };\n\n  ValueTemplateDirective.ɵfac = function ValueTemplateDirective_Factory(t) {\n    return new (t || ValueTemplateDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef));\n  };\n\n  ValueTemplateDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: ValueTemplateDirective,\n    selectors: [[\"\", \"kendoDropDownListValueTemplate\", \"\"], [\"\", \"kendoDropDownTreeValueTemplate\", \"\"]]\n  });\n  ValueTemplateDirective = __decorate([__metadata(\"design:paramtypes\", [TemplateRef])], ValueTemplateDirective);\n  /* tslint:disable:member-ordering */\n\n  return ValueTemplateDirective;\n})();\nvar DropDownListComponent_1;\n/**\n * @hidden\n */\n\nconst DROPDOWNLIST_VALUE_ACCESSOR = {\n  multi: true,\n  provide: NG_VALUE_ACCESSOR,\n  useExisting: forwardRef(() => DropDownListComponent)\n};\n/**\n * Represents the [Kendo UI DropDownList component for Angular]({% slug overview_ddl %}).\n *\n * @example\n * ```ts\n * _@Component({\n * selector: 'my-app',\n * template: `\n *  <kendo-dropdownlist [data]=\"listItems\">\n *  </kendo-dropdownlist>\n * `\n * })\n * class AppComponent {\n *   public listItems: Array<string> = [\"Item 1\", \"Item 2\", \"Item 3\", \"Item 4\"];\n * }\n * ```\n */\n\nlet DropDownListComponent = DropDownListComponent_1 = class DropDownListComponent {\n  constructor(localization, popupService, selectionService, navigationService, disabledItemsService, dataService, _zone, renderer, hostElement, cdr, touchEnabled$$1) {\n    this.localization = localization;\n    this.popupService = popupService;\n    this.selectionService = selectionService;\n    this.navigationService = navigationService;\n    this.disabledItemsService = disabledItemsService;\n    this.dataService = dataService;\n    this._zone = _zone;\n    this.renderer = renderer;\n    this.hostElement = hostElement;\n    this.cdr = cdr;\n    this.touchEnabled = touchEnabled$$1;\n    /**\n     * @hidden\n     */\n\n    this.focusableId = `k-${guid$1()}`;\n    /**\n     * Sets the height of the options list. By default, `listHeight` is 200px.\n     *\n     * > The `listHeight` property affects only the list of options and not the whole popup container.\n     * > To set the height of the popup container, use `popupSettings.height`.\n     */\n\n    this.listHeight = 200;\n    /**\n     * Sets the disabled state of the component.\n     */\n\n    this.disabled = false;\n    /**\n     * Sets the read-only state of the component.\n     */\n\n    this.readonly = false;\n    /**\n     * Enables the [filtering]({% slug filtering_ddl %}) functionality of the DropDownList.\n     */\n\n    this.filterable = false;\n    /**\n     * Enables a case-insensitive search. When filtration is disabled, use this option.\n     */\n\n    this.ignoreCase = true;\n    /**\n     * Sets the delay before an item search is performed. When filtration is disabled, use this option.\n     */\n\n    this.delay = 500;\n    /**\n     * Specifies the [`tabindex`](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex) of the component.\n     */\n\n    this.tabindex = 0;\n    /**\n     * Fires each time the value is changed ([see example]({% slug overview_ddl %}#toc-events)).\n     */\n\n    this.valueChange = new EventEmitter();\n    /**\n     * Fires each time the user types in the input field\n     * ([see example]({% slug overview_ddl %}#toc-events)).\n     * You can filter the source based on the passed filtration value.\n     * When the value of the component is programmatically changed to `ngModel` or `formControl`\n     * through its API or form binding, the `valueChange` event is not triggered because it\n     * might cause a mix-up with the built-in `valueChange` mechanisms of the `ngModel` or `formControl` bindings.\n     */\n\n    this.filterChange = new EventEmitter();\n    /**\n     * Fires each time the item selection is changed\n     * ([see example]({% slug overview_ddl %}#toc-events)).\n     */\n\n    this.selectionChange = new EventEmitter();\n    /**\n     * Fires each time the popup is about to open\n     * ([see example]({% slug openstate_ddl %}#toc-preventing-opening-and-closing)).\n     * This event is preventable. If you cancel it, the popup will remain closed.\n     */\n\n    this.open = new EventEmitter();\n    /**\n     * Fires after the popup has been opened.\n     */\n\n    this.opened = new EventEmitter();\n    /**\n     * Fires each time the popup is about to close\n     * ([see example]({% slug openstate_ddl %}#toc-preventing-opening-and-closing)).\n     * This event is preventable. If you cancel it, the popup will remain open.\n     */\n\n    this.close = new EventEmitter();\n    /**\n     * Fires after the popup has been closed.\n     */\n\n    this.closed = new EventEmitter();\n    /**\n     * Fires each time the user focuses the DropDownList.\n     */\n\n    this.onFocus = new EventEmitter();\n    /**\n     * Fires each time the DropDownList gets blurred.\n     */\n\n    this.onBlur = new EventEmitter();\n    this.widgetClasses = true;\n    this.groupIndices = [];\n    this.listBoxId = guid$1();\n    this.optionPrefix = guid$1();\n    this.filterText = \"\";\n    this._isFocused = false;\n\n    this.onTouchedCallback = _ => {};\n\n    this.onChangeCallback = _ => {};\n\n    this.word = \"\";\n    this.last = \"\";\n    this.filterFocused = new EventEmitter();\n    this.filterBlurred = new EventEmitter();\n    this.wrapperFocused = new EventEmitter();\n    this.wrapperBlurred = new EventEmitter();\n    this.selectionSubscription = new Subscription();\n    this._open = false;\n    this._popupSettings = {\n      animate: true\n    };\n    validatePackage(packageMetadata);\n    this.direction = localization.rtl ? 'rtl' : 'ltr';\n    this.data = [];\n    this.subscribeEvents();\n    this.subscribeTouchEvents();\n    this.popupMouseDownHandler = this.onMouseDown.bind(this);\n  }\n\n  get width() {\n    const wrapperWidth = isDocumentAvailable() ? this.wrapper.nativeElement.offsetWidth : 0;\n    const width = this.popupSettings.width || wrapperWidth;\n    const minWidth = isNaN(wrapperWidth) ? wrapperWidth : `${wrapperWidth}px`;\n    const maxWidth = isNaN(width) ? width : `${width}px`;\n    return {\n      min: minWidth,\n      max: maxWidth\n    };\n  }\n\n  get height() {\n    const popupHeight = this.popupSettings.height;\n    return isPresent(popupHeight) ? `${popupHeight}px` : 'auto';\n  }\n\n  get widgetTabIndex() {\n    if (this.disabled) {\n      return undefined;\n    }\n\n    const providedTabIndex = Number(this.tabIndex);\n    const defaultTabIndex = 0;\n    return !isNaN(providedTabIndex) ? providedTabIndex : defaultTabIndex;\n  }\n\n  get ariaExpanded() {\n    return this.isOpen;\n  }\n\n  get ariaOwns() {\n    if (!this.isOpen) {\n      return;\n    }\n\n    return this.listBoxId;\n  }\n\n  get ariaActivedescendant() {\n    if (!isPresent(this.dataItem)) {\n      return;\n    }\n\n    return this.optionPrefix + \"-\" + getter$1(this.dataItem, this.valueField);\n  }\n\n  get noDataLabel() {\n    if (this.dataService.itemsCount === 0) {\n      return this.noDataText;\n    }\n  }\n\n  get appendTo() {\n    const {\n      appendTo\n    } = this.popupSettings;\n\n    if (!appendTo || appendTo === 'root') {\n      return undefined;\n    }\n\n    return appendTo === 'component' ? this.container : appendTo;\n  }\n  /**\n   * Sets the data of the DropDownList.\n   *\n   * > The data has to be provided in an array-like list.\n   */\n\n\n  set data(data) {\n    this.dataService.data = data || [];\n\n    if (this.virtual) {\n      this.virtual.skip = 0;\n    }\n\n    this.setState();\n  }\n\n  get data() {\n    const virtual = this.virtual;\n\n    if (virtual) {\n      const start = virtual.skip || 0;\n      const end = start + virtual.pageSize; // Use length instead of itemsCount because of the grouping.\n\n      virtual.total = this.dataService.data.length;\n      return this.dataService.data.slice(start, end);\n    }\n\n    return this.dataService.data;\n  }\n  /**\n   * Sets the value of the DropDownList.\n   * It can either be of the primitive (string, numbers) or of the complex (objects) type.\n   * To define the type, use the `valuePrimitive` option.\n   *\n   * > All selected values which are not present in the source are ignored.\n   */\n\n\n  set value(newValue) {\n    if (!isPresent(newValue)) {\n      this._previousDataItem = undefined;\n    }\n\n    this._value = newValue;\n    this.setState();\n    this.cdr.markForCheck();\n  }\n\n  get value() {\n    return this._value;\n  }\n  /**\n   * Configures the popup of the DropDownList.\n   *\n   * The available options are:\n   * - `animate: Boolean`&mdash;Controls the popup animation. By default, the open and close animations are enabled.\n   * - `width: Number | String`&mdash;Sets the width of the popup container. By default, the width of the host element is used. If set to `auto`, the component automatically adjusts the width of the popup and no item labels are wrapped. The `auto` mode is not supported when virtual scrolling is enabled.\n   * - `height: Number`&mdash;Sets the height of the popup container.\n   * - `popupClass: String`&mdash;Specifies a list of CSS classes that are used to style the popup.\n   * - `appendTo: \"root\" | \"component\" | ViewContainerRef`&mdash;Specifies the component to which the popup will be appended.\n   */\n\n\n  set popupSettings(settings) {\n    this._popupSettings = Object.assign({\n      animate: true\n    }, settings);\n  }\n\n  get popupSettings() {\n    return this._popupSettings;\n  }\n  /**\n   * Defines a Boolean function that is executed for each data item in the component\n   * ([see examples]({% slug disableditems_ddl %})). Determines whether the item will be disabled.\n   */\n\n\n  set itemDisabled(fn) {\n    if (typeof fn !== 'function') {\n      throw new Error(`itemDisabled must be a function, but received ${JSON.stringify(fn)}.`);\n    }\n\n    this.disabledItemsService.itemDisabled = fn;\n  }\n  /**\n   * Enables the [virtualization]({% slug virtualization_ddl %}) functionality.\n   */\n\n\n  set virtual(settings) {\n    this._virtualSettings = normalizeVirtualizationSettings(settings);\n  }\n\n  get virtual() {\n    return this._virtualSettings;\n  }\n  /**\n   * Specifies the type of the selected value\n   * ([more information and example]({% slug valuebinding_ddl %}#toc-primitive-values-from-object-fields)).\n   * If set to `true`, the selected value has to be of a primitive value.\n   */\n\n\n  set valuePrimitive(isPrimitive) {\n    this._valuePrimitive = isPrimitive;\n  }\n\n  get valuePrimitive() {\n    if (!isPresent(this._valuePrimitive)) {\n      return !isPresent(this.valueField);\n    }\n\n    return this._valuePrimitive;\n  }\n  /**\n   * @hidden\n   */\n\n\n  set tabIndex(tabIndex) {\n    this.tabindex = tabIndex;\n  }\n\n  get tabIndex() {\n    return this.tabindex;\n  }\n  /**\n   * @hidden\n   */\n\n\n  blurComponent() {\n    this.wrapperBlurred.emit();\n  }\n  /**\n   * @hidden\n   */\n\n\n  blurFilterInput() {\n    this.filterBlurred.emit();\n  }\n  /**\n   * @hidden\n   */\n\n\n  focusComponent() {\n    this.wrapperFocused.emit();\n\n    if (!this.isFocused) {\n      this.isFocused = true;\n\n      if (hasObservers(this.onFocus)) {\n        this._zone.run(() => {\n          this.onFocus.emit();\n        });\n      }\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  keydown(event) {\n    const firstIndex = isPresent(this.defaultItem) ? -1 : 0;\n    let focused = isNaN(this.selectionService.focused) ? this.firstFocusableIndex(firstIndex) : this.selectionService.focused;\n    let offset = 0;\n\n    if (this.disabled || this.readonly) {\n      return;\n    }\n\n    const isHomeEnd = event.keyCode === Keys.Home || event.keyCode === Keys.End;\n    const isFilterFocused = this.filterable && this.isFocused && this.isOpen;\n\n    if (isFilterFocused && isHomeEnd) {\n      return;\n    }\n\n    const hasSelected = isPresent(this.selectionService.selected[0]);\n    const focusedItemNotSelected = isPresent(this.selectionService.focused) && !this.selectionService.isSelected(this.selectionService.focused);\n\n    if (!hasSelected || focusedItemNotSelected) {\n      if (event.keyCode === Keys.ArrowDown || event.keyCode === Keys.ArrowRight) {\n        offset = -1;\n      } else if (event.keyCode === Keys.ArrowUp || event.keyCode === Keys.ArrowLeft) {\n        offset = 1;\n      }\n    }\n\n    const eventData = event;\n    const action = this.navigationService.process({\n      current: focused + offset,\n      max: this.dataService.itemsCount - 1,\n      min: this.defaultItem ? -1 : 0,\n      originalEvent: eventData\n    });\n    const leftRightKeys = action === NavigationAction.Left || action === NavigationAction.Right;\n\n    if (action !== NavigationAction.Undefined && action !== NavigationAction.Tab && action !== NavigationAction.Backspace && action !== NavigationAction.Delete && !(leftRightKeys && this.filterable) && action !== NavigationAction.Enter //enter when popup is opened is handled before `handleEnter`\n    ) {\n      eventData.preventDefault();\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  keypress(event) {\n    if (this.disabled || this.readonly || this.filterable) {\n      return;\n    }\n\n    this.onKeyPress(event);\n  }\n  /**\n   * @hidden\n   */\n\n\n  click(event) {\n    event.preventDefault();\n    this.focus();\n    this.togglePopup(!this.isOpen);\n  }\n  /**\n   * @hidden\n   */\n\n\n  onResize() {\n    if (this._open) {\n      const popupWrapper = this.popupRef.popupElement;\n      const {\n        min,\n        max\n      } = this.width;\n      popupWrapper.style.minWidth = min;\n      popupWrapper.style.width = max;\n    }\n  }\n\n  get dir() {\n    return this.direction;\n  }\n\n  set isFocused(isFocused) {\n    this.renderer[isFocused ? 'addClass' : 'removeClass'](this.wrapper.nativeElement, 'k-state-focused');\n    this._isFocused = isFocused;\n  }\n\n  get isFocused() {\n    return this._isFocused;\n  }\n\n  ngOnInit() {\n    this.renderer.removeAttribute(this.hostElement.nativeElement, \"tabindex\");\n    this.localizationChangesSubscription = this.localization.changes.subscribe(({\n      rtl\n    }) => {\n      this.direction = rtl ? 'rtl' : 'ltr';\n      this.setMessages();\n    });\n    this.setMessages();\n    this.assignAriaDescribedBy();\n  }\n  /**\n   * @hidden\n   * Used by the TextBoxContainer to determine if the component is empty.\n   */\n\n\n  isEmpty() {\n    const value = this.value;\n    return !(value === 0 || value === false || value || this.defaultItem);\n  }\n  /**\n   * @hidden\n   */\n\n\n  onFilterFocus() {\n    this.filterFocused.emit();\n  }\n  /**\n   * @hidden\n   */\n\n\n  ngOnDestroy() {\n    this.destroyPopup();\n    this.unsubscribeEvents();\n    clearTimeout(this.messagesTimeout);\n\n    if (this.localizationChangesSubscription) {\n      this.localizationChangesSubscription.unsubscribe();\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  ngOnChanges(changes) {\n    const virtual = this.virtual;\n    const requestInitialData = virtual && changes.data && changes.data.isFirstChange();\n\n    if (requestInitialData) {\n      this.pageChange({\n        skip: 0,\n        take: virtual.pageSize\n      });\n    }\n\n    if (isChanged('defaultItem', changes, false)) {\n      this.disabledItemsService.defaultItem = this.defaultItem;\n    }\n\n    if (anyChanged(['textField', 'valueField', 'valuePrimitive', 'defaultItem', 'itemDisabled'], changes, false)) {\n      this.setState();\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  ngAfterContentChecked() {\n    this.verifySettings();\n  }\n  /**\n   * Focuses a specific item of the DropDownList based on a provided index.\n   * If there is a default item it is positioned at index -1.\n   * If null or invalid index is provided the focus will be removed.\n   */\n\n\n  focusItemAt(index) {\n    const minIndex = isPresent(this.defaultItem) ? -1 : 0;\n    const isInRange = minIndex <= index && index < this.data.length;\n\n    if (isPresent(index) && isInRange && !this.disabledItemsService.isIndexDisabled(index)) {\n      this.selectionService.focus(index);\n    } else {\n      this.selectionService.focus(null);\n    }\n  }\n  /**\n   * Focuses the DropDownList.\n   */\n\n\n  focus() {\n    if (!this.disabled) {\n      this.wrapper.nativeElement.focus();\n    }\n  }\n  /**\n   * Blurs the DropDownList.\n   */\n\n\n  blur() {\n    if (!this.disabled) {\n      this.wrapper.nativeElement.blur();\n    }\n  }\n  /**\n   * Toggles the visibility of the popup\n   * ([see example]({% slug openstate_ddl %}#toc-setting-the-initially-opened-component)).\n   * If you use the `toggle` method to open or close the popup, the `open` and `close` events will not be fired.\n   *\n   * @param open - The state of the popup.\n   */\n\n\n  toggle(open) {\n    // The Promise is required to open the popup on load.\n    // Otherwise, the \"Expression has changed...\" type error will be thrown.\n    Promise.resolve(null).then(() => {\n      const shouldOpen = isPresent(open) ? open : !this._open;\n\n      this._toggle(shouldOpen);\n    });\n  }\n\n  _toggle(open) {\n    this._open = open;\n    this.destroyPopup();\n\n    if (this._open) {\n      this.createPopup();\n    }\n  }\n\n  triggerPopupEvents(open) {\n    const eventArgs = new PreventableEvent();\n\n    if (open) {\n      this.open.emit(eventArgs);\n    } else {\n      this.close.emit(eventArgs);\n    }\n\n    return eventArgs.isDefaultPrevented();\n  }\n  /**\n   * @hidden\n   */\n\n\n  togglePopup(open) {\n    const isDisabled = this.disabled || this.readonly;\n    const sameState = this.isOpen === open;\n\n    if (isDisabled || sameState) {\n      return;\n    }\n\n    const isDefaultPrevented = this.triggerPopupEvents(open);\n\n    if (!isDefaultPrevented) {\n      if (!open && this.filterable && this.isFocused) {\n        this.focus();\n      }\n\n      this._toggle(open);\n    }\n  }\n  /**\n   * Returns the current open state of the popup.\n   */\n\n\n  get isOpen() {\n    return this._open;\n  }\n  /**\n   * Resets the value of the DropDownList.\n   * If you use the `reset` method to clear the value of the component,\n   * the model will not update automatically and the `selectionChange` and `valueChange` events will not be fired.\n   */\n\n\n  reset() {\n    this.value = undefined;\n  }\n  /**\n   * @hidden\n   */\n\n\n  writeValue(value) {\n    this.value = value === null ? undefined : value;\n  }\n  /**\n   * @hidden\n   */\n\n\n  registerOnChange(fn) {\n    this.onChangeCallback = fn;\n  }\n  /**\n   * @hidden\n   */\n\n\n  registerOnTouched(fn) {\n    this.onTouchedCallback = fn;\n  }\n  /**\n   * @hidden\n   */\n\n\n  setDisabledState(isDisabled) {\n    this.disabled = isDisabled;\n  }\n  /**\n   * @hidden\n   */\n\n\n  get buttonClasses() {\n    return this.loading ? 'k-i-loading' : this.iconClass || 'k-i-arrow-s';\n  }\n  /**\n   * @hidden\n   */\n\n\n  get listContainerClasses() {\n    const containerClasses = ['k-list-container', 'k-reset'];\n\n    if (this.popupSettings.popupClass) {\n      containerClasses.push(this.popupSettings.popupClass);\n    }\n\n    return containerClasses;\n  }\n  /**\n   * @hidden\n   */\n\n\n  get isDisabledDefaultItem() {\n    return this.disabledItemsService.isItemDisabled(this.defaultItem);\n  }\n  /**\n   * @hidden\n   */\n\n\n  getText() {\n    return this.text;\n  }\n  /**\n   * @hidden\n   */\n\n\n  getDefaultItemText() {\n    return getter$1(this.defaultItem, this.textField);\n  }\n\n  createPopup() {\n    if (this.virtual) {\n      this.virtual.skip = 0;\n    }\n\n    const horizontalAlign = this.direction === \"rtl\" ? \"right\" : \"left\";\n    const anchorPosition = {\n      horizontal: horizontalAlign,\n      vertical: \"bottom\"\n    };\n    const popupPosition = {\n      horizontal: horizontalAlign,\n      vertical: \"top\"\n    };\n    this.popupRef = this.popupService.open({\n      anchor: this.wrapper,\n      anchorAlign: anchorPosition,\n      animate: this.popupSettings.animate,\n      appendTo: this.appendTo,\n      content: this.popupTemplate,\n      popupAlign: popupPosition,\n      popupClass: this.listContainerClasses,\n      positionMode: 'absolute'\n    });\n    const popupWrapper = this.popupRef.popupElement;\n    const {\n      min,\n      max\n    } = this.width;\n    popupWrapper.addEventListener('mousedown', this.popupMouseDownHandler);\n    popupWrapper.style.minWidth = min;\n    popupWrapper.style.width = max;\n    popupWrapper.style.height = this.height;\n    popupWrapper.setAttribute(\"dir\", this.direction);\n    this.popupRef.popupOpen.subscribe(() => {\n      this.cdr.detectChanges();\n      this.optionsList.scrollToItem(this.selectionService.focused);\n      this.opened.emit();\n    });\n    this.popupRef.popupClose.subscribe(() => {\n      this.closed.emit();\n    });\n\n    if (!this.filterable) {\n      this.popupRef.popupAnchorViewportLeave.subscribe(() => this.togglePopup(false));\n    }\n  }\n\n  destroyPopup() {\n    if (this.popupRef) {\n      this.popupRef.popupElement.removeEventListener('mousedown', this.popupMouseDownHandler);\n      this.popupRef.close();\n      this.popupRef = null;\n    }\n  }\n\n  updateState({\n    dataItem,\n    confirm = false\n  }) {\n    this.dataItem = dataItem;\n    this.text = getter$1(dataItem, this.textField);\n\n    if (confirm) {\n      this._previousDataItem = dataItem;\n    }\n  }\n\n  clearState() {\n    this.text = undefined;\n    this.dataItem = undefined;\n  }\n\n  resetSelection(index) {\n    const clear = !isPresent(index);\n    this.selectionService.resetSelection(clear ? [] : [index]);\n    this.selectionService.focused = clear ? this.firstFocusableIndex(0) : index;\n  }\n\n  onSelectionChange({\n    dataItem\n  }) {\n    this.updateState({\n      dataItem\n    });\n    this.selectionChange.emit(dataItem); // reassigning the value label ID as aria-deascibedby forces firefox/nvda, forefox/jaws to read\n    // the new value when the popup is closed and the value is changed with the arrow keys (up/down)\n\n    this.assignAriaDescribedBy();\n  }\n\n  subscribeEvents() {\n    if (!isDocumentAvailable()) {\n      return;\n    } // Item selection when the popup is open.\n\n\n    this.selectionSubscription.add(this.selectionService.onSelect.pipe(filter(_ => this.isOpen), map(this.itemFromEvent.bind(this))).subscribe(this.onSelectionChange.bind(this))); // Item selection when the popup is closed | clicked | enter, and so on.\n\n    this.selectionSubscription.add(merge(this.selectionService.onSelect.pipe(filter(_ => !this.isOpen)), this.selectionService.onChange).pipe(map(this.itemFromEvent.bind(this)), tap(_ => this.togglePopup(false))).subscribe(({\n      dataItem,\n      value: newValue,\n      newSelection\n    }) => {\n      if (newSelection) {\n        this.onSelectionChange({\n          dataItem\n        });\n      }\n\n      const shouldUsePrevious = !isPresent(dataItem) && this._previousDataItem;\n      const shouldUseNewValue = newValue !== getter$1(this.value, this.valueField);\n\n      if (shouldUsePrevious) {\n        this.updateState({\n          dataItem: this._previousDataItem\n        });\n        this.resetSelection();\n      } else if (shouldUseNewValue) {\n        this.value = this.valuePrimitive ? newValue : dataItem;\n        this._previousDataItem = dataItem;\n        this.emitChange(this.value);\n      }\n\n      this.clearFilter();\n    }));\n    this.navigationSubscription = merge(this.navigationService.up, this.navigationService.down, this.navigationService.left.pipe(skipWhile(() => this.filterable)), this.navigationService.right.pipe(skipWhile(() => this.filterable)), this.navigationService.home, this.navigationService.end).pipe(filter(event => !isNaN(event.index))).subscribe(event => this.selectionService.select(event.index));\n    this.openSubscription = this.navigationService.open.subscribe(() => this.togglePopup(true));\n    this.closeSubscription = this.navigationService.close.subscribe(() => {\n      this.togglePopup(false);\n      this.focus();\n    });\n    this.enterSubscription = this.navigationService.enter.pipe(tap(event => event.originalEvent.preventDefault())).subscribe(this.handleEnter.bind(this));\n    this.escSubscription = this.navigationService.esc.subscribe(this.handleEscape.bind(this));\n    this.filterBlurredSubscription = this.filterBlurred.pipe(concatMap(() => interval(10).pipe(take(1), takeUntil(this.wrapperFocused)))).subscribe(() => {\n      this.wrapperBlurred.emit();\n    });\n\n    this._zone.runOutsideAngular(() => {\n      this.componentBlurredSubscription = merge(this.wrapperBlurred.pipe(concatMap(() => interval(10).pipe(take(1), takeUntil(this.filterFocused)))), this.navigationService.tab).pipe(tap(event => event instanceof NavigationEvent && this.focus()), filter(() => this.isFocused)).subscribe(() => this.componentBlur());\n    });\n  }\n\n  subscribeTouchEvents() {\n    if (!isDocumentAvailable() || !this.touchEnabled) {\n      return;\n    }\n\n    this._zone.runOutsideAngular(() => // Roll up DropDownList on iOS when tapped outside\n    this.touchstartDisposeHandler = this.renderer.listen(document, 'touchstart', e => {\n      const target = e.target;\n\n      if (this.isFocused && !inDropDown(this.hostElement, target, this.popupRef)) {\n        this._zone.run(() => {\n          if (this.filterFocused) {\n            // Close popup if filter is focused\n            this.togglePopup(false);\n          }\n\n          this.blur();\n        });\n      }\n    }));\n  }\n\n  unsubscribeEvents() {\n    if (!isDocumentAvailable()) {\n      return;\n    }\n\n    this.navigationSubscription.unsubscribe();\n    this.openSubscription.unsubscribe();\n    this.closeSubscription.unsubscribe();\n    this.enterSubscription.unsubscribe();\n    this.escSubscription.unsubscribe();\n    this.componentBlurredSubscription.unsubscribe();\n    this.filterBlurredSubscription.unsubscribe();\n\n    if (this.touchstartDisposeHandler) {\n      this.touchstartDisposeHandler();\n    }\n\n    if (this.selectionSubscription) {\n      this.selectionSubscription.unsubscribe();\n    }\n  }\n\n  itemFromEvent(event) {\n    const index = event.indices[0];\n    let dataItem = this.dataService.itemAt(index);\n    dataItem = isPresent(dataItem) ? dataItem : this.currentOrDefault(index);\n    const value = getter$1(dataItem, this.valueField);\n    const newSelection = event.newSelection;\n    return {\n      dataItem,\n      index,\n      newSelection,\n      value\n    };\n  }\n\n  currentOrDefault(selectedIndex) {\n    const defaultItemIndex = -1;\n\n    if (isPresent(this.dataItem) && selectedIndex !== defaultItemIndex) {\n      return this.dataItem;\n    } else {\n      return this.defaultItem;\n    }\n  }\n\n  firstFocusableIndex(index) {\n    const maxIndex = this.dataService.itemsCount - 1;\n\n    if (this.disabledItemsService.isIndexDisabled(index)) {\n      return index < maxIndex ? this.firstFocusableIndex(index + 1) : undefined;\n    } else {\n      return index;\n    }\n  }\n\n  handleEnter() {\n    if (this.isOpen) {\n      this.selectionService.change(this.selectionService.focused);\n      this.focus();\n    } else {\n      this.togglePopup(true);\n    }\n  }\n\n  handleEscape() {\n    if (isPresent(this.selectionService.selected[0])) {\n      this.selectionService.change(this.selectionService.selected[0]);\n    } else {\n      this.togglePopup(false);\n      this.clearFilter();\n    }\n\n    this.focus();\n  }\n\n  clearFilter() {\n    if (!(this.filterable && this.filterText)) {\n      return;\n    }\n\n    this.filterText = \"\";\n    this.cdr.markForCheck();\n    this.filterChange.emit(this.filterText);\n  }\n\n  verifySettings() {\n    if (!isDevMode()) {\n      return;\n    }\n\n    if (this.defaultItem && this.valueField && typeof this.defaultItem !== \"object\") {\n      throw new Error(DropDownListMessages.defaultItem);\n    }\n\n    if (this.valuePrimitive === true && isPresent(this.value) && typeof this.value === \"object\") {\n      throw new Error(DropDownListMessages.primitive);\n    }\n\n    if (this.valuePrimitive === false && isPresent(this.value) && typeof this.value !== \"object\") {\n      throw new Error(DropDownListMessages.object);\n    }\n\n    const valueOrText = !isPresent(this.valueField) !== !isPresent(this.textField);\n\n    if (valueOrText) {\n      throw new Error(DropDownListMessages.textAndValue);\n    }\n  }\n\n  componentBlur() {\n    this.isFocused = false;\n    const selectionPresent = isPresent(this.selectionService.selected[0]);\n    const valueHasChanged = selectionPresent && getter$1(this.value, this.valueField) !== getter$1(this.dataService.itemAt(this.selectionService.selected[0]), this.valueField);\n\n    if (valueHasChanged || hasObservers(this.close) || hasObservers(this.onBlur) || hasObservers(this.filterChange) || isUntouched(this.hostElement.nativeElement)) {\n      this._zone.run(() => {\n        if (valueHasChanged) {\n          this.selectionService.change(this.selectionService.selected[0]);\n        }\n\n        this.togglePopup(false);\n        this.clearFilter();\n        this.onBlur.emit();\n        this.onTouchedCallback();\n      });\n    } else {\n      this.togglePopup(false);\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  onMouseDown(event) {\n    const tagName = event.target.tagName.toLowerCase();\n\n    if (tagName !== \"input\") {\n      event.preventDefault();\n    }\n  }\n\n  onKeyPress(event) {\n    if (event.which === 0 || event.keyCode === Keys.Enter) {\n      return;\n    }\n\n    let character = String.fromCharCode(event.charCode || event.keyCode);\n\n    if (this.ignoreCase) {\n      character = character.toLowerCase();\n    }\n\n    if (character === \" \") {\n      event.preventDefault();\n    }\n\n    this.word += character;\n    this.last = character;\n    this.search();\n  }\n\n  search() {\n    clearTimeout(this.typingTimeout);\n\n    if (!this.filterable) {\n      this.typingTimeout = setTimeout(() => {\n        this.word = \"\";\n      }, this.delay);\n      this.selectNext();\n    }\n  }\n\n  selectNext() {\n    let data = this.dataService.filter(item => isPresent(item) && !item.header && !this.disabledItemsService.isItemDisabled(item)).map(item => {\n      if (this.dataService.grouped) {\n        return {\n          item: item.value,\n          itemIndex: item.offsetIndex\n        };\n      }\n\n      return {\n        item: item,\n        itemIndex: this.dataService.indexOf(item)\n      };\n    });\n    const isInLoop = sameCharsOnly(this.word, this.last);\n    let dataLength = data.length;\n    let hasSelected = !isNaN(this.selectionService.selected[0]);\n    let startIndex = !hasSelected ? 0 : this.selectionService.selected[0];\n    let text, index, defaultItem;\n\n    if (this.defaultItem && !this.disabledItemsService.isItemDisabled(this.defaultItem)) {\n      defaultItem = {\n        item: this.defaultItem,\n        itemIndex: -1\n      };\n      dataLength += 1;\n      startIndex += 1;\n    }\n\n    startIndex += isInLoop && hasSelected ? 1 : 0;\n    data = shuffleData(data, startIndex, defaultItem);\n    index = 0;\n\n    for (; index < dataLength; index++) {\n      text = getter$1(data[index].item, this.textField);\n      const loopMatch = Boolean(isInLoop && matchText(text, this.last, this.ignoreCase));\n      const nextMatch = Boolean(matchText(text, this.word, this.ignoreCase));\n\n      if (loopMatch || nextMatch) {\n        index = data[index].itemIndex;\n        break;\n      }\n    }\n\n    if (index !== dataLength) {\n      this.navigate(index);\n    }\n  }\n\n  emitChange(value) {\n    this.onChangeCallback(value);\n    this.valueChange.emit(value);\n  }\n\n  navigate(index) {\n    this.selectionService.select(index);\n  }\n\n  findDataItem({\n    valueField,\n    value\n  }) {\n    const result = {\n      dataItem: null,\n      index: -1\n    };\n\n    const prop = dataItem => getter$1(dataItem, valueField);\n\n    let comparer;\n\n    if (this.dataService.grouped) {\n      comparer = element => {\n        return prop(element.value) === prop(value);\n      };\n    } else {\n      comparer = element => {\n        return prop(element) === prop(value);\n      };\n    }\n\n    const index = this.dataService.findIndex(comparer);\n    result.dataItem = this.dataService.itemAt(index);\n    result.index = index;\n    return result;\n  }\n\n  setState() {\n    const value = this.value;\n    const valueField = this.valueField;\n    const textField = this.textField;\n    const primitive = this.valuePrimitive;\n\n    if (this.defaultItem) {\n      const defaultValue = getter$1(this.defaultItem, valueField);\n      const currentValue = getter$1(value, valueField);\n\n      if (!isPresent(value) || currentValue === defaultValue) {\n        this.updateState({\n          dataItem: this.defaultItem,\n          confirm: true\n        });\n        this.resetSelection(-1);\n\n        if (this.filterable && this.filterText && this.dataService.itemsCount) {\n          this.selectionService.focused = this.firstFocusableIndex(0);\n        }\n\n        return;\n      }\n    }\n\n    const resolved = this.findDataItem({\n      valueField,\n      value\n    }); // The data and value are of same shape,\n    // for example, value: 'foo', data: ['foo', 'bar']\n    // or value: { value: 1, text: 'foo' }, data: [{ value: 1, text: 'foo' }].\n\n    const ofSameType = !(primitive && textField);\n\n    if (resolved.dataItem) {\n      this.updateState({\n        dataItem: resolved.dataItem,\n        confirm: true\n      });\n      this.resetSelection(resolved.index);\n    } else if (isPresent(value) && ofSameType) {\n      this.updateState({\n        dataItem: value\n      });\n      this.resetSelection();\n    } else if (this._previousDataItem) {\n      this.updateState({\n        dataItem: this._previousDataItem\n      });\n      this.resetSelection();\n    } else {\n      this.clearState();\n      this.resetSelection();\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleFilter(event) {\n    this.filterChange.emit(event.target.value);\n  }\n  /**\n   * @hidden\n   */\n\n\n  pageChange(event) {\n    const virtual = this.virtual;\n    virtual.skip = event.skip;\n  }\n\n  setMessages() {\n    this._zone.runOutsideAngular(() => {\n      clearTimeout(this.messagesTimeout);\n      this.messagesTimeout = setTimeout(() => {\n        this.noDataText = this.localization.get('noDataText');\n        this.cdr.detectChanges();\n      });\n    });\n  }\n\n  assignAriaDescribedBy() {\n    const currentValue = this.wrapper.nativeElement.getAttribute('aria-describedby') || '';\n    const trimmed = currentValue.replace(this.valueLabelId, '').trim(); // reset the value label ID to force readers to read the new value\n\n    this.valueLabelId = guid$1(); // add to the current value - don't replace it\n\n    const newValue = `${this.valueLabelId} ${trimmed}`.trim();\n    this.renderer.setAttribute(this.wrapper.nativeElement, 'aria-describedby', newValue);\n  }\n\n};\n\nDropDownListComponent.ɵfac = function DropDownListComponent_Factory(t) {\n  return new (t || DropDownListComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc4.PopupService), ɵngcc0.ɵɵdirectiveInject(SelectionService), ɵngcc0.ɵɵdirectiveInject(NavigationService), ɵngcc0.ɵɵdirectiveInject(DisabledItemsService), ɵngcc0.ɵɵdirectiveInject(DataService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(TOUCH_ENABLED, 8));\n};\n\nDropDownListComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: DropDownListComponent,\n  selectors: [[\"kendo-dropdownlist\"]],\n  contentQueries: function DropDownListComponent_ContentQueries(rf, ctx, dirIndex) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵcontentQuery(dirIndex, ItemTemplateDirective, 5);\n      ɵngcc0.ɵɵcontentQuery(dirIndex, GroupTemplateDirective, 5);\n      ɵngcc0.ɵɵcontentQuery(dirIndex, FixedGroupTemplateDirective, 5);\n      ɵngcc0.ɵɵcontentQuery(dirIndex, ValueTemplateDirective, 5);\n      ɵngcc0.ɵɵcontentQuery(dirIndex, HeaderTemplateDirective, 5);\n      ɵngcc0.ɵɵcontentQuery(dirIndex, FooterTemplateDirective, 5);\n      ɵngcc0.ɵɵcontentQuery(dirIndex, NoDataTemplateDirective, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.itemTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.groupTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.fixedGroupTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.valueTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.headerTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.footerTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.noDataTemplate = _t.first);\n    }\n  },\n  viewQuery: function DropDownListComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵviewQuery(_c11, 7, ViewContainerRef);\n      ɵngcc0.ɵɵviewQuery(_c12, 7);\n      ɵngcc0.ɵɵviewQuery(_c19, 7);\n      ɵngcc0.ɵɵviewQuery(_c13, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.container = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.popupTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.wrapper = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.optionsList = _t.first);\n    }\n  },\n  hostVars: 5,\n  hostBindings: function DropDownListComponent_HostBindings(rf, ctx) {\n    if (rf & 2) {\n      ɵngcc0.ɵɵattribute(\"dir\", ctx.dir);\n      ɵngcc0.ɵɵclassProp(\"k-widget\", ctx.widgetClasses)(\"k-dropdown\", ctx.widgetClasses);\n    }\n  },\n  inputs: {\n    focusableId: \"focusableId\",\n    listHeight: \"listHeight\",\n    disabled: \"disabled\",\n    readonly: \"readonly\",\n    filterable: \"filterable\",\n    ignoreCase: \"ignoreCase\",\n    delay: \"delay\",\n    tabindex: \"tabindex\",\n    data: \"data\",\n    value: \"value\",\n    popupSettings: \"popupSettings\",\n    itemDisabled: \"itemDisabled\",\n    virtual: \"virtual\",\n    valuePrimitive: \"valuePrimitive\",\n    tabIndex: \"tabIndex\",\n    iconClass: \"iconClass\",\n    loading: \"loading\",\n    textField: \"textField\",\n    valueField: \"valueField\",\n    defaultItem: \"defaultItem\"\n  },\n  outputs: {\n    valueChange: \"valueChange\",\n    filterChange: \"filterChange\",\n    selectionChange: \"selectionChange\",\n    open: \"open\",\n    opened: \"opened\",\n    close: \"close\",\n    closed: \"closed\",\n    onFocus: \"focus\",\n    onBlur: \"blur\"\n  },\n  exportAs: [\"kendoDropDownList\"],\n  features: [ɵngcc0.ɵɵProvidersFeature([DROPDOWNLIST_VALUE_ACCESSOR, DataService, SelectionService, NavigationService, DisabledItemsService, LocalizationService, {\n    provide: L10N_PREFIX,\n    useValue: 'kendo.dropdownlist'\n  }, {\n    provide: FilterableComponent,\n    useExisting: forwardRef(() => DropDownListComponent_1)\n  }, {\n    provide: KendoInput,\n    useExisting: forwardRef(() => DropDownListComponent_1)\n  }]), ɵngcc0.ɵɵNgOnChangesFeature],\n  decls: 13,\n  vars: 23,\n  consts: function () {\n    let i18n_27;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The text displayed in the popup when there are no items\n       * @meaning kendo.dropdownlist.noDataText\n       */\n      const MSG_EXTERNAL_8289552890585138350$$DIST_FESM2015_INDEX_JS_28 = goog.getMsg(\"NO DATA FOUND\");\n      i18n_27 = MSG_EXTERNAL_8289552890585138350$$DIST_FESM2015_INDEX_JS_28;\n    } else {\n      i18n_27 = $localize`:kendo.dropdownlist.noDataText|The text displayed in the popup when there are no items␟4fc2f70c9c8cf7b18affd6b938105996d6ac3306␟8289552890585138350:NO DATA FOUND`;\n    }\n\n    return [[\"kendoDropDownListLocalizedMessages\", \"\", \"noDataText\", i18n_27], [\"unselectable\", \"on\", \"role\", \"listbox\", \"aria-haspopup\", \"listbox\", 3, \"id\", \"ngClass\", \"kendoEventsOutsideAngular\", \"scope\", \"keydown\", \"keypress\", \"click\"], [\"wrapper\", \"\"], [\"unselectable\", \"on\", 1, \"k-input\", 3, \"id\"], [4, \"ngIf\"], [3, \"ngIf\"], [\"unselectable\", \"on\", 1, \"k-select\"], [\"unselectable\", \"on\", 1, \"k-icon\", 3, \"ngClass\"], [\"popupTemplate\", \"\"], [\"container\", \"\"], [3, \"templateContext\"], [3, \"id\", \"optionPrefix\", \"data\", \"textField\", \"valueField\", \"template\", \"groupTemplate\", \"fixedGroupTemplate\", \"height\", \"show\", \"virtual\", \"pageChange\"], [\"optionsList\", \"\"], [\"class\", \"k-nodata\", 4, \"ngIf\"], [1, \"k-list-filter\", 3, \"click\"], [\"tabindex\", \"-1\", 1, \"k-textbox\", 3, \"filterInput\", \"dir\", \"ngModel\", \"ngModelChange\", \"keydown\", \"input\", \"focus\", \"blur\"], [\"unselectable\", \"on\", 1, \"k-icon\", \"k-i-search\"], [\"kendoDropDownsSelectable\", \"\", 1, \"k-list-optionlabel\", 3, \"ngClass\", \"index\"], [1, \"k-nodata\"], [3, \"ngIf\", \"templateContext\"], [3, \"resize\"]];\n  },\n  template: function DropDownListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵelementContainer(0, 0);\n      ɵngcc0.ɵɵelementStart(1, \"span\", 1, 2);\n      ɵngcc0.ɵɵlistener(\"keydown\", function DropDownListComponent_Template_span_keydown_1_listener($event) {\n        return ctx.keydown($event);\n      })(\"keypress\", function DropDownListComponent_Template_span_keypress_1_listener($event) {\n        return ctx.keypress($event);\n      })(\"click\", function DropDownListComponent_Template_span_click_1_listener($event) {\n        return ctx.click($event);\n      });\n      ɵngcc0.ɵɵelementStart(3, \"span\", 3);\n      ɵngcc0.ɵɵtemplate(4, DropDownListComponent_4_Template, 1, 4, undefined, 4);\n      ɵngcc0.ɵɵtemplate(5, DropDownListComponent_ng_template_5_Template, 1, 1, \"ng-template\", 5);\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵelementStart(6, \"span\", 6);\n      ɵngcc0.ɵɵelement(7, \"span\", 7);\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵtemplate(8, DropDownListComponent_ng_template_8_Template, 8, 17, \"ng-template\", null, 8, ɵngcc0.ɵɵtemplateRefExtractor);\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵtemplate(10, DropDownListComponent_ng_template_10_Template, 1, 0, \"ng-template\", 5);\n      ɵngcc0.ɵɵelementContainer(11, null, 9);\n    }\n\n    if (rf & 2) {\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"id\", ctx.focusableId)(\"ngClass\", ɵngcc0.ɵɵpureFunction1(18, _c29, ctx.disabled))(\"kendoEventsOutsideAngular\", ɵngcc0.ɵɵpureFunction2(20, _c1, ctx.focusComponent, ctx.blurComponent))(\"scope\", ctx);\n      ɵngcc0.ɵɵattribute(\"dir\", ctx.direction)(\"readonly\", ctx.readonly)(\"tabindex\", ctx.widgetTabIndex)(\"aria-disabled\", ctx.disabled)(\"aria-readonly\", ctx.readonly)(\"aria-expanded\", ctx.ariaExpanded)(\"aria-owns\", ctx.ariaOwns)(\"aria-activedescendant\", ctx.ariaActivedescendant)(\"aria-label\", ctx.noDataLabel);\n      ɵngcc0.ɵɵadvance(2);\n      ɵngcc0.ɵɵproperty(\"id\", ctx.valueLabelId);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngIf\", ctx.valueTemplate);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.valueTemplate);\n      ɵngcc0.ɵɵadvance(2);\n      ɵngcc0.ɵɵproperty(\"ngClass\", ctx.buttonClasses);\n      ɵngcc0.ɵɵadvance(3);\n      ɵngcc0.ɵɵproperty(\"ngIf\", ctx.isOpen);\n    }\n  },\n  directives: function () {\n    return [LocalizedMessagesDirective, ɵngcc3.NgClass, ɵngcc2.EventsOutsideAngularDirective, ɵngcc3.NgIf, TemplateContextDirective, ListComponent, ɵngcc5.DefaultValueAccessor, FilterInputDirective, ɵngcc5.NgControlStatus, ɵngcc5.NgModel, SelectableDirective, ɵngcc2.ResizeSensorComponent];\n  },\n  encapsulation: 2\n});\n\n__decorate([Input(), __metadata(\"design:type\", String)], DropDownListComponent.prototype, \"focusableId\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], DropDownListComponent.prototype, \"iconClass\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], DropDownListComponent.prototype, \"loading\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], DropDownListComponent.prototype, \"data\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], DropDownListComponent.prototype, \"value\", null);\n\n__decorate([Input(), __metadata(\"design:type\", String)], DropDownListComponent.prototype, \"textField\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], DropDownListComponent.prototype, \"valueField\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], DropDownListComponent.prototype, \"popupSettings\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Number)], DropDownListComponent.prototype, \"listHeight\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Object)], DropDownListComponent.prototype, \"defaultItem\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], DropDownListComponent.prototype, \"disabled\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Function])], DropDownListComponent.prototype, \"itemDisabled\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], DropDownListComponent.prototype, \"readonly\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], DropDownListComponent.prototype, \"filterable\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], DropDownListComponent.prototype, \"virtual\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], DropDownListComponent.prototype, \"ignoreCase\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Number)], DropDownListComponent.prototype, \"delay\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [Boolean])], DropDownListComponent.prototype, \"valuePrimitive\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Number)], DropDownListComponent.prototype, \"tabindex\", void 0);\n\n__decorate([Input(\"tabIndex\"), __metadata(\"design:type\", Number), __metadata(\"design:paramtypes\", [Number])], DropDownListComponent.prototype, \"tabIndex\", null);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], DropDownListComponent.prototype, \"valueChange\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], DropDownListComponent.prototype, \"filterChange\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], DropDownListComponent.prototype, \"selectionChange\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], DropDownListComponent.prototype, \"open\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], DropDownListComponent.prototype, \"opened\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], DropDownListComponent.prototype, \"close\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], DropDownListComponent.prototype, \"closed\", void 0);\n\n__decorate([Output('focus'), __metadata(\"design:type\", EventEmitter)], DropDownListComponent.prototype, \"onFocus\", void 0);\n\n__decorate([Output('blur'), __metadata(\"design:type\", EventEmitter)], DropDownListComponent.prototype, \"onBlur\", void 0);\n\n__decorate([ContentChild(ItemTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", ItemTemplateDirective)], DropDownListComponent.prototype, \"itemTemplate\", void 0);\n\n__decorate([ContentChild(GroupTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", GroupTemplateDirective)], DropDownListComponent.prototype, \"groupTemplate\", void 0);\n\n__decorate([ContentChild(FixedGroupTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", FixedGroupTemplateDirective)], DropDownListComponent.prototype, \"fixedGroupTemplate\", void 0);\n\n__decorate([ContentChild(ValueTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", ValueTemplateDirective)], DropDownListComponent.prototype, \"valueTemplate\", void 0);\n\n__decorate([ContentChild(HeaderTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", HeaderTemplateDirective)], DropDownListComponent.prototype, \"headerTemplate\", void 0);\n\n__decorate([ContentChild(FooterTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", FooterTemplateDirective)], DropDownListComponent.prototype, \"footerTemplate\", void 0);\n\n__decorate([ContentChild(NoDataTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", NoDataTemplateDirective)], DropDownListComponent.prototype, \"noDataTemplate\", void 0);\n\n__decorate([ViewChild('container', {\n  read: ViewContainerRef,\n  static: true\n}), __metadata(\"design:type\", ViewContainerRef)], DropDownListComponent.prototype, \"container\", void 0);\n\n__decorate([ViewChild('popupTemplate', {\n  static: true\n}), __metadata(\"design:type\", TemplateRef)], DropDownListComponent.prototype, \"popupTemplate\", void 0);\n\n__decorate([ViewChild('wrapper', {\n  static: true\n}), __metadata(\"design:type\", ElementRef)], DropDownListComponent.prototype, \"wrapper\", void 0);\n\n__decorate([ViewChild('optionsList', {\n  static: false\n}), __metadata(\"design:type\", ListComponent)], DropDownListComponent.prototype, \"optionsList\", void 0);\n\n__decorate([HostBinding('class.k-widget'), HostBinding('class.k-dropdown'), __metadata(\"design:type\", Boolean)], DropDownListComponent.prototype, \"widgetClasses\", void 0);\n\n__decorate([HostBinding('attr.dir'), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [])], DropDownListComponent.prototype, \"dir\", null);\n\nDropDownListComponent = DropDownListComponent_1 = __decorate([__param(10, Optional()), __param(10, Inject(TOUCH_ENABLED)), __metadata(\"design:paramtypes\", [LocalizationService, PopupService, SelectionService, NavigationService, DisabledItemsService, DataService, NgZone, Renderer2, ElementRef, ChangeDetectorRef, Boolean])], DropDownListComponent);\n/**\n * Renders the content of the custom list item in the MultiSelect\n * ([see example]({% slug templates_multiselect %}#toc-customizing-the-item-content)).\n * The template context is set to the current component.\n * To get a reference to the current text that is typed by the\n * user, use the `let-customItem` directive.\n *\n * > The `CustomItemTemplate` directive can only be used with the MultiSelect component.\n *\n * @example\n * ```ts\n * _@Component({\n * selector: 'my-app',\n * template: `\n *  <kendo-multiselect [data]=\"listItems\" [allowCustom]=\"true\">\n *    <ng-template kendoMultiSelectCustomItemTemplate let-customItem>\n *      <span>New Item: {{customItem}}</span>\n *    </ng-template>\n *  </kendo-multiselect>\n * `\n * })\n * class AppComponent {\n *   public listItems: Array<string> = [\"Item 1\", \"Item 2\", \"Item 3\", \"Item 4\"];\n * }\n * ```\n *\n */\n\nlet CustomItemTemplateDirective = /*#__PURE__*/(() => {\n  let CustomItemTemplateDirective = class CustomItemTemplateDirective {\n    constructor(templateRef) {\n      this.templateRef = templateRef;\n    }\n\n  };\n\n  CustomItemTemplateDirective.ɵfac = function CustomItemTemplateDirective_Factory(t) {\n    return new (t || CustomItemTemplateDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef));\n  };\n\n  CustomItemTemplateDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: CustomItemTemplateDirective,\n    selectors: [[\"\", \"kendoMultiSelectCustomItemTemplate\", \"\"]]\n  });\n  CustomItemTemplateDirective = __decorate([__metadata(\"design:paramtypes\", [TemplateRef])], CustomItemTemplateDirective);\n  /**\n   * Renders the selected tag value of the MultiSelect\n   * ([see example]({% slug templates_multiselect %}#toc-tag-template)).\n   * The template context is set to the current component.\n   * To get a reference to the current data item, use the `let-dataItem` directive.\n   *\n   * > The `TagTemplate` directive can only be used with the MultiSelect and MultiSelectTree components.\n   *\n   * @example\n   * ```ts\n   * _@Component({\n   * selector: 'my-app',\n   * template: `\n   *  <kendo-multiselect [data]=\"items\">\n   *    <ng-template kendoMultiSelectTagTemplate let-dataItem>\n   *      <span>{{dataItem}} option</span>\n   *    </ng-template>\n   *  </kendo-multiselect>\n   * `\n   * })\n   * class AppComponent {\n   *   public items: Array<string> = [\"Item 1\", \"Item 2\", \"Item 3\", \"Item 4\"];\n   * }\n   * ```\n   */\n\n  return CustomItemTemplateDirective;\n})();\nlet TagTemplateDirective = /*#__PURE__*/(() => {\n  let TagTemplateDirective = class TagTemplateDirective {\n    constructor(templateRef) {\n      this.templateRef = templateRef;\n    }\n\n  };\n\n  TagTemplateDirective.ɵfac = function TagTemplateDirective_Factory(t) {\n    return new (t || TagTemplateDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef));\n  };\n\n  TagTemplateDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: TagTemplateDirective,\n    selectors: [[\"\", \"kendoMultiSelectTagTemplate\", \"\"], [\"\", \"kendoMultiSelectTreeTagTemplate\", \"\"]]\n  });\n  TagTemplateDirective = __decorate([__metadata(\"design:paramtypes\", [TemplateRef])], TagTemplateDirective);\n  /**\n   * Renders the grouped tag values in the MultiSelect\n   * ([see example]({% slug summarytagmode_multiselect %})).\n   * The template context is set to the current component.\n   * To get a reference to the current grouped\n   * data items collection, use the `let-dataItems` directive.\n   *\n   * > The `GroupTagTemplate` directive can only be used with the MultiSelect and MultiSelectTree components.\n   *\n   * @example\n   * ```ts\n   * _@Component({\n   * selector: 'my-app',\n   * template: `\n   *  <kendo-multiselect kendoMultiSelectSummaryTag [data]=\"items\">\n   *    <ng-template kendoMultiSelectGroupTagTemplate let-dataItems>\n   *      <span>{{dataItems.length}} item(s) selected</span>\n   *    </ng-template>\n   *  </kendo-multiselect>\n   * `\n   * })\n   * class AppComponent {\n   *   public items: Array<string> = [\"Item 1\", \"Item 2\", \"Item 3\", \"Item 4\"];\n   * }\n   * ```\n   */\n\n  return TagTemplateDirective;\n})();\nlet GroupTagTemplateDirective = /*#__PURE__*/(() => {\n  let GroupTagTemplateDirective = class GroupTagTemplateDirective {\n    constructor(templateRef) {\n      this.templateRef = templateRef;\n    }\n\n  };\n\n  GroupTagTemplateDirective.ɵfac = function GroupTagTemplateDirective_Factory(t) {\n    return new (t || GroupTagTemplateDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef));\n  };\n\n  GroupTagTemplateDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: GroupTagTemplateDirective,\n    selectors: [[\"\", \"kendoMultiSelectGroupTagTemplate\", \"\"], [\"\", \"kendoMultiSelectTreeGroupTagTemplate\", \"\"]]\n  });\n  GroupTagTemplateDirective = __decorate([__metadata(\"design:paramtypes\", [TemplateRef])], GroupTagTemplateDirective);\n  /**\n   * Arguments for the `removeTag` event. The `removeTag` event fires when a tag is about\n   * to the removed. If you cancel the event, the removal is prevented.\n   */\n\n  return GroupTagTemplateDirective;\n})();\n\nclass RemoveTagEvent extends PreventableEvent {\n  /**\n   * Constructs the event arguments for the `remove` event.\n   * @param dataItem - The data item or an array of data items that will be removed.\n   */\n  constructor(dataItem) {\n    super();\n    this.dataItem = dataItem;\n  }\n\n}\n/**\n * @hidden\n */\n\n\nconst normalizeCheckboxesSettings = settings => {\n  if (isObject(settings)) {\n    const defaultSettings = {\n      enabled: true,\n      checkOnClick: true\n    };\n    return Object.assign({}, defaultSettings, settings);\n  }\n\n  return {\n    enabled: Boolean(settings),\n    checkOnClick: true\n  };\n};\n/* tslint:disable:member-ordering */\n\n\nvar MultiSelectComponent_1;\nconst MULTISELECT_VALUE_ACCESSOR = {\n  multi: true,\n  provide: NG_VALUE_ACCESSOR,\n  // tslint:disable-next-line:no-use-before-declare\n  useExisting: forwardRef(() => MultiSelectComponent)\n};\n/**\n * Represents the [Kendo UI MultiSelect component for Angular]({% slug overview_multiselect %}).\n *\n * @example\n * ```ts\n * _@Component({\n * selector: 'my-app',\n * template: `\n *  <kendo-multiselect [data]=\"listItems\">\n *  </kendo-multiselect>\n * `\n * })\n * class AppComponent {\n *   public listItems: Array<string> = [\"Item 1\", \"Item 2\", \"Item 3\", \"Item 4\"];\n * }\n * ```\n */\n\nlet MultiSelectComponent = MultiSelectComponent_1 = class MultiSelectComponent {\n  constructor(localization, popupService, dataService, selectionService, navigationService, disabledItemsService, cdr, differs, renderer, hostElement, _zone, touchEnabled$$1) {\n    this.localization = localization;\n    this.popupService = popupService;\n    this.dataService = dataService;\n    this.selectionService = selectionService;\n    this.navigationService = navigationService;\n    this.disabledItemsService = disabledItemsService;\n    this.cdr = cdr;\n    this.differs = differs;\n    this.renderer = renderer;\n    this.hostElement = hostElement;\n    this._zone = _zone;\n    this.touchEnabled = touchEnabled$$1;\n    this.listBoxId = guid$1();\n    this.tagListId = guid$1();\n    this.tagPrefix = \"tag-\" + guid$1();\n    this.optionPrefix = \"option-\" + guid$1();\n    this.focusedTagIndex = undefined;\n    /**\n     * @hidden\n     */\n\n    this.focusableId = `k-${guid$1()}`;\n    /**\n     * Determines whether to close the options list of the MultiSelect after the item selection is finished\n     * ([see example]({% slug openstate_multiselect %}#toc-keeping-the-options-list-open-while-on-focus)).\n     * @default true\n     */\n\n    this.autoClose = true;\n    /**\n     * Specifies the [`tabindex`](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex) of the component.\n     */\n\n    this.tabindex = 0;\n    /**\n     * Sets the disabled state of the component.\n     */\n\n    this.disabled = false;\n    /**\n     * Sets the read-only state of the component.\n     */\n\n    this.readonly = false;\n    /**\n     * Enables the [filtering]({% slug filtering_multiselect %}) functionality of the MultiSelect.\n     */\n\n    this.filterable = false;\n    /**\n     * Sets the height of the suggestions list. By default, `listHeight` is 200px.\n     *\n     * > The `listHeight` property affects only the list of suggestions and not the whole popup container.\n     * > To set the height of the popup container, use `popupSettings.height`.\n     */\n\n    this.listHeight = 200;\n    /**\n     * If set to `true`, renders a button on hovering over the component.\n     * Clicking this button resets the value of the component to an empty array and triggers the `change` event.\n     */\n\n    this.clearButton = true;\n    /**\n     * A user-defined callback function which receives an array of selected data items and maps them to an array of tags.\n     *\n     * @param { Any[] } dataItems - The selected data items from the list.\n     * @returns { Any[] } - The tags that will be rendered by the component.\n     */\n\n    this.tagMapper = tags => tags || [];\n    /**\n     * Specifies whether the MultiSelect allows user-defined values that are not present in the dataset\n     * ([more information and examples]({% slug custom_values_multiselect %})).\n     * Defaults to `false`.\n     */\n\n\n    this.allowCustom = false;\n    /**\n     * A user-defined callback function which returns normalized custom values.\n     * Typically used when the data items are different from type `string`.\n     *\n     * @param { Any } value - The custom value that is defined by the user.\n     * @returns { Any }\n     *\n     * @example\n     * ```ts\n     * import { map } from 'rxjs/operators';\n     *\n     * _@Component({\n     * selector: 'my-app',\n     * template: `\n     *   <kendo-multiselect\n     *       [allowCustom]=\"true\"\n     *       [data]=\"listItems\"\n     *       textField=\"text\"\n     *       valueField=\"value\"\n     *       [valueNormalizer]=\"valueNormalizer\"\n     *       (valueChange)=\"onValueChange($event)\"\n     *   >\n     *   </kendo-multiselect>\n     * `\n     * })\n     *\n     * class AppComponent {\n     *   public listItems: Array<{ text: string, value: number }> = [\n     *       { text: \"Small\", value: 1 },\n     *       { text: \"Medium\", value: 2 },\n     *       { text: \"Large\", value: 3 }\n     *   ];\n     *\n     *   public onValueChange(value) {\n     *       console.log(\"valueChange : \", value);\n     *   }\n     *\n     *   public valueNormalizer = (text$: Observable<string>) => text$.pipe(map((text: string) => {\n     *      return {\n     *         value: Math.floor(Math.random() * (1000 - 100) + 1000), //generate unique valueField\n     *         text: text };\n     *   }));\n     *\n     * }\n     * ```\n     */\n\n    this.valueNormalizer = text => text.pipe(map(userInput => {\n      const comparer = item => typeof item === 'string' && userInput.toLowerCase() === item.toLowerCase();\n\n      const matchingValue = this.value.find(comparer);\n\n      if (matchingValue) {\n        return matchingValue;\n      }\n\n      const matchingItem = this.dataService.find(comparer);\n      return matchingItem ? matchingItem : userInput;\n    }));\n    /**\n     * Fires each time the user types in the input field.\n     * You can filter the source based on the passed filtration value.\n     */\n\n\n    this.filterChange = new EventEmitter();\n    /**\n     * Fires each time the value is changed&mdash;\n     * when the component is blurred or the value is cleared through the **Clear** button\n     * ([see example]({% slug overview_multiselect %}#toc-events)).\n     * When the value of the component is programmatically changed to `ngModel` or `formControl`\n     * through its API or form binding, the `valueChange` event is not triggered because it\n     * might cause a mix-up with the built-in `valueChange` mechanisms of the `ngModel` or `formControl` bindings.\n     */\n\n    this.valueChange = new EventEmitter();\n    /**\n     * Fires each time the popup is about to open\n     * ([see example]({% slug openstate_multiselect %}#toc-preventing-opening-and-closing)).\n     * This event is preventable. If you cancel it, the popup will remain closed.\n     */\n\n    this.open = new EventEmitter();\n    /**\n     * Fires after the popup has been opened.\n     */\n\n    this.opened = new EventEmitter();\n    /**\n     * Fires each time the popup is about to close\n     * ([see example]({% slug openstate_multiselect %}#toc-preventing-opening-and-closing)).\n     * This event is preventable. If you cancel it, the popup will remain open.\n     */\n\n    this.close = new EventEmitter();\n    /**\n     * Fires after the popup has been closed.\n     */\n\n    this.closed = new EventEmitter();\n    /**\n     * Fires each time the user focuses the MultiSelect.\n     */\n\n    this.onFocus = new EventEmitter(); //tslint:disable-line:no-output-rename\n\n    /**\n     * Fires each time the MultiSelect gets blurred.\n     */\n\n    this.onBlur = new EventEmitter(); //tslint:disable-line:no-output-rename\n\n    /**\n     * Fires each time a tag is about to be removed.\n     * This event is preventable. If you cancel it, the tag will not be removed.\n     */\n\n    this.removeTag = new EventEmitter();\n    this.widgetClasses = true;\n    this.initialized = false;\n\n    this.onChangeCallback = _ => {};\n\n    this.onTouchedCallback = _ => {};\n\n    this._placeholder = '';\n    this._open = false;\n    this._value = [];\n    this._popupSettings = {\n      animate: true\n    };\n    this._checkboxes = {\n      enabled: false\n    };\n    this._isFocused = false;\n    this.selectedDataItems = [];\n    this.customValueSubject = new Subject();\n    this.observableSubscriptions = new Subscription();\n    validatePackage(packageMetadata);\n    this.popupMouseDownHandler = this.onMouseDown.bind(this);\n    this.data = [];\n    this.direction = this.localization.rtl ? 'rtl' : 'ltr';\n    this.subscribeEvents();\n    this.subscribeTouchEvents();\n  }\n  /**\n   * Focuses a specific item of the MultiSelect based on a provided index.\n   * If there is a custom item it is positioned at index -1.\n   * If null or invalid index is provided the focus will be removed.\n   */\n\n\n  focusItemAt(index) {\n    const minIndex = this.allowCustom ? -1 : 0;\n    const isInRange = minIndex <= 0 && index < this.data.length;\n\n    if (isPresent(index) && isInRange && !this.disabledItemsService.isIndexDisabled(index)) {\n      this.selectionService.focus(index);\n    } else {\n      this.selectionService.focus(null);\n    }\n  }\n  /**\n   * Focuses the MultiSelect.\n   */\n\n\n  focus() {\n    if (!this.disabled) {\n      this.searchbar.focus();\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  onSearchBarFocus() {\n    if (!this.isFocused) {\n      this.isFocused = true;\n\n      if (hasObservers(this.onFocus)) {\n        this._zone.run(() => {\n          this.onFocus.emit();\n        });\n      }\n    }\n  }\n  /**\n   * Blurs the MultiSelect.\n   */\n\n\n  blur() {\n    if (!this.disabled) {\n      this.searchbar.blur();\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  onSearchBarBlur() {\n    if (!this.isFocused) {\n      return;\n    }\n\n    this.isFocused = false;\n\n    if (hasObservers(this.onBlur) || hasObservers(this.filterChange) || hasObservers(this.close) || isUntouched(this.hostElement.nativeElement)) {\n      this._zone.run(() => {\n        this.closePopup();\n\n        if (!(this.isOpen && this.allowCustom)) {\n          this.clearFilter();\n        }\n\n        this.onBlur.emit();\n        this.onTouchedCallback();\n      });\n    } else {\n      if (!this.allowCustom) {\n        this.clearFilter();\n      }\n\n      this.closePopup();\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  wrapperMousedown(event) {\n    const inputElement = this.searchbar.input.nativeElement;\n\n    if (event.button === 0) {\n      if (this.isFocused && this.isOpen && event.target === inputElement) {\n        return;\n      }\n\n      if (!this.touchEnabled || this.touchEnabled && event.target.tagName !== 'SPAN') {\n        this.searchbar.focus();\n      }\n\n      this.togglePopup(!this.isOpen);\n      event.preventDefault();\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  onMouseDown(event) {\n    event.preventDefault();\n  }\n  /**\n   * @hidden\n   */\n\n\n  onResize() {\n    if (this._open) {\n      const popupWrapper = this.popupRef.popupElement;\n      const {\n        min,\n        max\n      } = this.width;\n      popupWrapper.style.minWidth = min;\n      popupWrapper.style.width = max;\n    }\n  }\n\n  get appendTo() {\n    const {\n      appendTo\n    } = this.popupSettings;\n\n    if (!appendTo || appendTo === 'root') {\n      return undefined;\n    }\n\n    return appendTo === 'component' ? this.container : appendTo;\n  }\n  /**\n   * Sets the data of the MultiSelect.\n   *\n   * > The data has to be provided in an array-like list of items.\n   */\n\n\n  set data(data) {\n    this.dataService.data = data || [];\n\n    if (this.virtual) {\n      this.virtual.skip = 0;\n    }\n\n    if (this.initialized) {\n      this.setState(this.value);\n    }\n  }\n\n  get data() {\n    const virtual = this.virtual;\n\n    if (virtual) {\n      const start = virtual.skip || 0;\n      const end = start + virtual.pageSize; //Use length instead of itemsCount because of grouping\n\n      virtual.total = this.dataService.data.length;\n      return this.dataService.data.slice(start, end);\n    }\n\n    return this.dataService.data;\n  }\n  /**\n   * Sets the value of the MultiSelect. It can be either of the primitive (string, numbers) or of the complex (objects) type.\n   * To define the type, use the `valuePrimitive` option.\n   *\n   * > All selected values which are not present in the source are ignored.\n   */\n\n\n  set value(values) {\n    this._value = values ? values : [];\n\n    if (!this.differ && this.value) {\n      this.differ = this.differs.find(this.value).create();\n    }\n\n    this.valueChangeDetected = true;\n\n    if (this.initialized) {\n      this.setState(this.value);\n    }\n  }\n\n  get value() {\n    return this._value;\n  }\n  /**\n   * @hidden\n   */\n\n\n  set tabIndex(tabIndex) {\n    this.tabindex = tabIndex;\n  }\n\n  get tabIndex() {\n    return this.tabindex;\n  }\n  /**\n   * The hint which is displayed when the component is empty.\n   * When the values are selected, it disappears.\n   */\n\n\n  set placeholder(text) {\n    this._placeholder = text || '';\n  }\n\n  get placeholder() {\n    return this.selectedDataItems.length ? '' : this._placeholder;\n  }\n  /**\n   * Defines a Boolean function that is executed for each data item in the component\n   * ([see examples]({% slug disableditems_multiselect %})). Determines whether the item will be disabled.\n   */\n\n\n  set itemDisabled(fn) {\n    if (typeof fn !== 'function') {\n      throw new Error(`itemDisabled must be a function, but received ${JSON.stringify(fn)}.`);\n    }\n\n    this.disabledItemsService.itemDisabled = fn;\n  }\n  /**\n   * Specifies whether checkboxes will be rendered before each item in the popup list.\n   */\n\n\n  set checkboxes(settings) {\n    this._checkboxes = normalizeCheckboxesSettings(settings);\n  }\n\n  get checkboxes() {\n    return this._checkboxes;\n  }\n  /**\n   * Enables the [virtualization]({% slug virtualization_multiselect %}) functionality.\n   */\n\n\n  set virtual(settings) {\n    this._virtualSettings = normalizeVirtualizationSettings(settings);\n  }\n\n  get virtual() {\n    return this._virtualSettings;\n  }\n  /**\n   * Configures the popup of the MultiSelect.\n   *\n   * The available options are:\n   * - `animate: Boolean`&mdash;Controls the popup animation. By default, the open and close animations are enabled.\n   * - `width: Number | String`&mdash;Sets the width of the popup container. By default, the width of the host element is used. If set to `auto`, the component automatically adjusts the width of the popup and no item labels are wrapped. The `auto` mode is not supported when virtual scrolling is enabled.\n   * - `height: Number`&mdash;Sets the height of the popup container.\n   * - `popupClass: String`&mdash;Specifies a list of CSS classes that are used to style the popup.\n   * - `appendTo: \"root\" | \"component\" | ViewContainerRef`&mdash;Specifies the component to which the popup will be appended.\n   */\n\n\n  set popupSettings(settings) {\n    this._popupSettings = Object.assign({\n      animate: true\n    }, settings);\n  }\n\n  get popupSettings() {\n    return this._popupSettings;\n  }\n  /**\n   * Specifies the type of the selected value.\n   * If set to `true`, the selected value has to be of the primitive type\n   * ([more information and example]({% slug valuebinding_multiselect %}#toc-primitive-values-from-object-fields)).\n   */\n\n\n  set valuePrimitive(isPrimitive) {\n    this._valuePrimitive = isPrimitive;\n  }\n\n  get valuePrimitive() {\n    if (!isPresent(this._valuePrimitive)) {\n      return !isPresent(this.valueField);\n    }\n\n    return this._valuePrimitive;\n  }\n\n  get dir() {\n    return this.direction;\n  }\n\n  get disabledClass() {\n    return this.disabled;\n  }\n\n  get listContainerClasses() {\n    const containerClasses = ['k-list-container', 'k-reset'];\n\n    if (this.popupSettings.popupClass) {\n      containerClasses.push(this.popupSettings.popupClass);\n    }\n\n    return containerClasses;\n  }\n\n  get width() {\n    let wrapperOffsetWidth = 0;\n\n    if (isDocumentAvailable()) {\n      wrapperOffsetWidth = this.wrapper.nativeElement.offsetWidth;\n    }\n\n    const width = this.popupSettings.width || wrapperOffsetWidth;\n    const minWidth = isNaN(wrapperOffsetWidth) ? wrapperOffsetWidth : `${wrapperOffsetWidth}px`;\n    const maxWidth = isNaN(width) ? width : `${width}px`;\n    return {\n      min: minWidth,\n      max: maxWidth\n    };\n  }\n\n  get height() {\n    const popupHeight = this.popupSettings.height;\n    return isPresent(popupHeight) ? `${popupHeight}px` : 'auto';\n  }\n\n  get activeDescendant() {\n    const focusedTagIndex = this.focusedTagIndex;\n    const focusedListIndex = this.selectionService.focused;\n    let prefix;\n    let item;\n\n    if (isPresent(focusedTagIndex) && !this.isOpen) {\n      item = this.tags[focusedTagIndex];\n      prefix = this.tagPrefix;\n    } else if (isPresent(focusedListIndex) && focusedListIndex !== -1 && this.isOpen) {\n      item = this.dataService.itemAt(focusedListIndex);\n      prefix = this.optionPrefix;\n    } else {\n      return null;\n    }\n\n    return prefix + \"-\" + getter$1(item, this.valueField);\n  }\n\n  get noDataLabel() {\n    if (this.dataService.itemsCount === 0) {\n      return this.noDataText;\n    }\n  }\n\n  get clearTitle() {\n    return this.localization.get('clearTitle');\n  }\n\n  get clearButtonVisiblity() {\n    if (this.touchEnabled) {\n      return 'visible';\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  verifySettings() {\n    if (!isDevMode() || this.value.length === 0) {\n      return;\n    }\n\n    if (!isArray(this.value)) {\n      throw new Error(MultiselectMessages.array);\n    }\n\n    if (this.valuePrimitive === true && isObjectArray(this.value)) {\n      throw new Error(MultiselectMessages.primitive);\n    }\n\n    if (this.valuePrimitive === false && !isObjectArray(this.value)) {\n      throw new Error(MultiselectMessages.object);\n    }\n\n    const valueOrText = !isPresent(this.valueField) !== !isPresent(this.textField);\n\n    if (valueOrText) {\n      throw new Error(MultiselectMessages.textAndValue);\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  change(event) {\n    const isCustomItem = (isPresent(event.added) || isPresent(event.removed)) && (event.added === -1 || event.removed === -1);\n\n    if (isCustomItem) {\n      this.addCustomValue(this.text);\n      return; // The change is emited asynchronosly.\n    } // Existing items.\n\n\n    if (isPresent(event.added)) {\n      const dataItem = this.dataService.itemAt(event.added);\n      const newItem = this.valuePrimitive && isPresent(dataItem) && isPresent(dataItem[this.valueField]) ? dataItem[this.valueField] : dataItem;\n      this.value = [...this.value, newItem];\n    }\n\n    if (isPresent(event.removed)) {\n      const dataItem = this.dataService.itemAt(event.removed);\n\n      const filter$$1 = item => getter$1(item, this.valueField) !== getter$1(dataItem, this.valueField);\n\n      this.value = this.value.filter(filter$$1);\n      this.selectionService.focused = event.removed;\n      this.cdr.detectChanges();\n    }\n\n    this.emitValueChange();\n  }\n  /**\n   * @hidden\n   */\n\n\n  setState(value) {\n    let data = this.dataService.data;\n\n    if (this.dataService.grouped) {\n      data = data.filter(item => !item.header).map(item => item.value);\n    }\n\n    const selection = selectedIndices(this.value, data, this.valueField);\n    this.selectionService.resetSelection(selection);\n\n    if (this.disabledItemsService.isIndexDisabled(this.selectionService.focused)) {\n      this.selectionService.focused = this.firstFocusableIndex(0);\n    }\n\n    if (this.isOpen && this.selectionService.focused === undefined) {\n      if (this.dataService.itemsCount > 0) {\n        this.selectionService.focused = this.firstFocusableIndex(0);\n      } else if (this.allowCustom) {\n        this.selectionService.focused = -1;\n      }\n    }\n\n    if (this.valuePrimitive && !this.valueField) {\n      this.selectedDataItems = value.slice();\n    }\n\n    if (isObjectArray(value) || this.valuePrimitive && this.valueField) {\n      this.selectedDataItems = resolveAllValues(value, data, this.valueField);\n    }\n\n    if (this.selectedDataItems.length < value.length) {\n      this.selectedDataItems = value.map(current => {\n        const dataItem = this.selectedDataItems.find(item => getter$1(item, this.valueField) === getter$1(current, this.valueField));\n        return isPresent(dataItem) ? dataItem : this.resolveDataItemFromTags(current);\n      }).filter(dataItem => isPresent(dataItem));\n    }\n\n    this.tags = this.tagMapper(this.selectedDataItems.slice(0));\n    this.disabledIndices = this.disabledItemsMapper();\n    this.cdr.markForCheck();\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleFilter(text) {\n    this.text = text;\n\n    if (text && !this.isOpen) {\n      this.openPopup();\n    }\n\n    if (this.filterable) {\n      this.filterChange.emit(text);\n    } else {\n      this.searchTextAndFocus(text);\n    }\n\n    this.searchbar.setInputSize();\n  }\n  /**\n   * @hidden\n   */\n\n\n  pageChange(event) {\n    const virtual = this.virtual;\n    virtual.skip = event.skip;\n  }\n  /**\n   * @hidden\n   */\n\n\n  clearFilter() {\n    if (this.filterable && this.text) {\n      this.filterChange.emit(\"\");\n    }\n\n    this.text = \"\";\n    /* Clearing the value from the input as the setInputSize calculation will be incorrect otherwise.\n     Calling cdr.detectChanges to clear the input value as a result of property binding\n     causes JAWS to read outdated tag values in IE upon tag selection for some reason. */\n\n    this.searchbar.input.nativeElement.value = \"\";\n    this.searchbar.setInputSize();\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleNavigate(event) {\n    const navigateInput = this.text && event.keyCode !== Keys.ArrowDown && event.keyCode !== Keys.ArrowUp;\n    const selectValue = this.text && event.keyCode === Keys.Enter || event.keyCode === Keys.Escape;\n    const deleteTag = !this.text && event.keyCode === Keys.Backspace && this.tags.length > 0;\n\n    if (deleteTag) {\n      this.handleBackspace();\n      return;\n    }\n\n    if (this.disabled || navigateInput && !selectValue) {\n      return;\n    }\n\n    const eventData = event;\n    const focused = isNaN(this.selectionService.focused) ? -1 : this.selectionService.focused;\n    const action = this.navigationService.process({\n      current: focused,\n      max: this.dataService.itemsCount - 1,\n      min: this.allowCustom && this.text ? -1 : 0,\n      open: this.isOpen,\n      originalEvent: eventData\n    });\n\n    if (action !== NavigationAction.Undefined && (action === NavigationAction.Enter && this.isOpen || action !== NavigationAction.Enter)) {\n      event.preventDefault();\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleRemoveTag({\n    tag\n  }) {\n    const eventArgs = new RemoveTagEvent(tag);\n\n    if (this.disabled || this.readonly) {\n      return;\n    }\n\n    this.focus();\n    this.removeTag.emit(eventArgs);\n\n    if (eventArgs.isDefaultPrevented()) {\n      return;\n    }\n\n    if (tag instanceof Array) {\n      this.removeGroupTag(tag);\n    } else {\n      this.removeSingleTag(tag);\n    }\n\n    this.cdr.detectChanges();\n  }\n  /**\n   * @hidden\n   */\n\n\n  clearAll(event) {\n    event.stopImmediatePropagation();\n    event.preventDefault();\n    this.focus();\n    this.clearFilter();\n    const selected = this.selectionService.selected;\n    this.value = this.value.filter((_item, index) => this.disabledItemsService.isIndexDisabled(selected[index]));\n    this.emitValueChange();\n  }\n  /**\n   * @hidden\n   */\n\n\n  addCustomValue(text) {\n    this.customValueSubject.next(text);\n  }\n\n  ngAfterContentChecked() {\n    this.verifySettings();\n  }\n\n  ngDoCheck() {\n    const valueChanges = this.differ && this.differ.diff(this.value);\n\n    if (valueChanges && !this.valueChangeDetected) {\n      this.setState(this.value);\n    }\n\n    this.valueChangeDetected = false;\n  }\n\n  ngOnInit() {\n    this.renderer.removeAttribute(this.hostElement.nativeElement, \"tabindex\");\n    this.createCustomValueStream();\n    this.localizationChangeSubscription = this.localization.changes.subscribe(({\n      rtl\n    }) => {\n      this.direction = rtl ? 'rtl' : 'ltr';\n      this.setMessages();\n    });\n    this.setMessages();\n    this.setState(this.value);\n    this.initialized = true;\n  }\n\n  ngOnChanges(changes) {\n    const virtual = this.virtual;\n    const requestInitialData = virtual && changes.data && changes.data.isFirstChange();\n\n    if (requestInitialData) {\n      this.pageChange({\n        skip: 0,\n        take: virtual.pageSize\n      });\n    }\n\n    if (isChanged('valueNormalizer', changes)) {\n      this.createCustomValueStream();\n    }\n\n    if (anyChanged(['textField', 'valueField', 'valuePrimitive'], changes)) {\n      this.setState(this.value);\n    }\n  }\n\n  ngAfterViewInit() {\n    this.searchbar.setInputSize();\n  }\n\n  ngOnDestroy() {\n    this._toggle(false);\n\n    this.unsubscribeEvents();\n    clearTimeout(this.messagesTimeout);\n  }\n  /**\n   * Toggles the visibility of the popup\n   * ([see example]({% slug openstate_multiselect %}#toc-setting-the-initially-opened-component)).\n   * If you use the `toggle` method to open or close the popup, the respective `open` and `close` events will not be fired.\n   *\n   * @param open - The state of the popup.\n   */\n\n\n  toggle(open) {\n    // The Promise is required for opening the popup on load.\n    // Otherwise, the \"Expression has changed...\" type error will be thrown.\n    Promise.resolve(null).then(() => {\n      const shouldOpen = isPresent(open) ? open : !this._open;\n\n      this._toggle(shouldOpen);\n\n      this.cdr.markForCheck();\n    });\n  }\n  /**\n   * Returns the current open state of the popup.\n   */\n\n\n  get isOpen() {\n    return this._open;\n  }\n  /**\n   * Resets the value of the MultiSelect.\n   * If you use the `reset` method to clear the value of the component,\n   * the model will not update automatically and the `selectionChange` and `valueChange` events will not be fired.\n   */\n\n\n  reset() {\n    this.text = \"\";\n    this.value = [];\n  } // NG MODEL BINDINGS\n\n  /**\n   * @hidden\n   */\n\n\n  writeValue(value) {\n    this.value = value || [];\n  }\n  /**\n   * @hidden\n   */\n\n\n  registerOnChange(fn) {\n    this.onChangeCallback = fn;\n  }\n  /**\n   * @hidden\n   */\n\n\n  registerOnTouched(fn) {\n    this.onTouchedCallback = fn;\n  }\n  /**\n   * @hidden\n   */\n\n\n  setDisabledState(isDisabled) {\n    this.disabled = isDisabled;\n  }\n  /**\n   * @hidden\n   */\n\n\n  onTagMapperChange() {\n    this.tags = this.tagMapper(this.selectedDataItems.slice(0));\n    this.cdr.markForCheck();\n  }\n\n  set isFocused(isFocused) {\n    this.renderer[isFocused ? 'addClass' : 'removeClass'](this.hostElement.nativeElement, 'k-state-focused');\n    this._isFocused = isFocused;\n  }\n\n  get isFocused() {\n    return this._isFocused;\n  }\n\n  subscribeEvents() {\n    if (!isDocumentAvailable()) {\n      return;\n    }\n\n    const isOpen = () => this.isOpen;\n\n    const isClosed = () => !this.isOpen;\n\n    const isTagFocused = () => !this.isOpen && this.focusedTagIndex !== undefined;\n\n    [this.selectionService.onChange.subscribe(this.handleItemChange.bind(this)), this.navigationService.esc.subscribe(this.closePopup.bind(this)), this.navigationService.enter.pipe(filter(isOpen)).subscribe(this.handleEnter.bind(this)), this.navigationService.open.subscribe(this.openPopup.bind(this)), this.navigationService.close.subscribe(this.handleClose.bind(this)), this.navigationService.up.pipe(filter(isOpen)).subscribe(event => this.handleUp(event.index)), this.navigationService.home.pipe(filter(() => isClosed)).subscribe(this.handleHome.bind(this)), this.navigationService.end.pipe(filter(() => isClosed)).subscribe(this.handleEnd.bind(this)), this.navigationService.backspace.pipe(filter(isTagFocused)).subscribe(this.handleBackspace.bind(this)), this.navigationService.delete.pipe(filter(isTagFocused)).subscribe(this.handleDelete.bind(this)), this.navigationService.left.subscribe(this.direction === 'rtl' ? this.handleRightKey.bind(this) : this.handleLeftKey.bind(this)), this.navigationService.right.subscribe(this.direction === 'rtl' ? this.handleLeftKey.bind(this) : this.handleRightKey.bind(this)), this.navigationService.down.subscribe(event => this.handleDownKey(event.index))].forEach(s => this.observableSubscriptions.add(s));\n  }\n\n  subscribeTouchEvents() {\n    if (!isDocumentAvailable() || !this.touchEnabled) {\n      return;\n    }\n\n    this._zone.runOutsideAngular(() => // Roll up MultiSelect on iOS when tapped outside\n    this.touchstartDisposeHandler = this.renderer.listen(document, 'touchstart', e => {\n      const target = e.target;\n\n      if ((this.isFocused || this.isOpen) && !inDropDown(this.hostElement, target, this.popupRef)) {\n        this._zone.run(() => {\n          this.blur();\n\n          if (this.isOpen) {\n            this.togglePopup(false);\n          }\n        });\n      }\n    }));\n  }\n\n  unsubscribeEvents() {\n    if (!isDocumentAvailable()) {\n      return;\n    }\n\n    this.observableSubscriptions.unsubscribe();\n\n    if (this.customValueSubscription) {\n      this.customValueSubscription.unsubscribe();\n    }\n\n    if (this.localizationChangeSubscription) {\n      this.localizationChangeSubscription.unsubscribe();\n    }\n\n    if (this.touchstartDisposeHandler) {\n      this.touchstartDisposeHandler();\n    }\n  }\n\n  removeGroupTag(dataItems) {\n    let data = this.dataService.data;\n\n    if (this.dataService.grouped) {\n      data = data.filter(item => !item.header).map(item => item.value);\n    }\n\n    const dataItemValues = new Set(dataItems.map(item => getter$1(item, this.valueField)));\n    this.value = this.value.filter(value => {\n      const index = selectedIndices([value], data, this.valueField)[0];\n      const isDataItemDisabled = this.disabledItemsService.isIndexDisabled(index);\n      return !dataItemValues.has(getter$1(value, this.valueField)) || isDataItemDisabled;\n    });\n    this.emitValueChange();\n  }\n\n  removeSingleTag(dataItem) {\n    let data = this.dataService.data;\n\n    if (this.dataService.grouped) {\n      data = data.filter(item => !item.header).map(item => item.value);\n    }\n\n    const index = selectedIndices([dataItem], data, this.valueField)[0];\n\n    if (this.disabledItemsService.isIndexDisabled(index)) {\n      return;\n    }\n\n    if (isNumber(index)) {\n      this.selectionService.unselect(index);\n      this.selectionService.focused = index;\n      this.togglePopup(false);\n    } else {\n      // the deleted item is not present in the source\n      const filter$$1 = item => getter$1(item, this.valueField) !== getter$1(dataItem, this.valueField);\n\n      this.value = this.value.filter(filter$$1);\n      this.emitValueChange();\n    }\n  }\n  /**\n   * @hidden\n   *\n   * Determines which of the provided tags should be disabled and stores their position indices\n   */\n\n\n  disabledItemsMapper() {\n    const {\n      selected\n    } = this.selectionService;\n    return new Set(this.selectedDataItems.reduce((indices, _item, index) => {\n      if (this.disabledItemsService.isIndexDisabled(selected[index])) {\n        indices.push(index);\n      }\n\n      return indices;\n    }, []));\n  }\n\n  createCustomValueStream() {\n    if (this.customValueSubscription) {\n      this.customValueSubscription.unsubscribe();\n    }\n\n    this.customValueSubscription = this.customValueSubject.pipe(tap(() => {\n      this.loading = true;\n      this.disabled = true;\n      this.cdr.detectChanges();\n    }), this.valueNormalizer, catchError(() => {\n      this.loading = false;\n      this.disabled = false;\n\n      if (this.autoClose) {\n        this.togglePopup(false);\n      }\n\n      if (this.autoClose || !this.filterable) {\n        this.clearFilter();\n      }\n\n      this.nextTick(() => {\n        this.searchbar.focus();\n      });\n      this.createCustomValueStream();\n      return of(null);\n    })).subscribe(normalizedValue => {\n      this.loading = false;\n      this.disabled = false;\n\n      if (isPresent(normalizedValue)) {\n        // if valueNormalizer returns `null` or `undefined` custom value is discarded\n        const newValue = this.valuePrimitive ? getter$1(normalizedValue, this.valueField) : normalizedValue;\n        const itemIndex = this.dataService.indexOf(newValue);\n        const customItem = itemIndex === -1;\n\n        if (this.value.indexOf(newValue) === -1) {\n          this.tags = this.tagMapper([...this.selectedDataItems, normalizedValue]);\n\n          if (!customItem) {\n            this.selectionService.add(itemIndex);\n          } else {\n            this.value = [...this.value, newValue];\n          }\n        } else {\n          if (!customItem && this.selectionService.isSelected(itemIndex)) {\n            this.selectionService.unselect(itemIndex);\n            this.selectionService.focused = itemIndex;\n          } else {\n            this.value = this.value.filter(item => getter$1(item, this.valueField) !== newValue);\n          }\n        }\n\n        this.emitValueChange();\n      }\n\n      if (this.autoClose) {\n        this.togglePopup(false);\n      }\n\n      if (this.autoClose || !this.filterable) {\n        this.clearFilter();\n      }\n\n      this.nextTick(() => {\n        this.searchbar.focus();\n      });\n    });\n  }\n\n  handleItemChange(event) {\n    this.change(event);\n\n    if (this.autoClose) {\n      this.togglePopup(false);\n    }\n\n    if (this.autoClose || !this.filterable) {\n      this.clearFilter();\n    }\n  }\n\n  handleEnter(event) {\n    const service = this.selectionService;\n    const focusedIndex = this.selectionService.focused;\n\n    if (this.isOpen) {\n      event.originalEvent.preventDefault();\n    }\n\n    if (focusedIndex === -1) {\n      if (this.allowCustom && this.text) {\n        this.addCustomValue(this.text);\n      }\n\n      return; // Clear filter & close are done at customValueSubscription due to race conditions.\n    }\n\n    if (service.isSelected(focusedIndex)) {\n      service.unselect(focusedIndex);\n      service.focused = focusedIndex;\n    } else {\n      service.add(focusedIndex);\n    }\n\n    if (this.autoClose) {\n      this.togglePopup(false);\n    }\n\n    if (this.autoClose || !this.filterable) {\n      this.clearFilter();\n    }\n  }\n\n  handleClose() {\n    this.closePopup();\n    this.searchbar.focus();\n  }\n\n  handleEnd() {\n    this.focusedTagIndex = this.tags.length - 1;\n  }\n\n  handleHome() {\n    this.focusedTagIndex = 0;\n  }\n\n  handleUp(index) {\n    this.selectionService.focused = index;\n  }\n\n  handleBackspace() {\n    if (this.focusedTagIndex !== undefined) {\n      this.handleDelete();\n    } else {\n      this.handleRemoveTag({\n        tag: this.tags[this.tags.length - 1]\n      });\n      this.searchbar.focus();\n    }\n  }\n\n  handleDelete() {\n    this.handleRemoveTag({\n      tag: this.tags[this.focusedTagIndex]\n    });\n\n    if (this.focusedTagIndex === this.tags.length) {\n      this.focusedTagIndex = undefined;\n    }\n  }\n\n  handleLeftKey() {\n    if (this.focusedTagIndex === undefined || this.focusedTagIndex < 0) {\n      this.focusedTagIndex = this.tags.length - 1;\n    } else if (this.focusedTagIndex !== 0) {\n      this.focusedTagIndex--;\n    }\n  }\n\n  handleDownKey(index) {\n    if (this.isOpen) {\n      this.selectionService.focused = index || this.firstFocusableIndex(0);\n    } else {\n      this.openPopup();\n    }\n  }\n\n  handleRightKey() {\n    const last = this.tags.length - 1;\n\n    if (this.focusedTagIndex === last) {\n      this.focusedTagIndex = undefined;\n    } else if (this.focusedTagIndex < last) {\n      this.focusedTagIndex++;\n    }\n  }\n\n  findIndex(text, startsFrom = 0) {\n    let itemText;\n    text = text.toLowerCase();\n    let index = this.dataService.findIndex(item => {\n      if (this.dataService.grouped) {\n        itemText = getter$1(item.value, this.textField);\n      } else {\n        itemText = getter$1(item, this.textField);\n      }\n\n      itemText = !isPresent(itemText) ? \"\" : itemText.toString().toLowerCase();\n      return text && itemText.startsWith(text);\n    }, startsFrom);\n\n    if (this.disabledItemsService.isIndexDisabled(index)) {\n      return index + 1 > this.dataService.itemsCount ? -1 : this.findIndex(text, index + 1);\n    } else {\n      return index;\n    }\n  }\n\n  searchTextAndFocus(text) {\n    const index = this.findIndex(text);\n    this.selectionService.focused = index;\n  }\n\n  closePopup() {\n    this.togglePopup(false);\n    this.focusedTagIndex = undefined;\n  }\n\n  openPopup() {\n    this.togglePopup(true);\n    this.focusedTagIndex = undefined;\n  }\n\n  togglePopup(open) {\n    const isDisabled = this.disabled || this.readonly;\n    const sameState = this.isOpen === open;\n\n    if (isDisabled || sameState) {\n      return;\n    }\n\n    const isDefaultPrevented = this.triggerPopupEvents(open);\n\n    if (!isDefaultPrevented) {\n      this._toggle(open);\n    }\n  }\n\n  triggerPopupEvents(open) {\n    const eventArgs = new PreventableEvent();\n\n    if (open) {\n      this.open.emit(eventArgs);\n    } else {\n      this.close.emit(eventArgs);\n    }\n\n    return eventArgs.isDefaultPrevented();\n  }\n\n  _toggle(open) {\n    this._open = open;\n    this.destroyPopup();\n\n    if (this._open) {\n      this.createPopup();\n    }\n  }\n\n  destroyPopup() {\n    if (this.popupRef) {\n      this.popupRef.popupElement.removeEventListener('mousedown', this.popupMouseDownHandler);\n      this.popupRef.close();\n      this.popupRef = null;\n    }\n  }\n\n  createPopup() {\n    if (this.virtual) {\n      this.virtual.skip = 0;\n    }\n\n    const horizontalAlign = this.direction === \"rtl\" ? \"right\" : \"left\";\n    const anchorPosition = {\n      horizontal: horizontalAlign,\n      vertical: \"bottom\"\n    };\n    const popupPosition = {\n      horizontal: horizontalAlign,\n      vertical: \"top\"\n    };\n    this.popupRef = this.popupService.open({\n      anchor: this.wrapper,\n      anchorAlign: anchorPosition,\n      animate: this.popupSettings.animate,\n      appendTo: this.appendTo,\n      content: this.popupTemplate,\n      popupAlign: popupPosition,\n      popupClass: this.listContainerClasses,\n      positionMode: 'absolute'\n    });\n    const popupWrapper = this.popupRef.popupElement;\n    const {\n      min,\n      max\n    } = this.width;\n    popupWrapper.addEventListener('mousedown', this.popupMouseDownHandler);\n    popupWrapper.style.minWidth = min;\n    popupWrapper.style.width = max;\n    popupWrapper.style.height = this.height;\n    popupWrapper.setAttribute(\"dir\", this.direction);\n    this.popupRef.popupOpen.subscribe(() => {\n      this.cdr.detectChanges();\n      this.optionsList.scrollToItem(this.selectionService.focused);\n      this.opened.emit();\n    });\n    this.popupRef.popupClose.subscribe(() => {\n      this.closed.emit();\n    });\n    this.popupRef.popupAnchorViewportLeave.subscribe(() => {\n      this.togglePopup(false);\n    });\n  }\n\n  emitValueChange() {\n    this.onChangeCallback(this.value);\n    this.valueChange.emit(this.value);\n  }\n\n  resolveDataItemFromTags(value) {\n    if (!(this.tags && this.tags.length && isPresent(value))) {\n      return undefined;\n    } // Flattening the tags array in case of a summary tag occurrence.\n\n\n    const tags = this.tags.reduce((acc, tag) => {\n      const items = isArray(tag) ? tag : [tag];\n      acc.push(...items);\n      return acc;\n    }, []);\n    return tags.find(tag => getter$1(tag, this.valueField) === getter$1(value, this.valueField));\n  }\n\n  firstFocusableIndex(index) {\n    const maxIndex = this.dataService.itemsCount;\n\n    if (this.disabledItemsService.isIndexDisabled(index)) {\n      const nextIndex = index + 1;\n      return nextIndex < maxIndex ? this.firstFocusableIndex(nextIndex) : undefined;\n    } else {\n      return index;\n    }\n  }\n\n  nextTick(f) {\n    this._zone.runOutsideAngular(() => {\n      // Use `setTimeout` instead of a resolved promise\n      // because the latter does not wait long enough.\n      setTimeout(() => this._zone.run(f));\n    });\n  }\n\n  setMessages() {\n    this._zone.runOutsideAngular(() => {\n      clearTimeout(this.messagesTimeout);\n      this.messagesTimeout = setTimeout(() => {\n        this.noDataText = this.localization.get('noDataText');\n        this.cdr.detectChanges();\n      });\n    });\n  }\n\n};\n\nMultiSelectComponent.ɵfac = function MultiSelectComponent_Factory(t) {\n  return new (t || MultiSelectComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc4.PopupService), ɵngcc0.ɵɵdirectiveInject(DataService), ɵngcc0.ɵɵdirectiveInject(SelectionService), ɵngcc0.ɵɵdirectiveInject(NavigationService), ɵngcc0.ɵɵdirectiveInject(DisabledItemsService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.KeyValueDiffers), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(TOUCH_ENABLED, 8));\n};\n\nMultiSelectComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: MultiSelectComponent,\n  selectors: [[\"kendo-multiselect\"]],\n  contentQueries: function MultiSelectComponent_ContentQueries(rf, ctx, dirIndex) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵcontentQuery(dirIndex, ItemTemplateDirective, 5);\n      ɵngcc0.ɵɵcontentQuery(dirIndex, CustomItemTemplateDirective, 5);\n      ɵngcc0.ɵɵcontentQuery(dirIndex, GroupTemplateDirective, 5);\n      ɵngcc0.ɵɵcontentQuery(dirIndex, FixedGroupTemplateDirective, 5);\n      ɵngcc0.ɵɵcontentQuery(dirIndex, HeaderTemplateDirective, 5);\n      ɵngcc0.ɵɵcontentQuery(dirIndex, FooterTemplateDirective, 5);\n      ɵngcc0.ɵɵcontentQuery(dirIndex, TagTemplateDirective, 5);\n      ɵngcc0.ɵɵcontentQuery(dirIndex, GroupTagTemplateDirective, 5);\n      ɵngcc0.ɵɵcontentQuery(dirIndex, NoDataTemplateDirective, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.template = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.customItemTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.groupTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.fixedGroupTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.headerTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.footerTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.tagTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.groupTagTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.noDataTemplate = _t.first);\n    }\n  },\n  viewQuery: function MultiSelectComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵviewQuery(_c11, 7, ViewContainerRef);\n      ɵngcc0.ɵɵviewQuery(SearchBarComponent, 7);\n      ɵngcc0.ɵɵviewQuery(_c12, 7);\n      ɵngcc0.ɵɵviewQuery(_c19, 7);\n      ɵngcc0.ɵɵviewQuery(_c13, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.container = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.searchbar = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.popupTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.wrapper = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.optionsList = _t.first);\n    }\n  },\n  hostVars: 7,\n  hostBindings: function MultiSelectComponent_HostBindings(rf, ctx) {\n    if (rf & 2) {\n      ɵngcc0.ɵɵattribute(\"dir\", ctx.dir);\n      ɵngcc0.ɵɵclassProp(\"k-widget\", ctx.widgetClasses)(\"k-multiselect\", ctx.widgetClasses)(\"k-state-disabled\", ctx.disabledClass);\n    }\n  },\n  inputs: {\n    focusableId: \"focusableId\",\n    autoClose: \"autoClose\",\n    tabindex: \"tabindex\",\n    disabled: \"disabled\",\n    readonly: \"readonly\",\n    filterable: \"filterable\",\n    listHeight: \"listHeight\",\n    clearButton: \"clearButton\",\n    tagMapper: \"tagMapper\",\n    allowCustom: \"allowCustom\",\n    valueNormalizer: \"valueNormalizer\",\n    data: \"data\",\n    value: \"value\",\n    tabIndex: \"tabIndex\",\n    placeholder: \"placeholder\",\n    itemDisabled: \"itemDisabled\",\n    checkboxes: \"checkboxes\",\n    virtual: \"virtual\",\n    popupSettings: \"popupSettings\",\n    valuePrimitive: \"valuePrimitive\",\n    loading: \"loading\",\n    valueField: \"valueField\",\n    textField: \"textField\"\n  },\n  outputs: {\n    filterChange: \"filterChange\",\n    valueChange: \"valueChange\",\n    open: \"open\",\n    opened: \"opened\",\n    close: \"close\",\n    closed: \"closed\",\n    onFocus: \"focus\",\n    onBlur: \"blur\",\n    removeTag: \"removeTag\"\n  },\n  exportAs: [\"kendoMultiSelect\"],\n  features: [ɵngcc0.ɵɵProvidersFeature([MULTISELECT_VALUE_ACCESSOR, DataService, SelectionService, NavigationService, DisabledItemsService, LocalizationService, {\n    provide: L10N_PREFIX,\n    useValue: 'kendo.multiselect'\n  }, {\n    provide: FilterableComponent,\n    useExisting: forwardRef(() => MultiSelectComponent_1)\n  }, {\n    provide: KendoInput,\n    useExisting: forwardRef(() => MultiSelectComponent_1)\n  }]), ɵngcc0.ɵɵNgOnChangesFeature],\n  decls: 13,\n  vars: 24,\n  consts: function () {\n    let i18n_30;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The text displayed in the popup when there are no items\n       * @meaning kendo.multiselect.noDataText\n       */\n      const MSG_EXTERNAL_1450213984397806503$$DIST_FESM2015_INDEX_JS_31 = goog.getMsg(\"NO DATA FOUND\");\n      i18n_30 = MSG_EXTERNAL_1450213984397806503$$DIST_FESM2015_INDEX_JS_31;\n    } else {\n      i18n_30 = $localize`:kendo.multiselect.noDataText|The text displayed in the popup when there are no items␟3cc1323f79a5fe012960578e513f8a35b2af1e96␟1450213984397806503:NO DATA FOUND`;\n    }\n\n    let i18n_32;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The title of the clear button\n       * @meaning kendo.combobox.clearTitle\n       */\n      const MSG_EXTERNAL_2025597431468961462$$DIST_FESM2015_INDEX_JS_33 = goog.getMsg(\"clear\");\n      i18n_32 = MSG_EXTERNAL_2025597431468961462$$DIST_FESM2015_INDEX_JS_33;\n    } else {\n      i18n_32 = $localize`:kendo.combobox.clearTitle|The title of the clear button␟069e8fae80677e3e785861123bef446b3ff41ab4␟2025597431468961462:clear`;\n    }\n\n    return [[\"kendoMultiSelectLocalizedMessages\", \"\", \"noDataText\", i18n_30, \"clearTitle\", i18n_32], [1, \"k-multiselect-wrap\", \"k-floatwrap\", 3, \"mousedown\"], [\"wrapper\", \"\"], [3, \"id\", \"tags\", \"textField\", \"valueField\", \"focused\", \"disabled\", \"template\", \"groupTemplate\", \"tagPrefix\", \"disabledIndices\", \"removeTag\"], [3, \"id\", \"role\", \"tagListId\", \"activeDescendant\", \"noDataLabel\", \"userInput\", \"disabled\", \"readonly\", \"tabIndex\", \"popupOpen\", \"placeholder\", \"onNavigate\", \"valueChange\", \"onBlur\", \"onFocus\"], [\"searchbar\", \"\"], [\"class\", \"k-icon k-clear-value k-i-close\", \"role\", \"button\", \"tabindex\", \"-1\", 3, \"visibility\", \"mousedown\", 4, \"ngIf\"], [\"class\", \"k-icon k-i-loading\", 4, \"ngIf\"], [\"popupTemplate\", \"\"], [3, \"ngIf\"], [\"container\", \"\"], [\"role\", \"button\", \"tabindex\", \"-1\", 1, \"k-icon\", \"k-clear-value\", \"k-i-close\", 3, \"mousedown\"], [1, \"k-icon\", \"k-i-loading\"], [4, \"ngIf\"], [\"class\", \"k-list\", 4, \"ngIf\"], [3, \"id\", \"optionPrefix\", \"data\", \"textField\", \"valueField\", \"height\", \"template\", \"groupTemplate\", \"fixedGroupTemplate\", \"show\", \"multipleSelection\", \"virtual\", \"checkboxes\", \"pageChange\"], [\"optionsList\", \"\"], [\"class\", \"k-nodata\", 4, \"ngIf\"], [3, \"templateContext\"], [1, \"k-list\"], [\"kendoDropDownsSelectable\", \"\", 1, \"k-item\", \"k-custom-item\", 3, \"multipleSelection\", \"index\"], [4, \"ngIf\", \"ngIfElse\"], [\"default_custom_item_template\", \"\"], [1, \"k-icon\", \"k-i-plus\", 2, \"float\", \"right\"], [1, \"k-nodata\"], [3, \"ngIf\", \"templateContext\"], [3, \"resize\"]];\n  },\n  template: function MultiSelectComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵelementContainer(0, 0);\n      ɵngcc0.ɵɵelementStart(1, \"div\", 1, 2);\n      ɵngcc0.ɵɵlistener(\"mousedown\", function MultiSelectComponent_Template_div_mousedown_1_listener($event) {\n        return ctx.wrapperMousedown($event);\n      });\n      ɵngcc0.ɵɵelementStart(3, \"kendo-taglist\", 3);\n      ɵngcc0.ɵɵlistener(\"removeTag\", function MultiSelectComponent_Template_kendo_taglist_removeTag_3_listener($event) {\n        return ctx.handleRemoveTag($event);\n      });\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵelementStart(4, \"kendo-searchbar\", 4, 5);\n      ɵngcc0.ɵɵlistener(\"onNavigate\", function MultiSelectComponent_Template_kendo_searchbar_onNavigate_4_listener($event) {\n        return ctx.handleNavigate($event);\n      })(\"valueChange\", function MultiSelectComponent_Template_kendo_searchbar_valueChange_4_listener($event) {\n        return ctx.handleFilter($event);\n      })(\"onBlur\", function MultiSelectComponent_Template_kendo_searchbar_onBlur_4_listener() {\n        return ctx.onSearchBarBlur();\n      })(\"onFocus\", function MultiSelectComponent_Template_kendo_searchbar_onFocus_4_listener() {\n        return ctx.onSearchBarFocus();\n      });\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵtemplate(6, MultiSelectComponent_span_6_Template, 1, 3, \"span\", 6);\n      ɵngcc0.ɵɵtemplate(7, MultiSelectComponent_span_7_Template, 1, 0, \"span\", 7);\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵtemplate(8, MultiSelectComponent_ng_template_8_Template, 6, 17, \"ng-template\", null, 8, ɵngcc0.ɵɵtemplateRefExtractor);\n      ɵngcc0.ɵɵtemplate(10, MultiSelectComponent_ng_template_10_Template, 1, 0, \"ng-template\", 9);\n      ɵngcc0.ɵɵelementContainer(11, null, 10);\n    }\n\n    if (rf & 2) {\n      ɵngcc0.ɵɵadvance(3);\n      ɵngcc0.ɵɵproperty(\"id\", ctx.tagListId)(\"tags\", ctx.tags)(\"textField\", ctx.textField)(\"valueField\", ctx.valueField)(\"focused\", ctx.focusedTagIndex)(\"disabled\", ctx.disabled)(\"template\", ctx.tagTemplate)(\"groupTemplate\", ctx.groupTagTemplate)(\"tagPrefix\", ctx.tagPrefix)(\"disabledIndices\", ctx.disabledIndices);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"id\", ctx.focusableId)(\"role\", \"listbox\")(\"tagListId\", ctx.tagListId)(\"activeDescendant\", ctx.activeDescendant)(\"noDataLabel\", ctx.noDataLabel)(\"userInput\", ctx.text)(\"disabled\", ctx.disabled)(\"readonly\", ctx.readonly)(\"tabIndex\", ctx.tabIndex)(\"popupOpen\", ctx.isOpen)(\"placeholder\", ctx.placeholder);\n      ɵngcc0.ɵɵadvance(2);\n      ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.loading && !ctx.readonly && ctx.clearButton && ((ctx.tags == null ? null : ctx.tags.length) || (ctx.text == null ? null : ctx.text.length)));\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngIf\", ctx.loading);\n      ɵngcc0.ɵɵadvance(3);\n      ɵngcc0.ɵɵproperty(\"ngIf\", ctx.isOpen);\n    }\n  },\n  directives: function () {\n    return [LocalizedMessagesDirective, TagListComponent, SearchBarComponent, ɵngcc3.NgIf, ListComponent, TemplateContextDirective, SelectableDirective, ɵngcc2.ResizeSensorComponent];\n  },\n  encapsulation: 2\n});\n\n__decorate([Input(), __metadata(\"design:type\", String)], MultiSelectComponent.prototype, \"focusableId\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], MultiSelectComponent.prototype, \"autoClose\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], MultiSelectComponent.prototype, \"loading\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Array), __metadata(\"design:paramtypes\", [Array])], MultiSelectComponent.prototype, \"data\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Array), __metadata(\"design:paramtypes\", [Array])], MultiSelectComponent.prototype, \"value\", null);\n\n__decorate([Input(), __metadata(\"design:type\", String)], MultiSelectComponent.prototype, \"valueField\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], MultiSelectComponent.prototype, \"textField\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Number)], MultiSelectComponent.prototype, \"tabindex\", void 0);\n\n__decorate([Input(\"tabIndex\"), __metadata(\"design:type\", Number), __metadata(\"design:paramtypes\", [Number])], MultiSelectComponent.prototype, \"tabIndex\", null);\n\n__decorate([Input(), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [String])], MultiSelectComponent.prototype, \"placeholder\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], MultiSelectComponent.prototype, \"disabled\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Function])], MultiSelectComponent.prototype, \"itemDisabled\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], MultiSelectComponent.prototype, \"checkboxes\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], MultiSelectComponent.prototype, \"readonly\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], MultiSelectComponent.prototype, \"filterable\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], MultiSelectComponent.prototype, \"virtual\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], MultiSelectComponent.prototype, \"popupSettings\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Number)], MultiSelectComponent.prototype, \"listHeight\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [Boolean])], MultiSelectComponent.prototype, \"valuePrimitive\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], MultiSelectComponent.prototype, \"clearButton\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Object)], MultiSelectComponent.prototype, \"tagMapper\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], MultiSelectComponent.prototype, \"allowCustom\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Function)], MultiSelectComponent.prototype, \"valueNormalizer\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], MultiSelectComponent.prototype, \"filterChange\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], MultiSelectComponent.prototype, \"valueChange\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], MultiSelectComponent.prototype, \"open\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], MultiSelectComponent.prototype, \"opened\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], MultiSelectComponent.prototype, \"close\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], MultiSelectComponent.prototype, \"closed\", void 0);\n\n__decorate([Output('focus'), __metadata(\"design:type\", EventEmitter)], MultiSelectComponent.prototype, \"onFocus\", void 0);\n\n__decorate([Output('blur'), __metadata(\"design:type\", EventEmitter)], MultiSelectComponent.prototype, \"onBlur\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], MultiSelectComponent.prototype, \"removeTag\", void 0);\n\n__decorate([ViewChild('container', {\n  read: ViewContainerRef,\n  static: true\n}), __metadata(\"design:type\", ViewContainerRef)], MultiSelectComponent.prototype, \"container\", void 0);\n\n__decorate([ViewChild(SearchBarComponent, {\n  static: true\n}), __metadata(\"design:type\", SearchBarComponent)], MultiSelectComponent.prototype, \"searchbar\", void 0);\n\n__decorate([ViewChild('popupTemplate', {\n  static: true\n}), __metadata(\"design:type\", TemplateRef)], MultiSelectComponent.prototype, \"popupTemplate\", void 0);\n\n__decorate([ViewChild('wrapper', {\n  static: true\n}), __metadata(\"design:type\", ElementRef)], MultiSelectComponent.prototype, \"wrapper\", void 0);\n\n__decorate([ViewChild('optionsList', {\n  static: false\n}), __metadata(\"design:type\", ListComponent)], MultiSelectComponent.prototype, \"optionsList\", void 0);\n\n__decorate([ContentChild(ItemTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", ItemTemplateDirective)], MultiSelectComponent.prototype, \"template\", void 0);\n\n__decorate([ContentChild(CustomItemTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", CustomItemTemplateDirective)], MultiSelectComponent.prototype, \"customItemTemplate\", void 0);\n\n__decorate([ContentChild(GroupTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", GroupTemplateDirective)], MultiSelectComponent.prototype, \"groupTemplate\", void 0);\n\n__decorate([ContentChild(FixedGroupTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", FixedGroupTemplateDirective)], MultiSelectComponent.prototype, \"fixedGroupTemplate\", void 0);\n\n__decorate([ContentChild(HeaderTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", HeaderTemplateDirective)], MultiSelectComponent.prototype, \"headerTemplate\", void 0);\n\n__decorate([ContentChild(FooterTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", FooterTemplateDirective)], MultiSelectComponent.prototype, \"footerTemplate\", void 0);\n\n__decorate([ContentChild(TagTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", TagTemplateDirective)], MultiSelectComponent.prototype, \"tagTemplate\", void 0);\n\n__decorate([ContentChild(GroupTagTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", GroupTagTemplateDirective)], MultiSelectComponent.prototype, \"groupTagTemplate\", void 0);\n\n__decorate([ContentChild(NoDataTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", NoDataTemplateDirective)], MultiSelectComponent.prototype, \"noDataTemplate\", void 0);\n\n__decorate([HostBinding('class.k-widget'), HostBinding('class.k-multiselect'), __metadata(\"design:type\", Boolean)], MultiSelectComponent.prototype, \"widgetClasses\", void 0);\n\n__decorate([HostBinding('attr.dir'), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [])], MultiSelectComponent.prototype, \"dir\", null);\n\n__decorate([HostBinding('class.k-state-disabled'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], MultiSelectComponent.prototype, \"disabledClass\", null);\n\nMultiSelectComponent = MultiSelectComponent_1 = __decorate([__param(11, Optional()), __param(11, Inject(TOUCH_ENABLED)), __metadata(\"design:paramtypes\", [LocalizationService, PopupService, DataService, SelectionService, NavigationService, DisabledItemsService, ChangeDetectorRef, KeyValueDiffers, Renderer2, ElementRef, NgZone, Boolean])], MultiSelectComponent);\n/**\n * Renders the column cell content of the MultiColumnComboBox. To define a column cell template, nest an `<ng-template>` tag\n * with the `kendoMultiColumnComboBoxColumnCellTemplate` directive inside the [`<kendo-combobox-column>`]({% slug api_dropdowns_comboboxcolumncomponent %}) tag\n * ([see example]({% slug templates_multicolumncombobox %})).\n *\n * The current [`column`]({% slug api_dropdowns_comboboxcolumncomponent %}) and data item are available as context variables:\n *\n * - `let-dataItem=\"dataItem\"` (`any`) - The current data item. Also available as implicit context variable.\n * - `let-column=\"column\"` ([`ColumnComponent`]({% slug api_dropdowns_comboboxcolumncomponent %})) - The current column configuration obejct.\n */\n\nlet ColumnCellTemplateDirective = /*#__PURE__*/(() => {\n  let ColumnCellTemplateDirective = class ColumnCellTemplateDirective {\n    constructor(templateRef) {\n      this.templateRef = templateRef;\n    }\n\n  };\n\n  ColumnCellTemplateDirective.ɵfac = function ColumnCellTemplateDirective_Factory(t) {\n    return new (t || ColumnCellTemplateDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef));\n  };\n\n  ColumnCellTemplateDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: ColumnCellTemplateDirective,\n    selectors: [[\"\", \"kendoMultiColumnComboBoxColumnCellTemplate\", \"\"]]\n  });\n  ColumnCellTemplateDirective = __decorate([__metadata(\"design:paramtypes\", [TemplateRef])], ColumnCellTemplateDirective);\n  /**\n   * Renders the column header content of the MultiColumnComboBox. To define a column header template, nest an `<ng-template>` tag\n   * with the `kendoMultiColumnComboBoxColumnHeaderTemplate` directive inside the [`<kendo-combobox-column>`]({% slug api_dropdowns_comboboxcolumncomponent %}) tag\n   * ([see example]({% slug templates_multicolumncombobox %})).\n   *\n   * The current [`column`]({% slug api_dropdowns_comboboxcolumncomponent %}) is available as implicit context variable.\n   */\n\n  return ColumnCellTemplateDirective;\n})();\nlet ColumnHeaderTemplateDirective = /*#__PURE__*/(() => {\n  let ColumnHeaderTemplateDirective = class ColumnHeaderTemplateDirective {\n    constructor(templateRef) {\n      this.templateRef = templateRef;\n    }\n\n  };\n\n  ColumnHeaderTemplateDirective.ɵfac = function ColumnHeaderTemplateDirective_Factory(t) {\n    return new (t || ColumnHeaderTemplateDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef));\n  };\n\n  ColumnHeaderTemplateDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: ColumnHeaderTemplateDirective,\n    selectors: [[\"\", \"kendoMultiColumnComboBoxColumnHeaderTemplate\", \"\"]]\n  });\n  ColumnHeaderTemplateDirective = __decorate([__metadata(\"design:paramtypes\", [TemplateRef])], ColumnHeaderTemplateDirective);\n  /**\n   * Represents the column definition of the [MultiColumnComboBox]({% slug overview_multicolumncombobox %})\n   * ([see example]({% slug columns_multicolumncombobox %})).\n   */\n\n  return ColumnHeaderTemplateDirective;\n})();\nlet ComboBoxColumnComponent = /*#__PURE__*/(() => {\n  let ComboBoxColumnComponent = class ComboBoxColumnComponent {\n    /**\n     * Represents the column definition of the [MultiColumnComboBox]({% slug overview_multicolumncombobox %})\n     * ([see example]({% slug columns_multicolumncombobox %})).\n     */\n    constructor() {\n      /**\n       * Sets the visibility of the column.\n       *\n       * @default false\n       */\n      this.hidden = false;\n      /**\n       * @hidden\n       */\n\n      this.matchesMedia = true;\n    }\n\n  };\n\n  ComboBoxColumnComponent.ɵfac = function ComboBoxColumnComponent_Factory(t) {\n    return new (t || ComboBoxColumnComponent)();\n  };\n\n  ComboBoxColumnComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: ComboBoxColumnComponent,\n    selectors: [[\"kendo-combobox-column\"]],\n    contentQueries: function ComboBoxColumnComponent_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, ColumnCellTemplateDirective, 5);\n        ɵngcc0.ɵɵcontentQuery(dirIndex, ColumnHeaderTemplateDirective, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.cellTemplate = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.headerTemplate = _t.first);\n      }\n    },\n    inputs: {\n      hidden: \"hidden\",\n      field: \"field\",\n      title: \"title\",\n      width: \"width\",\n      style: \"style\",\n      headerStyle: \"headerStyle\",\n      class: \"class\",\n      headerClass: \"headerClass\",\n      media: \"media\"\n    },\n    decls: 0,\n    vars: 0,\n    template: function ComboBoxColumnComponent_Template(rf, ctx) {},\n    encapsulation: 2\n  });\n\n  __decorate([ContentChild(ColumnCellTemplateDirective, {\n    static: false\n  }), __metadata(\"design:type\", ColumnCellTemplateDirective)], ComboBoxColumnComponent.prototype, \"cellTemplate\", void 0);\n\n  __decorate([ContentChild(ColumnHeaderTemplateDirective, {\n    static: false\n  }), __metadata(\"design:type\", ColumnHeaderTemplateDirective)], ComboBoxColumnComponent.prototype, \"headerTemplate\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], ComboBoxColumnComponent.prototype, \"field\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], ComboBoxColumnComponent.prototype, \"title\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Number)], ComboBoxColumnComponent.prototype, \"width\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], ComboBoxColumnComponent.prototype, \"hidden\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], ComboBoxColumnComponent.prototype, \"style\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], ComboBoxColumnComponent.prototype, \"headerStyle\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], ComboBoxColumnComponent.prototype, \"class\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], ComboBoxColumnComponent.prototype, \"headerClass\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], ComboBoxColumnComponent.prototype, \"media\", void 0);\n  /**\n   * Persists the intially resolved scrollbar width value.\n   */\n\n\n  return ComboBoxColumnComponent;\n})();\nlet SCROLLBAR_WIDTH;\n/**\n * @hidden\n *\n * Gets the default scrollbar width accoring to the current environment.\n */\n\nconst scrollbarWidth = () => {\n  // calculate scrollbar width only once, then return the memoized value\n  if (isNaN(SCROLLBAR_WIDTH)) {\n    const div = document.createElement('div');\n    div.style.cssText = 'overflow: scroll; overflow-x: hidden; zoom: 1; clear: both; display: block;';\n    div.innerHTML = '&nbsp;';\n    document.body.appendChild(div);\n    SCROLLBAR_WIDTH = div.offsetWidth - div.scrollWidth;\n    document.body.removeChild(div);\n  }\n\n  return SCROLLBAR_WIDTH;\n};\n/**\n * Checks if all columns have a valid user-defined width.\n */\n\n\nconst allColumnsWidthsSet = columns => {\n  if (!isPresent(columns) || columns.length === 0) {\n    return false;\n  }\n\n  return columns.toArray().every(column => !isNaN(column.width) && column.width > 0);\n};\n/**\n * @hidden\n *\n * Calculates the row width according to the passed columns width configuration.\n * Hidden columns and such that don't match the provided media query are ignored.\n * If some of the columns don't have a preset width or have an invalid width value, the function returns `null`.\n */\n\n\nconst getRowWidthFromColumnsMeta = columns => {\n  if (!allColumnsWidthsSet(columns)) {\n    return null;\n  }\n\n  const bordersWidth = 2;\n  const initialRowWidht = scrollbarWidth() + bordersWidth;\n  return columns.reduce((totalWidth, column) => {\n    if (!column.hidden && column.matchesMedia) {\n      totalWidth += parseInt(column.width, 10);\n    }\n\n    return totalWidth;\n  }, initialRowWidht);\n};\n\nvar MultiColumnComboBoxComponent_1;\n/**\n * Represents the [Kendo UI MultiColumnComboBox component for Angular]({% slug overview_multicolumncombobox %}).\n */\n\nlet MultiColumnComboBoxComponent = MultiColumnComboBoxComponent_1 = class MultiColumnComboBoxComponent extends ComboBoxComponent {\n  constructor(localization, popupService, selectionService, navigationService, disabledItemsService, dataService, zone, changeDetector, renderer, hostElement, touchEnabled$$1) {\n    super(localization, popupService, selectionService, navigationService, disabledItemsService, dataService, zone, changeDetector, renderer, hostElement, touchEnabled$$1);\n    /**\n     * @hidden\n     */\n\n    this.hostClasses = true;\n    this.removeWindowResizeListener = noop; // the row height in @progress/kendo-theme-default\n\n    this.defaultVirtualItemHeight = 36; // use a smaller virtual page size as columns with multiple cells can cause poor performance\n\n    this.defaultVirtualPageSize = 30;\n  }\n  /**\n   * @hidden\n   */\n\n\n  set header(header) {\n    // updates the header padding on initial render as the resize senzor doesn't kick in as early\n    this.updateHeaderPadding(header && header.nativeElement);\n  }\n\n  get popupWidth() {\n    const wrapperOffsetWidth = this.wrapper.nativeElement.offsetWidth;\n    const min = `${wrapperOffsetWidth}px`;\n    const width = this.popupSettings.width || getRowWidthFromColumnsMeta(this.columns) || wrapperOffsetWidth;\n    const max = isNaN(width) ? width : `${width}px`;\n    return {\n      min,\n      max\n    };\n  }\n  /**\n   * @hidden\n   */\n\n\n  get listContainerClasses() {\n    return ['k-list-container', 'k-popup', 'k-reset', 'k-group', 'k-dropdowngrid-popup', 'k-popup-flush', 'k-state-border-up'].concat(this.popupSettings.popupClass || []);\n  }\n\n  ngAfterViewInit() {\n    this.updateColumnsMediaState();\n    this.addWindowResizeListener();\n  }\n\n  ngOnDestroy() {\n    super.ngOnDestroy();\n    this.removeWindowResizeListener();\n  }\n  /**\n   * @hidden\n   */\n\n\n  textFrom(dataItem, field) {\n    return getter$1(dataItem, field);\n  }\n  /**\n   * @hidden\n   *\n   * Adds or removes a padding value at the end of the header container equal to the size of the scrollbar.\n   * As when the items container has a scrollbar, the column headers and the cells are misaligned.\n   * When the container has a scrollbar, the padding style is added, and when there is none - it is removed.\n   */\n\n\n  updateHeaderPadding(header) {\n    if (!isPresent(header)) {\n      return;\n    } // the scrollbar is rendered on the left in rtl\n\n\n    const headerPaddingPosition = this.localization.rtl ? 'padding-left' : 'padding-right';\n\n    if (this.optionsList.hasScrollbar() && scrollbarWidth() > 0) {\n      this.renderer.setStyle(header, headerPaddingPosition, `${scrollbarWidth()}px`);\n    } else {\n      this.renderer.removeStyle(header, headerPaddingPosition);\n    }\n  }\n\n  verifySettings() {\n    if (!isDevMode()) {\n      return;\n    }\n\n    if (isPresent(this.data) && this.data.length > 0 && this.data.some(item => !isObject(item))) {\n      throw new Error(MultiColumnComboBoxMessages.data);\n    }\n\n    if (!isPresent(this.valueField) || !isPresent(this.textField)) {\n      throw new Error(MultiColumnComboBoxMessages.textAndValue);\n    }\n\n    super.verifySettings();\n  }\n\n  addWindowResizeListener() {\n    if (!isDocumentAvailable()) {\n      return;\n    }\n\n    this.zone.runOutsideAngular(() => this.removeWindowResizeListener = this.renderer.listen(window, 'resize', this.updateColumnsMediaState.bind(this)));\n  }\n\n  updateColumnsMediaState() {\n    if (!(isPresent(this.columns) && isDocumentAvailable())) {\n      return;\n    }\n\n    this.columns.forEach(column => {\n      const matchesMedia = !column.media || window.matchMedia(column.media).matches;\n\n      if (column.matchesMedia !== matchesMedia) {\n        column.matchesMedia = matchesMedia;\n\n        if (this.isOpen) {\n          // enter the zone only if the popup is actually open\n          // update its width in case it's dependent on the columns' width\n          this.zone.run(() => this.popupRef.popupElement.style.width = this.popupWidth.max);\n        }\n      }\n    });\n  }\n\n};\n\nMultiColumnComboBoxComponent.ɵfac = function MultiColumnComboBoxComponent_Factory(t) {\n  return new (t || MultiColumnComboBoxComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc4.PopupService), ɵngcc0.ɵɵdirectiveInject(SelectionService), ɵngcc0.ɵɵdirectiveInject(NavigationService), ɵngcc0.ɵɵdirectiveInject(DisabledItemsService), ɵngcc0.ɵɵdirectiveInject(DataService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(TOUCH_ENABLED));\n};\n\nMultiColumnComboBoxComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: MultiColumnComboBoxComponent,\n  selectors: [[\"kendo-multicolumncombobox\"]],\n  contentQueries: function MultiColumnComboBoxComponent_ContentQueries(rf, ctx, dirIndex) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵcontentQuery(dirIndex, ComboBoxColumnComponent, 4);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.columns = _t);\n    }\n  },\n  viewQuery: function MultiColumnComboBoxComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵviewQuery(_c34, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.header = _t.first);\n    }\n  },\n  hostVars: 2,\n  hostBindings: function MultiColumnComboBoxComponent_HostBindings(rf, ctx) {\n    if (rf & 2) {\n      ɵngcc0.ɵɵclassProp(\"k-dropdowngrid\", ctx.hostClasses);\n    }\n  },\n  features: [ɵngcc0.ɵɵProvidersFeature([SelectionService, DataService, NavigationService, DisabledItemsService, LocalizationService, {\n    provide: L10N_PREFIX,\n    useValue: 'kendo.multicolumncombobox'\n  }, {\n    multi: true,\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => MultiColumnComboBoxComponent_1)\n  }, {\n    provide: KendoInput,\n    useExisting: forwardRef(() => MultiColumnComboBoxComponent_1)\n  }, {\n    provide: FilterableComponent,\n    useExisting: forwardRef(() => MultiColumnComboBoxComponent_1)\n  }]), ɵngcc0.ɵɵInheritDefinitionFeature],\n  decls: 14,\n  vars: 20,\n  consts: function () {\n    let i18n_35;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The text displayed in the popup when there are no items\n       * @meaning kendo.multicolumncombobox.noDataText\n       */\n      const MSG_EXTERNAL_3227251500690942605$$DIST_FESM2015_INDEX_JS_36 = goog.getMsg(\"NO DATA FOUND\");\n      i18n_35 = MSG_EXTERNAL_3227251500690942605$$DIST_FESM2015_INDEX_JS_36;\n    } else {\n      i18n_35 = $localize`:kendo.multicolumncombobox.noDataText|The text displayed in the popup when there are no items␟23a18095f2c16d40a04251fa2fb15d3927e7a79a␟3227251500690942605:NO DATA FOUND`;\n    }\n\n    let i18n_37;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The title of the clear button\n       * @meaning kendo.multicolumncombobox.clearTitle\n       */\n      const MSG_EXTERNAL_326603149056291198$$DIST_FESM2015_INDEX_JS_38 = goog.getMsg(\"clear\");\n      i18n_37 = MSG_EXTERNAL_326603149056291198$$DIST_FESM2015_INDEX_JS_38;\n    } else {\n      i18n_37 = $localize`:kendo.multicolumncombobox.clearTitle|The title of the clear button␟6b371962a2564e2e50986f7ec238e513b466d553␟326603149056291198:clear`;\n    }\n\n    return [[\"kendoMultiColumnComboBoxLocalizedMessages\", \"\", \"noDataText\", i18n_35, \"clearTitle\", i18n_37], [\"unselectable\", \"on\", 1, \"k-dropdown-wrap\"], [\"wrapper\", \"\"], [3, \"role\", \"id\", \"listId\", \"activeDescendant\", \"noDataLabel\", \"userInput\", \"suggestedText\", \"disabled\", \"readonly\", \"tabIndex\", \"popupOpen\", \"placeholder\", \"onNavigate\", \"valueChange\", \"onBlur\", \"onFocus\"], [\"searchbar\", \"\"], [\"class\", \"k-icon k-clear-value k-i-close\", \"aria-hidden\", \"true\", 3, \"visibility\", \"kendoEventsOutsideAngular\", \"click\", 4, \"ngIf\"], [\"aria-hidden\", \"true\", \"unselectable\", \"on\", 1, \"k-select\", 3, \"kendoEventsOutsideAngular\"], [\"select\", \"\"], [1, \"k-icon\", 3, \"ngClass\"], [\"popupTemplate\", \"\"], [3, \"resize\", 4, \"ngIf\"], [\"container\", \"\"], [\"aria-hidden\", \"true\", 1, \"k-icon\", \"k-clear-value\", \"k-i-close\", 3, \"kendoEventsOutsideAngular\", \"click\"], [4, \"ngIf\"], [1, \"k-grid-header\"], [\"header\", \"\"], [1, \"k-grid-header-wrap\"], [\"role\", \"presentation\"], [4, \"ngFor\", \"ngForOf\"], [\"rowTemplate\", \"\"], [3, \"id\", \"optionPrefix\", \"data\", \"textField\", \"valueField\", \"template\", \"groupTemplate\", \"fixedGroupTemplate\", \"height\", \"show\", \"virtual\", \"listClass\", \"pageChange\", \"listResize\"], [\"optionsList\", \"\"], [\"class\", \"k-nodata\", 4, \"ngIf\"], [3, \"templateContext\"], [3, \"width\", 4, \"ngIf\"], [\"class\", \"k-header\", 3, \"ngStyle\", \"ngClass\", 4, \"ngIf\"], [1, \"k-header\", 3, \"ngStyle\", \"ngClass\"], [\"class\", \"k-cell\", 3, \"ngClass\", \"width\", \"ngStyle\", 4, \"ngIf\"], [1, \"k-cell\", 3, \"ngClass\", \"ngStyle\"], [1, \"k-nodata\"], [3, \"ngIf\", \"templateContext\"], [3, \"ngIf\"], [1, \"k-footer\"], [3, \"resize\"]];\n  },\n  template: function MultiColumnComboBoxComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵelementContainer(0, 0);\n      ɵngcc0.ɵɵelementStart(1, \"span\", 1, 2);\n      ɵngcc0.ɵɵelementStart(3, \"kendo-searchbar\", 3, 4);\n      ɵngcc0.ɵɵlistener(\"onNavigate\", function MultiColumnComboBoxComponent_Template_kendo_searchbar_onNavigate_3_listener($event) {\n        return ctx.handleNavigate($event);\n      })(\"valueChange\", function MultiColumnComboBoxComponent_Template_kendo_searchbar_valueChange_3_listener($event) {\n        return ctx.searchBarChange($event);\n      })(\"onBlur\", function MultiColumnComboBoxComponent_Template_kendo_searchbar_onBlur_3_listener() {\n        return ctx.handleBlur();\n      })(\"onFocus\", function MultiColumnComboBoxComponent_Template_kendo_searchbar_onFocus_3_listener() {\n        return ctx.handleFocus();\n      });\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵtemplate(5, MultiColumnComboBoxComponent_span_5_Template, 1, 6, \"span\", 5);\n      ɵngcc0.ɵɵelementStart(6, \"span\", 6, 7);\n      ɵngcc0.ɵɵelement(8, \"span\", 8);\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵtemplate(9, MultiColumnComboBoxComponent_ng_template_9_Template, 16, 19, \"ng-template\", null, 9, ɵngcc0.ɵɵtemplateRefExtractor);\n      ɵngcc0.ɵɵtemplate(11, MultiColumnComboBoxComponent_kendo_resize_sensor_11_Template, 1, 0, \"kendo-resize-sensor\", 10);\n      ɵngcc0.ɵɵelementContainer(12, null, 11);\n    }\n\n    if (rf & 2) {\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵclassProp(\"k-state-disabled\", ctx.disabled);\n      ɵngcc0.ɵɵadvance(2);\n      ɵngcc0.ɵɵproperty(\"role\", \"combobox\")(\"id\", ctx.focusableId)(\"listId\", ctx.listBoxId)(\"activeDescendant\", ctx.activeDescendant)(\"noDataLabel\", ctx.noDataLabel)(\"userInput\", ctx.text)(\"suggestedText\", ctx.getSuggestion())(\"disabled\", ctx.disabled)(\"readonly\", ctx.readonly)(\"tabIndex\", ctx.tabIndex)(\"popupOpen\", ctx.isOpen)(\"placeholder\", ctx.placeholder);\n      ɵngcc0.ɵɵadvance(2);\n      ɵngcc0.ɵɵproperty(\"ngIf\", ctx.clearButton && !ctx.loading && !ctx.disabled && !ctx.readonly && (ctx.text == null ? null : ctx.text.length));\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"kendoEventsOutsideAngular\", ɵngcc0.ɵɵpureFunction1(18, _c25, ctx.preventEventDefault));\n      ɵngcc0.ɵɵadvance(2);\n      ɵngcc0.ɵɵproperty(\"ngClass\", ctx.buttonClasses);\n      ɵngcc0.ɵɵadvance(3);\n      ɵngcc0.ɵɵproperty(\"ngIf\", ctx.isOpen);\n    }\n  },\n  directives: function () {\n    return [LocalizedMessagesDirective, SearchBarComponent, ɵngcc3.NgIf, ɵngcc2.EventsOutsideAngularDirective, ɵngcc3.NgClass, ɵngcc3.NgForOf, ListComponent, TemplateContextDirective, ɵngcc3.NgStyle, ɵngcc2.ResizeSensorComponent];\n  },\n  encapsulation: 2\n});\n\n__decorate([HostBinding('class.k-dropdowngrid'), __metadata(\"design:type\", Boolean)], MultiColumnComboBoxComponent.prototype, \"hostClasses\", void 0);\n\n__decorate([ContentChildren(ComboBoxColumnComponent), __metadata(\"design:type\", QueryList)], MultiColumnComboBoxComponent.prototype, \"columns\", void 0);\n\n__decorate([ViewChild('header', {\n  static: false\n}), __metadata(\"design:type\", ElementRef), __metadata(\"design:paramtypes\", [ElementRef])], MultiColumnComboBoxComponent.prototype, \"header\", null);\n\nMultiColumnComboBoxComponent = MultiColumnComboBoxComponent_1 = __decorate([__param(10, Inject(TOUCH_ENABLED)), __metadata(\"design:paramtypes\", [LocalizationService, PopupService, SelectionService, NavigationService, DisabledItemsService, DataService, NgZone, ChangeDetectorRef, Renderer2, ElementRef, Boolean])], MultiColumnComboBoxComponent);\n/**\n * Renders the content of each node in the DropDownTree. To define a node template, nest an `<ng-template>` tag\n * with the `kendoDropDownTreeNodeTemplate` directive inside the `<kendo-dropdowntree>` tag.\n *\n * The current data item and hierarchical index are available as context variables:\n *\n * - `let-dataItem` (`any`) - The current data item. Available as implicit context variable.\n * - `let-index=\"index\"` (`string`) - The current item hierarchical index.\n */\n\nlet NodeTemplateDirective = /*#__PURE__*/(() => {\n  let NodeTemplateDirective = class NodeTemplateDirective {\n    constructor(templateRef) {\n      this.templateRef = templateRef;\n    }\n\n  };\n\n  NodeTemplateDirective.ɵfac = function NodeTemplateDirective_Factory(t) {\n    return new (t || NodeTemplateDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef));\n  };\n\n  NodeTemplateDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NodeTemplateDirective,\n    selectors: [[\"\", \"kendoDropDownTreeNodeTemplate\", \"\"], [\"\", \"kendoMultiSelectTreeNodeTemplate\", \"\"]]\n  });\n  NodeTemplateDirective = __decorate([__metadata(\"design:paramtypes\", [TemplateRef])], NodeTemplateDirective);\n  return NodeTemplateDirective;\n})();\nvar DropDownTreeComponent_1;\n/* tslint:disable:member-ordering */\n\nconst DEFAULT_POPUP_SETTINGS = {\n  animate: true\n};\n\nconst hasChildren = () => false;\n\nconst fetchChildren = () => of([]);\n\nconst itemDisabled = () => false;\n\nconst isNodeVisible = () => true;\n/**\n * Represents the [Kendo UI DropDownTree component for Angular]({% slug overview_ddt %}).\n */\n\n\nlet DropDownTreeComponent = DropDownTreeComponent_1 = class DropDownTreeComponent {\n  constructor(popupService, navigationService, renderer, hostElement, _zone, cdr, localization, touchEnabled$$1) {\n    this.popupService = popupService;\n    this.navigationService = navigationService;\n    this.renderer = renderer;\n    this.hostElement = hostElement;\n    this._zone = _zone;\n    this.cdr = cdr;\n    this.localization = localization;\n    this.touchEnabled = touchEnabled$$1;\n    this.hostClasses = true;\n    /**\n     * Fires each time the popup is about to open\n     * ([see example]({% slug openstate_ddt %})).\n     * This event is preventable. If you cancel it, the popup will remain closed.\n     */\n\n    this.open = new EventEmitter();\n    /**\n     * Fires after the popup has been opened.\n     */\n\n    this.opened = new EventEmitter();\n    /**\n     * Fires each time the popup is about to close\n     * ([see example]({% slug openstate_ddt %})).\n     * This event is preventable. If you cancel it, the popup will remain open.\n     */\n\n    this.close = new EventEmitter();\n    /**\n     * Fires after the popup has been closed.\n     */\n\n    this.closed = new EventEmitter();\n    /**\n     * Fires when the user expands a node in the popup TreeView.\n     */\n\n    this.nodeExpand = new EventEmitter();\n    /**\n     * Fires when the user collapses a node in the popup TreeView.\n     */\n\n    this.nodeCollapse = new EventEmitter();\n    /**\n     * Fires each time the user focuses the DropDownTree.\n     */\n\n    this.onFocus = new EventEmitter();\n    /**\n     * Fires each time the DropDownTree gets blurred.\n     */\n\n    this.onBlur = new EventEmitter();\n    /**\n     * Fires each time the value is changed\n     * ([see example]({% slug overview_ddt %}#toc-events)).\n     */\n\n    this.valueChange = new EventEmitter();\n    /**\n     * Fires when the value of the built-in filter input element changes.\n     */\n\n    this.filterChange = new EventEmitter();\n    /**\n     * If set to `true`, renders a button on hovering over the component.\n     * Clicking this button resets the value of the component to `undefined` and triggers the `change` event.\n     */\n\n    this.clearButton = true;\n    /**\n     * A function which determines if a specific node has child nodes.\n     */\n\n    this.hasChildren = hasChildren;\n    /**\n     * A function which provides the child nodes for a given parent node.\n     */\n\n    this.fetchChildren = fetchChildren;\n    /**\n     * The hint which is displayed when the component is empty.\n     */\n\n    this.placeholder = \"\";\n    /**\n     * Sets the height of the options list. By default, `listHeight` is 200px.\n     *\n     * > The `listHeight` property affects only the list of options and not the whole popup container.\n     * > To set the height of the popup container, use `popupSettings.height`.\n     */\n\n    this.listHeight = 200;\n    /**\n     * Sets the disabled state of the component.\n     */\n\n    this.disabled = false;\n    /**\n     * Sets the read-only state of the component.\n     */\n\n    this.readonly = false;\n    /**\n     * Specifies the type of the selected value\n     * ([more information and example]({% slug valuebinding_ddt %}#toc-primitive-values)).\n     * If set to `true`, the selected value has to be of a primitive value.\n     */\n\n    this.valuePrimitive = false;\n    /**\n     * A function that is executed for each data item and determines if a specific item is disabled.\n     */\n\n    this.itemDisabled = itemDisabled;\n    /**\n     * A callback which determines whether a tree node should be rendered as hidden. The utility .k-display-none class is used to hide the nodes.\n     * Useful for custom filtering implementations.\n     */\n\n    this.isNodeVisible = isNodeVisible;\n    /**\n     * Indicates whether the child nodes will be fetched on node expand or will be initially prefetched.\n     * @default true\n     */\n\n    this.loadOnDemand = true;\n    /**\n     * Renders the built-in input element for filtering the DropDownTree.\n     * If set to `true`, the component emits the `filterChange` event, which can be used to [filter the DropDownTree manually]({% slug filtering_ddt %}#toc-manual-filtering).\n     * A built-in filtering implementation is available to use with the [`kendoDropDownTreeHierarchyBinding`]({% slug api_dropdowns_dropdowntreehierarchybindingdirective %}) and [`kendoDropDownTreeFlatBinding`]({% slug api_dropdowns_dropdowntreeflatbindingdirective %}) directives.\n     */\n\n    this.filterable = false;\n    /**\n     * @hidden\n     */\n\n    this.filter = '';\n    /**\n     * @hidden\n     *\n     * Used by the kendo-label and kendo-floatinglabel to access and associate the focusable element with the provided label via aria-labelledby.\n     */\n\n    this.focusableId = `k-${guid()}`;\n    /**\n     * @hidden\n     */\n\n    this.selectedKeys = [];\n    /**\n     * @hidden\n     */\n\n    this.filterStateChange = new EventEmitter();\n    /**\n     * @hidden\n     */\n\n    this.allNodesHidden = false;\n    /**\n     * @hidden\n     *\n     * Used to associate the value label with the wrapper via aria-describedby.\n     */\n\n    this.valueLabelId = `k-${guid()}`;\n    this._popupSettings = DEFAULT_POPUP_SETTINGS;\n    this._tabindex = 0;\n    this._isFocused = false;\n    this.subscriptions = [];\n    this.onTouchedCallback = noop;\n    this.onChangeCallback = noop;\n    this.direction = localization.rtl ? 'rtl' : 'ltr';\n    this.subscribeEvents();\n    this.subscribeTouchEvents();\n  }\n\n  get clearable() {\n    return this.clearButton;\n  }\n\n  set treeview(treeview) {\n    if (treeview) {\n      if (this.isFocused && !this.filterable || this.touchEnabled) {\n        treeview.focus();\n      } // the treeview animations are initially disabled (we don't want expand animations during popup opening)\n      // re-enables the animations for user interaction\n\n\n      treeview.animate = true;\n      this._treeview = treeview;\n    }\n  }\n\n  get treeview() {\n    return this._treeview;\n  }\n  /**\n   * Sets the data of the DropDownTree.\n   *\n   * > The data has to be provided in an array-like list with objects.\n   */\n\n\n  set data(data) {\n    this._nodes = data;\n    this.setState();\n  }\n\n  get data() {\n    return this._nodes;\n  }\n  /**\n   * Sets the value of the DropDownTree.\n   * It can either be of the primitive (string, numbers) or of the complex (objects) type.\n   * To define the type, use the `valuePrimitive` option.\n   *\n   */\n\n\n  set value(newValue) {\n    this._value = newValue;\n    this.setState();\n  }\n\n  get value() {\n    return this._value;\n  }\n  /**\n   * Configures the popup of the DropDownTree.\n   *\n   * The available options are:\n   * - `animate: Boolean`&mdash;Controls the popup animation. By default, the open and close animations are enabled.\n   * - `width: Number | String`&mdash;Sets the width of the popup container. By default, the width of the host element is used. If set to `auto`, the component automatically adjusts the width of the popup and no item labels are wrapped.\n   * - `height: Number`&mdash;Sets the height of the popup container.\n   * - `popupClass: String`&mdash;Specifies a list of CSS classes that are used to style the popup.\n   * - `appendTo: \"root\" | \"component\" | ViewContainerRef`&mdash;Specifies the component to which the popup will be appended.\n   */\n\n\n  set popupSettings(settings) {\n    this._popupSettings = Object.assign({}, DEFAULT_POPUP_SETTINGS, settings);\n  }\n\n  get popupSettings() {\n    return this._popupSettings;\n  }\n  /**\n   * Keeps the current `dataItem` object in order to resolve selection.\n   * Needs to be provided when `value` is bound in and `valuePrimitive` is set to true.\n   */\n\n\n  set dataItem(item) {\n    this._dataItem = item;\n    this.setState();\n  }\n\n  get dataItem() {\n    return this._dataItem ? this._dataItem : this.value;\n  }\n  /**\n   * Specifies the [`tabindex`](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex) of the component.\n   */\n\n\n  set tabindex(value) {\n    const providedTabIndex = Number(value);\n    const defaultTabIndex = 0;\n    this._tabindex = !isNaN(providedTabIndex) ? providedTabIndex : defaultTabIndex;\n  }\n\n  get tabindex() {\n    return this.disabled ? -1 : this._tabindex;\n  }\n\n  set isFocused(isFocused) {\n    this.renderer[isFocused ? 'addClass' : 'removeClass'](this.wrapper.nativeElement, 'k-state-focused');\n    this._isFocused = isFocused;\n  }\n\n  get isFocused() {\n    return this._isFocused;\n  }\n\n  get width() {\n    const wrapperWidth = this.wrapper.nativeElement.offsetWidth;\n    const width = this.popupSettings.width || wrapperWidth;\n    const minWidth = isNaN(wrapperWidth) ? wrapperWidth : `${wrapperWidth}px`;\n    const maxWidth = isNaN(width) ? width : `${width}px`;\n    return {\n      min: minWidth,\n      max: maxWidth\n    };\n  }\n\n  get height() {\n    const popupHeight = this.popupSettings.height;\n    return isPresent(popupHeight) ? `${popupHeight}px` : 'auto';\n  }\n  /**\n   * Returns the current open state of the popup.\n   */\n\n\n  get isOpen() {\n    return isPresent(this.popupRef);\n  }\n\n  get clearButtonVisiblity() {\n    if (this.touchEnabled) {\n      return 'visible';\n    }\n  }\n  /**\n   * @hidden\n   *\n   * Alias for `isNodeExpanded`. Used for compatibility with the `ExpandableComponent` interface.\n   * Required for the expand-directive.\n   */\n\n\n  set isExpanded(callback) {\n    this.isNodeExpanded = callback;\n  }\n\n  get isExpanded() {\n    return this.isNodeExpanded;\n  }\n  /**\n   * @hidden\n   *\n   * Alias for `nodeExpand`. Used for compatibility with the `ExpandableComponent` interface.\n   * Required for the expand-directive.\n   */\n\n\n  get expand() {\n    return this.nodeExpand;\n  }\n  /**\n   * @hidden\n   *\n   * Alias for `nodeCollapse`. Used for compatibility with the `ExpandableComponent` interface.\n   * Required for the expand-directive.\n   */\n\n\n  get collapse() {\n    return this.nodeCollapse;\n  }\n  /**\n   * @hidden\n   *\n   * Alias for `data`. Used for compatibility with the `DataBoundComponent` interface.\n   * Required for the data-binding directives.\n   */\n\n\n  set nodes(nodes) {\n    this.data = nodes;\n  }\n\n  get nodes() {\n    return this.data;\n  }\n  /**\n   * @hidden\n   *\n   * Alias for `fetchChildren`. Used for compatibility with the `DataBoundComponent` interface.\n   * Required for the data-binding directives\n   */\n\n\n  set children(callback) {\n    this.fetchChildren = callback;\n  }\n\n  get children() {\n    return this.fetchChildren;\n  }\n  /**\n   * @hidden\n   *\n   * Alias for `isNodeVisible`. Used for compatibility with the `DataBoundComponent` interface.\n   * The `DataBoundComponent` interface is used in the data-binding directives.\n   */\n\n\n  set isVisible(callback) {\n    this.isNodeVisible = callback;\n  }\n\n  get isVisible() {\n    return this.isNodeVisible;\n  }\n\n  ngOnInit() {\n    this.renderer.removeAttribute(this.hostElement.nativeElement, 'tabindex');\n    this.assignAriaDescribedBy();\n    this.subscriptions.push(this.localization.changes.subscribe(({\n      rtl\n    }) => {\n      this.direction = rtl ? 'rtl' : 'ltr';\n      this.cdr.markForCheck();\n    }));\n  }\n  /**\n   * @hidden\n   */\n\n\n  ngOnDestroy() {\n    this.destroyPopup();\n    this.unsubscribeEvents();\n  }\n  /**\n   * @hidden\n   */\n\n\n  ngOnChanges(changes) {\n    if (anyChanged(['textField', 'valueField', 'valuePrimitive'], changes, false)) {\n      this.setState();\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  ngAfterContentChecked() {\n    this.verifySettings();\n  }\n  /**\n   * @hidden\n   *\n   * Used by the kendo-floatinglabel component to determine if the floating label\n   * should be rendered inside the input when the component is not focused.\n   */\n\n\n  isEmpty() {\n    return !this.text && !this.placeholder;\n  }\n  /**\n   * @hidden\n   */\n\n\n  togglePopup(open) {\n    const isDisabled = this.disabled || this.readonly;\n    const sameState = this.isOpen === open;\n\n    if (isDisabled || sameState) {\n      return;\n    }\n\n    const togglePrevented = this.triggerPopupEvents(open);\n\n    if (!togglePrevented) {\n      open ? this.createPopup() : this.destroyPopup();\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleFocus() {\n    if (!this.isFocused) {\n      this.isFocused = true;\n\n      if (hasObservers(this.onFocus)) {\n        this._zone.run(() => {\n          this.onFocus.emit();\n        });\n      }\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleBlur(e) {\n    const relatedTarget = e && e.relatedTarget;\n\n    if (this.hostElement.nativeElement.contains(relatedTarget) || this.isOpen && this.popupRef.popupElement.contains(relatedTarget)) {\n      return;\n    }\n\n    this.isFocused = false;\n\n    if (hasObservers(this.onBlur) || isUntouched(this.hostElement.nativeElement)) {\n      this._zone.run(() => {\n        this.togglePopup(false);\n        this.onBlur.emit();\n        this.onTouchedCallback();\n      });\n    } else {\n      this.togglePopup(false);\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleKeydown(event) {\n    if (this.disabled || this.readonly) {\n      return;\n    }\n\n    const eventData = event;\n    this.navigationService.process({\n      originalEvent: eventData\n    });\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleClick() {\n    this.togglePopup(!this.isOpen);\n  }\n  /**\n   * Focuses a specific item of the DropDownTree based on a provided index in the format of `1_1`.\n   * The targeted item should be expanded in order for it to be focused.\n   * If null or invalid index is provided the focus will be set on the first item.\n   */\n\n\n  focusItemAt(index) {\n    if (this.treeview) {\n      const lookup = this.treeview.itemLookup(index);\n      let isItemDisabled = !isPresent(lookup) || this.treeview.isDisabled(lookup.item.dataItem, lookup.item.index);\n\n      if (!isItemDisabled) {\n        this.treeview.focus(index);\n      }\n    }\n  }\n  /**\n   * Focuses the DropDownTree.\n   */\n\n\n  focus() {\n    if (!this.disabled) {\n      this.wrapper.nativeElement.focus();\n    }\n  }\n  /**\n   * Blurs the DropDownTree.\n   */\n\n\n  blur() {\n    if (!this.disabled) {\n      this.wrapper.nativeElement.blur();\n    }\n  }\n  /**\n   * Resets the value of the DropDownTree.\n   * If you use the `reset` method to clear the value of the component,\n   * the model will not update automatically and the `valueChange` event will not be fired.\n   */\n\n\n  reset() {\n    this.value = undefined;\n    this.dataItem = undefined;\n  }\n  /**\n   * Toggles the visibility of the popup\n   * ([see example]({% slug openstate_ddt %})).\n   * If you use the `toggle` method to open or close the popup, the `open` and `close` events will not be fired.\n   *\n   * @param open - The state of the popup.\n   */\n\n\n  toggle(open) {\n    // The Promise is required to open the popup on load.\n    // Otherwise, the \"ViewContainerRef not found...\" error will be thrown.\n    Promise.resolve(null).then(() => {\n      const shouldOpen = isPresent(open) ? open : !isPresent(this.popupRef);\n      this.destroyPopup();\n\n      if (shouldOpen) {\n        this.createPopup();\n      }\n    });\n  }\n  /**\n   * @hidden\n   */\n\n\n  get popupContainerClasses() {\n    const containerClasses = ['k-popup-dropdowntree', 'k-reset', 'k-group', 'k-list-container'];\n\n    if (this.popupSettings.popupClass) {\n      containerClasses.push(this.popupSettings.popupClass);\n    }\n\n    return containerClasses;\n  }\n  /**\n   * @hidden\n   */\n\n\n  onSelectionChange({\n    dataItem,\n    index\n  }) {\n    this.valueDepth = index.split('_').length - 1;\n    const valueField = this.getField(this.valueField, dataItem);\n    const newValue = this.valuePrimitive ? getter(valueField)(dataItem) : dataItem;\n    const shouldUpdateValue = newValue !== this.value;\n\n    if (shouldUpdateValue) {\n      this.dataItem = dataItem;\n      this.value = newValue;\n      this.emitValueChange(this.value);\n    }\n\n    this.togglePopup(false);\n    this.focus();\n  }\n  /**\n   * @hidden\n   */\n\n\n  messageFor(key) {\n    return this.localization.get(key);\n  }\n  /**\n   * @hidden\n   */\n\n\n  clearValue(event) {\n    event.stopImmediatePropagation();\n    this.focus();\n    this.value = undefined;\n    this.dataItem = undefined;\n    this.clearState();\n    this.valueChange.emit(undefined);\n    this.emitValueChange();\n  }\n\n  get appendTo() {\n    const {\n      appendTo\n    } = this.popupSettings;\n\n    if (!appendTo || appendTo === 'root') {\n      return undefined;\n    }\n\n    return appendTo === 'component' ? this.container : appendTo;\n  }\n  /**\n   * @hidden\n   */\n\n\n  preventEventDefault(event) {\n    event.preventDefault();\n  }\n  /**\n   * @hidden\n   */\n\n\n  writeValue(value) {\n    // If the user resets the value by providing null/undefined we need to reset the `dataItem`\n    // Because upon initialization of the component the `writeValue` is being called twice -\n    // first time with `null` value regardless of sync/async value - an extra check is added to\n    // distinguish between client reset and initial phanotm 'null' value\n    if (!isPresent(value) && isPresent(this.value)) {\n      this.dataItem = null;\n    }\n\n    this.value = value === null ? undefined : value;\n  }\n  /**\n   * @hidden\n   */\n\n\n  registerOnChange(fn) {\n    this.onChangeCallback = fn;\n  }\n  /**\n   * @hidden\n   */\n\n\n  registerOnTouched(fn) {\n    this.onTouchedCallback = fn;\n  }\n  /**\n   * @hidden\n   */\n\n\n  setDisabledState(isDisabled) {\n    this.disabled = isDisabled;\n    this.cdr.markForCheck();\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleFilterInputChange(term) {\n    this.filterChange.next(term);\n    this.allNodesHidden = this.nodes.every((node, index) => !this.isVisible(node, String(index)));\n  }\n\n  verifySettings() {\n    if (!isDevMode()) {\n      return;\n    }\n\n    if (this.valuePrimitive === true && isPresent(this.value) && typeof this.value === \"object\") {\n      throw new Error(DropDownTreeMessages.primitive);\n    }\n\n    if (this.valuePrimitive === true && isPresent(this.value) && typeof this.dataItem !== \"object\") {\n      throw new Error(DropDownTreeMessages.dataItem);\n    }\n\n    if (this.valuePrimitive === false && isPresent(this.value) && typeof this.value !== \"object\") {\n      throw new Error(DropDownTreeMessages.object);\n    }\n\n    if (!isPresent(this.valueField) || !isPresent(this.textField)) {\n      throw new Error(DropDownTreeMessages.textAndValue);\n    }\n\n    if ((isArray(this.valueField) || isArray(this.textField)) && isPresent(this.value) && !isPresent(this.valueDepth)) {\n      throw new Error(DropDownTreeMessages.valueDepth);\n    }\n  }\n\n  emitValueChange(value) {\n    this.onChangeCallback(value);\n    this.valueChange.emit(value);\n  }\n\n  getText(textField, dataItem) {\n    if (isPresent(dataItem) && isPresent(textField)) {\n      const field = this.getField(textField, dataItem);\n      return getter(field)(dataItem);\n    }\n\n    return null;\n  }\n  /**\n   * @hidden\n   *\n   * Determines the `valueField` and `textField` for a specific level in the data set\n   *  @param field - the field value (string | string[])\n   *  @param value - current value\n   */\n\n\n  getField(field, value) {\n    const fieldsCount = field.length - 1;\n\n    if (typeof field === 'string') {\n      // If the `valueField` | `textField` is the same for all levels\n      return field;\n    } else if (isPresent(this.valueDepth)) {\n      // When `valueDepth` can be defined from the index on selectionChange or provided by the user\n      return fieldsCount < this.valueDepth ? field[fieldsCount] : field[this.valueDepth];\n    } else {\n      // Fallback: Look to find a match of each field in the current data item\n      // Side effect may occur if all of the listed fields are present in the data item\n      return field.find(item => item in value);\n    }\n  }\n\n  triggerPopupEvents(open) {\n    const eventArgs = new PreventableEvent();\n\n    if (open) {\n      this.open.emit(eventArgs);\n    } else {\n      this.close.emit(eventArgs);\n    }\n\n    return eventArgs.isDefaultPrevented();\n  }\n\n  createPopup() {\n    const horizontalAlign = this.direction === \"rtl\" ? \"right\" : \"left\";\n    const anchorPosition = {\n      horizontal: horizontalAlign,\n      vertical: 'bottom'\n    };\n    const popupPosition = {\n      horizontal: horizontalAlign,\n      vertical: 'top'\n    };\n    this.popupRef = this.popupService.open({\n      anchor: this.wrapper,\n      appendTo: this.appendTo,\n      anchorAlign: anchorPosition,\n      content: this.popupTemplate,\n      popupAlign: popupPosition,\n      positionMode: 'absolute',\n      popupClass: this.popupContainerClasses\n    });\n    const popupWrapper = this.popupRef.popupElement;\n    const {\n      min,\n      max\n    } = this.width;\n    popupWrapper.style.minWidth = min;\n    popupWrapper.style.width = max;\n    popupWrapper.style.height = this.height;\n    popupWrapper.setAttribute(\"dir\", this.direction);\n    this.popupRef.popupOpen.subscribe(() => {\n      this.cdr.detectChanges();\n      this.opened.emit();\n    });\n    this.popupRef.popupClose.subscribe(() => {\n      this.closed.emit();\n    });\n  }\n\n  destroyPopup() {\n    if (this.popupRef) {\n      this.popupRef.close();\n      this.popupRef = null;\n\n      if (this.filter !== \"\") {\n        this.filter = \"\";\n        this.allNodesHidden = false;\n\n        if (hasObservers(this.filterChange)) {\n          this._zone.run(() => {\n            this.filterChange.emit(\"\");\n          });\n        }\n      }\n    }\n  }\n\n  handleEscape() {\n    this.togglePopup(false);\n    this.focus();\n  }\n\n  setState() {\n    if (isPresent(this.value) && isPresent(this.dataItem) && isPresent(this.valueField)) {\n      this.text = this.getText(this.textField, this.dataItem);\n      const valueField = this.getField(this.valueField, this.dataItem);\n      this.selectBy = valueField;\n      this.selectedKeys = [getter(valueField)(this.dataItem)];\n    } else {\n      this.clearState();\n    }\n\n    this.cdr.markForCheck();\n  }\n\n  clearState() {\n    this.text = undefined;\n    this.valueDepth = undefined;\n    this.selectedKeys = [];\n  }\n\n  subscribeEvents() {\n    this.subscriptions.push(this.navigationService.open.subscribe(() => this.togglePopup(true)), this.navigationService.close.subscribe(() => {\n      this.togglePopup(false);\n      this.focus();\n    }), this.navigationService.enter.pipe(tap(event => event.originalEvent.preventDefault())).subscribe(() => this.togglePopup(true)), this.navigationService.esc.subscribe(() => this.handleEscape()), this.navigationService.tab.subscribe(() => this.focus()), this.navigationService.down.subscribe(event => {\n      if (!this.treeview) {\n        return;\n      }\n\n      event.originalEvent.preventDefault();\n\n      if (!this.treeview.isActive) {\n        this.treeview.focus();\n      }\n    }), this.navigationService.up.subscribe(event => {\n      if (!this.treeview) {\n        return;\n      }\n\n      event.originalEvent.preventDefault();\n\n      if (this.filterable && this.treeview['navigationService']['activeIndex'] === '0') {\n        this.filterInput.nativeElement.focus();\n      }\n    }));\n  }\n\n  subscribeTouchEvents() {\n    if (!isDocumentAvailable() || !this.touchEnabled) {\n      return;\n    }\n\n    this._zone.runOutsideAngular(() => // Roll up DropDownTree on iOS when tapped outside\n    this.touchstartDisposeHandler = this.renderer.listen(document, 'touchstart', e => {\n      const target = e.target;\n\n      if (this.isFocused && !inDropDown(this.hostElement, target, this.popupRef)) {\n        this._zone.run(() => {\n          if (this.isOpen) {\n            this.treeview.blur();\n          }\n\n          this.blur();\n        });\n      }\n    }));\n  }\n\n  unsubscribeEvents() {\n    this.subscriptions.forEach(sub => sub.unsubscribe());\n\n    if (this.touchstartDisposeHandler) {\n      this.touchstartDisposeHandler();\n    }\n  }\n\n  assignAriaDescribedBy() {\n    const currentValue = this.wrapper.nativeElement.getAttribute('aria-describedby') || ''; // add to the current value - don't replace it (the aria-describedby is used by the FormField component as well)\n\n    const newValue = `${this.valueLabelId} ${currentValue.trim()}`.trim();\n    this.renderer.setAttribute(this.wrapper.nativeElement, 'aria-describedby', newValue);\n  }\n\n};\n\nDropDownTreeComponent.ɵfac = function DropDownTreeComponent_Factory(t) {\n  return new (t || DropDownTreeComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc4.PopupService), ɵngcc0.ɵɵdirectiveInject(NavigationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService), ɵngcc0.ɵɵdirectiveInject(TOUCH_ENABLED, 8));\n};\n\nDropDownTreeComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: DropDownTreeComponent,\n  selectors: [[\"kendo-dropdowntree\"]],\n  contentQueries: function DropDownTreeComponent_ContentQueries(rf, ctx, dirIndex) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵcontentQuery(dirIndex, NoDataTemplateDirective, 5);\n      ɵngcc0.ɵɵcontentQuery(dirIndex, HeaderTemplateDirective, 5);\n      ɵngcc0.ɵɵcontentQuery(dirIndex, FooterTemplateDirective, 5);\n      ɵngcc0.ɵɵcontentQuery(dirIndex, NodeTemplateDirective, 5);\n      ɵngcc0.ɵɵcontentQuery(dirIndex, ValueTemplateDirective, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.noDataTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.headerTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.footerTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.nodeTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.valueTemplate = _t.first);\n    }\n  },\n  viewQuery: function DropDownTreeComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵviewQuery(_c41, 5);\n      ɵngcc0.ɵɵviewQuery(_c12, 7);\n      ɵngcc0.ɵɵviewQuery(_c19, 7);\n      ɵngcc0.ɵɵviewQuery(_c11, 7, ViewContainerRef);\n      ɵngcc0.ɵɵviewQuery(_c42, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.treeview = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.popupTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.wrapper = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.container = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.filterInput = _t.first);\n    }\n  },\n  hostVars: 7,\n  hostBindings: function DropDownTreeComponent_HostBindings(rf, ctx) {\n    if (rf & 2) {\n      ɵngcc0.ɵɵattribute(\"dir\", ctx.direction);\n      ɵngcc0.ɵɵclassProp(\"k-widget\", ctx.hostClasses)(\"k-dropdowntree\", ctx.hostClasses)(\"k-dropdowntree-clearable\", ctx.clearable);\n    }\n  },\n  inputs: {\n    clearButton: \"clearButton\",\n    hasChildren: \"hasChildren\",\n    fetchChildren: \"fetchChildren\",\n    placeholder: \"placeholder\",\n    listHeight: \"listHeight\",\n    disabled: \"disabled\",\n    readonly: \"readonly\",\n    valuePrimitive: \"valuePrimitive\",\n    itemDisabled: \"itemDisabled\",\n    isNodeVisible: \"isNodeVisible\",\n    loadOnDemand: \"loadOnDemand\",\n    filterable: \"filterable\",\n    filter: \"filter\",\n    focusableId: \"focusableId\",\n    data: \"data\",\n    value: \"value\",\n    popupSettings: \"popupSettings\",\n    dataItem: \"dataItem\",\n    tabindex: \"tabindex\",\n    isNodeExpanded: \"isNodeExpanded\",\n    valueDepth: \"valueDepth\",\n    loading: \"loading\",\n    textField: \"textField\",\n    valueField: \"valueField\"\n  },\n  outputs: {\n    open: \"open\",\n    opened: \"opened\",\n    close: \"close\",\n    closed: \"closed\",\n    nodeExpand: \"nodeExpand\",\n    nodeCollapse: \"nodeCollapse\",\n    onFocus: \"focus\",\n    onBlur: \"blur\",\n    valueChange: \"valueChange\",\n    filterChange: \"filterChange\"\n  },\n  exportAs: [\"kendoDropDownTree\"],\n  features: [ɵngcc0.ɵɵProvidersFeature([DataService, SelectionService, NavigationService, DisabledItemsService, LocalizationService, {\n    provide: L10N_PREFIX,\n    useValue: 'kendo.dropdowntree'\n  }, {\n    multi: true,\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => DropDownTreeComponent_1)\n  }, {\n    provide: KendoInput,\n    useExisting: forwardRef(() => DropDownTreeComponent_1)\n  }, {\n    provide: DataBoundComponent,\n    useExisting: forwardRef(() => DropDownTreeComponent_1)\n  }, {\n    provide: ExpandableComponent,\n    useExisting: forwardRef(() => DropDownTreeComponent_1)\n  }]), ɵngcc0.ɵɵNgOnChangesFeature],\n  decls: 13,\n  vars: 17,\n  consts: function () {\n    let i18n_43;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The text displayed in the popup when there are no items\n       * @meaning kendo.dropdowntree.noDataText\n       */\n      const MSG_EXTERNAL_8377764809518564323$$DIST_FESM2015_INDEX_JS_44 = goog.getMsg(\"NO DATA FOUND\");\n      i18n_43 = MSG_EXTERNAL_8377764809518564323$$DIST_FESM2015_INDEX_JS_44;\n    } else {\n      i18n_43 = $localize`:kendo.dropdowntree.noDataText|The text displayed in the popup when there are no items␟b5507b240a829a596159da3600ea1c73810d8708␟8377764809518564323:NO DATA FOUND`;\n    }\n\n    let i18n_45;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The title of the clear button\n       * @meaning kendo.dropdowntree.clearTitle\n       */\n      const MSG_EXTERNAL_5091538317194981642$$DIST_FESM2015_INDEX_JS_46 = goog.getMsg(\"clear\");\n      i18n_45 = MSG_EXTERNAL_5091538317194981642$$DIST_FESM2015_INDEX_JS_46;\n    } else {\n      i18n_45 = $localize`:kendo.dropdowntree.clearTitle|The title of the clear button␟549a21c02a5be9711c5297a917390d5f4c06448b␟5091538317194981642:clear`;\n    }\n\n    return [[\"kendoDropDownTreeLocalizedMessages\", \"\", \"noDataText\", i18n_43, \"clearTitle\", i18n_45], [\"role\", \"listbox\", \"aria-haspopup\", \"tree\", 3, \"ngClass\", \"kendoEventsOutsideAngular\", \"scope\", \"click\", \"keydown\"], [\"wrapper\", \"\"], [1, \"k-input\"], [4, \"ngIf\"], [3, \"ngIf\"], [\"class\", \"k-icon k-clear-value k-i-close\", \"aria-hidden\", \"true\", 3, \"visibility\", \"click\", 4, \"ngIf\"], [\"aria-hidden\", \"true\", 1, \"k-select\"], [1, \"k-icon\", \"k-i-arrow-60-down\"], [\"popupTemplate\", \"\"], [\"container\", \"\"], [3, \"templateContext\"], [\"aria-hidden\", \"true\", 1, \"k-icon\", \"k-clear-value\", \"k-i-close\", 3, \"click\"], [\"class\", \"k-list-filter\", 4, \"ngIf\"], [\"kendoTreeViewSelectable\", \"\", 3, \"nodes\", \"maxHeight\", \"animate\", \"selectedKeys\", \"selectBy\", \"textField\", \"children\", \"hasChildren\", \"loadOnDemand\", \"isExpanded\", \"isDisabled\", \"nodeTemplate\", \"filter\", \"isVisible\", \"selectedKeysChange\", \"focusout\", \"keydown\", \"selectionChange\", \"expand\", \"collapse\", 4, \"ngIf\"], [\"class\", \"k-nodata\", 4, \"ngIf\"], [1, \"k-list-filter\"], [\"role\", \"textbox\", \"aria-haspopup\", \"true\", \"aria-expanded\", \"false\", \"tabindex\", \"0\", \"aria-disabled\", \"false\", \"aria-readonly\", \"false\", 1, \"k-textbox\", 3, \"filterInput\", \"ngModel\", \"kendoEventsOutsideAngular\", \"scope\", \"input\", \"keydown.arrowdown\", \"keydown.alt.arrowup\", \"ngModelChange\"], [\"filterInput\", \"\"], [1, \"k-icon\", \"k-i-zoom\"], [\"kendoTreeViewSelectable\", \"\", 3, \"nodes\", \"animate\", \"selectedKeys\", \"selectBy\", \"textField\", \"children\", \"hasChildren\", \"loadOnDemand\", \"isExpanded\", \"isDisabled\", \"nodeTemplate\", \"filter\", \"isVisible\", \"selectedKeysChange\", \"focusout\", \"keydown\", \"selectionChange\", \"expand\", \"collapse\"], [\"treeview\", \"\"], [1, \"k-nodata\"], [3, \"ngIf\", \"templateContext\"]];\n  },\n  template: function DropDownTreeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵelementContainer(0, 0);\n      ɵngcc0.ɵɵelementStart(1, \"span\", 1, 2);\n      ɵngcc0.ɵɵlistener(\"click\", function DropDownTreeComponent_Template_span_click_1_listener() {\n        return ctx.handleClick();\n      })(\"keydown\", function DropDownTreeComponent_Template_span_keydown_1_listener($event) {\n        return ctx.handleKeydown($event);\n      });\n      ɵngcc0.ɵɵelementStart(3, \"span\", 3);\n      ɵngcc0.ɵɵtemplate(4, DropDownTreeComponent_4_Template, 1, 4, undefined, 4);\n      ɵngcc0.ɵɵtemplate(5, DropDownTreeComponent_ng_template_5_Template, 1, 1, \"ng-template\", 5);\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵtemplate(6, DropDownTreeComponent_span_6_Template, 1, 3, \"span\", 6);\n      ɵngcc0.ɵɵelementStart(7, \"span\", 7);\n      ɵngcc0.ɵɵelement(8, \"span\", 8);\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵtemplate(9, DropDownTreeComponent_ng_template_9_Template, 5, 5, \"ng-template\", null, 9, ɵngcc0.ɵɵtemplateRefExtractor);\n      ɵngcc0.ɵɵelementContainer(11, null, 10);\n    }\n\n    if (rf & 2) {\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngClass\", ɵngcc0.ɵɵpureFunction1(12, _c29, ctx.disabled))(\"kendoEventsOutsideAngular\", ɵngcc0.ɵɵpureFunction2(14, _c1, ctx.handleFocus, ctx.handleBlur))(\"scope\", ctx);\n      ɵngcc0.ɵɵattribute(\"id\", ctx.focusableId)(\"aria-expanded\", ctx.isOpen)(\"aria-readonly\", ctx.readonly)(\"tabindex\", ctx.tabindex)(\"dir\", ctx.direction);\n      ɵngcc0.ɵɵadvance(2);\n      ɵngcc0.ɵɵattribute(\"id\", ctx.valueLabelId);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngIf\", ctx.valueTemplate);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.valueTemplate);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.loading && !ctx.readonly && ctx.clearButton && (ctx.text == null ? null : ctx.text.length));\n    }\n  },\n  directives: function () {\n    return [LocalizedMessagesDirective, ɵngcc3.NgClass, ɵngcc2.EventsOutsideAngularDirective, ɵngcc3.NgIf, TemplateContextDirective, ɵngcc5.DefaultValueAccessor, FilterInputDirective, ɵngcc5.NgControlStatus, ɵngcc5.NgModel, ɵngcc6.TreeViewComponent, ɵngcc6.SelectDirective];\n  },\n  encapsulation: 2,\n  changeDetection: 0\n});\n\n__decorate([HostBinding('class.k-widget'), HostBinding('class.k-dropdowntree'), HostBinding('class.k-dropdowntree-clearable'), __metadata(\"design:type\", Boolean)], DropDownTreeComponent.prototype, \"hostClasses\", void 0);\n\n__decorate([HostBinding('attr.dir'), __metadata(\"design:type\", String)], DropDownTreeComponent.prototype, \"direction\", void 0);\n\n__decorate([HostBinding('class.k-dropdowntree-clearable'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], DropDownTreeComponent.prototype, \"clearable\", null);\n\n__decorate([ContentChild(NoDataTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", NoDataTemplateDirective)], DropDownTreeComponent.prototype, \"noDataTemplate\", void 0);\n\n__decorate([ContentChild(HeaderTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", HeaderTemplateDirective)], DropDownTreeComponent.prototype, \"headerTemplate\", void 0);\n\n__decorate([ContentChild(FooterTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", FooterTemplateDirective)], DropDownTreeComponent.prototype, \"footerTemplate\", void 0);\n\n__decorate([ContentChild(NodeTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", NodeTemplateDirective)], DropDownTreeComponent.prototype, \"nodeTemplate\", void 0);\n\n__decorate([ContentChild(ValueTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", ValueTemplateDirective)], DropDownTreeComponent.prototype, \"valueTemplate\", void 0);\n\n__decorate([ViewChild('popupTemplate', {\n  static: true\n}), __metadata(\"design:type\", TemplateRef)], DropDownTreeComponent.prototype, \"popupTemplate\", void 0);\n\n__decorate([ViewChild('wrapper', {\n  static: true\n}), __metadata(\"design:type\", ElementRef)], DropDownTreeComponent.prototype, \"wrapper\", void 0);\n\n__decorate([ViewChild('container', {\n  read: ViewContainerRef,\n  static: true\n}), __metadata(\"design:type\", ViewContainerRef)], DropDownTreeComponent.prototype, \"container\", void 0);\n\n__decorate([ViewChild('treeview', {\n  static: false\n}), __metadata(\"design:type\", TreeViewComponent), __metadata(\"design:paramtypes\", [TreeViewComponent])], DropDownTreeComponent.prototype, \"treeview\", null);\n\n__decorate([ViewChild('filterInput', {\n  static: false\n}), __metadata(\"design:type\", ElementRef)], DropDownTreeComponent.prototype, \"filterInput\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], DropDownTreeComponent.prototype, \"open\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], DropDownTreeComponent.prototype, \"opened\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], DropDownTreeComponent.prototype, \"close\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], DropDownTreeComponent.prototype, \"closed\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], DropDownTreeComponent.prototype, \"nodeExpand\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], DropDownTreeComponent.prototype, \"nodeCollapse\", void 0);\n\n__decorate([Output('focus'), __metadata(\"design:type\", EventEmitter)], DropDownTreeComponent.prototype, \"onFocus\", void 0);\n\n__decorate([Output('blur'), __metadata(\"design:type\", EventEmitter)], DropDownTreeComponent.prototype, \"onBlur\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], DropDownTreeComponent.prototype, \"valueChange\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], DropDownTreeComponent.prototype, \"filterChange\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], DropDownTreeComponent.prototype, \"loading\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], DropDownTreeComponent.prototype, \"clearButton\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Array), __metadata(\"design:paramtypes\", [Array])], DropDownTreeComponent.prototype, \"data\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], DropDownTreeComponent.prototype, \"value\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Object)], DropDownTreeComponent.prototype, \"textField\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Object)], DropDownTreeComponent.prototype, \"valueField\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Number)], DropDownTreeComponent.prototype, \"valueDepth\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Function)], DropDownTreeComponent.prototype, \"hasChildren\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Function)], DropDownTreeComponent.prototype, \"fetchChildren\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], DropDownTreeComponent.prototype, \"placeholder\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], DropDownTreeComponent.prototype, \"popupSettings\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], DropDownTreeComponent.prototype, \"dataItem\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Number)], DropDownTreeComponent.prototype, \"listHeight\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], DropDownTreeComponent.prototype, \"disabled\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], DropDownTreeComponent.prototype, \"readonly\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], DropDownTreeComponent.prototype, \"valuePrimitive\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Number), __metadata(\"design:paramtypes\", [Number])], DropDownTreeComponent.prototype, \"tabindex\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Function)], DropDownTreeComponent.prototype, \"itemDisabled\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Function)], DropDownTreeComponent.prototype, \"isNodeExpanded\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Function)], DropDownTreeComponent.prototype, \"isNodeVisible\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], DropDownTreeComponent.prototype, \"loadOnDemand\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], DropDownTreeComponent.prototype, \"filterable\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], DropDownTreeComponent.prototype, \"filter\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], DropDownTreeComponent.prototype, \"focusableId\", void 0);\n\nDropDownTreeComponent = DropDownTreeComponent_1 = __decorate([__param(7, Optional()), __param(7, Inject(TOUCH_ENABLED)), __metadata(\"design:paramtypes\", [PopupService, NavigationService, Renderer2, ElementRef, NgZone, ChangeDetectorRef, LocalizationService, Boolean])], DropDownTreeComponent);\nvar MultiSelectTreeComponent_1;\n/* tslint:disable:member-ordering */\n\nconst DEFAULT_POPUP_SETTINGS$1 = {\n  animate: true\n};\nconst DEFAULT_CHECKABLE_SETTINGS = {\n  checkChildren: true,\n  checkOnClick: true\n};\n\nconst hasChildren$1 = () => false;\n\nconst fetchChildren$1 = () => of([]);\n\nconst itemDisabled$1 = () => false;\n\nconst isNodeVisible$1 = () => true;\n/**\n * Represents the [Kendo UI MultiSelectTree component for Angular]({% slug overview_multiselecttree %}).\n */\n\n\nlet MultiSelectTreeComponent = MultiSelectTreeComponent_1 = class MultiSelectTreeComponent {\n  constructor(popupService, renderer, hostElement, navigationService, _zone, localization, cdr, touchEnabled$$1) {\n    this.popupService = popupService;\n    this.renderer = renderer;\n    this.hostElement = hostElement;\n    this.navigationService = navigationService;\n    this._zone = _zone;\n    this.localization = localization;\n    this.cdr = cdr;\n    this.touchEnabled = touchEnabled$$1;\n    this.hostClasses = true;\n    /**\n     * Sets the levels in the data set where the values can be found when `valueField` is an Array.\n     * The field serves to correctly allocate a data item used when the MultiSelectTree is initialized with a value.\n     */\n\n    this.valueDepth = [];\n    /**\n     * The hint which is displayed when the component is empty.\n     */\n\n    this.placeholder = \"\";\n    /**\n     * Sets the height of the options list. By default, `listHeight` is 200px.\n     *\n     * > The `listHeight` property affects only the list of options and not the whole popup container.\n     * > To set the height of the popup container, use `popupSettings.height`.\n     */\n\n    this.listHeight = 200;\n    /**\n     * Sets the disabled state of the component.\n     */\n\n    this.disabled = false;\n    /**\n     * Sets the read-only state of the component.\n     */\n\n    this.readonly = false;\n    /**\n     * Specifies the type of the selected value\n     * ([more information and example]({% slug valuebinding_multiselecttree %}#toc-primitive-values)).\n     * If set to `true`, the selected value has to be a primitive one.\n     */\n\n    this.valuePrimitive = false;\n    /**\n     * Indicates whether the child nodes will be fetched on node expand or will be initially prefetched.\n     * @default false\n     */\n\n    this.loadOnDemand = false;\n    /**\n     * @hidden\n     *\n     * Used by the kendo-label and kendo-floatinglabel to access and associate the focusable element with the provided label via aria-labelledby.\n     */\n\n    this.focusableId = `k-${guid()}`;\n    /**\n     * If set to `true`, renders a button on hovering over the component.\n     * Clicking this button resets the value of the component to `undefined` and triggers the `change` event.\n     * @default true\n     */\n\n    this.clearButton = true;\n    /**\n     * Renders the built-in input element for filtering the MultiSelectTree.\n     * If set to `true`, the component emits the `filterChange` event, which can be used to [filter the MultiSelectTree manually]({% slug filtering_multiselecttree %}#toc-manual-filtering).\n     * A built-in filtering implementation is available to use with the [`kendoMultiSelectTreeHierarchyBinding`]({% slug api_dropdowns_multiselecttreehierarchybindingdirective %}) and [`kendoMultiSelectTreeFlatBinding`]({% slug api_dropdowns_multiselecttreeflatbindingdirective %}) directives.\n     * @default false\n     */\n\n    this.filterable = false;\n    /**\n     * A function which determines if a specific node has child nodes.\n     */\n\n    this.hasChildren = hasChildren$1;\n    /**\n     * A function which provides the child nodes for a given parent node.\n     */\n\n    this.fetchChildren = fetchChildren$1;\n    /**\n     * A callback which determines whether a tree node should be rendered as hidden. The utility .k-display-none class is used to hide the nodes.\n     * Useful for custom filtering implementations.\n     */\n\n    this.isNodeVisible = isNodeVisible$1;\n    /**\n     * A function that is executed for each data item and determines if a specific item is disabled.\n     */\n\n    this.itemDisabled = itemDisabled$1;\n    /**\n     * A user-defined callback function which receives an array of selected data items and maps them to an array of tags.\n     *\n     * @param { Any[] } dataItems - The selected data items from the list.\n     * @returns { Any[] } - The tags that will be rendered by the component.\n     */\n\n    this.tagMapper = tags => tags || [];\n    /**\n     * Fires each time the user focuses the MultiSelectTree.\n     */\n\n\n    this.onFocus = new EventEmitter();\n    /**\n     * Fires each time the MultiSelectTree gets blurred.\n     */\n\n    this.onBlur = new EventEmitter();\n    /**\n     * Fires each time the popup is about to open\n     * ([see example]({% slug openstate_multiselecttree %})).\n     * This event is preventable. If you cancel it, the popup will remain closed.\n     */\n\n    this.open = new EventEmitter();\n    /**\n     * Fires after the popup has been opened.\n     */\n\n    this.opened = new EventEmitter();\n    /**\n     * Fires each time the popup is about to close\n     * ([see example]({% slug openstate_multiselecttree %})).\n     * This event is preventable. If you cancel it, the popup will remain open.\n     */\n\n    this.close = new EventEmitter();\n    /**\n     * Fires after the popup has been closed.\n     */\n\n    this.closed = new EventEmitter();\n    /**\n     * Fires when the user expands a node in the popup TreeView.\n     */\n\n    this.nodeExpand = new EventEmitter();\n    /**\n     * Fires when the user collapses a node in the popup TreeView.\n     */\n\n    this.nodeCollapse = new EventEmitter();\n    /**\n     * Fires each time the value is changed\n     * ([see example]({% slug overview_multiselecttree %}#toc-events)).\n     */\n\n    this.valueChange = new EventEmitter();\n    /**\n     * Fires each time a tag is about to be removed.\n     * This event is preventable. If you cancel it, the tag will not be removed.\n     */\n\n    this.removeTag = new EventEmitter();\n    /**\n     * Fires when the value of the built-in filter input element changes.\n     */\n\n    this.filterChange = new EventEmitter();\n    /**\n     * @hidden\n     */\n\n    this.filterStateChange = new EventEmitter();\n    /**\n     * @hidden\n     */\n\n    this.checkedItems = [];\n    /**\n     * @hidden\n     */\n\n    this.checkBy = item => item;\n    /**\n     * @hidden\n     */\n\n\n    this.showAfter = 0;\n    /**\n     * @hidden\n     */\n\n    this.allNodesHidden = false;\n    this.tagListId = guid();\n    this.tagPrefix = \"tag-\" + guid();\n    this.focusedTagIndex = undefined;\n    this._value = [];\n    this._tabindex = 0;\n    this._popupSettings = DEFAULT_POPUP_SETTINGS$1;\n    this._checkableSettings = DEFAULT_CHECKABLE_SETTINGS;\n    this._isFocused = false;\n    this.subscriptions = [];\n    this.onTouchedCallback = noop;\n    this.onChangeCallback = noop;\n    this.direction = localization.rtl ? 'rtl' : 'ltr';\n    this.subscribeEvents();\n  }\n\n  set treeview(treeview) {\n    this._treeview = treeview;\n\n    if (treeview) {\n      // If filtering is enabled, focus the TreeView on mobile devices instead of the filter input\n      if (this.isFocused && !this.filterable || this.touchEnabled) {\n        treeview.focus();\n      }\n      /**\n       * the treeview animations are initially disabled (we don't want expand animations during popup opening)\n       * re-enables the animations for user interaction\n       * The Promise is required to properly change the `animate` property when\n       * the popup is appended to a container and opened upon initialization.\n       * Otherwise, the \"Expression has changed...\" type error will be thrown.\n       */\n\n\n      Promise.resolve(null).then(() => this.treeview.animate = true);\n    }\n  }\n\n  get treeview() {\n    return this._treeview;\n  }\n  /**\n   * Specifies the [`tabindex`](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex) of the component.\n   */\n\n\n  set tabindex(value) {\n    const providedTabIndex = parseNumber(value);\n    const defaultTabIndex = 0;\n    this._tabindex = !isNaN(providedTabIndex) ? providedTabIndex : defaultTabIndex;\n  }\n\n  get tabindex() {\n    return this.disabled ? -1 : this._tabindex;\n  }\n  /**\n   * Configures the popup of the MultiSelectTree.\n   *\n   * The available options are:\n   * - `animate: Boolean`&mdash;Controls the popup animation. By default, the open and close animations are enabled.\n   * - `width: Number | String`&mdash;Sets the width of the popup container. By default, the width of the host element is used. If set to `auto`, the component automatically adjusts the width of the popup and no item labels are wrapped.\n   * - `height: Number`&mdash;Sets the height of the popup container.\n   * - `popupClass: String`&mdash;Specifies a list of CSS classes that are used to style the popup.\n   * - `appendTo: \"root\" | \"component\" | ViewContainerRef`&mdash;Specifies the component to which the popup will be appended.\n   */\n\n\n  set popupSettings(settings) {\n    this._popupSettings = Object.assign({}, DEFAULT_POPUP_SETTINGS$1, settings); // `detectChanges` needed, otherwise upon value initialization and `appendTo` property\n    // an error is thrown => ExpressionChangedAfterItHasBeenCheckedError\n\n    this.cdr.detectChanges();\n  }\n\n  get popupSettings() {\n    return this._popupSettings;\n  }\n  /**\n   * Defines the checkable settings of the MultiSelecTree nodes.\n   * If no value is provided, the default [`CheckableSettings`]({% slug api_dropdowns_multiselecttreecheckablesettings %}) are applied.\n   */\n\n\n  set checkableSettings(settings) {\n    this._checkableSettings = Object.assign({}, DEFAULT_CHECKABLE_SETTINGS, settings);\n  }\n\n  get checkableSettings() {\n    return this._checkableSettings;\n  }\n  /**\n   * Sets the data of the MultiSelectTree.\n   *\n   * > The data has to be provided in an array-like list with objects.\n   */\n\n\n  set data(data) {\n    this._nodes = data;\n    this.setState();\n  }\n\n  get data() {\n    return this._nodes;\n  }\n  /**\n   * Sets the value of the MultiSelectTree.\n   * It can either be of the primitive (string, numbers) or of the complex (objects) type.\n   * To define the type, use the `valuePrimitive` option.\n   *\n   */\n\n\n  set value(value) {\n    this._value = value ? value : [];\n    this.setState();\n  }\n\n  get value() {\n    return this._value;\n  }\n  /**\n   * Keeps the current `dataItems` object in order to resolve selection.\n   * Needs to be provided when when programmatically setting a `value` and `valuePrimitive` is set to `true`.\n   */\n\n\n  set dataItems(items) {\n    this._dataItems = (items || []).map((item, index) => {\n      if (hasProps(item, ['dataItem', 'index', 'level'])) {\n        return item;\n      }\n\n      return {\n        dataItem: item,\n        index: null,\n        level: this.valueDepth[index] || 0\n      };\n    });\n    this.setState();\n  }\n\n  get dataItems() {\n    return this._dataItems || this.value.map((value, index) => ({\n      dataItem: value,\n      index: null,\n      level: this.valueDepth[index] || 0\n    }));\n  }\n  /**\n   * @hidden\n   */\n\n\n  get focusedTagId() {\n    if (!isPresent(this.focusedTagIndex) || this.isOpen) {\n      return null;\n    }\n\n    const dataItem = this.tags[this.focusedTagIndex];\n    return `${this.tagPrefix}-${valueFrom({\n      dataItem\n    }, this.valueField)}`;\n  }\n\n  set isFocused(isFocused) {\n    this.renderer[isFocused ? 'addClass' : 'removeClass'](this.hostElement.nativeElement, 'k-state-focused');\n    this._isFocused = isFocused;\n  }\n\n  get isFocused() {\n    return this._isFocused;\n  }\n  /**\n   * Returns the current open state of the popup.\n   */\n\n\n  get isOpen() {\n    return isPresent(this.popupRef);\n  }\n\n  get width() {\n    const wrapperWidth = this.wrapper.nativeElement.offsetWidth;\n    const width = this.popupSettings.width || wrapperWidth;\n    const minWidth = isNaN(wrapperWidth) ? wrapperWidth : `${wrapperWidth}px`;\n    const maxWidth = isNaN(width) ? width : `${width}px`;\n    return {\n      min: minWidth,\n      max: maxWidth\n    };\n  }\n\n  get height() {\n    const popupHeight = this.popupSettings.height;\n    return isPresent(popupHeight) ? `${popupHeight}px` : 'auto';\n  }\n\n  get appendTo() {\n    const {\n      appendTo\n    } = this.popupSettings;\n\n    if (!appendTo || appendTo === 'root') {\n      return undefined;\n    }\n\n    return appendTo === 'component' ? this.container : appendTo;\n  }\n  /**\n   * @hidden\n   */\n\n\n  get popupContainerClasses() {\n    const containerClasses = ['k-popup-dropdowntree', 'k-reset', 'k-group', 'k-list-container'];\n\n    if (this.popupSettings.popupClass) {\n      containerClasses.push(this.popupSettings.popupClass);\n    }\n\n    return containerClasses;\n  }\n  /**\n   * @hidden\n   *\n   * Alias for `data`. Used for compatibility with the `DataBoundComponent` interface.\n   * Required for the data-binding directives.\n   */\n\n\n  set nodes(nodes) {\n    this.data = nodes;\n  }\n\n  get nodes() {\n    return this.data;\n  }\n  /**\n   * @hidden\n   *\n   * Alias for `fetchChildren`. Used for compatibility with the `DataBoundComponent` interface.\n   * Required for the data-binding directives\n   */\n\n\n  set children(callback) {\n    this.fetchChildren = callback;\n  }\n\n  get children() {\n    return this.fetchChildren;\n  }\n  /**\n   * @hidden\n   *\n   * Alias for `nodeExpand`. Used for compatibility with the `ExpandableComponent` interface.\n   * Required for the expand-directive.\n   */\n\n\n  get expand() {\n    return this.nodeExpand;\n  }\n  /**\n   * @hidden\n   *\n   * Alias for `nodeCollapse`. Used for compatibility with the `ExpandableComponent` interface.\n   * Required for the expand-directive.\n   */\n\n\n  get collapse() {\n    return this.nodeCollapse;\n  }\n  /**\n   * @hidden\n   *\n   * Alias for `isNodeExpanded`. Used for compatibility with the `ExpandableComponent` interface.\n   * Required for the expand-directive.\n   */\n\n\n  set isExpanded(callback) {\n    this.isNodeExpanded = callback;\n  }\n\n  get isExpanded() {\n    return this.isNodeExpanded;\n  }\n  /**\n   * @hidden\n   *\n   * Alias for `isNodeVisible`. Used for compatibility with the `DataBoundComponent` interface.\n   * The `DataBoundComponent` interface is used in the data-binding directives.\n   */\n\n\n  set isVisible(callback) {\n    this.isNodeVisible = callback;\n  }\n\n  get isVisible() {\n    return this.isNodeVisible;\n  }\n\n  get isTagFocused() {\n    return !this.isOpen && this.focusedTagIndex !== undefined;\n  }\n\n  get isTreeViewActive() {\n    return this.treeview && this.treeview.isActive;\n  }\n\n  get isWrapperActive() {\n    return document.activeElement === this.wrapper.nativeElement;\n  }\n\n  ngOnInit() {\n    this.renderer.removeAttribute(this.hostElement.nativeElement, 'tabindex');\n    this.renderer.setAttribute(this.wrapper.nativeElement, 'aria-expanded', String(this.isOpen));\n    this.subscriptions.push(this.localization.changes.subscribe(({\n      rtl\n    }) => {\n      this.direction = rtl ? 'rtl' : 'ltr';\n      this.cdr.markForCheck();\n    }));\n  }\n  /**\n   * @hidden\n   */\n\n\n  ngOnDestroy() {\n    this.destroyPopup();\n    this.unsubscribeEvents();\n  }\n  /**\n   * @hidden\n   */\n\n\n  ngOnChanges(changes) {\n    if (anyChanged(['textField', 'valueField', 'valuePrimitive'], changes, false)) {\n      this.setState();\n    }\n\n    if (anyChanged(['valueDepth', 'value', 'dataItems'], changes, false)) {\n      if (changes.value && !changes.dataItems && !this.valuePrimitive) {\n        // Update the dataItems if the value is updated programmatically (non-primitive values only)\n        // In the primitive case, the client should update the dataItems as well\n        this.dataItems = this.value;\n      } else {\n        // Re-map the dataItems because `valueDepth` is not yet available when the check directive parses the items\n        this.dataItems = this.dataItems.map((item, index) => Object.assign({}, item, {\n          level: this.valueDepth[index] || 0\n        }));\n      }\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  ngAfterContentChecked() {\n    this.verifySettings();\n  }\n  /**\n   * @hidden\n   *\n   * Used by the kendo-floatinglabel component to determine if the floating label\n   * should be rendered inside the input when the component is not focused.\n   */\n\n\n  isEmpty() {\n    return !Boolean(this.placeholder) && (!isPresent(this.value) || this.value.length === 0);\n  }\n  /**\n   * Focuses the MultiSelectTree.\n   */\n\n\n  focus() {\n    if (!this.disabled) {\n      this.wrapper.nativeElement.focus();\n    }\n  }\n  /**\n   * Blurs the MultiSelectTree.\n   */\n\n\n  blur() {\n    if (!this.disabled) {\n      this.wrapper.nativeElement.blur();\n    }\n  }\n  /**\n   * Focuses a specific item of the MultiSelectTree based on a provided index in the format of `1_1`.\n   * The targeted item should be expanded in order for it to be focused.\n   * If null or invalid index is provided the focus will be set on the first item.\n   */\n\n\n  focusItemAt(index) {\n    if (this.treeview) {\n      const lookup = this.treeview.itemLookup(index);\n      const isItemDisabled = !isPresent(lookup) || this.treeview.isDisabled(lookup.item.dataItem, lookup.item.index);\n\n      if (!isItemDisabled) {\n        this.treeview.focus(index);\n      }\n    }\n  }\n  /**\n   * Resets the value of the MultiSelectTree.\n   * If you use the `reset` method to clear the value of the component,\n   * the model will not update automatically and the `valueChange` event will not be fired.\n   */\n\n\n  reset() {\n    this.value = [];\n    this.dataItems = [];\n    this.valueDepth = [];\n  }\n  /**\n   * Toggles the visibility of the popup\n   * ([see example]({% slug openstate_multiselecttree %})).\n   * If you use the `toggle` method to open or close the popup, the `open` and `close` events will not be fired.\n   *\n   * @param open - The state of the popup.\n   */\n\n\n  toggle(open) {\n    // The Promise is required to open the popup on load.\n    // Otherwise, the \"ViewContainerRef not found...\" error will be thrown.\n    Promise.resolve(null).then(() => {\n      const shouldOpen = isPresent(open) ? open : !isPresent(this.popupRef);\n      this.destroyPopup();\n\n      if (shouldOpen) {\n        this.createPopup();\n      }\n    });\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleFocus() {\n    if (!this.isFocused) {\n      this.isFocused = true;\n\n      if (hasObservers(this.onFocus)) {\n        this._zone.run(() => {\n          this.onFocus.emit();\n        });\n      } // Re-focus the treeview if `close` is prevented\n\n\n      if (this.isOpen && this.treeview) {\n        this.lastNodeOnFocus.setAttribute('tabindex', '0');\n        this.treeview.focus();\n      }\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleBlur(e) {\n    const relatedTarget = e && e.relatedTarget;\n\n    if (this.hostElement.nativeElement.contains(relatedTarget) || this.isOpen && this.popupRef.popupElement.contains(relatedTarget)) {\n      return;\n    }\n\n    this.isFocused = false;\n    this.togglePopup(false);\n\n    if (hasObservers(this.onBlur) || isUntouched(this.hostElement.nativeElement)) {\n      this._zone.run(() => {\n        this.onBlur.emit();\n        this.onTouchedCallback();\n      });\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleClick() {\n    this.togglePopup(!this.isOpen);\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleKeydown(event) {\n    const deleteTag = this.isWrapperActive && event.keyCode === Keys.Backspace && this.tags.length > 0;\n\n    if (deleteTag) {\n      this.handleBackspace();\n      return;\n    }\n\n    if (this.disabled || this.readonly) {\n      return;\n    }\n\n    const eventData = event;\n    const action = this.navigationService.process({\n      originalEvent: eventData\n    });\n\n    if (action === NavigationAction.Open) {\n      eventData.preventDefault();\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleNodeClick(node) {\n    if (!this.isFocused) {\n      // Re-focus the MultiSelectTree when popup close is prevented and a node is clicked\n      // On click the focus should be on the clicked element which is why we need to update the lastNodeOnFocus\n      const parent = node.originalEvent.target.parentElement.parentElement;\n      this.lastNodeOnFocus = parent;\n      this.focus();\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  togglePopup(open) {\n    const isDisabled = this.disabled || this.readonly;\n    const sameState = this.isOpen === open;\n\n    this._zone.run(() => {\n      this.focusedTagIndex = undefined;\n    });\n\n    if (isDisabled || sameState) {\n      return;\n    }\n\n    const togglePrevented = this.triggerPopupEvents(open);\n\n    if (!togglePrevented) {\n      open ? this.createPopup() : this.destroyPopup();\n    } else {\n      this.removeTreeViewFromTabOrder();\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  messageFor(key) {\n    return this.localization.get(key);\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleCheckedItemsChange(items) {\n    this.valueDepth = items.map(item => item.level);\n    this.dataItems = items.slice();\n    this.updateValue(this.dataItems);\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleRemoveTag({\n    tag,\n    index\n  }) {\n    if (this.disabled || this.readonly) {\n      return;\n    }\n\n    const eventArgs = new RemoveTagEvent(tag);\n    this.removeTag.emit(eventArgs);\n\n    if (eventArgs.isDefaultPrevented()) {\n      return;\n    } // Remove tags based on their position index\n\n\n    if (tag instanceof Array) {\n      // Remove group tag\n      this.dataItems = this.dataItems.filter((_item, i) => i < this.showAfter || this.disabledIndices.has(i));\n      this.valueDepth = this.valueDepth.filter((_item, i) => i < this.showAfter || this.disabledIndices.has(i));\n    } else {\n      // Remove single tag\n      this.dataItems = this.dataItems.filter((_item, i) => i !== index || this.disabledIndices.has(i));\n      this.valueDepth = this.valueDepth.filter((_item, i) => i !== index || this.disabledIndices.has(i));\n    }\n\n    this.updateValue(this.dataItems); // focus the wrapper if the component is not focused - the floating label reacts to focus/blur\n\n    if (!this.isFocused) {\n      this.focus();\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleTagMapperChange(showAfter) {\n    this.showAfter = parseNumber(showAfter);\n    this.setTags();\n  }\n  /**\n   * @hidden\n   */\n\n\n  clearAll(event) {\n    event.stopImmediatePropagation();\n    event.preventDefault();\n    this.focus();\n    this.value = this.value.filter((_item, index) => this.disabledIndices.has(index));\n    this.dataItems = this.dataItems.filter((_item, index) => this.disabledIndices.has(index));\n    this.valueDepth = this.valueDepth.filter((_depth, index) => this.disabledIndices.has(index));\n    this.emitValueChange(this.value);\n  }\n  /**\n   * @hidden\n   */\n\n\n  writeValue(value) {\n    this.value = value || []; // Update the dataItems if the value is updated programmatically (non-primitive values only)\n    // In the primitive case, the client should update the dataItems as well\n\n    if (!this.valuePrimitive) {\n      this.dataItems = this.value;\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  registerOnChange(fn) {\n    this.onChangeCallback = fn;\n  }\n  /**\n   * @hidden\n   */\n\n\n  registerOnTouched(fn) {\n    this.onTouchedCallback = fn;\n  }\n  /**\n   * @hidden\n   */\n\n\n  setDisabledState(isDisabled) {\n    this.disabled = isDisabled;\n    this.cdr.markForCheck();\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleFilterInputChange(term) {\n    this.filterChange.next(term);\n    this.allNodesHidden = this.nodes.every((node, index) => !this.isVisible(node, String(index)));\n  }\n\n  verifySettings() {\n    if (!isDevMode()) {\n      return;\n    }\n\n    if (!isPresent(this.valueField) || !isPresent(this.textField)) {\n      throw new Error(MultiSelectTreeMessages.textAndValue);\n    }\n\n    if (!isArray(this.value)) {\n      throw new Error(MultiSelectTreeMessages.array);\n    }\n\n    if (this.value.length > 0) {\n      if (this.valuePrimitive && this.value.some(item => isObject(item))) {\n        throw new Error(MultiSelectTreeMessages.primitive);\n      }\n\n      const isEveryDataItemObject = this.dataItems.every(item => isObject(item.dataItem));\n\n      if (this.valuePrimitive && !isArray(this.dataItems)) {\n        throw new Error(MultiSelectTreeMessages.dataItems);\n      }\n\n      if (this.valuePrimitive && !isEveryDataItemObject) {\n        throw new Error(MultiSelectTreeMessages.dataItems);\n      }\n\n      if (this.valuePrimitive && this.dataItems.length !== this.value.length) {\n        throw new Error(MultiSelectTreeMessages.dataItemsLength);\n      }\n\n      if (!this.valuePrimitive && !isObjectArray(this.value)) {\n        throw new Error(MultiSelectTreeMessages.object);\n      }\n\n      if ((isArray(this.valueField) || isArray(this.textField)) && !isArray(this.valueDepth)) {\n        throw new Error(MultiSelectTreeMessages.valueDepth);\n      }\n\n      if ((isArray(this.valueField) || isArray(this.textField)) && this.valueDepth.length === 0) {\n        throw new Error(MultiSelectTreeMessages.valueDepth);\n      }\n\n      if ((isArray(this.valueField) || isArray(this.textField)) && this.valueDepth.length !== this.value.length) {\n        throw new Error(MultiSelectTreeMessages.valueDepthLength);\n      }\n    }\n  }\n\n  emitValueChange(value) {\n    this.onChangeCallback(value);\n    this.valueChange.emit(value);\n  }\n\n  triggerPopupEvents(open) {\n    const eventArgs = new PreventableEvent();\n    open ? this.open.emit(eventArgs) : this.close.emit(eventArgs);\n    return eventArgs.isDefaultPrevented();\n  }\n\n  createPopup() {\n    const horizontalAlign = this.direction === \"rtl\" ? \"right\" : \"left\";\n    const anchorPosition = {\n      horizontal: horizontalAlign,\n      vertical: 'bottom'\n    };\n    const popupPosition = {\n      horizontal: horizontalAlign,\n      vertical: 'top'\n    };\n    this.popupRef = this.popupService.open({\n      anchor: this.wrapper,\n      appendTo: this.appendTo,\n      anchorAlign: anchorPosition,\n      content: this.popupTemplate,\n      popupAlign: popupPosition,\n      positionMode: 'absolute',\n      popupClass: this.popupContainerClasses\n    });\n    const popupWrapper = this.popupRef.popupElement;\n    const {\n      min,\n      max\n    } = this.width;\n    popupWrapper.style.minWidth = min;\n    popupWrapper.style.width = max;\n    popupWrapper.style.height = this.height;\n    this.renderer.setAttribute(popupWrapper, 'dir', this.direction);\n    this.renderer.setAttribute(this.wrapper.nativeElement, 'aria-expanded', 'true');\n    this.popupRef.popupOpen.subscribe(() => {\n      this.cdr.detectChanges();\n      this.opened.emit();\n    });\n    this.popupRef.popupClose.subscribe(() => {\n      this.closed.emit();\n    });\n  }\n\n  destroyPopup() {\n    if (this.popupRef) {\n      this.popupRef.close();\n      this.popupRef = null;\n      this.renderer.setAttribute(this.wrapper.nativeElement, 'aria-expanded', 'false');\n\n      if (this.filter !== \"\") {\n        this.filter = \"\";\n        this.allNodesHidden = false;\n\n        if (hasObservers(this.filterChange)) {\n          this._zone.run(() => {\n            this.filterChange.emit(\"\");\n          });\n        }\n      }\n    }\n  }\n\n  subscribeEvents() {\n    this.subscriptions.push(this.navigationService.open.subscribe(() => this.togglePopup(true)), this.navigationService.enter.pipe(tap(event => event.originalEvent.preventDefault())).subscribe(() => this.togglePopup(true)), merge(this.navigationService.close, this.navigationService.esc).subscribe(() => {\n      this.focus();\n      this.togglePopup(false);\n    }), this.navigationService.tab.subscribe(this.handleTabKey.bind(this)), this.navigationService.up.subscribe(this.handleUpKey.bind(this)), this.navigationService.down.subscribe(this.handleDownKey.bind(this)), this.navigationService.left.pipe(filter(() => !this.isTreeViewActive)).subscribe(this.direction === 'rtl' ? this.handleRightKey.bind(this) : this.handleLeftKey.bind(this)), this.navigationService.right.pipe(filter(() => !this.isTreeViewActive)).subscribe(this.direction === 'rtl' ? this.handleLeftKey.bind(this) : this.handleRightKey.bind(this)), this.navigationService.home.pipe(filter(() => !this.isOpen)).subscribe(this.handleHome.bind(this)), this.navigationService.end.pipe(filter(() => !this.isOpen)).subscribe(this.handleEnd.bind(this)), this.navigationService.backspace.pipe(filter(() => this.isTagFocused)).subscribe(this.handleBackspace.bind(this)), this.navigationService.delete.pipe(filter(() => this.isTagFocused)).subscribe(this.handleDelete.bind(this)));\n  }\n\n  handleTabKey() {\n    this.focus();\n\n    if (this.isOpen) {\n      this.treeview.blur();\n      this.removeTreeViewFromTabOrder();\n    }\n  }\n\n  handleUpKey(event) {\n    if (!this.treeview) {\n      return;\n    }\n\n    event.originalEvent.preventDefault(); // Prevent toggling the focus between the filterInput and the wrapper elements with `up` key\n\n    if (this.isWrapperActive) {\n      return;\n    }\n\n    const isFirstNodeActive = this.treeview['navigationService']['activeIndex'] === '0';\n\n    if (this.filterable) {\n      const isFilterActive = this.filterInput.nativeElement === document.activeElement;\n\n      if (isFilterActive) {\n        this.focus();\n      } else if (!isFilterActive && isFirstNodeActive) {\n        this.filterInput.nativeElement.focus();\n      }\n    }\n\n    if (!this.filterable && isFirstNodeActive) {\n      this.focus();\n    }\n  }\n\n  handleDownKey(event) {\n    if (!this.treeview) {\n      return;\n    }\n\n    event.originalEvent.preventDefault(); // Put the focus back on the filter input if the wrapper is focused\n\n    if (this.filterable && this.isWrapperActive) {\n      this.filterInput.nativeElement.focus();\n    } else if (!this.treeview.isActive) {\n      this.treeview.focus();\n    }\n\n    this.focusedTagIndex = undefined;\n  }\n\n  handleRightKey(event) {\n    event.originalEvent.preventDefault();\n    const last = this.tags.length - 1;\n\n    if (this.focusedTagIndex === last) {\n      this.focusedTagIndex = undefined;\n    } else if (this.focusedTagIndex < last) {\n      this.focusedTagIndex++;\n    } else if (!this.focusedTagIndex) {\n      this.focusedTagIndex = 0;\n    }\n  }\n\n  handleLeftKey(event) {\n    event.originalEvent.preventDefault();\n\n    if (this.focusedTagIndex === undefined || this.focusedTagIndex < 0) {\n      this.focusedTagIndex = this.tags.length - 1;\n    } else if (this.focusedTagIndex !== 0) {\n      this.focusedTagIndex--;\n    }\n  }\n\n  handleEnd(event) {\n    event.originalEvent.preventDefault();\n    this.focusedTagIndex = this.tags.length - 1;\n  }\n\n  handleHome(event) {\n    event.originalEvent.preventDefault();\n    this.focusedTagIndex = 0;\n  }\n\n  handleBackspace() {\n    if (this.focusedTagIndex !== undefined) {\n      this.handleDelete();\n    } else {\n      const tag = this.tags[this.tags.length - 1];\n      const index = this.tags.length - 1;\n      this.handleRemoveTag({\n        tag,\n        index\n      });\n    }\n  }\n\n  handleDelete() {\n    const tag = this.tags[this.focusedTagIndex];\n    const index = this.focusedTagIndex;\n    this.handleRemoveTag({\n      tag,\n      index\n    });\n\n    if (this.focusedTagIndex === this.tags.length) {\n      this.focusedTagIndex = undefined;\n    }\n  }\n\n  unsubscribeEvents() {\n    this.subscriptions.forEach(sub => sub.unsubscribe());\n  }\n  /**\n   * Remove the `TreeView` from the tab order, otherwise a focus loop between the page elements will occur\n   * and the user will not be able to tab to the rest of the browser elements\n   */\n\n\n  removeTreeViewFromTabOrder() {\n    const nodes = this.treeview.element.nativeElement.querySelectorAll('li');\n    nodes.forEach(item => {\n      if (item.getAttribute('tabindex') === '0') {\n        this.lastNodeOnFocus = item;\n        this.lastNodeOnFocus.setAttribute('tabindex', '-1');\n      }\n    });\n  }\n\n  setState() {\n    if (isPresent(this.dataItems) && isPresent(this.valueField)) {\n      this.setTags();\n      this.checkedItems = this.dataItems.slice();\n    }\n\n    this.cdr.markForCheck();\n  }\n\n  setTags() {\n    const source = this.dataItems.map(item => item.dataItem);\n    this.tags = this.tagMapper(source);\n    this.disabledIndices = this.disabledItemsMapper();\n  }\n\n  updateValue(value) {\n    const newValue = this.valuePrimitive ? value.map(item => valueFrom(item, this.valueField)) : value.map(item => item.dataItem);\n    this.value = newValue;\n    this.emitValueChange(this.value);\n  }\n  /**\n   * @hidden\n   *\n   * Determines which of the provided tags should be disabled and stores their position indices\n   */\n\n\n  disabledItemsMapper() {\n    return new Set(this.dataItems.reduce((indices, item, index) => {\n      if (this.itemDisabled(item.dataItem, item.index)) {\n        indices.push(index);\n      }\n\n      return indices;\n    }, []));\n  }\n\n};\n\nMultiSelectTreeComponent.ɵfac = function MultiSelectTreeComponent_Factory(t) {\n  return new (t || MultiSelectTreeComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc4.PopupService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NavigationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(TOUCH_ENABLED, 8));\n};\n\nMultiSelectTreeComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: MultiSelectTreeComponent,\n  selectors: [[\"kendo-multiselecttree\"]],\n  contentQueries: function MultiSelectTreeComponent_ContentQueries(rf, ctx, dirIndex) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵcontentQuery(dirIndex, HeaderTemplateDirective, 5);\n      ɵngcc0.ɵɵcontentQuery(dirIndex, FooterTemplateDirective, 5);\n      ɵngcc0.ɵɵcontentQuery(dirIndex, NodeTemplateDirective, 5);\n      ɵngcc0.ɵɵcontentQuery(dirIndex, NoDataTemplateDirective, 5);\n      ɵngcc0.ɵɵcontentQuery(dirIndex, TagTemplateDirective, 5);\n      ɵngcc0.ɵɵcontentQuery(dirIndex, GroupTagTemplateDirective, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.headerTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.footerTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.nodeTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.noDataTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.tagTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.groupTagTemplate = _t.first);\n    }\n  },\n  viewQuery: function MultiSelectTreeComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵviewQuery(_c41, 5);\n      ɵngcc0.ɵɵviewQuery(_c12, 7);\n      ɵngcc0.ɵɵviewQuery(_c19, 7);\n      ɵngcc0.ɵɵviewQuery(_c11, 7, ViewContainerRef);\n      ɵngcc0.ɵɵviewQuery(_c42, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.treeview = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.popupTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.wrapper = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.container = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.filterInput = _t.first);\n    }\n  },\n  hostVars: 5,\n  hostBindings: function MultiSelectTreeComponent_HostBindings(rf, ctx) {\n    if (rf & 2) {\n      ɵngcc0.ɵɵattribute(\"dir\", ctx.direction);\n      ɵngcc0.ɵɵclassProp(\"k-widget\", ctx.hostClasses)(\"k-dropdowntree\", ctx.hostClasses);\n    }\n  },\n  inputs: {\n    valueDepth: \"valueDepth\",\n    placeholder: \"placeholder\",\n    listHeight: \"listHeight\",\n    disabled: \"disabled\",\n    readonly: \"readonly\",\n    valuePrimitive: \"valuePrimitive\",\n    loadOnDemand: \"loadOnDemand\",\n    focusableId: \"focusableId\",\n    clearButton: \"clearButton\",\n    filterable: \"filterable\",\n    hasChildren: \"hasChildren\",\n    fetchChildren: \"fetchChildren\",\n    isNodeVisible: \"isNodeVisible\",\n    itemDisabled: \"itemDisabled\",\n    tagMapper: \"tagMapper\",\n    tabindex: \"tabindex\",\n    popupSettings: \"popupSettings\",\n    checkableSettings: \"checkableSettings\",\n    data: \"data\",\n    value: \"value\",\n    dataItems: \"dataItems\",\n    isNodeExpanded: \"isNodeExpanded\",\n    textField: \"textField\",\n    valueField: \"valueField\",\n    loading: \"loading\"\n  },\n  outputs: {\n    onFocus: \"focus\",\n    onBlur: \"blur\",\n    open: \"open\",\n    opened: \"opened\",\n    close: \"close\",\n    closed: \"closed\",\n    nodeExpand: \"nodeExpand\",\n    nodeCollapse: \"nodeCollapse\",\n    valueChange: \"valueChange\",\n    removeTag: \"removeTag\",\n    filterChange: \"filterChange\"\n  },\n  exportAs: [\"kendoMultiSelectTree\"],\n  features: [ɵngcc0.ɵɵProvidersFeature([LocalizationService, NavigationService, DataService, DisabledItemsService, SelectionService, {\n    provide: L10N_PREFIX,\n    useValue: 'kendo.multiselecttree'\n  }, {\n    multi: true,\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => MultiSelectTreeComponent_1)\n  }, {\n    provide: DataBoundComponent,\n    useExisting: forwardRef(() => MultiSelectTreeComponent_1)\n  }, {\n    provide: ExpandableComponent,\n    useExisting: forwardRef(() => MultiSelectTreeComponent_1)\n  }, {\n    provide: KendoInput,\n    useExisting: forwardRef(() => MultiSelectTreeComponent_1)\n  }]), ɵngcc0.ɵɵNgOnChangesFeature],\n  decls: 11,\n  vars: 28,\n  consts: function () {\n    let i18n_48;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The text displayed in the popup when there are no items\n       * @meaning kendo.multiselecttree.noDataText\n       */\n      const MSG_EXTERNAL_5589893825114548617$$DIST_FESM2015_INDEX_JS_49 = goog.getMsg(\"NO DATA FOUND\");\n      i18n_48 = MSG_EXTERNAL_5589893825114548617$$DIST_FESM2015_INDEX_JS_49;\n    } else {\n      i18n_48 = $localize`:kendo.multiselecttree.noDataText|The text displayed in the popup when there are no items␟1689309191709bbbb071c889072707cb3f12dc93␟5589893825114548617:NO DATA FOUND`;\n    }\n\n    let i18n_50;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The title of the clear button\n       * @meaning kendo.multiselecttree.clearTitle\n       */\n      const MSG_EXTERNAL_7268188619735862842$$DIST_FESM2015_INDEX_JS_51 = goog.getMsg(\"clear\");\n      i18n_50 = MSG_EXTERNAL_7268188619735862842$$DIST_FESM2015_INDEX_JS_51;\n    } else {\n      i18n_50 = $localize`:kendo.multiselecttree.clearTitle|The title of the clear button␟f99cf5ed2ae05c7d1df8dc97f56176a4934c8db9␟7268188619735862842:clear`;\n    }\n\n    return [[\"kendoMultiSelectTreeLocalizedMessages\", \"\", \"noDataText\", i18n_48, \"clearTitle\", i18n_50], [\"role\", \"listbox\", \"aria-haspopup\", \"tree\", 3, \"ngClass\", \"kendoEventsOutsideAngular\", \"scope\", \"click\", \"keydown\"], [\"wrapper\", \"\"], [3, \"id\", \"tags\", \"focused\", \"textField\", \"valueField\", \"valueDepth\", \"disabled\", \"tagPrefix\", \"template\", \"groupTemplate\", \"disabledIndices\", \"removeTag\"], [\"class\", \"k-input k-readonly\", 4, \"ngIf\"], [\"class\", \"k-icon k-clear-value k-i-close\", \"role\", \"button\", \"tabindex\", \"-1\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"k-icon k-i-loading\", 4, \"ngIf\"], [\"popupTemplate\", \"\"], [\"container\", \"\"], [1, \"k-input\", \"k-readonly\"], [\"role\", \"button\", \"tabindex\", \"-1\", 1, \"k-icon\", \"k-clear-value\", \"k-i-close\", 3, \"click\"], [1, \"k-icon\", \"k-i-loading\"], [\"class\", \"k-list-filter\", 4, \"ngIf\"], [4, \"ngIf\"], [\"kendoMultiSelectTreeCheckable\", \"\", 3, \"nodes\", \"animate\", \"checkable\", \"checkedItems\", \"valueField\", \"textField\", \"children\", \"hasChildren\", \"isExpanded\", \"isDisabled\", \"nodeTemplate\", \"loadOnDemand\", \"filter\", \"isVisible\", \"kendoEventsOutsideAngular\", \"scope\", \"keydown\", \"nodeClick\", \"expand\", \"collapse\", \"checkedItemsChange\"], [\"treeview\", \"\"], [\"class\", \"k-nodata\", 4, \"ngIf\"], [1, \"k-list-filter\"], [\"role\", \"textbox\", \"aria-haspopup\", \"true\", \"aria-expanded\", \"false\", \"tabindex\", \"0\", \"aria-disabled\", \"false\", \"aria-readonly\", \"false\", 1, \"k-textbox\", 3, \"filterInput\", \"ngModel\", \"kendoEventsOutsideAngular\", \"scope\", \"input\", \"keydown.arrowdown\", \"keydown.arrowup\", \"keydown.alt.arrowup\", \"ngModelChange\"], [\"filterInput\", \"\"], [1, \"k-icon\", \"k-i-zoom\"], [3, \"templateContext\"], [1, \"k-nodata\"], [3, \"ngIf\", \"templateContext\"], [3, \"ngIf\"]];\n  },\n  template: function MultiSelectTreeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵelementContainer(0, 0);\n      ɵngcc0.ɵɵelementStart(1, \"div\", 1, 2);\n      ɵngcc0.ɵɵlistener(\"click\", function MultiSelectTreeComponent_Template_div_click_1_listener() {\n        return ctx.handleClick();\n      })(\"keydown\", function MultiSelectTreeComponent_Template_div_keydown_1_listener($event) {\n        return ctx.handleKeydown($event);\n      });\n      ɵngcc0.ɵɵelementStart(3, \"kendo-taglist\", 3);\n      ɵngcc0.ɵɵlistener(\"removeTag\", function MultiSelectTreeComponent_Template_kendo_taglist_removeTag_3_listener($event) {\n        return ctx.handleRemoveTag($event);\n      });\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵtemplate(4, MultiSelectTreeComponent_span_4_Template, 2, 1, \"span\", 4);\n      ɵngcc0.ɵɵtemplate(5, MultiSelectTreeComponent_span_5_Template, 1, 1, \"span\", 5);\n      ɵngcc0.ɵɵtemplate(6, MultiSelectTreeComponent_span_6_Template, 1, 0, \"span\", 6);\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵtemplate(7, MultiSelectTreeComponent_ng_template_7_Template, 6, 24, \"ng-template\", null, 7, ɵngcc0.ɵɵtemplateRefExtractor);\n      ɵngcc0.ɵɵelementContainer(9, null, 8);\n    }\n\n    if (rf & 2) {\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngClass\", ɵngcc0.ɵɵpureFunction1(23, _c53, ctx.disabled))(\"kendoEventsOutsideAngular\", ɵngcc0.ɵɵpureFunction2(25, _c1, ctx.handleFocus, ctx.handleBlur))(\"scope\", ctx);\n      ɵngcc0.ɵɵattribute(\"aria-describedby\", ctx.tagListId)(\"aria-readonly\", ctx.readonly)(\"aria-activedescendant\", ctx.focusedTagId)(\"tabindex\", ctx.tabindex)(\"id\", ctx.focusableId)(\"dir\", ctx.direction);\n      ɵngcc0.ɵɵadvance(2);\n      ɵngcc0.ɵɵproperty(\"id\", ctx.tagListId)(\"tags\", ctx.tags)(\"focused\", ctx.focusedTagIndex)(\"textField\", ctx.textField)(\"valueField\", ctx.valueField)(\"valueDepth\", ctx.valueDepth)(\"disabled\", ctx.disabled)(\"tagPrefix\", ctx.tagPrefix)(\"template\", ctx.tagTemplate)(\"groupTemplate\", ctx.groupTagTemplate)(\"disabledIndices\", ctx.disabledIndices);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.tags || !ctx.tags.length);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.disabled && !ctx.loading && !ctx.readonly && ctx.clearButton && (ctx.tags == null ? null : ctx.tags.length));\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngIf\", ctx.loading);\n    }\n  },\n  directives: function () {\n    return [LocalizedMessagesDirective, ɵngcc3.NgClass, ɵngcc2.EventsOutsideAngularDirective, TagListComponent, ɵngcc3.NgIf, ɵngcc6.TreeViewComponent, CheckDirective, ɵngcc5.DefaultValueAccessor, FilterInputDirective, ɵngcc5.NgControlStatus, ɵngcc5.NgModel, TemplateContextDirective];\n  },\n  encapsulation: 2\n});\n\n__decorate([HostBinding('class.k-widget'), HostBinding('class.k-dropdowntree'), __metadata(\"design:type\", Boolean)], MultiSelectTreeComponent.prototype, \"hostClasses\", void 0);\n\n__decorate([HostBinding('attr.dir'), __metadata(\"design:type\", String)], MultiSelectTreeComponent.prototype, \"direction\", void 0);\n\n__decorate([ContentChild(HeaderTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", HeaderTemplateDirective)], MultiSelectTreeComponent.prototype, \"headerTemplate\", void 0);\n\n__decorate([ContentChild(FooterTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", FooterTemplateDirective)], MultiSelectTreeComponent.prototype, \"footerTemplate\", void 0);\n\n__decorate([ContentChild(NodeTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", NodeTemplateDirective)], MultiSelectTreeComponent.prototype, \"nodeTemplate\", void 0);\n\n__decorate([ContentChild(NoDataTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", NoDataTemplateDirective)], MultiSelectTreeComponent.prototype, \"noDataTemplate\", void 0);\n\n__decorate([ContentChild(TagTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", TagTemplateDirective)], MultiSelectTreeComponent.prototype, \"tagTemplate\", void 0);\n\n__decorate([ContentChild(GroupTagTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", GroupTagTemplateDirective)], MultiSelectTreeComponent.prototype, \"groupTagTemplate\", void 0);\n\n__decorate([ViewChild('popupTemplate', {\n  static: true\n}), __metadata(\"design:type\", TemplateRef)], MultiSelectTreeComponent.prototype, \"popupTemplate\", void 0);\n\n__decorate([ViewChild('wrapper', {\n  static: true\n}), __metadata(\"design:type\", ElementRef)], MultiSelectTreeComponent.prototype, \"wrapper\", void 0);\n\n__decorate([ViewChild('container', {\n  read: ViewContainerRef,\n  static: true\n}), __metadata(\"design:type\", ViewContainerRef)], MultiSelectTreeComponent.prototype, \"container\", void 0);\n\n__decorate([ViewChild('treeview', {\n  static: false\n}), __metadata(\"design:type\", TreeViewComponent), __metadata(\"design:paramtypes\", [TreeViewComponent])], MultiSelectTreeComponent.prototype, \"treeview\", null);\n\n__decorate([ViewChild('filterInput', {\n  static: false\n}), __metadata(\"design:type\", ElementRef)], MultiSelectTreeComponent.prototype, \"filterInput\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Number), __metadata(\"design:paramtypes\", [Number])], MultiSelectTreeComponent.prototype, \"tabindex\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], MultiSelectTreeComponent.prototype, \"popupSettings\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], MultiSelectTreeComponent.prototype, \"checkableSettings\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Array), __metadata(\"design:paramtypes\", [Array])], MultiSelectTreeComponent.prototype, \"data\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Array), __metadata(\"design:paramtypes\", [Array])], MultiSelectTreeComponent.prototype, \"value\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Array), __metadata(\"design:paramtypes\", [Array])], MultiSelectTreeComponent.prototype, \"dataItems\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Object)], MultiSelectTreeComponent.prototype, \"textField\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Object)], MultiSelectTreeComponent.prototype, \"valueField\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Array)], MultiSelectTreeComponent.prototype, \"valueDepth\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], MultiSelectTreeComponent.prototype, \"loading\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], MultiSelectTreeComponent.prototype, \"placeholder\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Number)], MultiSelectTreeComponent.prototype, \"listHeight\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], MultiSelectTreeComponent.prototype, \"disabled\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], MultiSelectTreeComponent.prototype, \"readonly\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], MultiSelectTreeComponent.prototype, \"valuePrimitive\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], MultiSelectTreeComponent.prototype, \"loadOnDemand\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], MultiSelectTreeComponent.prototype, \"focusableId\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], MultiSelectTreeComponent.prototype, \"clearButton\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], MultiSelectTreeComponent.prototype, \"filterable\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Function)], MultiSelectTreeComponent.prototype, \"hasChildren\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Function)], MultiSelectTreeComponent.prototype, \"fetchChildren\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Function)], MultiSelectTreeComponent.prototype, \"isNodeExpanded\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Function)], MultiSelectTreeComponent.prototype, \"isNodeVisible\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Function)], MultiSelectTreeComponent.prototype, \"itemDisabled\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Object)], MultiSelectTreeComponent.prototype, \"tagMapper\", void 0);\n\n__decorate([Output('focus'), __metadata(\"design:type\", EventEmitter)], MultiSelectTreeComponent.prototype, \"onFocus\", void 0);\n\n__decorate([Output('blur'), __metadata(\"design:type\", EventEmitter)], MultiSelectTreeComponent.prototype, \"onBlur\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], MultiSelectTreeComponent.prototype, \"open\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], MultiSelectTreeComponent.prototype, \"opened\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], MultiSelectTreeComponent.prototype, \"close\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], MultiSelectTreeComponent.prototype, \"closed\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], MultiSelectTreeComponent.prototype, \"nodeExpand\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], MultiSelectTreeComponent.prototype, \"nodeCollapse\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], MultiSelectTreeComponent.prototype, \"valueChange\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], MultiSelectTreeComponent.prototype, \"removeTag\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], MultiSelectTreeComponent.prototype, \"filterChange\", void 0);\n\nMultiSelectTreeComponent = MultiSelectTreeComponent_1 = __decorate([__param(7, Optional()), __param(7, Inject(TOUCH_ENABLED)), __metadata(\"design:paramtypes\", [PopupService, Renderer2, ElementRef, NavigationService, NgZone, LocalizationService, ChangeDetectorRef, Boolean])], MultiSelectTreeComponent);\n/**\n * A directive which encapsulates the retrieval of the child nodes when flat data is provided.\n */\n\nlet DropDownTreeFlatBindingDirective = /*#__PURE__*/(() => {\n  let DropDownTreeFlatBindingDirective = class DropDownTreeFlatBindingDirective extends FlatDataBindingDirective {\n    constructor(dropDownTree) {\n      super(dropDownTree);\n    }\n\n  };\n\n  DropDownTreeFlatBindingDirective.ɵfac = function DropDownTreeFlatBindingDirective_Factory(t) {\n    return new (t || DropDownTreeFlatBindingDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc6.DataBoundComponent));\n  };\n\n  DropDownTreeFlatBindingDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: DropDownTreeFlatBindingDirective,\n    selectors: [[\"\", \"kendoDropDownTreeFlatBinding\", \"\"]],\n    inputs: {\n      nodes: [\"kendoDropDownTreeFlatBinding\", \"nodes\"],\n      idField: [\"valueField\", \"idField\"]\n    },\n    features: [ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n\n  __decorate([Input('kendoDropDownTreeFlatBinding'), __metadata(\"design:type\", Array)], DropDownTreeFlatBindingDirective.prototype, \"nodes\", void 0);\n\n  __decorate([Input('valueField'), __metadata(\"design:type\", String)], DropDownTreeFlatBindingDirective.prototype, \"idField\", void 0);\n\n  DropDownTreeFlatBindingDirective = __decorate([__metadata(\"design:paramtypes\", [DataBoundComponent])], DropDownTreeFlatBindingDirective);\n  /**\n   * A directive which encapsulates the retrieval of the child nodes when hierarchical data is provided.\n   */\n\n  return DropDownTreeFlatBindingDirective;\n})();\nlet DropDownTreeHierarchyBindingDirective = /*#__PURE__*/(() => {\n  let DropDownTreeHierarchyBindingDirective = class DropDownTreeHierarchyBindingDirective extends HierarchyBindingDirective {\n    constructor(dropDownTree) {\n      super(dropDownTree);\n      this.dropDownTree = dropDownTree;\n    }\n    /**\n     * The nodes which will be displayed by the DropDownTree.\n     */\n\n\n    set data(nodes) {\n      this.dropDownTree.nodes = nodes;\n      this.nodes = nodes;\n    }\n\n  };\n\n  DropDownTreeHierarchyBindingDirective.ɵfac = function DropDownTreeHierarchyBindingDirective_Factory(t) {\n    return new (t || DropDownTreeHierarchyBindingDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc6.DataBoundComponent));\n  };\n\n  DropDownTreeHierarchyBindingDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: DropDownTreeHierarchyBindingDirective,\n    selectors: [[\"\", \"kendoDropDownTreeHierarchyBinding\", \"\"]],\n    inputs: {\n      data: [\"kendoDropDownTreeHierarchyBinding\", \"data\"]\n    },\n    features: [ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n\n  __decorate([Input('kendoDropDownTreeHierarchyBinding'), __metadata(\"design:type\", Array), __metadata(\"design:paramtypes\", [Array])], DropDownTreeHierarchyBindingDirective.prototype, \"data\", null);\n\n  DropDownTreeHierarchyBindingDirective = __decorate([__metadata(\"design:paramtypes\", [DataBoundComponent])], DropDownTreeHierarchyBindingDirective);\n  /**\n   * A directive which encapsulates the retrieval of the child nodes when flat data is provided.\n   */\n\n  return DropDownTreeHierarchyBindingDirective;\n})();\nlet MultiSelectTreeFlatBindingDirective = /*#__PURE__*/(() => {\n  let MultiSelectTreeFlatBindingDirective = class MultiSelectTreeFlatBindingDirective extends FlatDataBindingDirective {\n    constructor(multiSelectTree) {\n      super(multiSelectTree);\n    }\n\n  };\n\n  MultiSelectTreeFlatBindingDirective.ɵfac = function MultiSelectTreeFlatBindingDirective_Factory(t) {\n    return new (t || MultiSelectTreeFlatBindingDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc6.DataBoundComponent));\n  };\n\n  MultiSelectTreeFlatBindingDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: MultiSelectTreeFlatBindingDirective,\n    selectors: [[\"\", \"kendoMultiSelectTreeFlatBinding\", \"\"]],\n    inputs: {\n      nodes: [\"kendoMultiSelectTreeFlatBinding\", \"nodes\"],\n      idField: [\"valueField\", \"idField\"]\n    },\n    features: [ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n\n  __decorate([Input('kendoMultiSelectTreeFlatBinding'), __metadata(\"design:type\", Array)], MultiSelectTreeFlatBindingDirective.prototype, \"nodes\", void 0);\n\n  __decorate([Input('valueField'), __metadata(\"design:type\", String)], MultiSelectTreeFlatBindingDirective.prototype, \"idField\", void 0);\n\n  MultiSelectTreeFlatBindingDirective = __decorate([__metadata(\"design:paramtypes\", [DataBoundComponent])], MultiSelectTreeFlatBindingDirective);\n  /**\n   * A directive which encapsulates the retrieval of the child nodes when hierarchical data is provided.\n   */\n\n  return MultiSelectTreeFlatBindingDirective;\n})();\nlet MultiSelectTreeHierarchyBindingDirective = /*#__PURE__*/(() => {\n  let MultiSelectTreeHierarchyBindingDirective = class MultiSelectTreeHierarchyBindingDirective extends HierarchyBindingDirective {\n    constructor(multiSelectTree) {\n      super(multiSelectTree);\n      this.multiSelectTree = multiSelectTree;\n    }\n    /**\n     * The nodes which will be displayed by the MultiSelectTree.\n     */\n\n\n    set data(nodes) {\n      this.multiSelectTree.nodes = nodes;\n      this.nodes = nodes;\n    }\n\n  };\n\n  MultiSelectTreeHierarchyBindingDirective.ɵfac = function MultiSelectTreeHierarchyBindingDirective_Factory(t) {\n    return new (t || MultiSelectTreeHierarchyBindingDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc6.DataBoundComponent));\n  };\n\n  MultiSelectTreeHierarchyBindingDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: MultiSelectTreeHierarchyBindingDirective,\n    selectors: [[\"\", \"kendoMultiSelectTreeHierarchyBinding\", \"\"]],\n    inputs: {\n      data: [\"kendoMultiSelectTreeHierarchyBinding\", \"data\"]\n    },\n    features: [ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n\n  __decorate([Input('kendoMultiSelectTreeHierarchyBinding'), __metadata(\"design:type\", Array), __metadata(\"design:paramtypes\", [Array])], MultiSelectTreeHierarchyBindingDirective.prototype, \"data\", null);\n\n  MultiSelectTreeHierarchyBindingDirective = __decorate([__metadata(\"design:paramtypes\", [DataBoundComponent])], MultiSelectTreeHierarchyBindingDirective);\n  /**\n   * A directive which manages the expanded state of the popup TreeView.\n   */\n\n  return MultiSelectTreeHierarchyBindingDirective;\n})();\nlet DropDownTreesExpandDirective = /*#__PURE__*/(() => {\n  let DropDownTreesExpandDirective = class DropDownTreesExpandDirective extends ExpandDirective {\n    constructor(dropDownTree) {\n      super(dropDownTree);\n    }\n\n  };\n\n  DropDownTreesExpandDirective.ɵfac = function DropDownTreesExpandDirective_Factory(t) {\n    return new (t || DropDownTreesExpandDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc6.ExpandableComponent));\n  };\n\n  DropDownTreesExpandDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: DropDownTreesExpandDirective,\n    selectors: [[\"\", \"kendoDropDownTreeExpandable\", \"\"], [\"\", \"kendoMultiSelectTreeExpandable\", \"\"]],\n    inputs: {\n      isExpanded: [\"isNodeExpanded\", \"isExpanded\"]\n    },\n    features: [ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n\n  __decorate([Input('isNodeExpanded'), __metadata(\"design:type\", Function)], DropDownTreesExpandDirective.prototype, \"isExpanded\", void 0);\n\n  DropDownTreesExpandDirective = __decorate([__metadata(\"design:paramtypes\", [ExpandableComponent])], DropDownTreesExpandDirective);\n  /**\n   * @hidden\n   */\n\n  return DropDownTreesExpandDirective;\n})();\nlet TagListComponent = /*#__PURE__*/(() => {\n  let TagListComponent = class TagListComponent {\n    /**\n     * @hidden\n     */\n    constructor() {\n      /**\n       * A collection with the disabled tags' indices.\n       */\n      this.disabledIndices = new Set();\n      this.removeTag = new EventEmitter();\n    }\n\n    tagProp(tag, prop, index) {\n      const propField = prop && this.getPropField(tag, prop, index);\n      return getter$1(tag, propField);\n    }\n\n    isTagDisabled(tag, positionIndex) {\n      if (this.isGroupTag(tag)) {\n        /** The `positionIndex` is used to determine after how many single tags is the group tag displayed =>\n         * => it is used to increment the indices inside the group tag so that we determine the actual position index\n         * of each group tag item as they appear in the `value` (important to check against `disabledIndices`)\n         * e.g. `disabledIndices = [0, 1]` && `tags = ['Small', ['Medium', 'Large']]` => without the incrementation with\n         * `positionIndex`, the group tag would yield [0, 1] as indices, while it should yield [1, 2]\n         */\n        return tag.every((_tag, index) => this.disabledIndices.has(index + positionIndex));\n      }\n\n      return this.disabledIndices.has(positionIndex);\n    }\n\n    deleteTag(event, tag, index) {\n      event.preventDefault();\n      event.stopImmediatePropagation();\n\n      if (!this.disabled && event.which === 1) {\n        this.removeTag.emit({\n          tag,\n          index\n        });\n      }\n    }\n\n    itemId(tag, index) {\n      if (tag) {\n        //because of custom values\n        return this.tagPrefix + \"-\" + this.tagProp(tag, this.valueField, index);\n      }\n    }\n\n    isGroupTag(tag) {\n      return tag instanceof Array;\n    }\n\n    tagAriaHidden(index) {\n      return isPresent(this.focused) && this.focused !== index;\n    }\n\n    getPropField(tag, prop, index) {\n      // Needed for MultiSelectTree value binding (Heterogeneous Data)\n      const fieldsCount = prop.length - 1;\n\n      if (typeof prop === 'string') {\n        return prop;\n      } else if (this.valueDepth) {\n        const depth = this.valueDepth[index];\n        return fieldsCount < depth ? prop[fieldsCount] : prop[depth];\n      } else {\n        return prop.find(item => item in tag);\n      }\n    }\n\n  };\n\n  TagListComponent.ɵfac = function TagListComponent_Factory(t) {\n    return new (t || TagListComponent)();\n  };\n\n  TagListComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: TagListComponent,\n    selectors: [[\"kendo-taglist\"]],\n    inputs: {\n      disabledIndices: \"disabledIndices\",\n      tags: \"tags\",\n      textField: \"textField\",\n      valueField: \"valueField\",\n      valueDepth: \"valueDepth\",\n      focused: \"focused\",\n      template: \"template\",\n      groupTemplate: \"groupTemplate\",\n      disabled: \"disabled\",\n      tagPrefix: \"tagPrefix\",\n      id: \"id\"\n    },\n    outputs: {\n      removeTag: \"removeTag\"\n    },\n    decls: 2,\n    vars: 2,\n    consts: [[1, \"k-reset\"], [\"role\", \"option\", \"aria-selected\", \"true\", \"class\", \"k-button\", 3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [\"role\", \"option\", \"aria-selected\", \"true\", 1, \"k-button\", 3, \"ngClass\"], [4, \"ngIf\", \"ngIfThen\", \"ngIfElse\"], [\"groupTag\", \"\"], [\"singleTag\", \"\"], [\"aria-label\", \"delete\", 1, \"k-select\"], [1, \"k-icon\", \"k-i-close\", 3, \"mousedown\"], [4, \"ngIf\"], [3, \"ngIf\"], [3, \"templateContext\"]],\n    template: function TagListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"ul\", 0);\n        ɵngcc0.ɵɵtemplate(1, TagListComponent_li_1_Template, 8, 11, \"li\", 1);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"id\", ctx.id);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.tags);\n      }\n    },\n    directives: function () {\n      return [ɵngcc3.NgForOf, ListItemDirective, ɵngcc3.NgClass, ɵngcc3.NgIf, TemplateContextDirective];\n    },\n    encapsulation: 2\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", Array)], TagListComponent.prototype, \"tags\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], TagListComponent.prototype, \"textField\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], TagListComponent.prototype, \"valueField\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Array)], TagListComponent.prototype, \"valueDepth\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Number)], TagListComponent.prototype, \"focused\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", TagTemplateDirective)], TagListComponent.prototype, \"template\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", GroupTagTemplateDirective)], TagListComponent.prototype, \"groupTemplate\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], TagListComponent.prototype, \"disabled\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], TagListComponent.prototype, \"tagPrefix\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], TagListComponent.prototype, \"id\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Set)], TagListComponent.prototype, \"disabledIndices\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], TagListComponent.prototype, \"removeTag\", void 0);\n  /**\n   * @hidden\n   */\n\n\n  return TagListComponent;\n})();\nlet Messages = /*#__PURE__*/(() => {\n  class Messages extends ComponentMessages {}\n\n  Messages.ɵfac = /*@__PURE__*/function () {\n    let ɵMessages_BaseFactory;\n    return function Messages_Factory(t) {\n      return (ɵMessages_BaseFactory || (ɵMessages_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(Messages)))(t || Messages);\n    };\n  }();\n\n  Messages.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: Messages,\n    inputs: {\n      noDataText: \"noDataText\",\n      clearTitle: \"clearTitle\"\n    },\n    features: [ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", String)], Messages.prototype, \"noDataText\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], Messages.prototype, \"clearTitle\", void 0);\n\n  return Messages;\n})();\nvar LocalizedMessagesDirective_1;\n/**\n * @hidden\n */\n\nlet LocalizedMessagesDirective = LocalizedMessagesDirective_1 = class LocalizedMessagesDirective extends Messages {\n  constructor(service) {\n    super();\n    this.service = service;\n  }\n\n};\n\nLocalizedMessagesDirective.ɵfac = function LocalizedMessagesDirective_Factory(t) {\n  return new (t || LocalizedMessagesDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService));\n};\n\nLocalizedMessagesDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n  type: LocalizedMessagesDirective,\n  selectors: [[\"\", \"kendoDropDownListLocalizedMessages\", \"\"], [\"\", \"kendoDropDownTreeLocalizedMessages\", \"\"], [\"\", \"kendoComboBoxLocalizedMessages\", \"\"], [\"\", \"kendoMultiColumnComboBoxLocalizedMessages\", \"\"], [\"\", \"kendoAutoCompleteLocalizedMessages\", \"\"], [\"\", \"kendoMultiSelectLocalizedMessages\", \"\"], [\"\", \"kendoMultiSelectTreeLocalizedMessages\", \"\"]],\n  features: [ɵngcc0.ɵɵProvidersFeature([{\n    provide: Messages,\n    useExisting: forwardRef(() => LocalizedMessagesDirective_1)\n  }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n});\nLocalizedMessagesDirective = LocalizedMessagesDirective_1 = __decorate([__metadata(\"design:paramtypes\", [LocalizationService])], LocalizedMessagesDirective);\nvar CustomMessagesComponent_1;\n/**\n * Custom component messages override default component messages\n * ([see example]({% slug rtl_dropdowns %}#toc-messages)).\n */\n\nlet CustomMessagesComponent = CustomMessagesComponent_1 = class CustomMessagesComponent extends Messages {\n  constructor(service) {\n    super();\n    this.service = service;\n  }\n\n  get override() {\n    return true;\n  }\n\n};\n\nCustomMessagesComponent.ɵfac = function CustomMessagesComponent_Factory(t) {\n  return new (t || CustomMessagesComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService));\n};\n\nCustomMessagesComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: CustomMessagesComponent,\n  selectors: [[\"kendo-dropdownlist-messages\"], [\"kendo-combobox-messages\"], [\"kendo-multicolumncombobox-messages\"], [\"kendo-autocomplete-messages\"], [\"kendo-multiselect-messages\"], [\"kendo-dropdowntree-messages\"], [\"kendo-multiselecttree-messages\"]],\n  features: [ɵngcc0.ɵɵProvidersFeature([{\n    provide: Messages,\n    useExisting: forwardRef(() => CustomMessagesComponent_1)\n  }]), ɵngcc0.ɵɵInheritDefinitionFeature],\n  decls: 0,\n  vars: 0,\n  template: function CustomMessagesComponent_Template(rf, ctx) {},\n  encapsulation: 2\n});\nCustomMessagesComponent = CustomMessagesComponent_1 = __decorate([__metadata(\"design:paramtypes\", [LocalizationService])], CustomMessagesComponent);\nconst DEFAULT_FILTER_SETTINGS = {\n  caseSensitive: false,\n  operator: 'startsWith'\n};\n/**\n * Implements an event handler for the `filterChange` event of a DropDowns component\n * which performs simple data filtering.\n *\n * @example\n * ```ts\n * _@Component({\n * selector: 'my-app',\n * template: `\n *  <kendo-autocomplete\n *      [data]=\"data\"\n *      kendoDropDownFilter\n *      placeholder=\"e.g. Andorra\"\n *  >\n *  </kendo-autocomplete>\n * `\n * })\n * class AppComponent {\n *     public data: Array<string> = [\"Albania\", \"Andorra\", \"Armenia\", \"Austria\", \"Azerbaijan\"];\n * }\n * ```\n */\n\nlet FilterDirective = /*#__PURE__*/(() => {\n  let FilterDirective = class FilterDirective {\n    constructor(component) {\n      this.component = component;\n      /**\n       * @hidden\n       *\n       * Sets whether the filtering functionality is enabled on component init.\n       */\n\n      this.filterable = true;\n      this._data = [];\n    }\n    /**\n     * The initial data that will be used as a source array for the filtering operations.\n     */\n\n\n    set data(data) {\n      this._data = data || [];\n    }\n\n    get data() {\n      return this._data;\n    }\n\n    ngOnInit() {\n      this.component.filterable = this.filterable;\n      this.filterChangeSubscription = this.component.filterChange.subscribe(this.handleFilterChange.bind(this));\n    }\n\n    ngOnDestroy() {\n      if (isPresent(this.filterChangeSubscription)) {\n        this.filterChangeSubscription.unsubscribe();\n      }\n    }\n\n    handleFilterChange(query) {\n      this.component.data = this.data.filter(item => this.matchesAnyField(item, query));\n    }\n\n    matchesAnyField(item, query) {\n      const normalizedQuery = this.normalizeValue(query);\n      const {\n        fields\n      } = this.filterSettings; // if no filter fields are present, we are dealing with primitive data\n\n      if (fields.length === 0) {\n        return this.checkItem(item, normalizedQuery);\n      }\n\n      return fields.some(field => this.checkItem(getter$1(item, field), normalizedQuery));\n    }\n\n    checkItem(target, query) {\n      target = this.normalizeValue(target);\n\n      if (this.filterSettings.operator === 'contains') {\n        return target.indexOf(query) !== -1;\n      } else {\n        return target.indexOf(query) === 0;\n      }\n    }\n\n    normalizeValue(value) {\n      const normalizedValue = isPresent(value) ? value.toString() : '';\n      return this.filterSettings.caseSensitive ? normalizedValue : normalizedValue.toLowerCase();\n    }\n\n    getFilterFields(providedFields) {\n      // ignore provided fields if the component deals with primitive data\n      if (!this.component.textField && !this.component.valueField) {\n        return [];\n      }\n\n      if (isArray(providedFields) && providedFields.length > 0) {\n        return providedFields;\n      } else {\n        // the autocomplete uses `valueField` for text extraction\n        const textField = this.component.textField || this.component.valueField;\n        return [textField];\n      }\n    }\n\n    get filterSettings() {\n      const settings = this.rawSettings;\n      const providedFields = isPresent(settings) && typeof settings === 'object' ? settings.fields : [];\n      return Object.assign({}, DEFAULT_FILTER_SETTINGS, settings, {\n        fields: this.getFilterFields(providedFields)\n      });\n    }\n\n  };\n\n  FilterDirective.ɵfac = function FilterDirective_Factory(t) {\n    return new (t || FilterDirective)(ɵngcc0.ɵɵdirectiveInject(FilterableComponent));\n  };\n\n  FilterDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: FilterDirective,\n    selectors: [[\"\", \"kendoDropDownFilter\", \"\"]],\n    inputs: {\n      filterable: \"filterable\",\n      data: \"data\",\n      rawSettings: [\"kendoDropDownFilter\", \"rawSettings\"]\n    }\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", Array), __metadata(\"design:paramtypes\", [Array])], FilterDirective.prototype, \"data\", null);\n\n  __decorate([Input('kendoDropDownFilter'), __metadata(\"design:type\", Object)], FilterDirective.prototype, \"rawSettings\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], FilterDirective.prototype, \"filterable\", void 0);\n\n  FilterDirective = __decorate([__metadata(\"design:paramtypes\", [FilterableComponent])], FilterDirective);\n  /**\n   * @hidden\n   */\n\n  return FilterDirective;\n})();\nlet FilterInputDirective = /*#__PURE__*/(() => {\n  let FilterInputDirective = class FilterInputDirective {\n    constructor(element, zone) {\n      this.element = element;\n      this.zone = zone;\n    }\n\n    ngOnChanges() {\n      if (this.focused) {\n        this.nextTick(() => this.element.nativeElement.focus());\n      }\n    }\n\n    nextTick(fn) {\n      this.zone.runOutsideAngular(() => setTimeout(fn));\n    }\n\n  };\n\n  FilterInputDirective.ɵfac = function FilterInputDirective_Factory(t) {\n    return new (t || FilterInputDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone));\n  };\n\n  FilterInputDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: FilterInputDirective,\n    selectors: [[\"\", \"filterInput\", \"\"]],\n    inputs: {\n      focused: [\"filterInput\", \"focused\"]\n    },\n    features: [ɵngcc0.ɵɵNgOnChangesFeature]\n  });\n\n  __decorate([Input('filterInput'), __metadata(\"design:type\", Boolean)], FilterInputDirective.prototype, \"focused\", void 0);\n\n  FilterInputDirective = __decorate([__metadata(\"design:paramtypes\", [ElementRef, NgZone])], FilterInputDirective);\n  return FilterInputDirective;\n})();\nconst SHARED_DIRECTIVES = [HeaderTemplateDirective, FooterTemplateDirective, ItemTemplateDirective, GroupTemplateDirective, FixedGroupTemplateDirective, NoDataTemplateDirective, ValueTemplateDirective, TagTemplateDirective, GroupTagTemplateDirective, LocalizedMessagesDirective, CustomMessagesComponent, FilterDirective, FilterInputDirective];\n/**\n * @hidden\n *\n * The exported package module.\n *\n * The package exports:\n * - `ItemTemplateDirective`&mdash;The item template directive.\n * - `ValueTemplateDirective`&mdash;The value template directive.\n * - `HeaderTemplateDirective`&mdash;The header template directive.\n * - `FooterTemplateDirective`&mdash;The footer template directive.\n * - `NoDataTemplateDirective`&mdash;The noData template directive.\n * - `TagTemplateDirective`&mdash;The tag template directive.\n * - `SummaryTagTemplateDirective`&mdash;The summary tag template directive.\n */\n\nlet SharedDirectivesModule = /*#__PURE__*/(() => {\n  let SharedDirectivesModule = class SharedDirectivesModule {};\n\n  SharedDirectivesModule.ɵfac = function SharedDirectivesModule_Factory(t) {\n    return new (t || SharedDirectivesModule)();\n  };\n\n  SharedDirectivesModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: SharedDirectivesModule\n  });\n  SharedDirectivesModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({});\n  /**\n   * @hidden\n   */\n\n  return SharedDirectivesModule;\n})();\nlet SelectableDirective = /*#__PURE__*/(() => {\n  let SelectableDirective = class SelectableDirective {\n    constructor(selectionService) {\n      this.checkboxes = {\n        enabled: false\n      }; // @HostBinding('attr.offset-index')\n      // @Input() public offsetIndex: number;\n\n      this.multipleSelection = false;\n      this.selectionService = selectionService;\n    }\n\n    get focusedClassName() {\n      return this.selectionService.isFocused(this.index);\n    }\n\n    get selectedClassName() {\n      return !this.checkboxes.enabled && this.selectionService.isSelected(this.index);\n    }\n\n    onClick(event) {\n      event.stopPropagation();\n\n      if (this.checkboxes.enabled && !this.checkboxes.checkOnClick) {\n        return;\n      }\n\n      if (this.multipleSelection) {\n        if (this.selectionService.isSelected(this.index)) {\n          this.selectionService.unselect(this.index);\n        } else {\n          this.selectionService.add(this.index);\n        }\n      } else {\n        this.selectionService.change(this.index);\n      }\n    }\n\n  };\n\n  SelectableDirective.ɵfac = function SelectableDirective_Factory(t) {\n    return new (t || SelectableDirective)(ɵngcc0.ɵɵdirectiveInject(SelectionService));\n  };\n\n  SelectableDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: SelectableDirective,\n    selectors: [[\"\", \"kendoDropDownsSelectable\", \"\"]],\n    hostVars: 9,\n    hostBindings: function SelectableDirective_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function SelectableDirective_click_HostBindingHandler($event) {\n          return ctx.onClick($event);\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"index\", ctx.index);\n        ɵngcc0.ɵɵstyleProp(\"height\", ctx.height, \"px\")(\"min-height\", ctx.height, \"px\");\n        ɵngcc0.ɵɵclassProp(\"k-state-focused\", ctx.focusedClassName)(\"k-state-selected\", ctx.selectedClassName);\n      }\n    },\n    inputs: {\n      checkboxes: \"checkboxes\",\n      multipleSelection: \"multipleSelection\",\n      index: \"index\",\n      height: \"height\"\n    }\n  });\n\n  __decorate([HostBinding('attr.index'), Input(), __metadata(\"design:type\", Number)], SelectableDirective.prototype, \"index\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], SelectableDirective.prototype, \"checkboxes\", void 0);\n\n  __decorate([HostBinding('style.height.px'), HostBinding('style.minHeight.px'), Input(), __metadata(\"design:type\", Number)], SelectableDirective.prototype, \"height\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], SelectableDirective.prototype, \"multipleSelection\", void 0);\n\n  __decorate([HostBinding('class.k-state-focused'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], SelectableDirective.prototype, \"focusedClassName\", null);\n\n  __decorate([HostBinding('class.k-state-selected'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], SelectableDirective.prototype, \"selectedClassName\", null);\n\n  __decorate([HostListener('click', ['$event']), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Object]), __metadata(\"design:returntype\", void 0)], SelectableDirective.prototype, \"onClick\", null);\n\n  SelectableDirective = __decorate([__metadata(\"design:paramtypes\", [SelectionService])], SelectableDirective);\n  /**\n   * @hidden\n   */\n\n  return SelectableDirective;\n})();\nlet TemplateContextDirective = /*#__PURE__*/(() => {\n  let TemplateContextDirective = class TemplateContextDirective {\n    constructor(viewContainerRef) {\n      this.viewContainerRef = viewContainerRef;\n    }\n\n    set templateContext(context) {\n      if (this.insertedViewRef) {\n        this.viewContainerRef.remove(this.viewContainerRef.indexOf(this.insertedViewRef));\n        this.insertedViewRef = undefined;\n      }\n\n      if (context.templateRef) {\n        this.insertedViewRef = this.viewContainerRef.createEmbeddedView(context.templateRef, context);\n      }\n    }\n\n  };\n\n  TemplateContextDirective.ɵfac = function TemplateContextDirective_Factory(t) {\n    return new (t || TemplateContextDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ViewContainerRef));\n  };\n\n  TemplateContextDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: TemplateContextDirective,\n    selectors: [[\"\", \"templateContext\", \"\"]],\n    inputs: {\n      templateContext: \"templateContext\"\n    }\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], TemplateContextDirective.prototype, \"templateContext\", null);\n\n  TemplateContextDirective = __decorate([__metadata(\"design:paramtypes\", [ViewContainerRef])], TemplateContextDirective);\n  /**\n   * @hidden\n   *\n   * A directive which manages the in-memory checked state of the MultiSelectTree nodes.\n   */\n\n  return TemplateContextDirective;\n})();\nlet CheckDirective = /*#__PURE__*/(() => {\n  let CheckDirective = class CheckDirective {\n    constructor(treeView) {\n      this.treeView = treeView;\n      /**\n       * Fires when the `checkedItems` collection was updated.\n       */\n\n      this.checkedItemsChange = new EventEmitter();\n      /**\n       * Holds a Set with just the checked item keys.\n       *\n       * Should be updated each time the `checkedItems` value or content is changed.\n       * Can be used for efficient look-up of whether an item is checked or not (O(1) access time).\n       */\n\n      this.checkedKeys = new Set();\n      this.subscriptions = new Subscription();\n      this.subscriptions.add(this.treeView.checkedChange.subscribe(this.handleCheckedChange.bind(this)));\n      this.treeView.isChecked = this.getCheckedState.bind(this);\n    }\n\n    ngOnChanges(changes) {\n      if (isPresent(changes.checkable)) {\n        this.toggleCheckOnClick();\n      }\n\n      if (isPresent(changes.checkedItems)) {\n        this.checkedItems = this.checkedItems || [];\n        this.checkedKeys = new Set(this.checkedItems.map(item => valueFrom(item, this.valueField)));\n      }\n    }\n\n    ngOnDestroy() {\n      this.subscriptions.unsubscribe();\n      this.unsubscribeClick();\n    }\n\n    getCheckedState(dataItem, index) {\n      if (this.isItemChecked({\n        dataItem,\n        index\n      })) {\n        return 'checked';\n      } else if (this.checkable.checkChildren && this.isItemIndeterminate(this.treeView.itemLookup(index))) {\n        return 'indeterminate';\n      } else {\n        return 'none';\n      }\n    }\n\n    handleCheckedChange(node) {\n      this.checkNode(node); // parents should be checked if `checkChildren` is set to `true` (single config option for both)\n\n      const checkParents = this.checkable.checkChildren;\n\n      if (checkParents) {\n        this.checkParents(node.parent);\n      }\n\n      this.checkedItemsChange.emit(this.checkedItems.slice());\n    }\n\n    toggleCheckOnClick() {\n      this.unsubscribeClick();\n\n      if (this.checkable.checkOnClick) {\n        this.clickSubscription = this.treeView.nodeClick.pipe(filter(event => event.type === 'click')).subscribe(event => {\n          const lookup = this.treeView.itemLookup(event.item.index);\n          this.handleCheckedChange(lookup);\n        });\n      }\n    }\n\n    unsubscribeClick() {\n      if (this.clickSubscription) {\n        this.clickSubscription.unsubscribe();\n        this.clickSubscription = null;\n      }\n    }\n\n    checkNode(lookup) {\n      if (this.treeView.isDisabled(lookup.item.dataItem, lookup.item.index)) {\n        return;\n      }\n\n      const target = lookup.item;\n      const pendingCheck = [target]; // TODO: extract in a separate `checkChildren` method?\n\n      if (this.checkable.checkChildren) {\n        const filter$$1 = item => this.treeView.isVisible(item.dataItem, item.index) && !this.treeView.isDisabled(item.dataItem, item.index);\n\n        fetchDescendentNodes(lookup, filter$$1).forEach(lookup => pendingCheck.push(lookup.item));\n      }\n\n      const shouldCheck = !this.isItemChecked(target);\n      pendingCheck.forEach(item => {\n        if (shouldCheck) {\n          this.addItem(item);\n        } else {\n          this.removeItem(item);\n        }\n      });\n    }\n\n    checkParents(parent) {\n      let currentParent = parent;\n\n      while (currentParent) {\n        const allChildrenSelected = currentParent.children.every(item => this.isItemChecked(item));\n\n        if (allChildrenSelected) {\n          this.addItem(currentParent.item);\n        } else {\n          this.removeItem(currentParent.item);\n        }\n\n        currentParent = currentParent.parent;\n      }\n    }\n\n    addItem(item) {\n      if (this.isItemChecked(item)) {\n        return;\n      }\n\n      const level = getHierarchicalItemLevel(item.index);\n      const candidate = Object.assign({}, item, {\n        level\n      });\n      this.checkedItems.push(candidate);\n      this.checkedKeys.add(valueFrom(candidate, this.valueField));\n    }\n\n    removeItem(item) {\n      if (!this.isItemChecked(item)) {\n        return;\n      }\n\n      const level = getHierarchicalItemLevel(item.index);\n      const candidate = Object.assign({}, item, {\n        level\n      });\n      this.checkedItems = this.checkedItems.filter(item => valueFrom(item, this.valueField) !== valueFrom(candidate, this.valueField));\n      this.checkedKeys.delete(valueFrom(candidate, this.valueField));\n    }\n\n    isItemChecked(item) {\n      return this.checkedKeys.has(valueFrom(item, this.valueField));\n    }\n\n    isItemIndeterminate(lookup) {\n      const children = lookup.children;\n\n      if (!Array.isArray(children) || children.length === 0) {\n        return false;\n      }\n\n      let index = 0;\n      let child = children[index];\n\n      while (isPresent(child)) {\n        if (this.isItemChecked(child.item) || this.isItemIndeterminate(child)) {\n          return true;\n        }\n\n        index += 1;\n        child = children[index];\n      }\n\n      return false;\n    }\n\n  };\n\n  CheckDirective.ɵfac = function CheckDirective_Factory(t) {\n    return new (t || CheckDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc6.TreeViewComponent));\n  };\n\n  CheckDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: CheckDirective,\n    selectors: [[\"\", \"kendoMultiSelectTreeCheckable\", \"\"]],\n    inputs: {\n      checkedItems: \"checkedItems\",\n      checkable: \"checkable\",\n      valueField: \"valueField\"\n    },\n    outputs: {\n      checkedItemsChange: \"checkedItemsChange\"\n    },\n    features: [ɵngcc0.ɵɵNgOnChangesFeature]\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], CheckDirective.prototype, \"checkable\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], CheckDirective.prototype, \"valueField\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Array)], CheckDirective.prototype, \"checkedItems\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], CheckDirective.prototype, \"checkedItemsChange\", void 0);\n\n  CheckDirective = __decorate([__metadata(\"design:paramtypes\", [TreeViewComponent])], CheckDirective);\n  return CheckDirective;\n})();\nconst INTERNAL_DIRECTIVES = [ListComponent, ListItemDirective, SelectableDirective, SearchBarComponent, TemplateContextDirective, TagListComponent, CheckDirective];\n/**\n * @hidden\n */\n\nlet SharedModule = /*#__PURE__*/(() => {\n  let SharedModule = class SharedModule {};\n\n  SharedModule.ɵfac = function SharedModule_Factory(t) {\n    return new (t || SharedModule)();\n  };\n\n  SharedModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: SharedModule\n  });\n  SharedModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule, FormsModule, PopupModule, ResizeSensorModule, SharedDirectivesModule, EventsModule], CommonModule, FormsModule, PopupModule, ResizeSensorModule, SharedDirectivesModule, EventsModule]\n  });\n  /**\n   * A directive which configures the MultiSelectTree to show one single summary tag for all selected data items.\n   * When a number is provided, the summary tag is displayed after the given amount of data items are selected\n   * ([more information and examples]({% slug api_dropdowns_multiselecttreesummarytagdirective %})).\n   *\n   * @example\n   * ```ts-no-run\n   * <kendo-multiselecttree kendoMultiSelectTreeSummaryTag [data]=\"data\"></kendo-multiselecttree>\n   * ```\n   *\n   * @example\n   * ```ts-no-run\n   * <kendo-multiselecttree [kendoMultiSelectTreeSummaryTag]=\"2\" [data]=\"data\"></kendo-multiselecttree>\n   * ```\n   */\n\n  return SharedModule;\n})();\nlet MultiSelectTreeSummaryTagDirective = /*#__PURE__*/(() => {\n  let MultiSelectTreeSummaryTagDirective = class MultiSelectTreeSummaryTagDirective {\n    constructor(multiSelectTreeComponent) {\n      this.multiSelectTreeComponent = multiSelectTreeComponent;\n      /**\n       * A numeric value that indicates the number of selected data items after which the summary tag will appear.\n       */\n\n      this.showAfter = 0;\n      this.createTagMapper();\n    }\n\n    ngOnChanges(changes) {\n      if (isPresent(changes.showAfter)) {\n        this.createTagMapper();\n        this.multiSelectTreeComponent.handleTagMapperChange(this.showAfter);\n      }\n    }\n\n    createTagMapper() {\n      const showAfter = parseNumber(this.showAfter);\n\n      this.multiSelectTreeComponent.tagMapper = tags => {\n        if (tags.length > showAfter) {\n          // tags provided in an array are rendered as a single group tag\n          return [...tags.slice(0, showAfter), tags.slice(showAfter)];\n        } else {\n          return tags;\n        }\n      };\n    }\n\n  };\n\n  MultiSelectTreeSummaryTagDirective.ɵfac = function MultiSelectTreeSummaryTagDirective_Factory(t) {\n    return new (t || MultiSelectTreeSummaryTagDirective)(ɵngcc0.ɵɵdirectiveInject(MultiSelectTreeComponent));\n  };\n\n  MultiSelectTreeSummaryTagDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: MultiSelectTreeSummaryTagDirective,\n    selectors: [[\"\", \"kendoMultiSelectTreeSummaryTag\", \"\"]],\n    inputs: {\n      showAfter: [\"kendoMultiSelectTreeSummaryTag\", \"showAfter\"]\n    },\n    features: [ɵngcc0.ɵɵNgOnChangesFeature]\n  });\n\n  __decorate([Input('kendoMultiSelectTreeSummaryTag'), __metadata(\"design:type\", Object)], MultiSelectTreeSummaryTagDirective.prototype, \"showAfter\", void 0);\n\n  MultiSelectTreeSummaryTagDirective = __decorate([__metadata(\"design:paramtypes\", [MultiSelectTreeComponent])], MultiSelectTreeSummaryTagDirective);\n  return MultiSelectTreeSummaryTagDirective;\n})();\nconst DROPDOWNTREE_DIRECTIVES = [DropDownTreeComponent, MultiSelectTreeComponent, DropDownTreeFlatBindingDirective, DropDownTreeHierarchyBindingDirective, MultiSelectTreeFlatBindingDirective, MultiSelectTreeHierarchyBindingDirective, DropDownTreesExpandDirective, NodeTemplateDirective, MultiSelectTreeSummaryTagDirective];\n/**\n * @hidden\n */\n\nlet DropDownTreesModule = /*#__PURE__*/(() => {\n  let DropDownTreesModule = class DropDownTreesModule {};\n\n  DropDownTreesModule.ɵfac = function DropDownTreesModule_Factory(t) {\n    return new (t || DropDownTreesModule)();\n  };\n\n  DropDownTreesModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: DropDownTreesModule\n  });\n  DropDownTreesModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[SharedModule, TreeViewModule], SharedDirectivesModule]\n  });\n  /**\n   * A directive which configures the MultiSelect to show one single summary tag for all selected data items.\n   * When a number is provided, the summary tag is displayed after the given amount of data items are selected\n   * ([more information and examples]({% slug summarytagmode_multiselect %})).\n   *\n   * @example\n   * ```ts-no-run\n   * <kendo-multiselect kendoMultiSelectSummaryTag [data]=\"data\"></kendo-multiselect>\n   * ```\n   *\n   * @example\n   * ```ts-no-run\n   * <kendo-multiselect [kendoMultiSelectSummaryTag]=\"2\" [data]=\"data\"></kendo-multiselect>\n   * ```\n   */\n\n  return DropDownTreesModule;\n})();\nlet SummaryTagDirective = /*#__PURE__*/(() => {\n  let SummaryTagDirective = class SummaryTagDirective {\n    constructor(multiSelectComponent) {\n      this.multiSelectComponent = multiSelectComponent;\n      /**\n       * A numeric value that indicates the number of selected data items after which the summary tag will appear.\n       */\n\n      this.showAfter = 0;\n      this.createTagMapper();\n    }\n\n    ngOnChanges(changes) {\n      if (isPresent(changes.showAfter)) {\n        this.createTagMapper();\n        this.multiSelectComponent.onTagMapperChange();\n      }\n    }\n\n    createTagMapper() {\n      const showAfter = parseNumber(this.showAfter);\n\n      this.multiSelectComponent.tagMapper = tags => {\n        if (tags.length > showAfter) {\n          let result;\n          result = tags.slice(0, showAfter);\n          result.push(tags.slice(showAfter, tags.length));\n          return result;\n        } else {\n          return tags;\n        }\n      };\n    }\n\n  };\n\n  SummaryTagDirective.ɵfac = function SummaryTagDirective_Factory(t) {\n    return new (t || SummaryTagDirective)(ɵngcc0.ɵɵdirectiveInject(MultiSelectComponent));\n  };\n\n  SummaryTagDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: SummaryTagDirective,\n    selectors: [[\"\", \"kendoMultiSelectSummaryTag\", \"\"]],\n    inputs: {\n      showAfter: [\"kendoMultiSelectSummaryTag\", \"showAfter\"]\n    },\n    features: [ɵngcc0.ɵɵNgOnChangesFeature]\n  });\n\n  __decorate([Input('kendoMultiSelectSummaryTag'), __metadata(\"design:type\", Object)], SummaryTagDirective.prototype, \"showAfter\", void 0);\n\n  SummaryTagDirective = __decorate([__metadata(\"design:paramtypes\", [MultiSelectComponent])], SummaryTagDirective);\n  return SummaryTagDirective;\n})();\nconst AUTOCOMPLETE_DIRECTIVES = [AutoCompleteComponent];\n/**\n * @hidden\n *\n * The exported package module.\n *\n * The package exports:\n * - `AutoCompleteComponent`&mdash;The AutoComplete component class.\n * - `ItemTemplateDirective`&mdash;The item template directive.\n * - `HeaderTemplateDirective`&mdash;The header template directive.\n * - `FooterTemplateDirective`&mdash;The footer template directive.\n */\n\nlet AutoCompleteModule = /*#__PURE__*/(() => {\n  let AutoCompleteModule = class AutoCompleteModule {};\n\n  AutoCompleteModule.ɵfac = function AutoCompleteModule_Factory(t) {\n    return new (t || AutoCompleteModule)();\n  };\n\n  AutoCompleteModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: AutoCompleteModule\n  });\n  AutoCompleteModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[SharedModule], SharedDirectivesModule]\n  });\n  return AutoCompleteModule;\n})();\nconst COMBOBOX_DIRECTIVES = [ComboBoxComponent, MultiColumnComboBoxComponent, ComboBoxColumnComponent, ColumnHeaderTemplateDirective, ColumnCellTemplateDirective];\nconst ɵ0$4 = touchEnabled;\n/**\n * @hidden\n *\n * The exported package module.\n *\n * The package exports:\n * - `ComboBoxComponent`&mdash;The ComboBox component class.\n * - `MultiColumnComboBoxComponent`&mdash;The MultiColumnComboBox component class.\n * - `ItemTemplateDirective`&mdash;The item template directive.\n * - `HeaderTemplateDirective`&mdash;The header template directive.\n * - `FooterTemplateDirective`&mdash;The footer template directive.\n * - `ColumnHeaderTemplateDirective`&mdash;The column header template directive.\n * - `ColumnCellTemplateDirective`&mdash;The column cell template directive.\n */\n\nlet ComboBoxModule = /*#__PURE__*/(() => {\n  let ComboBoxModule = class ComboBoxModule {};\n\n  ComboBoxModule.ɵfac = function ComboBoxModule_Factory(t) {\n    return new (t || ComboBoxModule)();\n  };\n\n  ComboBoxModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: ComboBoxModule\n  });\n  ComboBoxModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    providers: [{\n      provide: TOUCH_ENABLED,\n      useValue: ɵ0$4\n    }],\n    imports: [[SharedModule], SharedDirectivesModule]\n  });\n  return ComboBoxModule;\n})();\nconst DROPDOWNLIST_DIRECTIVES = [DropDownListComponent];\n/**\n * @hidden\n *\n * The exported package module.\n *\n * The package exports:\n * - `DropDownListComponent`&mdash;The DropDownList component class.\n * - `ItemTemplateDirective`&mdash;The item template directive.\n * - `ValueTemplateDirective`&mdash;The value template directive.\n * - `HeaderTemplateDirective`&mdash;The header template directive.\n * - `FooterTemplateDirective`&mdash;The footer template directive.\n */\n\nlet DropDownListModule = /*#__PURE__*/(() => {\n  let DropDownListModule = class DropDownListModule {};\n\n  DropDownListModule.ɵfac = function DropDownListModule_Factory(t) {\n    return new (t || DropDownListModule)();\n  };\n\n  DropDownListModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: DropDownListModule\n  });\n  DropDownListModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[SharedModule], SharedDirectivesModule]\n  });\n  return DropDownListModule;\n})();\nconst MULTISELECT_DIRECTIVES = [MultiSelectComponent, SummaryTagDirective, CustomItemTemplateDirective];\nconst ɵ0$5 = touchEnabled;\n/**\n * @hidden\n *\n * The exported package module.\n *\n * The package exports:\n * - `MultiSelectComponent`&mdash;The MultiSelect component class.\n * - `SummaryTagDirective`&mdash;The MultiSelect summary tag directive.\n * - `ItemTemplateDirective`&mdash;The item template directive.\n * - `CustomItemTemplateDirective`&mdash;The custom item template directive.\n * - `TagTemplateDirective`&mdash;The tag template directive.\n * - `SummaryTagTemplateDirective`&mdash;The summary tag template directive.\n * - `HeaderTemplateDirective`&mdash;The header template directive.\n * - `FooterTemplateDirective`&mdash;The footer template directive.\n * - `NoDataTemplateDirective`&mdash;The no-data template directive.\n */\n\nlet MultiSelectModule = /*#__PURE__*/(() => {\n  let MultiSelectModule = class MultiSelectModule {};\n\n  MultiSelectModule.ɵfac = function MultiSelectModule_Factory(t) {\n    return new (t || MultiSelectModule)();\n  };\n\n  MultiSelectModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: MultiSelectModule\n  });\n  MultiSelectModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    providers: [{\n      provide: TOUCH_ENABLED,\n      useValue: ɵ0$5\n    }],\n    imports: [[SharedModule], SharedDirectivesModule]\n  });\n  /**\n   * Represents the [NgModule]({{ site.data.urls.angular['ngmoduleapi'] }})\n   * definition for the Dropdowns components.\n   *\n   * @example\n   *\n   * ```ts-no-run\n   * // Import the Dropdowns module\n   * import { DropDownsModule } from '@progress/kendo-angular-dropdowns';\n   *\n   * // The browser platform with a compiler\n   * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n   *\n   * import { NgModule } from '@angular/core';\n   *\n   * // Import the app component\n   * import { AppComponent } from './app.component';\n   *\n   * // Define the app module\n   * _@NgModule({\n   *     declarations: [AppComponent], // declare the app component\n   *     imports:      [BrowserModule, DropDownsModule], // import the Dropdowns module\n   *     bootstrap:    [AppComponent]\n   * })\n   * export class AppModule {}\n   *\n   * // Compile and launch the module\n   * platformBrowserDynamic().bootstrapModule(AppModule);\n   *\n   * ```\n   */\n\n  return MultiSelectModule;\n})();\nlet DropDownsModule = /*#__PURE__*/(() => {\n  let DropDownsModule = class DropDownsModule {};\n\n  DropDownsModule.ɵfac = function DropDownsModule_Factory(t) {\n    return new (t || DropDownsModule)();\n  };\n\n  DropDownsModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: DropDownsModule\n  });\n  DropDownsModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [AutoCompleteModule, ComboBoxModule, DropDownListModule, MultiSelectModule, DropDownTreesModule]\n  });\n  return DropDownsModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(SharedDirectivesModule, {\n    declarations: [HeaderTemplateDirective, FooterTemplateDirective, ItemTemplateDirective, GroupTemplateDirective, FixedGroupTemplateDirective, NoDataTemplateDirective, ValueTemplateDirective, TagTemplateDirective, GroupTagTemplateDirective, LocalizedMessagesDirective, CustomMessagesComponent, FilterDirective, FilterInputDirective],\n    exports: [HeaderTemplateDirective, FooterTemplateDirective, ItemTemplateDirective, GroupTemplateDirective, FixedGroupTemplateDirective, NoDataTemplateDirective, ValueTemplateDirective, TagTemplateDirective, GroupTagTemplateDirective, LocalizedMessagesDirective, CustomMessagesComponent, FilterDirective, FilterInputDirective]\n  });\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(SharedModule, {\n    declarations: function () {\n      return [ListComponent, ListItemDirective, SelectableDirective, SearchBarComponent, TemplateContextDirective, TagListComponent, CheckDirective];\n    },\n    imports: function () {\n      return [CommonModule, FormsModule, PopupModule, ResizeSensorModule, SharedDirectivesModule, EventsModule];\n    },\n    exports: function () {\n      return [ListComponent, ListItemDirective, SelectableDirective, SearchBarComponent, TemplateContextDirective, TagListComponent, CheckDirective, CommonModule, FormsModule, PopupModule, ResizeSensorModule, SharedDirectivesModule, EventsModule];\n    }\n  });\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(DropDownTreesModule, {\n    declarations: function () {\n      return [DropDownTreeComponent, MultiSelectTreeComponent, DropDownTreeFlatBindingDirective, DropDownTreeHierarchyBindingDirective, MultiSelectTreeFlatBindingDirective, MultiSelectTreeHierarchyBindingDirective, DropDownTreesExpandDirective, NodeTemplateDirective, MultiSelectTreeSummaryTagDirective];\n    },\n    imports: function () {\n      return [SharedModule, TreeViewModule];\n    },\n    exports: function () {\n      return [DropDownTreeComponent, MultiSelectTreeComponent, DropDownTreeFlatBindingDirective, DropDownTreeHierarchyBindingDirective, MultiSelectTreeFlatBindingDirective, MultiSelectTreeHierarchyBindingDirective, DropDownTreesExpandDirective, NodeTemplateDirective, MultiSelectTreeSummaryTagDirective, SharedDirectivesModule];\n    }\n  });\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(AutoCompleteModule, {\n    declarations: [AutoCompleteComponent],\n    imports: [SharedModule],\n    exports: [AutoCompleteComponent, SharedDirectivesModule]\n  });\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(ComboBoxModule, {\n    declarations: [ComboBoxComponent, MultiColumnComboBoxComponent, ComboBoxColumnComponent, ColumnHeaderTemplateDirective, ColumnCellTemplateDirective],\n    imports: [SharedModule],\n    exports: [ComboBoxComponent, MultiColumnComboBoxComponent, ComboBoxColumnComponent, ColumnHeaderTemplateDirective, ColumnCellTemplateDirective, SharedDirectivesModule]\n  });\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(DropDownListModule, {\n    declarations: [DropDownListComponent],\n    imports: [SharedModule],\n    exports: [DropDownListComponent, SharedDirectivesModule]\n  });\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(MultiSelectModule, {\n    declarations: [MultiSelectComponent, SummaryTagDirective, CustomItemTemplateDirective],\n    imports: [SharedModule],\n    exports: [MultiSelectComponent, SummaryTagDirective, CustomItemTemplateDirective, SharedDirectivesModule]\n  });\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(DropDownsModule, {\n    exports: [AutoCompleteModule, ComboBoxModule, DropDownListModule, MultiSelectModule, DropDownTreesModule]\n  });\n})();\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { AUTOCOMPLETE_VALUE_ACCESSOR, COMBOBOX_VALUE_ACCESSOR, TOUCH_ENABLED, DataService, DisabledItemsService, FilterInputDirective, FilterableComponent, ListItemDirective, CustomMessagesComponent, LocalizedMessagesDirective, Messages, NavigationService, SearchBarComponent, SelectionService, TagListComponent, NoDataTemplateDirective, TagTemplateDirective, DROPDOWNLIST_VALUE_ACCESSOR, CheckDirective, MultiSelectTreeSummaryTagDirective, AutoCompleteComponent, ComboBoxComponent, DropDownListComponent, MultiSelectComponent, MultiColumnComboBoxComponent, ComboBoxColumnComponent, ColumnCellTemplateDirective, ColumnHeaderTemplateDirective, DropDownTreeComponent, MultiSelectTreeComponent, DropDownTreeFlatBindingDirective, DropDownTreeHierarchyBindingDirective, MultiSelectTreeFlatBindingDirective, MultiSelectTreeHierarchyBindingDirective, DropDownTreesExpandDirective, DropDownTreesModule, NodeTemplateDirective, ItemTemplateDirective, GroupTemplateDirective, FixedGroupTemplateDirective, CustomItemTemplateDirective, HeaderTemplateDirective, FooterTemplateDirective, ValueTemplateDirective, TemplateContextDirective, GroupTagTemplateDirective, SelectableDirective, SummaryTagDirective, FilterDirective, DropDownsModule, MultiSelectModule, SharedModule, AutoCompleteModule, ComboBoxModule, DropDownListModule, SharedDirectivesModule, ListComponent, PreventableEvent, RemoveTagEvent }; //# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7O2lGQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FnQ0c7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzt5UkFBRTtBQUNGLG9DQUlHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7c2JBQUU7QUFDRixzQ0FJRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O3NiQUFFO0FBQ0Ysc0NBSUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztrVkFBRTtBQUNGLHFDQUlHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7cVhBQUU7QUFDRiwwQ0FJRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OzBKQUdxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7MklBR2dCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O3NLQUFFO0FBQ0YsbUNBRUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OzZKQUFFO0FBQ0YsZ0NBRUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O3NiQUFFO0FBQ0Ysc0NBSUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs2SkFBRTtBQUNGLGdDQUlHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2dPQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBb0hHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O3VNQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOERBK0dHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzZQQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQThIRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs0TUFBRTtBQUNGLHFDQUlHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozt5VkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhEQTRKRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OzhLQUFFO0FBQ0YsMENBSUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztzTUFBRTtBQUNGLG1DQUlHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzswTkFBRTtBQUNGLHdDQUlHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzhPQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFtSkc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7c0xBQUU7QUFDRiwwQ0FJRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OzRMQUFFO0FBQ0YsNENBSUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozt3U0FBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBTTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NlJBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRFQTRPRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OzJNQUFFO0FBQ0Ysb0NBSUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NlZBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOERBd0tHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7bVZBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvRUF1TEc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzttVUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FJRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7aVRBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBSUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7K1VBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBSUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OzZUQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUlHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OzhUQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FJRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7NkpBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBbURxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OzBMQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7a0RBQUU7QUFDRix3RUFrQkc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozt5SkFBRTtBQUNGLGtFQVdHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O2dQQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFJRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzttT0FBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBSUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O3dFQU0yQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7OzJIQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUlHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O3FNQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUlHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OzJVQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFJRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7K1FBT2lCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O3lTQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFJRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O3dJQU93QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7bVFBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUlHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7dUhBT3VCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7NEtBUW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O3VIQU91QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OytLQVFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztrT0FLb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlc0NvbnRlbnQiOlsiLyoqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiogQ29weXJpZ2h0IMKpIDIwMjEgUHJvZ3Jlc3MgU29mdHdhcmUgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4qIExpY2Vuc2VkIHVuZGVyIGNvbW1lcmNpYWwgbGljZW5zZS4gU2VlIExJQ0VOU0UubWQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbW9yZSBpbmZvcm1hdGlvblxuKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuaW1wb3J0IHsgX19kZWNvcmF0ZSwgX19tZXRhZGF0YSwgX19wYXJhbSB9IGZyb20gJ3RzbGliJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlciwgSW5wdXQsIE91dHB1dCwgVmlld0NoaWxkLCBFbGVtZW50UmVmLCBIb3N0QmluZGluZywgQ29tcG9uZW50LCBSZW5kZXJlcjIsIERpcmVjdGl2ZSwgVGVtcGxhdGVSZWYsIEluamVjdGFibGUsIFZpZXdDaGlsZHJlbiwgUXVlcnlMaXN0LCBDaGFuZ2VEZXRlY3RvclJlZiwgTmdab25lLCBJbmplY3Rpb25Ub2tlbiwgZm9yd2FyZFJlZiwgaXNEZXZNb2RlLCBDb250ZW50Q2hpbGQsIFZpZXdDb250YWluZXJSZWYsIE9wdGlvbmFsLCBJbmplY3QsIEtleVZhbHVlRGlmZmVycywgQ29udGVudENoaWxkcmVuLCBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgTmdNb2R1bGUsIEhvc3RMaXN0ZW5lciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgaXNEb2N1bWVudEF2YWlsYWJsZSwgS2V5cywgaXNDaGFuZ2VkLCBoYXNPYnNlcnZlcnMsIEtlbmRvSW5wdXQsIGFueUNoYW5nZWQsIGd1aWQsIFJlc2l6ZVNlbnNvck1vZHVsZSwgRXZlbnRzTW9kdWxlIH0gZnJvbSAnQHByb2dyZXNzL2tlbmRvLWFuZ3VsYXItY29tbW9uJztcbmltcG9ydCB7IE5HX1ZBTFVFX0FDQ0VTU09SLCBGb3Jtc01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IHZhbGlkYXRlUGFja2FnZSB9IGZyb20gJ0Bwcm9ncmVzcy9rZW5kby1saWNlbnNpbmcnO1xuaW1wb3J0IHsgZ2V0dGVyLCBwb2ludGVycywgdG91Y2hFbmFibGVkIH0gZnJvbSAnQHByb2dyZXNzL2tlbmRvLWNvbW1vbic7XG5pbXBvcnQgeyBMb2NhbGl6YXRpb25TZXJ2aWNlLCBMMTBOX1BSRUZJWCwgQ29tcG9uZW50TWVzc2FnZXMgfSBmcm9tICdAcHJvZ3Jlc3Mva2VuZG8tYW5ndWxhci1sMTBuJztcbmltcG9ydCB7IG1lcmdlLCBmcm9tRXZlbnQsIFN1YmplY3QsIFN1YnNjcmlwdGlvbiwgb2YsIGludGVydmFsIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBQb3B1cFNlcnZpY2UsIFBvcHVwTW9kdWxlIH0gZnJvbSAnQHByb2dyZXNzL2tlbmRvLWFuZ3VsYXItcG9wdXAnO1xuZXhwb3J0IHsgUG9wdXBDb21wb25lbnQgfSBmcm9tICdAcHJvZ3Jlc3Mva2VuZG8tYW5ndWxhci1wb3B1cCc7XG5pbXBvcnQgeyBtYXAsIHN3aXRjaE1hcCwgdGFrZSwgYXVkaXRUaW1lLCB0YXAsIGZpbHRlciwgcGFydGl0aW9uLCB0aHJvdHRsZVRpbWUsIGNhdGNoRXJyb3IsIHNraXBXaGlsZSwgY29uY2F0TWFwLCB0YWtlVW50aWwgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBUcmVlVmlld0NvbXBvbmVudCwgRGF0YUJvdW5kQ29tcG9uZW50LCBFeHBhbmRhYmxlQ29tcG9uZW50LCBGbGF0RGF0YUJpbmRpbmdEaXJlY3RpdmUsIEhpZXJhcmNoeUJpbmRpbmdEaXJlY3RpdmUsIEV4cGFuZERpcmVjdGl2ZSwgVHJlZVZpZXdNb2R1bGUgfSBmcm9tICdAcHJvZ3Jlc3Mva2VuZG8tYW5ndWxhci10cmVldmlldyc7XG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgcGFja2FnZU1ldGFkYXRhID0ge1xuICAgIG5hbWU6ICdAcHJvZ3Jlc3Mva2VuZG8tYW5ndWxhci1kcm9wZG93bnMnLFxuICAgIHByb2R1Y3ROYW1lOiAnS2VuZG8gVUkgZm9yIEFuZ3VsYXInLFxuICAgIHByb2R1Y3RDb2RlczogWydLRU5ET1VJQU5HVUxBUicsICdLRU5ET1VJQ09NUExFVEUnXSxcbiAgICBwdWJsaXNoRGF0ZTogMTYzMTI2MDMxNyxcbiAgICB2ZXJzaW9uOiAnJyxcbiAgICBsaWNlbnNpbmdEb2NzVXJsOiAnaHR0cHM6Ly93d3cudGVsZXJpay5jb20va2VuZG8tYW5ndWxhci11aS9teS1saWNlbnNlLz91dG1fbWVkaXVtPXByb2R1Y3QmdXRtX3NvdXJjZT1rZW5kb2FuZ3VsYXImdXRtX2NhbXBhaWduPWtlbmRvLXVpLWFuZ3VsYXItcHVyY2hhc2UtbGljZW5zZS1rZXlzLXdhcm5pbmcnXG59O1xuXG4vKiB0c2xpbnQ6ZGlzYWJsZTpuby1iaXR3aXNlICovXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgaXNQcmVzZW50ID0gKHZhbHVlKSA9PiB2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gdW5kZWZpbmVkO1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IGlzTnVtYmVyID0gKHZhbHVlKSA9PiAhaXNOYU4odmFsdWUpO1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IGd1aWQkMSA9ICgpID0+IHtcbiAgICBsZXQgaWQgPSBcIlwiO1xuICAgIGxldCBpO1xuICAgIGxldCByYW5kb207XG4gICAgZm9yIChpID0gMDsgaSA8IDMyOyBpKyspIHtcbiAgICAgICAgcmFuZG9tID0gTWF0aC5yYW5kb20oKSAqIDE2IHwgMDtcbiAgICAgICAgaWYgKGkgPT09IDggfHwgaSA9PT0gMTIgfHwgaSA9PT0gMTYgfHwgaSA9PT0gMjApIHtcbiAgICAgICAgICAgIGlkICs9IFwiLVwiO1xuICAgICAgICB9XG4gICAgICAgIGlkICs9IChpID09PSAxMiA/IDQgOiAoaSA9PT0gMTYgPyAocmFuZG9tICYgMyB8IDgpIDogcmFuZG9tKSkudG9TdHJpbmcoMTYpO1xuICAgIH1cbiAgICByZXR1cm4gaWQ7XG59O1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IGNvbWJpbmVTdHIgPSAoYmVnaW4sIGVuZCkgPT4ge1xuICAgIHJldHVybiBiZWdpbi5jb25jYXQoZW5kLnN1YnN0cihlbmQudG9Mb3dlckNhc2UoKS5pbmRleE9mKGJlZ2luLnRvTG93ZXJDYXNlKCkpICsgYmVnaW4ubGVuZ3RoKSk7XG59O1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IGlzQXJyYXkgPSAodmFsdWUpID0+IEFycmF5LmlzQXJyYXkodmFsdWUpO1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IGlzT2JqZWN0ID0gKHZhbHVlKSA9PiBpc1ByZXNlbnQodmFsdWUpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCc7XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgaXNFbXB0eVN0cmluZyA9ICh2YWx1ZSkgPT4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyAmJiB2YWx1ZS5sZW5ndGggPT09IDA7XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgcmVzb2x2ZVZhbHVlc0luQXJyYXkgPSAodmFsdWVzLCBkYXRhID0gW10sIHZhbHVlRmllbGQpID0+IHZhbHVlc1xuICAgIC5tYXAodmFsdWUgPT4ge1xuICAgIHJldHVybiBkYXRhLmZpbmQoaXRlbSA9PiBnZXR0ZXIkMShpdGVtLCB2YWx1ZUZpZWxkKSA9PT0gdmFsdWUpO1xufSlcbiAgICAuZmlsdGVyKHZhbHVlID0+IHZhbHVlICE9PSB1bmRlZmluZWQpO1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IHZhbGlkYXRlQ29tcGxleFZhbHVlcyA9ICh2YWx1ZXMsIHZhbHVlRmllbGQpID0+IGlzQXJyYXkodmFsdWVzKSAmJiB2YWx1ZXMuZmlsdGVyKGl0ZW0gPT4ge1xuICAgIHJldHVybiBpc09iamVjdChpdGVtKSAmJiBpc1ByZXNlbnQoZ2V0dGVyJDEoaXRlbSwgdmFsdWVGaWVsZCkpO1xufSk7XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgcmVzb2x2ZUFsbFZhbHVlcyA9ICh2YWx1ZSwgZGF0YSwgdmFsdWVGaWVsZCkgPT4ge1xuICAgIGNvbnN0IGN1c3RvbVZhbHVlcyA9IHZhbGlkYXRlQ29tcGxleFZhbHVlcyh2YWx1ZSwgdmFsdWVGaWVsZCkgfHwgW107XG4gICAgY29uc3QgcmVzb2x2ZWRWYWx1ZXMgPSByZXNvbHZlVmFsdWVzSW5BcnJheSh2YWx1ZSwgZGF0YSwgdmFsdWVGaWVsZCkgfHwgW107XG4gICAgcmV0dXJuIHJlc29sdmVkVmFsdWVzLmNvbmNhdChjdXN0b21WYWx1ZXMpO1xufTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBpc09iamVjdEFycmF5ID0gKHZhbHVlcykgPT4ge1xuICAgIHJldHVybiBpc0FycmF5KHZhbHVlcykgJiYgdmFsdWVzLmV2ZXJ5KGl0ZW0gPT4gaXNPYmplY3QoaXRlbSkpO1xufTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBzZWxlY3RlZEluZGljZXMgPSAodmFsdWVzLCBkYXRhLCB2YWx1ZUZpZWxkKSA9PiB7XG4gICAgY29uc3QgZXh0cmFjdGVkVmFsdWVzID0gZGF0YS5tYXAoaXRlbSA9PiB7XG4gICAgICAgIHJldHVybiBpc1ByZXNlbnQoaXRlbSkgJiYgaXNQcmVzZW50KGdldHRlciQxKGl0ZW0sIHZhbHVlRmllbGQpKSA/IGdldHRlciQxKGl0ZW0sIHZhbHVlRmllbGQpIDogaXRlbTtcbiAgICB9KTtcbiAgICByZXR1cm4gdmFsdWVzLnJlZHVjZSgoYXJyLCBpdGVtKSA9PiB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gaXNQcmVzZW50KGl0ZW0pICYmIGlzUHJlc2VudChnZXR0ZXIkMShpdGVtLCB2YWx1ZUZpZWxkKSkgPyBnZXR0ZXIkMShpdGVtLCB2YWx1ZUZpZWxkKSA6IGl0ZW07XG4gICAgICAgIGNvbnN0IGluZGV4ID0gZXh0cmFjdGVkVmFsdWVzLmluZGV4T2YodmFsdWUpO1xuICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICBhcnIucHVzaChpbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFycjtcbiAgICB9LCBbXSk7XG59O1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IGdldHRlciQxID0gKGRhdGFJdGVtLCBmaWVsZCkgPT4ge1xuICAgIGlmICghaXNQcmVzZW50KGRhdGFJdGVtKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKCFpc1ByZXNlbnQoZmllbGQpIHx8ICFpc09iamVjdChkYXRhSXRlbSkpIHtcbiAgICAgICAgcmV0dXJuIGRhdGFJdGVtO1xuICAgIH1cbiAgICAvLyBjcmVhdGVzIGEgZmllbGQgYWNjZXNzb3Igc3VwcG9ydGluZyBuZXN0ZWQgZmllbGRzIHByb2Nlc3NpbmdcbiAgICBjb25zdCB2YWx1ZUZyb20gPSBnZXR0ZXIoZmllbGQpO1xuICAgIHJldHVybiB2YWx1ZUZyb20oZGF0YUl0ZW0pO1xufTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBzYW1lQ2hhcnNPbmx5ID0gKHdvcmQsIGNoYXJhY3RlcikgPT4ge1xuICAgIGZvciAobGV0IGlkeCA9IDA7IGlkeCA8IHdvcmQubGVuZ3RoOyBpZHgrKykge1xuICAgICAgICBpZiAod29yZC5jaGFyQXQoaWR4KSAhPT0gY2hhcmFjdGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59O1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IHNodWZmbGVEYXRhID0gKGRhdGEsIHNwbGl0SW5kZXgsIGRlZmF1bHRJdGVtKSA9PiB7XG4gICAgbGV0IHJlc3VsdCA9IGRhdGE7XG4gICAgaWYgKGRlZmF1bHRJdGVtKSB7XG4gICAgICAgIHJlc3VsdCA9IFtkZWZhdWx0SXRlbV0uY29uY2F0KHJlc3VsdCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQuc2xpY2Uoc3BsaXRJbmRleCkuY29uY2F0KHJlc3VsdC5zbGljZSgwLCBzcGxpdEluZGV4KSk7XG59O1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IG1hdGNoVGV4dCA9ICh0ZXh0LCB3b3JkLCBpZ25vcmVDYXNlKSA9PiB7XG4gICAgaWYgKCFpc1ByZXNlbnQodGV4dCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBsZXQgdGVtcCA9IFN0cmluZyh0ZXh0KTtcbiAgICBpZiAoaWdub3JlQ2FzZSkge1xuICAgICAgICB0ZW1wID0gdGVtcC50b0xvd2VyQ2FzZSgpO1xuICAgIH1cbiAgICByZXR1cm4gdGVtcC5pbmRleE9mKHdvcmQpID09PSAwO1xufTtcbi8qKlxuICogQGhpZGRlblxuICpcbiAqIENoZWNrcyB3aGV0aGVyIHRoZSBwYXNzZWQgb2JqZWN0IGhhcyBhbGwgb2YgdGhlIGxpc3RlZCBwcm9wZXJ0aWVzLlxuICovXG5jb25zdCBoYXNQcm9wcyA9IChvYmosIHByb3BzKSA9PiB7XG4gICAgaWYgKCFpc1ByZXNlbnQob2JqKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBwcm9wcy5ldmVyeShwcm9wID0+IG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSk7XG59O1xuLyoqXG4gKiBAaGlkZGVuXG4gKlxuICogQ2hlY2tzIHdoZXRoZXIgYW4gZWxlbWVudCBpcyB1bnRvdWNoZWQgYnkgbG9va2luZyBmb3IgdGhlIG5nLXVudG91Y2hlZCBjc3MgY2xhc3NcbiAqL1xuY29uc3QgaXNVbnRvdWNoZWQgPSAoZWxlbWVudCkgPT4gZWxlbWVudC5jbGFzc05hbWUuaW5jbHVkZXMoJ25nLXVudG91Y2hlZCcpO1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IG5vb3AgPSAoXykgPT4geyB9O1xuLyoqXG4gKiBJRSBlbGVtZW50IGBtYXRjaGVzYCBwb2x5ZmlsbC5cbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9FbGVtZW50L21hdGNoZXNcbiAqL1xuY29uc3QgbWF0Y2hlcyA9IChlbGVtZW50LCBzZWxlY3RvcikgPT4ge1xuICAgIGNvbnN0IG1hdGNoZXIgPSBlbGVtZW50Lm1hdGNoZXMgfHwgZWxlbWVudC5tc01hdGNoZXNTZWxlY3RvciB8fCBlbGVtZW50LndlYmtpdE1hdGNoZXNTZWxlY3RvcjtcbiAgICBpZiAoIW1hdGNoZXIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gbWF0Y2hlci5jYWxsKGVsZW1lbnQsIHNlbGVjdG9yKTtcbn07XG4vKipcbiAqIEBoaWRkZW5cbiAqXG4gKiBJRSBlbGVtZW50IGBjbG9zZXN0YCBwb2x5ZmlsbC5cbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9FbGVtZW50L2Nsb3Nlc3RcbiAqL1xuY29uc3QgY2xvc2VzdCA9IChlbGVtZW50LCBzZWxlY3RvcikgPT4ge1xuICAgIGxldCBwYXJlbnQgPSBlbGVtZW50O1xuICAgIHdoaWxlIChwYXJlbnQgIT09IG51bGwgJiYgcGFyZW50Lm5vZGVUeXBlID09PSAxKSB7XG4gICAgICAgIGlmIChtYXRjaGVzKHBhcmVudCwgc2VsZWN0b3IpKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnRFbGVtZW50IHx8IHBhcmVudC5wYXJlbnROb2RlO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn07XG4vKipcbiAqIEBoaWRkZW5cbiAqXG4gKiBQYXJzZXMgYSBwcm92aWRlZCB2YWx1ZSB0byBpdHMgdHlwZSAnbnVtYmVyJyByZXByZXNlbnRhdGlvbi5cbiAqIElmIHRoZSBwYXJzZWQgdmFsdWUgKHZpYSBOdW1iZXIodmFsdWUpKSBpcyBOYU4sIHRoZSBwcm92aWRlZCBkZWZhdWx0IHZhbHVlIGlzIHJldHVybmVkLlxuICogVXNlcyAwIGFzIGRlZmF1bHQgdmFsdWUgaWYgYSBzZWNvbmQgcGFyYW0gaXMgbm90IHByb3ZpZGVkLlxuICovXG5jb25zdCBwYXJzZU51bWJlciA9IChudW0sIGRlZmF1bHRWYWx1ZSA9IDApID0+IHtcbiAgICBjb25zdCBub3JtYWxpemVkVmFsdWUgPSBOdW1iZXIobnVtKTtcbiAgICByZXR1cm4gaXNOYU4obm9ybWFsaXplZFZhbHVlKSA/IGRlZmF1bHRWYWx1ZSA6IG5vcm1hbGl6ZWRWYWx1ZTtcbn07XG4vKipcbiAqIEBoaWRkZW5cbiAqXG4gKiBDaGVja3Mgd2hldGhlciB0aGUgcGFzc2VkIHRhcmdldCBlbGVtZW50IGlzIGluc2lkZSB0aGUgcHJvdmlkZWQgaG9zdCBvciBwb3B1cFJlZi5cbiAqL1xuY29uc3QgaW5Ecm9wRG93biA9IChob3N0LCB0YXJnZXQsIHBvcHVwUmVmKSA9PiB7XG4gICAgcmV0dXJuIGhvc3QubmF0aXZlRWxlbWVudC5jb250YWlucyh0YXJnZXQpIHx8IChwb3B1cFJlZiAmJiBwb3B1cFJlZi5wb3B1cEVsZW1lbnQuY29udGFpbnModGFyZ2V0KSk7XG59O1xuLyoqXG4gKiBAaGlkZGVuXG4gKlxuICogQ2FsY3VsYXRlcyB0aGUgaGllcmFyY2hpY2FsIGxldmVsIG9mIGFuIGl0ZW0sIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBpbmRleC5cbiAqIFRoZSByZXN1bHQgbGV2ZWwgaXMgemVyby1iYXNlZCAoc3RhcnRzIGZyb20gMCkuXG4gKi9cbmNvbnN0IGdldEhpZXJhcmNoaWNhbEl0ZW1MZXZlbCA9IChpbmRleCkgPT4ge1xuICAgIHJldHVybiAoaW5kZXggfHwgJycpLnNwbGl0KCdfJykubGVuZ3RoIC0gMTtcbn07XG4vKipcbiAqIEBoaWRkZW5cbiAqXG4gKiBSZXRyaWV2ZXMgYWxsIGRlc2NlbmRhbnQgbm9kZXMnIGxvb2t1cHMgd2hpY2ggYXJlIGN1cnJlbnRseSByZWdpc3RlcmVkIGluIHRoZSBwcm92aWRlZCBsb29rdXAgaXRlbSBhcyBhIGZsYXQgYXJyYXkuXG4gKi9cbmNvbnN0IGZldGNoRGVzY2VuZGVudE5vZGVzID0gKGxvb2t1cCwgZmlsdGVyRXhwcmVzc2lvbikgPT4ge1xuICAgIGlmICghaXNQcmVzZW50KGxvb2t1cCkgfHwgbG9va3VwLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIGxldCBkZXNjZW5kYW50cyA9IGxvb2t1cC5jaGlsZHJlbjtcbiAgICBpZiAoaXNQcmVzZW50KGZpbHRlckV4cHJlc3Npb24pKSB7XG4gICAgICAgIGRlc2NlbmRhbnRzID0gZGVzY2VuZGFudHMuZmlsdGVyKGRlc2NlbmRlbnQgPT4gZmlsdGVyRXhwcmVzc2lvbihkZXNjZW5kZW50Lml0ZW0pKTtcbiAgICB9XG4gICAgZGVzY2VuZGFudHMuZm9yRWFjaChjaGlsZCA9PiBkZXNjZW5kYW50cyA9IGRlc2NlbmRhbnRzLmNvbmNhdChmZXRjaERlc2NlbmRlbnROb2RlcyhjaGlsZCwgZmlsdGVyRXhwcmVzc2lvbikpKTtcbiAgICByZXR1cm4gZGVzY2VuZGFudHM7XG59O1xuLyoqXG4gKiBAaGlkZGVuXG4gKlxuICogUmV0cmlldmVzIHRoZSBjb3JyZWN0IHZhbHVlIGJhc2VkIG9uIHRoZSBpdGVtJ3MgbGV2ZWwgYW5kIHRoZSBwcm92aWRlZCB2YWx1ZSBmaWVsZC9zLlxuICogVXNlZCBpbiB0aGUgTXVsdGlTZWxlY3RUcmVlIGNvbXBvbmVudC5cbiAqL1xuY29uc3QgdmFsdWVGcm9tID0gKHsgZGF0YUl0ZW0sIGluZGV4LCBsZXZlbCB9LCB2YWx1ZUZpZWxkKSA9PiB7XG4gICAgY29uc3QgZmllbGRzID0gQXJyYXkuaXNBcnJheSh2YWx1ZUZpZWxkKSA/IHZhbHVlRmllbGQgOiBbdmFsdWVGaWVsZF07XG4gICAgLy8gZWl0aGVyIHVzZSB0aGUgZXhwbGljaXRseSBwcm92aWRlZCB2YWx1ZSBsZXZlbCwgb3IgaW5mZXIgaXQgZnJvbSB0aGUgaXRlbSBpbmRleFxuICAgIGNvbnN0IHZhbHVlTGV2ZWwgPSBpc1ByZXNlbnQobGV2ZWwpID8gbGV2ZWwgOiBnZXRIaWVyYXJjaGljYWxJdGVtTGV2ZWwoaW5kZXgpO1xuICAgIC8vIGZhbGwtYmFjayB0byB0aGUgbGFzdCBhdmFpbGFibGUgb25lLCBpZiB0aGUgY3VycmVudCBub2RlIGlzIGluIGEgZGVlcGVyIGxldmVsXG4gICAgY29uc3Qgbm9ybWFsaXplZExldmVsID0gTWF0aC5taW4odmFsdWVMZXZlbCwgZmllbGRzLmxlbmd0aCAtIDEpO1xuICAgIGNvbnN0IGZpZWxkID0gZmllbGRzW25vcm1hbGl6ZWRMZXZlbF07XG4gICAgcmV0dXJuIGdldHRlcihmaWVsZCkoZGF0YUl0ZW0pO1xufTtcblxuLyogdHNsaW50OmRpc2FibGU6bWVtYmVyLW9yZGVyaW5nICovXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xubGV0IFNlYXJjaEJhckNvbXBvbmVudCA9IGNsYXNzIFNlYXJjaEJhckNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IobG9jYWxpemF0aW9uLCByZW5kZXJlcikge1xuICAgICAgICB0aGlzLmxvY2FsaXphdGlvbiA9IGxvY2FsaXphdGlvbjtcbiAgICAgICAgdGhpcy52YWx1ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5vbkJsdXIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMub25Gb2N1cyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5vbkNsaWNrID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLm9uTmF2aWdhdGUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMuc2VhcmNoQmFyQ2xhc3MgPSB0cnVlO1xuICAgICAgICB0aGlzLl91c2VySW5wdXQgPSBcIlwiO1xuICAgICAgICB0aGlzLl9wcmV2aW91c1ZhbHVlID0gXCJcIjtcbiAgICAgICAgdGhpcy5fcGxhY2Vob2xkZXIgPSBcIlwiO1xuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IGxvY2FsaXphdGlvbi5ydGwgPyAncnRsJyA6ICdsdHInO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgfVxuICAgIGdldCB1c2VySW5wdXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl91c2VySW5wdXQ7XG4gICAgfVxuICAgIHNldCB1c2VySW5wdXQodXNlcklucHV0KSB7XG4gICAgICAgIHRoaXMuX3VzZXJJbnB1dCA9IHVzZXJJbnB1dCB8fCBcIlwiO1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlucHV0Lm5hdGl2ZUVsZW1lbnQudmFsdWU7XG4gICAgfVxuICAgIHNldCBwbGFjZWhvbGRlcih0ZXh0KSB7XG4gICAgICAgIHRoaXMuX3BsYWNlaG9sZGVyID0gdGV4dCB8fCAnJztcbiAgICAgICAgdGhpcy5zZXRJbnB1dFNpemUoKTtcbiAgICB9XG4gICAgZ2V0IHBsYWNlaG9sZGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGxhY2Vob2xkZXI7XG4gICAgfVxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICB0aGlzLmxvY2FsaXphdGlvbkNoYW5nZVN1YnNjcmlwdGlvbiA9IHRoaXMubG9jYWxpemF0aW9uXG4gICAgICAgICAgICAuY2hhbmdlcy5zdWJzY3JpYmUoKHsgcnRsIH0pID0+IHRoaXMuZGlyZWN0aW9uID0gcnRsID8gJ3J0bCcgOiAnbHRyJyk7XG4gICAgfVxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXMpIHtcbiAgICAgICAgbGV0IHByZXZpb3VzVXNlcklucHV0O1xuICAgICAgICBpZiAodGhpcy5pbnB1dCAmJiAoY2hhbmdlcy51c2VySW5wdXQgfHwgY2hhbmdlcy5zdWdnZXN0ZWRUZXh0KSkge1xuICAgICAgICAgICAgaWYgKGNoYW5nZXMudXNlcklucHV0ICYmIGNoYW5nZXMudXNlcklucHV0LnByZXZpb3VzVmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fcHJldmlvdXNWYWx1ZSA9PT0gY2hhbmdlcy51c2VySW5wdXQucHJldmlvdXNWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1VzZXJJbnB1dCA9IHRoaXMuX3ByZXZpb3VzVmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1VzZXJJbnB1dCA9IGNoYW5nZXMudXNlcklucHV0LmN1cnJlbnRWYWx1ZSB8fCBcIlwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHByZXZpb3VzVXNlcklucHV0ID0gdGhpcy5fcHJldmlvdXNWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNhcmV0SW5kZXggPSB0aGlzLmlucHV0Lm5hdGl2ZUVsZW1lbnQuc2VsZWN0aW9uU3RhcnQ7XG4gICAgICAgICAgICBjb25zdCBjYXJldEF0RW5kID0gcHJldmlvdXNVc2VySW5wdXQubGVuZ3RoID09PSBjYXJldEluZGV4O1xuICAgICAgICAgICAgdGhpcy53cml0ZUlucHV0VmFsdWUodGhpcy5zdWdnZXN0ZWRUZXh0ID8gY29tYmluZVN0cih0aGlzLnVzZXJJbnB1dCwgdGhpcy5zdWdnZXN0ZWRUZXh0KSA6IHRoaXMudXNlcklucHV0KTtcbiAgICAgICAgICAgIGlmICh0aGlzLnN1Z2dlc3RlZFRleHQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldElucHV0U2VsZWN0aW9uKHRoaXMudXNlcklucHV0Lmxlbmd0aCwgdGhpcy5zdWdnZXN0ZWRUZXh0Lmxlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjYXJldEF0RW5kKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRJbnB1dFNlbGVjdGlvbih0aGlzLnVzZXJJbnB1dC5sZW5ndGgsIHRoaXMudXNlcklucHV0Lmxlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldElucHV0U2VsZWN0aW9uKGNhcmV0SW5kZXgsIGNhcmV0SW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fcHJldmlvdXNWYWx1ZSA9IHRoaXMudXNlcklucHV0O1xuICAgICAgICB9XG4gICAgfVxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICBpZiAodGhpcy5sb2NhbGl6YXRpb25DaGFuZ2VTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIHRoaXMubG9jYWxpemF0aW9uQ2hhbmdlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgd3JpdGVJbnB1dFZhbHVlKHRleHQpIHtcbiAgICAgICAgaWYgKGlzRG9jdW1lbnRBdmFpbGFibGUoKSkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRQcm9wZXJ0eSh0aGlzLmlucHV0Lm5hdGl2ZUVsZW1lbnQsICd2YWx1ZScsIHRleHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNldElucHV0U2VsZWN0aW9uKHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgaWYgKGlzRG9jdW1lbnRBdmFpbGFibGUoKSAmJiB0aGlzLmlucHV0Lm5hdGl2ZUVsZW1lbnQgPT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dC5uYXRpdmVFbGVtZW50LnNldFNlbGVjdGlvblJhbmdlKHN0YXJ0LCBlbmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAvL01ha2Ugc3VyZSB0aGF0IHRoZSBlbGVtZW50IGlzIGluIHRoZSBET00gYmVmb3JlIHlvdSBpbnZva2UgaXRzIG1ldGhvZHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVJbnB1dChldmVudCkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGV2ZW50LnRhcmdldC52YWx1ZTtcbiAgICAgICAgaWYgKHZhbHVlICE9PSB0aGlzLnVzZXJJbnB1dCkge1xuICAgICAgICAgICAgdGhpcy5fcHJldmlvdXNWYWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy52YWx1ZUNoYW5nZS5lbWl0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVGb2N1cyhldmVudCkge1xuICAgICAgICB0aGlzLm9uRm9jdXMuZW1pdChldmVudCk7XG4gICAgfVxuICAgIGhhbmRsZUJsdXIoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5vbkJsdXIuZW1pdChldmVudCk7XG4gICAgfVxuICAgIGhhbmRsZUtleWRvd24oZXZlbnQpIHtcbiAgICAgICAgY29uc3Qga2V5Q29kZSA9IGV2ZW50LmtleUNvZGU7XG4gICAgICAgIGNvbnN0IGtleXMgPSBbS2V5cy5BcnJvd1VwLCBLZXlzLkFycm93RG93biwgS2V5cy5BcnJvd0xlZnQsIEtleXMuQXJyb3dSaWdodCwgS2V5cy5FbnRlcixcbiAgICAgICAgICAgIEtleXMuRXNjYXBlLCBLZXlzLkRlbGV0ZSwgS2V5cy5CYWNrc3BhY2UsIEtleXMuSG9tZSwgS2V5cy5FbmRdO1xuICAgICAgICBpZiAoa2V5cy5pbmRleE9mKGtleUNvZGUpID4gLTEpIHtcbiAgICAgICAgICAgIHRoaXMub25OYXZpZ2F0ZS5lbWl0KGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb2N1cygpIHtcbiAgICAgICAgaWYgKGlzRG9jdW1lbnRBdmFpbGFibGUoKSkge1xuICAgICAgICAgICAgdGhpcy5pbnB1dC5uYXRpdmVFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYmx1cigpIHtcbiAgICAgICAgaWYgKGlzRG9jdW1lbnRBdmFpbGFibGUoKSkge1xuICAgICAgICAgICAgdGhpcy5pbnB1dC5uYXRpdmVFbGVtZW50LmJsdXIoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRJbnB1dFNpemUoKSB7XG4gICAgICAgIGNvbnN0IGxlbmd0aE9mID0geCA9PiB4ID8geC5sZW5ndGggOiAwO1xuICAgICAgICBjb25zdCBpbnB1dCA9IHRoaXMuaW5wdXQubmF0aXZlRWxlbWVudDtcbiAgICAgICAgY29uc3QgcGxhY2Vob2xkZXJMZW5ndGggPSBsZW5ndGhPZih0aGlzLnBsYWNlaG9sZGVyKTtcbiAgICAgICAgY29uc3QgdGV4dExlbmd0aCA9IGxlbmd0aE9mKHRoaXMudmFsdWUpO1xuICAgICAgICBjb25zdCBzaXplID0gTWF0aC5tYXgocGxhY2Vob2xkZXJMZW5ndGgsIHRleHRMZW5ndGgsIDEpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldEF0dHJpYnV0ZShpbnB1dCwgJ3NpemUnLCBzaXplLnRvU3RyaW5nKCkpO1xuICAgIH1cbn07XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBTZWFyY2hCYXJDb21wb25lbnQucHJvdG90eXBlLCBcImlkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBTZWFyY2hCYXJDb21wb25lbnQucHJvdG90eXBlLCBcImxpc3RJZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgU2VhcmNoQmFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0YWdMaXN0SWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIFNlYXJjaEJhckNvbXBvbmVudC5wcm90b3R5cGUsIFwiYWN0aXZlRGVzY2VuZGFudFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgU2VhcmNoQmFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJub0RhdGFMYWJlbFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIFNlYXJjaEJhckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZGlzYWJsZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBTZWFyY2hCYXJDb21wb25lbnQucHJvdG90eXBlLCBcInJlYWRvbmx5XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOdW1iZXIpXG5dLCBTZWFyY2hCYXJDb21wb25lbnQucHJvdG90eXBlLCBcInRhYkluZGV4XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgU2VhcmNoQmFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJwb3B1cE9wZW5cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIFNlYXJjaEJhckNvbXBvbmVudC5wcm90b3R5cGUsIFwicm9sZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW1N0cmluZ10pXG5dLCBTZWFyY2hCYXJDb21wb25lbnQucHJvdG90eXBlLCBcInVzZXJJbnB1dFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIFNlYXJjaEJhckNvbXBvbmVudC5wcm90b3R5cGUsIFwic3VnZ2VzdGVkVGV4dFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIFNlYXJjaEJhckNvbXBvbmVudC5wcm90b3R5cGUsIFwidmFsdWVDaGFuZ2VcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBTZWFyY2hCYXJDb21wb25lbnQucHJvdG90eXBlLCBcIm9uQmx1clwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIFNlYXJjaEJhckNvbXBvbmVudC5wcm90b3R5cGUsIFwib25Gb2N1c1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIFNlYXJjaEJhckNvbXBvbmVudC5wcm90b3R5cGUsIFwib25DbGlja1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIFNlYXJjaEJhckNvbXBvbmVudC5wcm90b3R5cGUsIFwib25OYXZpZ2F0ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgVmlld0NoaWxkKCdpbnB1dCcsIHsgc3RhdGljOiB0cnVlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFbGVtZW50UmVmKVxuXSwgU2VhcmNoQmFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpbnB1dFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmstc2VhcmNoYmFyJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBTZWFyY2hCYXJDb21wb25lbnQucHJvdG90eXBlLCBcInNlYXJjaEJhckNsYXNzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbU3RyaW5nXSlcbl0sIFNlYXJjaEJhckNvbXBvbmVudC5wcm90b3R5cGUsIFwicGxhY2Vob2xkZXJcIiwgbnVsbCk7XG5TZWFyY2hCYXJDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICBDb21wb25lbnQoe1xuICAgICAgICBzZWxlY3RvcjogJ2tlbmRvLXNlYXJjaGJhcicsXG4gICAgICAgIHRlbXBsYXRlOiBgXG4gICAgICAgIDxpbnB1dCAjaW5wdXRcbiAgICAgICAgICAgIGF1dG9jb21wbGV0ZT1cIm9mZlwiXG4gICAgICAgICAgICBbaWRdPVwiaWRcIlxuICAgICAgICAgICAgW2Rpc2FibGVkXT1cImRpc2FibGVkXCJcbiAgICAgICAgICAgIFtyZWFkb25seV09XCJyZWFkb25seVwiXG4gICAgICAgICAgICBbcGxhY2Vob2xkZXJdPVwicGxhY2Vob2xkZXJcIlxuICAgICAgICAgICAgW2NsYXNzXT1cIidrLWlucHV0J1wiXG4gICAgICAgICAgICAoaW5wdXQpPVwiaGFuZGxlSW5wdXQoJGV2ZW50KVwiXG4gICAgICAgICAgICAoa2V5ZG93bik9XCJoYW5kbGVLZXlkb3duKCRldmVudClcIlxuICAgICAgICAgICAgW2tlbmRvRXZlbnRzT3V0c2lkZUFuZ3VsYXJdPVwie1xuICAgICAgICAgICAgICAgIGZvY3VzOiBoYW5kbGVGb2N1cyxcbiAgICAgICAgICAgICAgICBibHVyOiBoYW5kbGVCbHVyXG4gICAgICAgICAgICB9XCJcbiAgICAgICAgICAgIFtzY29wZV09XCJ0aGlzXCJcbiAgICAgICAgICAgIFthdHRyLnRhYkluZGV4XT1cInRhYkluZGV4XCJcbiAgICAgICAgICAgIFthdHRyLmRpcl09XCJkaXJlY3Rpb25cIlxuICAgICAgICAgICAgW2F0dHIucm9sZV09XCJyb2xlXCJcbiAgICAgICAgICAgIFthdHRyLmFyaWEtZGlzYWJsZWRdPVwiZGlzYWJsZWRcIlxuICAgICAgICAgICAgW2F0dHIuYXJpYS1yZWFkb25seV09XCJyZWFkb25seVwiXG4gICAgICAgICAgICBhcmlhLWhhc3BvcHVwPVwibGlzdGJveFwiXG4gICAgICAgICAgICBbYXR0ci5hcmlhLWV4cGFuZGVkXT1cInBvcHVwT3BlblwiXG4gICAgICAgICAgICBbYXR0ci5hcmlhLW93bnNdPVwibGlzdElkXCJcbiAgICAgICAgICAgIFthdHRyLmFyaWEtZGVzY3JpYmVkYnldPVwidGFnTGlzdElkXCJcbiAgICAgICAgICAgIFthdHRyLmFyaWEtYWN0aXZlZGVzY2VuZGFudF09XCJhY3RpdmVEZXNjZW5kYW50XCJcbiAgICAgICAgICAgIFthdHRyLmFyaWEtbGFiZWxdPVwibm9EYXRhTGFiZWxcIlxuICAgICAgICAvPlxuICAgYFxuICAgIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTG9jYWxpemF0aW9uU2VydmljZSxcbiAgICAgICAgUmVuZGVyZXIyXSlcbl0sIFNlYXJjaEJhckNvbXBvbmVudCk7XG5cbi8qKlxuICogUmVuZGVycyB0aGUgbGlzdCBpdGVtIGNvbnRlbnQuIFRvIGRlZmluZSB0aGUgaXRlbSB0ZW1wbGF0ZSwgbmVzdCBhbiBgPG5nLXRlbXBsYXRlPmAgdGFnXG4gKiB3aXRoIHRoZSBga2VuZG88Q29tcG9uZW50TmFtZT5JdGVtVGVtcGxhdGVgIGRpcmVjdGl2ZSBpbnNpZGUgdGhlIGNvbXBvbmVudCB0YWcuIFRoZSB0ZW1wbGF0ZSBjb250ZXh0IGlzXG4gKiBzZXQgdG8gdGhlIGN1cnJlbnQgY29tcG9uZW50LiBUbyBnZXQgYSByZWZlcmVuY2UgdG8gdGhlIGN1cnJlbnQgZGF0YSBpdGVtLCB1c2UgdGhlIGBsZXQtZGF0YUl0ZW1gIGRpcmVjdGl2ZS5cbiAqXG4gKiAtIFtVc2luZyBgSXRlbVRlbXBsYXRlYCB3aXRoIHRoZSBBdXRvQ29tcGxldGVdKHslIHNsdWcgdGVtcGxhdGVzX2F1dG9jb21wbGV0ZSAlfSN0b2MtaXRlbS10ZW1wbGF0ZSlcbiAqIC0gW1VzaW5nIGBJdGVtVGVtcGxhdGVgIHdpdGggdGhlIENvbWJvQm94XSh7JSBzbHVnIHRlbXBsYXRlc19jb21ib2JveCAlfSN0b2MtaXRlbS10ZW1wbGF0ZSlcbiAqIC0gW1VzaW5nIGBJdGVtVGVtcGxhdGVgIHdpdGggdGhlIERyb3BEb3duTGlzdF0oeyUgc2x1ZyB0ZW1wbGF0ZXNfZGRsICV9I3RvYy1pdGVtLXRlbXBsYXRlKVxuICogLSBbVXNpbmcgYEl0ZW1UZW1wbGF0ZWAgd2l0aCB0aGUgTXVsdGlTZWxlY3RdKHslIHNsdWcgdGVtcGxhdGVzX211bHRpc2VsZWN0ICV9I3RvYy1pdGVtLXRlbXBsYXRlKVxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogX0BDb21wb25lbnQoe1xuICogc2VsZWN0b3I6ICdteS1hcHAnLFxuICogdGVtcGxhdGU6IGBcbiAqICA8a2VuZG8tY29tYm9ib3ggW2RhdGFdPVwibGlzdEl0ZW1zXCI+XG4gKiAgICA8bmctdGVtcGxhdGUga2VuZG9Db21ib0JveEl0ZW1UZW1wbGF0ZSBsZXQtZGF0YUl0ZW0+XG4gKiAgICAgIDxzcGFuPnt7ZGF0YUl0ZW19fSBvcHRpb248L3NwYW4+XG4gKiAgICA8L25nLXRlbXBsYXRlPlxuICogIDwva2VuZG8tY29tYm9ib3g+XG4gKiBgXG4gKiB9KVxuICogY2xhc3MgQXBwQ29tcG9uZW50IHtcbiAqICAgcHVibGljIGxpc3RJdGVtczogQXJyYXk8c3RyaW5nPiA9IFtcIkl0ZW0gMVwiLCBcIkl0ZW0gMlwiLCBcIkl0ZW0gM1wiLCBcIkl0ZW0gNFwiXTtcbiAqIH1cbiAqIGBgYFxuICovXG5sZXQgSXRlbVRlbXBsYXRlRGlyZWN0aXZlID0gY2xhc3MgSXRlbVRlbXBsYXRlRGlyZWN0aXZlIHtcbiAgICBjb25zdHJ1Y3Rvcih0ZW1wbGF0ZVJlZikge1xuICAgICAgICB0aGlzLnRlbXBsYXRlUmVmID0gdGVtcGxhdGVSZWY7XG4gICAgfVxufTtcbkl0ZW1UZW1wbGF0ZURpcmVjdGl2ZSA9IF9fZGVjb3JhdGUoW1xuICAgIERpcmVjdGl2ZSh7XG4gICAgICAgIHNlbGVjdG9yOiAnW2tlbmRvRHJvcERvd25MaXN0SXRlbVRlbXBsYXRlXSxba2VuZG9Db21ib0JveEl0ZW1UZW1wbGF0ZV0sW2tlbmRvQXV0b0NvbXBsZXRlSXRlbVRlbXBsYXRlXSxba2VuZG9NdWx0aVNlbGVjdEl0ZW1UZW1wbGF0ZV0nXG4gICAgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtUZW1wbGF0ZVJlZl0pXG5dLCBJdGVtVGVtcGxhdGVEaXJlY3RpdmUpO1xuXG4vKipcbiAqIFJlbmRlcnMgdGhlIGhlYWRlciBjb250ZW50IG9mIHRoZSBsaXN0LiBUbyBkZWZpbmUgdGhlIGhlYWRlciB0ZW1wbGF0ZSwgbmVzdCBhbiBgPG5nLXRlbXBsYXRlPmAgdGFnXG4gKiB3aXRoIHRoZSBga2VuZG88Q29tcG9uZW50TmFtZT5IZWFkZXJUZW1wbGF0ZWAgZGlyZWN0aXZlIGluc2lkZSB0aGUgY29tcG9uZW50IHRhZy5cbiAqXG4gKiAtIFtVc2luZyBgSGVhZGVyVGVtcGxhdGVgIHdpdGggdGhlIEF1dG9Db21wbGV0ZV0oeyUgc2x1ZyB0ZW1wbGF0ZXNfYXV0b2NvbXBsZXRlICV9I3RvYy1oZWFkZXItdGVtcGxhdGUpXG4gKiAtIFtVc2luZyBgSGVhZGVyVGVtcGxhdGVgIHdpdGggdGhlIENvbWJvQm94XSh7JSBzbHVnIHRlbXBsYXRlc19jb21ib2JveCAlfSN0b2MtaGVhZGVyLXRlbXBsYXRlKVxuICogLSBbVXNpbmcgYEhlYWRlclRlbXBsYXRlYCB3aXRoIHRoZSBNdWx0aUNvbHVtbkNvbWJvQm94XSh7JSBzbHVnIHRlbXBsYXRlc19tdWx0aWNvbHVtbmNvbWJvYm94ICV9I3RvYy1oZWFkZXItdGVtcGxhdGUpXG4gKiAtIFtVc2luZyBgSGVhZGVyVGVtcGxhdGVgIHdpdGggdGhlIERyb3BEb3duTGlzdF0oeyUgc2x1ZyB0ZW1wbGF0ZXNfZGRsICV9I3RvYy1oZWFkZXItdGVtcGxhdGUpXG4gKiAtIFtVc2luZyBgSGVhZGVyVGVtcGxhdGVgIHdpdGggdGhlIERyb3BEb3duVHJlZV0oeyUgc2x1ZyB0ZW1wbGF0ZXNfZGR0ICV9I3RvYy1oZWFkZXItdGVtcGxhdGUpXG4gKiAtIFtVc2luZyBgSGVhZGVyVGVtcGxhdGVgIHdpdGggdGhlIE11bHRpU2VsZWN0XSh7JSBzbHVnIHRlbXBsYXRlc19tdWx0aXNlbGVjdCAlfSN0b2MtaGVhZGVyLXRlbXBsYXRlKVxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogX0BDb21wb25lbnQoe1xuICogc2VsZWN0b3I6ICdteS1hcHAnLFxuICogdGVtcGxhdGU6IGBcbiAqICA8a2VuZG8tY29tYm9ib3ggW2RhdGFdPVwibGlzdEl0ZW1zXCI+XG4gKiAgICA8bmctdGVtcGxhdGUga2VuZG9Db21ib0JveEhlYWRlclRlbXBsYXRlPlxuICogICAgICA8aDQ+SGVhZGVyIHRlbXBsYXRlPC9oND5cbiAqICAgIDwvbmctdGVtcGxhdGU+XG4gKiAgPC9rZW5kby1jb21ib2JveD5cbiAqIGBcbiAqIH0pXG4gKiBjbGFzcyBBcHBDb21wb25lbnQge1xuICogICBwdWJsaWMgbGlzdEl0ZW1zOiBBcnJheTxzdHJpbmc+ID0gW1wiSXRlbSAxXCIsIFwiSXRlbSAyXCIsIFwiSXRlbSAzXCIsIFwiSXRlbSA0XCJdO1xuICogfVxuICogYGBgXG4gKi9cbmxldCBIZWFkZXJUZW1wbGF0ZURpcmVjdGl2ZSA9IGNsYXNzIEhlYWRlclRlbXBsYXRlRGlyZWN0aXZlIHtcbiAgICBjb25zdHJ1Y3Rvcih0ZW1wbGF0ZVJlZikge1xuICAgICAgICB0aGlzLnRlbXBsYXRlUmVmID0gdGVtcGxhdGVSZWY7XG4gICAgfVxufTtcbkhlYWRlclRlbXBsYXRlRGlyZWN0aXZlID0gX19kZWNvcmF0ZShbXG4gICAgRGlyZWN0aXZlKHtcbiAgICAgICAgc2VsZWN0b3I6ICdba2VuZG9Ecm9wRG93bkxpc3RIZWFkZXJUZW1wbGF0ZV0sW2tlbmRvQ29tYm9Cb3hIZWFkZXJUZW1wbGF0ZV0sW2tlbmRvRHJvcERvd25UcmVlSGVhZGVyVGVtcGxhdGVdLFtrZW5kb011bHRpQ29sdW1uQ29tYm9Cb3hIZWFkZXJUZW1wbGF0ZV0sW2tlbmRvQXV0b0NvbXBsZXRlSGVhZGVyVGVtcGxhdGVdLFtrZW5kb011bHRpU2VsZWN0SGVhZGVyVGVtcGxhdGVdLFtrZW5kb011bHRpU2VsZWN0VHJlZUhlYWRlclRlbXBsYXRlXSdcbiAgICB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW1RlbXBsYXRlUmVmXSlcbl0sIEhlYWRlclRlbXBsYXRlRGlyZWN0aXZlKTtcblxuLyoqXG4gKiBSZW5kZXJzIHRoZSBmb290ZXIgY29udGVudCBvZiB0aGUgbGlzdC4gVG8gZGVmaW5lIHRoZSBmb290ZXIgdGVtcGxhdGUsIG5lc3QgYW4gYDxuZy10ZW1wbGF0ZT5gIHRhZ1xuICogd2l0aCB0aGUgYGtlbmRvPENvbXBvbmVudE5hbWU+Rm9vdGVyVGVtcGxhdGVgIGRpcmVjdGl2ZSBpbnNpZGUgdGhlIGNvbXBvbmVudCB0YWcuXG4gKlxuICogLSBbVXNpbmcgYEZvb3RlclRlbXBsYXRlYCB3aXRoIHRoZSBBdXRvQ29tcGxldGVdKHslIHNsdWcgdGVtcGxhdGVzX2F1dG9jb21wbGV0ZSAlfSN0b2MtZm9vdGVyLXRlbXBsYXRlKVxuICogLSBbVXNpbmcgYEZvb3RlclRlbXBsYXRlYCB3aXRoIHRoZSBDb21ib0JveF0oeyUgc2x1ZyB0ZW1wbGF0ZXNfY29tYm9ib3ggJX0jdG9jLWZvb3Rlci10ZW1wbGF0ZSlcbiAqIC0gW1VzaW5nIGBGb290ZXJUZW1wbGF0ZWAgd2l0aCB0aGUgTXVsdGlDb2x1bW5Db21ib0JveF0oeyUgc2x1ZyB0ZW1wbGF0ZXNfbXVsdGljb2x1bW5jb21ib2JveCAlfSN0b2MtZm9vdGVyLXRlbXBsYXRlKVxuICogLSBbVXNpbmcgYEZvb3RlclRlbXBsYXRlYCB3aXRoIHRoZSBEcm9wRG93bkxpc3RdKHslIHNsdWcgdGVtcGxhdGVzX2RkbCAlfSN0b2MtZm9vdGVyLXRlbXBsYXRlKVxuICogLSBbVXNpbmcgYEZvb3RlclRlbXBsYXRlYCB3aXRoIHRoZSBEcm9wRG93blRyZWVdKHslIHNsdWcgdGVtcGxhdGVzX2RkdCAlfSN0b2MtZm9vdGVyLXRlbXBsYXRlKVxuICogLSBbVXNpbmcgYEZvb3RlclRlbXBsYXRlYCB3aXRoIHRoZSBNdWx0aVNlbGVjdF0oeyUgc2x1ZyB0ZW1wbGF0ZXNfbXVsdGlzZWxlY3QgJX0jdG9jLWZvb3Rlci10ZW1wbGF0ZSlcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIF9AQ29tcG9uZW50KHtcbiAqIHNlbGVjdG9yOiAnbXktYXBwJyxcbiAqIHRlbXBsYXRlOiBgXG4gKiAgPGtlbmRvLWNvbWJvYm94IFtkYXRhXT1cImxpc3RJdGVtc1wiPlxuICogICAgPG5nLXRlbXBsYXRlIGtlbmRvQ29tYm9Cb3hGb290ZXJUZW1wbGF0ZT5cbiAqICAgICAgPGg0PkZvb3RlciB0ZW1wbGF0ZTwvaDQ+XG4gKiAgICA8L25nLXRlbXBsYXRlPlxuICogIDwva2VuZG8tY29tYm9ib3g+XG4gKiBgXG4gKiB9KVxuICogY2xhc3MgQXBwQ29tcG9uZW50IHtcbiAqICAgcHVibGljIGxpc3RJdGVtczogQXJyYXk8c3RyaW5nPiA9IFtcIkl0ZW0gMVwiLCBcIkl0ZW0gMlwiLCBcIkl0ZW0gM1wiLCBcIkl0ZW0gNFwiXTtcbiAqIH1cbiAqIGBgYFxuICovXG5sZXQgRm9vdGVyVGVtcGxhdGVEaXJlY3RpdmUgPSBjbGFzcyBGb290ZXJUZW1wbGF0ZURpcmVjdGl2ZSB7XG4gICAgY29uc3RydWN0b3IodGVtcGxhdGVSZWYpIHtcbiAgICAgICAgdGhpcy50ZW1wbGF0ZVJlZiA9IHRlbXBsYXRlUmVmO1xuICAgIH1cbn07XG5Gb290ZXJUZW1wbGF0ZURpcmVjdGl2ZSA9IF9fZGVjb3JhdGUoW1xuICAgIERpcmVjdGl2ZSh7XG4gICAgICAgIHNlbGVjdG9yOiAnW2tlbmRvRHJvcERvd25MaXN0Rm9vdGVyVGVtcGxhdGVdLFtrZW5kb0NvbWJvQm94Rm9vdGVyVGVtcGxhdGVdLFtrZW5kb0Ryb3BEb3duVHJlZUZvb3RlclRlbXBsYXRlXSxba2VuZG9NdWx0aUNvbHVtbkNvbWJvQm94Rm9vdGVyVGVtcGxhdGVdLFtrZW5kb0F1dG9Db21wbGV0ZUZvb3RlclRlbXBsYXRlXSxba2VuZG9NdWx0aVNlbGVjdEZvb3RlclRlbXBsYXRlXSxba2VuZG9NdWx0aVNlbGVjdFRyZWVGb290ZXJUZW1wbGF0ZV0nXG4gICAgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtUZW1wbGF0ZVJlZl0pXG5dLCBGb290ZXJUZW1wbGF0ZURpcmVjdGl2ZSk7XG5cbi8qKlxuICogUmVuZGVycyB0aGUgZ3JvdXAgaGVhZGVyIGNvbnRlbnQuIFRvIGRlZmluZSB0aGUgZ3JvdXAgdGVtcGxhdGUsIG5lc3QgYW4gYDxuZy10ZW1wbGF0ZT5gIHRhZ1xuICogd2l0aCB0aGUgYGtlbmRvPENvbXBvbmVudE5hbWU+R3JvdXBUZW1wbGF0ZWAgZGlyZWN0aXZlIGluc2lkZSB0aGUgY29tcG9uZW50IHRhZy4gVGhlIHRlbXBsYXRlIGNvbnRleHQgaXNcbiAqIHNldCB0byB0aGUgY3VycmVudCBjb21wb25lbnQuIFRvIGdldCBhIHJlZmVyZW5jZSB0byB0aGUgY3VycmVudCBkYXRhIGl0ZW0sIHVzZSB0aGUgYGxldC1ncm91cE5hbWVgIGRpcmVjdGl2ZS5cbiAqXG4gKiAtIFtVc2luZyBgR3JvdXBUZW1wbGF0ZWAgd2l0aCB0aGUgQXV0b0NvbXBsZXRlXSh7JSBzbHVnIHRlbXBsYXRlc19hdXRvY29tcGxldGUgJX0jdG9jLWdyb3VwLXRlbXBsYXRlKVxuICogLSBbVXNpbmcgYEdyb3VwVGVtcGxhdGVgIHdpdGggdGhlIENvbWJvQm94XSh7JSBzbHVnIHRlbXBsYXRlc19jb21ib2JveCAlfSN0b2MtZ3JvdXAtdGVtcGxhdGUpXG4gKiAtIFtVc2luZyBgR3JvdXBUZW1wbGF0ZWAgd2l0aCB0aGUgTXVsdGlDb2x1bW5Db21ib0JveF0oeyUgc2x1ZyB0ZW1wbGF0ZXNfbXVsdGljb2x1bW5jb21ib2JveCAlfSN0b2MtZ3JvdXAtdGVtcGxhdGUpXG4gKiAtIFtVc2luZyBgR3JvdXBUZW1wbGF0ZWAgd2l0aCB0aGUgRHJvcERvd25MaXN0XSh7JSBzbHVnIHRlbXBsYXRlc19kZGwgJX0jdG9jLWdyb3VwLXRlbXBsYXRlKVxuICogLSBbVXNpbmcgYEdyb3VwVGVtcGxhdGVgIHdpdGggdGhlIE11bHRpU2VsZWN0XSh7JSBzbHVnIHRlbXBsYXRlc19tdWx0aXNlbGVjdCAlfSN0b2MtZ3JvdXAtdGVtcGxhdGUpXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBncm91cEJ5IH0gZnJvbSAnQHByb2dyZXNzL2tlbmRvLWRhdGEtcXVlcnknO1xuICogX0BDb21wb25lbnQoe1xuICogc2VsZWN0b3I6ICdteS1hcHAnLFxuICogdGVtcGxhdGU6IGBcbiAqICA8a2VuZG8tY29tYm9ib3ggW2RhdGFdPVwiZ3JvdXBlZERhdGFcIiB0ZXh0RmllbGQ9XCJuYW1lXCIgdmFsdWVGaWVsZD1cIm5hbWVcIj5cbiAqICAgIDxuZy10ZW1wbGF0ZSBrZW5kb0NvbWJvQm94R3JvdXBUZW1wbGF0ZSBsZXQtZ3JvdXBOYW1lPlxuICogICAgICA8c3Bhbj5Gb29kIHR5cGU6IHt7Z3JvdXBOYW1lfX0gb3B0aW9uPC9zcGFuPlxuICogICAgPC9uZy10ZW1wbGF0ZT5cbiAqICA8L2tlbmRvLWNvbWJvYm94PlxuICogYFxuICogfSlcbiAqIGNsYXNzIEFwcENvbXBvbmVudCB7XG4gKiAgIHB1YmxpYyBkYXRhID0gW1xuICogICAgICAgeyBuYW1lOiBcIlBvcmtcIiwgY2F0ZWdvcnk6IFwiRm9vZFwiLCBzdWJjYXRlZ29yeTogXCJNZWF0XCIgfSxcbiAqICAgICAgIHsgbmFtZTogXCJQZXBwZXJcIiwgY2F0ZWdvcnk6IFwiRm9vZFwiLCBzdWJjYXRlZ29yeTogXCJWZWdldGFibGVzXCIgfSxcbiAqICAgICAgIHsgbmFtZTogXCJCZWVmXCIsIGNhdGVnb3J5OiBcIkZvb2RcIiwgc3ViY2F0ZWdvcnk6IFwiTWVhdFwiIH1cbiAqICAgXTtcbiAqICAgcHVibGljIGdyb3VwZWREYXRhID0gZ3JvdXBCeSh0aGlzLmRhdGEsIFt7ZmllbGQ6IFwic3ViY2F0ZWdvcnlcIn1dKTtcbiAqIH1cbiAqIGBgYFxuICovXG5sZXQgR3JvdXBUZW1wbGF0ZURpcmVjdGl2ZSA9IGNsYXNzIEdyb3VwVGVtcGxhdGVEaXJlY3RpdmUge1xuICAgIGNvbnN0cnVjdG9yKHRlbXBsYXRlUmVmKSB7XG4gICAgICAgIHRoaXMudGVtcGxhdGVSZWYgPSB0ZW1wbGF0ZVJlZjtcbiAgICB9XG59O1xuR3JvdXBUZW1wbGF0ZURpcmVjdGl2ZSA9IF9fZGVjb3JhdGUoW1xuICAgIERpcmVjdGl2ZSh7XG4gICAgICAgIHNlbGVjdG9yOiAnW2tlbmRvRHJvcERvd25MaXN0R3JvdXBUZW1wbGF0ZV0sW2tlbmRvQ29tYm9Cb3hHcm91cFRlbXBsYXRlXSxba2VuZG9NdWx0aUNvbHVtbkNvbWJvQm94R3JvdXBUZW1wbGF0ZV0sW2tlbmRvQXV0b0NvbXBsZXRlR3JvdXBUZW1wbGF0ZV0sW2tlbmRvTXVsdGlTZWxlY3RHcm91cFRlbXBsYXRlXSdcbiAgICB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW1RlbXBsYXRlUmVmXSlcbl0sIEdyb3VwVGVtcGxhdGVEaXJlY3RpdmUpO1xuXG4vKipcbiAqIFJlbmRlcnMgdGhlIGZpeGVkIGdyb3VwIGhlYWRlciBjb250ZW50LiBUbyBkZWZpbmUgdGhlIGZpeGVkIGdyb3VwIHRlbXBsYXRlLCBuZXN0IGFuIGA8bmctdGVtcGxhdGU+YCB0YWdcbiAqIHdpdGggdGhlIGBrZW5kbzxDb21wb25lbnROYW1lPkZpeGVkR3JvdXBUZW1wbGF0ZWAgZGlyZWN0aXZlIGluc2lkZSB0aGUgY29tcG9uZW50IHRhZy4gVGhlIHRlbXBsYXRlIGNvbnRleHQgaXNcbiAqIHNldCB0byB0aGUgY3VycmVudCBjb21wb25lbnQuIFRvIGdldCBhIHJlZmVyZW5jZSB0byB0aGUgY3VycmVudCBkYXRhIGl0ZW0sIHVzZSB0aGUgYGxldC1ncm91cE5hbWVgIGRpcmVjdGl2ZS5cbiAqXG4gKiAtIFtVc2luZyBgRml4ZWRHcm91cFRlbXBsYXRlYCB3aXRoIHRoZSBBdXRvQ29tcGxldGVdKHslIHNsdWcgdGVtcGxhdGVzX2F1dG9jb21wbGV0ZSAlfSN0b2MtZml4ZWQtZ3JvdXAtdGVtcGxhdGUpXG4gKiAtIFtVc2luZyBgRml4ZWRHcm91cFRlbXBsYXRlYCB3aXRoIHRoZSBDb21ib0JveF0oeyUgc2x1ZyB0ZW1wbGF0ZXNfY29tYm9ib3ggJX0jdG9jLWZpeGVkLWdyb3VwLXRlbXBsYXRlKVxuICogLSBbVXNpbmcgYEZpeGVkR3JvdXBUZW1wbGF0ZWAgd2l0aCB0aGUgTXVsdGlDb2x1bW5Db21ib0JveF0oeyUgc2x1ZyB0ZW1wbGF0ZXNfbXVsdGljb2x1bW5jb21ib2JveCAlfSN0b2MtZml4ZWQtZ3JvdXAtdGVtcGxhdGUpXG4gKiAtIFtVc2luZyBgRml4ZWRHcm91cFRlbXBsYXRlYCB3aXRoIHRoZSBEcm9wRG93bkxpc3RdKHslIHNsdWcgdGVtcGxhdGVzX2RkbCAlfSN0b2MtZml4ZWQtZ3JvdXAtdGVtcGxhdGUpXG4gKiAtIFtVc2luZyBgRml4ZWRHcm91cFRlbXBsYXRlYCB3aXRoIHRoZSBNdWx0aVNlbGVjdF0oeyUgc2x1ZyB0ZW1wbGF0ZXNfbXVsdGlzZWxlY3QgJX0jdG9jLWZpeGVkLWdyb3VwLXRlbXBsYXRlKVxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgZ3JvdXBCeSB9IGZyb20gJ0Bwcm9ncmVzcy9rZW5kby1kYXRhLXF1ZXJ5JztcbiAqIF9AQ29tcG9uZW50KHtcbiAqIHNlbGVjdG9yOiAnbXktYXBwJyxcbiAqIHRlbXBsYXRlOiBgXG4gKiAgPGtlbmRvLWNvbWJvYm94IFtkYXRhXT1cImdyb3VwZWREYXRhXCIgdGV4dEZpZWxkPVwibmFtZVwiIHZhbHVlRmllbGQ9XCJuYW1lXCI+XG4gKiAgICA8bmctdGVtcGxhdGUga2VuZG9Db21ib0JveEZpeGVkR3JvdXBUZW1wbGF0ZSBsZXQtZ3JvdXBOYW1lPlxuICogICAgICA8c3Bhbj5Gb29kIHR5cGU6IHt7Z3JvdXBOYW1lfX0gb3B0aW9uPC9zcGFuPlxuICogICAgPC9uZy10ZW1wbGF0ZT5cbiAqICA8L2tlbmRvLWNvbWJvYm94PlxuICogYFxuICogfSlcbiAqIGNsYXNzIEFwcENvbXBvbmVudCB7XG4gKiAgIHB1YmxpYyBkYXRhID0gW1xuICogICAgICAgeyBuYW1lOiBcIlBvcmtcIiwgY2F0ZWdvcnk6IFwiRm9vZFwiLCBzdWJjYXRlZ29yeTogXCJNZWF0XCIgfSxcbiAqICAgICAgIHsgbmFtZTogXCJQZXBwZXJcIiwgY2F0ZWdvcnk6IFwiRm9vZFwiLCBzdWJjYXRlZ29yeTogXCJWZWdldGFibGVzXCIgfSxcbiAqICAgICAgIHsgbmFtZTogXCJCZWVmXCIsIGNhdGVnb3J5OiBcIkZvb2RcIiwgc3ViY2F0ZWdvcnk6IFwiTWVhdFwiIH1cbiAqICAgXTtcbiAqICAgcHVibGljIGdyb3VwZWREYXRhID0gZ3JvdXBCeSh0aGlzLmRhdGEsIFt7ZmllbGQ6IFwic3ViY2F0ZWdvcnlcIn1dKTtcbiAqIH1cbiAqIGBgYFxuICovXG5sZXQgRml4ZWRHcm91cFRlbXBsYXRlRGlyZWN0aXZlID0gY2xhc3MgRml4ZWRHcm91cFRlbXBsYXRlRGlyZWN0aXZlIHtcbiAgICBjb25zdHJ1Y3Rvcih0ZW1wbGF0ZVJlZikge1xuICAgICAgICB0aGlzLnRlbXBsYXRlUmVmID0gdGVtcGxhdGVSZWY7XG4gICAgfVxufTtcbkZpeGVkR3JvdXBUZW1wbGF0ZURpcmVjdGl2ZSA9IF9fZGVjb3JhdGUoW1xuICAgIERpcmVjdGl2ZSh7XG4gICAgICAgIHNlbGVjdG9yOiAnW2tlbmRvRHJvcERvd25MaXN0Rml4ZWRHcm91cFRlbXBsYXRlXSxba2VuZG9Db21ib0JveEZpeGVkR3JvdXBUZW1wbGF0ZV0sW2tlbmRvTXVsdGlDb2x1bW5Db21ib0JveEZpeGVkR3JvdXBUZW1wbGF0ZV0sW2tlbmRvQXV0b0NvbXBsZXRlRml4ZWRHcm91cFRlbXBsYXRlXSxba2VuZG9NdWx0aVNlbGVjdEZpeGVkR3JvdXBUZW1wbGF0ZV0nXG4gICAgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtUZW1wbGF0ZVJlZl0pXG5dLCBGaXhlZEdyb3VwVGVtcGxhdGVEaXJlY3RpdmUpO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xubGV0IFNlbGVjdGlvblNlcnZpY2UgPSBjbGFzcyBTZWxlY3Rpb25TZXJ2aWNlIHtcbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMub25TZWxlY3QgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMub25DaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMub25Gb2N1cyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy50b3RhbCA9IDA7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRpY2VzID0gW107XG4gICAgfVxuICAgIGdldFRvdGFsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b3RhbDtcbiAgICB9XG4gICAgaXNTZWxlY3RlZChpbmRleCkge1xuICAgICAgICByZXR1cm4gaXNQcmVzZW50KHRoaXMuc2VsZWN0ZWRJbmRpY2VzLmZpbmQoY3VycmVudCA9PiBjdXJyZW50ID09PSBpbmRleCkpO1xuICAgIH1cbiAgICBpc0ZvY3VzZWQoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIGluZGV4ID09PSB0aGlzLmZvY3VzZWQ7XG4gICAgfVxuICAgIGZvY3VzKGluZGV4KSB7XG4gICAgICAgIGlmICh0aGlzLmlzRm9jdXNlZChpbmRleCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZvY3VzZWQgPSBpbmRleDtcbiAgICAgICAgdGhpcy5vbkZvY3VzLmVtaXQoaW5kZXgpO1xuICAgIH1cbiAgICBzZWxlY3QoaW5kZXgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNTZWxlY3RlZChpbmRleCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlbGVjdGVkSW5kaWNlcyA9IFtpbmRleF07XG4gICAgICAgIHRoaXMuZm9jdXNlZCA9IGluZGV4O1xuICAgICAgICB0aGlzLm9uU2VsZWN0LmVtaXQoe1xuICAgICAgICAgICAgaW5kaWNlczogW2luZGV4XSxcbiAgICAgICAgICAgIG5ld1NlbGVjdGlvbjogaXNQcmVzZW50KGluZGV4KVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYWRkKGluZGV4KSB7XG4gICAgICAgIGlmICh0aGlzLmlzU2VsZWN0ZWQoaW5kZXgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZWxlY3RlZEluZGljZXMucHVzaChpbmRleCk7XG4gICAgICAgIHRoaXMuZm9jdXNlZCA9IGluZGV4O1xuICAgICAgICB0aGlzLm9uQ2hhbmdlLmVtaXQoe1xuICAgICAgICAgICAgYWRkZWQ6IGluZGV4LFxuICAgICAgICAgICAgaW5kaWNlczogdGhpcy5zZWxlY3RlZEluZGljZXMuc2xpY2UoKVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdW5zZWxlY3QoaW5kZXgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU2VsZWN0ZWQoaW5kZXgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSB0aGlzLnNlbGVjdGVkSW5kaWNlcy5pbmRleE9mKGluZGV4KTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZEluZGljZXMuc3BsaWNlKHBvc2l0aW9uLCAxKTtcbiAgICAgICAgdGhpcy5mb2N1c2VkID0gaW5kZXg7XG4gICAgICAgIHRoaXMub25DaGFuZ2UuZW1pdCh7XG4gICAgICAgICAgICBpbmRpY2VzOiB0aGlzLnNlbGVjdGVkSW5kaWNlcy5zbGljZSgpLFxuICAgICAgICAgICAgcmVtb3ZlZDogaW5kZXhcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNoYW5nZShpbmRleCkge1xuICAgICAgICBjb25zdCBuZXdTZWxlY3Rpb24gPSBpc1ByZXNlbnQoaW5kZXgpICYmICF0aGlzLmlzU2VsZWN0ZWQoaW5kZXgpO1xuICAgICAgICB0aGlzLnNlbGVjdGVkSW5kaWNlcyA9IFtpbmRleF07XG4gICAgICAgIHRoaXMuZm9jdXNlZCA9IGluZGV4O1xuICAgICAgICB0aGlzLm9uQ2hhbmdlLmVtaXQoe1xuICAgICAgICAgICAgaW5kaWNlczogW2luZGV4XSxcbiAgICAgICAgICAgIG5ld1NlbGVjdGlvbjogbmV3U2VsZWN0aW9uXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXNldFNlbGVjdGlvbihpbmRleCkge1xuICAgICAgICB0aGlzLnNlbGVjdGVkSW5kaWNlcyA9IGluZGV4IGluc3RhbmNlb2YgQXJyYXkgPyBpbmRleCA6IFtpbmRleF07XG4gICAgICAgIHRoaXMuZm9jdXNlZCA9IHRoaXMuc2VsZWN0ZWRJbmRpY2VzW3RoaXMuc2VsZWN0ZWRJbmRpY2VzLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICBnZXQgc2VsZWN0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkSW5kaWNlcy5zbGljZSgpO1xuICAgIH1cbiAgICBnZXQgZm9jdXNlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9jdXNlZEluZGV4O1xuICAgIH1cbiAgICBzZXQgZm9jdXNlZChpbmRleCkge1xuICAgICAgICBpZiAodGhpcy5mb2N1c2VkSW5kZXggIT09IGluZGV4KSB7XG4gICAgICAgICAgICB0aGlzLmZvY3VzZWRJbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgdGhpcy5vbkZvY3VzLmVtaXQoaW5kZXgpO1xuICAgICAgICB9XG4gICAgfVxufTtcblNlbGVjdGlvblNlcnZpY2UgPSBfX2RlY29yYXRlKFtcbiAgICBJbmplY3RhYmxlKClcbl0sIFNlbGVjdGlvblNlcnZpY2UpO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xudmFyIE5hdmlnYXRpb25BY3Rpb247XG4oZnVuY3Rpb24gKE5hdmlnYXRpb25BY3Rpb24pIHtcbiAgICBOYXZpZ2F0aW9uQWN0aW9uW05hdmlnYXRpb25BY3Rpb25bXCJVbmRlZmluZWRcIl0gPSAwXSA9IFwiVW5kZWZpbmVkXCI7XG4gICAgTmF2aWdhdGlvbkFjdGlvbltOYXZpZ2F0aW9uQWN0aW9uW1wiT3BlblwiXSA9IDFdID0gXCJPcGVuXCI7XG4gICAgTmF2aWdhdGlvbkFjdGlvbltOYXZpZ2F0aW9uQWN0aW9uW1wiQ2xvc2VcIl0gPSAyXSA9IFwiQ2xvc2VcIjtcbiAgICBOYXZpZ2F0aW9uQWN0aW9uW05hdmlnYXRpb25BY3Rpb25bXCJFbnRlclwiXSA9IDNdID0gXCJFbnRlclwiO1xuICAgIE5hdmlnYXRpb25BY3Rpb25bTmF2aWdhdGlvbkFjdGlvbltcIlRhYlwiXSA9IDRdID0gXCJUYWJcIjtcbiAgICBOYXZpZ2F0aW9uQWN0aW9uW05hdmlnYXRpb25BY3Rpb25bXCJFc2NcIl0gPSA1XSA9IFwiRXNjXCI7XG4gICAgTmF2aWdhdGlvbkFjdGlvbltOYXZpZ2F0aW9uQWN0aW9uW1wiRGVsZXRlXCJdID0gNl0gPSBcIkRlbGV0ZVwiO1xuICAgIE5hdmlnYXRpb25BY3Rpb25bTmF2aWdhdGlvbkFjdGlvbltcIkJhY2tzcGFjZVwiXSA9IDddID0gXCJCYWNrc3BhY2VcIjtcbiAgICBOYXZpZ2F0aW9uQWN0aW9uW05hdmlnYXRpb25BY3Rpb25bXCJIb21lXCJdID0gOF0gPSBcIkhvbWVcIjtcbiAgICBOYXZpZ2F0aW9uQWN0aW9uW05hdmlnYXRpb25BY3Rpb25bXCJFbmRcIl0gPSA5XSA9IFwiRW5kXCI7XG4gICAgTmF2aWdhdGlvbkFjdGlvbltOYXZpZ2F0aW9uQWN0aW9uW1wiVXBcIl0gPSAxMF0gPSBcIlVwXCI7XG4gICAgTmF2aWdhdGlvbkFjdGlvbltOYXZpZ2F0aW9uQWN0aW9uW1wiRG93blwiXSA9IDExXSA9IFwiRG93blwiO1xuICAgIE5hdmlnYXRpb25BY3Rpb25bTmF2aWdhdGlvbkFjdGlvbltcIkxlZnRcIl0gPSAxMl0gPSBcIkxlZnRcIjtcbiAgICBOYXZpZ2F0aW9uQWN0aW9uW05hdmlnYXRpb25BY3Rpb25bXCJSaWdodFwiXSA9IDEzXSA9IFwiUmlnaHRcIjtcbn0pKE5hdmlnYXRpb25BY3Rpb24gfHwgKE5hdmlnYXRpb25BY3Rpb24gPSB7fSkpO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xubGV0IERhdGFTZXJ2aWNlID0gY2xhc3MgRGF0YVNlcnZpY2Uge1xuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5ncm91cGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZ3JvdXBJbmRpY2VzID0gW107XG4gICAgfVxuICAgIHNldCBkYXRhKGRhdGEpIHtcbiAgICAgICAgdGhpcy5fZGF0YSA9IGRhdGE7XG4gICAgICAgIHRoaXMuZ3JvdXBlZCA9IHRoaXMuaXNHcm91cGVkKGRhdGEpO1xuICAgICAgICBpZiAodGhpcy5ncm91cGVkKSB7XG4gICAgICAgICAgICB0aGlzLmdyb3VwSW5kaWNlcyA9IHRoaXMuZ2V0R3JvdXBJbmRpY2VzKGRhdGEpO1xuICAgICAgICAgICAgdGhpcy5fZmxhdERhdGEgPSB0aGlzLmZsYXR0ZW4oZGF0YSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGRhdGEoKSB7XG4gICAgICAgIGlmICh0aGlzLmdyb3VwZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9mbGF0RGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fZGF0YTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqIFVzZWQgdG8gZ2V0IHRoZSBhY3R1YWwgaXRlbXMgY291bnQsIGkuZS4gZXhjbHVkaW5nIHRoZSBoZWFkZXIgaXRlbXMgaW4gY2FzZSBvZiBncm91cGluZy5cbiAgICAgKi9cbiAgICBnZXQgaXRlbXNDb3VudCgpIHtcbiAgICAgICAgaWYgKCFpc1ByZXNlbnQodGhpcy5kYXRhKSB8fCB0aGlzLmRhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpdGVtcyA9IHRoaXMuZ3JvdXBlZCA/IHRoaXMuX2ZsYXREYXRhLmZpbHRlcihpdGVtID0+ICFpdGVtLmhlYWRlcikgOiB0aGlzLmRhdGE7XG4gICAgICAgIHJldHVybiBpdGVtcy5sZW5ndGg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKiBVc2VkIHRvIGRldGVybWluZSBpZiB0aGUgY29tcG9uZW50IHJlY2VpdmVkIGdyb3VwZWQgZGF0YS5cbiAgICAgKi9cbiAgICBpc0dyb3VwZWQoZGF0YSkge1xuICAgICAgICAvLyBHcm91cFJlc3VsdCB7IGFnZ3JlZ2F0ZXM6IEFnZ3JlZ2F0ZVJlc3VsdCwgZmllbGQ6IHN0cmluZywgaXRlbXM6IG9iamVjdFtdLCB2YWx1ZTogYW55IH1cbiAgICAgICAgLy8gaHR0cHM6Ly93d3cudGVsZXJpay5jb20va2VuZG8tYW5ndWxhci11aS9jb21wb25lbnRzL2RhdGFxdWVyeS9hcGkvR3JvdXBSZXN1bHQvXG4gICAgICAgIHJldHVybiAoaXNQcmVzZW50KGRhdGEpICYmIGRhdGEubGVuZ3RoICE9PSAwKSAmJiBpc1ByZXNlbnQoZGF0YVswXSkgJiYgaGFzUHJvcHMoZGF0YVswXSwgWydhZ2dyZWdhdGVzJywgJ2ZpZWxkJywgJ2l0ZW1zJywgJ3ZhbHVlJ10pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICogVXNlZCB0byBjYWxjdWxhdGUgdGhlIGxhc3QgaXRlbSBpbmRleCBvZiBlYWNoIGdyb3VwLlxuICAgICAqL1xuICAgIGdldEdyb3VwSW5kaWNlcyhkYXRhKSB7XG4gICAgICAgIGxldCBncm91cEluZGljZXMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gZGF0YS5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgICAgICAgIGdyb3VwSW5kaWNlc1tpXSA9IChncm91cEluZGljZXNbaSAtIDFdIHx8IDApICsgZGF0YVtpXS5pdGVtcy5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdyb3VwSW5kaWNlcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqIFVzZWQgdG8gZ2V0IGEgZmxhdCBhcnJheSBjb250YWluaW5nIGFsbCBpdGVtcyBtYXRjaGluZyBjZXJ0YWluIGNyaXRlcmlhLlxuICAgICAqL1xuICAgIGZpbHRlcihwcmVkaWNhdGUpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgICAgICBpZiAodGhpcy5pc0dyb3VwZWQodGhpcy5kYXRhKSkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gdGhpcy5ncm91cEluZGljZXMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWF0Y2hlcyA9IHRoaXMuZGF0YVtpXS5pdGVtcy5maWx0ZXIocHJlZGljYXRlKTtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hlcykge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHQuY29uY2F0KG1hdGNoZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuZGF0YS5maWx0ZXIocHJlZGljYXRlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICogVXNlZCB0byBnZXQgdGhlIGluZGV4IG9mIGEgZ2l2ZW4gZGF0YSBpdGVtLlxuICAgICAqL1xuICAgIGluZGV4T2YoaXRlbSwgc3RhcnRGcm9tID0gMCkge1xuICAgICAgICBsZXQgcHJlZGljYXRlID0gKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50ID09PSBpdGVtO1xuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5ncm91cGVkKSB7XG4gICAgICAgICAgICBwcmVkaWNhdGUgPSAoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50LnZhbHVlID09PSBpdGVtO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5maW5kSW5kZXgocHJlZGljYXRlLCBzdGFydEZyb20pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICogVXNlZCB0byBnZXQgdGhlIGluZGV4IG9mIGEgZGF0YSBpdGVtIGJhc2VkIG9uIGFuIGV4cHJlc3Npb24uXG4gICAgICovXG4gICAgZmluZEluZGV4KHByZWRpY2F0ZSwgc3RhcnRGcm9tID0gMCkge1xuICAgICAgICBsZXQgaW5kZXggPSAtMTtcbiAgICAgICAgaWYgKHRoaXMuZ3JvdXBlZCkge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuX2ZsYXREYXRhLmZpbHRlcihpdGVtID0+ICFpdGVtLmhlYWRlciAmJiBpdGVtLm9mZnNldEluZGV4ID49IHN0YXJ0RnJvbSk7XG4gICAgICAgICAgICBpbmRleCA9IGRhdGEuZmluZEluZGV4KHByZWRpY2F0ZSk7XG4gICAgICAgICAgICBpbmRleCA9IGRhdGFbaW5kZXhdID8gZGF0YVtpbmRleF0ub2Zmc2V0SW5kZXggOiAtMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGEuc2xpY2Uoc3RhcnRGcm9tKTtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1JbmRleCA9IGRhdGEuZmluZEluZGV4KHByZWRpY2F0ZSk7XG4gICAgICAgICAgICBpbmRleCA9IGl0ZW1JbmRleCAhPT0gLTEgPyBpdGVtSW5kZXggKyBzdGFydEZyb20gOiAtMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKiBVc2VkIHRvIGdldCB0aGUgY2xvc2VzdCBncm91cCBoZWFkZXIgcHJpb3IgdG8gYW4gaXRlbSBpbmRleC5cbiAgICAgKi9cbiAgICBjbG9zZXN0R3JvdXAoaW5kZXgpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4OyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2ZsYXREYXRhW2ldLmhlYWRlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9mbGF0RGF0YVtpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICogVXNlZCB0byBnZXQgdGhlIGZpcnN0IGl0ZW0gbWF0Y2hpbmcgdGhlIGNyaXRlcmlhLlxuICAgICAqL1xuICAgIGZpbmQocHJlZGljYXRlKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maW5kSW5kZXgocHJlZGljYXRlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbUF0KGluZGV4KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqIFVzZWQgdG8gZ2V0IHRoZSB0cnVlIGluZGV4IGluIGEgZmxhdHRlbmVkIGRhdGEgYXJyYXkuXG4gICAgICovXG4gICAgZmxhdEluZGV4KGluZGV4KSB7XG4gICAgICAgIGlmICh0aGlzLml0ZW1zQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5ncm91cGVkKSB7XG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IHRoaXMuX2ZsYXREYXRhLmZpbmQoKGl0ZW0pID0+ICFpdGVtLmhlYWRlciAmJiBpdGVtLm9mZnNldEluZGV4ID09PSBpbmRleCk7XG4gICAgICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2guaW5kZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICogVXNlZCB0byBnZXQgdGhlIGl0ZW0gYXQgdGhlIHByb3ZpZGVkIGluZGV4LlxuICAgICAqL1xuICAgIGl0ZW1BdChpbmRleCkge1xuICAgICAgICBsZXQgZGF0YUl0ZW07XG4gICAgICAgIGlmICh0aGlzLml0ZW1zQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBkYXRhSXRlbTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5ncm91cGVkKSB7XG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IHRoaXMuX2ZsYXREYXRhLmZpbmQoKGl0ZW0pID0+ICFpdGVtLmhlYWRlciAmJiBpdGVtLm9mZnNldEluZGV4ID09PSBpbmRleCk7XG4gICAgICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgICAgICBkYXRhSXRlbSA9IG1hdGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGF0YUl0ZW0gPSB0aGlzLmRhdGFbaW5kZXhdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkYXRhSXRlbTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqIFVzZWQgdG8gZ2V0IHRoZSBncm91cCBhdCB0aGUgcHJvdmlkZWQgaW5kZXguXG4gICAgICovXG4gICAgZ3JvdXBBdChpbmRleCkge1xuICAgICAgICBpZiAodGhpcy5pdGVtc0NvdW50ID09PSAwIHx8ICF0aGlzLmlzR3JvdXBlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9mbGF0RGF0YS5maW5kKChpdGVtKSA9PiBpdGVtLmhlYWRlciAmJiBpdGVtLmluZGV4ID09PSBpbmRleCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKiBVc2VkIHRvIGdldCB0aGUgZmllbGQgYnkgd2hpY2ggdGhlIGRhdGEgaXMgZ3JvdXBlZC5cbiAgICAgKi9cbiAgICBncm91cEZpZWxkKCkge1xuICAgICAgICBpZiAodGhpcy5pdGVtc0NvdW50ID09PSAwIHx8ICF0aGlzLmlzR3JvdXBlZCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGFbMF0uZmllbGQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKiBVc2VkIHRvIGdldCB0aGUgZ3JvdXAgdG8gd2hpY2ggYSBkYXRhSXRlbSBiZWxvbmdzLlxuICAgICAqL1xuICAgIGl0ZW1Hcm91cChpdGVtKSB7XG4gICAgICAgIGlmICghaXRlbSB8fCB0aGlzLml0ZW1zQ291bnQgPT09IDAgfHwgIXRoaXMuaXNHcm91cGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmllbGROYW1lID0gdGhpcy5ncm91cEZpZWxkKCk7XG4gICAgICAgIGlmIChmaWVsZE5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXR0ZXIkMShpdGVtLCBmaWVsZE5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZsYXR0ZW4oZGF0YSwgZ3JvdXAgPSB1bmRlZmluZWQsIG9mZnNldCA9IDAsIGdyb3VwSW5kZXggPSAwKSB7XG4gICAgICAgIGxldCBmbGF0ID0gW107XG4gICAgICAgIGlmIChpc1ByZXNlbnQoZ3JvdXApKSB7XG4gICAgICAgICAgICBmbGF0LnB1c2goe1xuICAgICAgICAgICAgICAgIGhlYWRlcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpbmRleDogZ3JvdXBJbmRleCArIG9mZnNldCxcbiAgICAgICAgICAgICAgICBvZmZzZXRJbmRleDogZ3JvdXBJbmRleCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogZ3JvdXBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgICAgICAgICAgaWYgKGRhdGFbaV0uaXRlbXMpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB0aGlzLmZsYXR0ZW4oZGF0YVtpXS5pdGVtcywgZGF0YVtpXS52YWx1ZSwgb2Zmc2V0LCBpKTtcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSBvZmZzZXQgKyBkYXRhW2ldLml0ZW1zLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGdyb3VwSW5kZXggKyBvZmZzZXQgKyBpICsgMSxcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0SW5kZXg6IG9mZnNldCArIGksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBkYXRhW2ldXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmbGF0ID0gZmxhdC5jb25jYXQocmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmxhdDtcbiAgICB9XG59O1xuRGF0YVNlcnZpY2UgPSBfX2RlY29yYXRlKFtcbiAgICBJbmplY3RhYmxlKClcbl0sIERhdGFTZXJ2aWNlKTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmxldCBEaXNhYmxlZEl0ZW1zU2VydmljZSA9IGNsYXNzIERpc2FibGVkSXRlbXNTZXJ2aWNlIHtcbiAgICBjb25zdHJ1Y3RvcihkYXRhU2VydmljZSkge1xuICAgICAgICB0aGlzLmRhdGFTZXJ2aWNlID0gZGF0YVNlcnZpY2U7XG4gICAgICAgIHRoaXMuaXRlbURpc2FibGVkID0gbnVsbDtcbiAgICB9XG4gICAgaXNJbmRleERpc2FibGVkKGluZGV4KSB7XG4gICAgICAgIGlmICh0aGlzLml0ZW1EaXNhYmxlZCkge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuZGF0YVNlcnZpY2UuaXRlbUF0KGluZGV4KTtcbiAgICAgICAgICAgIGlmIChpc1ByZXNlbnQoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVtRGlzYWJsZWQoeyBkYXRhSXRlbTogaXRlbSwgaW5kZXggfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc1ByZXNlbnQodGhpcy5kZWZhdWx0SXRlbSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVtRGlzYWJsZWQoeyBkYXRhSXRlbTogdGhpcy5kZWZhdWx0SXRlbSwgaW5kZXg6IC0xIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlzSXRlbURpc2FibGVkKGl0ZW0pIHtcbiAgICAgICAgaWYgKHRoaXMuaXRlbURpc2FibGVkKSB7XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZGF0YVNlcnZpY2UuaW5kZXhPZihpdGVtKTtcbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVtRGlzYWJsZWQoeyBkYXRhSXRlbTogaXRlbSwgaW5kZXggfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc1ByZXNlbnQodGhpcy5kZWZhdWx0SXRlbSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVtRGlzYWJsZWQoeyBkYXRhSXRlbTogdGhpcy5kZWZhdWx0SXRlbSwgaW5kZXg6IC0xIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcbkRpc2FibGVkSXRlbXNTZXJ2aWNlID0gX19kZWNvcmF0ZShbXG4gICAgSW5qZWN0YWJsZSgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbRGF0YVNlcnZpY2VdKVxuXSwgRGlzYWJsZWRJdGVtc1NlcnZpY2UpO1xuXG5jb25zdCBNSU5fSU5ERVggPSAwO1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNsYXNzIE5hdmlnYXRpb25FdmVudCB7XG4gICAgLyoqXG4gICAgICogVGhlIGluZGV4IG9mIHRoZSBpdGVtIHRvIHdoaWNoIHRoZSB1c2VyIG5hdmlnYXRlZC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihpbmRleCwgb3JpZ2luYWxFdmVudCkge1xuICAgICAgICB0aGlzLmluZGV4ID0gaW5kZXg7XG4gICAgICAgIHRoaXMub3JpZ2luYWxFdmVudCA9IG9yaWdpbmFsRXZlbnQ7XG4gICAgfVxufVxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmxldCBOYXZpZ2F0aW9uU2VydmljZSA9IGNsYXNzIE5hdmlnYXRpb25TZXJ2aWNlIHtcbiAgICBjb25zdHJ1Y3RvcihkaXNhYmxlZEl0ZW1zU2VydmljZSwgc2VsZWN0aW9uU2VydmljZSkge1xuICAgICAgICB0aGlzLmRpc2FibGVkSXRlbXNTZXJ2aWNlID0gZGlzYWJsZWRJdGVtc1NlcnZpY2U7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZSA9IHNlbGVjdGlvblNlcnZpY2U7XG4gICAgICAgIHRoaXMub3BlbiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5jbG9zZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5lbnRlciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy50YWIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMuZXNjID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLnVwID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLnJpZ2h0ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLmRvd24gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMubGVmdCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5kZWxldGUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMuYmFja3NwYWNlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLmhvbWUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMuZW5kID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgIH1cbiAgICBwcm9jZXNzKGFyZ3MpIHtcbiAgICAgICAgY29uc3Qga2V5Q29kZSA9IGFyZ3Mub3JpZ2luYWxFdmVudC5rZXlDb2RlO1xuICAgICAgICBjb25zdCBhbHRLZXkgPSBhcmdzLm9yaWdpbmFsRXZlbnQuYWx0S2V5O1xuICAgICAgICBsZXQgaW5kZXg7XG4gICAgICAgIGxldCBhY3Rpb24gPSBOYXZpZ2F0aW9uQWN0aW9uLlVuZGVmaW5lZDtcbiAgICAgICAgaWYgKGFsdEtleSAmJiBrZXlDb2RlID09PSBLZXlzLkFycm93RG93bikge1xuICAgICAgICAgICAgYWN0aW9uID0gTmF2aWdhdGlvbkFjdGlvbi5PcGVuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGFsdEtleSAmJiBrZXlDb2RlID09PSBLZXlzLkFycm93VXApIHtcbiAgICAgICAgICAgIGFjdGlvbiA9IE5hdmlnYXRpb25BY3Rpb24uQ2xvc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5Q29kZSA9PT0gS2V5cy5FbnRlcikge1xuICAgICAgICAgICAgYWN0aW9uID0gTmF2aWdhdGlvbkFjdGlvbi5FbnRlcjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXlDb2RlID09PSBLZXlzLkVzY2FwZSkge1xuICAgICAgICAgICAgYWN0aW9uID0gTmF2aWdhdGlvbkFjdGlvbi5Fc2M7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5Q29kZSA9PT0gS2V5cy5UYWIpIHtcbiAgICAgICAgICAgIGFjdGlvbiA9IE5hdmlnYXRpb25BY3Rpb24uVGFiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleUNvZGUgPT09IEtleXMuQXJyb3dVcCkge1xuICAgICAgICAgICAgaW5kZXggPSB0aGlzLm5leHQoeyBjdXJyZW50OiBhcmdzLmN1cnJlbnQsIHN0YXJ0OiBhcmdzLm1pbiwgZW5kOiBhcmdzLm1heCwgc3RlcDogLTEgfSk7XG4gICAgICAgICAgICBhY3Rpb24gPSBOYXZpZ2F0aW9uQWN0aW9uLlVwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleUNvZGUgPT09IEtleXMuQXJyb3dMZWZ0KSB7XG4gICAgICAgICAgICBpbmRleCA9IHRoaXMubmV4dCh7IGN1cnJlbnQ6IGFyZ3MuY3VycmVudCwgc3RhcnQ6IGFyZ3MubWluLCBlbmQ6IGFyZ3MubWF4LCBzdGVwOiAtMSB9KTtcbiAgICAgICAgICAgIGFjdGlvbiA9IE5hdmlnYXRpb25BY3Rpb24uTGVmdDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXlDb2RlID09PSBLZXlzLkFycm93RG93bikge1xuICAgICAgICAgICAgaW5kZXggPSB0aGlzLm5leHQoeyBjdXJyZW50OiBhcmdzLmN1cnJlbnQsIHN0YXJ0OiBhcmdzLm1pbiwgZW5kOiBhcmdzLm1heCwgc3RlcDogMSB9KTtcbiAgICAgICAgICAgIGFjdGlvbiA9IE5hdmlnYXRpb25BY3Rpb24uRG93bjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXlDb2RlID09PSBLZXlzLkFycm93UmlnaHQpIHtcbiAgICAgICAgICAgIGluZGV4ID0gdGhpcy5uZXh0KHsgY3VycmVudDogYXJncy5jdXJyZW50LCBzdGFydDogYXJncy5taW4sIGVuZDogYXJncy5tYXgsIHN0ZXA6IDEgfSk7XG4gICAgICAgICAgICBhY3Rpb24gPSBOYXZpZ2F0aW9uQWN0aW9uLlJpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleUNvZGUgPT09IEtleXMuSG9tZSkge1xuICAgICAgICAgICAgaW5kZXggPSB0aGlzLmlzRGlzYWJsZWQoTUlOX0lOREVYKSA/IGFyZ3MuY3VycmVudCA6IE1JTl9JTkRFWDtcbiAgICAgICAgICAgIGFjdGlvbiA9IE5hdmlnYXRpb25BY3Rpb24uSG9tZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXlDb2RlID09PSBLZXlzLkVuZCkge1xuICAgICAgICAgICAgaW5kZXggPSB0aGlzLmlzRGlzYWJsZWQoYXJncy5tYXgpID8gYXJncy5jdXJyZW50IDogYXJncy5tYXg7XG4gICAgICAgICAgICBhY3Rpb24gPSBOYXZpZ2F0aW9uQWN0aW9uLkVuZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXlDb2RlID09PSBLZXlzLkRlbGV0ZSkge1xuICAgICAgICAgICAgYWN0aW9uID0gTmF2aWdhdGlvbkFjdGlvbi5EZWxldGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5Q29kZSA9PT0gS2V5cy5CYWNrc3BhY2UpIHtcbiAgICAgICAgICAgIGFjdGlvbiA9IE5hdmlnYXRpb25BY3Rpb24uQmFja3NwYWNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGV2ZW50RGF0YSA9IG5ldyBOYXZpZ2F0aW9uRXZlbnQoaW5kZXgsIGFyZ3Mub3JpZ2luYWxFdmVudCk7XG4gICAgICAgIGlmIChhY3Rpb24gIT09IE5hdmlnYXRpb25BY3Rpb24uVW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzW05hdmlnYXRpb25BY3Rpb25bYWN0aW9uXS50b0xvd2VyQ2FzZSgpXS5lbWl0KGV2ZW50RGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFjdGlvbjtcbiAgICB9XG4gICAgbmV4dChhcmdzKSB7XG4gICAgICAgIGNvbnN0IHsgY3VycmVudCwgc3RhcnQsIGVuZCwgc3RlcCB9ID0gYXJncztcbiAgICAgICAgY29uc3QgbmV4dEluZGV4ID0gIWlzUHJlc2VudChjdXJyZW50KSA/IHN0YXJ0IDogdGhpcy5jbGFtcEluZGV4KGN1cnJlbnQgKyBzdGVwLCBzdGFydCwgZW5kKTtcbiAgICAgICAgY29uc3QgZmlyc3RGb2N1c2FibGVJbmRleCA9IHRoaXMuZmlyc3RGb2N1c2FibGVJbmRleChuZXh0SW5kZXgsIHN0YXJ0LCBlbmQsIHN0ZXApO1xuICAgICAgICBpZiAoaXNQcmVzZW50KGZpcnN0Rm9jdXNhYmxlSW5kZXgpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmlyc3RGb2N1c2FibGVJbmRleDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmlzU2VsZWN0ZWQoY3VycmVudCkgJiYgY3VycmVudCA+PSBzdGFydCkge1xuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW52ZXJzZWRTdGVwID0gLTEgKiBzdGVwO1xuICAgICAgICByZXR1cm4gdGhpcy5maXJzdEZvY3VzYWJsZUluZGV4KG5leHRJbmRleCwgc3RhcnQsIGVuZCwgaW52ZXJzZWRTdGVwKTtcbiAgICB9XG4gICAgY2xhbXBJbmRleChpbmRleCwgbWluLCBtYXgpIHtcbiAgICAgICAgaWYgKCFpc1ByZXNlbnQoaW5kZXgpIHx8IGluZGV4IDwgbWluKSB7XG4gICAgICAgICAgICByZXR1cm4gbWluO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmRleCA+IG1heCkge1xuICAgICAgICAgICAgcmV0dXJuIG1heDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgfVxuICAgIGZpcnN0Rm9jdXNhYmxlSW5kZXgoc3RhcnRJbmRleCwgbWluLCBtYXgsIHN0ZXApIHtcbiAgICAgICAgd2hpbGUgKG1pbiA8PSBzdGFydEluZGV4ICYmIHN0YXJ0SW5kZXggPD0gbWF4KSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNEaXNhYmxlZChzdGFydEluZGV4KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzdGFydEluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RhcnRJbmRleCArPSBzdGVwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlzRGlzYWJsZWQoaW5kZXgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWRJdGVtc1NlcnZpY2UpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpc2FibGVkSXRlbXNTZXJ2aWNlLmlzSW5kZXhEaXNhYmxlZChpbmRleCk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuTmF2aWdhdGlvblNlcnZpY2UgPSBfX2RlY29yYXRlKFtcbiAgICBJbmplY3RhYmxlKCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtEaXNhYmxlZEl0ZW1zU2VydmljZSxcbiAgICAgICAgU2VsZWN0aW9uU2VydmljZV0pXG5dLCBOYXZpZ2F0aW9uU2VydmljZSk7XG5cbi8qKlxuICogUmVuZGVycyBjb250ZW50IHdoZW4gbm8gZGF0YSBpcyBhdmFpbGFibGUuIFRvIGRlZmluZSB0aGUgbm8tZGF0YSB0ZW1wbGF0ZSwgbmVzdCBhIGA8bmctdGVtcGxhdGU+YCB0YWdcbiAqIHdpdGggdGhlIGBrZW5kbzxDb21wb25lbnROYW1lPk5vRGF0YVRlbXBsYXRlYCBkaXJlY3RpdmUgaW5zaWRlIHRoZSBjb21wb25lbnQgdGFnLlxuICpcbiAqIC0gW1VzaW5nIGBOb0RhdGFUZW1wbGF0ZWAgd2l0aCB0aGUgQXV0b0NvbXBsZXRlXSh7JSBzbHVnIHRlbXBsYXRlc19hdXRvY29tcGxldGUgJX0jdG9jLW5vLWRhdGEtdGVtcGxhdGUpXG4gKiAtIFtVc2luZyBgTm9EYXRhVGVtcGxhdGVgIHdpdGggdGhlIENvbWJvQm94XSh7JSBzbHVnIHRlbXBsYXRlc19jb21ib2JveCAlfSN0b2Mtbm8tZGF0YS10ZW1wbGF0ZSlcbiAqIC0gW1VzaW5nIGBOb0RhdGFUZW1wbGF0ZWAgd2l0aCB0aGUgTXVsdGlDb2x1bW5Db21ib0JveF0oeyUgc2x1ZyB0ZW1wbGF0ZXNfbXVsdGljb2x1bW5jb21ib2JveCAlfSN0b2Mtbm8tZGF0YS10ZW1wbGF0ZSlcbiAqIC0gW1VzaW5nIGBOb0RhdGFUZW1wbGF0ZWAgd2l0aCB0aGUgRHJvcERvd25MaXN0XSh7JSBzbHVnIHRlbXBsYXRlc19kZGwgJX0jdG9jLW5vLWRhdGEtdGVtcGxhdGUpXG4gKiAtIFtVc2luZyBgTm9EYXRhVGVtcGxhdGVgIHdpdGggdGhlIERyb3BEb3duVHJlZV0oeyUgc2x1ZyB0ZW1wbGF0ZXNfZGR0ICV9I3RvYy1uby1kYXRhLXRlbXBsYXRlKVxuICogLSBbVXNpbmcgYE5vRGF0YVRlbXBsYXRlYCB3aXRoIHRoZSBNdWx0aVNlbGVjdF0oeyUgc2x1ZyB0ZW1wbGF0ZXNfbXVsdGlzZWxlY3QgJX0jdG9jLW5vLWRhdGEtdGVtcGxhdGUpXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBfQENvbXBvbmVudCh7XG4gKiBzZWxlY3RvcjogJ215LWFwcCcsXG4gKiB0ZW1wbGF0ZTogYFxuICogIDxrZW5kby1jb21ib2JveCBbZGF0YV09XCJsaXN0SXRlbXNcIj5cbiAqICAgIDxuZy10ZW1wbGF0ZSBrZW5kb0NvbWJvQm94Tm9EYXRhVGVtcGxhdGU+XG4gKiAgICAgIDxoND5ObyBkYXRhITwvaDQ+XG4gKiAgICA8L25nLXRlbXBsYXRlPlxuICogIDwva2VuZG8tY29tYm9ib3g+XG4gKiBgXG4gKiB9KVxuICogY2xhc3MgQXBwQ29tcG9uZW50IHtcbiAqICAgcHVibGljIGxpc3RJdGVtczogQXJyYXk8c3RyaW5nPiA9IFtdO1xuICogfVxuICogYGBgXG4gKi9cbmxldCBOb0RhdGFUZW1wbGF0ZURpcmVjdGl2ZSA9IGNsYXNzIE5vRGF0YVRlbXBsYXRlRGlyZWN0aXZlIHtcbiAgICBjb25zdHJ1Y3Rvcih0ZW1wbGF0ZVJlZikge1xuICAgICAgICB0aGlzLnRlbXBsYXRlUmVmID0gdGVtcGxhdGVSZWY7XG4gICAgfVxufTtcbk5vRGF0YVRlbXBsYXRlRGlyZWN0aXZlID0gX19kZWNvcmF0ZShbXG4gICAgRGlyZWN0aXZlKHtcbiAgICAgICAgc2VsZWN0b3I6ICdba2VuZG9Ecm9wRG93bkxpc3ROb0RhdGFUZW1wbGF0ZV0sW2tlbmRvRHJvcERvd25UcmVlTm9EYXRhVGVtcGxhdGVdLFtrZW5kb0NvbWJvQm94Tm9EYXRhVGVtcGxhdGVdLFtrZW5kb011bHRpQ29sdW1uQ29tYm9Cb3hOb0RhdGFUZW1wbGF0ZV0sW2tlbmRvQXV0b0NvbXBsZXRlTm9EYXRhVGVtcGxhdGVdLFtrZW5kb011bHRpU2VsZWN0Tm9EYXRhVGVtcGxhdGVdLFtrZW5kb011bHRpU2VsZWN0VHJlZU5vRGF0YVRlbXBsYXRlXSdcbiAgICB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW1RlbXBsYXRlUmVmXSlcbl0sIE5vRGF0YVRlbXBsYXRlRGlyZWN0aXZlKTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNsYXNzIFByZXZlbnRhYmxlRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnByZXZlbnRlZCA9IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcmV2ZW50cyB0aGUgZGVmYXVsdCBhY3Rpb24gZm9yIGEgc3BlY2lmaWVkIGV2ZW50LlxuICAgICAqIEluIHRoaXMgd2F5LCB0aGUgc291cmNlIGNvbXBvbmVudCBzdXBwcmVzc2VzIHRoZSBidWlsdC1pbiBiZWhhdmlvciB0aGF0IGZvbGxvd3MgdGhlIGV2ZW50LlxuICAgICAqL1xuICAgIHByZXZlbnREZWZhdWx0KCkge1xuICAgICAgICB0aGlzLnByZXZlbnRlZCA9IHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIHRoZSBldmVudCBpcyBwcmV2ZW50ZWQgYnkgYW55IG9mIGl0cyBzdWJzY3JpYmVycywgcmV0dXJucyBgdHJ1ZWAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGRlZmF1bHQgYWN0aW9uIHdhcyBwcmV2ZW50ZWQuIE90aGVyd2lzZSwgcmV0dXJucyBgZmFsc2VgLlxuICAgICAqL1xuICAgIGlzRGVmYXVsdFByZXZlbnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJldmVudGVkO1xuICAgIH1cbn1cblxuLyoqXG4gKiBEZWZpbmVzIHRoZSBtYW5kYXRvcnkgcHJvcGVydGllcyBvZiB0aGUgYGtlbmRvRHJvcERvd25GaWx0ZXJgIGRpcmVjdGl2ZVxuICogc28gdGhhdCBga2VuZG9Ecm9wRG93bkZpbHRlcmAgY2FuIGJlIHVzZWQgd2l0aCBhbnkgb2YgdGhlIERyb3BEb3ducyBjb21wb25lbnRzXG4gKiB3aGljaCBpbXBsZW1lbnQgdGhlIGBGaWx0ZXJhYmxlRHJvcERvd25Db21wb25lbnRCYXNlYCBjbGFzcy5cbiAqXG4gKiBAaGlkZGVuXG4gKi9cbmNsYXNzIEZpbHRlcmFibGVDb21wb25lbnQge1xufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xubGV0IExpc3RJdGVtRGlyZWN0aXZlID0gY2xhc3MgTGlzdEl0ZW1EaXJlY3RpdmUge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICB9XG59O1xuTGlzdEl0ZW1EaXJlY3RpdmUgPSBfX2RlY29yYXRlKFtcbiAgICBEaXJlY3RpdmUoe1xuICAgICAgICBzZWxlY3RvcjogJ1wibGlbcm9sZT1vcHRpb25dLCBsaVtyb2xlPWdyb3VwXVwiJyAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lXG4gICAgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtFbGVtZW50UmVmXSlcbl0sIExpc3RJdGVtRGlyZWN0aXZlKTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmxldCBMaXN0Q29tcG9uZW50ID0gY2xhc3MgTGlzdENvbXBvbmVudCB7XG4gICAgLyogdHNsaW50OmRpc2FibGU6bWVtYmVyLW9yZGVyaW5nICovXG4gICAgY29uc3RydWN0b3IoZGF0YVNlcnZpY2UsIHdyYXBwZXIsIHNlbGVjdGlvblNlcnZpY2UsIGRpc2FibGVkSXRlbXNTZXJ2aWNlLCBjZHIsIHpvbmUsIHJlbmRlcmVyKSB7XG4gICAgICAgIHRoaXMuZGF0YVNlcnZpY2UgPSBkYXRhU2VydmljZTtcbiAgICAgICAgdGhpcy53cmFwcGVyID0gd3JhcHBlcjtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlID0gc2VsZWN0aW9uU2VydmljZTtcbiAgICAgICAgdGhpcy5kaXNhYmxlZEl0ZW1zU2VydmljZSA9IGRpc2FibGVkSXRlbXNTZXJ2aWNlO1xuICAgICAgICB0aGlzLmNkciA9IGNkcjtcbiAgICAgICAgdGhpcy56b25lID0gem9uZTtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLnNlbGVjdGVkID0gW107XG4gICAgICAgIHRoaXMuZm9jdXNlZCA9IC0xO1xuICAgICAgICB0aGlzLnNob3cgPSB0cnVlO1xuICAgICAgICB0aGlzLm11bHRpcGxlU2VsZWN0aW9uID0gZmFsc2U7XG4gICAgICAgIHRoaXMubGlzdENsYXNzID0gJ2stbGlzdCBrLXJlc2V0JztcbiAgICAgICAgdGhpcy5jaGVja2JveGVzID0geyBlbmFibGVkOiBmYWxzZSB9O1xuICAgICAgICB0aGlzLm9uQ2xpY2sgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMucGFnZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5saXN0UmVzaXplID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLnN0YXJ0RnJvbSA9IDA7XG4gICAgICAgIHRoaXMubGFzdExvYWRlZCA9IDA7XG4gICAgICAgIHRoaXMubGFzdFNjcm9sbFRvcCA9IDA7XG4gICAgICAgIHRoaXMuc2Nyb2xsVG9Gb2N1c2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2VsZWN0U3Vic2NyaXB0aW9uID0gbWVyZ2UodGhpcy5zZWxlY3Rpb25TZXJ2aWNlLm9uU2VsZWN0LnBpcGUobWFwKChhcmdzKSA9PiBhcmdzLmluZGljZXNbMF0pKSwgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLm9uRm9jdXMpXG4gICAgICAgICAgICAucGlwZShcbiAgICAgICAgLy8gaGFuZGxlIG9ubHkgdGhlIHZlcnkgbGFzdCBvblNlbGVjdC9vbkZvY3VzIGVtaXNzaW9uXG4gICAgICAgIHN3aXRjaE1hcChldmVudCA9PiB0aGlzLnpvbmUub25TdGFibGUucGlwZSh0YWtlKDEpLCBtYXAoKCkgPT4gZXZlbnQpKSkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKHRoaXMuc2Nyb2xsVG9JdGVtLmJpbmQodGhpcykpO1xuICAgIH1cbiAgICBzZXQgZGF0YShkYXRhKSB7XG4gICAgICAgIHRoaXMuX2RhdGEgPSBkYXRhWzBdICYmIGRhdGFbMF0uaGVhZGVyID8gZGF0YS5zbGljZSgwKSA6IGRhdGE7XG4gICAgfVxuICAgIGdldCBkYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGF0YTtcbiAgICB9XG4gICAgZ2V0IHBhZ2VTaXplKCkge1xuICAgICAgICBpZiAodGhpcy52aXJ0dWFsLnBhZ2VTaXplKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52aXJ0dWFsLnBhZ2VTaXplO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzaXplID0gTWF0aC5yb3VuZCh0aGlzLmhlaWdodCAvIHRoaXMudmlydHVhbC5pdGVtSGVpZ2h0KTtcbiAgICAgICAgcmV0dXJuIHNpemU7XG4gICAgfVxuICAgIGdldCBzY3JvbGxIZWlnaHQoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5kYXRhU2VydmljZS5ncm91cGVkID8gdGhpcy52aXJ0dWFsLnRvdGFsIC0gMSA6IHRoaXMudmlydHVhbC50b3RhbCkgKiB0aGlzLnZpcnR1YWwuaXRlbUhlaWdodDtcbiAgICB9XG4gICAgZ2V0IG92ZXJmbG93WSgpIHtcbiAgICAgICAgaWYgKGlzUHJlc2VudCh0aGlzLnZpcnR1YWwpKSB7XG4gICAgICAgICAgICBjb25zdCBvdmVyZmxvdyA9IHRoaXMuaGFzVmlydHVhbFNjcm9sbGJhcigpID8gJ3Njcm9sbCcgOiAnaGlkZGVuJztcbiAgICAgICAgICAgIHJldHVybiBvdmVyZmxvdztcbiAgICAgICAgfVxuICAgIH1cbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzKSB7XG4gICAgICAgIGlmIChpc0NoYW5nZWQoJ2RhdGEnLCBjaGFuZ2VzLCBmYWxzZSkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmxhc3RMb2FkZWQgPD0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdExvYWRlZCA9IHRoaXMuZGF0YS5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9Gb2N1c2VkID0gIWNoYW5nZXMuZGF0YS5pc0ZpcnN0Q2hhbmdlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgICAgICB0aGlzLnpvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxTdWJzY3JpcHRpb24gPSBmcm9tRXZlbnQodGhpcy5jb250ZW50Lm5hdGl2ZUVsZW1lbnQsIFwic2Nyb2xsXCIpLnBpcGUoYXVkaXRUaW1lKDEwMCksIHRhcCh0aGlzLnByZWZldGNoRGF0YS5iaW5kKHRoaXMpKSwgdGFwKHRoaXMuZmluZEN1cnJlbnRHcm91cC5iaW5kKHRoaXMpKSkuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RTY3JvbGxUb3AgPSB0aGlzLmNvbnRlbnQubmF0aXZlRWxlbWVudC5zY3JvbGxUb3A7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5nQWZ0ZXJWaWV3Q2hlY2tlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMudmlydHVhbCkge1xuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbkl0ZW1zKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaXRlbXMgJiYgdGhpcy5zY3JvbGxUb0ZvY3VzZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9Gb2N1c2VkID0gZmFsc2U7XG4gICAgICAgICAgICBjb25zdCBzY3JvbGxUYXJnZXQgPSB0aGlzLml0ZW1zLmxlbmd0aCAmJiB0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCA9PT0gLTEgPyAwIDogdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzZWQ7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbFRvSXRlbShzY3JvbGxUYXJnZXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRhdGFTZXJ2aWNlLmdyb3VwZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZmluZEN1cnJlbnRHcm91cCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLnNlbGVjdFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICBpZiAodGhpcy5zY3JvbGxTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25DaGVja2VkQ2hhbmdlKGUsIGluZGV4KSB7XG4gICAgICAgIGNvbnN0IGlzQ2hlY2tlZCA9IGUudGFyZ2V0WydjaGVja2VkJ107XG4gICAgICAgIGlmIChpc0NoZWNrZWQgJiYgIXRoaXMuc2VsZWN0aW9uU2VydmljZS5pc1NlbGVjdGVkKGluZGV4KSkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmFkZChpbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc0NoZWNrZWQgJiYgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmlzU2VsZWN0ZWQoaW5kZXgpKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UudW5zZWxlY3QoaW5kZXgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlzQ2hlY2tlZChpbmRleCkge1xuICAgICAgICBjb25zdCBub3JtYWxpemVkSW5kZXggPSB0aGlzLnZpcnR1YWwgPyBpbmRleCArIHRoaXMudmlydHVhbC5za2lwIDogaW5kZXg7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvblNlcnZpY2UuaXNTZWxlY3RlZChub3JtYWxpemVkSW5kZXgpO1xuICAgIH1cbiAgICBmaXJzdFZpc2libGVJdGVtKCkge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gdGhpcy5jb250ZW50Lm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IHJlY3QgPSBjb250ZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAvLyBJRTkgaGFja1xuICAgICAgICBjb25zdCBkaXNhYmxlZCA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGNvbnRlbnQucXVlcnlTZWxlY3RvckFsbChcIi5rLXN0YXRlLWRpc2FibGVkXCIpKTtcbiAgICAgICAgLy8gVGhpcyBpcyBhIHdvcmthcm91bmQgZm9yIGZpbmRpbmcgZWxlbWVudHMgd2l0aCBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgICAgZGlzYWJsZWQuZm9yRWFjaCgoZWwpID0+IHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoZWwsIFwicG9pbnRlci1ldmVudHNcIiwgXCJhdXRvXCIpKTtcbiAgICAgICAgY29uc3QgaXRlbSA9IGRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQocmVjdC5sZWZ0ICsgMSwgcmVjdC50b3AgKyAxKTtcbiAgICAgICAgZGlzYWJsZWQuZm9yRWFjaCgoZWwpID0+IHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoZWwsIFwicG9pbnRlci1ldmVudHNcIiwgXCJub25lXCIpKTtcbiAgICAgICAgLy8gcmV0dXJuIHRoZSBjbG9zZXN0IGBsaWAgaXRlbSB0byBjb3ZlciB0aGUgY3VzdG9tIHRlbXBsYXRlIHNjZW5hcmlvXG4gICAgICAgIHJldHVybiBjbG9zZXN0KGl0ZW0sICdsaScpO1xuICAgIH1cbiAgICBmaW5kQ3VycmVudEdyb3VwKCkge1xuICAgICAgICBpZiAoIXRoaXMuZGF0YVNlcnZpY2UuZ3JvdXBlZCkge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50R3JvdXAgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuZmlyc3RWaXNpYmxlSXRlbSgpO1xuICAgICAgICBpZiAoaXRlbSkge1xuICAgICAgICAgICAgbGV0IGluZGV4O1xuICAgICAgICAgICAgaWYgKGl0ZW0uZ2V0QXR0cmlidXRlKFwicm9sZVwiKSA9PT0gXCJncm91cFwiKSB7XG4gICAgICAgICAgICAgICAgaW5kZXggPSBwYXJzZUludChpdGVtLmdldEF0dHJpYnV0ZShcImdyb3VwLWluZGV4XCIpLCAxMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50R3JvdXAgPSB0aGlzLmRhdGFTZXJ2aWNlLmdyb3VwQXQoaW5kZXgpLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaW5kZXggPSBwYXJzZUludChpdGVtLmdldEF0dHJpYnV0ZShcImluZGV4XCIpLCAxMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50R3JvdXAgPSB0aGlzLmRhdGFTZXJ2aWNlLml0ZW1Hcm91cCh0aGlzLmRhdGFTZXJ2aWNlLml0ZW1BdChpbmRleCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50R3JvdXAgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xuICAgIH1cbiAgICBwcmVmZXRjaERhdGEoKSB7XG4gICAgICAgIGlmICghdGhpcy52aXJ0dWFsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmlzaWJsZUl0ZW1zID0gTWF0aC50cnVuYyh0aGlzLmNvbnRlbnQubmF0aXZlRWxlbWVudC5jbGllbnRIZWlnaHQgLyB0aGlzLnZpcnR1YWwuaXRlbUhlaWdodCk7XG4gICAgICAgIGNvbnN0IG9mZnNldFkgPSB0aGlzLmNvbnRlbnQubmF0aXZlRWxlbWVudC5zY3JvbGxUb3A7XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gTWF0aC50cnVuYyhvZmZzZXRZIC8gdGhpcy52aXJ0dWFsLml0ZW1IZWlnaHQpO1xuICAgICAgICBjb25zdCBkb3duID0gb2Zmc2V0WSA+IHRoaXMubGFzdFNjcm9sbFRvcDtcbiAgICAgICAgY29uc3QgbmV4dFBhZ2UgPSAoc3RhcnQgKyB2aXNpYmxlSXRlbXMgPj0gdGhpcy5sYXN0TG9hZGVkKSAmJiB0aGlzLmxhc3RMb2FkZWQgPCB0aGlzLnZpcnR1YWwudG90YWwgLSAxO1xuICAgICAgICBjb25zdCBsZWZ0T3ZlciA9IHRoaXMucGFnZVNpemUgLSAodGhpcy5sYXN0TG9hZGVkIC0gdGhpcy5zdGFydEZyb20pO1xuICAgICAgICBjb25zdCBwcmV2UGFnZSA9IHRoaXMubGFzdExvYWRlZCAtIHRoaXMucGFnZVNpemUgKyB2aXNpYmxlSXRlbXMgPj0gc3RhcnQgLSBsZWZ0T3ZlcjtcbiAgICAgICAgaWYgKGRvd24gJiYgbmV4dFBhZ2UpIHtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlUGFnZShzdGFydCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFkb3duICYmIHByZXZQYWdlKSB7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZVBhZ2Uoc3RhcnQgLSB0aGlzLnBhZ2VTaXplICsgdmlzaWJsZUl0ZW1zICsgMSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2hhbmdlUGFnZShzdGFydCkge1xuICAgICAgICB0aGlzLnpvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgIGxldCBlbmQgPSB0aGlzLnBhZ2VTaXplICsgc3RhcnQ7XG4gICAgICAgICAgICBpZiAoZW5kID4gdGhpcy52aXJ0dWFsLnRvdGFsKSB7XG4gICAgICAgICAgICAgICAgc3RhcnQtLTtcbiAgICAgICAgICAgICAgICBlbmQgPSB0aGlzLnZpcnR1YWwudG90YWw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RhcnQgPCAwKSB7XG4gICAgICAgICAgICAgICAgc3RhcnQgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zdGFydEZyb20gPSBzdGFydDtcbiAgICAgICAgICAgIHRoaXMubGFzdExvYWRlZCA9IGVuZDtcbiAgICAgICAgICAgIHRoaXMucGFnZUNoYW5nZS5lbWl0KHsgc2tpcDogc3RhcnQsIHRha2U6IHRoaXMucGFnZVNpemUgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpbmRleChncm91cEluZGV4LCBpdGVtSW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIGdyb3VwSW5kZXggPiAwID8gKHRoaXMuZGF0YVNlcnZpY2UuZ3JvdXBJbmRpY2VzW2dyb3VwSW5kZXggLSAxXSArIGl0ZW1JbmRleCkgOiBpdGVtSW5kZXg7XG4gICAgfVxuICAgIGdldFRleHQoZGF0YUl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIGdldHRlciQxKGRhdGFJdGVtLCB0aGlzLnRleHRGaWVsZCk7XG4gICAgfVxuICAgIGdldFZhbHVlKGRhdGFJdGVtKSB7XG4gICAgICAgIHJldHVybiBnZXR0ZXIkMShkYXRhSXRlbSwgdGhpcy52YWx1ZUZpZWxkKTtcbiAgICB9XG4gICAgaXNEaXNhYmxlZChpbmRleCkge1xuICAgICAgICBpZiAoaXNQcmVzZW50KHRoaXMudmlydHVhbCkpIHtcbiAgICAgICAgICAgIGluZGV4ICs9IHRoaXMudmlydHVhbC5za2lwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmRpc2FibGVkSXRlbXNTZXJ2aWNlLmlzSW5kZXhEaXNhYmxlZChpbmRleCk7XG4gICAgfVxuICAgIHNjcm9sbFRvSXRlbShpbmRleCkge1xuICAgICAgICBsZXQgZmxhdEluZGV4ID0gaW5kZXg7XG4gICAgICAgIGlmICh0aGlzLmRhdGFTZXJ2aWNlLmdyb3VwZWQpIHtcbiAgICAgICAgICAgIC8vIHRha2VzIGludG8gYWNjb3VudCB0aGUgZ3JvdXAgaGVhZGVyIGl0ZW1zXG4gICAgICAgICAgICBmbGF0SW5kZXggPSB0aGlzLmRhdGFTZXJ2aWNlLmZsYXRJbmRleChpbmRleCk7XG4gICAgICAgICAgICAvKiBUaGUgZmlyc3QgZ3JvdXAgaGVhZGVyIGl0ZW0gaXMgbm90IHJlbmRlcmVkIGluIHRoZSBsaXN0IChzZWUgdGVtcGxhdGUpLCBzbyBzdWJ0cmFjdCAxIHdoZW4gY2FsdWxhdGluZyB0aGUgZmxhdCBpbmRleC5cbiAgICAgICAgICAgICAgIFdpdGggdmlydHVhbGl6YXRpb24gZW5hYmxlZCwgdGhlIGZpcnN0IGdyb3VwIGhlYWRlciBjb3VsZCBiZSBpbiBhIHByZXZpb3VzIHBhZ2UsIGluIHdoaWNoIGNhc2UgZG9uJ3Qgc3VidHJhY3QgYW55dGhpbmcuICovXG4gICAgICAgICAgICBjb25zdCBncm91cEhlYWRlck9mZnNldCA9IHRoaXMuZmlyc3RHcm91cEhlYWRlckluVGFyZ2V0ZWRQYWdlKGZsYXRJbmRleCkgPyAtMSA6IDA7XG4gICAgICAgICAgICBmbGF0SW5kZXggKz0gZ3JvdXBIZWFkZXJPZmZzZXQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudmlydHVhbCAmJiBmbGF0SW5kZXggPiAtMSkge1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxUb0luZGV4KGZsYXRJbmRleCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXRlbXMgPSB0aGlzLml0ZW1zLnRvQXJyYXkoKTtcbiAgICAgICAgaWYgKGlzUHJlc2VudChpdGVtc1tmbGF0SW5kZXhdKSAmJiBmbGF0SW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbChpdGVtc1tmbGF0SW5kZXhdLmVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNjcm9sbFRvSW5kZXgoaW5kZXgpIHtcbiAgICAgICAgbGV0IGNvbnRlbnQgPSB0aGlzLmNvbnRlbnQubmF0aXZlRWxlbWVudDtcbiAgICAgICAgbGV0IGNvbnRlbnRTY3JvbGxUb3AgPSBjb250ZW50LnNjcm9sbFRvcDtcbiAgICAgICAgY29uc3QgaXRlbU9mZnNldFRvcCA9IGluZGV4ICogdGhpcy52aXJ0dWFsLml0ZW1IZWlnaHQ7XG4gICAgICAgIGNvbnN0IGl0ZW1PZmZzZXRIZWlnaHQgPSB0aGlzLnZpcnR1YWwuaXRlbUhlaWdodDtcbiAgICAgICAgY29uc3QgY29udGVudE9mZnNldEhlaWdodCA9IGNvbnRlbnQuY2xpZW50SGVpZ2h0O1xuICAgICAgICBjb25zdCBib3R0b21EaXN0YW5jZSA9IGl0ZW1PZmZzZXRUb3AgKyBpdGVtT2Zmc2V0SGVpZ2h0O1xuICAgICAgICBpZiAoY29udGVudFNjcm9sbFRvcCA+IGl0ZW1PZmZzZXRUb3ApIHtcbiAgICAgICAgICAgIGNvbnRlbnRTY3JvbGxUb3AgPSBpdGVtT2Zmc2V0VG9wO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGJvdHRvbURpc3RhbmNlID4gKGNvbnRlbnRTY3JvbGxUb3AgKyBjb250ZW50T2Zmc2V0SGVpZ2h0KSkge1xuICAgICAgICAgICAgY29udGVudFNjcm9sbFRvcCA9IChib3R0b21EaXN0YW5jZSAtIGNvbnRlbnRPZmZzZXRIZWlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRlbnQuc2Nyb2xsVG9wID0gY29udGVudFNjcm9sbFRvcDtcbiAgICB9XG4gICAgc2Nyb2xsKGl0ZW0pIHtcbiAgICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmF0aXZlRWxlbWVudCA9IGl0ZW0ubmF0aXZlRWxlbWVudDtcbiAgICAgICAgbGV0IGNvbnRlbnQgPSB0aGlzLmNvbnRlbnQubmF0aXZlRWxlbWVudCwgaXRlbU9mZnNldFRvcCA9IG5hdGl2ZUVsZW1lbnQub2Zmc2V0VG9wLCBpdGVtT2Zmc2V0SGVpZ2h0ID0gbmF0aXZlRWxlbWVudC5vZmZzZXRIZWlnaHQsIGNvbnRlbnRTY3JvbGxUb3AgPSBjb250ZW50LnNjcm9sbFRvcCwgY29udGVudE9mZnNldEhlaWdodCA9IGNvbnRlbnQuY2xpZW50SGVpZ2h0LCBib3R0b21EaXN0YW5jZSA9IGl0ZW1PZmZzZXRUb3AgKyBpdGVtT2Zmc2V0SGVpZ2h0O1xuICAgICAgICBpZiAoY29udGVudFNjcm9sbFRvcCA+IGl0ZW1PZmZzZXRUb3ApIHtcbiAgICAgICAgICAgIGNvbnRlbnRTY3JvbGxUb3AgPSBpdGVtT2Zmc2V0VG9wO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGJvdHRvbURpc3RhbmNlID4gKGNvbnRlbnRTY3JvbGxUb3AgKyBjb250ZW50T2Zmc2V0SGVpZ2h0KSkge1xuICAgICAgICAgICAgY29udGVudFNjcm9sbFRvcCA9IChib3R0b21EaXN0YW5jZSAtIGNvbnRlbnRPZmZzZXRIZWlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRlbnQuc2Nyb2xsVG9wID0gY29udGVudFNjcm9sbFRvcDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHdoZXRoZXIgYSBzY3JvbGxiYXIgaXMgY3VycmVudGx5IHJlbmRlcmVkIGluIHRoZSBsaXN0LlxuICAgICAqL1xuICAgIGhhc1Njcm9sbGJhcigpIHtcbiAgICAgICAgaWYgKCEoaXNQcmVzZW50KHRoaXMuaXRlbXMpICYmIHRoaXMuaXRlbXMubGVuZ3RoICYmIGlzUHJlc2VudCh0aGlzLmxpc3QpICYmIGlzUHJlc2VudCh0aGlzLmNvbnRlbnQpKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhhc1ZpcnR1YWxTY3JvbGwgPSBpc1ByZXNlbnQodGhpcy52aXJ0dWFsKSAmJiB0aGlzLmhhc1ZpcnR1YWxTY3JvbGxiYXIoKTtcbiAgICAgICAgcmV0dXJuIGhhc1ZpcnR1YWxTY3JvbGwgfHwgdGhpcy5saXN0Lm5hdGl2ZUVsZW1lbnQuc2Nyb2xsSGVpZ2h0ID4gdGhpcy5jb250ZW50Lm5hdGl2ZUVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgd2hldGhlciB0aGUgc2Nyb2xsYmFyIHNob3VsZCBiZSB2aXNpYmxlIGluIHZpcnR1YWwgbW9kZS5cbiAgICAgKi9cbiAgICBoYXNWaXJ0dWFsU2Nyb2xsYmFyKCkge1xuICAgICAgICBjb25zdCBjb250ZW50T2Zmc2V0SGVpZ2h0ID0gdGhpcy5jb250ZW50Lm5hdGl2ZUVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuICAgICAgICBjb25zdCB2aXJ0dWFsT2Zmc2V0SGVpZ2h0ID0gdGhpcy52aXJ0dWFsQ29udGFpbmVyICYmIHRoaXMudmlydHVhbENvbnRhaW5lci5uYXRpdmVFbGVtZW50Lm9mZnNldEhlaWdodDtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlydHVhbENvbnRhaW5lciAmJiB2aXJ0dWFsT2Zmc2V0SGVpZ2h0ID4gY29udGVudE9mZnNldEhlaWdodDtcbiAgICB9XG4gICAgcG9zaXRpb25JdGVtcygpIHtcbiAgICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0WSA9IChpbmRleCArIHRoaXMuc3RhcnRGcm9tKSAqIHRoaXMudmlydHVhbC5pdGVtSGVpZ2h0O1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShpdGVtLmVsZW1lbnQubmF0aXZlRWxlbWVudCwgXCJ0cmFuc2Zvcm1cIiwgYHRyYW5zbGF0ZVkoJHtvZmZzZXRZfXB4YCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgd2hldGhlciB0aGUgZmlyc3QgZ3JvdXAgaGVhZGVyIGZyb20gdGhlIGRhdGEgc2V0IGlzIGluIHRoZSB0YXJnZXRlZCB2aXJ0dWFsIHBhZ2UuXG4gICAgICovXG4gICAgZmlyc3RHcm91cEhlYWRlckluVGFyZ2V0ZWRQYWdlKGl0ZW1JbmRleCkge1xuICAgICAgICBpZiAoIWlzUHJlc2VudCh0aGlzLnZpcnR1YWwpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy52aXJ0dWFsLnNraXAgPT09IDAgJiYgKHRoaXMudmlydHVhbC5wYWdlU2l6ZSA+IGl0ZW1JbmRleCk7XG4gICAgfVxufTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEFycmF5KVxuXSwgTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwic2VsZWN0ZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlcilcbl0sIExpc3RDb21wb25lbnQucHJvdG90eXBlLCBcImZvY3VzZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIExpc3RDb21wb25lbnQucHJvdG90eXBlLCBcInRleHRGaWVsZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwidmFsdWVGaWVsZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKVxuXSwgTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwiaGVpZ2h0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBJdGVtVGVtcGxhdGVEaXJlY3RpdmUpXG5dLCBMaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ0ZW1wbGF0ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgR3JvdXBUZW1wbGF0ZURpcmVjdGl2ZSlcbl0sIExpc3RDb21wb25lbnQucHJvdG90eXBlLCBcImdyb3VwVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZpeGVkR3JvdXBUZW1wbGF0ZURpcmVjdGl2ZSlcbl0sIExpc3RDb21wb25lbnQucHJvdG90eXBlLCBcImZpeGVkR3JvdXBUZW1wbGF0ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIExpc3RDb21wb25lbnQucHJvdG90eXBlLCBcInNob3dcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIExpc3RDb21wb25lbnQucHJvdG90eXBlLCBcImlkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBMaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJvcHRpb25QcmVmaXhcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBMaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJtdWx0aXBsZVNlbGVjdGlvblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuXSwgTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwidmlydHVhbFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwibGlzdENsYXNzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG5dLCBMaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJjaGVja2JveGVzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBBcnJheSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtBcnJheV0pXG5dLCBMaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJkYXRhXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIExpc3RDb21wb25lbnQucHJvdG90eXBlLCBcIm9uQ2xpY2tcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBMaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJwYWdlQ2hhbmdlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwibGlzdFJlc2l6ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgVmlld0NoaWxkcmVuKExpc3RJdGVtRGlyZWN0aXZlKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgUXVlcnlMaXN0KVxuXSwgTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwiaXRlbXNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIFZpZXdDaGlsZCgnY29udGVudCcsIHsgc3RhdGljOiB0cnVlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFbGVtZW50UmVmKVxuXSwgTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwiY29udGVudFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgVmlld0NoaWxkKCdsaXN0JywgeyBzdGF0aWM6IHRydWUgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEVsZW1lbnRSZWYpXG5dLCBMaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJsaXN0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBWaWV3Q2hpbGQoJ3ZpcnR1YWxDb250YWluZXInLCB7IHN0YXRpYzogZmFsc2UgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEVsZW1lbnRSZWYpXG5dLCBMaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ2aXJ0dWFsQ29udGFpbmVyXCIsIHZvaWQgMCk7XG5MaXN0Q29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgQ29tcG9uZW50KHtcbiAgICAgICAgc2VsZWN0b3I6ICdrZW5kby1saXN0JyxcbiAgICAgICAgdGVtcGxhdGU6IGBcbiAgICA8ZGl2ICpuZ0lmPVwiZGF0YVNlcnZpY2UuZ3JvdXBlZFwiXG4gICAgICAgIGNsYXNzPSdrLW91dGVyLWdyb3VwLWhlYWRlciBrLWZpcnN0J1xuICAgICAgICBbbmdDbGFzc109XCJ7J2stdmlydHVhbC1pdGVtJzogdmlydHVhbH1cIlxuICAgICAgICBbbmdTdHlsZV09XCJ7XG4gICAgICAgICAgICAnaGVpZ2h0LnB4JzogdmlydHVhbD8uaXRlbUhlaWdodCxcbiAgICAgICAgICAgICdtaW5IZWlnaHQucHgnIDogdmlydHVhbD8uaXRlbUhlaWdodCxcbiAgICAgICAgICAgICdib3hTaXppbmcnIDogdmlydHVhbCA/ICdib3JkZXItYm94JyA6ICdpbmhlcml0J31cIlxuICAgICAgICA+XG4gICAgICAgIDxuZy10ZW1wbGF0ZSAqbmdJZj1cImZpeGVkR3JvdXBUZW1wbGF0ZVwiXG4gICAgICAgICAgICBbdGVtcGxhdGVDb250ZXh0XT1cIntcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVJlZjogZml4ZWRHcm91cFRlbXBsYXRlLnRlbXBsYXRlUmVmLFxuICAgICAgICAgICAgICAgICRpbXBsaWNpdDogY3VycmVudEdyb3VwXG4gICAgICAgICAgICB9XCI+XG4gICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdJZl09XCIhZml4ZWRHcm91cFRlbXBsYXRlXCI+PHN0cm9uZz57eyBjdXJyZW50R3JvdXAgfX08L3N0cm9uZz4gPC9uZy10ZW1wbGF0ZT5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2ICNjb250ZW50XG4gICAgICAgICBbbmdDbGFzc109XCJ7ICdrLXZpcnR1YWwtY29udGVudCc6IHZpcnR1YWwsICdrLWxpc3Qtc2Nyb2xsZXInOiAhdmlydHVhbCB9XCJcbiAgICAgICAgIFtzdHlsZS5tYXhIZWlnaHQucHhdPVwiaGVpZ2h0XCJcbiAgICAgICAgIFtzdHlsZS5vdmVyZmxvd1ldPVwib3ZlcmZsb3dZXCJcbiAgICAgICAgIHVuc2VsZWN0YWJsZT1cIm9uXCI+XG4gICAgPHVsICNsaXN0XG4gICAgICAgIHJvbGU9XCJsaXN0Ym94XCJcbiAgICAgICAgW2NsYXNzXT1cImxpc3RDbGFzc1wiXG4gICAgICAgIFtuZ0NsYXNzXT1cInsgJ2stdmlydHVhbC1saXN0JzogdmlydHVhbCB9XCJcbiAgICAgICAgW2F0dHIuaWRdPVwiaWRcIlxuICAgICAgICBbYXR0ci5hcmlhLWhpZGRlbl09XCIhc2hvd1wiPlxuICAgICAgICAgPG5nLXRlbXBsYXRlICpuZ0lmPVwiIWRhdGFTZXJ2aWNlLmdyb3VwZWQgJiYgc2hvd1wiIG5nRm9yIGxldC1kYXRhSXRlbSBsZXQtaXRlbUluZGV4PVwiaW5kZXhcIiBbbmdGb3JPZl09XCJkYXRhXCI+XG4gICAgICAgICAgICA8bGlcbiAgICAgICAgICAgICAgICByb2xlPVwib3B0aW9uXCJcbiAgICAgICAgICAgICAgICBrZW5kb0Ryb3BEb3duc1NlbGVjdGFibGVcbiAgICAgICAgICAgICAgICBbY2hlY2tib3hlc109XCJjaGVja2JveGVzXCJcbiAgICAgICAgICAgICAgICBbaGVpZ2h0XT1cInZpcnR1YWw/Lml0ZW1IZWlnaHRcIlxuICAgICAgICAgICAgICAgIFtpbmRleF09XCJpdGVtSW5kZXggKyBzdGFydEZyb21cIlxuICAgICAgICAgICAgICAgIFttdWx0aXBsZVNlbGVjdGlvbl09XCJtdWx0aXBsZVNlbGVjdGlvblwiXG4gICAgICAgICAgICAgICAgW2F0dHIuaWRdPVwib3B0aW9uUHJlZml4ICsgJy0nICsgZ2V0VmFsdWUoZGF0YUl0ZW0pXCJcbiAgICAgICAgICAgICAgICBbYXR0ci50YWJJbmRleF09XCItMVwiXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJrLWl0ZW1cIlxuICAgICAgICAgICAgICAgIFtuZ0NsYXNzXT1cInsgJ2stdmlydHVhbC1pdGVtJzogdmlydHVhbCwgJ2stc3RhdGUtZGlzYWJsZWQnOiBpc0Rpc2FibGVkKGl0ZW1JbmRleCkgfVwiPlxuICAgICAgICAgICAgICAgIDxsYWJlbCAqbmdJZj1cImNoZWNrYm94ZXMuZW5hYmxlZFwiXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiay1jaGVja2JveC1sYWJlbFwiPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiay1jaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAoY2hhbmdlKT1cIm9uQ2hlY2tlZENoYW5nZSgkZXZlbnQsIGl0ZW1JbmRleClcIlxuICAgICAgICAgICAgICAgICAgICAgICAgW2NoZWNrZWRdPVwiaXNDaGVja2VkKGl0ZW1JbmRleClcIlxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlICpuZ0lmPVwidGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgICAgICBbdGVtcGxhdGVDb250ZXh0XT1cIntcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUmVmOiB0ZW1wbGF0ZS50ZW1wbGF0ZVJlZixcbiAgICAgICAgICAgICAgICAgICAgICAgICRpbXBsaWNpdDogZGF0YUl0ZW1cbiAgICAgICAgICAgICAgICAgICAgfVwiPlxuICAgICAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlIFtuZ0lmXT1cIiF0ZW1wbGF0ZVwiPnt7IGdldFRleHQoZGF0YUl0ZW0pIH19PC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgPG5nLXRlbXBsYXRlICpuZ0lmPVwiZGF0YVNlcnZpY2UuZ3JvdXBlZFwiIG5nRm9yIGxldC1kYXRhSXRlbSBsZXQtaXRlbUluZGV4PVwiaW5kZXhcIiBbbmdGb3JPZl09XCJkYXRhXCI+XG4gICAgICAgICAgICA8bGlcbiAgICAgICAgICAgICAgICAqbmdJZj1cImRhdGFJdGVtLmhlYWRlciAmJiBkYXRhSXRlbS5pbmRleCA+IDBcIlxuICAgICAgICAgICAgICAgIHJvbGU9XCJncm91cFwiXG4gICAgICAgICAgICAgICAgY2xhc3M9J2stb3V0ZXItZ3JvdXAtaGVhZGVyJ1xuICAgICAgICAgICAgICAgIFtuZ0NsYXNzXT1cInsgJ2stdmlydHVhbC1pdGVtJzogdmlydHVhbCB9XCJcbiAgICAgICAgICAgICAgICBbbmdTdHlsZV09XCJ7XG4gICAgICAgICAgICAgICAgICAgICdoZWlnaHQucHgnOiB2aXJ0dWFsPy5pdGVtSGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICAnbWluSGVpZ2h0LnB4JyA6IHZpcnR1YWw/Lml0ZW1IZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgICdib3hTaXppbmcnIDogdmlydHVhbCA/ICdib3JkZXItYm94JyA6ICdpbmhlcml0J31cIlxuICAgICAgICAgICAgICAgIFthdHRyLmdyb3VwLWluZGV4XT1cImRhdGFJdGVtLmluZGV4XCJcbiAgICAgICAgICAgICAgICBbYXR0ci5pZF09XCJvcHRpb25QcmVmaXggKyAnLScgKyBnZXRWYWx1ZShkYXRhSXRlbS52YWx1ZSlcIlxuICAgICAgICAgICAgICAgIFthdHRyLnRhYkluZGV4XT1cIi0xXCI+XG4gICAgICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSAqbmdJZj1cImdyb3VwVGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBbdGVtcGxhdGVDb250ZXh0XT1cIntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVJlZjogZ3JvdXBUZW1wbGF0ZS50ZW1wbGF0ZVJlZixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW1wbGljaXQ6IGRhdGFJdGVtLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIH1cIj5cbiAgICAgICAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlIFtuZ0lmXT1cIiFncm91cFRlbXBsYXRlXCI+PHN0cm9uZz4ge3sgZGF0YUl0ZW0udmFsdWUgfX08L3N0cm9uZz4gPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgPGxpXG4gICAgICAgICAgICAgICAgKm5nSWY9XCIhZGF0YUl0ZW0uaGVhZGVyXCJcbiAgICAgICAgICAgICAgICByb2xlPVwib3B0aW9uXCJcbiAgICAgICAgICAgICAgICBrZW5kb0Ryb3BEb3duc1NlbGVjdGFibGVcbiAgICAgICAgICAgICAgICBbaGVpZ2h0XT1cInZpcnR1YWw/Lml0ZW1IZWlnaHRcIlxuICAgICAgICAgICAgICAgIFtpbmRleF09XCJkYXRhSXRlbS5vZmZzZXRJbmRleFwiXG4gICAgICAgICAgICAgICAgW211bHRpcGxlU2VsZWN0aW9uXT1cIm11bHRpcGxlU2VsZWN0aW9uXCJcbiAgICAgICAgICAgICAgICBbYXR0ci5hYnNvbHV0ZS1pbmRleF09XCJkYXRhSXRlbS5pbmRleFwiXG4gICAgICAgICAgICAgICAgW2F0dHIuaWRdPVwib3B0aW9uUHJlZml4ICsgJy0nICsgZ2V0VmFsdWUoZGF0YUl0ZW0udmFsdWUpXCJcbiAgICAgICAgICAgICAgICBbYXR0ci50YWJJbmRleF09XCItMVwiXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJrLWl0ZW1cIlxuICAgICAgICAgICAgICAgIFtuZ0NsYXNzXT1cInsgJ2stdmlydHVhbC1pdGVtJzogdmlydHVhbCwgJ2stc3RhdGUtZGlzYWJsZWQnOiBpc0Rpc2FibGVkKGRhdGFJdGVtLm9mZnNldEluZGV4KSB9XCI+XG4gICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlICpuZ0lmPVwidGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgICAgICBbdGVtcGxhdGVDb250ZXh0XT1cIntcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUmVmOiB0ZW1wbGF0ZS50ZW1wbGF0ZVJlZixcbiAgICAgICAgICAgICAgICAgICAgICAgICRpbXBsaWNpdDogZGF0YUl0ZW0udmFsdWVcbiAgICAgICAgICAgICAgICAgICAgfVwiPlxuICAgICAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlIFtuZ0lmXT1cIiF0ZW1wbGF0ZVwiPnt7IGdldFRleHQoZGF0YUl0ZW0udmFsdWUpIH19PC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgIDwvbGk+XG4gICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgIDxrZW5kby1yZXNpemUtc2Vuc29yXG4gICAgICAgICAgICAqbmdJZj1cIiF2aXJ0dWFsXCJcbiAgICAgICAgICAgIChyZXNpemUpPVwibGlzdFJlc2l6ZS5lbWl0KClcIlxuICAgICAgICA+XG4gICAgICAgIDwva2VuZG8tcmVzaXplLXNlbnNvcj5cbiAgICA8L3VsPlxuICAgIDxkaXYgKm5nSWY9XCJ2aXJ0dWFsXCIgI3ZpcnR1YWxDb250YWluZXIgY2xhc3M9XCJrLWhlaWdodC1jb250YWluZXJcIiByb2xlPVwicHJlc2VudGF0aW9uXCI+XG4gICAgICAgIDxkaXYgW3N0eWxlLmhlaWdodC5weF09XCJzY3JvbGxIZWlnaHRcIj5cbiAgICAgICAgICAgIDxrZW5kby1yZXNpemUtc2Vuc29yIChyZXNpemUpPVwibGlzdFJlc2l6ZS5lbWl0KClcIj48L2tlbmRvLXJlc2l6ZS1zZW5zb3I+XG4gICAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICBgXG4gICAgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtEYXRhU2VydmljZSxcbiAgICAgICAgRWxlbWVudFJlZixcbiAgICAgICAgU2VsZWN0aW9uU2VydmljZSxcbiAgICAgICAgRGlzYWJsZWRJdGVtc1NlcnZpY2UsXG4gICAgICAgIENoYW5nZURldGVjdG9yUmVmLFxuICAgICAgICBOZ1pvbmUsXG4gICAgICAgIFJlbmRlcmVyMl0pXG5dLCBMaXN0Q29tcG9uZW50KTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IERFRkFVTFRTID0ge1xuICAgIHBhZ2VTaXplOiA1MCxcbiAgICBpdGVtSGVpZ2h0OiAyOFxufTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBub3JtYWxpemVWaXJ0dWFsaXphdGlvblNldHRpbmdzID0gKHNldHRpbmdzLCBkZWZhdWx0T3ZlcnJpZGVzKSA9PiB7XG4gICAgY29uc3QgZGVmYXVsdHMgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUUywgZGVmYXVsdE92ZXJyaWRlcyk7XG4gICAgaWYgKHNldHRpbmdzID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiBkZWZhdWx0cztcbiAgICB9XG4gICAgaWYgKCFzZXR0aW5ncykge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oeyBwYWdlU2l6ZTogREVGQVVMVFMucGFnZVNpemUgfSwgc2V0dGluZ3MpO1xufTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IFRPVUNIX0VOQUJMRUQgPSBuZXcgSW5qZWN0aW9uVG9rZW4oJ2Ryb3Bkb3ducy10b3VjaC1lbmFibGVkJyk7XG5cbi8qIHRzbGludDpkaXNhYmxlOm1lbWJlci1vcmRlcmluZyAqL1xudmFyIEF1dG9Db21wbGV0ZUNvbXBvbmVudF8xO1xuY29uc3QgTk9fVkFMVUUgPSBcIlwiO1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IEFVVE9DT01QTEVURV9WQUxVRV9BQ0NFU1NPUiA9IHtcbiAgICBtdWx0aTogdHJ1ZSxcbiAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcbiAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBBdXRvQ29tcGxldGVDb21wb25lbnQpXG59O1xuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBbS2VuZG8gVUkgQXV0b0NvbXBsZXRlIGNvbXBvbmVudCBmb3IgQW5ndWxhcl0oeyUgc2x1ZyBvdmVydmlld19hdXRvY29tcGxldGUgJX0pLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogX0BDb21wb25lbnQoe1xuICogc2VsZWN0b3I6ICdteS1hcHAnLFxuICogdGVtcGxhdGU6IGBcbiAqICA8a2VuZG8tYXV0b2NvbXBsZXRlXG4gKiAgICAgIFtkYXRhXT1cImxpc3RJdGVtc1wiXG4gKiAgICAgIFtwbGFjZWhvbGRlcl09XCJwbGFjZWhvbGRlclwiXG4gKiAgPlxuICogYFxuICogfSlcbiAqIGNsYXNzIEFwcENvbXBvbmVudCB7XG4gKiAgIHB1YmxpYyBwbGFjZWhvbGRlcjogc3RyaW5nID0gJ1R5cGUgXCJpdFwiIGZvciBzdWdnZXN0aW9ucyc7XG4gKiAgIHB1YmxpYyBsaXN0SXRlbXM6IEFycmF5PHN0cmluZz4gPSBbXCJJdGVtIDFcIiwgXCJJdGVtIDJcIiwgXCJJdGVtIDNcIiwgXCJJdGVtIDRcIl07XG4gKiB9XG4gKiBgYGBcbiAqL1xubGV0IEF1dG9Db21wbGV0ZUNvbXBvbmVudCA9IEF1dG9Db21wbGV0ZUNvbXBvbmVudF8xID0gY2xhc3MgQXV0b0NvbXBsZXRlQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihsb2NhbGl6YXRpb24sIGRhdGFTZXJ2aWNlLCBwb3B1cFNlcnZpY2UsIHNlbGVjdGlvblNlcnZpY2UsIG5hdmlnYXRpb25TZXJ2aWNlLCBkaXNhYmxlZEl0ZW1zU2VydmljZSwgX3pvbmUsIGNkciwgcmVuZGVyZXIsIGhvc3RFbGVtZW50LCB0b3VjaEVuYWJsZWQkJDEpIHtcbiAgICAgICAgdGhpcy5sb2NhbGl6YXRpb24gPSBsb2NhbGl6YXRpb247XG4gICAgICAgIHRoaXMuZGF0YVNlcnZpY2UgPSBkYXRhU2VydmljZTtcbiAgICAgICAgdGhpcy5wb3B1cFNlcnZpY2UgPSBwb3B1cFNlcnZpY2U7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZSA9IHNlbGVjdGlvblNlcnZpY2U7XG4gICAgICAgIHRoaXMubmF2aWdhdGlvblNlcnZpY2UgPSBuYXZpZ2F0aW9uU2VydmljZTtcbiAgICAgICAgdGhpcy5kaXNhYmxlZEl0ZW1zU2VydmljZSA9IGRpc2FibGVkSXRlbXNTZXJ2aWNlO1xuICAgICAgICB0aGlzLl96b25lID0gX3pvbmU7XG4gICAgICAgIHRoaXMuY2RyID0gY2RyO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuaG9zdEVsZW1lbnQgPSBob3N0RWxlbWVudDtcbiAgICAgICAgdGhpcy50b3VjaEVuYWJsZWQgPSB0b3VjaEVuYWJsZWQkJDE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWZpbmVzIHdoZXRoZXIgdGhlIGZpcnN0IG1hdGNoIGZyb20gdGhlIHN1Z2dlc3Rpb25zIGxpc3Qgd2lsbCBiZSBhdXRvbWF0aWNhbGx5IGZvY3VzZWQuXG4gICAgICAgICAqIEJ5IGRlZmF1bHQsIGBoaWdobGlnaHRGaXJzdGAgaXMgc2V0IHRvIGB0cnVlYC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGlnaGxpZ2h0Rmlyc3QgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGhpZGRlblxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5mb2N1c2FibGVJZCA9IGBrLSR7Z3VpZCQxKCl9YDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBoaW50IHdoaWNoIGlzIGRpc3BsYXllZCB3aGVuIHRoZSBjb21wb25lbnQgaXMgZW1wdHkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBsYWNlaG9sZGVyID0gXCJcIjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgdGhlIGhlaWdodCBvZiB0aGUgc3VnZ2VzdGlvbnMgbGlzdC4gQnkgZGVmYXVsdCwgYGxpc3RIZWlnaHRgIGlzIDIwMHB4LlxuICAgICAgICAgKlxuICAgICAgICAgKiA+IFRoZSBgbGlzdEhlaWdodGAgcHJvcGVydHkgYWZmZWN0cyBvbmx5IHRoZSBsaXN0IG9mIHN1Z2dlc3Rpb25zIGFuZCBub3QgdGhlIHdob2xlIHBvcHVwIGNvbnRhaW5lci5cbiAgICAgICAgICogPiBUbyBzZXQgdGhlIGhlaWdodCBvZiB0aGUgcG9wdXAgY29udGFpbmVyLCB1c2UgYHBvcHVwU2V0dGluZ3MuaGVpZ2h0YC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubGlzdEhlaWdodCA9IDIwMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBoaWRkZW5cbiAgICAgICAgICpcbiAgICAgICAgICogSWYgc2V0IHRvIGB0cnVlYCwgcmVuZGVycyBhIGJ1dHRvbiBvbiBob3ZlcmluZyBvdmVyIHRoZSBjb21wb25lbnQuXG4gICAgICAgICAqIENsaWNraW5nIHRoaXMgYnV0dG9uIHJlc2V0cyB0aGUgdmFsdWUgb2YgdGhlIGNvbXBvbmVudCB0byBgdW5kZWZpbmVkYCBhbmQgdHJpZ2dlcnMgdGhlIGBjaGFuZ2VgIGV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jbGVhckJ1dHRvbiA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIHRoZSBkaXNhYmxlZCBzdGF0ZSBvZiB0aGUgY29tcG9uZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyB0aGUgcmVhZC1vbmx5IHN0YXRlIG9mIHRoZSBjb21wb25lbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlYWRvbmx5ID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgdGhlIFtgdGFiaW5kZXhgXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0dsb2JhbF9hdHRyaWJ1dGVzL3RhYmluZGV4KSBvZiB0aGUgY29tcG9uZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50YWJpbmRleCA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbmFibGVzIHRoZSBbZmlsdGVyaW5nXSh7JSBzbHVnIGZpbHRlcmluZ19hdXRvY29tcGxldGUgJX0pIGZ1bmN0aW9uYWxpdHkuXG4gICAgICAgICAqIElmIHNldCB0byBgdHJ1ZWAsIHRoZSBjb21wb25lbnQgZW1pdHMgdGhlIGBmaWx0ZXJDaGFuZ2VgIGV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5maWx0ZXJhYmxlID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgdGhlIHZhbHVlIGlzIGNoYW5nZWQmbWRhc2g7XG4gICAgICAgICAqIHdoZW4gdGhlIGNvbXBvbmVudCBpcyBibHVycmVkIG9yIHRoZSB2YWx1ZSBpcyBjbGVhcmVkIHRocm91Z2ggdGhlICoqQ2xlYXIqKiBidXR0b25cbiAgICAgICAgICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBvdmVydmlld19hdXRvY29tcGxldGUgJX0jdG9jLWV2ZW50cykpLlxuICAgICAgICAgKiBXaGVuIHRoZSB2YWx1ZSBvZiB0aGUgY29tcG9uZW50IGlzIHByb2dyYW1tYXRpY2FsbHkgY2hhbmdlZCB0byBgbmdNb2RlbGAgb3IgYGZvcm1Db250cm9sYFxuICAgICAgICAgKiB0aHJvdWdoIGl0cyBBUEkgb3IgZm9ybSBiaW5kaW5nLCB0aGUgYHZhbHVlQ2hhbmdlYCBldmVudCBpcyBub3QgdHJpZ2dlcmVkIGJlY2F1c2UgaXRcbiAgICAgICAgICogbWlnaHQgY2F1c2UgYSBtaXgtdXAgd2l0aCB0aGUgYnVpbHQtaW4gYHZhbHVlQ2hhbmdlYCBtZWNoYW5pc21zIG9mIHRoZSBgbmdNb2RlbGAgb3IgYGZvcm1Db250cm9sYCBiaW5kaW5ncy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudmFsdWVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgdGhlIHVzZXIgdHlwZXMgaW4gdGhlIGlucHV0IGZpZWxkLlxuICAgICAgICAgKiBZb3UgY2FuIGZpbHRlciB0aGUgc291cmNlIGJhc2VkIG9uIHRoZSBwYXNzZWQgZmlsdHJhdGlvbiB2YWx1ZVxuICAgICAgICAgKiAoW3NlZSBleGFtcGxlXSh7JSBzbHVnIG92ZXJ2aWV3X2F1dG9jb21wbGV0ZSAlfSN0b2MtZXZlbnRzKSkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZpbHRlckNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgcG9wdXAgaXMgYWJvdXQgdG8gb3Blbi5cbiAgICAgICAgICogVGhpcyBldmVudCBpcyBwcmV2ZW50YWJsZS4gSWYgeW91IGNhbmNlbCBpdCwgdGhlIHBvcHVwIHdpbGwgcmVtYWluIGNsb3NlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub3BlbiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGFmdGVyIHRoZSBwb3B1cCBoYXMgYmVlbiBvcGVuZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9wZW5lZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgcG9wdXAgaXMgYWJvdXQgdG8gY2xvc2UuXG4gICAgICAgICAqIFRoaXMgZXZlbnQgaXMgcHJldmVudGFibGUuIElmIHlvdSBjYW5jZWwgaXQsIHRoZSBwb3B1cCB3aWxsIHJlbWFpbiBvcGVuLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jbG9zZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGFmdGVyIHRoZSBwb3B1cCBoYXMgYmVlbiBjbG9zZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNsb3NlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgdXNlciBmb2N1c2VzIHRoZSBBdXRvQ29tcGxldGUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uRm9jdXMgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgdGhlIEF1dG9Db21wbGV0ZSBnZXRzIGJsdXJyZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uQmx1ciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy53aWRnZXRDbGFzc2VzID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5saXN0Qm94SWQgPSBndWlkJDEoKTtcbiAgICAgICAgdGhpcy5vcHRpb25QcmVmaXggPSBndWlkJDEoKTtcbiAgICAgICAgdGhpcy5vbkNoYW5nZUNhbGxiYWNrID0gbm9vcDtcbiAgICAgICAgdGhpcy5vblRvdWNoZWRDYWxsYmFjayA9IG5vb3A7XG4gICAgICAgIHRoaXMucG9wdXBNb3VzZURvd25IYW5kbGVyID0gKGV2ZW50KSA9PiBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLl9wb3B1cFNldHRpbmdzID0geyBhbmltYXRlOiB0cnVlIH07XG4gICAgICAgIHRoaXMuX29wZW4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fdmFsdWUgPSBcIlwiO1xuICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlU3ViamVjdCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHRoaXMuX2lzRm9jdXNlZCA9IGZhbHNlO1xuICAgICAgICB2YWxpZGF0ZVBhY2thZ2UocGFja2FnZU1ldGFkYXRhKTtcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBsb2NhbGl6YXRpb24ucnRsID8gJ3J0bCcgOiAnbHRyJztcbiAgICAgICAgdGhpcy53cmFwcGVyID0gdGhpcy5ob3N0RWxlbWVudC5uYXRpdmVFbGVtZW50O1xuICAgICAgICB0aGlzLmRhdGEgPSBbXTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVFdmVudHMoKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVUb3VjaEV2ZW50cygpO1xuICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UucmVzZXRTZWxlY3Rpb24oWy0xXSk7XG4gICAgfVxuICAgIGdldCB3aWR0aCgpIHtcbiAgICAgICAgbGV0IHdyYXBwZXJPZmZzZXRXaWR0aCA9IDA7XG4gICAgICAgIGlmIChpc0RvY3VtZW50QXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICAgIHdyYXBwZXJPZmZzZXRXaWR0aCA9IHRoaXMud3JhcHBlci5vZmZzZXRXaWR0aDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB3aWR0aCA9IHRoaXMucG9wdXBTZXR0aW5ncy53aWR0aCB8fCB3cmFwcGVyT2Zmc2V0V2lkdGg7XG4gICAgICAgIGNvbnN0IG1pbldpZHRoID0gaXNOYU4od3JhcHBlck9mZnNldFdpZHRoKSA/IHdyYXBwZXJPZmZzZXRXaWR0aCA6IGAke3dyYXBwZXJPZmZzZXRXaWR0aH1weGA7XG4gICAgICAgIGNvbnN0IG1heFdpZHRoID0gaXNOYU4od2lkdGgpID8gd2lkdGggOiBgJHt3aWR0aH1weGA7XG4gICAgICAgIHJldHVybiB7IG1pbjogbWluV2lkdGgsIG1heDogbWF4V2lkdGggfTtcbiAgICB9XG4gICAgZ2V0IGhlaWdodCgpIHtcbiAgICAgICAgY29uc3QgcG9wdXBIZWlnaHQgPSB0aGlzLnBvcHVwU2V0dGluZ3MuaGVpZ2h0O1xuICAgICAgICByZXR1cm4gaXNQcmVzZW50KHBvcHVwSGVpZ2h0KSA/IGAke3BvcHVwSGVpZ2h0fXB4YCA6ICdhdXRvJztcbiAgICB9XG4gICAgZ2V0IGxpc3RDb250YWluZXJDbGFzc2VzKCkge1xuICAgICAgICBjb25zdCBjb250YWluZXJDbGFzc2VzID0gWydrLWxpc3QtY29udGFpbmVyJywgJ2stcmVzZXQnXTtcbiAgICAgICAgaWYgKHRoaXMucG9wdXBTZXR0aW5ncy5wb3B1cENsYXNzKSB7XG4gICAgICAgICAgICBjb250YWluZXJDbGFzc2VzLnB1c2godGhpcy5wb3B1cFNldHRpbmdzLnBvcHVwQ2xhc3MpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb250YWluZXJDbGFzc2VzO1xuICAgIH1cbiAgICBnZXQgc3VnZ2VzdGlvbigpIHtcbiAgICAgICAgaWYgKCF0aGlzLnRleHQgfHwgIXRoaXMuc3VnZ2VzdGVkVGV4dCkge1xuICAgICAgICAgICAgdGhpcy5zdWdnZXN0ZWRUZXh0ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhhc01hdGNoID0gdGhpcy5zdWdnZXN0ZWRUZXh0LnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aCh0aGlzLnRleHQudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgIGNvbnN0IHNob3VsZFN1Z2dlc3QgPSB0aGlzLnN1Z2dlc3QgJiYgIXRoaXMuYmFja3NwYWNlUHJlc3NlZDtcbiAgICAgICAgaWYgKHNob3VsZFN1Z2dlc3QgJiYgaGFzTWF0Y2gpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN1Z2dlc3RlZFRleHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGFwcGVuZFRvKCkge1xuICAgICAgICBjb25zdCB7IGFwcGVuZFRvIH0gPSB0aGlzLnBvcHVwU2V0dGluZ3M7XG4gICAgICAgIGlmICghYXBwZW5kVG8gfHwgYXBwZW5kVG8gPT09ICdyb290Jykge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXBwZW5kVG8gPT09ICdjb21wb25lbnQnID8gdGhpcy5jb250YWluZXIgOiBhcHBlbmRUbztcbiAgICB9XG4gICAgZ2V0IGNsZWFyQnV0dG9uVmlzaWJsaXR5KCkge1xuICAgICAgICBpZiAodGhpcy50b3VjaEVuYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybiAndmlzaWJsZSc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogVG9nZ2xlcyB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgcG9wdXAuXG4gICAgICogSWYgeW91IHVzZSB0aGUgYHRvZ2dsZWAgbWV0aG9kIHRvIG9wZW4gb3IgY2xvc2UgdGhlIHBvcHVwLCB0aGUgYG9wZW5gIGFuZCBgY2xvc2VgIGV2ZW50cyB3aWxsIG5vdCBiZSBmaXJlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcGVuIC0gVGhlIHN0YXRlIG9mIHRoZSBwb3B1cC5cbiAgICAgKi9cbiAgICB0b2dnbGUob3Blbikge1xuICAgICAgICBQcm9taXNlLnJlc29sdmUobnVsbCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzaG91bGRPcGVuID0gaXNQcmVzZW50KG9wZW4pID8gb3BlbiA6ICF0aGlzLl9vcGVuO1xuICAgICAgICAgICAgdGhpcy5fdG9nZ2xlKHNob3VsZE9wZW4pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBvcGVuIHN0YXRlIG9mIHRoZSBwb3B1cC5cbiAgICAgKi9cbiAgICBnZXQgaXNPcGVuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fb3BlbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHRvZ2dsZVBvcHVwKG9wZW4pIHtcbiAgICAgICAgY29uc3QgaXNEaXNhYmxlZCA9IHRoaXMuZGlzYWJsZWQgfHwgdGhpcy5yZWFkb25seTtcbiAgICAgICAgY29uc3Qgc2FtZVN0YXRlID0gdGhpcy5pc09wZW4gPT09IG9wZW47XG4gICAgICAgIGlmIChpc0Rpc2FibGVkIHx8IHNhbWVTdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlzRGVmYXVsdFByZXZlbnRlZCA9IHRoaXMudHJpZ2dlclBvcHVwRXZlbnRzKG9wZW4pO1xuICAgICAgICBpZiAoIWlzRGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICAgICAgdGhpcy5fdG9nZ2xlKG9wZW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBhY3RpdmVEZXNjZW5kYW50KCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNPcGVuIHx8ICFpc1ByZXNlbnQodGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzZWQpIHx8IHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1c2VkID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGF0YUl0ZW0gPSB0aGlzLmRhdGFTZXJ2aWNlLml0ZW1BdCh0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCk7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvblByZWZpeCArIFwiLVwiICsgZ2V0dGVyJDEoZGF0YUl0ZW0sIHRoaXMudmFsdWVGaWVsZCk7XG4gICAgfVxuICAgIGdldCBub0RhdGFMYWJlbCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vRGF0YVRleHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGNsZWFyVGl0bGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsaXphdGlvbi5nZXQoJ2NsZWFyVGl0bGUnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgZGF0YSBvZiB0aGUgQXV0b0NvbXBsZXRlLlxuICAgICAqXG4gICAgICogPiBUaGUgZGF0YSBoYXMgdG8gYmUgcHJvdmlkZWQgaW4gYW4gYXJyYXktbGlrZSBsaXN0LlxuICAgICAqL1xuICAgIHNldCBkYXRhKGRhdGEpIHtcbiAgICAgICAgdGhpcy5kYXRhU2VydmljZS5kYXRhID0gZGF0YSB8fCBbXTtcbiAgICAgICAgaWYgKHRoaXMudmlydHVhbCkge1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsLnNraXAgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmZpbHRlcmFibGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1c2VkID0gdGhpcy5pc09wZW4gJiYgdGhpcy5kYXRhLmxlbmd0aCAmJiB0aGlzLmhpZ2hsaWdodEZpcnN0ID8gdGhpcy5maXJzdEZvY3VzYWJsZUluZGV4KDApIDogLTE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc3VnZ2VzdCAmJiB0aGlzLmRhdGFTZXJ2aWNlLml0ZW1zQ291bnQgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnN1Z2dlc3RlZFRleHQgPSBnZXR0ZXIkMSh0aGlzLmRhdGFTZXJ2aWNlLml0ZW1BdCgwKSwgdGhpcy52YWx1ZUZpZWxkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgZGF0YSgpIHtcbiAgICAgICAgY29uc3QgdmlydHVhbCA9IHRoaXMudmlydHVhbDtcbiAgICAgICAgaWYgKHZpcnR1YWwpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gdmlydHVhbC5za2lwIHx8IDA7XG4gICAgICAgICAgICBjb25zdCBlbmQgPSBzdGFydCArIHZpcnR1YWwucGFnZVNpemU7XG4gICAgICAgICAgICAvLyBVc2UgbGVuZ3RoIGluc3RlYWQgb2YgaXRlbXNDb3VudCBiZWNhdXNlIG9mIHRoZSBncm91cGluZy5cbiAgICAgICAgICAgIHZpcnR1YWwudG90YWwgPSB0aGlzLmRhdGFTZXJ2aWNlLmRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVNlcnZpY2UuZGF0YS5zbGljZShzdGFydCwgZW5kKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhU2VydmljZS5kYXRhO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSB2YWx1ZSBvZiB0aGUgQXV0b0NvbXBsZXRlLlxuICAgICAqL1xuICAgIHNldCB2YWx1ZShuZXdWYWx1ZSkge1xuICAgICAgICB0aGlzLnZlcmlmeVNldHRpbmdzKG5ld1ZhbHVlKTtcbiAgICAgICAgdGhpcy5fdmFsdWUgPSBuZXdWYWx1ZSB8fCBOT19WQUxVRTtcbiAgICAgICAgdGhpcy50ZXh0ID0gdGhpcy52YWx1ZTtcbiAgICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XG4gICAgfVxuICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlIHx8IE5PX1ZBTFVFO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb25maWd1cmVzIHRoZSBwb3B1cCBvZiB0aGUgQXV0b0NvbXBsZXRlLlxuICAgICAqXG4gICAgICogVGhlIGF2YWlsYWJsZSBvcHRpb25zIGFyZTpcbiAgICAgKiAtIGBhbmltYXRlOiBCb29sZWFuYCZtZGFzaDtDb250cm9scyB0aGUgcG9wdXAgYW5pbWF0aW9uLiBCeSBkZWZhdWx0LCB0aGUgb3BlbiBhbmQgY2xvc2UgYW5pbWF0aW9ucyBhcmUgZW5hYmxlZC5cbiAgICAgKiAtIGB3aWR0aDogTnVtYmVyIHwgU3RyaW5nYCZtZGFzaDtTZXRzIHRoZSB3aWR0aCBvZiB0aGUgcG9wdXAgY29udGFpbmVyLiBCeSBkZWZhdWx0LCB0aGUgd2lkdGggb2YgdGhlIGhvc3QgZWxlbWVudCBpcyB1c2VkLiBJZiBzZXQgdG8gYGF1dG9gLCB0aGUgY29tcG9uZW50IGF1dG9tYXRpY2FsbHkgYWRqdXN0cyB0aGUgd2lkdGggb2YgdGhlIHBvcHVwIGFuZCBubyBpdGVtIGxhYmVscyBhcmUgd3JhcHBlZC4gVGhlIGBhdXRvYCBtb2RlIGlzIG5vdCBzdXBwb3J0ZWQgd2hlbiB2aXJ0dWFsIHNjcm9sbGluZyBpcyBlbmFibGVkLlxuICAgICAqIC0gYGhlaWdodDogTnVtYmVyYCZtZGFzaDtTZXRzIHRoZSBoZWlnaHQgb2YgdGhlIHBvcHVwIGNvbnRhaW5lci5cbiAgICAgKiAtIGBwb3B1cENsYXNzOiBTdHJpbmdgJm1kYXNoO1NwZWNpZmllcyBhIGxpc3Qgb2YgQ1NTIGNsYXNzZXMgdGhhdCBhcmUgdXNlZCB0byBzdHlsZSB0aGUgcG9wdXAuXG4gICAgICogLSBgYXBwZW5kVG86IFwicm9vdFwiIHwgXCJjb21wb25lbnRcIiB8IFZpZXdDb250YWluZXJSZWZgJm1kYXNoO1NwZWNpZmllcyB0aGUgY29tcG9uZW50IHRvIHdoaWNoIHRoZSBwb3B1cCB3aWxsIGJlIGFwcGVuZGVkLlxuICAgICAqL1xuICAgIHNldCBwb3B1cFNldHRpbmdzKHNldHRpbmdzKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwU2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHsgYW5pbWF0ZTogdHJ1ZSB9LCBzZXR0aW5ncyk7XG4gICAgfVxuICAgIGdldCBwb3B1cFNldHRpbmdzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcG9wdXBTZXR0aW5ncztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVmaW5lcyBhIEJvb2xlYW4gZnVuY3Rpb24gdGhhdCBpcyBleGVjdXRlZCBmb3IgZWFjaCBkYXRhIGl0ZW0gaW4gdGhlIGNvbXBvbmVudFxuICAgICAqIChbc2VlIGV4YW1wbGVzXSh7JSBzbHVnIGRpc2FibGVkaXRlbXNfYXV0b2NvbXBsZXRlICV9KSkuXG4gICAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBpdGVtIHdpbGwgYmUgZGlzYWJsZWQuXG4gICAgICovXG4gICAgc2V0IGl0ZW1EaXNhYmxlZChmbikge1xuICAgICAgICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGl0ZW1EaXNhYmxlZCBtdXN0IGJlIGEgZnVuY3Rpb24sIGJ1dCByZWNlaXZlZCAke0pTT04uc3RyaW5naWZ5KGZuKX0uYCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaXNhYmxlZEl0ZW1zU2VydmljZS5pdGVtRGlzYWJsZWQgPSBmbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHNldCB0YWJJbmRleCh0YWJJbmRleCkge1xuICAgICAgICB0aGlzLnRhYmluZGV4ID0gdGFiSW5kZXg7XG4gICAgfVxuICAgIGdldCB0YWJJbmRleCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGFiaW5kZXg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuYWJsZXMgdGhlIFt2aXJ0dWFsaXphdGlvbl0oeyUgc2x1ZyB2aXJ0dWFsaXphdGlvbl9hdXRvY29tcGxldGUgJX0pIGZ1bmN0aW9uYWxpdHkuXG4gICAgICovXG4gICAgc2V0IHZpcnR1YWwoc2V0dGluZ3MpIHtcbiAgICAgICAgdGhpcy5fdmlydHVhbFNldHRpbmdzID0gbm9ybWFsaXplVmlydHVhbGl6YXRpb25TZXR0aW5ncyhzZXR0aW5ncyk7XG4gICAgfVxuICAgIGdldCB2aXJ0dWFsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdmlydHVhbFNldHRpbmdzO1xuICAgIH1cbiAgICBnZXQgaXNGb2N1c2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNGb2N1c2VkO1xuICAgIH1cbiAgICBzZXQgaXNGb2N1c2VkKGlzRm9jdXNlZCkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyW2lzRm9jdXNlZCA/ICdhZGRDbGFzcycgOiAncmVtb3ZlQ2xhc3MnXSh0aGlzLndyYXBwZXIsIFwiay1zdGF0ZS1mb2N1c2VkXCIpO1xuICAgICAgICB0aGlzLl9pc0ZvY3VzZWQgPSBpc0ZvY3VzZWQ7XG4gICAgfVxuICAgIGdldCBpc0Rpc2FibGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXNhYmxlZDtcbiAgICB9XG4gICAgZ2V0IGRpcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uO1xuICAgIH1cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5yZW1vdmVBdHRyaWJ1dGUodGhpcy53cmFwcGVyLCBcInRhYmluZGV4XCIpO1xuICAgICAgICB0aGlzLmxvY2FsaXphdGlvbkNoYW5nZVN1YnNjcmlwdGlvbiA9IHRoaXMubG9jYWxpemF0aW9uXG4gICAgICAgICAgICAuY2hhbmdlc1xuICAgICAgICAgICAgLnN1YnNjcmliZSgoeyBydGwgfSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBydGwgPyAncnRsJyA6ICdsdHInO1xuICAgICAgICAgICAgdGhpcy5zZXRNZXNzYWdlcygpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zZXRNZXNzYWdlcygpO1xuICAgIH1cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95UG9wdXAoKTtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZUV2ZW50cygpO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5tZXNzYWdlc1RpbWVvdXQpO1xuICAgICAgICBpZiAodGhpcy5sb2NhbGl6YXRpb25DaGFuZ2VTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIHRoaXMubG9jYWxpemF0aW9uQ2hhbmdlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlcykge1xuICAgICAgICBjb25zdCB2aXJ0dWFsID0gdGhpcy52aXJ0dWFsO1xuICAgICAgICBjb25zdCByZXF1ZXN0SW5pdGlhbERhdGEgPSB2aXJ0dWFsICYmIGNoYW5nZXMuZGF0YSAmJiBjaGFuZ2VzLmRhdGEuaXNGaXJzdENoYW5nZSgpO1xuICAgICAgICBpZiAocmVxdWVzdEluaXRpYWxEYXRhKSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VDaGFuZ2UoeyBza2lwOiAwLCB0YWtlOiB2aXJ0dWFsLnBhZ2VTaXplIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgdmFsdWUgb2YgdGhlIEF1dG9Db21wbGV0ZS5cbiAgICAgKiBJZiB5b3UgdXNlIHRoZSBgcmVzZXRgIG1ldGhvZCB0byBjbGVhciB0aGUgdmFsdWUgb2YgdGhlIGNvbXBvbmVudCxcbiAgICAgKiB0aGUgbW9kZWwgd2lsbCBub3QgdXBkYXRlIGF1dG9tYXRpY2FsbHkgYW5kIHRoZSBgc2VsZWN0aW9uQ2hhbmdlYCBhbmQgYHZhbHVlQ2hhbmdlYCBldmVudHMgd2lsbCBub3QgYmUgZmlyZWQuXG4gICAgICovXG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSBOT19WQUxVRTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGNsZWFyVmFsdWUoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICAgICAgdGhpcy5jaGFuZ2UoTk9fVkFMVUUpO1xuICAgICAgICBpZiAodGhpcy5maWx0ZXJhYmxlKSB7XG4gICAgICAgICAgICB0aGlzLmZpbHRlckNoYW5nZS5lbWl0KCcnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UucmVzZXRTZWxlY3Rpb24oW10pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgd3JpdGVWYWx1ZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICByZWdpc3Rlck9uQ2hhbmdlKGZuKSB7XG4gICAgICAgIHRoaXMub25DaGFuZ2VDYWxsYmFjayA9IGZuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgcmVnaXN0ZXJPblRvdWNoZWQoZm4pIHtcbiAgICAgICAgdGhpcy5vblRvdWNoZWRDYWxsYmFjayA9IGZuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgc2V0RGlzYWJsZWRTdGF0ZShpc0Rpc2FibGVkKSB7XG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBpc0Rpc2FibGVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb2N1c2VzIGEgc3BlY2lmaWMgaXRlbSBvZiB0aGUgQXV0b0NvbXBsZXRlIGJhc2VkIG9uIGEgcHJvdmlkZWQgaW5kZXguXG4gICAgICogSWYgbnVsbCBvciBpbnZhbGlkIGluZGV4IGlzIHByb3ZpZGVkIHRoZSBmb2N1cyB3aWxsIGJlIHJlbW92ZWQuXG4gICAgICovXG4gICAgZm9jdXNJdGVtQXQoaW5kZXgpIHtcbiAgICAgICAgY29uc3QgaXNJblJhbmdlID0gaW5kZXggPj0gMCAmJiBpbmRleCA8IHRoaXMuZGF0YS5sZW5ndGg7XG4gICAgICAgIGlmIChpc1ByZXNlbnQoaW5kZXgpICYmIGlzSW5SYW5nZSAmJiAhdGhpcy5kaXNhYmxlZEl0ZW1zU2VydmljZS5pc0luZGV4RGlzYWJsZWQoaW5kZXgpKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXMoaW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzKC0xKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb2N1c2VzIHRoZSBBdXRvQ29tcGxldGUuXG4gICAgICovXG4gICAgZm9jdXMoKSB7XG4gICAgICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5zZWFyY2hiYXIuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBCbHVycyB0aGUgQXV0b0NvbXBsZXRlLlxuICAgICAqL1xuICAgIGJsdXIoKSB7XG4gICAgICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5zZWFyY2hiYXIuYmx1cigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBvblJlc2l6ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX29wZW4pIHtcbiAgICAgICAgICAgIGNvbnN0IHBvcHVwV3JhcHBlciA9IHRoaXMucG9wdXBSZWYucG9wdXBFbGVtZW50O1xuICAgICAgICAgICAgY29uc3QgeyBtaW4sIG1heCB9ID0gdGhpcy53aWR0aDtcbiAgICAgICAgICAgIHBvcHVwV3JhcHBlci5zdHlsZS5taW5XaWR0aCA9IG1pbjtcbiAgICAgICAgICAgIHBvcHVwV3JhcHBlci5zdHlsZS53aWR0aCA9IG1heDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbWl0Q2hhbmdlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMub25DaGFuZ2VDYWxsYmFjayh2YWx1ZSk7XG4gICAgICAgIHRoaXMudmFsdWVDaGFuZ2UuZW1pdCh2YWx1ZSk7XG4gICAgfVxuICAgIHZlcmlmeVNldHRpbmdzKG5ld1ZhbHVlKSB7XG4gICAgICAgIGlmICghaXNEZXZNb2RlKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNQcmVzZW50KG5ld1ZhbHVlKSAmJiB0eXBlb2YgbmV3VmFsdWUgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkV4cGVjdGVkIHZhbHVlIG9mIHR5cGUgc3RyaW5nLiBTZWUgaHR0cHM6Ly93d3cudGVsZXJpay5jb20va2VuZG8tYW5ndWxhci11aS9jb21wb25lbnRzL2Ryb3Bkb3ducy9hdXRvY29tcGxldGUvdmFsdWUtYmluZGluZy9cIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2VhcmNoKHRleHQsIHN0YXJ0RnJvbSA9IDApIHtcbiAgICAgICAgbGV0IGluZGV4O1xuICAgICAgICBpZiAodGV4dC5sZW5ndGggJiYgdGhpcy5kYXRhU2VydmljZS5pdGVtc0NvdW50KSB7XG4gICAgICAgICAgICBpbmRleCA9IHRoaXMuZGF0YVNlcnZpY2UuZmluZEluZGV4KHRoaXMuZmluZEluZGV4UHJlZGljYXRlKHRleHQpLCBzdGFydEZyb20pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaW5kZXggPSAtMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZEl0ZW1zU2VydmljZS5pc0luZGV4RGlzYWJsZWQoaW5kZXgpKSB7XG4gICAgICAgICAgICBpZiAoaW5kZXggKyAxIDwgdGhpcy5kYXRhU2VydmljZS5pdGVtc0NvdW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWFyY2godGV4dCwgaW5kZXggKyAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1cygtMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXMoaW5kZXgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuc3VnZ2VzdCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3VnZ2VzdGVkVGV4dCA9IGdldHRlciQxKHRoaXMuZGF0YVNlcnZpY2UuaXRlbUF0KGluZGV4KSwgdGhpcy52YWx1ZUZpZWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBuYXZpZ2F0ZShpbmRleCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzKGluZGV4KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGhhbmRsZU5hdmlnYXRlKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IGZvY3VzZWQgPSBpc05hTih0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCkgPyB0aGlzLmZpcnN0Rm9jdXNhYmxlSW5kZXgoMCkgOiB0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZDtcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQgfHwgdGhpcy5yZWFkb25seSB8fCBpc05hTihmb2N1c2VkKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFjdGlvbiA9IHRoaXMubmF2aWdhdGlvblNlcnZpY2UucHJvY2Vzcyh7XG4gICAgICAgICAgICBjdXJyZW50OiBmb2N1c2VkLFxuICAgICAgICAgICAgbWF4OiB0aGlzLmRhdGFTZXJ2aWNlLml0ZW1zQ291bnQgLSAxLFxuICAgICAgICAgICAgbWluOiAwLFxuICAgICAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnRcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChhY3Rpb24gIT09IE5hdmlnYXRpb25BY3Rpb24uVW5kZWZpbmVkICYmXG4gICAgICAgICAgICBhY3Rpb24gIT09IE5hdmlnYXRpb25BY3Rpb24uQmFja3NwYWNlICYmXG4gICAgICAgICAgICBhY3Rpb24gIT09IE5hdmlnYXRpb25BY3Rpb24uRGVsZXRlICYmXG4gICAgICAgICAgICBhY3Rpb24gIT09IE5hdmlnYXRpb25BY3Rpb24uSG9tZSAmJlxuICAgICAgICAgICAgYWN0aW9uICE9PSBOYXZpZ2F0aW9uQWN0aW9uLkVuZCAmJlxuICAgICAgICAgICAgYWN0aW9uICE9PSBOYXZpZ2F0aW9uQWN0aW9uLkxlZnQgJiZcbiAgICAgICAgICAgIGFjdGlvbiAhPT0gTmF2aWdhdGlvbkFjdGlvbi5SaWdodCAmJlxuICAgICAgICAgICAgKChhY3Rpb24gPT09IE5hdmlnYXRpb25BY3Rpb24uRW50ZXIgJiYgdGhpcy5pc09wZW4pIHx8IGFjdGlvbiAhPT0gTmF2aWdhdGlvbkFjdGlvbi5FbnRlcikpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlRW50ZXIoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgZm9jdXNlZCA9IHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1c2VkO1xuICAgICAgICBsZXQgdmFsdWU7XG4gICAgICAgIGlmICh0aGlzLmlzT3Blbikge1xuICAgICAgICAgICAgZXZlbnQub3JpZ2luYWxFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmb2N1c2VkID49IDApIHtcbiAgICAgICAgICAgIHZhbHVlID0gZ2V0dGVyJDEodGhpcy5kYXRhU2VydmljZS5pdGVtQXQoZm9jdXNlZCksIHRoaXMudmFsdWVGaWVsZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IHRoaXMuc3VnZ2VzdCAmJiB0aGlzLnN1Z2dlc3RlZFRleHQgJiYgdGhpcy5kYXRhLmxlbmd0aCAmJlxuICAgICAgICAgICAgICAgIGdldHRlciQxKHRoaXMuZGF0YVNlcnZpY2UuaXRlbUF0KDApLCB0aGlzLnZhbHVlRmllbGQpLnRvTG93ZXJDYXNlKCkgPT09IHRoaXMuc2VhcmNoYmFyLnZhbHVlLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5pc09wZW4gJiYgbWF0Y2gpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMuc3VnZ2VzdGVkVGV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy5zZWFyY2hiYXIudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jaGFuZ2UodmFsdWUpO1xuICAgIH1cbiAgICBoYW5kbGVFc2NhcGUoKSB7XG4gICAgICAgIHRoaXMudG9nZ2xlUG9wdXAoZmFsc2UpO1xuICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCA9IC0xO1xuICAgICAgICB0aGlzLnN1Z2dlc3RlZFRleHQgPSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgc2VhcmNoQmFyQ2hhbmdlKHRleHQpIHtcbiAgICAgICAgY29uc3QgY3VycmVudFRleHRMZW5ndGggPSBpc1ByZXNlbnQodGhpcy50ZXh0KSA/IHRoaXMudGV4dC5sZW5ndGggOiAwO1xuICAgICAgICB0aGlzLmJhY2tzcGFjZVByZXNzZWQgPSAodGV4dC5sZW5ndGggPCBjdXJyZW50VGV4dExlbmd0aCkgPyB0cnVlIDogZmFsc2U7XG4gICAgICAgIHRoaXMudGV4dCA9IHRleHQ7XG4gICAgICAgIHRoaXMudG9nZ2xlUG9wdXAodGV4dC5sZW5ndGggPiAwKTtcbiAgICAgICAgaWYgKCF0aGlzLmhpZ2hsaWdodEZpcnN0KSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCA9IC0xO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmZpbHRlcmFibGUpIHtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyQ2hhbmdlLmVtaXQodGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5oaWdobGlnaHRGaXJzdCkge1xuICAgICAgICAgICAgdGhpcy5zZWFyY2godGV4dCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGhhbmRsZUZvY3VzKCkge1xuICAgICAgICB0aGlzLmlzRm9jdXNlZCA9IHRydWU7XG4gICAgICAgIGlmIChoYXNPYnNlcnZlcnModGhpcy5vbkZvY3VzKSkge1xuICAgICAgICAgICAgdGhpcy5fem9uZS5ydW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMub25Gb2N1cy5lbWl0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgaGFuZGxlQmx1cigpIHtcbiAgICAgICAgY29uc3QgZm9jdXNlZCA9IHRoaXMuZmlsdGVyYWJsZSA/IHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1c2VkIDogLTE7XG4gICAgICAgIHRoaXMuc2VhcmNoYmFyLmlucHV0Lm5hdGl2ZUVsZW1lbnQuc2Nyb2xsTGVmdCA9IDA7IC8vIEZpcmVmb3ggZG9lc24ndCBhdXRvLXNjcm9sbCB0byB0aGUgbGVmdCBvbiBibHVyIGxpa2Ugb3RoZXIgYnJvd3NlcnNcbiAgICAgICAgbGV0IGRhdGFJdGVtO1xuICAgICAgICBsZXQgdGV4dDtcbiAgICAgICAgaWYgKGZvY3VzZWQgIT09IC0xKSB7XG4gICAgICAgICAgICBkYXRhSXRlbSA9IHRoaXMuZGF0YVNlcnZpY2UuaXRlbUF0KGZvY3VzZWQpO1xuICAgICAgICAgICAgdGV4dCA9IGdldHRlciQxKGRhdGFJdGVtLCB0aGlzLnZhbHVlRmllbGQpIHx8IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0ZXh0ID0gdGhpcy5zZWFyY2hiYXIudmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXhhY3RNYXRjaCA9IHRleHQgPT09IHRoaXMuc2VhcmNoYmFyLnZhbHVlO1xuICAgICAgICBjb25zdCBpbnNlbnNpdGl2ZU1hdGNoID0gdGV4dC50b0xvd2VyQ2FzZSgpID09PSB0aGlzLnNlYXJjaGJhci52YWx1ZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBpZiAoIWV4YWN0TWF0Y2ggJiYgaW5zZW5zaXRpdmVNYXRjaCkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLnJlc2V0U2VsZWN0aW9uKFtdKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzRm9jdXNlZCA9IGZhbHNlO1xuICAgICAgICBjb25zdCB2YWx1ZUhhc0NoYW5nZWQgPSB0aGlzLnZhbHVlICE9PSB0aGlzLnRleHQ7XG4gICAgICAgIGNvbnN0IHJ1bkluWm9uZSA9IGhhc09ic2VydmVycyh0aGlzLm9uQmx1cikgfHwgaGFzT2JzZXJ2ZXJzKHRoaXMuY2xvc2UpIHx8IGlzVW50b3VjaGVkKHRoaXMud3JhcHBlcikgfHwgdmFsdWVIYXNDaGFuZ2VkO1xuICAgICAgICBpZiAocnVuSW5ab25lKSB7XG4gICAgICAgICAgICB0aGlzLl96b25lLnJ1bigoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlSGFzQ2hhbmdlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZSh0aGlzLnNlYXJjaGJhci52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMub25CbHVyLmVtaXQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9uVG91Y2hlZENhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVQb3B1cChmYWxzZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlUG9wdXAoZmFsc2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBwYWdlQ2hhbmdlKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IHZpcnR1YWwgPSB0aGlzLnZpcnR1YWw7XG4gICAgICAgIHZpcnR1YWwuc2tpcCA9IGV2ZW50LnNraXA7XG4gICAgfVxuICAgIGNoYW5nZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnRvZ2dsZVBvcHVwKGZhbHNlKTtcbiAgICAgICAgdGhpcy52YWx1ZUNoYW5nZVN1YmplY3QubmV4dCh2YWx1ZSk7XG4gICAgfVxuICAgIHN1YnNjcmliZUV2ZW50cygpIHtcbiAgICAgICAgaWYgKCFpc0RvY3VtZW50QXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlU3Vic2NyaXB0aW9uID0gdGhpcy52YWx1ZUNoYW5nZVN1YmplY3RcbiAgICAgICAgICAgIC5zdWJzY3JpYmUodmFsdWUgPT4ge1xuICAgICAgICAgICAgY29uc3QgaGFzQ2hhbmdlID0gdGhpcy52YWx1ZSAhPT0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLnRleHQgPSB2YWx1ZTtcbiAgICAgICAgICAgIC8vIGVtaXQgY2hhbmdlIGFmdGVyIGFzc2lnbmluZyBgdGhpcy52YWx1ZWAgPT4gYWxsb3dzIHRoZSB1c2VyIHRvIG1vZGlmeSB0aGUgY29tcG9uZW50IHZhbHVlIG9uIGB2YWx1ZUNoYW5nZWBcbiAgICAgICAgICAgIGlmIChoYXNDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXRDaGFuZ2UodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jaGFuZ2VTdWJzY3JpcHRpb24gPSB0aGlzLnNlbGVjdGlvblNlcnZpY2Uub25DaGFuZ2Uuc3Vic2NyaWJlKHRoaXMuaGFuZGxlSXRlbUNoYW5nZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5mb2N1c1N1YnNjcmlwdGlvbiA9IHRoaXMuc2VsZWN0aW9uU2VydmljZS5vbkZvY3VzLnN1YnNjcmliZSh0aGlzLmhhbmRsZUl0ZW1Gb2N1cy5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5uYXZpZ2F0aW9uU3Vic2NyaXB0aW9uID0gbWVyZ2UodGhpcy5uYXZpZ2F0aW9uU2VydmljZS51cCwgdGhpcy5uYXZpZ2F0aW9uU2VydmljZS5kb3duKS5zdWJzY3JpYmUoKGV2ZW50KSA9PiB0aGlzLm5hdmlnYXRlKGV2ZW50LmluZGV4KSk7XG4gICAgICAgIHRoaXMuY2xvc2VTdWJzY3JpcHRpb24gPSB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLmNsb3NlLnN1YnNjcmliZSgoKSA9PiB0aGlzLnRvZ2dsZVBvcHVwKGZhbHNlKSk7XG4gICAgICAgIHRoaXMuZW50ZXJTdWJzY3JpcHRpb24gPSB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLmVudGVyLnN1YnNjcmliZSh0aGlzLmhhbmRsZUVudGVyLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmVzY1N1YnNjcmlwdGlvbiA9IHRoaXMubmF2aWdhdGlvblNlcnZpY2UuZXNjLnN1YnNjcmliZSh0aGlzLmhhbmRsZUVzY2FwZS5iaW5kKHRoaXMpKTtcbiAgICB9XG4gICAgc3Vic2NyaWJlVG91Y2hFdmVudHMoKSB7XG4gICAgICAgIGlmICghaXNEb2N1bWVudEF2YWlsYWJsZSgpIHx8ICF0aGlzLnRvdWNoRW5hYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4gXG4gICAgICAgIC8vIFJvbGwgdXAgQXV0b0NvbXBsZXRlIG9uIGlPUyB3aGVuIHRhcHBlZCBvdXRzaWRlXG4gICAgICAgIHRoaXMudG91Y2hzdGFydERpc3Bvc2VIYW5kbGVyID0gdGhpcy5yZW5kZXJlci5saXN0ZW4oZG9jdW1lbnQsICd0b3VjaHN0YXJ0JywgKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNGb2N1c2VkICYmICFpbkRyb3BEb3duKHRoaXMuaG9zdEVsZW1lbnQsIHRhcmdldCwgdGhpcy5wb3B1cFJlZikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl96b25lLnJ1bigoKSA9PiB0aGlzLmJsdXIoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdW5zdWJzY3JpYmVFdmVudHMoKSB7XG4gICAgICAgIGlmICghaXNEb2N1bWVudEF2YWlsYWJsZSgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jaGFuZ2VTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgdGhpcy5uYXZpZ2F0aW9uU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIHRoaXMuY2xvc2VTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgdGhpcy5lbnRlclN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB0aGlzLmVzY1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIHRoaXMuZm9jdXNTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgaWYgKHRoaXMudG91Y2hzdGFydERpc3Bvc2VIYW5kbGVyKSB7XG4gICAgICAgICAgICB0aGlzLnRvdWNoc3RhcnREaXNwb3NlSGFuZGxlcigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZUl0ZW1DaGFuZ2UoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSBldmVudC5pbmRpY2VzLmxlbmd0aCA/IGV2ZW50LmluZGljZXNbMF0gOiB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5yZXNldFNlbGVjdGlvbihbLTFdKTtcbiAgICAgICAgaWYgKCFpc1ByZXNlbnQoaW5kZXgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHRleHQgPSBnZXR0ZXIkMSh0aGlzLmRhdGFTZXJ2aWNlLml0ZW1BdChpbmRleCksIHRoaXMudmFsdWVGaWVsZCk7XG4gICAgICAgIHRoaXMuY2hhbmdlKHRleHQpO1xuICAgIH1cbiAgICBoYW5kbGVJdGVtRm9jdXMoX2V2ZW50KSB7XG4gICAgICAgIGNvbnN0IGZvY3VzZWQgPSB0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZDtcbiAgICAgICAgY29uc3Qgc2hvdWxkU3VnZ2VzdCA9IEJvb2xlYW4odGhpcy5zdWdnZXN0ICYmIHRoaXMuZGF0YSAmJiB0aGlzLmRhdGEubGVuZ3RoICYmIGZvY3VzZWQgPj0gMCk7XG4gICAgICAgIGlmIChzaG91bGRTdWdnZXN0KSB7XG4gICAgICAgICAgICB0aGlzLnN1Z2dlc3RlZFRleHQgPSBnZXR0ZXIkMSh0aGlzLmRhdGFTZXJ2aWNlLml0ZW1BdChmb2N1c2VkKSwgdGhpcy52YWx1ZUZpZWxkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjcmVhdGVQb3B1cCgpIHtcbiAgICAgICAgaWYgKHRoaXMudmlydHVhbCkge1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsLnNraXAgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhvcml6b250YWxBbGlnbiA9IHRoaXMuZGlyZWN0aW9uID09PSBcInJ0bFwiID8gXCJyaWdodFwiIDogXCJsZWZ0XCI7XG4gICAgICAgIGNvbnN0IGFuY2hvclBvc2l0aW9uID0geyBob3Jpem9udGFsOiBob3Jpem9udGFsQWxpZ24sIHZlcnRpY2FsOiBcImJvdHRvbVwiIH07XG4gICAgICAgIGNvbnN0IHBvcHVwUG9zaXRpb24gPSB7IGhvcml6b250YWw6IGhvcml6b250YWxBbGlnbiwgdmVydGljYWw6IFwidG9wXCIgfTtcbiAgICAgICAgdGhpcy5wb3B1cFJlZiA9IHRoaXMucG9wdXBTZXJ2aWNlLm9wZW4oe1xuICAgICAgICAgICAgYW5jaG9yOiB0aGlzLndyYXBwZXIsXG4gICAgICAgICAgICBhbmltYXRlOiB0aGlzLnBvcHVwU2V0dGluZ3MuYW5pbWF0ZSxcbiAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmFwcGVuZFRvLFxuICAgICAgICAgICAgY29udGVudDogdGhpcy5wb3B1cFRlbXBsYXRlLFxuICAgICAgICAgICAgcG9wdXBDbGFzczogdGhpcy5saXN0Q29udGFpbmVyQ2xhc3NlcyxcbiAgICAgICAgICAgIHBvc2l0aW9uTW9kZTogJ2Fic29sdXRlJyxcbiAgICAgICAgICAgIHBvcHVwQWxpZ246IHBvcHVwUG9zaXRpb24sXG4gICAgICAgICAgICBhbmNob3JBbGlnbjogYW5jaG9yUG9zaXRpb25cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHBvcHVwV3JhcHBlciA9IHRoaXMucG9wdXBSZWYucG9wdXBFbGVtZW50O1xuICAgICAgICBjb25zdCB7IG1pbiwgbWF4IH0gPSB0aGlzLndpZHRoO1xuICAgICAgICBwb3B1cFdyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5wb3B1cE1vdXNlRG93bkhhbmRsZXIpO1xuICAgICAgICBwb3B1cFdyYXBwZXIuc3R5bGUubWluV2lkdGggPSBtaW47XG4gICAgICAgIHBvcHVwV3JhcHBlci5zdHlsZS53aWR0aCA9IG1heDtcbiAgICAgICAgcG9wdXBXcmFwcGVyLnN0eWxlLmhlaWdodCA9IHRoaXMuaGVpZ2h0O1xuICAgICAgICBwb3B1cFdyYXBwZXIuc2V0QXR0cmlidXRlKFwiZGlyXCIsIHRoaXMuZGlyZWN0aW9uKTtcbiAgICAgICAgdGhpcy5wb3B1cFJlZi5wb3B1cE9wZW4uc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcbiAgICAgICAgICAgIHRoaXMub3B0aW9uc0xpc3Quc2Nyb2xsVG9JdGVtKHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1c2VkKTtcbiAgICAgICAgICAgIHRoaXMub3BlbmVkLmVtaXQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucG9wdXBSZWYucG9wdXBDbG9zZS5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZWQuZW1pdCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wb3B1cFJlZi5wb3B1cEFuY2hvclZpZXdwb3J0TGVhdmUuc3Vic2NyaWJlKCgpID0+IHRoaXMudG9nZ2xlUG9wdXAoZmFsc2UpKTtcbiAgICB9XG4gICAgZGVzdHJveVBvcHVwKCkge1xuICAgICAgICBpZiAodGhpcy5wb3B1cFJlZikge1xuICAgICAgICAgICAgdGhpcy5wb3B1cFJlZi5wb3B1cEVsZW1lbnRcbiAgICAgICAgICAgICAgICAucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5wb3B1cE1vdXNlRG93bkhhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5wb3B1cFJlZi5jbG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5wb3B1cFJlZiA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX3RvZ2dsZShvcGVuKSB7XG4gICAgICAgIHRoaXMuX29wZW4gPSBvcGVuO1xuICAgICAgICB0aGlzLmRlc3Ryb3lQb3B1cCgpO1xuICAgICAgICBpZiAodGhpcy5fb3Blbikge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVQb3B1cCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRyaWdnZXJQb3B1cEV2ZW50cyhvcGVuKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50QXJncyA9IG5ldyBQcmV2ZW50YWJsZUV2ZW50KCk7XG4gICAgICAgIGlmIChvcGVuKSB7XG4gICAgICAgICAgICB0aGlzLm9wZW4uZW1pdChldmVudEFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jbG9zZS5lbWl0KGV2ZW50QXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV2ZW50QXJncy5pc0RlZmF1bHRQcmV2ZW50ZWQoKTtcbiAgICB9XG4gICAgZmlyc3RGb2N1c2FibGVJbmRleChpbmRleCkge1xuICAgICAgICBjb25zdCBtYXhJbmRleCA9IHRoaXMuZGF0YS5sZW5ndGggLSAxO1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZEl0ZW1zU2VydmljZS5pc0luZGV4RGlzYWJsZWQoaW5kZXgpKSB7XG4gICAgICAgICAgICByZXR1cm4gKGluZGV4IDwgbWF4SW5kZXgpID8gdGhpcy5maXJzdEZvY3VzYWJsZUluZGV4KGluZGV4ICsgMSkgOiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmluZEluZGV4UHJlZGljYXRlKHRleHQpIHtcbiAgICAgICAgaWYgKHRoaXMuZGF0YVNlcnZpY2UuZ3JvdXBlZCkge1xuICAgICAgICAgICAgcmV0dXJuIChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGl0ZW1UZXh0ID0gZ2V0dGVyJDEoaXRlbS52YWx1ZSwgdGhpcy52YWx1ZUZpZWxkKTtcbiAgICAgICAgICAgICAgICBpdGVtVGV4dCA9ICFpc1ByZXNlbnQoaXRlbVRleHQpID8gXCJcIiA6IGl0ZW1UZXh0LnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbVRleHQuc3RhcnRzV2l0aCh0ZXh0LnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBpdGVtVGV4dCA9IGdldHRlciQxKGl0ZW0sIHRoaXMudmFsdWVGaWVsZCk7XG4gICAgICAgICAgICAgICAgaXRlbVRleHQgPSAhaXNQcmVzZW50KGl0ZW1UZXh0KSA/IFwiXCIgOiBpdGVtVGV4dC50b1N0cmluZygpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1UZXh0LnN0YXJ0c1dpdGgodGV4dC50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0TWVzc2FnZXMoKSB7XG4gICAgICAgIHRoaXMuX3pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubWVzc2FnZXNUaW1lb3V0KTtcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZXNUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5ub0RhdGFUZXh0ID0gdGhpcy5sb2NhbGl6YXRpb24uZ2V0KCdub0RhdGFUZXh0Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn07XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgQXV0b0NvbXBsZXRlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJoaWdobGlnaHRGaXJzdFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgQXV0b0NvbXBsZXRlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJmb2N1c2FibGVJZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pXG5dLCBBdXRvQ29tcGxldGVDb21wb25lbnQucHJvdG90eXBlLCBcImRhdGFcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbU3RyaW5nXSlcbl0sIEF1dG9Db21wbGV0ZUNvbXBvbmVudC5wcm90b3R5cGUsIFwidmFsdWVcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBBdXRvQ29tcGxldGVDb21wb25lbnQucHJvdG90eXBlLCBcInZhbHVlRmllbGRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIEF1dG9Db21wbGV0ZUNvbXBvbmVudC5wcm90b3R5cGUsIFwicGxhY2Vob2xkZXJcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKVxuXSwgQXV0b0NvbXBsZXRlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJwb3B1cFNldHRpbmdzXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKVxuXSwgQXV0b0NvbXBsZXRlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJsaXN0SGVpZ2h0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgQXV0b0NvbXBsZXRlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJsb2FkaW5nXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgQXV0b0NvbXBsZXRlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJjbGVhckJ1dHRvblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIEF1dG9Db21wbGV0ZUNvbXBvbmVudC5wcm90b3R5cGUsIFwic3VnZ2VzdFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIEF1dG9Db21wbGV0ZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiZGlzYWJsZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZ1bmN0aW9uKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0Z1bmN0aW9uXSlcbl0sIEF1dG9Db21wbGV0ZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiaXRlbURpc2FibGVkXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIEF1dG9Db21wbGV0ZUNvbXBvbmVudC5wcm90b3R5cGUsIFwicmVhZG9ubHlcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlcilcbl0sIEF1dG9Db21wbGV0ZUNvbXBvbmVudC5wcm90b3R5cGUsIFwidGFiaW5kZXhcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KFwidGFiSW5kZXhcIiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlciksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtOdW1iZXJdKVxuXSwgQXV0b0NvbXBsZXRlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0YWJJbmRleFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBBdXRvQ29tcGxldGVDb21wb25lbnQucHJvdG90eXBlLCBcImZpbHRlcmFibGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKVxuXSwgQXV0b0NvbXBsZXRlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ2aXJ0dWFsXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIEF1dG9Db21wbGV0ZUNvbXBvbmVudC5wcm90b3R5cGUsIFwidmFsdWVDaGFuZ2VcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBBdXRvQ29tcGxldGVDb21wb25lbnQucHJvdG90eXBlLCBcImZpbHRlckNoYW5nZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIEF1dG9Db21wbGV0ZUNvbXBvbmVudC5wcm90b3R5cGUsIFwib3BlblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIEF1dG9Db21wbGV0ZUNvbXBvbmVudC5wcm90b3R5cGUsIFwib3BlbmVkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgQXV0b0NvbXBsZXRlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJjbG9zZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIEF1dG9Db21wbGV0ZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiY2xvc2VkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoJ2ZvY3VzJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIEF1dG9Db21wbGV0ZUNvbXBvbmVudC5wcm90b3R5cGUsIFwib25Gb2N1c1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCdibHVyJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIEF1dG9Db21wbGV0ZUNvbXBvbmVudC5wcm90b3R5cGUsIFwib25CbHVyXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBDb250ZW50Q2hpbGQoSXRlbVRlbXBsYXRlRGlyZWN0aXZlLCB7IHN0YXRpYzogZmFsc2UgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEl0ZW1UZW1wbGF0ZURpcmVjdGl2ZSlcbl0sIEF1dG9Db21wbGV0ZUNvbXBvbmVudC5wcm90b3R5cGUsIFwidGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIENvbnRlbnRDaGlsZChIZWFkZXJUZW1wbGF0ZURpcmVjdGl2ZSwgeyBzdGF0aWM6IGZhbHNlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBIZWFkZXJUZW1wbGF0ZURpcmVjdGl2ZSlcbl0sIEF1dG9Db21wbGV0ZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiaGVhZGVyVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIENvbnRlbnRDaGlsZChGb290ZXJUZW1wbGF0ZURpcmVjdGl2ZSwgeyBzdGF0aWM6IGZhbHNlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBGb290ZXJUZW1wbGF0ZURpcmVjdGl2ZSlcbl0sIEF1dG9Db21wbGV0ZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiZm9vdGVyVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIENvbnRlbnRDaGlsZChOb0RhdGFUZW1wbGF0ZURpcmVjdGl2ZSwgeyBzdGF0aWM6IGZhbHNlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOb0RhdGFUZW1wbGF0ZURpcmVjdGl2ZSlcbl0sIEF1dG9Db21wbGV0ZUNvbXBvbmVudC5wcm90b3R5cGUsIFwibm9EYXRhVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIENvbnRlbnRDaGlsZChHcm91cFRlbXBsYXRlRGlyZWN0aXZlLCB7IHN0YXRpYzogZmFsc2UgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEdyb3VwVGVtcGxhdGVEaXJlY3RpdmUpXG5dLCBBdXRvQ29tcGxldGVDb21wb25lbnQucHJvdG90eXBlLCBcImdyb3VwVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIENvbnRlbnRDaGlsZChGaXhlZEdyb3VwVGVtcGxhdGVEaXJlY3RpdmUsIHsgc3RhdGljOiBmYWxzZSB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRml4ZWRHcm91cFRlbXBsYXRlRGlyZWN0aXZlKVxuXSwgQXV0b0NvbXBsZXRlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJmaXhlZEdyb3VwVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIFZpZXdDaGlsZCgnY29udGFpbmVyJywgeyByZWFkOiBWaWV3Q29udGFpbmVyUmVmLCBzdGF0aWM6IHRydWUgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFZpZXdDb250YWluZXJSZWYpXG5dLCBBdXRvQ29tcGxldGVDb21wb25lbnQucHJvdG90eXBlLCBcImNvbnRhaW5lclwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgVmlld0NoaWxkKCdwb3B1cFRlbXBsYXRlJywgeyBzdGF0aWM6IHRydWUgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFRlbXBsYXRlUmVmKVxuXSwgQXV0b0NvbXBsZXRlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJwb3B1cFRlbXBsYXRlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBWaWV3Q2hpbGQoU2VhcmNoQmFyQ29tcG9uZW50LCB7IHN0YXRpYzogdHJ1ZSB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU2VhcmNoQmFyQ29tcG9uZW50KVxuXSwgQXV0b0NvbXBsZXRlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzZWFyY2hiYXJcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIFZpZXdDaGlsZCgnb3B0aW9uc0xpc3QnLCB7IHN0YXRpYzogZmFsc2UgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIExpc3RDb21wb25lbnQpXG5dLCBBdXRvQ29tcGxldGVDb21wb25lbnQucHJvdG90eXBlLCBcIm9wdGlvbnNMaXN0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay13aWRnZXQnKSxcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay1hdXRvY29tcGxldGUnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIEF1dG9Db21wbGV0ZUNvbXBvbmVudC5wcm90b3R5cGUsIFwid2lkZ2V0Q2xhc3Nlc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmstc3RhdGUtZGlzYWJsZWQnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgQXV0b0NvbXBsZXRlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpc0Rpc2FibGVkXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2F0dHIuZGlyJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgQXV0b0NvbXBsZXRlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXJcIiwgbnVsbCk7XG5BdXRvQ29tcGxldGVDb21wb25lbnQgPSBBdXRvQ29tcGxldGVDb21wb25lbnRfMSA9IF9fZGVjb3JhdGUoW1xuICAgIENvbXBvbmVudCh7XG4gICAgICAgIGV4cG9ydEFzOiAna2VuZG9BdXRvQ29tcGxldGUnLFxuICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgIEFVVE9DT01QTEVURV9WQUxVRV9BQ0NFU1NPUixcbiAgICAgICAgICAgIERhdGFTZXJ2aWNlLFxuICAgICAgICAgICAgU2VsZWN0aW9uU2VydmljZSxcbiAgICAgICAgICAgIE5hdmlnYXRpb25TZXJ2aWNlLFxuICAgICAgICAgICAgRGlzYWJsZWRJdGVtc1NlcnZpY2UsXG4gICAgICAgICAgICBMb2NhbGl6YXRpb25TZXJ2aWNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHByb3ZpZGU6IEwxME5fUFJFRklYLFxuICAgICAgICAgICAgICAgIHVzZVZhbHVlOiAna2VuZG8uYXV0b2NvbXBsZXRlJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwcm92aWRlOiBGaWx0ZXJhYmxlQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IEF1dG9Db21wbGV0ZUNvbXBvbmVudF8xKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwcm92aWRlOiBLZW5kb0lucHV0LFxuICAgICAgICAgICAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IEF1dG9Db21wbGV0ZUNvbXBvbmVudF8xKVxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBzZWxlY3RvcjogJ2tlbmRvLWF1dG9jb21wbGV0ZScsXG4gICAgICAgIHRlbXBsYXRlOiBgXG4gICAgICAgIDxuZy1jb250YWluZXIga2VuZG9BdXRvQ29tcGxldGVMb2NhbGl6ZWRNZXNzYWdlc1xuICAgICAgICAgICAgaTE4bi1ub0RhdGFUZXh0PVwia2VuZG8uYXV0b2NvbXBsZXRlLm5vRGF0YVRleHR8VGhlIHRleHQgZGlzcGxheWVkIGluIHRoZSBwb3B1cCB3aGVuIHRoZXJlIGFyZSBubyBpdGVtc1wiXG4gICAgICAgICAgICBub0RhdGFUZXh0PVwiTk8gREFUQSBGT1VORFwiXG5cbiAgICAgICAgICAgIGkxOG4tY2xlYXJUaXRsZT1cImtlbmRvLmF1dG9jb21wbGV0ZS5jbGVhclRpdGxlfFRoZSB0aXRsZSBvZiB0aGUgY2xlYXIgYnV0dG9uXCJcbiAgICAgICAgICAgIGNsZWFyVGl0bGU9XCJjbGVhclwiXG4gICAgICAgID5cbiAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgIDxrZW5kby1zZWFyY2hiYXIgI3NlYXJjaGJhclxuICAgICAgICAgICAgW3JvbGVdPVwiJ2NvbWJvYm94J1wiXG4gICAgICAgICAgICBbaWRdPVwiZm9jdXNhYmxlSWRcIlxuICAgICAgICAgICAgW2xpc3RJZF09XCJsaXN0Qm94SWRcIlxuICAgICAgICAgICAgW2FjdGl2ZURlc2NlbmRhbnRdPVwiYWN0aXZlRGVzY2VuZGFudFwiXG4gICAgICAgICAgICBbbm9EYXRhTGFiZWxdPVwibm9EYXRhTGFiZWxcIlxuICAgICAgICAgICAgW3VzZXJJbnB1dF09XCJ0ZXh0XCJcbiAgICAgICAgICAgIFtzdWdnZXN0ZWRUZXh0XT1cInN1Z2dlc3Rpb25cIlxuICAgICAgICAgICAgW2Rpc2FibGVkXT1cImRpc2FibGVkXCJcbiAgICAgICAgICAgIFtyZWFkb25seV09XCJyZWFkb25seVwiXG4gICAgICAgICAgICBbdGFiSW5kZXhdPVwidGFiSW5kZXhcIlxuICAgICAgICAgICAgW3BvcHVwT3Blbl09XCJpc09wZW5cIlxuICAgICAgICAgICAgW3BsYWNlaG9sZGVyXT1cInBsYWNlaG9sZGVyXCJcbiAgICAgICAgICAgIChvbk5hdmlnYXRlKT1cImhhbmRsZU5hdmlnYXRlKCRldmVudClcIlxuICAgICAgICAgICAgKHZhbHVlQ2hhbmdlKT1cInNlYXJjaEJhckNoYW5nZSgkZXZlbnQpXCJcbiAgICAgICAgICAgIChvbkJsdXIpPVwiaGFuZGxlQmx1cigpXCJcbiAgICAgICAgICAgIChvbkZvY3VzKT1cImhhbmRsZUZvY3VzKClcIlxuICAgICAgICA+PC9rZW5kby1zZWFyY2hiYXI+XG4gICAgICAgIDxzcGFuXG4gICAgICAgICAgICAqbmdJZj1cIiFsb2FkaW5nICYmICFyZWFkb25seSAmJiAoY2xlYXJCdXR0b24gJiYgdGV4dD8ubGVuZ3RoKVwiXG4gICAgICAgICAgICBjbGFzcz1cImstaWNvbiBrLWNsZWFyLXZhbHVlIGstaS1jbG9zZVwiXG4gICAgICAgICAgICBbc3R5bGUudmlzaWJpbGl0eV09XCJjbGVhckJ1dHRvblZpc2libGl0eVwiXG4gICAgICAgICAgICBbYXR0ci50aXRsZV09XCJjbGVhclRpdGxlXCJcbiAgICAgICAgICAgIHJvbGU9XCJidXR0b25cIlxuICAgICAgICAgICAgdGFiaW5kZXg9XCItMVwiXG4gICAgICAgICAgICAoY2xpY2spPVwiY2xlYXJWYWx1ZSgkZXZlbnQpXCJcbiAgICAgICAgICAgIChtb3VzZWRvd24pPVwiJGV2ZW50LnByZXZlbnREZWZhdWx0KClcIlxuICAgICAgICA+XG48L3NwYW4+XG4gICAgICAgIDxzcGFuICpuZ0lmPVwibG9hZGluZ1wiIGNsYXNzPVwiay1pY29uIGstaS1sb2FkaW5nXCI+PC9zcGFuPlxuICAgICAgICA8bmctdGVtcGxhdGUgI3BvcHVwVGVtcGxhdGU+XG4gICAgICAgICAgICA8IS0taGVhZGVyIHRlbXBsYXRlLS0+XG4gICAgICAgICAgICA8bmctdGVtcGxhdGUgKm5nSWY9XCJoZWFkZXJUZW1wbGF0ZVwiXG4gICAgICAgICAgICAgICAgW3RlbXBsYXRlQ29udGV4dF09XCJ7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUmVmOiBoZWFkZXJUZW1wbGF0ZS50ZW1wbGF0ZVJlZlxuICAgICAgICAgICAgICAgIH1cIj5cbiAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICA8IS0tbGlzdC0tPlxuICAgICAgICAgICAgPGtlbmRvLWxpc3RcbiAgICAgICAgICAgICAgICAjb3B0aW9uc0xpc3RcbiAgICAgICAgICAgICAgICBbaWRdPVwibGlzdEJveElkXCJcbiAgICAgICAgICAgICAgICBbb3B0aW9uUHJlZml4XT1cIm9wdGlvblByZWZpeFwiXG4gICAgICAgICAgICAgICAgW2RhdGFdPVwiZGF0YVwiXG4gICAgICAgICAgICAgICAgW3RleHRGaWVsZF09XCJ2YWx1ZUZpZWxkXCJcbiAgICAgICAgICAgICAgICBbdmFsdWVGaWVsZF09XCJ2YWx1ZUZpZWxkXCJcbiAgICAgICAgICAgICAgICBbdGVtcGxhdGVdPVwidGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgIFtncm91cFRlbXBsYXRlXT1cImdyb3VwVGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgIFtmaXhlZEdyb3VwVGVtcGxhdGVdPVwiZml4ZWRHcm91cFRlbXBsYXRlXCJcbiAgICAgICAgICAgICAgICBbaGVpZ2h0XT1cImxpc3RIZWlnaHRcIlxuICAgICAgICAgICAgICAgIFtzaG93XT1cImlzT3BlblwiXG4gICAgICAgICAgICAgICAgW3ZpcnR1YWxdPVwidmlydHVhbFwiXG4gICAgICAgICAgICAgICAgKHBhZ2VDaGFuZ2UpPVwicGFnZUNoYW5nZSgkZXZlbnQpXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgIDwva2VuZG8tbGlzdD5cbiAgICAgICAgICAgIDwhLS1uby1kYXRhIHRlbXBsYXRlLS0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiay1ub2RhdGFcIiAqbmdJZj1cImRhdGEubGVuZ3RoID09PSAwXCI+XG4gICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlIFtuZ0lmXT1cIm5vRGF0YVRlbXBsYXRlXCJcbiAgICAgICAgICAgICAgICAgICAgW3RlbXBsYXRlQ29udGV4dF09XCJ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVJlZjogbm9EYXRhVGVtcGxhdGU/LnRlbXBsYXRlUmVmXG4gICAgICAgICAgICAgICAgICAgIH1cIj5cbiAgICAgICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdJZl09XCIhbm9EYXRhVGVtcGxhdGVcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdj57eyBub0RhdGFUZXh0IH19PC9kaXY+XG4gICAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPCEtLWZvb3RlciB0ZW1wbGF0ZS0tPlxuICAgICAgICAgICAgPG5nLXRlbXBsYXRlICpuZ0lmPVwiZm9vdGVyVGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgIFt0ZW1wbGF0ZUNvbnRleHRdPVwie1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVJlZjogZm9vdGVyVGVtcGxhdGUudGVtcGxhdGVSZWZcbiAgICAgICAgICAgICAgICB9XCI+XG4gICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICA8bmctdGVtcGxhdGUgW25nSWZdPVwiaXNPcGVuXCI+XG4gICAgICAgICAgICA8a2VuZG8tcmVzaXplLXNlbnNvciAocmVzaXplKT1cIm9uUmVzaXplKClcIj48L2tlbmRvLXJlc2l6ZS1zZW5zb3I+XG4gICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgIDxuZy1jb250YWluZXIgI2NvbnRhaW5lcj48L25nLWNvbnRhaW5lcj5cbiAgYFxuICAgIH0pLFxuICAgIF9fcGFyYW0oMTAsIE9wdGlvbmFsKCkpLCBfX3BhcmFtKDEwLCBJbmplY3QoVE9VQ0hfRU5BQkxFRCkpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTG9jYWxpemF0aW9uU2VydmljZSxcbiAgICAgICAgRGF0YVNlcnZpY2UsXG4gICAgICAgIFBvcHVwU2VydmljZSxcbiAgICAgICAgU2VsZWN0aW9uU2VydmljZSxcbiAgICAgICAgTmF2aWdhdGlvblNlcnZpY2UsXG4gICAgICAgIERpc2FibGVkSXRlbXNTZXJ2aWNlLFxuICAgICAgICBOZ1pvbmUsXG4gICAgICAgIENoYW5nZURldGVjdG9yUmVmLFxuICAgICAgICBSZW5kZXJlcjIsXG4gICAgICAgIEVsZW1lbnRSZWYsIEJvb2xlYW5dKVxuXSwgQXV0b0NvbXBsZXRlQ29tcG9uZW50KTtcblxuLyogdHNsaW50OmRpc2FibGU6dmFyaWFibGUtbmFtZSAqL1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IE11bHRpc2VsZWN0TWVzc2FnZXMgPSB7XG4gICAgJ2FycmF5JzogJ0V4cGVjdGVkIHZhbHVlcyBvZiBhcnJheSB0eXBlLiBTZWUgaHR0cDovL3d3dy50ZWxlcmlrLmNvbS9rZW5kby1hbmd1bGFyLXVpL2NvbXBvbmVudHMvZHJvcGRvd25zL211bHRpc2VsZWN0LyN2YWx1ZS1zZWxlY3Rpb24nLFxuICAgICdvYmplY3QnOiAnRXhwZWN0ZWQgdmFsdWVzIG9mIE9iamVjdCB0eXBlLiBTZWUgaHR0cDovL3d3dy50ZWxlcmlrLmNvbS9rZW5kby1hbmd1bGFyLXVpL2NvbXBvbmVudHMvZHJvcGRvd25zL211bHRpc2VsZWN0LyN2YWx1ZS1zZWxlY3Rpb24nLFxuICAgICdwcmltaXRpdmUnOiAnRXhwZWN0ZWQgdmFsdWVzIG9mIHByaW1pdGl2ZSB0eXBlLiBTZWUgaHR0cDovL3d3dy50ZWxlcmlrLmNvbS9rZW5kby1hbmd1bGFyLXVpL2NvbXBvbmVudHMvZHJvcGRvd25zL211bHRpc2VsZWN0LyN2YWx1ZS1zZWxlY3Rpb24nLFxuICAgICd0ZXh0QW5kVmFsdWUnOiAnRXhwZWN0ZWQgdGV4dEZpZWxkIGFuZCB2YWx1ZUZpZWxkIG9wdGlvbnMgdG8gYmUgc2V0LiBTZWUgaHR0cDovL3d3dy50ZWxlcmlrLmNvbS9rZW5kby1hbmd1bGFyLXVpL2NvbXBvbmVudHMvZHJvcGRvd25zL211bHRpc2VsZWN0LyN0b2MtYmluZC10by1hcnJheXMtb2YtY29tcGxleC1kYXRhJ1xufTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBNdWx0aVNlbGVjdFRyZWVNZXNzYWdlcyA9IHtcbiAgICAnYXJyYXknOiAnRXhwZWN0ZWQgdmFsdWVzIG9mIGFycmF5IHR5cGUuIFNlZSBodHRwOi8vd3d3LnRlbGVyaWsuY29tL2tlbmRvLWFuZ3VsYXItdWkvY29tcG9uZW50cy9kcm9wZG93bnMvbXVsdGlzZWxlY3R0cmVlLyN2YWx1ZS1zZWxlY3Rpb24nLFxuICAgICdwcmltaXRpdmUnOiAnRXhwZWN0ZWQgdmFsdWVzIG9mIHByaW1pdGl2ZSB0eXBlLiBTZWUgaHR0cDovL3d3dy50ZWxlcmlrLmNvbS9rZW5kby1hbmd1bGFyLXVpL2NvbXBvbmVudHMvZHJvcGRvd25zL211bHRpc2VsZWN0dHJlZS92YWx1ZS1iaW5kaW5nLyN0b2MtcHJpbWl0aXZlLXZhbHVlcycsXG4gICAgJ29iamVjdCc6ICdFeHBlY3RlZCB2YWx1ZXMgb2YgdHlwZSBPYmplY3QuIFNlZSBodHRwOi8vd3d3LnRlbGVyaWsuY29tL2tlbmRvLWFuZ3VsYXItdWkvY29tcG9uZW50cy9kcm9wZG93bnMvbXVsdGlzZWxlY3R0cmVlL3ZhbHVlLWJpbmRpbmcvI3RvYy1vYmplY3QtdmFsdWVzJyxcbiAgICAnZGF0YUl0ZW1zJzogJ0V4cGVjdGVkIGRhdGFJdGVtcyBvZiB0eXBlIE9iamVjdFtdIHRvIGJlIHNldC4gU2VlIGh0dHBzOi8vd3d3LnRlbGVyaWsuY29tL2tlbmRvLWFuZ3VsYXItdWkvY29tcG9uZW50cy9kcm9wZG93bnMvYXBpL011bHRpU2VsZWN0VHJlZUNvbXBvbmVudC8jdG9jLWRhdGFpdGVtcycsXG4gICAgJ2RhdGFJdGVtc0xlbmd0aCc6ICdFeHBlY3RlZCBkYXRhSXRlbXMgbGVuZ3RoIHRvIG1hdGNoIHRoZSBudW1iZXIgb2YgcHJvdmlkZWQgdmFsdWVzLiBTZWUgaHR0cHM6Ly93d3cudGVsZXJpay5jb20va2VuZG8tYW5ndWxhci11aS9jb21wb25lbnRzL2Ryb3Bkb3ducy9hcGkvTXVsdGlTZWxlY3RUcmVlQ29tcG9uZW50LyN0b2MtZGF0YWl0ZW1zJyxcbiAgICAndGV4dEFuZFZhbHVlJzogJ0V4cGVjdGVkIHRleHRGaWVsZCBhbmQgdmFsdWVGaWVsZCBvcHRpb25zIHRvIGJlIHNldC4gU2VlIGh0dHBzOi8vd3d3LnRlbGVyaWsuY29tL2tlbmRvLWFuZ3VsYXItdWkvY29tcG9uZW50cy9kcm9wZG93bnMvbXVsdGlzZWxlY3R0cmVlL3ZhbHVlLWJpbmRpbmcnLFxuICAgICd2YWx1ZURlcHRoJzogJ0V4cGVjdGVkIHZhbHVlRGVwdGggb2YgdHlwZSBudW1iZXJbXSB0byBiZSBzZXQuIFNlZSBodHRwczovL3d3dy50ZWxlcmlrLmNvbS9rZW5kby1hbmd1bGFyLXVpLWRldmVsb3AvY29tcG9uZW50cy9kcm9wZG93bnMvYXBpL011bHRpU2VsZWN0VHJlZUNvbXBvbmVudC8jdG9jLXZhbHVlZGVwdGgnLFxuICAgICd2YWx1ZURlcHRoTGVuZ3RoJzogJ0V4cGVjdGVkIHZhbHVlRGVwdGggbGVuZ3RoIHRvIG1hdGNoIHRoZSBudW1iZXIgb2YgcHJvdmlkZWQgdmFsdWVzLiBTZWUgaHR0cHM6Ly93d3cudGVsZXJpay5jb20va2VuZG8tYW5ndWxhci11aS1kZXZlbG9wL2NvbXBvbmVudHMvZHJvcGRvd25zL2FwaS9NdWx0aVNlbGVjdFRyZWVDb21wb25lbnQvI3RvYy12YWx1ZWRlcHRoJ1xufTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBDb21ib0JveE1lc3NhZ2VzID0ge1xuICAgICdvYmplY3QnOiAnRXhwZWN0ZWQgdmFsdWUgb2YgdHlwZSBPYmplY3QuIFNlZSBodHRwOi8vd3d3LnRlbGVyaWsuY29tL2tlbmRvLWFuZ3VsYXItdWkvY29tcG9uZW50cy9kcm9wZG93bnMvY29tYm9ib3gvI3RvYy12YWx1ZS1zZWxlY3Rpb24nLFxuICAgICdwcmltaXRpdmUnOiAnRXhwZWN0ZWQgdmFsdWUgb2YgcHJpbWl0aXZlIHR5cGUuIFNlZSBodHRwOi8vd3d3LnRlbGVyaWsuY29tL2tlbmRvLWFuZ3VsYXItdWkvY29tcG9uZW50cy9kcm9wZG93bnMvY29tYm9ib3gvI3RvYy12YWx1ZS1zZWxlY3Rpb24nLFxuICAgICd0ZXh0QW5kVmFsdWUnOiAnRXhwZWN0ZWQgdGV4dEZpZWxkIGFuZCB2YWx1ZUZpZWxkIG9wdGlvbnMgdG8gYmUgc2V0LiBTZWUgaHR0cDovL3d3dy50ZWxlcmlrLmNvbS9rZW5kby1hbmd1bGFyLXVpL2NvbXBvbmVudHMvZHJvcGRvd25zL2NvbWJvYm94LyN0b2MtYmluZC10by1hcnJheXMtb2YtY29tcGxleC1kYXRhJyxcbiAgICAnbm9JdGVtSGVpZ2h0JzogJ0V4cGVjdGVkIHZpcnR1YWwuaXRlbUhlaWdodCBvZiB0eXBlIG51bWJlci4nXG59O1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IE11bHRpQ29sdW1uQ29tYm9Cb3hNZXNzYWdlcyA9IHtcbiAgICAnZGF0YSc6ICdQcm92aWRlZCBkYXRhIG11c3QgY29uc2lzdCBvbmx5IG9mIG9iamVjdHMuIFNlZSBodHRwczovL3d3dy50ZWxlcmlrLmNvbS9rZW5kby1hbmd1bGFyLXVpL2NvbXBvbmVudHMvZHJvcGRvd25zL211bHRpY29sdW1uY29tYm9ib3gvZGF0YS1iaW5kaW5nLycsXG4gICAgJ3RleHRBbmRWYWx1ZSc6ICdFeHBlY3RlZCB0ZXh0RmllbGQgYW5kIHZhbHVlRmllbGQgb3B0aW9ucyB0byBiZSBzZXQuIFNlZSBodHRwczovL3d3dy50ZWxlcmlrLmNvbS9rZW5kby1hbmd1bGFyLXVpL2NvbXBvbmVudHMvZHJvcGRvd25zL211bHRpY29sdW1uY29tYm9ib3gvZGF0YS1iaW5kaW5nLyN0b2MtZmllbGRzLWNvbmZpZ3VyYXRpb24nXG59O1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IERyb3BEb3duTGlzdE1lc3NhZ2VzID0ge1xuICAgICdkZWZhdWx0SXRlbSc6ICdkZWZhdWx0SXRlbSBhbmQgZGF0YSBpdGVtcyBtdXN0IGJlIG9mIHNhbWUgdHlwZS4gU2VlIGh0dHA6Ly93d3cudGVsZXJpay5jb20va2VuZG8tYW5ndWxhci11aS9jb21wb25lbnRzL2Ryb3Bkb3ducy9hcGkvRHJvcERvd25MaXN0Q29tcG9uZW50LyN0b2MtZGVmYXVsdGl0ZW0nLFxuICAgICdvYmplY3QnOiAnRXhwZWN0ZWQgdmFsdWUgb2YgdHlwZSBPYmplY3QuIFNlZSBodHRwOi8vd3d3LnRlbGVyaWsuY29tL2tlbmRvLWFuZ3VsYXItdWkvY29tcG9uZW50cy9kcm9wZG93bnMvZHJvcGRvd25saXN0LyN0b2MtdmFsdWUtc2VsZWN0aW9uJyxcbiAgICAncHJpbWl0aXZlJzogJ0V4cGVjdGVkIHZhbHVlIG9mIHByaW1pdGl2ZSB0eXBlLiBTZWUgaHR0cDovL3d3dy50ZWxlcmlrLmNvbS9rZW5kby1hbmd1bGFyLXVpL2NvbXBvbmVudHMvZHJvcGRvd25zL2Ryb3Bkb3dubGlzdC8jdG9jLXZhbHVlLXNlbGVjdGlvbicsXG4gICAgJ3RleHRBbmRWYWx1ZSc6ICdFeHBlY3RlZCB0ZXh0RmllbGQgYW5kIHZhbHVlRmllbGQgb3B0aW9ucyB0byBiZSBzZXQuIFNlZSBodHRwOi8vd3d3LnRlbGVyaWsuY29tL2tlbmRvLWFuZ3VsYXItdWkvY29tcG9uZW50cy9kcm9wZG93bnMvZHJvcGRvd25saXN0LyN0b2MtYmluZC10by1hcnJheXMtb2YtY29tcGxleC1kYXRhJ1xufTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBEcm9wRG93blRyZWVNZXNzYWdlcyA9IHtcbiAgICAncHJpbWl0aXZlJzogJ0V4cGVjdGVkIHZhbHVlIG9mIHByaW1pdGl2ZSB0eXBlLiBTZWUgaHR0cDovL3d3dy50ZWxlcmlrLmNvbS9rZW5kby1hbmd1bGFyLXVpL2NvbXBvbmVudHMvZHJvcGRvd25zL2Ryb3Bkb3dudHJlZS92YWx1ZS1iaW5kaW5nLyN0b2MtcHJpbWl0aXZlLXZhbHVlcycsXG4gICAgJ29iamVjdCc6ICdFeHBlY3RlZCB2YWx1ZSBvZiB0eXBlIE9iamVjdC4gU2VlIGh0dHA6Ly93d3cudGVsZXJpay5jb20va2VuZG8tYW5ndWxhci11aS9jb21wb25lbnRzL2Ryb3Bkb3ducy9kcm9wZG93bnRyZWUvdmFsdWUtYmluZGluZy8jdG9jLW9iamVjdC12YWx1ZXMnLFxuICAgICdkYXRhSXRlbSc6ICdFeHBlY3RlZCBkYXRhSXRlbSBvZiB0eXBlIE9iamVjdCB0byBiZSBzZXQuIFNlZSBodHRwczovL3d3dy50ZWxlcmlrLmNvbS9rZW5kby1hbmd1bGFyLXVpL2NvbXBvbmVudHMvZHJvcGRvd25zL2FwaS9Ecm9wRG93blRyZWVDb21wb25lbnQvI3RvYy1kYXRhaXRlbScsXG4gICAgJ3RleHRBbmRWYWx1ZSc6ICdFeHBlY3RlZCB0ZXh0RmllbGQgYW5kIHZhbHVlRmllbGQgb3B0aW9ucyB0byBiZSBzZXQuIFNlZSBodHRwczovL3d3dy50ZWxlcmlrLmNvbS9rZW5kby1hbmd1bGFyLXVpL2NvbXBvbmVudHMvZHJvcGRvd25zL2Ryb3Bkb3dudHJlZS92YWx1ZS1iaW5kaW5nJyxcbiAgICAndmFsdWVEZXB0aCc6ICdFeHBlY3RlZCB2YWx1ZURlcHRoIHRvIGJlIHNldC4gU2VlIGh0dHBzOi8vd3d3LnRlbGVyaWsuY29tL2tlbmRvLWFuZ3VsYXItdWktZGV2ZWxvcC9jb21wb25lbnRzL2Ryb3Bkb3ducy9hcGkvRHJvcERvd25UcmVlQ29tcG9uZW50LyN0b2MtdmFsdWVkZXB0aCdcbn07XG5cbi8qIHRzbGludDpkaXNhYmxlOm1lbWJlci1vcmRlcmluZyAqL1xudmFyIENvbWJvQm94Q29tcG9uZW50XzE7XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgQ09NQk9CT1hfVkFMVUVfQUNDRVNTT1IgPSB7XG4gICAgbXVsdGk6IHRydWUsXG4gICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXG4gICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gQ29tYm9Cb3hDb21wb25lbnQpXG59O1xuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBbS2VuZG8gVUkgQ29tYm9Cb3ggY29tcG9uZW50IGZvciBBbmd1bGFyXSh7JSBzbHVnIG92ZXJ2aWV3X2NvbWJvYm94ICV9KS5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIF9AQ29tcG9uZW50KHtcbiAqIHNlbGVjdG9yOiAnbXktYXBwJyxcbiAqIHRlbXBsYXRlOiBgXG4gKiAgPGtlbmRvLWNvbWJvYm94IFtkYXRhXT1cImxpc3RJdGVtc1wiPlxuICogIDwva2VuZG8tY29tYm9ib3g+XG4gKiBgXG4gKiB9KVxuICogY2xhc3MgQXBwQ29tcG9uZW50IHtcbiAqICAgcHVibGljIGxpc3RJdGVtczogQXJyYXk8c3RyaW5nPiA9IFtcIkl0ZW0gMVwiLCBcIkl0ZW0gMlwiLCBcIkl0ZW0gM1wiLCBcIkl0ZW0gNFwiXTtcbiAqIH1cbiAqIGBgYFxuICovXG5sZXQgQ29tYm9Cb3hDb21wb25lbnQgPSBDb21ib0JveENvbXBvbmVudF8xID0gY2xhc3MgQ29tYm9Cb3hDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKGxvY2FsaXphdGlvbiwgcG9wdXBTZXJ2aWNlLCBzZWxlY3Rpb25TZXJ2aWNlLCBuYXZpZ2F0aW9uU2VydmljZSwgZGlzYWJsZWRJdGVtc1NlcnZpY2UsIGRhdGFTZXJ2aWNlLCB6b25lLCBjZHIsIHJlbmRlcmVyLCBob3N0RWxlbWVudCwgdG91Y2hFbmFibGVkJCQxKSB7XG4gICAgICAgIHRoaXMubG9jYWxpemF0aW9uID0gbG9jYWxpemF0aW9uO1xuICAgICAgICB0aGlzLnBvcHVwU2VydmljZSA9IHBvcHVwU2VydmljZTtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlID0gc2VsZWN0aW9uU2VydmljZTtcbiAgICAgICAgdGhpcy5uYXZpZ2F0aW9uU2VydmljZSA9IG5hdmlnYXRpb25TZXJ2aWNlO1xuICAgICAgICB0aGlzLmRpc2FibGVkSXRlbXNTZXJ2aWNlID0gZGlzYWJsZWRJdGVtc1NlcnZpY2U7XG4gICAgICAgIHRoaXMuZGF0YVNlcnZpY2UgPSBkYXRhU2VydmljZTtcbiAgICAgICAgdGhpcy56b25lID0gem9uZTtcbiAgICAgICAgdGhpcy5jZHIgPSBjZHI7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5ob3N0RWxlbWVudCA9IGhvc3RFbGVtZW50O1xuICAgICAgICB0aGlzLnRvdWNoRW5hYmxlZCA9IHRvdWNoRW5hYmxlZCQkMTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZCA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGhpZGRlblxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5mb2N1c2FibGVJZCA9IGBrLSR7Z3VpZCQxKCl9YDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyB3aGV0aGVyIHRoZSBDb21ib0JveCBhbGxvd3MgdXNlci1kZWZpbmVkIHZhbHVlcyB0aGF0IGFyZSBub3QgcHJlc2VudCBpbiB0aGUgZGF0YXNldFxuICAgICAgICAgKiAoW21vcmUgaW5mb3JtYXRpb24gYW5kIGV4YW1wbGVzXSh7JSBzbHVnIGN1c3RvbV92YWx1ZXNfY29tYm9ib3ggJX0pKS5cbiAgICAgICAgICogRGVmYXVsdHMgdG8gYGZhbHNlYC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYWxsb3dDdXN0b20gPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgdXNlci1kZWZpbmVkIGNhbGxiYWNrIHdoaWNoIHJldHVybnMgbm9ybWFsaXplZCBjdXN0b20gdmFsdWVzLlxuICAgICAgICAgKiBUeXBpY2FsbHkgdXNlZCB3aGVuIHRoZSBkYXRhIGl0ZW1zIGFyZSBkaWZmZXJlbnQgZnJvbSB0eXBlIGBzdHJpbmdgLlxuICAgICAgICAgKiBAcGFyYW0geyBBbnkgfSB2YWx1ZSAtIFRoZSBjdXN0b20gdmFsdWUgZGVmaW5lZCBieSB0aGUgdXNlci5cbiAgICAgICAgICogQHJldHVybnMgeyBBbnkgfVxuICAgICAgICAgKlxuICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgKiBgYGB0c1xuICAgICAgICAgKiBpbXBvcnQgeyBtYXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG4gICAgICAgICAqXG4gICAgICAgICAqIF9AQ29tcG9uZW50KHtcbiAgICAgICAgICogc2VsZWN0b3I6ICdteS1hcHAnLFxuICAgICAgICAgKiB0ZW1wbGF0ZTogYFxuICAgICAgICAgKiAgIDxrZW5kby1jb21ib2JveFxuICAgICAgICAgKiAgICAgICBbYWxsb3dDdXN0b21dPVwidHJ1ZVwiXG4gICAgICAgICAqICAgICAgIFtkYXRhXT1cImxpc3RJdGVtc1wiXG4gICAgICAgICAqICAgICAgIHRleHRGaWVsZD1cInRleHRcIlxuICAgICAgICAgKiAgICAgICB2YWx1ZUZpZWxkPVwidmFsdWVcIlxuICAgICAgICAgKiAgICAgICBbdmFsdWVOb3JtYWxpemVyXT1cInZhbHVlTm9ybWFsaXplclwiXG4gICAgICAgICAqICAgICAgICh2YWx1ZUNoYW5nZSk9XCJvblZhbHVlQ2hhbmdlKCRldmVudClcIlxuICAgICAgICAgKiAgID5cbiAgICAgICAgICogICA8L2tlbmRvLWNvbWJvYm94PlxuICAgICAgICAgKiBgXG4gICAgICAgICAqIH0pXG4gICAgICAgICAqXG4gICAgICAgICAqIGNsYXNzIEFwcENvbXBvbmVudCB7XG4gICAgICAgICAqICAgcHVibGljIGxpc3RJdGVtczogQXJyYXk8eyB0ZXh0OiBzdHJpbmcsIHZhbHVlOiBudW1iZXIgfT4gPSBbXG4gICAgICAgICAqICAgICAgIHsgdGV4dDogXCJTbWFsbFwiLCB2YWx1ZTogMSB9LFxuICAgICAgICAgKiAgICAgICB7IHRleHQ6IFwiTWVkaXVtXCIsIHZhbHVlOiAyIH0sXG4gICAgICAgICAqICAgICAgIHsgdGV4dDogXCJMYXJnZVwiLCB2YWx1ZTogMyB9XG4gICAgICAgICAqICAgXTtcbiAgICAgICAgICpcbiAgICAgICAgICogICBwdWJsaWMgb25WYWx1ZUNoYW5nZSh2YWx1ZSkge1xuICAgICAgICAgKiAgICAgICBjb25zb2xlLmxvZyhcInZhbHVlQ2hhbmdlIDogXCIsIHZhbHVlKTtcbiAgICAgICAgICogICB9XG4gICAgICAgICAqXG4gICAgICAgICAqICAgcHVibGljIHZhbHVlTm9ybWFsaXplciA9ICh0ZXh0JDogT2JzZXJ2YWJsZTxzdHJpbmc+KSA9PiB0ZXh0JC5waXBlKG1hcCgodGV4dDogc3RyaW5nKSA9PiB7XG4gICAgICAgICAqICAgICAgcmV0dXJuIHsgUHJvZHVjdElEOiBudWxsLCBQcm9kdWN0TmFtZTogdGV4dCB9O1xuICAgICAgICAgKiAgIH0pKTtcbiAgICAgICAgICpcbiAgICAgICAgICogfVxuICAgICAgICAgKiBgYGBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudmFsdWVOb3JtYWxpemVyID0gKHRleHQpID0+IHRleHQucGlwZShtYXAoKHVzZXJJbnB1dCkgPT4gdXNlcklucHV0KSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgaGludCB0aGF0IGlzIGRpc3BsYXllZCB3aGVuIHRoZSBjb21wb25lbnQgaXMgZW1wdHkuXG4gICAgICAgICAqXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBsYWNlaG9sZGVyID0gXCJcIjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgdGhlIGhlaWdodCBvZiB0aGUgc3VnZ2VzdGlvbnMgbGlzdC4gQnkgZGVmYXVsdCwgYGxpc3RIZWlnaHRgIGlzIDIwMHB4LlxuICAgICAgICAgKlxuICAgICAgICAgKiA+IFRoZSBgbGlzdEhlaWdodGAgcHJvcGVydHkgYWZmZWN0cyBvbmx5IHRoZSBsaXN0IG9mIHN1Z2dlc3Rpb25zIGFuZCBub3QgdGhlIHdob2xlIHBvcHVwIGNvbnRhaW5lci5cbiAgICAgICAgICogPiBUbyBzZXQgdGhlIGhlaWdodCBvZiB0aGUgcG9wdXAgY29udGFpbmVyLCB1c2UgYHBvcHVwU2V0dGluZ3MuaGVpZ2h0YC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubGlzdEhlaWdodCA9IDIwMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVuYWJsZXMgdGhlIGF1dG8tY29tcGxldGlvbiBvZiB0aGUgdGV4dCBiYXNlZCBvbiB0aGUgZmlyc3QgZGF0YSBpdGVtLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdWdnZXN0ID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBzZXQgdG8gYHRydWVgLCByZW5kZXJzIGEgYnV0dG9uIG9uIGhvdmVyaW5nIG92ZXIgdGhlIGNvbXBvbmVudC5cbiAgICAgICAgICogQ2xpY2tpbmcgdGhpcyBidXR0b24gcmVzZXRzIHRoZSB2YWx1ZSBvZiB0aGUgY29tcG9uZW50IHRvIGB1bmRlZmluZWRgIGFuZCB0cmlnZ2VycyB0aGUgYGNoYW5nZWAgZXZlbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNsZWFyQnV0dG9uID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgdGhlIGRpc2FibGVkIHN0YXRlIG9mIHRoZSBjb21wb25lbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIHRoZSByZWFkLW9ubHkgc3RhdGUgb2YgdGhlIGNvbXBvbmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmVhZG9ubHkgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyB0aGUgW2B0YWJpbmRleGBdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUTUwvR2xvYmFsX2F0dHJpYnV0ZXMvdGFiaW5kZXgpIG9mIHRoZSBjb21wb25lbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRhYmluZGV4ID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVuYWJsZXMgdGhlIFtmaWx0ZXJpbmddKHslIHNsdWcgZmlsdGVyaW5nX2NvbWJvYm94ICV9KSBmdW5jdGlvbmFsaXR5LlxuICAgICAgICAgKiBJZiBzZXQgdG8gYHRydWVgLCB0aGUgY29tcG9uZW50IGVtaXRzIHRoZSBgZmlsdGVyQ2hhbmdlYCBldmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZmlsdGVyYWJsZSA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSB2YWx1ZSBpcyBjaGFuZ2VkJm1kYXNoO1xuICAgICAgICAgKiB3aGVuIHRoZSBjb21wb25lbnQgaXMgYmx1cnJlZCBvciB0aGUgdmFsdWUgaXMgY2xlYXJlZCB0aHJvdWdoIHRoZSAqKkNsZWFyKiogYnV0dG9uXG4gICAgICAgICAqIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgb3ZlcnZpZXdfY29tYm9ib3ggJX0jdG9jLWV2ZW50cykpLlxuICAgICAgICAgKiBXaGVuIHRoZSB2YWx1ZSBvZiB0aGUgY29tcG9uZW50IGlzIHByb2dyYW1tYXRpY2FsbHkgY2hhbmdlZCB0byBgbmdNb2RlbGAgb3IgYGZvcm1Db250cm9sYFxuICAgICAgICAgKiB0aHJvdWdoIGl0cyBBUEkgb3IgZm9ybSBiaW5kaW5nLCB0aGUgYHZhbHVlQ2hhbmdlYCBldmVudCBpcyBub3QgdHJpZ2dlcmVkIGJlY2F1c2UgaXRcbiAgICAgICAgICogbWlnaHQgY2F1c2UgYSBtaXgtdXAgd2l0aCB0aGUgYnVpbHQtaW4gYHZhbHVlQ2hhbmdlYCBtZWNoYW5pc21zIG9mIHRoZSBgbmdNb2RlbGAgb3IgYGZvcm1Db250cm9sYCBiaW5kaW5ncy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudmFsdWVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgYW4gaXRlbSBzZWxlY3Rpb24gaXMgY2hhbmdlZFxuICAgICAgICAgKiAoW3NlZSBleGFtcGxlXSh7JSBzbHVnIG92ZXJ2aWV3X2NvbWJvYm94ICV9I3RvYy1ldmVudHMpKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2VsZWN0aW9uQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSB1c2VyIHR5cGVzIGluIHRoZSBpbnB1dCBmaWVsZC5cbiAgICAgICAgICogWW91IGNhbiBmaWx0ZXIgdGhlIHNvdXJjZSBiYXNlZCBvbiB0aGUgcGFzc2VkIGZpbHRyYXRpb24gdmFsdWVcbiAgICAgICAgICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBvdmVydmlld19jb21ib2JveCAlfSN0b2MtZXZlbnRzKSkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZpbHRlckNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgcG9wdXAgaXMgYWJvdXQgdG8gb3Blbi5cbiAgICAgICAgICogVGhpcyBldmVudCBpcyBwcmV2ZW50YWJsZS4gSWYgeW91IGNhbmNlbCBpdCwgdGhlIHBvcHVwIHdpbGwgcmVtYWluIGNsb3NlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub3BlbiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGFmdGVyIHRoZSBwb3B1cCBoYXMgYmVlbiBvcGVuZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9wZW5lZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgcG9wdXAgaXMgYWJvdXQgdG8gY2xvc2UuXG4gICAgICAgICAqIFRoaXMgZXZlbnQgaXMgcHJldmVudGFibGUuIElmIHlvdSBjYW5jZWwgaXQsIHRoZSBwb3B1cCB3aWxsIHJlbWFpbiBvcGVuLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jbG9zZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGFmdGVyIHRoZSBwb3B1cCBoYXMgYmVlbiBjbG9zZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNsb3NlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgdXNlciBmb2N1c2VzIHRoZSBDb21ib0JveC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25Gb2N1cyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgQ29tYm9Cb3ggZ2V0cyBibHVycmVkLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vbkJsdXIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMud2lkZ2V0Q2xhc3NlcyA9IHRydWU7XG4gICAgICAgIHRoaXMuX2lzRm9jdXNlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmxpc3RCb3hJZCA9IGd1aWQkMSgpO1xuICAgICAgICB0aGlzLm9wdGlvblByZWZpeCA9IGd1aWQkMSgpO1xuICAgICAgICB0aGlzLm9uQ2hhbmdlQ2FsbGJhY2sgPSAoXykgPT4geyB9O1xuICAgICAgICB0aGlzLm9uVG91Y2hlZENhbGxiYWNrID0gKF8pID0+IHsgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVzZWQgZm9yIHRoZSBkZWZhdWx0IHZpcnR1YWxpemF0aW9uIHNldHRpbmdzIGNvbmZpZy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGVmYXVsdFZpcnR1YWxJdGVtSGVpZ2h0ID0gMjg7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVc2VkIGZvciB0aGUgZGVmYXVsdCB2aXJ0dWFsaXphdGlvbiBzZXR0aW5ncyBjb25maWcuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRlZmF1bHRWaXJ0dWFsUGFnZVNpemUgPSA1MDtcbiAgICAgICAgdGhpcy5fZmlsdGVyaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3RleHQgPSAnJztcbiAgICAgICAgdGhpcy5maWx0ZXJUZXh0ID0gJyc7XG4gICAgICAgIHRoaXMuX29wZW4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fcG9wdXBTZXR0aW5ncyA9IHsgYW5pbWF0ZTogdHJ1ZSB9O1xuICAgICAgICB0aGlzLnBvcHVwTW91c2VEb3duSGFuZGxlciA9IChldmVudCkgPT4gZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5jdXN0b21WYWx1ZVN1YmplY3QgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICB0aGlzLnZhbHVlU3ViamVjdCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHRoaXMuY2xlYXJWYWx1ZVN1YmplY3QgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICB0aGlzLnN1YnMgPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG4gICAgICAgIHZhbGlkYXRlUGFja2FnZShwYWNrYWdlTWV0YWRhdGEpO1xuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IGxvY2FsaXphdGlvbi5ydGwgPyAncnRsJyA6ICdsdHInO1xuICAgICAgICB0aGlzLmRhdGEgPSBbXTtcbiAgICB9XG4gICAgc2V0IHRleHQodGV4dCkge1xuICAgICAgICB0aGlzLl90ZXh0ID0gaXNQcmVzZW50KHRleHQpID8gdGV4dC50b1N0cmluZygpIDogXCJcIjtcbiAgICB9XG4gICAgZ2V0IHRleHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90ZXh0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgdG9nZ2xlUG9wdXAob3Blbikge1xuICAgICAgICBjb25zdCBpc0Rpc2FibGVkID0gdGhpcy5kaXNhYmxlZCB8fCB0aGlzLnJlYWRvbmx5O1xuICAgICAgICBjb25zdCBzYW1lU3RhdGUgPSB0aGlzLmlzT3BlbiA9PT0gb3BlbjtcbiAgICAgICAgaWYgKGlzRGlzYWJsZWQgfHwgc2FtZVN0YXRlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXNEZWZhdWx0UHJldmVudGVkID0gdGhpcy50cmlnZ2VyUG9wdXBFdmVudHMob3Blbik7XG4gICAgICAgIGlmICghaXNEZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgICAgICB0aGlzLl90b2dnbGUob3Blbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGFjdGl2ZURlc2NlbmRhbnQoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc09wZW4gfHwgIWlzUHJlc2VudCh0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCkgfHwgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzZWQgPT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkYXRhSXRlbSA9IHRoaXMuZGF0YVNlcnZpY2UuaXRlbUF0KHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1c2VkKTtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uUHJlZml4ICsgXCItXCIgKyAoZGF0YUl0ZW0gPyBnZXR0ZXIkMShkYXRhSXRlbSwgdGhpcy52YWx1ZUZpZWxkKSA6IFwiXCIpO1xuICAgIH1cbiAgICBnZXQgbm9EYXRhTGFiZWwoKSB7XG4gICAgICAgIGlmICh0aGlzLmRhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub0RhdGFUZXh0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBjbGVhclRpdGxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2NhbGl6YXRpb24uZ2V0KCdjbGVhclRpdGxlJyk7XG4gICAgfVxuICAgIGdldCBhcHBlbmRUbygpIHtcbiAgICAgICAgY29uc3QgeyBhcHBlbmRUbyB9ID0gdGhpcy5wb3B1cFNldHRpbmdzO1xuICAgICAgICBpZiAoIWFwcGVuZFRvIHx8IGFwcGVuZFRvID09PSAncm9vdCcpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFwcGVuZFRvID09PSAnY29tcG9uZW50JyA/IHRoaXMuY29udGFpbmVyIDogYXBwZW5kVG87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGRhdGEgb2YgdGhlIENvbWJvQm94LlxuICAgICAqXG4gICAgICogPiBUaGUgZGF0YSBoYXMgdG8gYmUgcHJvdmlkZWQgaW4gYW4gYXJyYXktbGlrZSBsaXN0LlxuICAgICAqL1xuICAgIHNldCBkYXRhKGRhdGEpIHtcbiAgICAgICAgdGhpcy5kYXRhU2VydmljZS5kYXRhID0gZGF0YSB8fCBbXTtcbiAgICAgICAgaWYgKHRoaXMudmlydHVhbCkge1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsLnNraXAgPSAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoKTtcbiAgICAgICAgaWYgKHRoaXMuX2ZpbHRlcmluZykge1xuICAgICAgICAgICAgY29uc3QgcXVlcnlBbmREYXRhUHJlc2VudCA9IHRoaXMudGV4dC5sZW5ndGggPiAwICYmIHRoaXMuZGF0YVNlcnZpY2UuaXRlbXNDb3VudCA+IDA7XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IHF1ZXJ5QW5kRGF0YVByZXNlbnQgPyB0aGlzLmZpcnN0Rm9jdXNhYmxlSW5kZXgoMCkgOiAtMTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1c2VkID0gaW5kZXg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc3VnZ2VzdCAmJiB0aGlzLmRhdGFTZXJ2aWNlLml0ZW1zQ291bnQgJiYgdGhpcy50ZXh0KSB7XG4gICAgICAgICAgICB0aGlzLnN1Z2dlc3RlZFRleHQgPSBnZXR0ZXIkMSh0aGlzLmRhdGFTZXJ2aWNlLml0ZW1BdCgwKSwgdGhpcy50ZXh0RmllbGQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBkYXRhKCkge1xuICAgICAgICBjb25zdCB2aXJ0dWFsID0gdGhpcy52aXJ0dWFsO1xuICAgICAgICBpZiAodmlydHVhbCkge1xuICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSB2aXJ0dWFsLnNraXAgfHwgMDtcbiAgICAgICAgICAgIGNvbnN0IGVuZCA9IHN0YXJ0ICsgdmlydHVhbC5wYWdlU2l6ZTtcbiAgICAgICAgICAgIC8vIFVzZSBsZW5ndGggaW5zdGVhZCBvZiBpdGVtc0NvdW50IGJlY2F1c2Ugb2YgdGhlIGdyb3VwaW5nLlxuICAgICAgICAgICAgdmlydHVhbC50b3RhbCA9IHRoaXMuZGF0YVNlcnZpY2UuZGF0YS5sZW5ndGg7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhU2VydmljZS5kYXRhLnNsaWNlKHN0YXJ0LCBlbmQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFTZXJ2aWNlLmRhdGE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHZhbHVlIG9mIHRoZSBDb21ib0JveC5cbiAgICAgKiBJdCBjYW4gZWl0aGVyIGJlIG9mIHRoZSBwcmltaXRpdmUgKHN0cmluZywgbnVtYmVycykgb3Igb2YgdGhlIGNvbXBsZXggKG9iamVjdHMpIHR5cGUuXG4gICAgICogVG8gZGVmaW5lIHRoZSB0eXBlLCB1c2UgdGhlIGB2YWx1ZVByaW1pdGl2ZWAgb3B0aW9uLlxuICAgICAqXG4gICAgICogPiBBbGwgc2VsZWN0ZWQgdmFsdWVzIHdoaWNoIGFyZSBub3QgcHJlc2VudCBpbiB0aGUgZGF0YXNldCBhcmUgY29uc2lkZXJlZCBjdXN0b20gdmFsdWVzLlxuICAgICAqID4gV2hlbiB0aGUgYEVudGVyYCBrZXkgaXMgcHJlc3NlZCBvciB0aGUgY29tcG9uZW50IGxvc2VzIGZvY3VzLCBjdXN0b20gdmFsdWVzIGdldCBkaXNtaXNzZWQgdW5sZXNzIGBhbGxvd0N1c3RvbWAgaXMgc2V0IHRvIGB0cnVlYC5cbiAgICAgKi9cbiAgICBzZXQgdmFsdWUobmV3VmFsdWUpIHtcbiAgICAgICAgdGhpcy5fdmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSgpO1xuICAgICAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG4gICAgZ2V0IHZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB0aGUgdHlwZSBvZiB0aGUgc2VsZWN0ZWQgdmFsdWUuXG4gICAgICogSWYgc2V0IHRvIGB0cnVlYCwgdGhlIHNlbGVjdGVkIHZhbHVlIGhhcyB0byBiZSBvZiB0aGUgcHJpbWl0aXZlIHR5cGVcbiAgICAgKiAoW21vcmUgaW5mb3JtYXRpb24gYW5kIGV4YW1wbGVdKHslIHNsdWcgdmFsdWViaW5kaW5nX2NvbWJvYm94ICV9I3RvYy1wcmltaXRpdmUtdmFsdWVzLWZyb20tb2JqZWN0LWZpZWxkcykpLlxuICAgICAqL1xuICAgIHNldCB2YWx1ZVByaW1pdGl2ZShpc1ByaW1pdGl2ZSkge1xuICAgICAgICB0aGlzLl92YWx1ZVByaW1pdGl2ZSA9IGlzUHJpbWl0aXZlO1xuICAgIH1cbiAgICBnZXQgdmFsdWVQcmltaXRpdmUoKSB7XG4gICAgICAgIGlmICghaXNQcmVzZW50KHRoaXMuX3ZhbHVlUHJpbWl0aXZlKSkge1xuICAgICAgICAgICAgcmV0dXJuICFpc1ByZXNlbnQodGhpcy52YWx1ZUZpZWxkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWVQcmltaXRpdmU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbmZpZ3VyZXMgdGhlIHBvcHVwIG9mIHRoZSBDb21ib0JveC5cbiAgICAgKlxuICAgICAqIFRoZSBhdmFpbGFibGUgb3B0aW9ucyBhcmU6XG4gICAgICogLSBgYW5pbWF0ZTogQm9vbGVhbmAmbWRhc2g7Q29udHJvbHMgdGhlIHBvcHVwIGFuaW1hdGlvbi4gQnkgZGVmYXVsdCwgdGhlIG9wZW4gYW5kIGNsb3NlIGFuaW1hdGlvbnMgYXJlIGVuYWJsZWQuXG4gICAgICogLSBgd2lkdGg6IE51bWJlciB8IFN0cmluZ2AmbWRhc2g7U2V0cyB0aGUgd2lkdGggb2YgdGhlIHBvcHVwIGNvbnRhaW5lci4gQnkgZGVmYXVsdCwgdGhlIHdpZHRoIG9mIHRoZSBob3N0IGVsZW1lbnQgaXMgdXNlZC4gSWYgc2V0IHRvIGBhdXRvYCwgdGhlIGNvbXBvbmVudCBhdXRvbWF0aWNhbGx5IGFkanVzdHMgdGhlIHdpZHRoIG9mIHRoZSBwb3B1cCBhbmQgbm8gaXRlbSBsYWJlbHMgYXJlIHdyYXBwZWQuIFRoZSBgYXV0b2AgbW9kZSBpcyBub3Qgc3VwcG9ydGVkIHdoZW4gdmlydHVhbCBzY3JvbGxpbmcgaXMgZW5hYmxlZC5cbiAgICAgKiAtIGBoZWlnaHQ6IE51bWJlcmAmbWRhc2g7U2V0cyB0aGUgaGVpZ2h0IG9mIHRoZSBwb3B1cCBjb250YWluZXIuXG4gICAgICogLSBgcG9wdXBDbGFzczogU3RyaW5nYCZtZGFzaDtTcGVjaWZpZXMgYSBsaXN0IG9mIENTUyBjbGFzc2VzIHRoYXQgYXJlIHVzZWQgdG8gc3R5bGUgdGhlIHBvcHVwLlxuICAgICAqIC0gYGFwcGVuZFRvOiBcInJvb3RcIiB8IFwiY29tcG9uZW50XCIgfCBWaWV3Q29udGFpbmVyUmVmYCZtZGFzaDtTcGVjaWZpZXMgdGhlIGNvbXBvbmVudCB0byB3aGljaCB0aGUgcG9wdXAgd2lsbCBiZSBhcHBlbmRlZC5cbiAgICAgKi9cbiAgICBzZXQgcG9wdXBTZXR0aW5ncyhzZXR0aW5ncykge1xuICAgICAgICB0aGlzLl9wb3B1cFNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7IGFuaW1hdGU6IHRydWUgfSwgc2V0dGluZ3MpO1xuICAgIH1cbiAgICBnZXQgcG9wdXBTZXR0aW5ncygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BvcHVwU2V0dGluZ3M7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlZmluZXMgYSBCb29sZWFuIGZ1bmN0aW9uIHRoYXQgaXMgZXhlY3V0ZWQgZm9yIGVhY2ggZGF0YSBpdGVtIGluIHRoZSBjb21wb25lbnRcbiAgICAgKiAoW3NlZSBleGFtcGxlc10oeyUgc2x1ZyBkaXNhYmxlZGl0ZW1zX2NvbWJvYm94ICV9KSkuIERldGVybWluZXMgd2hldGhlciB0aGUgaXRlbSB3aWxsIGJlIGRpc2FibGVkLlxuICAgICAqL1xuICAgIHNldCBpdGVtRGlzYWJsZWQoZm4pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBpdGVtRGlzYWJsZWQgbXVzdCBiZSBhIGZ1bmN0aW9uLCBidXQgcmVjZWl2ZWQgJHtKU09OLnN0cmluZ2lmeShmbil9LmApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGlzYWJsZWRJdGVtc1NlcnZpY2UuaXRlbURpc2FibGVkID0gZm47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzZXQgdGFiSW5kZXgodGFiSW5kZXgpIHtcbiAgICAgICAgdGhpcy50YWJpbmRleCA9IHRhYkluZGV4O1xuICAgIH1cbiAgICBnZXQgdGFiSW5kZXgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRhYmluZGV4O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbmFibGVzIHRoZSBbdmlydHVhbGl6YXRpb25dKHslIHNsdWcgdmlydHVhbGl6YXRpb25fY29tYm9ib3ggJX0pIGZ1bmN0aW9uYWxpdHkuXG4gICAgICovXG4gICAgc2V0IHZpcnR1YWwoc2V0dGluZ3MpIHtcbiAgICAgICAgdGhpcy5fdmlydHVhbFNldHRpbmdzID0gbm9ybWFsaXplVmlydHVhbGl6YXRpb25TZXR0aW5ncyhzZXR0aW5ncywge1xuICAgICAgICAgICAgaXRlbUhlaWdodDogdGhpcy5kZWZhdWx0VmlydHVhbEl0ZW1IZWlnaHQsXG4gICAgICAgICAgICBwYWdlU2l6ZTogdGhpcy5kZWZhdWx0VmlydHVhbFBhZ2VTaXplXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgdmlydHVhbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZpcnR1YWxTZXR0aW5ncztcbiAgICB9XG4gICAgZ2V0IGNsZWFyYWJsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xlYXJCdXR0b247XG4gICAgfVxuICAgIGdldCBkaXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbjtcbiAgICB9XG4gICAgZ2V0IGlzRm9jdXNlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzRm9jdXNlZDtcbiAgICB9XG4gICAgc2V0IGlzRm9jdXNlZCh2YWx1ZSkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyW3ZhbHVlID8gJ2FkZENsYXNzJyA6ICdyZW1vdmVDbGFzcyddKHRoaXMud3JhcHBlci5uYXRpdmVFbGVtZW50LCBcImstc3RhdGUtZm9jdXNlZFwiKTtcbiAgICAgICAgdGhpcy5faXNGb2N1c2VkID0gdmFsdWU7XG4gICAgfVxuICAgIGdldCBjbGVhckJ1dHRvblZpc2libGl0eSgpIHtcbiAgICAgICAgaWYgKHRoaXMudG91Y2hFbmFibGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3Zpc2libGUnO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBwb3B1cFdpZHRoKCkge1xuICAgICAgICBsZXQgd3JhcHBlck9mZnNldFdpZHRoID0gMDtcbiAgICAgICAgaWYgKGlzRG9jdW1lbnRBdmFpbGFibGUoKSkge1xuICAgICAgICAgICAgd3JhcHBlck9mZnNldFdpZHRoID0gdGhpcy53cmFwcGVyLm5hdGl2ZUVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLnBvcHVwU2V0dGluZ3Mud2lkdGggfHwgd3JhcHBlck9mZnNldFdpZHRoO1xuICAgICAgICBjb25zdCBtaW5XaWR0aCA9IGlzTmFOKHdyYXBwZXJPZmZzZXRXaWR0aCkgPyB3cmFwcGVyT2Zmc2V0V2lkdGggOiBgJHt3cmFwcGVyT2Zmc2V0V2lkdGh9cHhgO1xuICAgICAgICBjb25zdCBtYXhXaWR0aCA9IGlzTmFOKHdpZHRoKSA/IHdpZHRoIDogYCR7d2lkdGh9cHhgO1xuICAgICAgICByZXR1cm4geyBtaW46IG1pbldpZHRoLCBtYXg6IG1heFdpZHRoIH07XG4gICAgfVxuICAgIGdldCBwb3B1cEhlaWdodCgpIHtcbiAgICAgICAgY29uc3QgcG9wdXBIZWlnaHQgPSB0aGlzLnBvcHVwU2V0dGluZ3MuaGVpZ2h0O1xuICAgICAgICByZXR1cm4gaXNQcmVzZW50KHBvcHVwSGVpZ2h0KSA/IGAke3BvcHVwSGVpZ2h0fXB4YCA6ICdhdXRvJztcbiAgICB9XG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQXR0cmlidXRlKHRoaXMuaG9zdEVsZW1lbnQubmF0aXZlRWxlbWVudCwgJ3RhYmluZGV4Jyk7XG4gICAgICAgIHRoaXMuYXR0YWNoU3RyZWFtcygpO1xuICAgICAgICB0aGlzLmNyZWF0ZVZhbHVlU3RyZWFtKCk7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlVG91Y2hFdmVudHMoKTtcbiAgICAgICAgdGhpcy5hdHRhY2hTZWxlY3RDbGlja0hhbmRsZXIoKTtcbiAgICAgICAgdGhpcy5zZXRNZXNzYWdlcygpO1xuICAgIH1cbiAgICBjcmVhdGVWYWx1ZVN0cmVhbSgpIHtcbiAgICAgICAgY29uc3QgdmFsdWVTdHJlYW0gPSB0aGlzLnZhbHVlU3ViamVjdC5waXBlKGZpbHRlcigoY2FuZGlkYXRlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gZ2V0dGVyJDEodGhpcy52YWx1ZSwgdGhpcy52YWx1ZUZpZWxkKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gZ2V0dGVyJDEoY2FuZGlkYXRlLCB0aGlzLnZhbHVlRmllbGQpO1xuICAgICAgICAgICAgbGV0IG5ld1RleHQgPSBnZXR0ZXIkMShjYW5kaWRhdGUsIHRoaXMudGV4dEZpZWxkKTtcbiAgICAgICAgICAgIGlmICghaXNQcmVzZW50KHRoaXMudmFsdWUpICYmICFpc1ByZXNlbnQobmV3VmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzUHJlc2VudChuZXdUZXh0KSkge1xuICAgICAgICAgICAgICAgIG5ld1RleHQgPSBuZXdUZXh0LnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY3VycmVudCA9PT0gbmV3VmFsdWUgJiYgdGhpcy50ZXh0ID09PSBuZXdUZXh0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhckZpbHRlcigpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSwgbWFwKChjYW5kaWRhdGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gZ2V0dGVyJDEoY2FuZGlkYXRlLCB0aGlzLnZhbHVlRmllbGQpO1xuICAgICAgICAgICAgY29uc3QgbmV3VGV4dCA9IGdldHRlciQxKGNhbmRpZGF0ZSwgdGhpcy50ZXh0RmllbGQpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBkYXRhSXRlbTogY2FuZGlkYXRlLFxuICAgICAgICAgICAgICAgIHRleHQ6IG5ld1RleHQsXG4gICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMudmFsdWVQcmltaXRpdmUgPyBuZXdWYWx1ZSA6IGNhbmRpZGF0ZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpO1xuICAgICAgICBjb25zdCBjdXN0b21WYWx1ZVN0cmVhbXMgPSBwYXJ0aXRpb24oKCkgPT4gdGhpcy5hbGxvd0N1c3RvbSkodGhpcy5jdXN0b21WYWx1ZVN1YmplY3QucGlwZSh0aHJvdHRsZVRpbWUoMzAwKSkpO1xuICAgICAgICBjb25zdCBhbGxvd0N1c3RvbVZhbHVlU3RyZWFtID0gY3VzdG9tVmFsdWVTdHJlYW1zWzBdLnBpcGUodGFwKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcbiAgICAgICAgfSksIGZpbHRlcigoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBoYXNDaGFuZ2UgPSB0aGlzLnRleHQgIT09IGdldHRlciQxKHRoaXMudmFsdWUsIHRoaXMudmFsdWVGaWVsZCk7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBoYXNDaGFuZ2U7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGVkID0gaGFzQ2hhbmdlO1xuICAgICAgICAgICAgaWYgKCFoYXNDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyRmlsdGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaGFzQ2hhbmdlO1xuICAgICAgICB9KSwgdGhpcy52YWx1ZU5vcm1hbGl6ZXIsIG1hcCgobm9ybWFsaXplZFZhbHVlKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGN1c3RvbTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBkYXRhSXRlbTogbm9ybWFsaXplZFZhbHVlLFxuICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMudGV4dCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogbm9ybWFsaXplZFZhbHVlXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSk7XG4gICAgICAgIGNvbnN0IGRpc2FibGVDdXN0b21WYWx1ZVN0cmVhbSA9IGN1c3RvbVZhbHVlU3RyZWFtc1sxXS5waXBlKG1hcCgoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGN1c3RvbTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBkYXRhSXRlbTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIHRleHQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdW5kZWZpbmVkXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSk7XG4gICAgICAgIGNvbnN0IGNsZWFyVmFsdWVTdHJlYW0gPSB0aGlzLmNsZWFyVmFsdWVTdWJqZWN0LnBpcGUobWFwKCgpID0+ICh7XG4gICAgICAgICAgICBkYXRhSXRlbTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgdGV4dDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgdmFsdWU6IHVuZGVmaW5lZFxuICAgICAgICB9KSkpO1xuICAgICAgICBpZiAodGhpcy52YWx1ZVN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgdGhpcy52YWx1ZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1lcmdlZCA9IG1lcmdlKHZhbHVlU3RyZWFtLCBhbGxvd0N1c3RvbVZhbHVlU3RyZWFtLCBkaXNhYmxlQ3VzdG9tVmFsdWVTdHJlYW0sIGNsZWFyVmFsdWVTdHJlYW0pO1xuICAgICAgICB0aGlzLnZhbHVlU3Vic2NyaXB0aW9uID0gbWVyZ2VkLnBpcGUoY2F0Y2hFcnJvcigoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3Rpb25DaGFuZ2VkID0gZ2V0dGVyJDEodGhpcy5kYXRhSXRlbSwgdGhpcy52YWx1ZUZpZWxkKSAhPT0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5kYXRhSXRlbSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLnRleHQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChzZWxlY3Rpb25DaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25DaGFuZ2UuZW1pdCh1bmRlZmluZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lbWl0VmFsdWVDaGFuZ2UoKTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlVmFsdWVTdHJlYW0oKTtcbiAgICAgICAgICAgIHJldHVybiBvZihudWxsKTtcbiAgICAgICAgfSkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2VsZWN0aW9uQ2hhbmdlZCA9IGdldHRlciQxKHRoaXMuZGF0YUl0ZW0sIHRoaXMudmFsdWVGaWVsZCkgIT09IGdldHRlciQxKHN0YXRlLmRhdGFJdGVtLCB0aGlzLnZhbHVlRmllbGQpO1xuICAgICAgICAgICAgdGhpcy5kYXRhSXRlbSA9IHN0YXRlLmRhdGFJdGVtO1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHN0YXRlLnZhbHVlO1xuICAgICAgICAgICAgdGhpcy50ZXh0ID0gc3RhdGUudGV4dDtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5jbGVhckZpbHRlcigpO1xuICAgICAgICAgICAgaWYgKHN0YXRlLmN1c3RvbSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1c2VkID0gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VsZWN0aW9uQ2hhbmdlZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGlvbkFyZ3MgPSBzdGF0ZS5jdXN0b20gPyB1bmRlZmluZWQgOiB0aGlzLmRhdGFJdGVtO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uQ2hhbmdlLmVtaXQoc2VsZWN0aW9uQXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVtaXRWYWx1ZUNoYW5nZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXR0YWNoU3RyZWFtcygpIHtcbiAgICAgICAgaWYgKCFpc0RvY3VtZW50QXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN1YnMuYWRkKHRoaXMubG9jYWxpemF0aW9uXG4gICAgICAgICAgICAuY2hhbmdlcy5zdWJzY3JpYmUoKHsgcnRsIH0pID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gcnRsID8gJ3J0bCcgOiAnbHRyJztcbiAgICAgICAgICAgIHRoaXMuc2V0TWVzc2FnZXMoKTtcbiAgICAgICAgfSkpO1xuICAgICAgICB0aGlzLnN1YnMuYWRkKG1lcmdlKHRoaXMubmF2aWdhdGlvblNlcnZpY2UudXAsIHRoaXMubmF2aWdhdGlvblNlcnZpY2UuZG93biwgdGhpcy5uYXZpZ2F0aW9uU2VydmljZS5ob21lLCB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLmVuZClcbiAgICAgICAgICAgIC5waXBlKGZpbHRlcigoZXZlbnQpID0+IGlzUHJlc2VudChldmVudC5pbmRleCkpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgoZXZlbnQpID0+IHRoaXMubmF2aWdhdGUoZXZlbnQuaW5kZXgpKSk7XG4gICAgICAgIHRoaXMuc3Vicy5hZGQodGhpcy5uYXZpZ2F0aW9uU2VydmljZS5vcGVuLnN1YnNjcmliZSh0aGlzLmhhbmRsZU5hdmlnYXRpb25PcGVuLmJpbmQodGhpcykpKTtcbiAgICAgICAgdGhpcy5zdWJzLmFkZCh0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLmNsb3NlLnN1YnNjcmliZSgoKSA9PiB0aGlzLnRvZ2dsZVBvcHVwKGZhbHNlKSkpO1xuICAgICAgICB0aGlzLnN1YnMuYWRkKHRoaXMubmF2aWdhdGlvblNlcnZpY2UuZXNjLnN1YnNjcmliZSh0aGlzLmhhbmRsZUVzY2FwZS5iaW5kKHRoaXMpKSk7XG4gICAgICAgIHRoaXMuc3Vicy5hZGQodGhpcy5uYXZpZ2F0aW9uU2VydmljZS5lbnRlci5waXBlKHRhcCgoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzT3Blbikge1xuICAgICAgICAgICAgICAgIGV2ZW50Lm9yaWdpbmFsRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKHRoaXMuaGFuZGxlRW50ZXIuYmluZCh0aGlzKSkpO1xuICAgICAgICB0aGlzLnN1YnMuYWRkKG1lcmdlKHRoaXMuc2VsZWN0aW9uU2VydmljZS5vbkNoYW5nZSwgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLm9uU2VsZWN0LnBpcGUoZmlsdGVyKF8gPT4gIXRoaXMuaXNPcGVuKSkpXG4gICAgICAgICAgICAucGlwZSh0YXAoXyA9PiB7XG4gICAgICAgICAgICB0aGlzLl9maWx0ZXJpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlUG9wdXAoZmFsc2UpO1xuICAgICAgICB9KSwgbWFwKChldmVudCkgPT4gdGhpcy5kYXRhU2VydmljZS5pdGVtQXQoZXZlbnQuaW5kaWNlc1swXSkpKVxuICAgICAgICAgICAgLnN1YnNjcmliZShkYXRhSXRlbSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZShkYXRhSXRlbSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgdGhpcy5zdWJzLmFkZCh0aGlzLnNlbGVjdGlvblNlcnZpY2Uub25TZWxlY3QucGlwZShmaWx0ZXIoXyA9PiB0aGlzLmlzT3BlbiksIHRhcChfID0+IHRoaXMuX2ZpbHRlcmluZyA9IGZhbHNlKSwgbWFwKChldmVudCkgPT4gdGhpcy5kYXRhU2VydmljZS5pdGVtQXQoZXZlbnQuaW5kaWNlc1swXSkpKVxuICAgICAgICAgICAgLnN1YnNjcmliZShkYXRhSXRlbSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3Rpb25DaGFuZ2VkID0gZ2V0dGVyJDEoZGF0YUl0ZW0sIHRoaXMudmFsdWVGaWVsZCkgIT09IGdldHRlciQxKHRoaXMuZGF0YUl0ZW0sIHRoaXMudmFsdWVGaWVsZCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlKHsgZGF0YUl0ZW0gfSk7XG4gICAgICAgICAgICBpZiAoc2VsZWN0aW9uQ2hhbmdlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uQ2hhbmdlLmVtaXQoZGF0YUl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLmRlc3Ryb3lQb3B1cCgpO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5tZXNzYWdlc1RpbWVvdXQpO1xuICAgICAgICB0aGlzLnN1YnMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgaWYgKGlzUHJlc2VudCh0aGlzLnZhbHVlU3Vic2NyaXB0aW9uKSkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRvdWNoc3RhcnREaXNwb3NlSGFuZGxlcikge1xuICAgICAgICAgICAgdGhpcy50b3VjaHN0YXJ0RGlzcG9zZUhhbmRsZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zZWxlY3RDbGlja0Rpc3Bvc2VIYW5kbGVyKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdENsaWNrRGlzcG9zZUhhbmRsZXIoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzKSB7XG4gICAgICAgIGNvbnN0IHZpcnR1YWwgPSB0aGlzLnZpcnR1YWw7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RJbml0aWFsRGF0YSA9IHZpcnR1YWwgJiYgY2hhbmdlcy5kYXRhICYmIGNoYW5nZXMuZGF0YS5pc0ZpcnN0Q2hhbmdlKCk7XG4gICAgICAgIGlmIChyZXF1ZXN0SW5pdGlhbERhdGEpIHtcbiAgICAgICAgICAgIHRoaXMucGFnZUNoYW5nZSh7IHNraXA6IDAsIHRha2U6IHZpcnR1YWwucGFnZVNpemUgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzQ2hhbmdlZCgndmFsdWVOb3JtYWxpemVyJywgY2hhbmdlcykpIHtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlVmFsdWVTdHJlYW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYW55Q2hhbmdlZChbJ3RleHRGaWVsZCcsICd2YWx1ZUZpZWxkJywgJ3ZhbHVlUHJpbWl0aXZlJ10sIGNoYW5nZXMsIGZhbHNlKSkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5nQWZ0ZXJDb250ZW50Q2hlY2tlZCgpIHtcbiAgICAgICAgdGhpcy52ZXJpZnlTZXR0aW5ncygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb2N1c2VzIGEgc3BlY2lmaWMgaXRlbSBvZiB0aGUgQ29tYm9Cb3ggYmFzZWQgb24gYSBwcm92aWRlZCBpbmRleC5cbiAgICAgKiBJZiBudWxsIG9yIGludmFsaWQgaW5kZXggaXMgcHJvdmlkZWQgdGhlIGZvY3VzIHdpbGwgYmUgcmVtb3ZlZC5cbiAgICAgKi9cbiAgICBmb2N1c0l0ZW1BdChpbmRleCkge1xuICAgICAgICBjb25zdCBpc0luUmFuZ2UgPSBpbmRleCA+PSAwICYmIGluZGV4IDwgdGhpcy5kYXRhLmxlbmd0aDtcbiAgICAgICAgaWYgKGlzUHJlc2VudChpbmRleCkgJiYgaXNJblJhbmdlICYmICF0aGlzLmRpc2FibGVkSXRlbXNTZXJ2aWNlLmlzSW5kZXhEaXNhYmxlZChpbmRleCkpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1cyhpbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXMoLTEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvY3VzZXMgdGhlIENvbWJvQm94LlxuICAgICAqL1xuICAgIGZvY3VzKCkge1xuICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoYmFyLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQmx1cnMgdGhlIENvbWJvQm94LlxuICAgICAqL1xuICAgIGJsdXIoKSB7XG4gICAgICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5zZWFyY2hiYXIuYmx1cigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRvZ2dsZXMgdGhlIHZpc2liaWxpdHkgb2YgdGhlIHBvcHVwLiBJZiB5b3UgdXNlIHRoZSBgdG9nZ2xlYCBtZXRob2QgdG8gb3BlbiBvciBjbG9zZSB0aGUgcG9wdXAsXG4gICAgICogdGhlIGBvcGVuYCBhbmQgYGNsb3NlYCBldmVudHMgd2lsbCBub3QgYmUgZmlyZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3BlbiAtIFRoZSBzdGF0ZSBvZiB0aGUgcG9wdXAuXG4gICAgICovXG4gICAgdG9nZ2xlKG9wZW4pIHtcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKG51bGwpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2hvdWxkT3BlbiA9IGlzUHJlc2VudChvcGVuKSA/IG9wZW4gOiAhdGhpcy5fb3BlbjtcbiAgICAgICAgICAgIHRoaXMuX3RvZ2dsZShzaG91bGRPcGVuKTtcbiAgICAgICAgICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBvcGVuIHN0YXRlIG9mIHRoZSBwb3B1cC5cbiAgICAgKi9cbiAgICBnZXQgaXNPcGVuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fb3BlbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSB2YWx1ZSBvZiB0aGUgQ29tYm9Cb3guXG4gICAgICogSWYgeW91IHVzZSB0aGUgYHJlc2V0YCBtZXRob2QgdG8gY2xlYXIgdGhlIHZhbHVlIG9mIHRoZSBjb21wb25lbnQsXG4gICAgICogdGhlIG1vZGVsIHdpbGwgbm90IHVwZGF0ZSBhdXRvbWF0aWNhbGx5IGFuZCB0aGUgYHNlbGVjdGlvbkNoYW5nZWAgYW5kIGB2YWx1ZUNoYW5nZWAgZXZlbnRzIHdpbGwgbm90IGJlIGZpcmVkLlxuICAgICAqL1xuICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmNsZWFyU3RhdGUoKTtcbiAgICAgICAgdGhpcy5yZXNldFNlbGVjdGlvbigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICpcbiAgICAgKiBVc2VkIGJ5IHRoZSBUZXh0Qm94Q29udGFpbmVyIHRvIGRldGVybWluZSBpZiB0aGUgZmxvYXRpbmcgbGFiZWxcbiAgICAgKiBzaG91bGQgYmUgcmVuZGVyZWQgaW4gdGhlIGlucHV0IHdoZW4gdGhlIGNvbXBvbmVudCBpcyBub3QgZm9jdXNlZC5cbiAgICAgKi9cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICBjb25zdCB0ZXh0RW1wdHkgPSAhaXNQcmVzZW50KHRoaXMudGV4dCkgfHwgaXNFbXB0eVN0cmluZyh0aGlzLnRleHQpO1xuICAgICAgICBjb25zdCB2YWx1ZUVtcHR5ID0gIWlzUHJlc2VudCh0aGlzLnZhbHVlKSB8fCBpc0VtcHR5U3RyaW5nKHRoaXMudmFsdWUpO1xuICAgICAgICByZXR1cm4gdGV4dEVtcHR5ICYmIHZhbHVlRW1wdHk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBjbGVhclZhbHVlKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgICAgIHRoaXMuX2ZpbHRlcmluZyA9IHRydWU7XG4gICAgICAgIHRoaXMuX3ByZXZpb3VzRGF0YUl0ZW0gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5yZXNldFNlbGVjdGlvbihbXSk7XG4gICAgICAgIHRoaXMuY2xlYXJWYWx1ZVN1YmplY3QubmV4dCgpO1xuICAgICAgICB0aGlzLl9maWx0ZXJpbmcgPSBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHdyaXRlVmFsdWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlID09PSBudWxsID8gdW5kZWZpbmVkIDogdmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICByZWdpc3Rlck9uQ2hhbmdlKGZuKSB7XG4gICAgICAgIHRoaXMub25DaGFuZ2VDYWxsYmFjayA9IGZuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgcmVnaXN0ZXJPblRvdWNoZWQoZm4pIHtcbiAgICAgICAgdGhpcy5vblRvdWNoZWRDYWxsYmFjayA9IGZuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgc2V0RGlzYWJsZWRTdGF0ZShpc0Rpc2FibGVkKSB7XG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBpc0Rpc2FibGVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgZ2V0IGJ1dHRvbkNsYXNzZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvYWRpbmcgPyAnay1pLWxvYWRpbmcnIDogdGhpcy5pY29uQ2xhc3MgfHwgJ2staS1hcnJvdy1zJztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIG9uUmVzaXplKCkge1xuICAgICAgICBpZiAodGhpcy5pc09wZW4pIHtcbiAgICAgICAgICAgIGNvbnN0IHBvcHVwV3JhcHBlciA9IHRoaXMucG9wdXBSZWYucG9wdXBFbGVtZW50O1xuICAgICAgICAgICAgY29uc3QgeyBtaW4sIG1heCB9ID0gdGhpcy5wb3B1cFdpZHRoO1xuICAgICAgICAgICAgcG9wdXBXcmFwcGVyLnN0eWxlLm1pbldpZHRoID0gbWluO1xuICAgICAgICAgICAgcG9wdXBXcmFwcGVyLnN0eWxlLndpZHRoID0gbWF4O1xuICAgICAgICB9XG4gICAgfVxuICAgIHZlcmlmeVNldHRpbmdzKCkge1xuICAgICAgICBpZiAoIWlzRGV2TW9kZSgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudmFsdWVQcmltaXRpdmUgPT09IHRydWUgJiYgaXNQcmVzZW50KHRoaXMudmFsdWUpICYmIHR5cGVvZiB0aGlzLnZhbHVlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoQ29tYm9Cb3hNZXNzYWdlcy5wcmltaXRpdmUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnZhbHVlUHJpbWl0aXZlID09PSBmYWxzZSAmJiBpc1ByZXNlbnQodGhpcy52YWx1ZSkgJiYgdHlwZW9mIHRoaXMudmFsdWUgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihDb21ib0JveE1lc3NhZ2VzLm9iamVjdCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmFsdWVPclRleHQgPSAhaXNQcmVzZW50KHRoaXMudmFsdWVGaWVsZCkgIT09ICFpc1ByZXNlbnQodGhpcy50ZXh0RmllbGQpO1xuICAgICAgICBpZiAodmFsdWVPclRleHQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihDb21ib0JveE1lc3NhZ2VzLnRleHRBbmRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudmlydHVhbCAmJiBpc05hTih0aGlzLnZpcnR1YWwuaXRlbUhlaWdodCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihDb21ib0JveE1lc3NhZ2VzLm5vSXRlbUhlaWdodCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0U3RhdGUoKSB7XG4gICAgICAgIC8vIEZpbHRlcmluZyBpbiBwcm9jZXNzLCBkbyBub3RoaW5nLlxuICAgICAgICBpZiAodGhpcy5fZmlsdGVyaW5nKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLnZhbHVlO1xuICAgICAgICBjb25zdCB2YWx1ZUZpZWxkID0gdGhpcy52YWx1ZUZpZWxkO1xuICAgICAgICBjb25zdCByZXNvbHZlZCA9IHRoaXMuZmluZERhdGFJdGVtKHsgdmFsdWVGaWVsZCwgdmFsdWUgfSk7XG4gICAgICAgIGlmIChpc1ByZXNlbnQocmVzb2x2ZWQuaW5kZXgpICYmIHJlc29sdmVkLmluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0ZSh7IGRhdGFJdGVtOiByZXNvbHZlZC5kYXRhSXRlbSwgY29uZmlybTogdHJ1ZSB9KTtcbiAgICAgICAgICAgIHRoaXMucmVzZXRTZWxlY3Rpb24ocmVzb2x2ZWQuaW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzUHJlc2VudCh2YWx1ZSkgJiYgdGhpcy5hbGxvd0N1c3RvbSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0ZSh7IGRhdGFJdGVtOiB2YWx1ZSB9KTtcbiAgICAgICAgICAgIHRoaXMucmVzZXRTZWxlY3Rpb24oLTEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuX3ByZXZpb3VzRGF0YUl0ZW0gJiYgdGhpcy52YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0ZSh7IGRhdGFJdGVtOiB0aGlzLl9wcmV2aW91c0RhdGFJdGVtIH0pO1xuICAgICAgICAgICAgdGhpcy5yZXNldFNlbGVjdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jbGVhclN0YXRlKCk7XG4gICAgICAgICAgICB0aGlzLnJlc2V0U2VsZWN0aW9uKC0xKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVTdGF0ZSh7IGRhdGFJdGVtLCBjb25maXJtID0gZmFsc2UgfSkge1xuICAgICAgICB0aGlzLmRhdGFJdGVtID0gZGF0YUl0ZW07XG4gICAgICAgIHRoaXMudGV4dCA9IGdldHRlciQxKGRhdGFJdGVtLCB0aGlzLnRleHRGaWVsZCk7XG4gICAgICAgIGlmIChjb25maXJtKSB7XG4gICAgICAgICAgICB0aGlzLl9wcmV2aW91c0RhdGFJdGVtID0gZGF0YUl0ZW07XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2xlYXJTdGF0ZSgpIHtcbiAgICAgICAgdGhpcy50ZXh0ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmRhdGFJdGVtID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXNldFNlbGVjdGlvbihpbmRleCkge1xuICAgICAgICBjb25zdCBjbGVhciA9ICFpc1ByZXNlbnQoaW5kZXgpIHx8IGluZGV4IDwgMDtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLnJlc2V0U2VsZWN0aW9uKGNsZWFyID8gW10gOiBbaW5kZXhdKTtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzZWQgPSBpbmRleDtcbiAgICB9XG4gICAgZmlyc3RGb2N1c2FibGVJbmRleChpbmRleCkge1xuICAgICAgICBjb25zdCBtYXhJbmRleCA9IHRoaXMuZGF0YS5sZW5ndGggLSAxO1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZEl0ZW1zU2VydmljZS5pc0luZGV4RGlzYWJsZWQoaW5kZXgpKSB7XG4gICAgICAgICAgICByZXR1cm4gKGluZGV4IDwgbWF4SW5kZXgpID8gdGhpcy5maXJzdEZvY3VzYWJsZUluZGV4KGluZGV4ICsgMSkgOiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmluZEluZGV4UHJlZGljYXRlKHRleHQpIHtcbiAgICAgICAgaWYgKHRoaXMuZGF0YVNlcnZpY2UuZ3JvdXBlZCkge1xuICAgICAgICAgICAgcmV0dXJuIChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGl0ZW1UZXh0ID0gZ2V0dGVyJDEoaXRlbS52YWx1ZSwgdGhpcy50ZXh0RmllbGQpO1xuICAgICAgICAgICAgICAgIGl0ZW1UZXh0ID0gIWlzUHJlc2VudChpdGVtVGV4dCkgPyBcIlwiIDogaXRlbVRleHQudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtVGV4dC5zdGFydHNXaXRoKHRleHQudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGl0ZW1UZXh0ID0gZ2V0dGVyJDEoaXRlbSwgdGhpcy50ZXh0RmllbGQpO1xuICAgICAgICAgICAgICAgIGl0ZW1UZXh0ID0gIWlzUHJlc2VudChpdGVtVGV4dCkgPyBcIlwiIDogaXRlbVRleHQudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtVGV4dC5zdGFydHNXaXRoKHRleHQudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIGZpbmREYXRhSXRlbSh7IHZhbHVlRmllbGQsIHZhbHVlIH0pIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICAgICAgZGF0YUl0ZW06IG51bGwsXG4gICAgICAgICAgICBpbmRleDogLTFcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgY29tcGFyZXIgPSAoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGF0YUl0ZW0gPSB0aGlzLmRhdGFTZXJ2aWNlLmdyb3VwZWQgPyBlbGVtZW50LnZhbHVlIDogZWxlbWVudDtcbiAgICAgICAgICAgIHJldHVybiBnZXR0ZXIkMShkYXRhSXRlbSwgdmFsdWVGaWVsZCkgPT09IGdldHRlciQxKHZhbHVlLCB2YWx1ZUZpZWxkKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmRhdGFTZXJ2aWNlLmZpbmRJbmRleChjb21wYXJlcik7XG4gICAgICAgIHJlc3VsdC5kYXRhSXRlbSA9IHRoaXMuZGF0YVNlcnZpY2UuaXRlbUF0KGluZGV4KTtcbiAgICAgICAgcmVzdWx0LmluZGV4ID0gaW5kZXg7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIHNlYXJjaCh0ZXh0LCBzdGFydEZyb20gPSAwKSB7XG4gICAgICAgIGxldCBpbmRleDtcbiAgICAgICAgaWYgKHRleHQubGVuZ3RoICYmIHRoaXMuZGF0YVNlcnZpY2UuaXRlbXNDb3VudCkge1xuICAgICAgICAgICAgaW5kZXggPSB0aGlzLmRhdGFTZXJ2aWNlLmZpbmRJbmRleCh0aGlzLmZpbmRJbmRleFByZWRpY2F0ZSh0ZXh0KSwgc3RhcnRGcm9tKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGluZGV4ID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWRJdGVtc1NlcnZpY2UuaXNJbmRleERpc2FibGVkKGluZGV4KSkge1xuICAgICAgICAgICAgaWYgKGluZGV4ICsgMSA8IHRoaXMuZGF0YVNlcnZpY2UuaXRlbXNDb3VudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoKHRleHQsIGluZGV4ICsgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXMoLTEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzKGluZGV4KTtcbiAgICAgICAgICAgIGlmICh0aGlzLnN1Z2dlc3QpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN1Z2dlc3RlZFRleHQgPSBnZXR0ZXIkMSh0aGlzLmRhdGFTZXJ2aWNlLml0ZW1BdChpbmRleCksIHRoaXMudGV4dEZpZWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgZ2V0U3VnZ2VzdGlvbigpIHtcbiAgICAgICAgY29uc3QgaGFzU2VsZWN0ZWQgPSAhIXRoaXMuc2VsZWN0aW9uU2VydmljZS5zZWxlY3RlZC5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHNob3VsZFN1Z2dlc3QgPSB0aGlzLnN1Z2dlc3QgJiYgIXRoaXMuYmFja3NwYWNlUHJlc3NlZCAmJiB0aGlzLnN1Z2dlc3RlZFRleHQgJiYgdGhpcy50ZXh0O1xuICAgICAgICBpZiAoIWhhc1NlbGVjdGVkICYmIHNob3VsZFN1Z2dlc3QgJiYgdGhpcy5zdWdnZXN0ZWRUZXh0LnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aCh0aGlzLnRleHQudG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN1Z2dlc3RlZFRleHQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN1Z2dlc3RlZFRleHQgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmF2aWdhdGUoaW5kZXgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGF0YVNlcnZpY2UuaXRlbXNDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudGV4dCA9IGdldHRlciQxKHRoaXMuZGF0YVNlcnZpY2UuaXRlbUF0KGluZGV4KSwgdGhpcy50ZXh0RmllbGQpO1xuICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2Uuc2VsZWN0KGluZGV4KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGhhbmRsZU5hdmlnYXRlKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IGhhc1NlbGVjdGVkID0gaXNQcmVzZW50KHRoaXMuc2VsZWN0aW9uU2VydmljZS5zZWxlY3RlZFswXSk7XG4gICAgICAgIGNvbnN0IGZvY3VzZWQgPSBpc05hTih0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCkgPyB0aGlzLmZpcnN0Rm9jdXNhYmxlSW5kZXgoMCkgOiB0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZDtcbiAgICAgICAgbGV0IG9mZnNldCA9IDA7XG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkIHx8IHRoaXMucmVhZG9ubHkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gS2V5cy5Ib21lIHx8IGV2ZW50LmtleUNvZGUgPT09IEtleXMuRW5kKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFoYXNTZWxlY3RlZCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IEtleXMuQXJyb3dEb3duKSB7XG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChldmVudC5rZXlDb2RlID09PSBLZXlzLkFycm93VXApIHtcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFjdGlvbiA9IHRoaXMubmF2aWdhdGlvblNlcnZpY2UucHJvY2Vzcyh7XG4gICAgICAgICAgICBjdXJyZW50OiBvZmZzZXQgKyBmb2N1c2VkLFxuICAgICAgICAgICAgbWF4OiB0aGlzLmRhdGFTZXJ2aWNlLml0ZW1zQ291bnQgLSAxLFxuICAgICAgICAgICAgbWluOiAwLFxuICAgICAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnRcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChhY3Rpb24gIT09IE5hdmlnYXRpb25BY3Rpb24uVW5kZWZpbmVkICYmXG4gICAgICAgICAgICBhY3Rpb24gIT09IE5hdmlnYXRpb25BY3Rpb24uTGVmdCAmJlxuICAgICAgICAgICAgYWN0aW9uICE9PSBOYXZpZ2F0aW9uQWN0aW9uLlJpZ2h0ICYmXG4gICAgICAgICAgICBhY3Rpb24gIT09IE5hdmlnYXRpb25BY3Rpb24uQmFja3NwYWNlICYmXG4gICAgICAgICAgICBhY3Rpb24gIT09IE5hdmlnYXRpb25BY3Rpb24uRGVsZXRlICYmXG4gICAgICAgICAgICAoKGFjdGlvbiA9PT0gTmF2aWdhdGlvbkFjdGlvbi5FbnRlciAmJiB0aGlzLmlzT3BlbikgfHwgYWN0aW9uICE9PSBOYXZpZ2F0aW9uQWN0aW9uLkVudGVyKSkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVFbnRlcigpIHtcbiAgICAgICAgY29uc3QgdGV4dCA9IHRoaXMudGV4dDtcbiAgICAgICAgY29uc3QgZm9jdXNlZCA9IHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1c2VkO1xuICAgICAgICBjb25zdCBoYXNGb2N1c2VkID0gaXNQcmVzZW50KGZvY3VzZWQpICYmIGZvY3VzZWQgIT09IC0xO1xuICAgICAgICBjb25zdCBwcmV2aW91c1RleHQgPSBnZXR0ZXIkMSh0aGlzLl9wcmV2aW91c0RhdGFJdGVtLCB0aGlzLnRleHRGaWVsZCkgfHwgXCJcIjtcbiAgICAgICAgY29uc3QgZm9jdXNlZEl0ZW1UZXh0ID0gZ2V0dGVyJDEodGhpcy5kYXRhU2VydmljZS5pdGVtQXQoZm9jdXNlZCksIHRoaXMudGV4dEZpZWxkKTtcbiAgICAgICAgY29uc3QgdGV4dEhhc0NoYW5nZWQgPSB0ZXh0ICE9PSBwcmV2aW91c1RleHQ7XG4gICAgICAgIHRoaXMudG9nZ2xlUG9wdXAoZmFsc2UpO1xuICAgICAgICB0aGlzLl9maWx0ZXJpbmcgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuYWxsb3dDdXN0b20gJiYgdGV4dEhhc0NoYW5nZWQpIHtcbiAgICAgICAgICAgIGlmICh0ZXh0ID09PSBmb2N1c2VkSXRlbVRleHQgfHwgdGhpcy51c2VTdWdnZXN0aW9uKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UuY2hhbmdlKGZvY3VzZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2UodGV4dCwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmFsbG93Q3VzdG9tKSB7XG4gICAgICAgICAgICBpZiAoaGFzRm9jdXNlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5jaGFuZ2UoZm9jdXNlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0ZXh0SGFzQ2hhbmdlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlKHRleHQsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBoYW5kbGVCbHVyKCkge1xuICAgICAgICB0aGlzLl9maWx0ZXJpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zZWFyY2hiYXIuaW5wdXQubmF0aXZlRWxlbWVudC5zY3JvbGxMZWZ0ID0gMDsgLy8gRmlyZWZveCBkb2Vzbid0IGF1dG8tc2Nyb2xsIHRvIHRoZSBsZWZ0IG9uIGJsdXIgbGlrZSBvdGhlciBicm93c2Vyc1xuICAgICAgICB0aGlzLmlzRm9jdXNlZCA9IGZhbHNlO1xuICAgICAgICBjb25zdCB1bnJlc29sdmVkU2VsZWN0aW9uID0gZ2V0dGVyJDEodGhpcy5kYXRhSXRlbSwgdGhpcy52YWx1ZUZpZWxkKSAhPT0gZ2V0dGVyJDEodGhpcy52YWx1ZSwgdGhpcy52YWx1ZUZpZWxkKTtcbiAgICAgICAgY29uc3QgY3VycmVudFRleHQgPSB0aGlzLnNlYXJjaGJhci52YWx1ZTtcbiAgICAgICAgY29uc3QgdGV4dEhhc0NoYW5nZWQgPSBjdXJyZW50VGV4dCAhPT0gKGdldHRlciQxKHRoaXMuZGF0YUl0ZW0sIHRoaXMudGV4dEZpZWxkKSB8fCAnJyk7XG4gICAgICAgIGNvbnN0IHZhbHVlSGFzQ2hhbmdlZCA9IHVucmVzb2x2ZWRTZWxlY3Rpb24gfHwgdGV4dEhhc0NoYW5nZWQ7XG4gICAgICAgIGNvbnN0IHJ1bkluWm9uZSA9IHZhbHVlSGFzQ2hhbmdlZCB8fCBoYXNPYnNlcnZlcnModGhpcy5vbkJsdXIpIHx8IGhhc09ic2VydmVycyh0aGlzLmNsb3NlKSB8fCBpc1VudG91Y2hlZCh0aGlzLmhvc3RFbGVtZW50Lm5hdGl2ZUVsZW1lbnQpO1xuICAgICAgICBpZiAocnVuSW5ab25lKSB7XG4gICAgICAgICAgICB0aGlzLnpvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWVIYXNDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvd2VyQ2FzZU1hdGNoID0gaXNQcmVzZW50KHRoaXMuZm9jdXNlZEl0ZW1UZXh0KSAmJiB0aGlzLmZvY3VzZWRJdGVtVGV4dC50b0xvd2VyQ2FzZSgpID09PSBjdXJyZW50VGV4dC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobG93ZXJDYXNlTWF0Y2ggfHwgdW5yZXNvbHZlZFNlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmNoYW5nZSh0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZShjdXJyZW50VGV4dCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5vbkJsdXIuZW1pdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMub25Ub3VjaGVkQ2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZVBvcHVwKGZhbHNlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVQb3B1cChmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGhhbmRsZUVzY2FwZSgpIHtcbiAgICAgICAgdGhpcy50b2dnbGVQb3B1cChmYWxzZSk7XG4gICAgICAgIC8vIGNsZWFyIHRoZSBmb2N1cyBvbmx5IGlmIHRoZSBmb2N1c2VkIGl0ZW0gaXMgbm90IHNlbGVjdGVkXG4gICAgICAgIGNvbnN0IGhhc1NlbGVjdGVkID0gdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLnNlbGVjdGVkLmxlbmd0aCA+IDA7XG4gICAgICAgIGlmICghaGFzU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3VnZ2VzdGVkVGV4dCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCA9IC0xO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBoYW5kbGVOYXZpZ2F0aW9uT3BlbigpIHtcbiAgICAgICAgdGhpcy5yZXN0b3JlSXRlbUZvY3VzKCk7XG4gICAgICAgIHRoaXMudG9nZ2xlUG9wdXAodHJ1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzZWFyY2hCYXJDaGFuZ2UodGV4dCkge1xuICAgICAgICBjb25zdCBjdXJyZW50VGV4dExlbmd0aCA9IHRoaXMudGV4dCA/IHRoaXMudGV4dC5sZW5ndGggOiAwO1xuICAgICAgICB0aGlzLmJhY2tzcGFjZVByZXNzZWQgPSAodGV4dC5sZW5ndGggPCBjdXJyZW50VGV4dExlbmd0aCkgPyB0cnVlIDogZmFsc2U7XG4gICAgICAgIHRoaXMudGV4dCA9IHRleHQ7XG4gICAgICAgIC8vIFJlc2V0IHRoZSBzZWxlY3Rpb24gcHJpb3IgdG8gZmlsdGVyLiBJZiBhIG1hdGNoIGlzIHByZXNlbnQsIGl0IHdpbGwgYmUgcmVzb2x2ZWQuIElmIGEgbWF0Y2ggaXMgbm90IHByZXNlbnQsIGl0IGlzIG5vdCBuZWVkZWQuXG4gICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5yZXNldFNlbGVjdGlvbihbXSk7XG4gICAgICAgIHRoaXMudG9nZ2xlUG9wdXAodHJ1ZSk7XG4gICAgICAgIHRoaXMuX2ZpbHRlcmluZyA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLmZpbHRlcmFibGUgJiYgdGhpcy5maWx0ZXJUZXh0ICE9PSB0ZXh0KSB7XG4gICAgICAgICAgICB0aGlzLmZpbHRlclRleHQgPSB0ZXh0O1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJDaGFuZ2UuZW1pdCh0ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoKHRleHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBoYW5kbGVGb2N1cygpIHtcbiAgICAgICAgdGhpcy5pc0ZvY3VzZWQgPSB0cnVlO1xuICAgICAgICBpZiAoaGFzT2JzZXJ2ZXJzKHRoaXMub25Gb2N1cykpIHtcbiAgICAgICAgICAgIHRoaXMuem9uZS5ydW4oKCkgPT4gdGhpcy5vbkZvY3VzLmVtaXQoKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHBhZ2VDaGFuZ2UoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgdmlydHVhbCA9IHRoaXMudmlydHVhbDtcbiAgICAgICAgdmlydHVhbC5za2lwID0gZXZlbnQuc2tpcDtcbiAgICB9XG4gICAgY2hhbmdlKGNhbmRpZGF0ZSwgaXNDdXN0b20gPSBmYWxzZSkge1xuICAgICAgICBpZiAoaXNDdXN0b20pIHtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tVmFsdWVTdWJqZWN0Lm5leHQoY2FuZGlkYXRlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWVTdWJqZWN0Lm5leHQoY2FuZGlkYXRlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbWl0VmFsdWVDaGFuZ2UoKSB7XG4gICAgICAgIHRoaXMub25DaGFuZ2VDYWxsYmFjayh0aGlzLnZhbHVlKTtcbiAgICAgICAgdGhpcy52YWx1ZUNoYW5nZS5lbWl0KHRoaXMudmFsdWUpO1xuICAgICAgICB0aGlzLl9wcmV2aW91c0RhdGFJdGVtID0gdGhpcy5kYXRhSXRlbTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHNlbGVjdENsaWNrKCkge1xuICAgICAgICBpZiAoIXRoaXMudG91Y2hFbmFibGVkKSB7XG4gICAgICAgICAgICB0aGlzLnNlYXJjaGJhci5mb2N1cygpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5pc09wZW4pIHtcbiAgICAgICAgICAgIHRoaXMucmVzdG9yZUl0ZW1Gb2N1cygpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudG9nZ2xlUG9wdXAoIXRoaXMuaXNPcGVuKTtcbiAgICB9XG4gICAgZ2V0IGxpc3RDb250YWluZXJDbGFzc2VzKCkge1xuICAgICAgICByZXR1cm4gWydrLWxpc3QtY29udGFpbmVyJywgJ2stcmVzZXQnXS5jb25jYXQodGhpcy5wb3B1cFNldHRpbmdzLnBvcHVwQ2xhc3MgfHwgW10pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgcHJldmVudEV2ZW50RGVmYXVsdChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgICBnZXQgZm9jdXNlZEl0ZW1UZXh0KCkge1xuICAgICAgICBjb25zdCBmb2N1c2VkID0gdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzZWQ7XG4gICAgICAgIGlmICghaXNQcmVzZW50KGZvY3VzZWQpIHx8IGZvY3VzZWQgPT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpdGVtVGV4dCA9IGdldHRlciQxKHRoaXMuZGF0YVNlcnZpY2UuaXRlbUF0KGZvY3VzZWQpLCB0aGlzLnRleHRGaWVsZCk7XG4gICAgICAgIHJldHVybiAhaXNQcmVzZW50KGl0ZW1UZXh0KSA/IFwiXCIgOiBpdGVtVGV4dC50b1N0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb2N1c2VzIHRoZSBmaXJzdCBtYXRjaCB3aGVuIHRoZXJlJ3MgdGV4dCBpbiB0aGUgaW5wdXQgZmllbGQsIGJ1dCBubyBmb2N1c2VkIGl0ZW0uXG4gICAgICovXG4gICAgcmVzdG9yZUl0ZW1Gb2N1cygpIHtcbiAgICAgICAgY29uc3QgaGFzRm9jdXMgPSBpc1ByZXNlbnQodGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzZWQpICYmIHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1c2VkID4gLTE7XG4gICAgICAgIGlmICghaGFzRm9jdXMgJiYgdGhpcy50ZXh0ICYmIHRoaXMuZGF0YVNlcnZpY2UuaXRlbXNDb3VudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZmlsdGVyYWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1c2VkID0gdGhpcy5maXJzdEZvY3VzYWJsZUluZGV4KDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWFyY2godGhpcy50ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB1c2VTdWdnZXN0aW9uKCkge1xuICAgICAgICBpZiAoISh0aGlzLnN1Z2dlc3QgJiYgaXNQcmVzZW50KHRoaXMuc2VhcmNoYmFyLnZhbHVlKSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmb2N1c2VkRGF0YUl0ZW0gPSB0aGlzLmRhdGFTZXJ2aWNlLml0ZW1BdCh0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCk7XG4gICAgICAgIGNvbnN0IGZvY3VzZWRJdGVtVGV4dCA9IGdldHRlciQxKGZvY3VzZWREYXRhSXRlbSwgdGhpcy50ZXh0RmllbGQpO1xuICAgICAgICBpZiAoIWlzUHJlc2VudChmb2N1c2VkSXRlbVRleHQpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuc2VhcmNoYmFyLnZhbHVlLnRvTG93ZXJDYXNlKCkgPT09IGZvY3VzZWRJdGVtVGV4dC50b0xvd2VyQ2FzZSgpO1xuICAgIH1cbiAgICBkZXN0cm95UG9wdXAoKSB7XG4gICAgICAgIGlmICh0aGlzLnBvcHVwUmVmKSB7XG4gICAgICAgICAgICB0aGlzLnBvcHVwUmVmLnBvcHVwRWxlbWVudFxuICAgICAgICAgICAgICAgIC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLnBvcHVwTW91c2VEb3duSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBvcHVwUmVmLmNsb3NlKCk7XG4gICAgICAgICAgICB0aGlzLnBvcHVwUmVmID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjcmVhdGVQb3B1cCgpIHtcbiAgICAgICAgaWYgKHRoaXMudmlydHVhbCkge1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsLnNraXAgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhvcml6b250YWxBbGlnbiA9IHRoaXMuZGlyZWN0aW9uID09PSBcInJ0bFwiID8gXCJyaWdodFwiIDogXCJsZWZ0XCI7XG4gICAgICAgIGNvbnN0IGFuY2hvclBvc2l0aW9uID0geyBob3Jpem9udGFsOiBob3Jpem9udGFsQWxpZ24sIHZlcnRpY2FsOiBcImJvdHRvbVwiIH07XG4gICAgICAgIGNvbnN0IHBvcHVwUG9zaXRpb24gPSB7IGhvcml6b250YWw6IGhvcml6b250YWxBbGlnbiwgdmVydGljYWw6IFwidG9wXCIgfTtcbiAgICAgICAgdGhpcy5wb3B1cFJlZiA9IHRoaXMucG9wdXBTZXJ2aWNlLm9wZW4oe1xuICAgICAgICAgICAgYW5jaG9yOiB0aGlzLndyYXBwZXIsXG4gICAgICAgICAgICBhbmltYXRlOiB0aGlzLnBvcHVwU2V0dGluZ3MuYW5pbWF0ZSxcbiAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmFwcGVuZFRvLFxuICAgICAgICAgICAgY29udGVudDogdGhpcy5wb3B1cFRlbXBsYXRlLFxuICAgICAgICAgICAgcG9wdXBDbGFzczogdGhpcy5saXN0Q29udGFpbmVyQ2xhc3NlcyxcbiAgICAgICAgICAgIHBvc2l0aW9uTW9kZTogJ2Fic29sdXRlJyxcbiAgICAgICAgICAgIGFuY2hvckFsaWduOiBhbmNob3JQb3NpdGlvbixcbiAgICAgICAgICAgIHBvcHVwQWxpZ246IHBvcHVwUG9zaXRpb25cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHBvcHVwV3JhcHBlciA9IHRoaXMucG9wdXBSZWYucG9wdXBFbGVtZW50O1xuICAgICAgICBjb25zdCB7IG1pbiwgbWF4IH0gPSB0aGlzLnBvcHVwV2lkdGg7XG4gICAgICAgIHBvcHVwV3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLnBvcHVwTW91c2VEb3duSGFuZGxlcik7XG4gICAgICAgIHBvcHVwV3JhcHBlci5zdHlsZS5taW5XaWR0aCA9IG1pbjtcbiAgICAgICAgcG9wdXBXcmFwcGVyLnN0eWxlLndpZHRoID0gbWF4O1xuICAgICAgICBwb3B1cFdyYXBwZXIuc3R5bGUuaGVpZ2h0ID0gdGhpcy5wb3B1cEhlaWdodDtcbiAgICAgICAgcG9wdXBXcmFwcGVyLnNldEF0dHJpYnV0ZShcImRpclwiLCB0aGlzLmRpcmVjdGlvbik7XG4gICAgICAgIHRoaXMucG9wdXBSZWYucG9wdXBPcGVuLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnNMaXN0LnNjcm9sbFRvSXRlbSh0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCk7XG4gICAgICAgICAgICB0aGlzLm9wZW5lZC5lbWl0KCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnBvcHVwUmVmLnBvcHVwQ2xvc2Uuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VkLmVtaXQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucG9wdXBSZWYucG9wdXBBbmNob3JWaWV3cG9ydExlYXZlLnN1YnNjcmliZSgoKSA9PiB0aGlzLnRvZ2dsZVBvcHVwKGZhbHNlKSk7XG4gICAgfVxuICAgIF90b2dnbGUob3Blbikge1xuICAgICAgICB0aGlzLl9vcGVuID0gb3BlbjtcbiAgICAgICAgdGhpcy5kZXN0cm95UG9wdXAoKTtcbiAgICAgICAgaWYgKHRoaXMuX29wZW4pIHtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUG9wdXAoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0cmlnZ2VyUG9wdXBFdmVudHMob3Blbikge1xuICAgICAgICBjb25zdCBldmVudEFyZ3MgPSBuZXcgUHJldmVudGFibGVFdmVudCgpO1xuICAgICAgICBpZiAob3Blbikge1xuICAgICAgICAgICAgdGhpcy5vcGVuLmVtaXQoZXZlbnRBcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UuZW1pdChldmVudEFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBldmVudEFyZ3MuaXNEZWZhdWx0UHJldmVudGVkKCk7XG4gICAgfVxuICAgIGNsZWFyRmlsdGVyKCkge1xuICAgICAgICBpZiAoISh0aGlzLmZpbHRlcmFibGUgJiYgdGhpcy5maWx0ZXJUZXh0KSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmlsdGVyVGV4dCA9ICcnO1xuICAgICAgICB0aGlzLmZpbHRlckNoYW5nZS5lbWl0KHRoaXMuZmlsdGVyVGV4dCk7XG4gICAgfVxuICAgIHNldE1lc3NhZ2VzKCkge1xuICAgICAgICB0aGlzLnpvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubWVzc2FnZXNUaW1lb3V0KTtcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZXNUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5ub0RhdGFUZXh0ID0gdGhpcy5sb2NhbGl6YXRpb24uZ2V0KCdub0RhdGFUZXh0Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdWJzY3JpYmVUb3VjaEV2ZW50cygpIHtcbiAgICAgICAgaWYgKCFpc0RvY3VtZW50QXZhaWxhYmxlKCkgfHwgIXRoaXMudG91Y2hFbmFibGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy56b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IFxuICAgICAgICAvLyBSb2xsIHVwIENvbWJvQm94IG9uIGlPUyB3aGVuIHRhcHBlZCBvdXRzaWRlXG4gICAgICAgIHRoaXMudG91Y2hzdGFydERpc3Bvc2VIYW5kbGVyID0gdGhpcy5yZW5kZXJlci5saXN0ZW4oZG9jdW1lbnQsICd0b3VjaHN0YXJ0JywgKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgY29uc3QgaXNJbkRyb3BEb3duID0gaW5Ecm9wRG93bih0aGlzLmhvc3RFbGVtZW50LCB0YXJnZXQsIHRoaXMucG9wdXBSZWYpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNGb2N1c2VkICYmICFpc0luRHJvcERvd24pIHtcbiAgICAgICAgICAgICAgICAvLyBDbG9zZSBwb3B1cCBhbmQgbW9iaWxlIGtleWJvYXJkIGlmIHNlYXJjaGJhciBpcyBmb2N1c2VkXG4gICAgICAgICAgICAgICAgdGhpcy56b25lLnJ1bigoKSA9PiB0aGlzLmJsdXIoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmlzT3BlbiAmJiAhaXNJbkRyb3BEb3duKSB7XG4gICAgICAgICAgICAgICAgLy8gQ2xvc2UgcG9wdXAgaWYgdGhlIHBvcHVwIGlzIG9wZW5lZCB2aWEgdGhlIHNlbGVjdCBjbGlja1xuICAgICAgICAgICAgICAgIHRoaXMuem9uZS5ydW4oKCkgPT4gdGhpcy50b2dnbGVQb3B1cChmYWxzZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGF0dGFjaFNlbGVjdENsaWNrSGFuZGxlcigpIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0RWxlbWVudCA9IHRoaXMuc2VsZWN0Lm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IGV2ZW50ID0gcG9pbnRlcnMgPyAncG9pbnRlcmRvd24nIDogJ2NsaWNrJztcbiAgICAgICAgdGhpcy5zZWxlY3RDbGlja0Rpc3Bvc2VIYW5kbGVyID0gdGhpcy5yZW5kZXJlci5saXN0ZW4oc2VsZWN0RWxlbWVudCwgZXZlbnQsIHRoaXMuc2VsZWN0Q2xpY2suYmluZCh0aGlzKSk7XG4gICAgfVxufTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIENvbWJvQm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJmb2N1c2FibGVJZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIENvbWJvQm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJhbGxvd0N1c3RvbVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pXG5dLCBDb21ib0JveENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGF0YVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKVxuXSwgQ29tYm9Cb3hDb21wb25lbnQucHJvdG90eXBlLCBcInZhbHVlXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgQ29tYm9Cb3hDb21wb25lbnQucHJvdG90eXBlLCBcInRleHRGaWVsZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgQ29tYm9Cb3hDb21wb25lbnQucHJvdG90eXBlLCBcInZhbHVlRmllbGRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQm9vbGVhbl0pXG5dLCBDb21ib0JveENvbXBvbmVudC5wcm90b3R5cGUsIFwidmFsdWVQcmltaXRpdmVcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBGdW5jdGlvbilcbl0sIENvbWJvQm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ2YWx1ZU5vcm1hbGl6ZXJcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIENvbWJvQm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJwbGFjZWhvbGRlclwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pXG5dLCBDb21ib0JveENvbXBvbmVudC5wcm90b3R5cGUsIFwicG9wdXBTZXR0aW5nc1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlcilcbl0sIENvbWJvQm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJsaXN0SGVpZ2h0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBDb21ib0JveENvbXBvbmVudC5wcm90b3R5cGUsIFwiaWNvbkNsYXNzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgQ29tYm9Cb3hDb21wb25lbnQucHJvdG90eXBlLCBcImxvYWRpbmdcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBDb21ib0JveENvbXBvbmVudC5wcm90b3R5cGUsIFwic3VnZ2VzdFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIENvbWJvQm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJjbGVhckJ1dHRvblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIENvbWJvQm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXNhYmxlZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbRnVuY3Rpb25dKVxuXSwgQ29tYm9Cb3hDb21wb25lbnQucHJvdG90eXBlLCBcIml0ZW1EaXNhYmxlZFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBDb21ib0JveENvbXBvbmVudC5wcm90b3R5cGUsIFwicmVhZG9ubHlcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlcilcbl0sIENvbWJvQm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ0YWJpbmRleFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoXCJ0YWJJbmRleFwiKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW051bWJlcl0pXG5dLCBDb21ib0JveENvbXBvbmVudC5wcm90b3R5cGUsIFwidGFiSW5kZXhcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgQ29tYm9Cb3hDb21wb25lbnQucHJvdG90eXBlLCBcImZpbHRlcmFibGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKVxuXSwgQ29tYm9Cb3hDb21wb25lbnQucHJvdG90eXBlLCBcInZpcnR1YWxcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgQ29tYm9Cb3hDb21wb25lbnQucHJvdG90eXBlLCBcInZhbHVlQ2hhbmdlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgQ29tYm9Cb3hDb21wb25lbnQucHJvdG90eXBlLCBcInNlbGVjdGlvbkNoYW5nZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIENvbWJvQm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJmaWx0ZXJDaGFuZ2VcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBDb21ib0JveENvbXBvbmVudC5wcm90b3R5cGUsIFwib3BlblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIENvbWJvQm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJvcGVuZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBDb21ib0JveENvbXBvbmVudC5wcm90b3R5cGUsIFwiY2xvc2VcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBDb21ib0JveENvbXBvbmVudC5wcm90b3R5cGUsIFwiY2xvc2VkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoJ2ZvY3VzJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIENvbWJvQm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJvbkZvY3VzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoJ2JsdXInKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgQ29tYm9Cb3hDb21wb25lbnQucHJvdG90eXBlLCBcIm9uQmx1clwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgQ29udGVudENoaWxkKEl0ZW1UZW1wbGF0ZURpcmVjdGl2ZSwgeyBzdGF0aWM6IGZhbHNlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBJdGVtVGVtcGxhdGVEaXJlY3RpdmUpXG5dLCBDb21ib0JveENvbXBvbmVudC5wcm90b3R5cGUsIFwidGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIENvbnRlbnRDaGlsZChIZWFkZXJUZW1wbGF0ZURpcmVjdGl2ZSwgeyBzdGF0aWM6IGZhbHNlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBIZWFkZXJUZW1wbGF0ZURpcmVjdGl2ZSlcbl0sIENvbWJvQm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJoZWFkZXJUZW1wbGF0ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgQ29udGVudENoaWxkKEZvb3RlclRlbXBsYXRlRGlyZWN0aXZlLCB7IHN0YXRpYzogZmFsc2UgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZvb3RlclRlbXBsYXRlRGlyZWN0aXZlKVxuXSwgQ29tYm9Cb3hDb21wb25lbnQucHJvdG90eXBlLCBcImZvb3RlclRlbXBsYXRlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBDb250ZW50Q2hpbGQoTm9EYXRhVGVtcGxhdGVEaXJlY3RpdmUsIHsgc3RhdGljOiBmYWxzZSB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTm9EYXRhVGVtcGxhdGVEaXJlY3RpdmUpXG5dLCBDb21ib0JveENvbXBvbmVudC5wcm90b3R5cGUsIFwibm9EYXRhVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIENvbnRlbnRDaGlsZChHcm91cFRlbXBsYXRlRGlyZWN0aXZlLCB7IHN0YXRpYzogZmFsc2UgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEdyb3VwVGVtcGxhdGVEaXJlY3RpdmUpXG5dLCBDb21ib0JveENvbXBvbmVudC5wcm90b3R5cGUsIFwiZ3JvdXBUZW1wbGF0ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgQ29udGVudENoaWxkKEZpeGVkR3JvdXBUZW1wbGF0ZURpcmVjdGl2ZSwgeyBzdGF0aWM6IGZhbHNlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBGaXhlZEdyb3VwVGVtcGxhdGVEaXJlY3RpdmUpXG5dLCBDb21ib0JveENvbXBvbmVudC5wcm90b3R5cGUsIFwiZml4ZWRHcm91cFRlbXBsYXRlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBWaWV3Q2hpbGQoJ2NvbnRhaW5lcicsIHsgcmVhZDogVmlld0NvbnRhaW5lclJlZiwgc3RhdGljOiB0cnVlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBWaWV3Q29udGFpbmVyUmVmKVxuXSwgQ29tYm9Cb3hDb21wb25lbnQucHJvdG90eXBlLCBcImNvbnRhaW5lclwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgVmlld0NoaWxkKCdwb3B1cFRlbXBsYXRlJywgeyBzdGF0aWM6IHRydWUgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFRlbXBsYXRlUmVmKVxuXSwgQ29tYm9Cb3hDb21wb25lbnQucHJvdG90eXBlLCBcInBvcHVwVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIFZpZXdDaGlsZChTZWFyY2hCYXJDb21wb25lbnQsIHsgc3RhdGljOiB0cnVlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTZWFyY2hCYXJDb21wb25lbnQpXG5dLCBDb21ib0JveENvbXBvbmVudC5wcm90b3R5cGUsIFwic2VhcmNoYmFyXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBWaWV3Q2hpbGQoJ29wdGlvbnNMaXN0JywgeyBzdGF0aWM6IGZhbHNlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBMaXN0Q29tcG9uZW50KVxuXSwgQ29tYm9Cb3hDb21wb25lbnQucHJvdG90eXBlLCBcIm9wdGlvbnNMaXN0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBWaWV3Q2hpbGQoJ3dyYXBwZXInLCB7IHN0YXRpYzogdHJ1ZSB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRWxlbWVudFJlZilcbl0sIENvbWJvQm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ3cmFwcGVyXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBWaWV3Q2hpbGQoJ3NlbGVjdCcsIHsgc3RhdGljOiB0cnVlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFbGVtZW50UmVmKVxuXSwgQ29tYm9Cb3hDb21wb25lbnQucHJvdG90eXBlLCBcInNlbGVjdFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmstd2lkZ2V0JyksXG4gICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmstY29tYm9ib3gnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIENvbWJvQm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ3aWRnZXRDbGFzc2VzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay1jb21ib2JveC1jbGVhcmFibGUnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgQ29tYm9Cb3hDb21wb25lbnQucHJvdG90eXBlLCBcImNsZWFyYWJsZVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdhdHRyLmRpcicpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIENvbWJvQm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXJcIiwgbnVsbCk7XG5Db21ib0JveENvbXBvbmVudCA9IENvbWJvQm94Q29tcG9uZW50XzEgPSBfX2RlY29yYXRlKFtcbiAgICBDb21wb25lbnQoe1xuICAgICAgICBleHBvcnRBczogJ2tlbmRvQ29tYm9Cb3gnLFxuICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgIENPTUJPQk9YX1ZBTFVFX0FDQ0VTU09SLFxuICAgICAgICAgICAgRGF0YVNlcnZpY2UsXG4gICAgICAgICAgICBTZWxlY3Rpb25TZXJ2aWNlLFxuICAgICAgICAgICAgTmF2aWdhdGlvblNlcnZpY2UsXG4gICAgICAgICAgICBEaXNhYmxlZEl0ZW1zU2VydmljZSxcbiAgICAgICAgICAgIExvY2FsaXphdGlvblNlcnZpY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZTogTDEwTl9QUkVGSVgsXG4gICAgICAgICAgICAgICAgdXNlVmFsdWU6ICdrZW5kby5jb21ib2JveCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZTogRmlsdGVyYWJsZUNvbXBvbmVudCwgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gQ29tYm9Cb3hDb21wb25lbnRfMSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZTogS2VuZG9JbnB1dCwgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gQ29tYm9Cb3hDb21wb25lbnRfMSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgc2VsZWN0b3I6ICdrZW5kby1jb21ib2JveCcsXG4gICAgICAgIHRlbXBsYXRlOiBgXG4gICAgICAgIDxuZy1jb250YWluZXIga2VuZG9Db21ib0JveExvY2FsaXplZE1lc3NhZ2VzXG4gICAgICAgICAgICBpMThuLW5vRGF0YVRleHQ9XCJrZW5kby5jb21ib2JveC5ub0RhdGFUZXh0fFRoZSB0ZXh0IGRpc3BsYXllZCBpbiB0aGUgcG9wdXAgd2hlbiB0aGVyZSBhcmUgbm8gaXRlbXNcIlxuICAgICAgICAgICAgbm9EYXRhVGV4dD1cIk5PIERBVEEgRk9VTkRcIlxuXG4gICAgICAgICAgICBpMThuLWNsZWFyVGl0bGU9XCJrZW5kby5jb21ib2JveC5jbGVhclRpdGxlfFRoZSB0aXRsZSBvZiB0aGUgY2xlYXIgYnV0dG9uXCJcbiAgICAgICAgICAgIGNsZWFyVGl0bGU9XCJjbGVhclwiXG4gICAgICAgID5cbiAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgIDxzcGFuICN3cmFwcGVyIHVuc2VsZWN0YWJsZT1cIm9uXCJcbiAgICAgICAgICAgIGNsYXNzPVwiay1kcm9wZG93bi13cmFwXCJcbiAgICAgICAgICAgIFtuZ0NsYXNzXT1cInsnay1zdGF0ZS1kaXNhYmxlZCc6IGRpc2FibGVkIH1cIlxuICAgICAgICA+XG4gICAgICAgICAgPGtlbmRvLXNlYXJjaGJhciAjc2VhcmNoYmFyXG4gICAgICAgICAgICAgIFtyb2xlXT1cIidjb21ib2JveCdcIlxuICAgICAgICAgICAgICBbaWRdPVwiZm9jdXNhYmxlSWRcIlxuICAgICAgICAgICAgICBbbGlzdElkXT1cImxpc3RCb3hJZFwiXG4gICAgICAgICAgICAgIFthY3RpdmVEZXNjZW5kYW50XT1cImFjdGl2ZURlc2NlbmRhbnRcIlxuICAgICAgICAgICAgICBbbm9EYXRhTGFiZWxdPVwibm9EYXRhTGFiZWxcIlxuICAgICAgICAgICAgICBbdXNlcklucHV0XT1cInRleHRcIlxuICAgICAgICAgICAgICBbc3VnZ2VzdGVkVGV4dF09XCJnZXRTdWdnZXN0aW9uKClcIlxuICAgICAgICAgICAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWRcIlxuICAgICAgICAgICAgICBbcmVhZG9ubHldPVwicmVhZG9ubHlcIlxuICAgICAgICAgICAgICBbdGFiSW5kZXhdPVwidGFiSW5kZXhcIlxuICAgICAgICAgICAgICBbcG9wdXBPcGVuXT1cImlzT3BlblwiXG4gICAgICAgICAgICAgIFtwbGFjZWhvbGRlcl09XCJwbGFjZWhvbGRlclwiXG4gICAgICAgICAgICAgIChvbk5hdmlnYXRlKT1cImhhbmRsZU5hdmlnYXRlKCRldmVudClcIlxuICAgICAgICAgICAgICAodmFsdWVDaGFuZ2UpPVwic2VhcmNoQmFyQ2hhbmdlKCRldmVudClcIlxuICAgICAgICAgICAgICAob25CbHVyKT1cImhhbmRsZUJsdXIoKVwiXG4gICAgICAgICAgICAgIChvbkZvY3VzKT1cImhhbmRsZUZvY3VzKClcIlxuICAgICAgICAgID48L2tlbmRvLXNlYXJjaGJhcj5cbiAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAqbmdJZj1cImNsZWFyQnV0dG9uICYmICFsb2FkaW5nICYmICFkaXNhYmxlZCAmJiAhcmVhZG9ubHkgJiYgdGV4dD8ubGVuZ3RoXCJcbiAgICAgICAgICAgICAgY2xhc3M9XCJrLWljb24gay1jbGVhci12YWx1ZSBrLWktY2xvc2VcIlxuICAgICAgICAgICAgICBbc3R5bGUudmlzaWJpbGl0eV09XCJjbGVhckJ1dHRvblZpc2libGl0eVwiXG4gICAgICAgICAgICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXG4gICAgICAgICAgICAgIFthdHRyLnRpdGxlXT1cImNsZWFyVGl0bGVcIlxuICAgICAgICAgICAgICAoY2xpY2spPVwiY2xlYXJWYWx1ZSgkZXZlbnQpXCJcbiAgICAgICAgICAgICAgW2tlbmRvRXZlbnRzT3V0c2lkZUFuZ3VsYXJdPVwie1xuICAgICAgICAgICAgICAgICAgICBtb3VzZWRvd246IHByZXZlbnRFdmVudERlZmF1bHRcbiAgICAgICAgICAgICAgfVwiXG4gICAgICAgICAgPlxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAjc2VsZWN0XG4gICAgICAgICAgICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXG4gICAgICAgICAgICAgIHVuc2VsZWN0YWJsZT1cIm9uXCJcbiAgICAgICAgICAgICAgY2xhc3M9XCJrLXNlbGVjdFwiXG4gICAgICAgICAgICAgIFtrZW5kb0V2ZW50c091dHNpZGVBbmd1bGFyXT1cIntcbiAgICAgICAgICAgICAgICAgIG1vdXNlZG93bjogcHJldmVudEV2ZW50RGVmYXVsdFxuICAgICAgICAgICAgICB9XCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiay1pY29uXCIgW25nQ2xhc3NdPVwiYnV0dG9uQ2xhc3Nlc1wiPlxuICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8bmctdGVtcGxhdGUgI3BvcHVwVGVtcGxhdGU+XG4gICAgICAgICAgICAgIDwhLS1oZWFkZXIgdGVtcGxhdGUtLT5cbiAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlICpuZ0lmPVwiaGVhZGVyVGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgICAgW3RlbXBsYXRlQ29udGV4dF09XCJ7XG4gICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVSZWY6IGhlYWRlclRlbXBsYXRlLnRlbXBsYXRlUmVmXG4gICAgICAgICAgICAgICAgICB9XCI+XG4gICAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICAgIDwhLS1saXN0LS0+XG4gICAgICAgICAgICAgIDxrZW5kby1saXN0XG4gICAgICAgICAgICAgICAgICAjb3B0aW9uc0xpc3RcbiAgICAgICAgICAgICAgICAgIFtpZF09XCJsaXN0Qm94SWRcIlxuICAgICAgICAgICAgICAgICAgW29wdGlvblByZWZpeF09XCJvcHRpb25QcmVmaXhcIlxuICAgICAgICAgICAgICAgICAgW2RhdGFdPVwiZGF0YVwiXG4gICAgICAgICAgICAgICAgICBbdGV4dEZpZWxkXT1cInRleHRGaWVsZFwiXG4gICAgICAgICAgICAgICAgICBbdmFsdWVGaWVsZF09XCJ2YWx1ZUZpZWxkXCJcbiAgICAgICAgICAgICAgICAgIFt0ZW1wbGF0ZV09XCJ0ZW1wbGF0ZVwiXG4gICAgICAgICAgICAgICAgICBbZ3JvdXBUZW1wbGF0ZV09XCJncm91cFRlbXBsYXRlXCJcbiAgICAgICAgICAgICAgICAgIFtmaXhlZEdyb3VwVGVtcGxhdGVdPVwiZml4ZWRHcm91cFRlbXBsYXRlXCJcbiAgICAgICAgICAgICAgICAgIFtoZWlnaHRdPVwibGlzdEhlaWdodFwiXG4gICAgICAgICAgICAgICAgICBbc2hvd109XCJpc09wZW5cIlxuICAgICAgICAgICAgICAgICAgW3ZpcnR1YWxdPVwidmlydHVhbFwiXG4gICAgICAgICAgICAgICAgICAocGFnZUNoYW5nZSk9XCJwYWdlQ2hhbmdlKCRldmVudClcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDwva2VuZG8tbGlzdD5cbiAgICAgICAgICAgICAgPCEtLW5vLWRhdGEgdGVtcGxhdGUtLT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImstbm9kYXRhXCIgKm5nSWY9XCJkYXRhLmxlbmd0aCA9PT0gMFwiPlxuICAgICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlIFtuZ0lmXT1cIm5vRGF0YVRlbXBsYXRlXCJcbiAgICAgICAgICAgICAgICAgICAgICBbdGVtcGxhdGVDb250ZXh0XT1cIntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVSZWY6IG5vRGF0YVRlbXBsYXRlID8gbm9EYXRhVGVtcGxhdGUudGVtcGxhdGVSZWYgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICB9XCI+XG4gICAgICAgICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlIFtuZ0lmXT1cIiFub0RhdGFUZW1wbGF0ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXY+e3sgbm9EYXRhVGV4dCB9fTwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwhLS1mb290ZXIgdGVtcGxhdGUtLT5cbiAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlICpuZ0lmPVwiZm9vdGVyVGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgICAgW3RlbXBsYXRlQ29udGV4dF09XCJ7XG4gICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVSZWY6IGZvb3RlclRlbXBsYXRlLnRlbXBsYXRlUmVmXG4gICAgICAgICAgICAgICAgICB9XCI+XG4gICAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgPC9zcGFuPlxuICAgICAgICA8bmctdGVtcGxhdGUgW25nSWZdPVwiaXNPcGVuXCI+XG4gICAgICAgICAgICA8a2VuZG8tcmVzaXplLXNlbnNvciAocmVzaXplKT1cIm9uUmVzaXplKClcIj48L2tlbmRvLXJlc2l6ZS1zZW5zb3I+XG4gICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgIDxuZy1jb250YWluZXIgI2NvbnRhaW5lcj48L25nLWNvbnRhaW5lcj5cbiAgYFxuICAgIH0pLFxuICAgIF9fcGFyYW0oMTAsIE9wdGlvbmFsKCkpLCBfX3BhcmFtKDEwLCBJbmplY3QoVE9VQ0hfRU5BQkxFRCkpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTG9jYWxpemF0aW9uU2VydmljZSxcbiAgICAgICAgUG9wdXBTZXJ2aWNlLFxuICAgICAgICBTZWxlY3Rpb25TZXJ2aWNlLFxuICAgICAgICBOYXZpZ2F0aW9uU2VydmljZSxcbiAgICAgICAgRGlzYWJsZWRJdGVtc1NlcnZpY2UsXG4gICAgICAgIERhdGFTZXJ2aWNlLFxuICAgICAgICBOZ1pvbmUsXG4gICAgICAgIENoYW5nZURldGVjdG9yUmVmLFxuICAgICAgICBSZW5kZXJlcjIsXG4gICAgICAgIEVsZW1lbnRSZWYsIEJvb2xlYW5dKVxuXSwgQ29tYm9Cb3hDb21wb25lbnQpO1xuXG4vKipcbiAqIFJlbmRlcnMgdGhlIHNlbGVjdGVkIHZhbHVlIG9mIHRoZSBkcm9wZG93bi4gVG8gZGVmaW5lIHRoZSBoZWFkZXIgdGVtcGxhdGUsIG5lc3QgYW4gYDxuZy10ZW1wbGF0ZT5gIHRhZ1xuICogd2l0aCB0aGUgYGtlbmRvPENvbXBvbmVudE5hbWU+VmFsdWVUZW1wbGF0ZWAgZGlyZWN0aXZlIGluc2lkZSB0aGUgY29tcG9uZW50IHRhZy5cbiAqXG4gKiBUaGUgdGVtcGxhdGUgY29udGV4dCBpcyBzZXQgdG8gdGhlIGN1cnJlbnQgY29tcG9uZW50LlxuICogVG8gZ2V0IGEgcmVmZXJlbmNlIHRvIHRoZSBjdXJyZW50IGRhdGEgaXRlbSwgdXNlIHRoZSBgbGV0LWRhdGFJdGVtYCBkaXJlY3RpdmUuXG4gKlxuICogPiBUaGUgYFZhbHVlVGVtcGxhdGVgIGRpcmVjdGl2ZSBjYW4gb25seSBiZSB1c2VkIHdpdGggdGhlIERyb3BEb3duTGlzdCBhbmQgRHJvcERvd25UcmVlIGNvbXBvbmVudHMuXG4gKlxuICogLSBbVXNpbmcgYFZhbHVlVGVtcGxhdGVgIHdpdGggdGhlIERyb3BEb3duTGlzdF0oeyUgc2x1ZyB0ZW1wbGF0ZXNfZGRsICV9I3RvYy12YWx1ZS10ZW1wbGF0ZSlcbiAqIC0gW1VzaW5nIGBWYWx1ZVRlbXBsYXRlYCB3aXRoIHRoZSBEcm9wRG93blRyZWVdKHslIHNsdWcgdGVtcGxhdGVzX2RkdCAlfSN0b2MtdmFsdWUtdGVtcGxhdGUpXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBfQENvbXBvbmVudCh7XG4gKiBzZWxlY3RvcjogJ215LWFwcCcsXG4gKiB0ZW1wbGF0ZTogYFxuICogIDxrZW5kby1kcm9wZG93bmxpc3QgW2RhdGFdPVwibGlzdEl0ZW1zXCI+XG4gKiAgICA8bmctdGVtcGxhdGUga2VuZG9Ecm9wRG93bkxpc3RWYWx1ZVRlbXBsYXRlIGxldC1kYXRhSXRlbT5cbiAqICAgICAgPHNwYW4+e3tkYXRhSXRlbX19IG9wdGlvbjwvc3Bhbj5cbiAqICAgIDwvbmctdGVtcGxhdGU+XG4gKiAgPC9rZW5kby1kcm9wZG93bmxpc3Q+XG4gKiBgXG4gKiB9KVxuICogY2xhc3MgQXBwQ29tcG9uZW50IHtcbiAqICAgcHVibGljIGxpc3RJdGVtczogQXJyYXk8c3RyaW5nPiA9IFtcIkl0ZW0gMVwiLCBcIkl0ZW0gMlwiLCBcIkl0ZW0gM1wiLCBcIkl0ZW0gNFwiXTtcbiAqIH1cbiAqIGBgYFxuICovXG5sZXQgVmFsdWVUZW1wbGF0ZURpcmVjdGl2ZSA9IGNsYXNzIFZhbHVlVGVtcGxhdGVEaXJlY3RpdmUge1xuICAgIGNvbnN0cnVjdG9yKHRlbXBsYXRlUmVmKSB7XG4gICAgICAgIHRoaXMudGVtcGxhdGVSZWYgPSB0ZW1wbGF0ZVJlZjtcbiAgICB9XG59O1xuVmFsdWVUZW1wbGF0ZURpcmVjdGl2ZSA9IF9fZGVjb3JhdGUoW1xuICAgIERpcmVjdGl2ZSh7XG4gICAgICAgIHNlbGVjdG9yOiAnW2tlbmRvRHJvcERvd25MaXN0VmFsdWVUZW1wbGF0ZV0sW2tlbmRvRHJvcERvd25UcmVlVmFsdWVUZW1wbGF0ZV0nXG4gICAgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtUZW1wbGF0ZVJlZl0pXG5dLCBWYWx1ZVRlbXBsYXRlRGlyZWN0aXZlKTtcblxuLyogdHNsaW50OmRpc2FibGU6bWVtYmVyLW9yZGVyaW5nICovXG52YXIgRHJvcERvd25MaXN0Q29tcG9uZW50XzE7XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgRFJPUERPV05MSVNUX1ZBTFVFX0FDQ0VTU09SID0ge1xuICAgIG11bHRpOiB0cnVlLFxuICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxuICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IERyb3BEb3duTGlzdENvbXBvbmVudClcbn07XG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIFtLZW5kbyBVSSBEcm9wRG93bkxpc3QgY29tcG9uZW50IGZvciBBbmd1bGFyXSh7JSBzbHVnIG92ZXJ2aWV3X2RkbCAlfSkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBfQENvbXBvbmVudCh7XG4gKiBzZWxlY3RvcjogJ215LWFwcCcsXG4gKiB0ZW1wbGF0ZTogYFxuICogIDxrZW5kby1kcm9wZG93bmxpc3QgW2RhdGFdPVwibGlzdEl0ZW1zXCI+XG4gKiAgPC9rZW5kby1kcm9wZG93bmxpc3Q+XG4gKiBgXG4gKiB9KVxuICogY2xhc3MgQXBwQ29tcG9uZW50IHtcbiAqICAgcHVibGljIGxpc3RJdGVtczogQXJyYXk8c3RyaW5nPiA9IFtcIkl0ZW0gMVwiLCBcIkl0ZW0gMlwiLCBcIkl0ZW0gM1wiLCBcIkl0ZW0gNFwiXTtcbiAqIH1cbiAqIGBgYFxuICovXG5sZXQgRHJvcERvd25MaXN0Q29tcG9uZW50ID0gRHJvcERvd25MaXN0Q29tcG9uZW50XzEgPSBjbGFzcyBEcm9wRG93bkxpc3RDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKGxvY2FsaXphdGlvbiwgcG9wdXBTZXJ2aWNlLCBzZWxlY3Rpb25TZXJ2aWNlLCBuYXZpZ2F0aW9uU2VydmljZSwgZGlzYWJsZWRJdGVtc1NlcnZpY2UsIGRhdGFTZXJ2aWNlLCBfem9uZSwgcmVuZGVyZXIsIGhvc3RFbGVtZW50LCBjZHIsIHRvdWNoRW5hYmxlZCQkMSkge1xuICAgICAgICB0aGlzLmxvY2FsaXphdGlvbiA9IGxvY2FsaXphdGlvbjtcbiAgICAgICAgdGhpcy5wb3B1cFNlcnZpY2UgPSBwb3B1cFNlcnZpY2U7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZSA9IHNlbGVjdGlvblNlcnZpY2U7XG4gICAgICAgIHRoaXMubmF2aWdhdGlvblNlcnZpY2UgPSBuYXZpZ2F0aW9uU2VydmljZTtcbiAgICAgICAgdGhpcy5kaXNhYmxlZEl0ZW1zU2VydmljZSA9IGRpc2FibGVkSXRlbXNTZXJ2aWNlO1xuICAgICAgICB0aGlzLmRhdGFTZXJ2aWNlID0gZGF0YVNlcnZpY2U7XG4gICAgICAgIHRoaXMuX3pvbmUgPSBfem9uZTtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLmhvc3RFbGVtZW50ID0gaG9zdEVsZW1lbnQ7XG4gICAgICAgIHRoaXMuY2RyID0gY2RyO1xuICAgICAgICB0aGlzLnRvdWNoRW5hYmxlZCA9IHRvdWNoRW5hYmxlZCQkMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBoaWRkZW5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZm9jdXNhYmxlSWQgPSBgay0ke2d1aWQkMSgpfWA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIHRoZSBoZWlnaHQgb2YgdGhlIG9wdGlvbnMgbGlzdC4gQnkgZGVmYXVsdCwgYGxpc3RIZWlnaHRgIGlzIDIwMHB4LlxuICAgICAgICAgKlxuICAgICAgICAgKiA+IFRoZSBgbGlzdEhlaWdodGAgcHJvcGVydHkgYWZmZWN0cyBvbmx5IHRoZSBsaXN0IG9mIG9wdGlvbnMgYW5kIG5vdCB0aGUgd2hvbGUgcG9wdXAgY29udGFpbmVyLlxuICAgICAgICAgKiA+IFRvIHNldCB0aGUgaGVpZ2h0IG9mIHRoZSBwb3B1cCBjb250YWluZXIsIHVzZSBgcG9wdXBTZXR0aW5ncy5oZWlnaHRgLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5saXN0SGVpZ2h0ID0gMjAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyB0aGUgZGlzYWJsZWQgc3RhdGUgb2YgdGhlIGNvbXBvbmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgdGhlIHJlYWQtb25seSBzdGF0ZSBvZiB0aGUgY29tcG9uZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZWFkb25seSA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogRW5hYmxlcyB0aGUgW2ZpbHRlcmluZ10oeyUgc2x1ZyBmaWx0ZXJpbmdfZGRsICV9KSBmdW5jdGlvbmFsaXR5IG9mIHRoZSBEcm9wRG93bkxpc3QuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZpbHRlcmFibGUgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVuYWJsZXMgYSBjYXNlLWluc2Vuc2l0aXZlIHNlYXJjaC4gV2hlbiBmaWx0cmF0aW9uIGlzIGRpc2FibGVkLCB1c2UgdGhpcyBvcHRpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmlnbm9yZUNhc2UgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyB0aGUgZGVsYXkgYmVmb3JlIGFuIGl0ZW0gc2VhcmNoIGlzIHBlcmZvcm1lZC4gV2hlbiBmaWx0cmF0aW9uIGlzIGRpc2FibGVkLCB1c2UgdGhpcyBvcHRpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRlbGF5ID0gNTAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIHRoZSBbYHRhYmluZGV4YF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9HbG9iYWxfYXR0cmlidXRlcy90YWJpbmRleCkgb2YgdGhlIGNvbXBvbmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGFiaW5kZXggPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSB2YWx1ZSBpcyBjaGFuZ2VkIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgb3ZlcnZpZXdfZGRsICV9I3RvYy1ldmVudHMpKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudmFsdWVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgdGhlIHVzZXIgdHlwZXMgaW4gdGhlIGlucHV0IGZpZWxkXG4gICAgICAgICAqIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgb3ZlcnZpZXdfZGRsICV9I3RvYy1ldmVudHMpKS5cbiAgICAgICAgICogWW91IGNhbiBmaWx0ZXIgdGhlIHNvdXJjZSBiYXNlZCBvbiB0aGUgcGFzc2VkIGZpbHRyYXRpb24gdmFsdWUuXG4gICAgICAgICAqIFdoZW4gdGhlIHZhbHVlIG9mIHRoZSBjb21wb25lbnQgaXMgcHJvZ3JhbW1hdGljYWxseSBjaGFuZ2VkIHRvIGBuZ01vZGVsYCBvciBgZm9ybUNvbnRyb2xgXG4gICAgICAgICAqIHRocm91Z2ggaXRzIEFQSSBvciBmb3JtIGJpbmRpbmcsIHRoZSBgdmFsdWVDaGFuZ2VgIGV2ZW50IGlzIG5vdCB0cmlnZ2VyZWQgYmVjYXVzZSBpdFxuICAgICAgICAgKiBtaWdodCBjYXVzZSBhIG1peC11cCB3aXRoIHRoZSBidWlsdC1pbiBgdmFsdWVDaGFuZ2VgIG1lY2hhbmlzbXMgb2YgdGhlIGBuZ01vZGVsYCBvciBgZm9ybUNvbnRyb2xgIGJpbmRpbmdzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5maWx0ZXJDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgdGhlIGl0ZW0gc2VsZWN0aW9uIGlzIGNoYW5nZWRcbiAgICAgICAgICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBvdmVydmlld19kZGwgJX0jdG9jLWV2ZW50cykpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zZWxlY3Rpb25DaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgdGhlIHBvcHVwIGlzIGFib3V0IHRvIG9wZW5cbiAgICAgICAgICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBvcGVuc3RhdGVfZGRsICV9I3RvYy1wcmV2ZW50aW5nLW9wZW5pbmctYW5kLWNsb3NpbmcpKS5cbiAgICAgICAgICogVGhpcyBldmVudCBpcyBwcmV2ZW50YWJsZS4gSWYgeW91IGNhbmNlbCBpdCwgdGhlIHBvcHVwIHdpbGwgcmVtYWluIGNsb3NlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub3BlbiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGFmdGVyIHRoZSBwb3B1cCBoYXMgYmVlbiBvcGVuZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9wZW5lZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgcG9wdXAgaXMgYWJvdXQgdG8gY2xvc2VcbiAgICAgICAgICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBvcGVuc3RhdGVfZGRsICV9I3RvYy1wcmV2ZW50aW5nLW9wZW5pbmctYW5kLWNsb3NpbmcpKS5cbiAgICAgICAgICogVGhpcyBldmVudCBpcyBwcmV2ZW50YWJsZS4gSWYgeW91IGNhbmNlbCBpdCwgdGhlIHBvcHVwIHdpbGwgcmVtYWluIG9wZW4uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNsb3NlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgYWZ0ZXIgdGhlIHBvcHVwIGhhcyBiZWVuIGNsb3NlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2xvc2VkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSB1c2VyIGZvY3VzZXMgdGhlIERyb3BEb3duTGlzdC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25Gb2N1cyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgRHJvcERvd25MaXN0IGdldHMgYmx1cnJlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25CbHVyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLndpZGdldENsYXNzZXMgPSB0cnVlO1xuICAgICAgICB0aGlzLmdyb3VwSW5kaWNlcyA9IFtdO1xuICAgICAgICB0aGlzLmxpc3RCb3hJZCA9IGd1aWQkMSgpO1xuICAgICAgICB0aGlzLm9wdGlvblByZWZpeCA9IGd1aWQkMSgpO1xuICAgICAgICB0aGlzLmZpbHRlclRleHQgPSBcIlwiO1xuICAgICAgICB0aGlzLl9pc0ZvY3VzZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5vblRvdWNoZWRDYWxsYmFjayA9IChfKSA9PiB7IH07XG4gICAgICAgIHRoaXMub25DaGFuZ2VDYWxsYmFjayA9IChfKSA9PiB7IH07XG4gICAgICAgIHRoaXMud29yZCA9IFwiXCI7XG4gICAgICAgIHRoaXMubGFzdCA9IFwiXCI7XG4gICAgICAgIHRoaXMuZmlsdGVyRm9jdXNlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5maWx0ZXJCbHVycmVkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLndyYXBwZXJGb2N1c2VkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLndyYXBwZXJCbHVycmVkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLnNlbGVjdGlvblN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb24oKTtcbiAgICAgICAgdGhpcy5fb3BlbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9wb3B1cFNldHRpbmdzID0geyBhbmltYXRlOiB0cnVlIH07XG4gICAgICAgIHZhbGlkYXRlUGFja2FnZShwYWNrYWdlTWV0YWRhdGEpO1xuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IGxvY2FsaXphdGlvbi5ydGwgPyAncnRsJyA6ICdsdHInO1xuICAgICAgICB0aGlzLmRhdGEgPSBbXTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVFdmVudHMoKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVUb3VjaEV2ZW50cygpO1xuICAgICAgICB0aGlzLnBvcHVwTW91c2VEb3duSGFuZGxlciA9IHRoaXMub25Nb3VzZURvd24uYmluZCh0aGlzKTtcbiAgICB9XG4gICAgZ2V0IHdpZHRoKCkge1xuICAgICAgICBjb25zdCB3cmFwcGVyV2lkdGggPSBpc0RvY3VtZW50QXZhaWxhYmxlKCkgPyB0aGlzLndyYXBwZXIubmF0aXZlRWxlbWVudC5vZmZzZXRXaWR0aCA6IDA7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5wb3B1cFNldHRpbmdzLndpZHRoIHx8IHdyYXBwZXJXaWR0aDtcbiAgICAgICAgY29uc3QgbWluV2lkdGggPSBpc05hTih3cmFwcGVyV2lkdGgpID8gd3JhcHBlcldpZHRoIDogYCR7d3JhcHBlcldpZHRofXB4YDtcbiAgICAgICAgY29uc3QgbWF4V2lkdGggPSBpc05hTih3aWR0aCkgPyB3aWR0aCA6IGAke3dpZHRofXB4YDtcbiAgICAgICAgcmV0dXJuIHsgbWluOiBtaW5XaWR0aCwgbWF4OiBtYXhXaWR0aCB9O1xuICAgIH1cbiAgICBnZXQgaGVpZ2h0KCkge1xuICAgICAgICBjb25zdCBwb3B1cEhlaWdodCA9IHRoaXMucG9wdXBTZXR0aW5ncy5oZWlnaHQ7XG4gICAgICAgIHJldHVybiBpc1ByZXNlbnQocG9wdXBIZWlnaHQpID8gYCR7cG9wdXBIZWlnaHR9cHhgIDogJ2F1dG8nO1xuICAgIH1cbiAgICBnZXQgd2lkZ2V0VGFiSW5kZXgoKSB7XG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByb3ZpZGVkVGFiSW5kZXggPSBOdW1iZXIodGhpcy50YWJJbmRleCk7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRUYWJJbmRleCA9IDA7XG4gICAgICAgIHJldHVybiAhaXNOYU4ocHJvdmlkZWRUYWJJbmRleCkgPyBwcm92aWRlZFRhYkluZGV4IDogZGVmYXVsdFRhYkluZGV4O1xuICAgIH1cbiAgICBnZXQgYXJpYUV4cGFuZGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc09wZW47XG4gICAgfVxuICAgIGdldCBhcmlhT3ducygpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzT3Blbikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmxpc3RCb3hJZDtcbiAgICB9XG4gICAgZ2V0IGFyaWFBY3RpdmVkZXNjZW5kYW50KCkge1xuICAgICAgICBpZiAoIWlzUHJlc2VudCh0aGlzLmRhdGFJdGVtKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvblByZWZpeCArIFwiLVwiICsgZ2V0dGVyJDEodGhpcy5kYXRhSXRlbSwgdGhpcy52YWx1ZUZpZWxkKTtcbiAgICB9XG4gICAgZ2V0IG5vRGF0YUxhYmVsKCkge1xuICAgICAgICBpZiAodGhpcy5kYXRhU2VydmljZS5pdGVtc0NvdW50ID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub0RhdGFUZXh0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBhcHBlbmRUbygpIHtcbiAgICAgICAgY29uc3QgeyBhcHBlbmRUbyB9ID0gdGhpcy5wb3B1cFNldHRpbmdzO1xuICAgICAgICBpZiAoIWFwcGVuZFRvIHx8IGFwcGVuZFRvID09PSAncm9vdCcpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFwcGVuZFRvID09PSAnY29tcG9uZW50JyA/IHRoaXMuY29udGFpbmVyIDogYXBwZW5kVG87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGRhdGEgb2YgdGhlIERyb3BEb3duTGlzdC5cbiAgICAgKlxuICAgICAqID4gVGhlIGRhdGEgaGFzIHRvIGJlIHByb3ZpZGVkIGluIGFuIGFycmF5LWxpa2UgbGlzdC5cbiAgICAgKi9cbiAgICBzZXQgZGF0YShkYXRhKSB7XG4gICAgICAgIHRoaXMuZGF0YVNlcnZpY2UuZGF0YSA9IGRhdGEgfHwgW107XG4gICAgICAgIGlmICh0aGlzLnZpcnR1YWwpIHtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbC5za2lwID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFN0YXRlKCk7XG4gICAgfVxuICAgIGdldCBkYXRhKCkge1xuICAgICAgICBjb25zdCB2aXJ0dWFsID0gdGhpcy52aXJ0dWFsO1xuICAgICAgICBpZiAodmlydHVhbCkge1xuICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSB2aXJ0dWFsLnNraXAgfHwgMDtcbiAgICAgICAgICAgIGNvbnN0IGVuZCA9IHN0YXJ0ICsgdmlydHVhbC5wYWdlU2l6ZTtcbiAgICAgICAgICAgIC8vIFVzZSBsZW5ndGggaW5zdGVhZCBvZiBpdGVtc0NvdW50IGJlY2F1c2Ugb2YgdGhlIGdyb3VwaW5nLlxuICAgICAgICAgICAgdmlydHVhbC50b3RhbCA9IHRoaXMuZGF0YVNlcnZpY2UuZGF0YS5sZW5ndGg7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhU2VydmljZS5kYXRhLnNsaWNlKHN0YXJ0LCBlbmQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFTZXJ2aWNlLmRhdGE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHZhbHVlIG9mIHRoZSBEcm9wRG93bkxpc3QuXG4gICAgICogSXQgY2FuIGVpdGhlciBiZSBvZiB0aGUgcHJpbWl0aXZlIChzdHJpbmcsIG51bWJlcnMpIG9yIG9mIHRoZSBjb21wbGV4IChvYmplY3RzKSB0eXBlLlxuICAgICAqIFRvIGRlZmluZSB0aGUgdHlwZSwgdXNlIHRoZSBgdmFsdWVQcmltaXRpdmVgIG9wdGlvbi5cbiAgICAgKlxuICAgICAqID4gQWxsIHNlbGVjdGVkIHZhbHVlcyB3aGljaCBhcmUgbm90IHByZXNlbnQgaW4gdGhlIHNvdXJjZSBhcmUgaWdub3JlZC5cbiAgICAgKi9cbiAgICBzZXQgdmFsdWUobmV3VmFsdWUpIHtcbiAgICAgICAgaWYgKCFpc1ByZXNlbnQobmV3VmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLl9wcmV2aW91c0RhdGFJdGVtID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3ZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoKTtcbiAgICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XG4gICAgfVxuICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb25maWd1cmVzIHRoZSBwb3B1cCBvZiB0aGUgRHJvcERvd25MaXN0LlxuICAgICAqXG4gICAgICogVGhlIGF2YWlsYWJsZSBvcHRpb25zIGFyZTpcbiAgICAgKiAtIGBhbmltYXRlOiBCb29sZWFuYCZtZGFzaDtDb250cm9scyB0aGUgcG9wdXAgYW5pbWF0aW9uLiBCeSBkZWZhdWx0LCB0aGUgb3BlbiBhbmQgY2xvc2UgYW5pbWF0aW9ucyBhcmUgZW5hYmxlZC5cbiAgICAgKiAtIGB3aWR0aDogTnVtYmVyIHwgU3RyaW5nYCZtZGFzaDtTZXRzIHRoZSB3aWR0aCBvZiB0aGUgcG9wdXAgY29udGFpbmVyLiBCeSBkZWZhdWx0LCB0aGUgd2lkdGggb2YgdGhlIGhvc3QgZWxlbWVudCBpcyB1c2VkLiBJZiBzZXQgdG8gYGF1dG9gLCB0aGUgY29tcG9uZW50IGF1dG9tYXRpY2FsbHkgYWRqdXN0cyB0aGUgd2lkdGggb2YgdGhlIHBvcHVwIGFuZCBubyBpdGVtIGxhYmVscyBhcmUgd3JhcHBlZC4gVGhlIGBhdXRvYCBtb2RlIGlzIG5vdCBzdXBwb3J0ZWQgd2hlbiB2aXJ0dWFsIHNjcm9sbGluZyBpcyBlbmFibGVkLlxuICAgICAqIC0gYGhlaWdodDogTnVtYmVyYCZtZGFzaDtTZXRzIHRoZSBoZWlnaHQgb2YgdGhlIHBvcHVwIGNvbnRhaW5lci5cbiAgICAgKiAtIGBwb3B1cENsYXNzOiBTdHJpbmdgJm1kYXNoO1NwZWNpZmllcyBhIGxpc3Qgb2YgQ1NTIGNsYXNzZXMgdGhhdCBhcmUgdXNlZCB0byBzdHlsZSB0aGUgcG9wdXAuXG4gICAgICogLSBgYXBwZW5kVG86IFwicm9vdFwiIHwgXCJjb21wb25lbnRcIiB8IFZpZXdDb250YWluZXJSZWZgJm1kYXNoO1NwZWNpZmllcyB0aGUgY29tcG9uZW50IHRvIHdoaWNoIHRoZSBwb3B1cCB3aWxsIGJlIGFwcGVuZGVkLlxuICAgICAqL1xuICAgIHNldCBwb3B1cFNldHRpbmdzKHNldHRpbmdzKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwU2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHsgYW5pbWF0ZTogdHJ1ZSB9LCBzZXR0aW5ncyk7XG4gICAgfVxuICAgIGdldCBwb3B1cFNldHRpbmdzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcG9wdXBTZXR0aW5ncztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVmaW5lcyBhIEJvb2xlYW4gZnVuY3Rpb24gdGhhdCBpcyBleGVjdXRlZCBmb3IgZWFjaCBkYXRhIGl0ZW0gaW4gdGhlIGNvbXBvbmVudFxuICAgICAqIChbc2VlIGV4YW1wbGVzXSh7JSBzbHVnIGRpc2FibGVkaXRlbXNfZGRsICV9KSkuIERldGVybWluZXMgd2hldGhlciB0aGUgaXRlbSB3aWxsIGJlIGRpc2FibGVkLlxuICAgICAqL1xuICAgIHNldCBpdGVtRGlzYWJsZWQoZm4pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBpdGVtRGlzYWJsZWQgbXVzdCBiZSBhIGZ1bmN0aW9uLCBidXQgcmVjZWl2ZWQgJHtKU09OLnN0cmluZ2lmeShmbil9LmApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGlzYWJsZWRJdGVtc1NlcnZpY2UuaXRlbURpc2FibGVkID0gZm47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuYWJsZXMgdGhlIFt2aXJ0dWFsaXphdGlvbl0oeyUgc2x1ZyB2aXJ0dWFsaXphdGlvbl9kZGwgJX0pIGZ1bmN0aW9uYWxpdHkuXG4gICAgICovXG4gICAgc2V0IHZpcnR1YWwoc2V0dGluZ3MpIHtcbiAgICAgICAgdGhpcy5fdmlydHVhbFNldHRpbmdzID0gbm9ybWFsaXplVmlydHVhbGl6YXRpb25TZXR0aW5ncyhzZXR0aW5ncyk7XG4gICAgfVxuICAgIGdldCB2aXJ0dWFsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdmlydHVhbFNldHRpbmdzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgdGhlIHR5cGUgb2YgdGhlIHNlbGVjdGVkIHZhbHVlXG4gICAgICogKFttb3JlIGluZm9ybWF0aW9uIGFuZCBleGFtcGxlXSh7JSBzbHVnIHZhbHVlYmluZGluZ19kZGwgJX0jdG9jLXByaW1pdGl2ZS12YWx1ZXMtZnJvbS1vYmplY3QtZmllbGRzKSkuXG4gICAgICogSWYgc2V0IHRvIGB0cnVlYCwgdGhlIHNlbGVjdGVkIHZhbHVlIGhhcyB0byBiZSBvZiBhIHByaW1pdGl2ZSB2YWx1ZS5cbiAgICAgKi9cbiAgICBzZXQgdmFsdWVQcmltaXRpdmUoaXNQcmltaXRpdmUpIHtcbiAgICAgICAgdGhpcy5fdmFsdWVQcmltaXRpdmUgPSBpc1ByaW1pdGl2ZTtcbiAgICB9XG4gICAgZ2V0IHZhbHVlUHJpbWl0aXZlKCkge1xuICAgICAgICBpZiAoIWlzUHJlc2VudCh0aGlzLl92YWx1ZVByaW1pdGl2ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiAhaXNQcmVzZW50KHRoaXMudmFsdWVGaWVsZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlUHJpbWl0aXZlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgc2V0IHRhYkluZGV4KHRhYkluZGV4KSB7XG4gICAgICAgIHRoaXMudGFiaW5kZXggPSB0YWJJbmRleDtcbiAgICB9XG4gICAgZ2V0IHRhYkluZGV4KCkge1xuICAgICAgICByZXR1cm4gdGhpcy50YWJpbmRleDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGJsdXJDb21wb25lbnQoKSB7XG4gICAgICAgIHRoaXMud3JhcHBlckJsdXJyZWQuZW1pdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgYmx1ckZpbHRlcklucHV0KCkge1xuICAgICAgICB0aGlzLmZpbHRlckJsdXJyZWQuZW1pdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgZm9jdXNDb21wb25lbnQoKSB7XG4gICAgICAgIHRoaXMud3JhcHBlckZvY3VzZWQuZW1pdCgpO1xuICAgICAgICBpZiAoIXRoaXMuaXNGb2N1c2VkKSB7XG4gICAgICAgICAgICB0aGlzLmlzRm9jdXNlZCA9IHRydWU7XG4gICAgICAgICAgICBpZiAoaGFzT2JzZXJ2ZXJzKHRoaXMub25Gb2N1cykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl96b25lLnJ1bigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25Gb2N1cy5lbWl0KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGtleWRvd24oZXZlbnQpIHtcbiAgICAgICAgY29uc3QgZmlyc3RJbmRleCA9IGlzUHJlc2VudCh0aGlzLmRlZmF1bHRJdGVtKSA/IC0xIDogMDtcbiAgICAgICAgbGV0IGZvY3VzZWQgPSBpc05hTih0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCkgPyB0aGlzLmZpcnN0Rm9jdXNhYmxlSW5kZXgoZmlyc3RJbmRleCkgOiB0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZDtcbiAgICAgICAgbGV0IG9mZnNldCA9IDA7XG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkIHx8IHRoaXMucmVhZG9ubHkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpc0hvbWVFbmQgPSBldmVudC5rZXlDb2RlID09PSBLZXlzLkhvbWUgfHwgZXZlbnQua2V5Q29kZSA9PT0gS2V5cy5FbmQ7XG4gICAgICAgIGNvbnN0IGlzRmlsdGVyRm9jdXNlZCA9IHRoaXMuZmlsdGVyYWJsZSAmJiB0aGlzLmlzRm9jdXNlZCAmJiB0aGlzLmlzT3BlbjtcbiAgICAgICAgaWYgKGlzRmlsdGVyRm9jdXNlZCAmJiBpc0hvbWVFbmQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoYXNTZWxlY3RlZCA9IGlzUHJlc2VudCh0aGlzLnNlbGVjdGlvblNlcnZpY2Uuc2VsZWN0ZWRbMF0pO1xuICAgICAgICBjb25zdCBmb2N1c2VkSXRlbU5vdFNlbGVjdGVkID0gaXNQcmVzZW50KHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1c2VkKSAmJiAhdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmlzU2VsZWN0ZWQodGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzZWQpO1xuICAgICAgICBpZiAoIWhhc1NlbGVjdGVkIHx8IGZvY3VzZWRJdGVtTm90U2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSBLZXlzLkFycm93RG93biB8fCBldmVudC5rZXlDb2RlID09PSBLZXlzLkFycm93UmlnaHQpIHtcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50LmtleUNvZGUgPT09IEtleXMuQXJyb3dVcCB8fCBldmVudC5rZXlDb2RlID09PSBLZXlzLkFycm93TGVmdCkge1xuICAgICAgICAgICAgICAgIG9mZnNldCA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXZlbnREYXRhID0gZXZlbnQ7XG4gICAgICAgIGNvbnN0IGFjdGlvbiA9IHRoaXMubmF2aWdhdGlvblNlcnZpY2UucHJvY2Vzcyh7XG4gICAgICAgICAgICBjdXJyZW50OiBmb2N1c2VkICsgb2Zmc2V0LFxuICAgICAgICAgICAgbWF4OiB0aGlzLmRhdGFTZXJ2aWNlLml0ZW1zQ291bnQgLSAxLFxuICAgICAgICAgICAgbWluOiB0aGlzLmRlZmF1bHRJdGVtID8gLTEgOiAwLFxuICAgICAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnREYXRhXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBsZWZ0UmlnaHRLZXlzID0gKGFjdGlvbiA9PT0gTmF2aWdhdGlvbkFjdGlvbi5MZWZ0KSB8fCAoYWN0aW9uID09PSBOYXZpZ2F0aW9uQWN0aW9uLlJpZ2h0KTtcbiAgICAgICAgaWYgKGFjdGlvbiAhPT0gTmF2aWdhdGlvbkFjdGlvbi5VbmRlZmluZWQgJiZcbiAgICAgICAgICAgIGFjdGlvbiAhPT0gTmF2aWdhdGlvbkFjdGlvbi5UYWIgJiZcbiAgICAgICAgICAgIGFjdGlvbiAhPT0gTmF2aWdhdGlvbkFjdGlvbi5CYWNrc3BhY2UgJiZcbiAgICAgICAgICAgIGFjdGlvbiAhPT0gTmF2aWdhdGlvbkFjdGlvbi5EZWxldGUgJiZcbiAgICAgICAgICAgICEobGVmdFJpZ2h0S2V5cyAmJiB0aGlzLmZpbHRlcmFibGUpICYmXG4gICAgICAgICAgICBhY3Rpb24gIT09IE5hdmlnYXRpb25BY3Rpb24uRW50ZXIgLy9lbnRlciB3aGVuIHBvcHVwIGlzIG9wZW5lZCBpcyBoYW5kbGVkIGJlZm9yZSBgaGFuZGxlRW50ZXJgXG4gICAgICAgICkge1xuICAgICAgICAgICAgZXZlbnREYXRhLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGtleXByZXNzKGV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkIHx8IHRoaXMucmVhZG9ubHkgfHwgdGhpcy5maWx0ZXJhYmxlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vbktleVByZXNzKGV2ZW50KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGNsaWNrKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICAgICAgdGhpcy50b2dnbGVQb3B1cCghdGhpcy5pc09wZW4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgb25SZXNpemUoKSB7XG4gICAgICAgIGlmICh0aGlzLl9vcGVuKSB7XG4gICAgICAgICAgICBjb25zdCBwb3B1cFdyYXBwZXIgPSB0aGlzLnBvcHVwUmVmLnBvcHVwRWxlbWVudDtcbiAgICAgICAgICAgIGNvbnN0IHsgbWluLCBtYXggfSA9IHRoaXMud2lkdGg7XG4gICAgICAgICAgICBwb3B1cFdyYXBwZXIuc3R5bGUubWluV2lkdGggPSBtaW47XG4gICAgICAgICAgICBwb3B1cFdyYXBwZXIuc3R5bGUud2lkdGggPSBtYXg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGRpcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uO1xuICAgIH1cbiAgICBzZXQgaXNGb2N1c2VkKGlzRm9jdXNlZCkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyW2lzRm9jdXNlZCA/ICdhZGRDbGFzcycgOiAncmVtb3ZlQ2xhc3MnXSh0aGlzLndyYXBwZXIubmF0aXZlRWxlbWVudCwgJ2stc3RhdGUtZm9jdXNlZCcpO1xuICAgICAgICB0aGlzLl9pc0ZvY3VzZWQgPSBpc0ZvY3VzZWQ7XG4gICAgfVxuICAgIGdldCBpc0ZvY3VzZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc0ZvY3VzZWQ7XG4gICAgfVxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUF0dHJpYnV0ZSh0aGlzLmhvc3RFbGVtZW50Lm5hdGl2ZUVsZW1lbnQsIFwidGFiaW5kZXhcIik7XG4gICAgICAgIHRoaXMubG9jYWxpemF0aW9uQ2hhbmdlc1N1YnNjcmlwdGlvbiA9IHRoaXMubG9jYWxpemF0aW9uXG4gICAgICAgICAgICAuY2hhbmdlcy5zdWJzY3JpYmUoKHsgcnRsIH0pID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gcnRsID8gJ3J0bCcgOiAnbHRyJztcbiAgICAgICAgICAgIHRoaXMuc2V0TWVzc2FnZXMoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2V0TWVzc2FnZXMoKTtcbiAgICAgICAgdGhpcy5hc3NpZ25BcmlhRGVzY3JpYmVkQnkoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqIFVzZWQgYnkgdGhlIFRleHRCb3hDb250YWluZXIgdG8gZGV0ZXJtaW5lIGlmIHRoZSBjb21wb25lbnQgaXMgZW1wdHkuXG4gICAgICovXG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLnZhbHVlO1xuICAgICAgICByZXR1cm4gISh2YWx1ZSA9PT0gMCB8fCB2YWx1ZSA9PT0gZmFsc2UgfHwgdmFsdWUgfHwgdGhpcy5kZWZhdWx0SXRlbSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBvbkZpbHRlckZvY3VzKCkge1xuICAgICAgICB0aGlzLmZpbHRlckZvY3VzZWQuZW1pdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveVBvcHVwKCk7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVFdmVudHMoKTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubWVzc2FnZXNUaW1lb3V0KTtcbiAgICAgICAgaWYgKHRoaXMubG9jYWxpemF0aW9uQ2hhbmdlc1N1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgdGhpcy5sb2NhbGl6YXRpb25DaGFuZ2VzU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXMpIHtcbiAgICAgICAgY29uc3QgdmlydHVhbCA9IHRoaXMudmlydHVhbDtcbiAgICAgICAgY29uc3QgcmVxdWVzdEluaXRpYWxEYXRhID0gdmlydHVhbCAmJiBjaGFuZ2VzLmRhdGEgJiYgY2hhbmdlcy5kYXRhLmlzRmlyc3RDaGFuZ2UoKTtcbiAgICAgICAgaWYgKHJlcXVlc3RJbml0aWFsRGF0YSkge1xuICAgICAgICAgICAgdGhpcy5wYWdlQ2hhbmdlKHsgc2tpcDogMCwgdGFrZTogdmlydHVhbC5wYWdlU2l6ZSB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNDaGFuZ2VkKCdkZWZhdWx0SXRlbScsIGNoYW5nZXMsIGZhbHNlKSkge1xuICAgICAgICAgICAgdGhpcy5kaXNhYmxlZEl0ZW1zU2VydmljZS5kZWZhdWx0SXRlbSA9IHRoaXMuZGVmYXVsdEl0ZW07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFueUNoYW5nZWQoWyd0ZXh0RmllbGQnLCAndmFsdWVGaWVsZCcsICd2YWx1ZVByaW1pdGl2ZScsICdkZWZhdWx0SXRlbScsICdpdGVtRGlzYWJsZWQnXSwgY2hhbmdlcywgZmFsc2UpKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIG5nQWZ0ZXJDb250ZW50Q2hlY2tlZCgpIHtcbiAgICAgICAgdGhpcy52ZXJpZnlTZXR0aW5ncygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb2N1c2VzIGEgc3BlY2lmaWMgaXRlbSBvZiB0aGUgRHJvcERvd25MaXN0IGJhc2VkIG9uIGEgcHJvdmlkZWQgaW5kZXguXG4gICAgICogSWYgdGhlcmUgaXMgYSBkZWZhdWx0IGl0ZW0gaXQgaXMgcG9zaXRpb25lZCBhdCBpbmRleCAtMS5cbiAgICAgKiBJZiBudWxsIG9yIGludmFsaWQgaW5kZXggaXMgcHJvdmlkZWQgdGhlIGZvY3VzIHdpbGwgYmUgcmVtb3ZlZC5cbiAgICAgKi9cbiAgICBmb2N1c0l0ZW1BdChpbmRleCkge1xuICAgICAgICBjb25zdCBtaW5JbmRleCA9IGlzUHJlc2VudCh0aGlzLmRlZmF1bHRJdGVtKSA/IC0xIDogMDtcbiAgICAgICAgY29uc3QgaXNJblJhbmdlID0gbWluSW5kZXggPD0gaW5kZXggJiYgaW5kZXggPCB0aGlzLmRhdGEubGVuZ3RoO1xuICAgICAgICBpZiAoaXNQcmVzZW50KGluZGV4KSAmJiBpc0luUmFuZ2UgJiYgIXRoaXMuZGlzYWJsZWRJdGVtc1NlcnZpY2UuaXNJbmRleERpc2FibGVkKGluZGV4KSkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzKGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1cyhudWxsKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb2N1c2VzIHRoZSBEcm9wRG93bkxpc3QuXG4gICAgICovXG4gICAgZm9jdXMoKSB7XG4gICAgICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgdGhpcy53cmFwcGVyLm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBCbHVycyB0aGUgRHJvcERvd25MaXN0LlxuICAgICAqL1xuICAgIGJsdXIoKSB7XG4gICAgICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgdGhpcy53cmFwcGVyLm5hdGl2ZUVsZW1lbnQuYmx1cigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRvZ2dsZXMgdGhlIHZpc2liaWxpdHkgb2YgdGhlIHBvcHVwXG4gICAgICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBvcGVuc3RhdGVfZGRsICV9I3RvYy1zZXR0aW5nLXRoZS1pbml0aWFsbHktb3BlbmVkLWNvbXBvbmVudCkpLlxuICAgICAqIElmIHlvdSB1c2UgdGhlIGB0b2dnbGVgIG1ldGhvZCB0byBvcGVuIG9yIGNsb3NlIHRoZSBwb3B1cCwgdGhlIGBvcGVuYCBhbmQgYGNsb3NlYCBldmVudHMgd2lsbCBub3QgYmUgZmlyZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3BlbiAtIFRoZSBzdGF0ZSBvZiB0aGUgcG9wdXAuXG4gICAgICovXG4gICAgdG9nZ2xlKG9wZW4pIHtcbiAgICAgICAgLy8gVGhlIFByb21pc2UgaXMgcmVxdWlyZWQgdG8gb3BlbiB0aGUgcG9wdXAgb24gbG9hZC5cbiAgICAgICAgLy8gT3RoZXJ3aXNlLCB0aGUgXCJFeHByZXNzaW9uIGhhcyBjaGFuZ2VkLi4uXCIgdHlwZSBlcnJvciB3aWxsIGJlIHRocm93bi5cbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKG51bGwpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2hvdWxkT3BlbiA9IGlzUHJlc2VudChvcGVuKSA/IG9wZW4gOiAhdGhpcy5fb3BlbjtcbiAgICAgICAgICAgIHRoaXMuX3RvZ2dsZShzaG91bGRPcGVuKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF90b2dnbGUob3Blbikge1xuICAgICAgICB0aGlzLl9vcGVuID0gb3BlbjtcbiAgICAgICAgdGhpcy5kZXN0cm95UG9wdXAoKTtcbiAgICAgICAgaWYgKHRoaXMuX29wZW4pIHtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUG9wdXAoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0cmlnZ2VyUG9wdXBFdmVudHMob3Blbikge1xuICAgICAgICBjb25zdCBldmVudEFyZ3MgPSBuZXcgUHJldmVudGFibGVFdmVudCgpO1xuICAgICAgICBpZiAob3Blbikge1xuICAgICAgICAgICAgdGhpcy5vcGVuLmVtaXQoZXZlbnRBcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UuZW1pdChldmVudEFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBldmVudEFyZ3MuaXNEZWZhdWx0UHJldmVudGVkKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICB0b2dnbGVQb3B1cChvcGVuKSB7XG4gICAgICAgIGNvbnN0IGlzRGlzYWJsZWQgPSB0aGlzLmRpc2FibGVkIHx8IHRoaXMucmVhZG9ubHk7XG4gICAgICAgIGNvbnN0IHNhbWVTdGF0ZSA9IHRoaXMuaXNPcGVuID09PSBvcGVuO1xuICAgICAgICBpZiAoaXNEaXNhYmxlZCB8fCBzYW1lU3RhdGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpc0RlZmF1bHRQcmV2ZW50ZWQgPSB0aGlzLnRyaWdnZXJQb3B1cEV2ZW50cyhvcGVuKTtcbiAgICAgICAgaWYgKCFpc0RlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgICAgICAgIGlmICghb3BlbiAmJiB0aGlzLmZpbHRlcmFibGUgJiYgdGhpcy5pc0ZvY3VzZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl90b2dnbGUob3Blbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBvcGVuIHN0YXRlIG9mIHRoZSBwb3B1cC5cbiAgICAgKi9cbiAgICBnZXQgaXNPcGVuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fb3BlbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSB2YWx1ZSBvZiB0aGUgRHJvcERvd25MaXN0LlxuICAgICAqIElmIHlvdSB1c2UgdGhlIGByZXNldGAgbWV0aG9kIHRvIGNsZWFyIHRoZSB2YWx1ZSBvZiB0aGUgY29tcG9uZW50LFxuICAgICAqIHRoZSBtb2RlbCB3aWxsIG5vdCB1cGRhdGUgYXV0b21hdGljYWxseSBhbmQgdGhlIGBzZWxlY3Rpb25DaGFuZ2VgIGFuZCBgdmFsdWVDaGFuZ2VgIGV2ZW50cyB3aWxsIG5vdCBiZSBmaXJlZC5cbiAgICAgKi9cbiAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHdyaXRlVmFsdWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlID09PSBudWxsID8gdW5kZWZpbmVkIDogdmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICByZWdpc3Rlck9uQ2hhbmdlKGZuKSB7XG4gICAgICAgIHRoaXMub25DaGFuZ2VDYWxsYmFjayA9IGZuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgcmVnaXN0ZXJPblRvdWNoZWQoZm4pIHtcbiAgICAgICAgdGhpcy5vblRvdWNoZWRDYWxsYmFjayA9IGZuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgc2V0RGlzYWJsZWRTdGF0ZShpc0Rpc2FibGVkKSB7XG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBpc0Rpc2FibGVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgZ2V0IGJ1dHRvbkNsYXNzZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvYWRpbmcgPyAnay1pLWxvYWRpbmcnIDogdGhpcy5pY29uQ2xhc3MgfHwgJ2staS1hcnJvdy1zJztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGdldCBsaXN0Q29udGFpbmVyQ2xhc3NlcygpIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyQ2xhc3NlcyA9IFsnay1saXN0LWNvbnRhaW5lcicsICdrLXJlc2V0J107XG4gICAgICAgIGlmICh0aGlzLnBvcHVwU2V0dGluZ3MucG9wdXBDbGFzcykge1xuICAgICAgICAgICAgY29udGFpbmVyQ2xhc3Nlcy5wdXNoKHRoaXMucG9wdXBTZXR0aW5ncy5wb3B1cENsYXNzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29udGFpbmVyQ2xhc3NlcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGdldCBpc0Rpc2FibGVkRGVmYXVsdEl0ZW0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpc2FibGVkSXRlbXNTZXJ2aWNlLmlzSXRlbURpc2FibGVkKHRoaXMuZGVmYXVsdEl0ZW0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgZ2V0VGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGdldERlZmF1bHRJdGVtVGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIGdldHRlciQxKHRoaXMuZGVmYXVsdEl0ZW0sIHRoaXMudGV4dEZpZWxkKTtcbiAgICB9XG4gICAgY3JlYXRlUG9wdXAoKSB7XG4gICAgICAgIGlmICh0aGlzLnZpcnR1YWwpIHtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbC5za2lwID0gMDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBob3Jpem9udGFsQWxpZ24gPSB0aGlzLmRpcmVjdGlvbiA9PT0gXCJydGxcIiA/IFwicmlnaHRcIiA6IFwibGVmdFwiO1xuICAgICAgICBjb25zdCBhbmNob3JQb3NpdGlvbiA9IHsgaG9yaXpvbnRhbDogaG9yaXpvbnRhbEFsaWduLCB2ZXJ0aWNhbDogXCJib3R0b21cIiB9O1xuICAgICAgICBjb25zdCBwb3B1cFBvc2l0aW9uID0geyBob3Jpem9udGFsOiBob3Jpem9udGFsQWxpZ24sIHZlcnRpY2FsOiBcInRvcFwiIH07XG4gICAgICAgIHRoaXMucG9wdXBSZWYgPSB0aGlzLnBvcHVwU2VydmljZS5vcGVuKHtcbiAgICAgICAgICAgIGFuY2hvcjogdGhpcy53cmFwcGVyLFxuICAgICAgICAgICAgYW5jaG9yQWxpZ246IGFuY2hvclBvc2l0aW9uLFxuICAgICAgICAgICAgYW5pbWF0ZTogdGhpcy5wb3B1cFNldHRpbmdzLmFuaW1hdGUsXG4gICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5hcHBlbmRUbyxcbiAgICAgICAgICAgIGNvbnRlbnQ6IHRoaXMucG9wdXBUZW1wbGF0ZSxcbiAgICAgICAgICAgIHBvcHVwQWxpZ246IHBvcHVwUG9zaXRpb24sXG4gICAgICAgICAgICBwb3B1cENsYXNzOiB0aGlzLmxpc3RDb250YWluZXJDbGFzc2VzLFxuICAgICAgICAgICAgcG9zaXRpb25Nb2RlOiAnYWJzb2x1dGUnXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBwb3B1cFdyYXBwZXIgPSB0aGlzLnBvcHVwUmVmLnBvcHVwRWxlbWVudDtcbiAgICAgICAgY29uc3QgeyBtaW4sIG1heCB9ID0gdGhpcy53aWR0aDtcbiAgICAgICAgcG9wdXBXcmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMucG9wdXBNb3VzZURvd25IYW5kbGVyKTtcbiAgICAgICAgcG9wdXBXcmFwcGVyLnN0eWxlLm1pbldpZHRoID0gbWluO1xuICAgICAgICBwb3B1cFdyYXBwZXIuc3R5bGUud2lkdGggPSBtYXg7XG4gICAgICAgIHBvcHVwV3JhcHBlci5zdHlsZS5oZWlnaHQgPSB0aGlzLmhlaWdodDtcbiAgICAgICAgcG9wdXBXcmFwcGVyLnNldEF0dHJpYnV0ZShcImRpclwiLCB0aGlzLmRpcmVjdGlvbik7XG4gICAgICAgIHRoaXMucG9wdXBSZWYucG9wdXBPcGVuLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnNMaXN0LnNjcm9sbFRvSXRlbSh0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCk7XG4gICAgICAgICAgICB0aGlzLm9wZW5lZC5lbWl0KCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnBvcHVwUmVmLnBvcHVwQ2xvc2Uuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VkLmVtaXQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghdGhpcy5maWx0ZXJhYmxlKSB7XG4gICAgICAgICAgICB0aGlzLnBvcHVwUmVmLnBvcHVwQW5jaG9yVmlld3BvcnRMZWF2ZS5zdWJzY3JpYmUoKCkgPT4gdGhpcy50b2dnbGVQb3B1cChmYWxzZSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRlc3Ryb3lQb3B1cCgpIHtcbiAgICAgICAgaWYgKHRoaXMucG9wdXBSZWYpIHtcbiAgICAgICAgICAgIHRoaXMucG9wdXBSZWYucG9wdXBFbGVtZW50XG4gICAgICAgICAgICAgICAgLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMucG9wdXBNb3VzZURvd25IYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucG9wdXBSZWYuY2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMucG9wdXBSZWYgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZVN0YXRlKHsgZGF0YUl0ZW0sIGNvbmZpcm0gPSBmYWxzZSB9KSB7XG4gICAgICAgIHRoaXMuZGF0YUl0ZW0gPSBkYXRhSXRlbTtcbiAgICAgICAgdGhpcy50ZXh0ID0gZ2V0dGVyJDEoZGF0YUl0ZW0sIHRoaXMudGV4dEZpZWxkKTtcbiAgICAgICAgaWYgKGNvbmZpcm0pIHtcbiAgICAgICAgICAgIHRoaXMuX3ByZXZpb3VzRGF0YUl0ZW0gPSBkYXRhSXRlbTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjbGVhclN0YXRlKCkge1xuICAgICAgICB0aGlzLnRleHQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuZGF0YUl0ZW0gPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJlc2V0U2VsZWN0aW9uKGluZGV4KSB7XG4gICAgICAgIGNvbnN0IGNsZWFyID0gIWlzUHJlc2VudChpbmRleCk7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5yZXNldFNlbGVjdGlvbihjbGVhciA/IFtdIDogW2luZGV4XSk7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1c2VkID0gY2xlYXIgPyB0aGlzLmZpcnN0Rm9jdXNhYmxlSW5kZXgoMCkgOiBpbmRleDtcbiAgICB9XG4gICAgb25TZWxlY3Rpb25DaGFuZ2UoeyBkYXRhSXRlbSB9KSB7XG4gICAgICAgIHRoaXMudXBkYXRlU3RhdGUoeyBkYXRhSXRlbSB9KTtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25DaGFuZ2UuZW1pdChkYXRhSXRlbSk7XG4gICAgICAgIC8vIHJlYXNzaWduaW5nIHRoZSB2YWx1ZSBsYWJlbCBJRCBhcyBhcmlhLWRlYXNjaWJlZGJ5IGZvcmNlcyBmaXJlZm94L252ZGEsIGZvcmVmb3gvamF3cyB0byByZWFkXG4gICAgICAgIC8vIHRoZSBuZXcgdmFsdWUgd2hlbiB0aGUgcG9wdXAgaXMgY2xvc2VkIGFuZCB0aGUgdmFsdWUgaXMgY2hhbmdlZCB3aXRoIHRoZSBhcnJvdyBrZXlzICh1cC9kb3duKVxuICAgICAgICB0aGlzLmFzc2lnbkFyaWFEZXNjcmliZWRCeSgpO1xuICAgIH1cbiAgICBzdWJzY3JpYmVFdmVudHMoKSB7XG4gICAgICAgIGlmICghaXNEb2N1bWVudEF2YWlsYWJsZSgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gSXRlbSBzZWxlY3Rpb24gd2hlbiB0aGUgcG9wdXAgaXMgb3Blbi5cbiAgICAgICAgdGhpcy5zZWxlY3Rpb25TdWJzY3JpcHRpb24uYWRkKHRoaXMuc2VsZWN0aW9uU2VydmljZS5vblNlbGVjdC5waXBlKGZpbHRlcihfID0+IHRoaXMuaXNPcGVuKSwgbWFwKHRoaXMuaXRlbUZyb21FdmVudC5iaW5kKHRoaXMpKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUodGhpcy5vblNlbGVjdGlvbkNoYW5nZS5iaW5kKHRoaXMpKSk7XG4gICAgICAgIC8vIEl0ZW0gc2VsZWN0aW9uIHdoZW4gdGhlIHBvcHVwIGlzIGNsb3NlZCB8IGNsaWNrZWQgfCBlbnRlciwgYW5kIHNvIG9uLlxuICAgICAgICB0aGlzLnNlbGVjdGlvblN1YnNjcmlwdGlvbi5hZGQobWVyZ2UodGhpcy5zZWxlY3Rpb25TZXJ2aWNlLm9uU2VsZWN0LnBpcGUoZmlsdGVyKF8gPT4gIXRoaXMuaXNPcGVuKSksIHRoaXMuc2VsZWN0aW9uU2VydmljZS5vbkNoYW5nZSkucGlwZShtYXAodGhpcy5pdGVtRnJvbUV2ZW50LmJpbmQodGhpcykpLCB0YXAoXyA9PiB0aGlzLnRvZ2dsZVBvcHVwKGZhbHNlKSkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKCh7IGRhdGFJdGVtLCB2YWx1ZTogbmV3VmFsdWUsIG5ld1NlbGVjdGlvbiB9KSA9PiB7XG4gICAgICAgICAgICBpZiAobmV3U2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vblNlbGVjdGlvbkNoYW5nZSh7IGRhdGFJdGVtIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc2hvdWxkVXNlUHJldmlvdXMgPSAhaXNQcmVzZW50KGRhdGFJdGVtKSAmJiB0aGlzLl9wcmV2aW91c0RhdGFJdGVtO1xuICAgICAgICAgICAgY29uc3Qgc2hvdWxkVXNlTmV3VmFsdWUgPSBuZXdWYWx1ZSAhPT0gZ2V0dGVyJDEodGhpcy52YWx1ZSwgdGhpcy52YWx1ZUZpZWxkKTtcbiAgICAgICAgICAgIGlmIChzaG91bGRVc2VQcmV2aW91cykge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU3RhdGUoeyBkYXRhSXRlbTogdGhpcy5fcHJldmlvdXNEYXRhSXRlbSB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2V0U2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzaG91bGRVc2VOZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlUHJpbWl0aXZlID8gbmV3VmFsdWUgOiBkYXRhSXRlbTtcbiAgICAgICAgICAgICAgICB0aGlzLl9wcmV2aW91c0RhdGFJdGVtID0gZGF0YUl0ZW07XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0Q2hhbmdlKHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jbGVhckZpbHRlcigpO1xuICAgICAgICB9KSk7XG4gICAgICAgIHRoaXMubmF2aWdhdGlvblN1YnNjcmlwdGlvbiA9IG1lcmdlKHRoaXMubmF2aWdhdGlvblNlcnZpY2UudXAsIHRoaXMubmF2aWdhdGlvblNlcnZpY2UuZG93biwgdGhpcy5uYXZpZ2F0aW9uU2VydmljZS5sZWZ0LnBpcGUoc2tpcFdoaWxlKCgpID0+IHRoaXMuZmlsdGVyYWJsZSkpLCB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLnJpZ2h0LnBpcGUoc2tpcFdoaWxlKCgpID0+IHRoaXMuZmlsdGVyYWJsZSkpLCB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLmhvbWUsIHRoaXMubmF2aWdhdGlvblNlcnZpY2UuZW5kKVxuICAgICAgICAgICAgLnBpcGUoZmlsdGVyKChldmVudCkgPT4gIWlzTmFOKGV2ZW50LmluZGV4KSkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKChldmVudCkgPT4gdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLnNlbGVjdChldmVudC5pbmRleCkpO1xuICAgICAgICB0aGlzLm9wZW5TdWJzY3JpcHRpb24gPSB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLm9wZW4uc3Vic2NyaWJlKCgpID0+IHRoaXMudG9nZ2xlUG9wdXAodHJ1ZSkpO1xuICAgICAgICB0aGlzLmNsb3NlU3Vic2NyaXB0aW9uID0gdGhpcy5uYXZpZ2F0aW9uU2VydmljZS5jbG9zZS5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVQb3B1cChmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVudGVyU3Vic2NyaXB0aW9uID0gdGhpcy5uYXZpZ2F0aW9uU2VydmljZS5lbnRlclxuICAgICAgICAgICAgLnBpcGUodGFwKChldmVudCkgPT4gZXZlbnQub3JpZ2luYWxFdmVudC5wcmV2ZW50RGVmYXVsdCgpKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUodGhpcy5oYW5kbGVFbnRlci5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5lc2NTdWJzY3JpcHRpb24gPSB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLmVzY1xuICAgICAgICAgICAgLnN1YnNjcmliZSh0aGlzLmhhbmRsZUVzY2FwZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5maWx0ZXJCbHVycmVkU3Vic2NyaXB0aW9uID0gdGhpcy5maWx0ZXJCbHVycmVkLnBpcGUoY29uY2F0TWFwKCgpID0+IGludGVydmFsKDEwKS5waXBlKHRha2UoMSksIHRha2VVbnRpbCh0aGlzLndyYXBwZXJGb2N1c2VkKSkpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLndyYXBwZXJCbHVycmVkLmVtaXQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jb21wb25lbnRCbHVycmVkU3Vic2NyaXB0aW9uID1cbiAgICAgICAgICAgICAgICBtZXJnZSh0aGlzLndyYXBwZXJCbHVycmVkLnBpcGUoY29uY2F0TWFwKCgpID0+IGludGVydmFsKDEwKS5waXBlKHRha2UoMSksIHRha2VVbnRpbCh0aGlzLmZpbHRlckZvY3VzZWQpKSkpLCB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLnRhYikucGlwZSh0YXAoZXZlbnQgPT4gZXZlbnQgaW5zdGFuY2VvZiBOYXZpZ2F0aW9uRXZlbnQgJiYgdGhpcy5mb2N1cygpKSwgZmlsdGVyKCgpID0+IHRoaXMuaXNGb2N1c2VkKSlcbiAgICAgICAgICAgICAgICAgICAgLnN1YnNjcmliZSgoKSA9PiB0aGlzLmNvbXBvbmVudEJsdXIoKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdWJzY3JpYmVUb3VjaEV2ZW50cygpIHtcbiAgICAgICAgaWYgKCFpc0RvY3VtZW50QXZhaWxhYmxlKCkgfHwgIXRoaXMudG91Y2hFbmFibGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiBcbiAgICAgICAgLy8gUm9sbCB1cCBEcm9wRG93bkxpc3Qgb24gaU9TIHdoZW4gdGFwcGVkIG91dHNpZGVcbiAgICAgICAgdGhpcy50b3VjaHN0YXJ0RGlzcG9zZUhhbmRsZXIgPSB0aGlzLnJlbmRlcmVyLmxpc3Rlbihkb2N1bWVudCwgJ3RvdWNoc3RhcnQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0ZvY3VzZWQgJiYgIWluRHJvcERvd24odGhpcy5ob3N0RWxlbWVudCwgdGFyZ2V0LCB0aGlzLnBvcHVwUmVmKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3pvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZmlsdGVyRm9jdXNlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xvc2UgcG9wdXAgaWYgZmlsdGVyIGlzIGZvY3VzZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlUG9wdXAoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmx1cigpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHVuc3Vic2NyaWJlRXZlbnRzKCkge1xuICAgICAgICBpZiAoIWlzRG9jdW1lbnRBdmFpbGFibGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubmF2aWdhdGlvblN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB0aGlzLm9wZW5TdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgdGhpcy5jbG9zZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB0aGlzLmVudGVyU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIHRoaXMuZXNjU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIHRoaXMuY29tcG9uZW50Qmx1cnJlZFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB0aGlzLmZpbHRlckJsdXJyZWRTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgaWYgKHRoaXMudG91Y2hzdGFydERpc3Bvc2VIYW5kbGVyKSB7XG4gICAgICAgICAgICB0aGlzLnRvdWNoc3RhcnREaXNwb3NlSGFuZGxlcigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGlvblN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25TdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpdGVtRnJvbUV2ZW50KGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gZXZlbnQuaW5kaWNlc1swXTtcbiAgICAgICAgbGV0IGRhdGFJdGVtID0gdGhpcy5kYXRhU2VydmljZS5pdGVtQXQoaW5kZXgpO1xuICAgICAgICBkYXRhSXRlbSA9IGlzUHJlc2VudChkYXRhSXRlbSkgPyBkYXRhSXRlbSA6IHRoaXMuY3VycmVudE9yRGVmYXVsdChpbmRleCk7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gZ2V0dGVyJDEoZGF0YUl0ZW0sIHRoaXMudmFsdWVGaWVsZCk7XG4gICAgICAgIGNvbnN0IG5ld1NlbGVjdGlvbiA9IGV2ZW50Lm5ld1NlbGVjdGlvbjtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRhdGFJdGVtLFxuICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICBuZXdTZWxlY3Rpb24sXG4gICAgICAgICAgICB2YWx1ZVxuICAgICAgICB9O1xuICAgIH1cbiAgICBjdXJyZW50T3JEZWZhdWx0KHNlbGVjdGVkSW5kZXgpIHtcbiAgICAgICAgY29uc3QgZGVmYXVsdEl0ZW1JbmRleCA9IC0xO1xuICAgICAgICBpZiAoaXNQcmVzZW50KHRoaXMuZGF0YUl0ZW0pICYmIHNlbGVjdGVkSW5kZXggIT09IGRlZmF1bHRJdGVtSW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGFJdGVtO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdEl0ZW07XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmlyc3RGb2N1c2FibGVJbmRleChpbmRleCkge1xuICAgICAgICBjb25zdCBtYXhJbmRleCA9IHRoaXMuZGF0YVNlcnZpY2UuaXRlbXNDb3VudCAtIDE7XG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkSXRlbXNTZXJ2aWNlLmlzSW5kZXhEaXNhYmxlZChpbmRleCkpIHtcbiAgICAgICAgICAgIHJldHVybiAoaW5kZXggPCBtYXhJbmRleCkgPyB0aGlzLmZpcnN0Rm9jdXNhYmxlSW5kZXgoaW5kZXggKyAxKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVFbnRlcigpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UuY2hhbmdlKHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1c2VkKTtcbiAgICAgICAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlUG9wdXAodHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlRXNjYXBlKCkge1xuICAgICAgICBpZiAoaXNQcmVzZW50KHRoaXMuc2VsZWN0aW9uU2VydmljZS5zZWxlY3RlZFswXSkpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5jaGFuZ2UodGhpcy5zZWxlY3Rpb25TZXJ2aWNlLnNlbGVjdGVkWzBdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlUG9wdXAoZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5jbGVhckZpbHRlcigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICB9XG4gICAgY2xlYXJGaWx0ZXIoKSB7XG4gICAgICAgIGlmICghKHRoaXMuZmlsdGVyYWJsZSAmJiB0aGlzLmZpbHRlclRleHQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5maWx0ZXJUZXh0ID0gXCJcIjtcbiAgICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XG4gICAgICAgIHRoaXMuZmlsdGVyQ2hhbmdlLmVtaXQodGhpcy5maWx0ZXJUZXh0KTtcbiAgICB9XG4gICAgdmVyaWZ5U2V0dGluZ3MoKSB7XG4gICAgICAgIGlmICghaXNEZXZNb2RlKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kZWZhdWx0SXRlbSAmJiB0aGlzLnZhbHVlRmllbGQgJiYgdHlwZW9mIHRoaXMuZGVmYXVsdEl0ZW0gIT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihEcm9wRG93bkxpc3RNZXNzYWdlcy5kZWZhdWx0SXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudmFsdWVQcmltaXRpdmUgPT09IHRydWUgJiYgaXNQcmVzZW50KHRoaXMudmFsdWUpICYmIHR5cGVvZiB0aGlzLnZhbHVlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoRHJvcERvd25MaXN0TWVzc2FnZXMucHJpbWl0aXZlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy52YWx1ZVByaW1pdGl2ZSA9PT0gZmFsc2UgJiYgaXNQcmVzZW50KHRoaXMudmFsdWUpICYmIHR5cGVvZiB0aGlzLnZhbHVlICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoRHJvcERvd25MaXN0TWVzc2FnZXMub2JqZWN0KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2YWx1ZU9yVGV4dCA9ICFpc1ByZXNlbnQodGhpcy52YWx1ZUZpZWxkKSAhPT0gIWlzUHJlc2VudCh0aGlzLnRleHRGaWVsZCk7XG4gICAgICAgIGlmICh2YWx1ZU9yVGV4dCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKERyb3BEb3duTGlzdE1lc3NhZ2VzLnRleHRBbmRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29tcG9uZW50Qmx1cigpIHtcbiAgICAgICAgdGhpcy5pc0ZvY3VzZWQgPSBmYWxzZTtcbiAgICAgICAgY29uc3Qgc2VsZWN0aW9uUHJlc2VudCA9IGlzUHJlc2VudCh0aGlzLnNlbGVjdGlvblNlcnZpY2Uuc2VsZWN0ZWRbMF0pO1xuICAgICAgICBjb25zdCB2YWx1ZUhhc0NoYW5nZWQgPSBzZWxlY3Rpb25QcmVzZW50ICYmIGdldHRlciQxKHRoaXMudmFsdWUsIHRoaXMudmFsdWVGaWVsZCkgIT09IGdldHRlciQxKHRoaXMuZGF0YVNlcnZpY2UuaXRlbUF0KHRoaXMuc2VsZWN0aW9uU2VydmljZS5zZWxlY3RlZFswXSksIHRoaXMudmFsdWVGaWVsZCk7XG4gICAgICAgIGlmICh2YWx1ZUhhc0NoYW5nZWQgfHxcbiAgICAgICAgICAgIGhhc09ic2VydmVycyh0aGlzLmNsb3NlKSB8fFxuICAgICAgICAgICAgaGFzT2JzZXJ2ZXJzKHRoaXMub25CbHVyKSB8fFxuICAgICAgICAgICAgaGFzT2JzZXJ2ZXJzKHRoaXMuZmlsdGVyQ2hhbmdlKSB8fFxuICAgICAgICAgICAgaXNVbnRvdWNoZWQodGhpcy5ob3N0RWxlbWVudC5uYXRpdmVFbGVtZW50KSkge1xuICAgICAgICAgICAgdGhpcy5fem9uZS5ydW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZUhhc0NoYW5nZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmNoYW5nZSh0aGlzLnNlbGVjdGlvblNlcnZpY2Uuc2VsZWN0ZWRbMF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZVBvcHVwKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyRmlsdGVyKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkJsdXIuZW1pdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMub25Ub3VjaGVkQ2FsbGJhY2soKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVQb3B1cChmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIG9uTW91c2VEb3duKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IHRhZ05hbWUgPSBldmVudC50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBpZiAodGFnTmFtZSAhPT0gXCJpbnB1dFwiKSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uS2V5UHJlc3MoZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LndoaWNoID09PSAwIHx8IGV2ZW50LmtleUNvZGUgPT09IEtleXMuRW50ZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY2hhcmFjdGVyID0gU3RyaW5nLmZyb21DaGFyQ29kZShldmVudC5jaGFyQ29kZSB8fCBldmVudC5rZXlDb2RlKTtcbiAgICAgICAgaWYgKHRoaXMuaWdub3JlQ2FzZSkge1xuICAgICAgICAgICAgY2hhcmFjdGVyID0gY2hhcmFjdGVyLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoYXJhY3RlciA9PT0gXCIgXCIpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53b3JkICs9IGNoYXJhY3RlcjtcbiAgICAgICAgdGhpcy5sYXN0ID0gY2hhcmFjdGVyO1xuICAgICAgICB0aGlzLnNlYXJjaCgpO1xuICAgIH1cbiAgICBzZWFyY2goKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnR5cGluZ1RpbWVvdXQpO1xuICAgICAgICBpZiAoIXRoaXMuZmlsdGVyYWJsZSkge1xuICAgICAgICAgICAgdGhpcy50eXBpbmdUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7IHRoaXMud29yZCA9IFwiXCI7IH0sIHRoaXMuZGVsYXkpO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3ROZXh0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2VsZWN0TmV4dCgpIHtcbiAgICAgICAgbGV0IGRhdGEgPSB0aGlzLmRhdGFTZXJ2aWNlXG4gICAgICAgICAgICAuZmlsdGVyKChpdGVtKSA9PiBpc1ByZXNlbnQoaXRlbSkgJiYgIWl0ZW0uaGVhZGVyICYmICF0aGlzLmRpc2FibGVkSXRlbXNTZXJ2aWNlLmlzSXRlbURpc2FibGVkKGl0ZW0pKVxuICAgICAgICAgICAgLm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YVNlcnZpY2UuZ3JvdXBlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGl0ZW06IGl0ZW0udmFsdWUsIGl0ZW1JbmRleDogaXRlbS5vZmZzZXRJbmRleCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgaXRlbTogaXRlbSwgaXRlbUluZGV4OiB0aGlzLmRhdGFTZXJ2aWNlLmluZGV4T2YoaXRlbSkgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGlzSW5Mb29wID0gc2FtZUNoYXJzT25seSh0aGlzLndvcmQsIHRoaXMubGFzdCk7XG4gICAgICAgIGxldCBkYXRhTGVuZ3RoID0gZGF0YS5sZW5ndGg7XG4gICAgICAgIGxldCBoYXNTZWxlY3RlZCA9ICFpc05hTih0aGlzLnNlbGVjdGlvblNlcnZpY2Uuc2VsZWN0ZWRbMF0pO1xuICAgICAgICBsZXQgc3RhcnRJbmRleCA9ICFoYXNTZWxlY3RlZCA/IDAgOiB0aGlzLnNlbGVjdGlvblNlcnZpY2Uuc2VsZWN0ZWRbMF07XG4gICAgICAgIGxldCB0ZXh0LCBpbmRleCwgZGVmYXVsdEl0ZW07XG4gICAgICAgIGlmICh0aGlzLmRlZmF1bHRJdGVtICYmICF0aGlzLmRpc2FibGVkSXRlbXNTZXJ2aWNlLmlzSXRlbURpc2FibGVkKHRoaXMuZGVmYXVsdEl0ZW0pKSB7XG4gICAgICAgICAgICBkZWZhdWx0SXRlbSA9IHsgaXRlbTogdGhpcy5kZWZhdWx0SXRlbSwgaXRlbUluZGV4OiAtMSB9O1xuICAgICAgICAgICAgZGF0YUxlbmd0aCArPSAxO1xuICAgICAgICAgICAgc3RhcnRJbmRleCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHN0YXJ0SW5kZXggKz0gaXNJbkxvb3AgJiYgaGFzU2VsZWN0ZWQgPyAxIDogMDtcbiAgICAgICAgZGF0YSA9IHNodWZmbGVEYXRhKGRhdGEsIHN0YXJ0SW5kZXgsIGRlZmF1bHRJdGVtKTtcbiAgICAgICAgaW5kZXggPSAwO1xuICAgICAgICBmb3IgKDsgaW5kZXggPCBkYXRhTGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICB0ZXh0ID0gZ2V0dGVyJDEoZGF0YVtpbmRleF0uaXRlbSwgdGhpcy50ZXh0RmllbGQpO1xuICAgICAgICAgICAgY29uc3QgbG9vcE1hdGNoID0gQm9vbGVhbihpc0luTG9vcCAmJiBtYXRjaFRleHQodGV4dCwgdGhpcy5sYXN0LCB0aGlzLmlnbm9yZUNhc2UpKTtcbiAgICAgICAgICAgIGNvbnN0IG5leHRNYXRjaCA9IEJvb2xlYW4obWF0Y2hUZXh0KHRleHQsIHRoaXMud29yZCwgdGhpcy5pZ25vcmVDYXNlKSk7XG4gICAgICAgICAgICBpZiAobG9vcE1hdGNoIHx8IG5leHRNYXRjaCkge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gZGF0YVtpbmRleF0uaXRlbUluZGV4O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpbmRleCAhPT0gZGF0YUxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5uYXZpZ2F0ZShpbmRleCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZW1pdENoYW5nZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLm9uQ2hhbmdlQ2FsbGJhY2sodmFsdWUpO1xuICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQodmFsdWUpO1xuICAgIH1cbiAgICBuYXZpZ2F0ZShpbmRleCkge1xuICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2Uuc2VsZWN0KGluZGV4KTtcbiAgICB9XG4gICAgZmluZERhdGFJdGVtKHsgdmFsdWVGaWVsZCwgdmFsdWUgfSkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgICAgICBkYXRhSXRlbTogbnVsbCxcbiAgICAgICAgICAgIGluZGV4OiAtMVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBwcm9wID0gZGF0YUl0ZW0gPT4gZ2V0dGVyJDEoZGF0YUl0ZW0sIHZhbHVlRmllbGQpO1xuICAgICAgICBsZXQgY29tcGFyZXI7XG4gICAgICAgIGlmICh0aGlzLmRhdGFTZXJ2aWNlLmdyb3VwZWQpIHtcbiAgICAgICAgICAgIGNvbXBhcmVyID0gKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvcChlbGVtZW50LnZhbHVlKSA9PT0gcHJvcCh2YWx1ZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29tcGFyZXIgPSAoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9wKGVsZW1lbnQpID09PSBwcm9wKHZhbHVlKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmRhdGFTZXJ2aWNlLmZpbmRJbmRleChjb21wYXJlcik7XG4gICAgICAgIHJlc3VsdC5kYXRhSXRlbSA9IHRoaXMuZGF0YVNlcnZpY2UuaXRlbUF0KGluZGV4KTtcbiAgICAgICAgcmVzdWx0LmluZGV4ID0gaW5kZXg7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIHNldFN0YXRlKCkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgICAgIGNvbnN0IHZhbHVlRmllbGQgPSB0aGlzLnZhbHVlRmllbGQ7XG4gICAgICAgIGNvbnN0IHRleHRGaWVsZCA9IHRoaXMudGV4dEZpZWxkO1xuICAgICAgICBjb25zdCBwcmltaXRpdmUgPSB0aGlzLnZhbHVlUHJpbWl0aXZlO1xuICAgICAgICBpZiAodGhpcy5kZWZhdWx0SXRlbSkge1xuICAgICAgICAgICAgY29uc3QgZGVmYXVsdFZhbHVlID0gZ2V0dGVyJDEodGhpcy5kZWZhdWx0SXRlbSwgdmFsdWVGaWVsZCk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBnZXR0ZXIkMSh2YWx1ZSwgdmFsdWVGaWVsZCk7XG4gICAgICAgICAgICBpZiAoIWlzUHJlc2VudCh2YWx1ZSkgfHwgKGN1cnJlbnRWYWx1ZSA9PT0gZGVmYXVsdFZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU3RhdGUoeyBkYXRhSXRlbTogdGhpcy5kZWZhdWx0SXRlbSwgY29uZmlybTogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2V0U2VsZWN0aW9uKC0xKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5maWx0ZXJhYmxlICYmIHRoaXMuZmlsdGVyVGV4dCAmJiB0aGlzLmRhdGFTZXJ2aWNlLml0ZW1zQ291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzZWQgPSB0aGlzLmZpcnN0Rm9jdXNhYmxlSW5kZXgoMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXNvbHZlZCA9IHRoaXMuZmluZERhdGFJdGVtKHsgdmFsdWVGaWVsZCwgdmFsdWUgfSk7XG4gICAgICAgIC8vIFRoZSBkYXRhIGFuZCB2YWx1ZSBhcmUgb2Ygc2FtZSBzaGFwZSxcbiAgICAgICAgLy8gZm9yIGV4YW1wbGUsIHZhbHVlOiAnZm9vJywgZGF0YTogWydmb28nLCAnYmFyJ11cbiAgICAgICAgLy8gb3IgdmFsdWU6IHsgdmFsdWU6IDEsIHRleHQ6ICdmb28nIH0sIGRhdGE6IFt7IHZhbHVlOiAxLCB0ZXh0OiAnZm9vJyB9XS5cbiAgICAgICAgY29uc3Qgb2ZTYW1lVHlwZSA9ICEocHJpbWl0aXZlICYmIHRleHRGaWVsZCk7XG4gICAgICAgIGlmIChyZXNvbHZlZC5kYXRhSXRlbSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0ZSh7IGRhdGFJdGVtOiByZXNvbHZlZC5kYXRhSXRlbSwgY29uZmlybTogdHJ1ZSB9KTtcbiAgICAgICAgICAgIHRoaXMucmVzZXRTZWxlY3Rpb24ocmVzb2x2ZWQuaW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzUHJlc2VudCh2YWx1ZSkgJiYgb2ZTYW1lVHlwZSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0ZSh7IGRhdGFJdGVtOiB2YWx1ZSB9KTtcbiAgICAgICAgICAgIHRoaXMucmVzZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLl9wcmV2aW91c0RhdGFJdGVtKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlKHsgZGF0YUl0ZW06IHRoaXMuX3ByZXZpb3VzRGF0YUl0ZW0gfSk7XG4gICAgICAgICAgICB0aGlzLnJlc2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFyU3RhdGUoKTtcbiAgICAgICAgICAgIHRoaXMucmVzZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgaGFuZGxlRmlsdGVyKGV2ZW50KSB7XG4gICAgICAgIHRoaXMuZmlsdGVyQ2hhbmdlLmVtaXQoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHBhZ2VDaGFuZ2UoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgdmlydHVhbCA9IHRoaXMudmlydHVhbDtcbiAgICAgICAgdmlydHVhbC5za2lwID0gZXZlbnQuc2tpcDtcbiAgICB9XG4gICAgc2V0TWVzc2FnZXMoKSB7XG4gICAgICAgIHRoaXMuX3pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubWVzc2FnZXNUaW1lb3V0KTtcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZXNUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5ub0RhdGFUZXh0ID0gdGhpcy5sb2NhbGl6YXRpb24uZ2V0KCdub0RhdGFUZXh0Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3NpZ25BcmlhRGVzY3JpYmVkQnkoKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IHRoaXMud3JhcHBlci5uYXRpdmVFbGVtZW50LmdldEF0dHJpYnV0ZSgnYXJpYS1kZXNjcmliZWRieScpIHx8ICcnO1xuICAgICAgICBjb25zdCB0cmltbWVkID0gY3VycmVudFZhbHVlLnJlcGxhY2UodGhpcy52YWx1ZUxhYmVsSWQsICcnKS50cmltKCk7XG4gICAgICAgIC8vIHJlc2V0IHRoZSB2YWx1ZSBsYWJlbCBJRCB0byBmb3JjZSByZWFkZXJzIHRvIHJlYWQgdGhlIG5ldyB2YWx1ZVxuICAgICAgICB0aGlzLnZhbHVlTGFiZWxJZCA9IGd1aWQkMSgpO1xuICAgICAgICAvLyBhZGQgdG8gdGhlIGN1cnJlbnQgdmFsdWUgLSBkb24ndCByZXBsYWNlIGl0XG4gICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gYCR7dGhpcy52YWx1ZUxhYmVsSWR9ICR7dHJpbW1lZH1gLnRyaW0oKTtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRBdHRyaWJ1dGUodGhpcy53cmFwcGVyLm5hdGl2ZUVsZW1lbnQsICdhcmlhLWRlc2NyaWJlZGJ5JywgbmV3VmFsdWUpO1xuICAgIH1cbn07XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBEcm9wRG93bkxpc3RDb21wb25lbnQucHJvdG90eXBlLCBcImZvY3VzYWJsZUlkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBEcm9wRG93bkxpc3RDb21wb25lbnQucHJvdG90eXBlLCBcImljb25DbGFzc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIERyb3BEb3duTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwibG9hZGluZ1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pXG5dLCBEcm9wRG93bkxpc3RDb21wb25lbnQucHJvdG90eXBlLCBcImRhdGFcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSlcbl0sIERyb3BEb3duTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwidmFsdWVcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBEcm9wRG93bkxpc3RDb21wb25lbnQucHJvdG90eXBlLCBcInRleHRGaWVsZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgRHJvcERvd25MaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ2YWx1ZUZpZWxkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSlcbl0sIERyb3BEb3duTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwicG9wdXBTZXR0aW5nc1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlcilcbl0sIERyb3BEb3duTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwibGlzdEhlaWdodFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuXSwgRHJvcERvd25MaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJkZWZhdWx0SXRlbVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIERyb3BEb3duTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGlzYWJsZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZ1bmN0aW9uKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0Z1bmN0aW9uXSlcbl0sIERyb3BEb3duTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwiaXRlbURpc2FibGVkXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIERyb3BEb3duTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwicmVhZG9ubHlcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBEcm9wRG93bkxpc3RDb21wb25lbnQucHJvdG90eXBlLCBcImZpbHRlcmFibGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKVxuXSwgRHJvcERvd25MaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ2aXJ0dWFsXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIERyb3BEb3duTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwiaWdub3JlQ2FzZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKVxuXSwgRHJvcERvd25MaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJkZWxheVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtCb29sZWFuXSlcbl0sIERyb3BEb3duTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwidmFsdWVQcmltaXRpdmVcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOdW1iZXIpXG5dLCBEcm9wRG93bkxpc3RDb21wb25lbnQucHJvdG90eXBlLCBcInRhYmluZGV4XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dChcInRhYkluZGV4XCIpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOdW1iZXIpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTnVtYmVyXSlcbl0sIERyb3BEb3duTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwidGFiSW5kZXhcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgRHJvcERvd25MaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ2YWx1ZUNoYW5nZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIERyb3BEb3duTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwiZmlsdGVyQ2hhbmdlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgRHJvcERvd25MaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJzZWxlY3Rpb25DaGFuZ2VcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBEcm9wRG93bkxpc3RDb21wb25lbnQucHJvdG90eXBlLCBcIm9wZW5cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBEcm9wRG93bkxpc3RDb21wb25lbnQucHJvdG90eXBlLCBcIm9wZW5lZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIERyb3BEb3duTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwiY2xvc2VcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBEcm9wRG93bkxpc3RDb21wb25lbnQucHJvdG90eXBlLCBcImNsb3NlZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCdmb2N1cycpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBEcm9wRG93bkxpc3RDb21wb25lbnQucHJvdG90eXBlLCBcIm9uRm9jdXNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgnYmx1cicpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBEcm9wRG93bkxpc3RDb21wb25lbnQucHJvdG90eXBlLCBcIm9uQmx1clwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgQ29udGVudENoaWxkKEl0ZW1UZW1wbGF0ZURpcmVjdGl2ZSwgeyBzdGF0aWM6IGZhbHNlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBJdGVtVGVtcGxhdGVEaXJlY3RpdmUpXG5dLCBEcm9wRG93bkxpc3RDb21wb25lbnQucHJvdG90eXBlLCBcIml0ZW1UZW1wbGF0ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgQ29udGVudENoaWxkKEdyb3VwVGVtcGxhdGVEaXJlY3RpdmUsIHsgc3RhdGljOiBmYWxzZSB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgR3JvdXBUZW1wbGF0ZURpcmVjdGl2ZSlcbl0sIERyb3BEb3duTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwiZ3JvdXBUZW1wbGF0ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgQ29udGVudENoaWxkKEZpeGVkR3JvdXBUZW1wbGF0ZURpcmVjdGl2ZSwgeyBzdGF0aWM6IGZhbHNlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBGaXhlZEdyb3VwVGVtcGxhdGVEaXJlY3RpdmUpXG5dLCBEcm9wRG93bkxpc3RDb21wb25lbnQucHJvdG90eXBlLCBcImZpeGVkR3JvdXBUZW1wbGF0ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgQ29udGVudENoaWxkKFZhbHVlVGVtcGxhdGVEaXJlY3RpdmUsIHsgc3RhdGljOiBmYWxzZSB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgVmFsdWVUZW1wbGF0ZURpcmVjdGl2ZSlcbl0sIERyb3BEb3duTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwidmFsdWVUZW1wbGF0ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgQ29udGVudENoaWxkKEhlYWRlclRlbXBsYXRlRGlyZWN0aXZlLCB7IHN0YXRpYzogZmFsc2UgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEhlYWRlclRlbXBsYXRlRGlyZWN0aXZlKVxuXSwgRHJvcERvd25MaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJoZWFkZXJUZW1wbGF0ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgQ29udGVudENoaWxkKEZvb3RlclRlbXBsYXRlRGlyZWN0aXZlLCB7IHN0YXRpYzogZmFsc2UgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZvb3RlclRlbXBsYXRlRGlyZWN0aXZlKVxuXSwgRHJvcERvd25MaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJmb290ZXJUZW1wbGF0ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgQ29udGVudENoaWxkKE5vRGF0YVRlbXBsYXRlRGlyZWN0aXZlLCB7IHN0YXRpYzogZmFsc2UgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE5vRGF0YVRlbXBsYXRlRGlyZWN0aXZlKVxuXSwgRHJvcERvd25MaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJub0RhdGFUZW1wbGF0ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgVmlld0NoaWxkKCdjb250YWluZXInLCB7IHJlYWQ6IFZpZXdDb250YWluZXJSZWYsIHN0YXRpYzogdHJ1ZSB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgVmlld0NvbnRhaW5lclJlZilcbl0sIERyb3BEb3duTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwiY29udGFpbmVyXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBWaWV3Q2hpbGQoJ3BvcHVwVGVtcGxhdGUnLCB7IHN0YXRpYzogdHJ1ZSB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgVGVtcGxhdGVSZWYpXG5dLCBEcm9wRG93bkxpc3RDb21wb25lbnQucHJvdG90eXBlLCBcInBvcHVwVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIFZpZXdDaGlsZCgnd3JhcHBlcicsIHsgc3RhdGljOiB0cnVlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFbGVtZW50UmVmKVxuXSwgRHJvcERvd25MaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ3cmFwcGVyXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBWaWV3Q2hpbGQoJ29wdGlvbnNMaXN0JywgeyBzdGF0aWM6IGZhbHNlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBMaXN0Q29tcG9uZW50KVxuXSwgRHJvcERvd25MaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJvcHRpb25zTGlzdFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmstd2lkZ2V0JyksXG4gICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmstZHJvcGRvd24nKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIERyb3BEb3duTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwid2lkZ2V0Q2xhc3Nlc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2F0dHIuZGlyJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgRHJvcERvd25MaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXJcIiwgbnVsbCk7XG5Ecm9wRG93bkxpc3RDb21wb25lbnQgPSBEcm9wRG93bkxpc3RDb21wb25lbnRfMSA9IF9fZGVjb3JhdGUoW1xuICAgIENvbXBvbmVudCh7XG4gICAgICAgIGV4cG9ydEFzOiAna2VuZG9Ecm9wRG93bkxpc3QnLFxuICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgIERST1BET1dOTElTVF9WQUxVRV9BQ0NFU1NPUixcbiAgICAgICAgICAgIERhdGFTZXJ2aWNlLFxuICAgICAgICAgICAgU2VsZWN0aW9uU2VydmljZSxcbiAgICAgICAgICAgIE5hdmlnYXRpb25TZXJ2aWNlLFxuICAgICAgICAgICAgRGlzYWJsZWRJdGVtc1NlcnZpY2UsXG4gICAgICAgICAgICBMb2NhbGl6YXRpb25TZXJ2aWNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHByb3ZpZGU6IEwxME5fUFJFRklYLFxuICAgICAgICAgICAgICAgIHVzZVZhbHVlOiAna2VuZG8uZHJvcGRvd25saXN0J1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwcm92aWRlOiBGaWx0ZXJhYmxlQ29tcG9uZW50LCB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBEcm9wRG93bkxpc3RDb21wb25lbnRfMSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZTogS2VuZG9JbnB1dCwgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gRHJvcERvd25MaXN0Q29tcG9uZW50XzEpXG4gICAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIHNlbGVjdG9yOiAna2VuZG8tZHJvcGRvd25saXN0JyxcbiAgICAgICAgdGVtcGxhdGU6IGBcbiAgICAgICAgPG5nLWNvbnRhaW5lciBrZW5kb0Ryb3BEb3duTGlzdExvY2FsaXplZE1lc3NhZ2VzXG4gICAgICAgICAgICBpMThuLW5vRGF0YVRleHQ9XCJrZW5kby5kcm9wZG93bmxpc3Qubm9EYXRhVGV4dHxUaGUgdGV4dCBkaXNwbGF5ZWQgaW4gdGhlIHBvcHVwIHdoZW4gdGhlcmUgYXJlIG5vIGl0ZW1zXCJcbiAgICAgICAgICAgIG5vRGF0YVRleHQ9XCJOTyBEQVRBIEZPVU5EXCJcbiAgICAgICAgPlxuICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgPHNwYW4gI3dyYXBwZXIgdW5zZWxlY3RhYmxlPVwib25cIlxuICAgICAgICAgIHJvbGU9XCJsaXN0Ym94XCJcbiAgICAgICAgICBbaWRdPVwiZm9jdXNhYmxlSWRcIlxuICAgICAgICAgIFtuZ0NsYXNzXT1cIntcbiAgICAgICAgICAgICdrLWRyb3Bkb3duLXdyYXAnOiB0cnVlLFxuICAgICAgICAgICAgJ2stc3RhdGUtZGlzYWJsZWQnOiB0aGlzLmRpc2FibGVkXG4gICAgICAgICAgfVwiXG4gICAgICAgICAgW2F0dHIuZGlyXT1cImRpcmVjdGlvblwiXG4gICAgICAgICAgW2F0dHIucmVhZG9ubHldPVwicmVhZG9ubHlcIlxuICAgICAgICAgIFthdHRyLnRhYmluZGV4XT1cIndpZGdldFRhYkluZGV4XCJcbiAgICAgICAgICBbYXR0ci5hcmlhLWRpc2FibGVkXT1cImRpc2FibGVkXCJcbiAgICAgICAgICBbYXR0ci5hcmlhLXJlYWRvbmx5XT1cInJlYWRvbmx5XCJcbiAgICAgICAgICBhcmlhLWhhc3BvcHVwPVwibGlzdGJveFwiXG4gICAgICAgICAgW2F0dHIuYXJpYS1leHBhbmRlZF09XCJhcmlhRXhwYW5kZWRcIlxuICAgICAgICAgIFthdHRyLmFyaWEtb3duc109XCJhcmlhT3duc1wiXG4gICAgICAgICAgW2F0dHIuYXJpYS1hY3RpdmVkZXNjZW5kYW50XT1cImFyaWFBY3RpdmVkZXNjZW5kYW50XCJcbiAgICAgICAgICBbYXR0ci5hcmlhLWxhYmVsXT1cIm5vRGF0YUxhYmVsXCJcbiAgICAgICAgICAoa2V5ZG93bik9XCJrZXlkb3duKCRldmVudClcIlxuICAgICAgICAgIChrZXlwcmVzcyk9XCJrZXlwcmVzcygkZXZlbnQpXCJcbiAgICAgICAgICAoY2xpY2spPVwiY2xpY2soJGV2ZW50KVwiXG4gICAgICAgICAgW2tlbmRvRXZlbnRzT3V0c2lkZUFuZ3VsYXJdPVwie1xuICAgICAgICAgICAgZm9jdXM6IGZvY3VzQ29tcG9uZW50LFxuICAgICAgICAgICAgYmx1cjogYmx1ckNvbXBvbmVudFxuICAgICAgICAgICAgfVwiXG4gICAgICAgICAgW3Njb3BlXT1cInRoaXNcIlxuICAgICAgICA+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImstaW5wdXRcIiB1bnNlbGVjdGFibGU9XCJvblwiIFtpZF09XCJ2YWx1ZUxhYmVsSWRcIj5cbiAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSAqbmdJZj1cInZhbHVlVGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgICAgIFt0ZW1wbGF0ZUNvbnRleHRdPVwie1xuICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVJlZjogdmFsdWVUZW1wbGF0ZS50ZW1wbGF0ZVJlZixcbiAgICAgICAgICAgICAgICAgICAgICAgJGltcGxpY2l0OiBkYXRhSXRlbVxuICAgICAgICAgICAgICAgICAgIH1cIj5cbiAgICAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgW25nSWZdPVwiIXZhbHVlVGVtcGxhdGVcIj57eyBnZXRUZXh0KCkgfX08L25nLXRlbXBsYXRlPlxuICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgIDxzcGFuIGNsYXNzPVwiay1zZWxlY3RcIiB1bnNlbGVjdGFibGU9XCJvblwiPlxuICAgICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJrLWljb25cIlxuICAgICAgICAgICAgICAgICAgICB1bnNlbGVjdGFibGU9XCJvblwiXG4gICAgICAgICAgICAgICAgICAgIFtuZ0NsYXNzXT1cImJ1dHRvbkNsYXNzZXNcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgPG5nLXRlbXBsYXRlICNwb3B1cFRlbXBsYXRlPlxuICAgICAgICAgICAgICAgPCEtLWZpbHRlcmFibGUtLT5cblxuICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlIFtuZ0lmXT1cImZpbHRlcmFibGVcIj5cbiAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImstbGlzdC1maWx0ZXJcIiAoY2xpY2spPVwiJGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpXCI+XG4gICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW2F0dHIuYXJpYS1vd25zXT1cImFyaWFPd25zXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFthdHRyLmFyaWEtYWN0aXZlZGVzY2VuZGFudF09XCJhcmlhQWN0aXZlZGVzY2VuZGFudFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbYXR0ci5hcmlhLWxhYmVsXT1cIm5vRGF0YUxhYmVsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmluZGV4PVwiLTFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW2ZpbHRlcklucHV0XT1cImlzRm9jdXNlZCAmJiAhdG91Y2hFbmFibGVkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtkaXJdPVwiZGlyZWN0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFsobmdNb2RlbCldPVwiZmlsdGVyVGV4dFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImstdGV4dGJveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAoa2V5ZG93bik9XCJrZXlkb3duKCRldmVudClcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgKGlucHV0KT1cImhhbmRsZUZpbHRlcigkZXZlbnQpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIChmb2N1cyk9XCJvbkZpbHRlckZvY3VzKClcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgKGJsdXIpPVwiYmx1ckZpbHRlcklucHV0KClcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktc2VhcmNoXCIgdW5zZWxlY3RhYmxlPVwib25cIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgICAgIDwhLS1kZWZhdWx0IGl0ZW0tLT5cbiAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdJZl09XCJkZWZhdWx0SXRlbSAmJiAhaXRlbVRlbXBsYXRlXCI+XG4gICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImstbGlzdC1vcHRpb25sYWJlbFwiIFtuZ0NsYXNzXT1cInsgJ2stc3RhdGUtZGlzYWJsZWQnOiBpc0Rpc2FibGVkRGVmYXVsdEl0ZW0gfVwiIGtlbmRvRHJvcERvd25zU2VsZWN0YWJsZSBbaW5kZXhdPVwiLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAge3sgZ2V0RGVmYXVsdEl0ZW1UZXh0KCkgfX1cbiAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgW25nSWZdPVwiZGVmYXVsdEl0ZW0gJiYgaXRlbVRlbXBsYXRlXCI+XG4gICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImstbGlzdC1vcHRpb25sYWJlbFwiIFtuZ0NsYXNzXT1cInsgJ2stc3RhdGUtZGlzYWJsZWQnOiBpc0Rpc2FibGVkRGVmYXVsdEl0ZW0gfVwiIGtlbmRvRHJvcERvd25zU2VsZWN0YWJsZSBbaW5kZXhdPVwiLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbdGVtcGxhdGVDb250ZXh0XT1cIntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVJlZjogaXRlbVRlbXBsYXRlLnRlbXBsYXRlUmVmLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbXBsaWNpdDogZGVmYXVsdEl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICAgICA8IS0taGVhZGVyIHRlbXBsYXRlLS0+XG4gICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgKm5nSWY9XCJoZWFkZXJUZW1wbGF0ZVwiXG4gICAgICAgICAgICAgICAgICAgW3RlbXBsYXRlQ29udGV4dF09XCJ7XG4gICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUmVmOiBoZWFkZXJUZW1wbGF0ZS50ZW1wbGF0ZVJlZlxuICAgICAgICAgICAgICAgICAgIH1cIj5cbiAgICAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICAgICA8IS0tbGlzdC0tPlxuICAgICAgICAgICAgICAgPGtlbmRvLWxpc3RcbiAgICAgICAgICAgICAgICAgICAjb3B0aW9uc0xpc3RcbiAgICAgICAgICAgICAgICAgICBbaWRdPVwibGlzdEJveElkXCJcbiAgICAgICAgICAgICAgICAgICBbb3B0aW9uUHJlZml4XT1cIm9wdGlvblByZWZpeFwiXG4gICAgICAgICAgICAgICAgICAgW2RhdGFdPVwiZGF0YVwiXG4gICAgICAgICAgICAgICAgICAgW3RleHRGaWVsZF09XCJ0ZXh0RmllbGRcIlxuICAgICAgICAgICAgICAgICAgIFt2YWx1ZUZpZWxkXT1cInZhbHVlRmllbGRcIlxuICAgICAgICAgICAgICAgICAgIFt0ZW1wbGF0ZV09XCJpdGVtVGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgICAgIFtncm91cFRlbXBsYXRlXT1cImdyb3VwVGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgICAgIFtmaXhlZEdyb3VwVGVtcGxhdGVdPVwiZml4ZWRHcm91cFRlbXBsYXRlXCJcbiAgICAgICAgICAgICAgICAgICBbaGVpZ2h0XT1cImxpc3RIZWlnaHRcIlxuICAgICAgICAgICAgICAgICAgIFtzaG93XT1cImlzT3BlblwiXG4gICAgICAgICAgICAgICAgICAgW3ZpcnR1YWxdPVwidmlydHVhbFwiXG4gICAgICAgICAgICAgICAgICAgKHBhZ2VDaGFuZ2UpPVwicGFnZUNoYW5nZSgkZXZlbnQpXCJcbiAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICA8L2tlbmRvLWxpc3Q+XG4gICAgICAgICAgICAgICA8IS0tbm8tZGF0YSB0ZW1wbGF0ZS0tPlxuICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImstbm9kYXRhXCIgKm5nSWY9XCJkYXRhLmxlbmd0aCA9PT0gMFwiPlxuICAgICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdJZl09XCJub0RhdGFUZW1wbGF0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgIFt0ZW1wbGF0ZUNvbnRleHRdPVwie1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVSZWY6IG5vRGF0YVRlbXBsYXRlID8gbm9EYXRhVGVtcGxhdGUudGVtcGxhdGVSZWYgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgfVwiPlxuICAgICAgICAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlIFtuZ0lmXT1cIiFub0RhdGFUZW1wbGF0ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pnt7IG5vRGF0YVRleHQgfX08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICA8IS0tZm9vdGVyIHRlbXBsYXRlLS0+XG4gICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgKm5nSWY9XCJmb290ZXJUZW1wbGF0ZVwiXG4gICAgICAgICAgICAgICAgICAgW3RlbXBsYXRlQ29udGV4dF09XCJ7XG4gICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUmVmOiBmb290ZXJUZW1wbGF0ZS50ZW1wbGF0ZVJlZlxuICAgICAgICAgICAgICAgICAgIH1cIj5cbiAgICAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICA8L3NwYW4+XG4gICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdJZl09XCJpc09wZW5cIj5cbiAgICAgICAgICAgIDxrZW5kby1yZXNpemUtc2Vuc29yIChyZXNpemUpPVwib25SZXNpemUoKVwiPjwva2VuZG8tcmVzaXplLXNlbnNvcj5cbiAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgPG5nLWNvbnRhaW5lciAjY29udGFpbmVyPjwvbmctY29udGFpbmVyPlxuICBgXG4gICAgfSksXG4gICAgX19wYXJhbSgxMCwgT3B0aW9uYWwoKSksIF9fcGFyYW0oMTAsIEluamVjdChUT1VDSF9FTkFCTEVEKSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtMb2NhbGl6YXRpb25TZXJ2aWNlLFxuICAgICAgICBQb3B1cFNlcnZpY2UsXG4gICAgICAgIFNlbGVjdGlvblNlcnZpY2UsXG4gICAgICAgIE5hdmlnYXRpb25TZXJ2aWNlLFxuICAgICAgICBEaXNhYmxlZEl0ZW1zU2VydmljZSxcbiAgICAgICAgRGF0YVNlcnZpY2UsXG4gICAgICAgIE5nWm9uZSxcbiAgICAgICAgUmVuZGVyZXIyLFxuICAgICAgICBFbGVtZW50UmVmLFxuICAgICAgICBDaGFuZ2VEZXRlY3RvclJlZiwgQm9vbGVhbl0pXG5dLCBEcm9wRG93bkxpc3RDb21wb25lbnQpO1xuXG4vKipcbiAqIFJlbmRlcnMgdGhlIGNvbnRlbnQgb2YgdGhlIGN1c3RvbSBsaXN0IGl0ZW0gaW4gdGhlIE11bHRpU2VsZWN0XG4gKiAoW3NlZSBleGFtcGxlXSh7JSBzbHVnIHRlbXBsYXRlc19tdWx0aXNlbGVjdCAlfSN0b2MtY3VzdG9taXppbmctdGhlLWl0ZW0tY29udGVudCkpLlxuICogVGhlIHRlbXBsYXRlIGNvbnRleHQgaXMgc2V0IHRvIHRoZSBjdXJyZW50IGNvbXBvbmVudC5cbiAqIFRvIGdldCBhIHJlZmVyZW5jZSB0byB0aGUgY3VycmVudCB0ZXh0IHRoYXQgaXMgdHlwZWQgYnkgdGhlXG4gKiB1c2VyLCB1c2UgdGhlIGBsZXQtY3VzdG9tSXRlbWAgZGlyZWN0aXZlLlxuICpcbiAqID4gVGhlIGBDdXN0b21JdGVtVGVtcGxhdGVgIGRpcmVjdGl2ZSBjYW4gb25seSBiZSB1c2VkIHdpdGggdGhlIE11bHRpU2VsZWN0IGNvbXBvbmVudC5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIF9AQ29tcG9uZW50KHtcbiAqIHNlbGVjdG9yOiAnbXktYXBwJyxcbiAqIHRlbXBsYXRlOiBgXG4gKiAgPGtlbmRvLW11bHRpc2VsZWN0IFtkYXRhXT1cImxpc3RJdGVtc1wiIFthbGxvd0N1c3RvbV09XCJ0cnVlXCI+XG4gKiAgICA8bmctdGVtcGxhdGUga2VuZG9NdWx0aVNlbGVjdEN1c3RvbUl0ZW1UZW1wbGF0ZSBsZXQtY3VzdG9tSXRlbT5cbiAqICAgICAgPHNwYW4+TmV3IEl0ZW06IHt7Y3VzdG9tSXRlbX19PC9zcGFuPlxuICogICAgPC9uZy10ZW1wbGF0ZT5cbiAqICA8L2tlbmRvLW11bHRpc2VsZWN0PlxuICogYFxuICogfSlcbiAqIGNsYXNzIEFwcENvbXBvbmVudCB7XG4gKiAgIHB1YmxpYyBsaXN0SXRlbXM6IEFycmF5PHN0cmluZz4gPSBbXCJJdGVtIDFcIiwgXCJJdGVtIDJcIiwgXCJJdGVtIDNcIiwgXCJJdGVtIDRcIl07XG4gKiB9XG4gKiBgYGBcbiAqXG4gKi9cbmxldCBDdXN0b21JdGVtVGVtcGxhdGVEaXJlY3RpdmUgPSBjbGFzcyBDdXN0b21JdGVtVGVtcGxhdGVEaXJlY3RpdmUge1xuICAgIGNvbnN0cnVjdG9yKHRlbXBsYXRlUmVmKSB7XG4gICAgICAgIHRoaXMudGVtcGxhdGVSZWYgPSB0ZW1wbGF0ZVJlZjtcbiAgICB9XG59O1xuQ3VzdG9tSXRlbVRlbXBsYXRlRGlyZWN0aXZlID0gX19kZWNvcmF0ZShbXG4gICAgRGlyZWN0aXZlKHtcbiAgICAgICAgc2VsZWN0b3I6ICdba2VuZG9NdWx0aVNlbGVjdEN1c3RvbUl0ZW1UZW1wbGF0ZV0nXG4gICAgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtUZW1wbGF0ZVJlZl0pXG5dLCBDdXN0b21JdGVtVGVtcGxhdGVEaXJlY3RpdmUpO1xuXG4vKipcbiAqIFJlbmRlcnMgdGhlIHNlbGVjdGVkIHRhZyB2YWx1ZSBvZiB0aGUgTXVsdGlTZWxlY3RcbiAqIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgdGVtcGxhdGVzX211bHRpc2VsZWN0ICV9I3RvYy10YWctdGVtcGxhdGUpKS5cbiAqIFRoZSB0ZW1wbGF0ZSBjb250ZXh0IGlzIHNldCB0byB0aGUgY3VycmVudCBjb21wb25lbnQuXG4gKiBUbyBnZXQgYSByZWZlcmVuY2UgdG8gdGhlIGN1cnJlbnQgZGF0YSBpdGVtLCB1c2UgdGhlIGBsZXQtZGF0YUl0ZW1gIGRpcmVjdGl2ZS5cbiAqXG4gKiA+IFRoZSBgVGFnVGVtcGxhdGVgIGRpcmVjdGl2ZSBjYW4gb25seSBiZSB1c2VkIHdpdGggdGhlIE11bHRpU2VsZWN0IGFuZCBNdWx0aVNlbGVjdFRyZWUgY29tcG9uZW50cy5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIF9AQ29tcG9uZW50KHtcbiAqIHNlbGVjdG9yOiAnbXktYXBwJyxcbiAqIHRlbXBsYXRlOiBgXG4gKiAgPGtlbmRvLW11bHRpc2VsZWN0IFtkYXRhXT1cIml0ZW1zXCI+XG4gKiAgICA8bmctdGVtcGxhdGUga2VuZG9NdWx0aVNlbGVjdFRhZ1RlbXBsYXRlIGxldC1kYXRhSXRlbT5cbiAqICAgICAgPHNwYW4+e3tkYXRhSXRlbX19IG9wdGlvbjwvc3Bhbj5cbiAqICAgIDwvbmctdGVtcGxhdGU+XG4gKiAgPC9rZW5kby1tdWx0aXNlbGVjdD5cbiAqIGBcbiAqIH0pXG4gKiBjbGFzcyBBcHBDb21wb25lbnQge1xuICogICBwdWJsaWMgaXRlbXM6IEFycmF5PHN0cmluZz4gPSBbXCJJdGVtIDFcIiwgXCJJdGVtIDJcIiwgXCJJdGVtIDNcIiwgXCJJdGVtIDRcIl07XG4gKiB9XG4gKiBgYGBcbiAqL1xubGV0IFRhZ1RlbXBsYXRlRGlyZWN0aXZlID0gY2xhc3MgVGFnVGVtcGxhdGVEaXJlY3RpdmUge1xuICAgIGNvbnN0cnVjdG9yKHRlbXBsYXRlUmVmKSB7XG4gICAgICAgIHRoaXMudGVtcGxhdGVSZWYgPSB0ZW1wbGF0ZVJlZjtcbiAgICB9XG59O1xuVGFnVGVtcGxhdGVEaXJlY3RpdmUgPSBfX2RlY29yYXRlKFtcbiAgICBEaXJlY3RpdmUoe1xuICAgICAgICBzZWxlY3RvcjogJ1trZW5kb011bHRpU2VsZWN0VGFnVGVtcGxhdGVdLFtrZW5kb011bHRpU2VsZWN0VHJlZVRhZ1RlbXBsYXRlXSdcbiAgICB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW1RlbXBsYXRlUmVmXSlcbl0sIFRhZ1RlbXBsYXRlRGlyZWN0aXZlKTtcblxuLyoqXG4gKiBSZW5kZXJzIHRoZSBncm91cGVkIHRhZyB2YWx1ZXMgaW4gdGhlIE11bHRpU2VsZWN0XG4gKiAoW3NlZSBleGFtcGxlXSh7JSBzbHVnIHN1bW1hcnl0YWdtb2RlX211bHRpc2VsZWN0ICV9KSkuXG4gKiBUaGUgdGVtcGxhdGUgY29udGV4dCBpcyBzZXQgdG8gdGhlIGN1cnJlbnQgY29tcG9uZW50LlxuICogVG8gZ2V0IGEgcmVmZXJlbmNlIHRvIHRoZSBjdXJyZW50IGdyb3VwZWRcbiAqIGRhdGEgaXRlbXMgY29sbGVjdGlvbiwgdXNlIHRoZSBgbGV0LWRhdGFJdGVtc2AgZGlyZWN0aXZlLlxuICpcbiAqID4gVGhlIGBHcm91cFRhZ1RlbXBsYXRlYCBkaXJlY3RpdmUgY2FuIG9ubHkgYmUgdXNlZCB3aXRoIHRoZSBNdWx0aVNlbGVjdCBhbmQgTXVsdGlTZWxlY3RUcmVlIGNvbXBvbmVudHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBfQENvbXBvbmVudCh7XG4gKiBzZWxlY3RvcjogJ215LWFwcCcsXG4gKiB0ZW1wbGF0ZTogYFxuICogIDxrZW5kby1tdWx0aXNlbGVjdCBrZW5kb011bHRpU2VsZWN0U3VtbWFyeVRhZyBbZGF0YV09XCJpdGVtc1wiPlxuICogICAgPG5nLXRlbXBsYXRlIGtlbmRvTXVsdGlTZWxlY3RHcm91cFRhZ1RlbXBsYXRlIGxldC1kYXRhSXRlbXM+XG4gKiAgICAgIDxzcGFuPnt7ZGF0YUl0ZW1zLmxlbmd0aH19IGl0ZW0ocykgc2VsZWN0ZWQ8L3NwYW4+XG4gKiAgICA8L25nLXRlbXBsYXRlPlxuICogIDwva2VuZG8tbXVsdGlzZWxlY3Q+XG4gKiBgXG4gKiB9KVxuICogY2xhc3MgQXBwQ29tcG9uZW50IHtcbiAqICAgcHVibGljIGl0ZW1zOiBBcnJheTxzdHJpbmc+ID0gW1wiSXRlbSAxXCIsIFwiSXRlbSAyXCIsIFwiSXRlbSAzXCIsIFwiSXRlbSA0XCJdO1xuICogfVxuICogYGBgXG4gKi9cbmxldCBHcm91cFRhZ1RlbXBsYXRlRGlyZWN0aXZlID0gY2xhc3MgR3JvdXBUYWdUZW1wbGF0ZURpcmVjdGl2ZSB7XG4gICAgY29uc3RydWN0b3IodGVtcGxhdGVSZWYpIHtcbiAgICAgICAgdGhpcy50ZW1wbGF0ZVJlZiA9IHRlbXBsYXRlUmVmO1xuICAgIH1cbn07XG5Hcm91cFRhZ1RlbXBsYXRlRGlyZWN0aXZlID0gX19kZWNvcmF0ZShbXG4gICAgRGlyZWN0aXZlKHtcbiAgICAgICAgc2VsZWN0b3I6ICdba2VuZG9NdWx0aVNlbGVjdEdyb3VwVGFnVGVtcGxhdGVdLFtrZW5kb011bHRpU2VsZWN0VHJlZUdyb3VwVGFnVGVtcGxhdGVdJ1xuICAgIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbVGVtcGxhdGVSZWZdKVxuXSwgR3JvdXBUYWdUZW1wbGF0ZURpcmVjdGl2ZSk7XG5cbi8qKlxuICogQXJndW1lbnRzIGZvciB0aGUgYHJlbW92ZVRhZ2AgZXZlbnQuIFRoZSBgcmVtb3ZlVGFnYCBldmVudCBmaXJlcyB3aGVuIGEgdGFnIGlzIGFib3V0XG4gKiB0byB0aGUgcmVtb3ZlZC4gSWYgeW91IGNhbmNlbCB0aGUgZXZlbnQsIHRoZSByZW1vdmFsIGlzIHByZXZlbnRlZC5cbiAqL1xuY2xhc3MgUmVtb3ZlVGFnRXZlbnQgZXh0ZW5kcyBQcmV2ZW50YWJsZUV2ZW50IHtcbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIHRoZSBldmVudCBhcmd1bWVudHMgZm9yIHRoZSBgcmVtb3ZlYCBldmVudC5cbiAgICAgKiBAcGFyYW0gZGF0YUl0ZW0gLSBUaGUgZGF0YSBpdGVtIG9yIGFuIGFycmF5IG9mIGRhdGEgaXRlbXMgdGhhdCB3aWxsIGJlIHJlbW92ZWQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZGF0YUl0ZW0pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5kYXRhSXRlbSA9IGRhdGFJdGVtO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IG5vcm1hbGl6ZUNoZWNrYm94ZXNTZXR0aW5ncyA9IChzZXR0aW5ncykgPT4ge1xuICAgIGlmIChpc09iamVjdChzZXR0aW5ncykpIHtcbiAgICAgICAgY29uc3QgZGVmYXVsdFNldHRpbmdzID0geyBlbmFibGVkOiB0cnVlLCBjaGVja09uQ2xpY2s6IHRydWUgfTtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRTZXR0aW5ncywgc2V0dGluZ3MpO1xuICAgIH1cbiAgICByZXR1cm4geyBlbmFibGVkOiBCb29sZWFuKHNldHRpbmdzKSwgY2hlY2tPbkNsaWNrOiB0cnVlIH07XG59O1xuXG4vKiB0c2xpbnQ6ZGlzYWJsZTptZW1iZXItb3JkZXJpbmcgKi9cbnZhciBNdWx0aVNlbGVjdENvbXBvbmVudF8xO1xuY29uc3QgTVVMVElTRUxFQ1RfVkFMVUVfQUNDRVNTT1IgPSB7XG4gICAgbXVsdGk6IHRydWUsXG4gICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLXVzZS1iZWZvcmUtZGVjbGFyZVxuICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IE11bHRpU2VsZWN0Q29tcG9uZW50KVxufTtcbi8qKlxuICogUmVwcmVzZW50cyB0aGUgW0tlbmRvIFVJIE11bHRpU2VsZWN0IGNvbXBvbmVudCBmb3IgQW5ndWxhcl0oeyUgc2x1ZyBvdmVydmlld19tdWx0aXNlbGVjdCAlfSkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBfQENvbXBvbmVudCh7XG4gKiBzZWxlY3RvcjogJ215LWFwcCcsXG4gKiB0ZW1wbGF0ZTogYFxuICogIDxrZW5kby1tdWx0aXNlbGVjdCBbZGF0YV09XCJsaXN0SXRlbXNcIj5cbiAqICA8L2tlbmRvLW11bHRpc2VsZWN0PlxuICogYFxuICogfSlcbiAqIGNsYXNzIEFwcENvbXBvbmVudCB7XG4gKiAgIHB1YmxpYyBsaXN0SXRlbXM6IEFycmF5PHN0cmluZz4gPSBbXCJJdGVtIDFcIiwgXCJJdGVtIDJcIiwgXCJJdGVtIDNcIiwgXCJJdGVtIDRcIl07XG4gKiB9XG4gKiBgYGBcbiAqL1xubGV0IE11bHRpU2VsZWN0Q29tcG9uZW50ID0gTXVsdGlTZWxlY3RDb21wb25lbnRfMSA9IGNsYXNzIE11bHRpU2VsZWN0Q29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihsb2NhbGl6YXRpb24sIHBvcHVwU2VydmljZSwgZGF0YVNlcnZpY2UsIHNlbGVjdGlvblNlcnZpY2UsIG5hdmlnYXRpb25TZXJ2aWNlLCBkaXNhYmxlZEl0ZW1zU2VydmljZSwgY2RyLCBkaWZmZXJzLCByZW5kZXJlciwgaG9zdEVsZW1lbnQsIF96b25lLCB0b3VjaEVuYWJsZWQkJDEpIHtcbiAgICAgICAgdGhpcy5sb2NhbGl6YXRpb24gPSBsb2NhbGl6YXRpb247XG4gICAgICAgIHRoaXMucG9wdXBTZXJ2aWNlID0gcG9wdXBTZXJ2aWNlO1xuICAgICAgICB0aGlzLmRhdGFTZXJ2aWNlID0gZGF0YVNlcnZpY2U7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZSA9IHNlbGVjdGlvblNlcnZpY2U7XG4gICAgICAgIHRoaXMubmF2aWdhdGlvblNlcnZpY2UgPSBuYXZpZ2F0aW9uU2VydmljZTtcbiAgICAgICAgdGhpcy5kaXNhYmxlZEl0ZW1zU2VydmljZSA9IGRpc2FibGVkSXRlbXNTZXJ2aWNlO1xuICAgICAgICB0aGlzLmNkciA9IGNkcjtcbiAgICAgICAgdGhpcy5kaWZmZXJzID0gZGlmZmVycztcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLmhvc3RFbGVtZW50ID0gaG9zdEVsZW1lbnQ7XG4gICAgICAgIHRoaXMuX3pvbmUgPSBfem9uZTtcbiAgICAgICAgdGhpcy50b3VjaEVuYWJsZWQgPSB0b3VjaEVuYWJsZWQkJDE7XG4gICAgICAgIHRoaXMubGlzdEJveElkID0gZ3VpZCQxKCk7XG4gICAgICAgIHRoaXMudGFnTGlzdElkID0gZ3VpZCQxKCk7XG4gICAgICAgIHRoaXMudGFnUHJlZml4ID0gXCJ0YWctXCIgKyBndWlkJDEoKTtcbiAgICAgICAgdGhpcy5vcHRpb25QcmVmaXggPSBcIm9wdGlvbi1cIiArIGd1aWQkMSgpO1xuICAgICAgICB0aGlzLmZvY3VzZWRUYWdJbmRleCA9IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBoaWRkZW5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZm9jdXNhYmxlSWQgPSBgay0ke2d1aWQkMSgpfWA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgdG8gY2xvc2UgdGhlIG9wdGlvbnMgbGlzdCBvZiB0aGUgTXVsdGlTZWxlY3QgYWZ0ZXIgdGhlIGl0ZW0gc2VsZWN0aW9uIGlzIGZpbmlzaGVkXG4gICAgICAgICAqIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgb3BlbnN0YXRlX211bHRpc2VsZWN0ICV9I3RvYy1rZWVwaW5nLXRoZS1vcHRpb25zLWxpc3Qtb3Blbi13aGlsZS1vbi1mb2N1cykpLlxuICAgICAgICAgKiBAZGVmYXVsdCB0cnVlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmF1dG9DbG9zZSA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgdGhlIFtgdGFiaW5kZXhgXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0dsb2JhbF9hdHRyaWJ1dGVzL3RhYmluZGV4KSBvZiB0aGUgY29tcG9uZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50YWJpbmRleCA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIHRoZSBkaXNhYmxlZCBzdGF0ZSBvZiB0aGUgY29tcG9uZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyB0aGUgcmVhZC1vbmx5IHN0YXRlIG9mIHRoZSBjb21wb25lbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlYWRvbmx5ID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbmFibGVzIHRoZSBbZmlsdGVyaW5nXSh7JSBzbHVnIGZpbHRlcmluZ19tdWx0aXNlbGVjdCAlfSkgZnVuY3Rpb25hbGl0eSBvZiB0aGUgTXVsdGlTZWxlY3QuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZpbHRlcmFibGUgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgdGhlIGhlaWdodCBvZiB0aGUgc3VnZ2VzdGlvbnMgbGlzdC4gQnkgZGVmYXVsdCwgYGxpc3RIZWlnaHRgIGlzIDIwMHB4LlxuICAgICAgICAgKlxuICAgICAgICAgKiA+IFRoZSBgbGlzdEhlaWdodGAgcHJvcGVydHkgYWZmZWN0cyBvbmx5IHRoZSBsaXN0IG9mIHN1Z2dlc3Rpb25zIGFuZCBub3QgdGhlIHdob2xlIHBvcHVwIGNvbnRhaW5lci5cbiAgICAgICAgICogPiBUbyBzZXQgdGhlIGhlaWdodCBvZiB0aGUgcG9wdXAgY29udGFpbmVyLCB1c2UgYHBvcHVwU2V0dGluZ3MuaGVpZ2h0YC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubGlzdEhlaWdodCA9IDIwMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHNldCB0byBgdHJ1ZWAsIHJlbmRlcnMgYSBidXR0b24gb24gaG92ZXJpbmcgb3ZlciB0aGUgY29tcG9uZW50LlxuICAgICAgICAgKiBDbGlja2luZyB0aGlzIGJ1dHRvbiByZXNldHMgdGhlIHZhbHVlIG9mIHRoZSBjb21wb25lbnQgdG8gYW4gZW1wdHkgYXJyYXkgYW5kIHRyaWdnZXJzIHRoZSBgY2hhbmdlYCBldmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2xlYXJCdXR0b24gPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQSB1c2VyLWRlZmluZWQgY2FsbGJhY2sgZnVuY3Rpb24gd2hpY2ggcmVjZWl2ZXMgYW4gYXJyYXkgb2Ygc2VsZWN0ZWQgZGF0YSBpdGVtcyBhbmQgbWFwcyB0aGVtIHRvIGFuIGFycmF5IG9mIHRhZ3MuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7IEFueVtdIH0gZGF0YUl0ZW1zIC0gVGhlIHNlbGVjdGVkIGRhdGEgaXRlbXMgZnJvbSB0aGUgbGlzdC5cbiAgICAgICAgICogQHJldHVybnMgeyBBbnlbXSB9IC0gVGhlIHRhZ3MgdGhhdCB3aWxsIGJlIHJlbmRlcmVkIGJ5IHRoZSBjb21wb25lbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRhZ01hcHBlciA9ICh0YWdzKSA9PiB0YWdzIHx8IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIHdoZXRoZXIgdGhlIE11bHRpU2VsZWN0IGFsbG93cyB1c2VyLWRlZmluZWQgdmFsdWVzIHRoYXQgYXJlIG5vdCBwcmVzZW50IGluIHRoZSBkYXRhc2V0XG4gICAgICAgICAqIChbbW9yZSBpbmZvcm1hdGlvbiBhbmQgZXhhbXBsZXNdKHslIHNsdWcgY3VzdG9tX3ZhbHVlc19tdWx0aXNlbGVjdCAlfSkpLlxuICAgICAgICAgKiBEZWZhdWx0cyB0byBgZmFsc2VgLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hbGxvd0N1c3RvbSA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQSB1c2VyLWRlZmluZWQgY2FsbGJhY2sgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBub3JtYWxpemVkIGN1c3RvbSB2YWx1ZXMuXG4gICAgICAgICAqIFR5cGljYWxseSB1c2VkIHdoZW4gdGhlIGRhdGEgaXRlbXMgYXJlIGRpZmZlcmVudCBmcm9tIHR5cGUgYHN0cmluZ2AuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7IEFueSB9IHZhbHVlIC0gVGhlIGN1c3RvbSB2YWx1ZSB0aGF0IGlzIGRlZmluZWQgYnkgdGhlIHVzZXIuXG4gICAgICAgICAqIEByZXR1cm5zIHsgQW55IH1cbiAgICAgICAgICpcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogYGBgdHNcbiAgICAgICAgICogaW1wb3J0IHsgbWFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuICAgICAgICAgKlxuICAgICAgICAgKiBfQENvbXBvbmVudCh7XG4gICAgICAgICAqIHNlbGVjdG9yOiAnbXktYXBwJyxcbiAgICAgICAgICogdGVtcGxhdGU6IGBcbiAgICAgICAgICogICA8a2VuZG8tbXVsdGlzZWxlY3RcbiAgICAgICAgICogICAgICAgW2FsbG93Q3VzdG9tXT1cInRydWVcIlxuICAgICAgICAgKiAgICAgICBbZGF0YV09XCJsaXN0SXRlbXNcIlxuICAgICAgICAgKiAgICAgICB0ZXh0RmllbGQ9XCJ0ZXh0XCJcbiAgICAgICAgICogICAgICAgdmFsdWVGaWVsZD1cInZhbHVlXCJcbiAgICAgICAgICogICAgICAgW3ZhbHVlTm9ybWFsaXplcl09XCJ2YWx1ZU5vcm1hbGl6ZXJcIlxuICAgICAgICAgKiAgICAgICAodmFsdWVDaGFuZ2UpPVwib25WYWx1ZUNoYW5nZSgkZXZlbnQpXCJcbiAgICAgICAgICogICA+XG4gICAgICAgICAqICAgPC9rZW5kby1tdWx0aXNlbGVjdD5cbiAgICAgICAgICogYFxuICAgICAgICAgKiB9KVxuICAgICAgICAgKlxuICAgICAgICAgKiBjbGFzcyBBcHBDb21wb25lbnQge1xuICAgICAgICAgKiAgIHB1YmxpYyBsaXN0SXRlbXM6IEFycmF5PHsgdGV4dDogc3RyaW5nLCB2YWx1ZTogbnVtYmVyIH0+ID0gW1xuICAgICAgICAgKiAgICAgICB7IHRleHQ6IFwiU21hbGxcIiwgdmFsdWU6IDEgfSxcbiAgICAgICAgICogICAgICAgeyB0ZXh0OiBcIk1lZGl1bVwiLCB2YWx1ZTogMiB9LFxuICAgICAgICAgKiAgICAgICB7IHRleHQ6IFwiTGFyZ2VcIiwgdmFsdWU6IDMgfVxuICAgICAgICAgKiAgIF07XG4gICAgICAgICAqXG4gICAgICAgICAqICAgcHVibGljIG9uVmFsdWVDaGFuZ2UodmFsdWUpIHtcbiAgICAgICAgICogICAgICAgY29uc29sZS5sb2coXCJ2YWx1ZUNoYW5nZSA6IFwiLCB2YWx1ZSk7XG4gICAgICAgICAqICAgfVxuICAgICAgICAgKlxuICAgICAgICAgKiAgIHB1YmxpYyB2YWx1ZU5vcm1hbGl6ZXIgPSAodGV4dCQ6IE9ic2VydmFibGU8c3RyaW5nPikgPT4gdGV4dCQucGlwZShtYXAoKHRleHQ6IHN0cmluZykgPT4ge1xuICAgICAgICAgKiAgICAgIHJldHVybiB7XG4gICAgICAgICAqICAgICAgICAgdmFsdWU6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICgxMDAwIC0gMTAwKSArIDEwMDApLCAvL2dlbmVyYXRlIHVuaXF1ZSB2YWx1ZUZpZWxkXG4gICAgICAgICAqICAgICAgICAgdGV4dDogdGV4dCB9O1xuICAgICAgICAgKiAgIH0pKTtcbiAgICAgICAgICpcbiAgICAgICAgICogfVxuICAgICAgICAgKiBgYGBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudmFsdWVOb3JtYWxpemVyID0gKHRleHQpID0+IHRleHQucGlwZShtYXAoKHVzZXJJbnB1dCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY29tcGFyZXIgPSAoaXRlbSkgPT4gdHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnICYmIHVzZXJJbnB1dC50b0xvd2VyQ2FzZSgpID09PSBpdGVtLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBjb25zdCBtYXRjaGluZ1ZhbHVlID0gdGhpcy52YWx1ZS5maW5kKGNvbXBhcmVyKTtcbiAgICAgICAgICAgIGlmIChtYXRjaGluZ1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoaW5nVmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBtYXRjaGluZ0l0ZW0gPSB0aGlzLmRhdGFTZXJ2aWNlLmZpbmQoY29tcGFyZXIpO1xuICAgICAgICAgICAgcmV0dXJuIG1hdGNoaW5nSXRlbSA/IG1hdGNoaW5nSXRlbSA6IHVzZXJJbnB1dDtcbiAgICAgICAgfSkpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSB1c2VyIHR5cGVzIGluIHRoZSBpbnB1dCBmaWVsZC5cbiAgICAgICAgICogWW91IGNhbiBmaWx0ZXIgdGhlIHNvdXJjZSBiYXNlZCBvbiB0aGUgcGFzc2VkIGZpbHRyYXRpb24gdmFsdWUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZpbHRlckNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgdmFsdWUgaXMgY2hhbmdlZCZtZGFzaDtcbiAgICAgICAgICogd2hlbiB0aGUgY29tcG9uZW50IGlzIGJsdXJyZWQgb3IgdGhlIHZhbHVlIGlzIGNsZWFyZWQgdGhyb3VnaCB0aGUgKipDbGVhcioqIGJ1dHRvblxuICAgICAgICAgKiAoW3NlZSBleGFtcGxlXSh7JSBzbHVnIG92ZXJ2aWV3X211bHRpc2VsZWN0ICV9I3RvYy1ldmVudHMpKS5cbiAgICAgICAgICogV2hlbiB0aGUgdmFsdWUgb2YgdGhlIGNvbXBvbmVudCBpcyBwcm9ncmFtbWF0aWNhbGx5IGNoYW5nZWQgdG8gYG5nTW9kZWxgIG9yIGBmb3JtQ29udHJvbGBcbiAgICAgICAgICogdGhyb3VnaCBpdHMgQVBJIG9yIGZvcm0gYmluZGluZywgdGhlIGB2YWx1ZUNoYW5nZWAgZXZlbnQgaXMgbm90IHRyaWdnZXJlZCBiZWNhdXNlIGl0XG4gICAgICAgICAqIG1pZ2h0IGNhdXNlIGEgbWl4LXVwIHdpdGggdGhlIGJ1aWx0LWluIGB2YWx1ZUNoYW5nZWAgbWVjaGFuaXNtcyBvZiB0aGUgYG5nTW9kZWxgIG9yIGBmb3JtQ29udHJvbGAgYmluZGluZ3MuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSBwb3B1cCBpcyBhYm91dCB0byBvcGVuXG4gICAgICAgICAqIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgb3BlbnN0YXRlX211bHRpc2VsZWN0ICV9I3RvYy1wcmV2ZW50aW5nLW9wZW5pbmctYW5kLWNsb3NpbmcpKS5cbiAgICAgICAgICogVGhpcyBldmVudCBpcyBwcmV2ZW50YWJsZS4gSWYgeW91IGNhbmNlbCBpdCwgdGhlIHBvcHVwIHdpbGwgcmVtYWluIGNsb3NlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub3BlbiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGFmdGVyIHRoZSBwb3B1cCBoYXMgYmVlbiBvcGVuZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9wZW5lZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgcG9wdXAgaXMgYWJvdXQgdG8gY2xvc2VcbiAgICAgICAgICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBvcGVuc3RhdGVfbXVsdGlzZWxlY3QgJX0jdG9jLXByZXZlbnRpbmctb3BlbmluZy1hbmQtY2xvc2luZykpLlxuICAgICAgICAgKiBUaGlzIGV2ZW50IGlzIHByZXZlbnRhYmxlLiBJZiB5b3UgY2FuY2VsIGl0LCB0aGUgcG9wdXAgd2lsbCByZW1haW4gb3Blbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2xvc2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBhZnRlciB0aGUgcG9wdXAgaGFzIGJlZW4gY2xvc2VkLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jbG9zZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgdGhlIHVzZXIgZm9jdXNlcyB0aGUgTXVsdGlTZWxlY3QuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uRm9jdXMgPSBuZXcgRXZlbnRFbWl0dGVyKCk7IC8vdHNsaW50OmRpc2FibGUtbGluZTpuby1vdXRwdXQtcmVuYW1lXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgdGhlIE11bHRpU2VsZWN0IGdldHMgYmx1cnJlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25CbHVyID0gbmV3IEV2ZW50RW1pdHRlcigpOyAvL3RzbGludDpkaXNhYmxlLWxpbmU6bm8tb3V0cHV0LXJlbmFtZVxuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIGEgdGFnIGlzIGFib3V0IHRvIGJlIHJlbW92ZWQuXG4gICAgICAgICAqIFRoaXMgZXZlbnQgaXMgcHJldmVudGFibGUuIElmIHlvdSBjYW5jZWwgaXQsIHRoZSB0YWcgd2lsbCBub3QgYmUgcmVtb3ZlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmVtb3ZlVGFnID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLndpZGdldENsYXNzZXMgPSB0cnVlO1xuICAgICAgICB0aGlzLmluaXRpYWxpemVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMub25DaGFuZ2VDYWxsYmFjayA9IChfKSA9PiB7IH07XG4gICAgICAgIHRoaXMub25Ub3VjaGVkQ2FsbGJhY2sgPSAoXykgPT4geyB9O1xuICAgICAgICB0aGlzLl9wbGFjZWhvbGRlciA9ICcnO1xuICAgICAgICB0aGlzLl9vcGVuID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3ZhbHVlID0gW107XG4gICAgICAgIHRoaXMuX3BvcHVwU2V0dGluZ3MgPSB7IGFuaW1hdGU6IHRydWUgfTtcbiAgICAgICAgdGhpcy5fY2hlY2tib3hlcyA9IHsgZW5hYmxlZDogZmFsc2UgfTtcbiAgICAgICAgdGhpcy5faXNGb2N1c2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWREYXRhSXRlbXMgPSBbXTtcbiAgICAgICAgdGhpcy5jdXN0b21WYWx1ZVN1YmplY3QgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICB0aGlzLm9ic2VydmFibGVTdWJzY3JpcHRpb25zID0gbmV3IFN1YnNjcmlwdGlvbigpO1xuICAgICAgICB2YWxpZGF0ZVBhY2thZ2UocGFja2FnZU1ldGFkYXRhKTtcbiAgICAgICAgdGhpcy5wb3B1cE1vdXNlRG93bkhhbmRsZXIgPSB0aGlzLm9uTW91c2VEb3duLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuZGF0YSA9IFtdO1xuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IHRoaXMubG9jYWxpemF0aW9uLnJ0bCA/ICdydGwnIDogJ2x0cic7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlRXZlbnRzKCk7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlVG91Y2hFdmVudHMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9jdXNlcyBhIHNwZWNpZmljIGl0ZW0gb2YgdGhlIE11bHRpU2VsZWN0IGJhc2VkIG9uIGEgcHJvdmlkZWQgaW5kZXguXG4gICAgICogSWYgdGhlcmUgaXMgYSBjdXN0b20gaXRlbSBpdCBpcyBwb3NpdGlvbmVkIGF0IGluZGV4IC0xLlxuICAgICAqIElmIG51bGwgb3IgaW52YWxpZCBpbmRleCBpcyBwcm92aWRlZCB0aGUgZm9jdXMgd2lsbCBiZSByZW1vdmVkLlxuICAgICAqL1xuICAgIGZvY3VzSXRlbUF0KGluZGV4KSB7XG4gICAgICAgIGNvbnN0IG1pbkluZGV4ID0gdGhpcy5hbGxvd0N1c3RvbSA/IC0xIDogMDtcbiAgICAgICAgY29uc3QgaXNJblJhbmdlID0gbWluSW5kZXggPD0gMCAmJiBpbmRleCA8IHRoaXMuZGF0YS5sZW5ndGg7XG4gICAgICAgIGlmIChpc1ByZXNlbnQoaW5kZXgpICYmIGlzSW5SYW5nZSAmJiAhdGhpcy5kaXNhYmxlZEl0ZW1zU2VydmljZS5pc0luZGV4RGlzYWJsZWQoaW5kZXgpKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXMoaW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzKG51bGwpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvY3VzZXMgdGhlIE11bHRpU2VsZWN0LlxuICAgICAqL1xuICAgIGZvY3VzKCkge1xuICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoYmFyLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIG9uU2VhcmNoQmFyRm9jdXMoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc0ZvY3VzZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaXNGb2N1c2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChoYXNPYnNlcnZlcnModGhpcy5vbkZvY3VzKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3pvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkZvY3VzLmVtaXQoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBCbHVycyB0aGUgTXVsdGlTZWxlY3QuXG4gICAgICovXG4gICAgYmx1cigpIHtcbiAgICAgICAgaWYgKCF0aGlzLmRpc2FibGVkKSB7XG4gICAgICAgICAgICB0aGlzLnNlYXJjaGJhci5ibHVyKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIG9uU2VhcmNoQmFyQmx1cigpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzRm9jdXNlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXNGb2N1c2VkID0gZmFsc2U7XG4gICAgICAgIGlmIChoYXNPYnNlcnZlcnModGhpcy5vbkJsdXIpIHx8XG4gICAgICAgICAgICBoYXNPYnNlcnZlcnModGhpcy5maWx0ZXJDaGFuZ2UpIHx8XG4gICAgICAgICAgICBoYXNPYnNlcnZlcnModGhpcy5jbG9zZSkgfHxcbiAgICAgICAgICAgIGlzVW50b3VjaGVkKHRoaXMuaG9zdEVsZW1lbnQubmF0aXZlRWxlbWVudCkpIHtcbiAgICAgICAgICAgIHRoaXMuX3pvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlUG9wdXAoKTtcbiAgICAgICAgICAgICAgICBpZiAoISh0aGlzLmlzT3BlbiAmJiB0aGlzLmFsbG93Q3VzdG9tKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyRmlsdGVyKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMub25CbHVyLmVtaXQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9uVG91Y2hlZENhbGxiYWNrKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5hbGxvd0N1c3RvbSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJGaWx0ZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2xvc2VQb3B1cCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICB3cmFwcGVyTW91c2Vkb3duKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IHRoaXMuc2VhcmNoYmFyLmlucHV0Lm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgIGlmIChldmVudC5idXR0b24gPT09IDApIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRm9jdXNlZCAmJiB0aGlzLmlzT3BlbiAmJiBldmVudC50YXJnZXQgPT09IGlucHV0RWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy50b3VjaEVuYWJsZWQgfHwgKHRoaXMudG91Y2hFbmFibGVkICYmIGV2ZW50LnRhcmdldC50YWdOYW1lICE9PSAnU1BBTicpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hiYXIuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudG9nZ2xlUG9wdXAoIXRoaXMuaXNPcGVuKTtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIG9uTW91c2VEb3duKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBvblJlc2l6ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX29wZW4pIHtcbiAgICAgICAgICAgIGNvbnN0IHBvcHVwV3JhcHBlciA9IHRoaXMucG9wdXBSZWYucG9wdXBFbGVtZW50O1xuICAgICAgICAgICAgY29uc3QgeyBtaW4sIG1heCB9ID0gdGhpcy53aWR0aDtcbiAgICAgICAgICAgIHBvcHVwV3JhcHBlci5zdHlsZS5taW5XaWR0aCA9IG1pbjtcbiAgICAgICAgICAgIHBvcHVwV3JhcHBlci5zdHlsZS53aWR0aCA9IG1heDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgYXBwZW5kVG8oKSB7XG4gICAgICAgIGNvbnN0IHsgYXBwZW5kVG8gfSA9IHRoaXMucG9wdXBTZXR0aW5ncztcbiAgICAgICAgaWYgKCFhcHBlbmRUbyB8fCBhcHBlbmRUbyA9PT0gJ3Jvb3QnKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcHBlbmRUbyA9PT0gJ2NvbXBvbmVudCcgPyB0aGlzLmNvbnRhaW5lciA6IGFwcGVuZFRvO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBkYXRhIG9mIHRoZSBNdWx0aVNlbGVjdC5cbiAgICAgKlxuICAgICAqID4gVGhlIGRhdGEgaGFzIHRvIGJlIHByb3ZpZGVkIGluIGFuIGFycmF5LWxpa2UgbGlzdCBvZiBpdGVtcy5cbiAgICAgKi9cbiAgICBzZXQgZGF0YShkYXRhKSB7XG4gICAgICAgIHRoaXMuZGF0YVNlcnZpY2UuZGF0YSA9IGRhdGEgfHwgW107XG4gICAgICAgIGlmICh0aGlzLnZpcnR1YWwpIHtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbC5za2lwID0gMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pbml0aWFsaXplZCkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh0aGlzLnZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgZGF0YSgpIHtcbiAgICAgICAgY29uc3QgdmlydHVhbCA9IHRoaXMudmlydHVhbDtcbiAgICAgICAgaWYgKHZpcnR1YWwpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gdmlydHVhbC5za2lwIHx8IDA7XG4gICAgICAgICAgICBjb25zdCBlbmQgPSBzdGFydCArIHZpcnR1YWwucGFnZVNpemU7XG4gICAgICAgICAgICAvL1VzZSBsZW5ndGggaW5zdGVhZCBvZiBpdGVtc0NvdW50IGJlY2F1c2Ugb2YgZ3JvdXBpbmdcbiAgICAgICAgICAgIHZpcnR1YWwudG90YWwgPSB0aGlzLmRhdGFTZXJ2aWNlLmRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVNlcnZpY2UuZGF0YS5zbGljZShzdGFydCwgZW5kKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhU2VydmljZS5kYXRhO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSB2YWx1ZSBvZiB0aGUgTXVsdGlTZWxlY3QuIEl0IGNhbiBiZSBlaXRoZXIgb2YgdGhlIHByaW1pdGl2ZSAoc3RyaW5nLCBudW1iZXJzKSBvciBvZiB0aGUgY29tcGxleCAob2JqZWN0cykgdHlwZS5cbiAgICAgKiBUbyBkZWZpbmUgdGhlIHR5cGUsIHVzZSB0aGUgYHZhbHVlUHJpbWl0aXZlYCBvcHRpb24uXG4gICAgICpcbiAgICAgKiA+IEFsbCBzZWxlY3RlZCB2YWx1ZXMgd2hpY2ggYXJlIG5vdCBwcmVzZW50IGluIHRoZSBzb3VyY2UgYXJlIGlnbm9yZWQuXG4gICAgICovXG4gICAgc2V0IHZhbHVlKHZhbHVlcykge1xuICAgICAgICB0aGlzLl92YWx1ZSA9IHZhbHVlcyA/IHZhbHVlcyA6IFtdO1xuICAgICAgICBpZiAoIXRoaXMuZGlmZmVyICYmIHRoaXMudmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuZGlmZmVyID0gdGhpcy5kaWZmZXJzLmZpbmQodGhpcy52YWx1ZSkuY3JlYXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy52YWx1ZUNoYW5nZURldGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMuaW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUodGhpcy52YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IHZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzZXQgdGFiSW5kZXgodGFiSW5kZXgpIHtcbiAgICAgICAgdGhpcy50YWJpbmRleCA9IHRhYkluZGV4O1xuICAgIH1cbiAgICBnZXQgdGFiSW5kZXgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRhYmluZGV4O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgaGludCB3aGljaCBpcyBkaXNwbGF5ZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIGVtcHR5LlxuICAgICAqIFdoZW4gdGhlIHZhbHVlcyBhcmUgc2VsZWN0ZWQsIGl0IGRpc2FwcGVhcnMuXG4gICAgICovXG4gICAgc2V0IHBsYWNlaG9sZGVyKHRleHQpIHtcbiAgICAgICAgdGhpcy5fcGxhY2Vob2xkZXIgPSB0ZXh0IHx8ICcnO1xuICAgIH1cbiAgICBnZXQgcGxhY2Vob2xkZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkRGF0YUl0ZW1zLmxlbmd0aCA/ICcnIDogdGhpcy5fcGxhY2Vob2xkZXI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlZmluZXMgYSBCb29sZWFuIGZ1bmN0aW9uIHRoYXQgaXMgZXhlY3V0ZWQgZm9yIGVhY2ggZGF0YSBpdGVtIGluIHRoZSBjb21wb25lbnRcbiAgICAgKiAoW3NlZSBleGFtcGxlc10oeyUgc2x1ZyBkaXNhYmxlZGl0ZW1zX211bHRpc2VsZWN0ICV9KSkuIERldGVybWluZXMgd2hldGhlciB0aGUgaXRlbSB3aWxsIGJlIGRpc2FibGVkLlxuICAgICAqL1xuICAgIHNldCBpdGVtRGlzYWJsZWQoZm4pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBpdGVtRGlzYWJsZWQgbXVzdCBiZSBhIGZ1bmN0aW9uLCBidXQgcmVjZWl2ZWQgJHtKU09OLnN0cmluZ2lmeShmbil9LmApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGlzYWJsZWRJdGVtc1NlcnZpY2UuaXRlbURpc2FibGVkID0gZm47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB3aGV0aGVyIGNoZWNrYm94ZXMgd2lsbCBiZSByZW5kZXJlZCBiZWZvcmUgZWFjaCBpdGVtIGluIHRoZSBwb3B1cCBsaXN0LlxuICAgICAqL1xuICAgIHNldCBjaGVja2JveGVzKHNldHRpbmdzKSB7XG4gICAgICAgIHRoaXMuX2NoZWNrYm94ZXMgPSBub3JtYWxpemVDaGVja2JveGVzU2V0dGluZ3Moc2V0dGluZ3MpO1xuICAgIH1cbiAgICBnZXQgY2hlY2tib3hlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrYm94ZXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuYWJsZXMgdGhlIFt2aXJ0dWFsaXphdGlvbl0oeyUgc2x1ZyB2aXJ0dWFsaXphdGlvbl9tdWx0aXNlbGVjdCAlfSkgZnVuY3Rpb25hbGl0eS5cbiAgICAgKi9cbiAgICBzZXQgdmlydHVhbChzZXR0aW5ncykge1xuICAgICAgICB0aGlzLl92aXJ0dWFsU2V0dGluZ3MgPSBub3JtYWxpemVWaXJ0dWFsaXphdGlvblNldHRpbmdzKHNldHRpbmdzKTtcbiAgICB9XG4gICAgZ2V0IHZpcnR1YWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl92aXJ0dWFsU2V0dGluZ3M7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbmZpZ3VyZXMgdGhlIHBvcHVwIG9mIHRoZSBNdWx0aVNlbGVjdC5cbiAgICAgKlxuICAgICAqIFRoZSBhdmFpbGFibGUgb3B0aW9ucyBhcmU6XG4gICAgICogLSBgYW5pbWF0ZTogQm9vbGVhbmAmbWRhc2g7Q29udHJvbHMgdGhlIHBvcHVwIGFuaW1hdGlvbi4gQnkgZGVmYXVsdCwgdGhlIG9wZW4gYW5kIGNsb3NlIGFuaW1hdGlvbnMgYXJlIGVuYWJsZWQuXG4gICAgICogLSBgd2lkdGg6IE51bWJlciB8IFN0cmluZ2AmbWRhc2g7U2V0cyB0aGUgd2lkdGggb2YgdGhlIHBvcHVwIGNvbnRhaW5lci4gQnkgZGVmYXVsdCwgdGhlIHdpZHRoIG9mIHRoZSBob3N0IGVsZW1lbnQgaXMgdXNlZC4gSWYgc2V0IHRvIGBhdXRvYCwgdGhlIGNvbXBvbmVudCBhdXRvbWF0aWNhbGx5IGFkanVzdHMgdGhlIHdpZHRoIG9mIHRoZSBwb3B1cCBhbmQgbm8gaXRlbSBsYWJlbHMgYXJlIHdyYXBwZWQuIFRoZSBgYXV0b2AgbW9kZSBpcyBub3Qgc3VwcG9ydGVkIHdoZW4gdmlydHVhbCBzY3JvbGxpbmcgaXMgZW5hYmxlZC5cbiAgICAgKiAtIGBoZWlnaHQ6IE51bWJlcmAmbWRhc2g7U2V0cyB0aGUgaGVpZ2h0IG9mIHRoZSBwb3B1cCBjb250YWluZXIuXG4gICAgICogLSBgcG9wdXBDbGFzczogU3RyaW5nYCZtZGFzaDtTcGVjaWZpZXMgYSBsaXN0IG9mIENTUyBjbGFzc2VzIHRoYXQgYXJlIHVzZWQgdG8gc3R5bGUgdGhlIHBvcHVwLlxuICAgICAqIC0gYGFwcGVuZFRvOiBcInJvb3RcIiB8IFwiY29tcG9uZW50XCIgfCBWaWV3Q29udGFpbmVyUmVmYCZtZGFzaDtTcGVjaWZpZXMgdGhlIGNvbXBvbmVudCB0byB3aGljaCB0aGUgcG9wdXAgd2lsbCBiZSBhcHBlbmRlZC5cbiAgICAgKi9cbiAgICBzZXQgcG9wdXBTZXR0aW5ncyhzZXR0aW5ncykge1xuICAgICAgICB0aGlzLl9wb3B1cFNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7IGFuaW1hdGU6IHRydWUgfSwgc2V0dGluZ3MpO1xuICAgIH1cbiAgICBnZXQgcG9wdXBTZXR0aW5ncygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BvcHVwU2V0dGluZ3M7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB0aGUgdHlwZSBvZiB0aGUgc2VsZWN0ZWQgdmFsdWUuXG4gICAgICogSWYgc2V0IHRvIGB0cnVlYCwgdGhlIHNlbGVjdGVkIHZhbHVlIGhhcyB0byBiZSBvZiB0aGUgcHJpbWl0aXZlIHR5cGVcbiAgICAgKiAoW21vcmUgaW5mb3JtYXRpb24gYW5kIGV4YW1wbGVdKHslIHNsdWcgdmFsdWViaW5kaW5nX211bHRpc2VsZWN0ICV9I3RvYy1wcmltaXRpdmUtdmFsdWVzLWZyb20tb2JqZWN0LWZpZWxkcykpLlxuICAgICAqL1xuICAgIHNldCB2YWx1ZVByaW1pdGl2ZShpc1ByaW1pdGl2ZSkge1xuICAgICAgICB0aGlzLl92YWx1ZVByaW1pdGl2ZSA9IGlzUHJpbWl0aXZlO1xuICAgIH1cbiAgICBnZXQgdmFsdWVQcmltaXRpdmUoKSB7XG4gICAgICAgIGlmICghaXNQcmVzZW50KHRoaXMuX3ZhbHVlUHJpbWl0aXZlKSkge1xuICAgICAgICAgICAgcmV0dXJuICFpc1ByZXNlbnQodGhpcy52YWx1ZUZpZWxkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWVQcmltaXRpdmU7XG4gICAgfVxuICAgIGdldCBkaXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbjtcbiAgICB9XG4gICAgZ2V0IGRpc2FibGVkQ2xhc3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpc2FibGVkO1xuICAgIH1cbiAgICBnZXQgbGlzdENvbnRhaW5lckNsYXNzZXMoKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckNsYXNzZXMgPSBbJ2stbGlzdC1jb250YWluZXInLCAnay1yZXNldCddO1xuICAgICAgICBpZiAodGhpcy5wb3B1cFNldHRpbmdzLnBvcHVwQ2xhc3MpIHtcbiAgICAgICAgICAgIGNvbnRhaW5lckNsYXNzZXMucHVzaCh0aGlzLnBvcHVwU2V0dGluZ3MucG9wdXBDbGFzcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lckNsYXNzZXM7XG4gICAgfVxuICAgIGdldCB3aWR0aCgpIHtcbiAgICAgICAgbGV0IHdyYXBwZXJPZmZzZXRXaWR0aCA9IDA7XG4gICAgICAgIGlmIChpc0RvY3VtZW50QXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICAgIHdyYXBwZXJPZmZzZXRXaWR0aCA9IHRoaXMud3JhcHBlci5uYXRpdmVFbGVtZW50Lm9mZnNldFdpZHRoO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5wb3B1cFNldHRpbmdzLndpZHRoIHx8IHdyYXBwZXJPZmZzZXRXaWR0aDtcbiAgICAgICAgY29uc3QgbWluV2lkdGggPSBpc05hTih3cmFwcGVyT2Zmc2V0V2lkdGgpID8gd3JhcHBlck9mZnNldFdpZHRoIDogYCR7d3JhcHBlck9mZnNldFdpZHRofXB4YDtcbiAgICAgICAgY29uc3QgbWF4V2lkdGggPSBpc05hTih3aWR0aCkgPyB3aWR0aCA6IGAke3dpZHRofXB4YDtcbiAgICAgICAgcmV0dXJuIHsgbWluOiBtaW5XaWR0aCwgbWF4OiBtYXhXaWR0aCB9O1xuICAgIH1cbiAgICBnZXQgaGVpZ2h0KCkge1xuICAgICAgICBjb25zdCBwb3B1cEhlaWdodCA9IHRoaXMucG9wdXBTZXR0aW5ncy5oZWlnaHQ7XG4gICAgICAgIHJldHVybiBpc1ByZXNlbnQocG9wdXBIZWlnaHQpID8gYCR7cG9wdXBIZWlnaHR9cHhgIDogJ2F1dG8nO1xuICAgIH1cbiAgICBnZXQgYWN0aXZlRGVzY2VuZGFudCgpIHtcbiAgICAgICAgY29uc3QgZm9jdXNlZFRhZ0luZGV4ID0gdGhpcy5mb2N1c2VkVGFnSW5kZXg7XG4gICAgICAgIGNvbnN0IGZvY3VzZWRMaXN0SW5kZXggPSB0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZDtcbiAgICAgICAgbGV0IHByZWZpeDtcbiAgICAgICAgbGV0IGl0ZW07XG4gICAgICAgIGlmIChpc1ByZXNlbnQoZm9jdXNlZFRhZ0luZGV4KSAmJiAhdGhpcy5pc09wZW4pIHtcbiAgICAgICAgICAgIGl0ZW0gPSB0aGlzLnRhZ3NbZm9jdXNlZFRhZ0luZGV4XTtcbiAgICAgICAgICAgIHByZWZpeCA9IHRoaXMudGFnUHJlZml4O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzUHJlc2VudChmb2N1c2VkTGlzdEluZGV4KSAmJiBmb2N1c2VkTGlzdEluZGV4ICE9PSAtMSAmJiB0aGlzLmlzT3Blbikge1xuICAgICAgICAgICAgaXRlbSA9IHRoaXMuZGF0YVNlcnZpY2UuaXRlbUF0KGZvY3VzZWRMaXN0SW5kZXgpO1xuICAgICAgICAgICAgcHJlZml4ID0gdGhpcy5vcHRpb25QcmVmaXg7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJlZml4ICsgXCItXCIgKyBnZXR0ZXIkMShpdGVtLCB0aGlzLnZhbHVlRmllbGQpO1xuICAgIH1cbiAgICBnZXQgbm9EYXRhTGFiZWwoKSB7XG4gICAgICAgIGlmICh0aGlzLmRhdGFTZXJ2aWNlLml0ZW1zQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vRGF0YVRleHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGNsZWFyVGl0bGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsaXphdGlvbi5nZXQoJ2NsZWFyVGl0bGUnKTtcbiAgICB9XG4gICAgZ2V0IGNsZWFyQnV0dG9uVmlzaWJsaXR5KCkge1xuICAgICAgICBpZiAodGhpcy50b3VjaEVuYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybiAndmlzaWJsZSc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHZlcmlmeVNldHRpbmdzKCkge1xuICAgICAgICBpZiAoIWlzRGV2TW9kZSgpIHx8IHRoaXMudmFsdWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc0FycmF5KHRoaXMudmFsdWUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoTXVsdGlzZWxlY3RNZXNzYWdlcy5hcnJheSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudmFsdWVQcmltaXRpdmUgPT09IHRydWUgJiYgaXNPYmplY3RBcnJheSh0aGlzLnZhbHVlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKE11bHRpc2VsZWN0TWVzc2FnZXMucHJpbWl0aXZlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy52YWx1ZVByaW1pdGl2ZSA9PT0gZmFsc2UgJiYgIWlzT2JqZWN0QXJyYXkodGhpcy52YWx1ZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihNdWx0aXNlbGVjdE1lc3NhZ2VzLm9iamVjdCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmFsdWVPclRleHQgPSAhaXNQcmVzZW50KHRoaXMudmFsdWVGaWVsZCkgIT09ICFpc1ByZXNlbnQodGhpcy50ZXh0RmllbGQpO1xuICAgICAgICBpZiAodmFsdWVPclRleHQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihNdWx0aXNlbGVjdE1lc3NhZ2VzLnRleHRBbmRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGNoYW5nZShldmVudCkge1xuICAgICAgICBjb25zdCBpc0N1c3RvbUl0ZW0gPSAoaXNQcmVzZW50KGV2ZW50LmFkZGVkKSB8fCBpc1ByZXNlbnQoZXZlbnQucmVtb3ZlZCkpICYmIChldmVudC5hZGRlZCA9PT0gLTEgfHwgZXZlbnQucmVtb3ZlZCA9PT0gLTEpO1xuICAgICAgICBpZiAoaXNDdXN0b21JdGVtKSB7XG4gICAgICAgICAgICB0aGlzLmFkZEN1c3RvbVZhbHVlKHRoaXMudGV4dCk7XG4gICAgICAgICAgICByZXR1cm47IC8vIFRoZSBjaGFuZ2UgaXMgZW1pdGVkIGFzeW5jaHJvbm9zbHkuXG4gICAgICAgIH1cbiAgICAgICAgLy8gRXhpc3RpbmcgaXRlbXMuXG4gICAgICAgIGlmIChpc1ByZXNlbnQoZXZlbnQuYWRkZWQpKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRhSXRlbSA9IHRoaXMuZGF0YVNlcnZpY2UuaXRlbUF0KGV2ZW50LmFkZGVkKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld0l0ZW0gPSAodGhpcy52YWx1ZVByaW1pdGl2ZSAmJiBpc1ByZXNlbnQoZGF0YUl0ZW0pICYmIGlzUHJlc2VudChkYXRhSXRlbVt0aGlzLnZhbHVlRmllbGRdKSkgPyBkYXRhSXRlbVt0aGlzLnZhbHVlRmllbGRdIDogZGF0YUl0ZW07XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gWy4uLnRoaXMudmFsdWUsIG5ld0l0ZW1dO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1ByZXNlbnQoZXZlbnQucmVtb3ZlZCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGFJdGVtID0gdGhpcy5kYXRhU2VydmljZS5pdGVtQXQoZXZlbnQucmVtb3ZlZCk7XG4gICAgICAgICAgICBjb25zdCBmaWx0ZXIkJDEgPSAoaXRlbSkgPT4gZ2V0dGVyJDEoaXRlbSwgdGhpcy52YWx1ZUZpZWxkKSAhPT0gZ2V0dGVyJDEoZGF0YUl0ZW0sIHRoaXMudmFsdWVGaWVsZCk7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZS5maWx0ZXIoZmlsdGVyJCQxKTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1c2VkID0gZXZlbnQucmVtb3ZlZDtcbiAgICAgICAgICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVtaXRWYWx1ZUNoYW5nZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgc2V0U3RhdGUodmFsdWUpIHtcbiAgICAgICAgbGV0IGRhdGEgPSB0aGlzLmRhdGFTZXJ2aWNlLmRhdGE7XG4gICAgICAgIGlmICh0aGlzLmRhdGFTZXJ2aWNlLmdyb3VwZWQpIHtcbiAgICAgICAgICAgIGRhdGEgPSBkYXRhLmZpbHRlcihpdGVtID0+ICFpdGVtLmhlYWRlcikubWFwKGl0ZW0gPT4gaXRlbS52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2VsZWN0aW9uID0gc2VsZWN0ZWRJbmRpY2VzKHRoaXMudmFsdWUsIGRhdGEsIHRoaXMudmFsdWVGaWVsZCk7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5yZXNldFNlbGVjdGlvbihzZWxlY3Rpb24pO1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZEl0ZW1zU2VydmljZS5pc0luZGV4RGlzYWJsZWQodGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzZWQpKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCA9IHRoaXMuZmlyc3RGb2N1c2FibGVJbmRleCgwKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pc09wZW4gJiYgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YVNlcnZpY2UuaXRlbXNDb3VudCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCA9IHRoaXMuZmlyc3RGb2N1c2FibGVJbmRleCgwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuYWxsb3dDdXN0b20pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCA9IC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnZhbHVlUHJpbWl0aXZlICYmICF0aGlzLnZhbHVlRmllbGQpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRhSXRlbXMgPSB2YWx1ZS5zbGljZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc09iamVjdEFycmF5KHZhbHVlKSB8fCB0aGlzLnZhbHVlUHJpbWl0aXZlICYmIHRoaXMudmFsdWVGaWVsZCkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGFJdGVtcyA9IHJlc29sdmVBbGxWYWx1ZXModmFsdWUsIGRhdGEsIHRoaXMudmFsdWVGaWVsZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWREYXRhSXRlbXMubGVuZ3RoIDwgdmFsdWUubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0YUl0ZW1zID0gdmFsdWVcbiAgICAgICAgICAgICAgICAubWFwKGN1cnJlbnQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFJdGVtID0gdGhpcy5zZWxlY3RlZERhdGFJdGVtcy5maW5kKGl0ZW0gPT4gZ2V0dGVyJDEoaXRlbSwgdGhpcy52YWx1ZUZpZWxkKSA9PT0gZ2V0dGVyJDEoY3VycmVudCwgdGhpcy52YWx1ZUZpZWxkKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzUHJlc2VudChkYXRhSXRlbSkgPyBkYXRhSXRlbSA6IHRoaXMucmVzb2x2ZURhdGFJdGVtRnJvbVRhZ3MoY3VycmVudCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5maWx0ZXIoZGF0YUl0ZW0gPT4gaXNQcmVzZW50KGRhdGFJdGVtKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50YWdzID0gdGhpcy50YWdNYXBwZXIodGhpcy5zZWxlY3RlZERhdGFJdGVtcy5zbGljZSgwKSk7XG4gICAgICAgIHRoaXMuZGlzYWJsZWRJbmRpY2VzID0gdGhpcy5kaXNhYmxlZEl0ZW1zTWFwcGVyKCk7XG4gICAgICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgaGFuZGxlRmlsdGVyKHRleHQpIHtcbiAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDtcbiAgICAgICAgaWYgKHRleHQgJiYgIXRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgICB0aGlzLm9wZW5Qb3B1cCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmZpbHRlcmFibGUpIHtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyQ2hhbmdlLmVtaXQodGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNlYXJjaFRleHRBbmRGb2N1cyh0ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlYXJjaGJhci5zZXRJbnB1dFNpemUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHBhZ2VDaGFuZ2UoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgdmlydHVhbCA9IHRoaXMudmlydHVhbDtcbiAgICAgICAgdmlydHVhbC5za2lwID0gZXZlbnQuc2tpcDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGNsZWFyRmlsdGVyKCkge1xuICAgICAgICBpZiAodGhpcy5maWx0ZXJhYmxlICYmIHRoaXMudGV4dCkge1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJDaGFuZ2UuZW1pdChcIlwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRleHQgPSBcIlwiO1xuICAgICAgICAvKiBDbGVhcmluZyB0aGUgdmFsdWUgZnJvbSB0aGUgaW5wdXQgYXMgdGhlIHNldElucHV0U2l6ZSBjYWxjdWxhdGlvbiB3aWxsIGJlIGluY29ycmVjdCBvdGhlcndpc2UuXG4gICAgICAgICBDYWxsaW5nIGNkci5kZXRlY3RDaGFuZ2VzIHRvIGNsZWFyIHRoZSBpbnB1dCB2YWx1ZSBhcyBhIHJlc3VsdCBvZiBwcm9wZXJ0eSBiaW5kaW5nXG4gICAgICAgICBjYXVzZXMgSkFXUyB0byByZWFkIG91dGRhdGVkIHRhZyB2YWx1ZXMgaW4gSUUgdXBvbiB0YWcgc2VsZWN0aW9uIGZvciBzb21lIHJlYXNvbi4gKi9cbiAgICAgICAgdGhpcy5zZWFyY2hiYXIuaW5wdXQubmF0aXZlRWxlbWVudC52YWx1ZSA9IFwiXCI7XG4gICAgICAgIHRoaXMuc2VhcmNoYmFyLnNldElucHV0U2l6ZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgaGFuZGxlTmF2aWdhdGUoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgbmF2aWdhdGVJbnB1dCA9IHRoaXMudGV4dCAmJiBldmVudC5rZXlDb2RlICE9PSBLZXlzLkFycm93RG93biAmJiBldmVudC5rZXlDb2RlICE9PSBLZXlzLkFycm93VXA7XG4gICAgICAgIGNvbnN0IHNlbGVjdFZhbHVlID0gdGhpcy50ZXh0ICYmIGV2ZW50LmtleUNvZGUgPT09IEtleXMuRW50ZXIgfHwgZXZlbnQua2V5Q29kZSA9PT0gS2V5cy5Fc2NhcGU7XG4gICAgICAgIGNvbnN0IGRlbGV0ZVRhZyA9ICF0aGlzLnRleHQgJiYgZXZlbnQua2V5Q29kZSA9PT0gS2V5cy5CYWNrc3BhY2UgJiYgdGhpcy50YWdzLmxlbmd0aCA+IDA7XG4gICAgICAgIGlmIChkZWxldGVUYWcpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlQmFja3NwYWNlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQgfHwgbmF2aWdhdGVJbnB1dCAmJiAhc2VsZWN0VmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBldmVudERhdGEgPSBldmVudDtcbiAgICAgICAgY29uc3QgZm9jdXNlZCA9IGlzTmFOKHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1c2VkKSA/IC0xIDogdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzZWQ7XG4gICAgICAgIGNvbnN0IGFjdGlvbiA9IHRoaXMubmF2aWdhdGlvblNlcnZpY2UucHJvY2Vzcyh7XG4gICAgICAgICAgICBjdXJyZW50OiBmb2N1c2VkLFxuICAgICAgICAgICAgbWF4OiB0aGlzLmRhdGFTZXJ2aWNlLml0ZW1zQ291bnQgLSAxLFxuICAgICAgICAgICAgbWluOiB0aGlzLmFsbG93Q3VzdG9tICYmIHRoaXMudGV4dCA/IC0xIDogMCxcbiAgICAgICAgICAgIG9wZW46IHRoaXMuaXNPcGVuLFxuICAgICAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnREYXRhXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoYWN0aW9uICE9PSBOYXZpZ2F0aW9uQWN0aW9uLlVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgKChhY3Rpb24gPT09IE5hdmlnYXRpb25BY3Rpb24uRW50ZXIgJiYgdGhpcy5pc09wZW4pIHx8IGFjdGlvbiAhPT0gTmF2aWdhdGlvbkFjdGlvbi5FbnRlcikpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGhhbmRsZVJlbW92ZVRhZyh7IHRhZyB9KSB7XG4gICAgICAgIGNvbnN0IGV2ZW50QXJncyA9IG5ldyBSZW1vdmVUYWdFdmVudCh0YWcpO1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCB8fCB0aGlzLnJlYWRvbmx5KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgICB0aGlzLnJlbW92ZVRhZy5lbWl0KGV2ZW50QXJncyk7XG4gICAgICAgIGlmIChldmVudEFyZ3MuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFnIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlR3JvdXBUYWcodGFnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlU2luZ2xlVGFnKHRhZyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgY2xlYXJBbGwoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICAgICAgdGhpcy5jbGVhckZpbHRlcigpO1xuICAgICAgICBjb25zdCBzZWxlY3RlZCA9IHRoaXMuc2VsZWN0aW9uU2VydmljZS5zZWxlY3RlZDtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWUuZmlsdGVyKChfaXRlbSwgaW5kZXgpID0+IHRoaXMuZGlzYWJsZWRJdGVtc1NlcnZpY2UuaXNJbmRleERpc2FibGVkKHNlbGVjdGVkW2luZGV4XSkpO1xuICAgICAgICB0aGlzLmVtaXRWYWx1ZUNoYW5nZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgYWRkQ3VzdG9tVmFsdWUodGV4dCkge1xuICAgICAgICB0aGlzLmN1c3RvbVZhbHVlU3ViamVjdC5uZXh0KHRleHQpO1xuICAgIH1cbiAgICBuZ0FmdGVyQ29udGVudENoZWNrZWQoKSB7XG4gICAgICAgIHRoaXMudmVyaWZ5U2V0dGluZ3MoKTtcbiAgICB9XG4gICAgbmdEb0NoZWNrKCkge1xuICAgICAgICBjb25zdCB2YWx1ZUNoYW5nZXMgPSB0aGlzLmRpZmZlciAmJiB0aGlzLmRpZmZlci5kaWZmKHRoaXMudmFsdWUpO1xuICAgICAgICBpZiAodmFsdWVDaGFuZ2VzICYmICF0aGlzLnZhbHVlQ2hhbmdlRGV0ZWN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUodGhpcy52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy52YWx1ZUNoYW5nZURldGVjdGVkID0gZmFsc2U7XG4gICAgfVxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUF0dHJpYnV0ZSh0aGlzLmhvc3RFbGVtZW50Lm5hdGl2ZUVsZW1lbnQsIFwidGFiaW5kZXhcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlQ3VzdG9tVmFsdWVTdHJlYW0oKTtcbiAgICAgICAgdGhpcy5sb2NhbGl6YXRpb25DaGFuZ2VTdWJzY3JpcHRpb24gPSB0aGlzLmxvY2FsaXphdGlvblxuICAgICAgICAgICAgLmNoYW5nZXMuc3Vic2NyaWJlKCh7IHJ0bCB9KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IHJ0bCA/ICdydGwnIDogJ2x0cic7XG4gICAgICAgICAgICB0aGlzLnNldE1lc3NhZ2VzKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNldE1lc3NhZ2VzKCk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUodGhpcy52YWx1ZSk7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgIH1cbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzKSB7XG4gICAgICAgIGNvbnN0IHZpcnR1YWwgPSB0aGlzLnZpcnR1YWw7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RJbml0aWFsRGF0YSA9IHZpcnR1YWwgJiYgY2hhbmdlcy5kYXRhICYmIGNoYW5nZXMuZGF0YS5pc0ZpcnN0Q2hhbmdlKCk7XG4gICAgICAgIGlmIChyZXF1ZXN0SW5pdGlhbERhdGEpIHtcbiAgICAgICAgICAgIHRoaXMucGFnZUNoYW5nZSh7IHNraXA6IDAsIHRha2U6IHZpcnR1YWwucGFnZVNpemUgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzQ2hhbmdlZCgndmFsdWVOb3JtYWxpemVyJywgY2hhbmdlcykpIHtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlQ3VzdG9tVmFsdWVTdHJlYW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYW55Q2hhbmdlZChbJ3RleHRGaWVsZCcsICd2YWx1ZUZpZWxkJywgJ3ZhbHVlUHJpbWl0aXZlJ10sIGNoYW5nZXMpKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHRoaXMudmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICAgICAgdGhpcy5zZWFyY2hiYXIuc2V0SW5wdXRTaXplKCk7XG4gICAgfVxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLl90b2dnbGUoZmFsc2UpO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlRXZlbnRzKCk7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLm1lc3NhZ2VzVGltZW91dCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRvZ2dsZXMgdGhlIHZpc2liaWxpdHkgb2YgdGhlIHBvcHVwXG4gICAgICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBvcGVuc3RhdGVfbXVsdGlzZWxlY3QgJX0jdG9jLXNldHRpbmctdGhlLWluaXRpYWxseS1vcGVuZWQtY29tcG9uZW50KSkuXG4gICAgICogSWYgeW91IHVzZSB0aGUgYHRvZ2dsZWAgbWV0aG9kIHRvIG9wZW4gb3IgY2xvc2UgdGhlIHBvcHVwLCB0aGUgcmVzcGVjdGl2ZSBgb3BlbmAgYW5kIGBjbG9zZWAgZXZlbnRzIHdpbGwgbm90IGJlIGZpcmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wZW4gLSBUaGUgc3RhdGUgb2YgdGhlIHBvcHVwLlxuICAgICAqL1xuICAgIHRvZ2dsZShvcGVuKSB7XG4gICAgICAgIC8vIFRoZSBQcm9taXNlIGlzIHJlcXVpcmVkIGZvciBvcGVuaW5nIHRoZSBwb3B1cCBvbiBsb2FkLlxuICAgICAgICAvLyBPdGhlcndpc2UsIHRoZSBcIkV4cHJlc3Npb24gaGFzIGNoYW5nZWQuLi5cIiB0eXBlIGVycm9yIHdpbGwgYmUgdGhyb3duLlxuICAgICAgICBQcm9taXNlLnJlc29sdmUobnVsbCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzaG91bGRPcGVuID0gaXNQcmVzZW50KG9wZW4pID8gb3BlbiA6ICF0aGlzLl9vcGVuO1xuICAgICAgICAgICAgdGhpcy5fdG9nZ2xlKHNob3VsZE9wZW4pO1xuICAgICAgICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IG9wZW4gc3RhdGUgb2YgdGhlIHBvcHVwLlxuICAgICAqL1xuICAgIGdldCBpc09wZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9vcGVuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIHZhbHVlIG9mIHRoZSBNdWx0aVNlbGVjdC5cbiAgICAgKiBJZiB5b3UgdXNlIHRoZSBgcmVzZXRgIG1ldGhvZCB0byBjbGVhciB0aGUgdmFsdWUgb2YgdGhlIGNvbXBvbmVudCxcbiAgICAgKiB0aGUgbW9kZWwgd2lsbCBub3QgdXBkYXRlIGF1dG9tYXRpY2FsbHkgYW5kIHRoZSBgc2VsZWN0aW9uQ2hhbmdlYCBhbmQgYHZhbHVlQ2hhbmdlYCBldmVudHMgd2lsbCBub3QgYmUgZmlyZWQuXG4gICAgICovXG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMudGV4dCA9IFwiXCI7XG4gICAgICAgIHRoaXMudmFsdWUgPSBbXTtcbiAgICB9XG4gICAgLy8gTkcgTU9ERUwgQklORElOR1NcbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgd3JpdGVWYWx1ZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWUgfHwgW107XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICByZWdpc3Rlck9uQ2hhbmdlKGZuKSB7XG4gICAgICAgIHRoaXMub25DaGFuZ2VDYWxsYmFjayA9IGZuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgcmVnaXN0ZXJPblRvdWNoZWQoZm4pIHtcbiAgICAgICAgdGhpcy5vblRvdWNoZWRDYWxsYmFjayA9IGZuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgc2V0RGlzYWJsZWRTdGF0ZShpc0Rpc2FibGVkKSB7XG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBpc0Rpc2FibGVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgb25UYWdNYXBwZXJDaGFuZ2UoKSB7XG4gICAgICAgIHRoaXMudGFncyA9IHRoaXMudGFnTWFwcGVyKHRoaXMuc2VsZWN0ZWREYXRhSXRlbXMuc2xpY2UoMCkpO1xuICAgICAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG4gICAgc2V0IGlzRm9jdXNlZChpc0ZvY3VzZWQpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlcltpc0ZvY3VzZWQgPyAnYWRkQ2xhc3MnIDogJ3JlbW92ZUNsYXNzJ10odGhpcy5ob3N0RWxlbWVudC5uYXRpdmVFbGVtZW50LCAnay1zdGF0ZS1mb2N1c2VkJyk7XG4gICAgICAgIHRoaXMuX2lzRm9jdXNlZCA9IGlzRm9jdXNlZDtcbiAgICB9XG4gICAgZ2V0IGlzRm9jdXNlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzRm9jdXNlZDtcbiAgICB9XG4gICAgc3Vic2NyaWJlRXZlbnRzKCkge1xuICAgICAgICBpZiAoIWlzRG9jdW1lbnRBdmFpbGFibGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlzT3BlbiA9ICgpID0+IHRoaXMuaXNPcGVuO1xuICAgICAgICBjb25zdCBpc0Nsb3NlZCA9ICgpID0+ICF0aGlzLmlzT3BlbjtcbiAgICAgICAgY29uc3QgaXNUYWdGb2N1c2VkID0gKCkgPT4gIXRoaXMuaXNPcGVuICYmIHRoaXMuZm9jdXNlZFRhZ0luZGV4ICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIFtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5vbkNoYW5nZS5zdWJzY3JpYmUodGhpcy5oYW5kbGVJdGVtQ2hhbmdlLmJpbmQodGhpcykpLFxuICAgICAgICAgICAgdGhpcy5uYXZpZ2F0aW9uU2VydmljZS5lc2Muc3Vic2NyaWJlKHRoaXMuY2xvc2VQb3B1cC5iaW5kKHRoaXMpKSxcbiAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvblNlcnZpY2UuZW50ZXIucGlwZShmaWx0ZXIoaXNPcGVuKSkuc3Vic2NyaWJlKHRoaXMuaGFuZGxlRW50ZXIuYmluZCh0aGlzKSksXG4gICAgICAgICAgICB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLm9wZW4uc3Vic2NyaWJlKHRoaXMub3BlblBvcHVwLmJpbmQodGhpcykpLFxuICAgICAgICAgICAgdGhpcy5uYXZpZ2F0aW9uU2VydmljZS5jbG9zZS5zdWJzY3JpYmUodGhpcy5oYW5kbGVDbG9zZS5iaW5kKHRoaXMpKSxcbiAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvblNlcnZpY2UudXAucGlwZShmaWx0ZXIoaXNPcGVuKSkuc3Vic2NyaWJlKChldmVudCkgPT4gdGhpcy5oYW5kbGVVcChldmVudC5pbmRleCkpLFxuICAgICAgICAgICAgdGhpcy5uYXZpZ2F0aW9uU2VydmljZS5ob21lLnBpcGUoZmlsdGVyKCgpID0+IGlzQ2xvc2VkKSkuc3Vic2NyaWJlKHRoaXMuaGFuZGxlSG9tZS5iaW5kKHRoaXMpKSxcbiAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvblNlcnZpY2UuZW5kLnBpcGUoZmlsdGVyKCgpID0+IGlzQ2xvc2VkKSkuc3Vic2NyaWJlKHRoaXMuaGFuZGxlRW5kLmJpbmQodGhpcykpLFxuICAgICAgICAgICAgdGhpcy5uYXZpZ2F0aW9uU2VydmljZS5iYWNrc3BhY2UucGlwZShmaWx0ZXIoaXNUYWdGb2N1c2VkKSkuc3Vic2NyaWJlKHRoaXMuaGFuZGxlQmFja3NwYWNlLmJpbmQodGhpcykpLFxuICAgICAgICAgICAgdGhpcy5uYXZpZ2F0aW9uU2VydmljZS5kZWxldGUucGlwZShmaWx0ZXIoaXNUYWdGb2N1c2VkKSkuc3Vic2NyaWJlKHRoaXMuaGFuZGxlRGVsZXRlLmJpbmQodGhpcykpLFxuICAgICAgICAgICAgdGhpcy5uYXZpZ2F0aW9uU2VydmljZS5sZWZ0LnN1YnNjcmliZSh0aGlzLmRpcmVjdGlvbiA9PT0gJ3J0bCcgPyB0aGlzLmhhbmRsZVJpZ2h0S2V5LmJpbmQodGhpcykgOiB0aGlzLmhhbmRsZUxlZnRLZXkuYmluZCh0aGlzKSksXG4gICAgICAgICAgICB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLnJpZ2h0LnN1YnNjcmliZSh0aGlzLmRpcmVjdGlvbiA9PT0gJ3J0bCcgPyB0aGlzLmhhbmRsZUxlZnRLZXkuYmluZCh0aGlzKSA6IHRoaXMuaGFuZGxlUmlnaHRLZXkuYmluZCh0aGlzKSksXG4gICAgICAgICAgICB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLmRvd24uc3Vic2NyaWJlKChldmVudCkgPT4gdGhpcy5oYW5kbGVEb3duS2V5KGV2ZW50LmluZGV4KSlcbiAgICAgICAgXS5mb3JFYWNoKHMgPT4gdGhpcy5vYnNlcnZhYmxlU3Vic2NyaXB0aW9ucy5hZGQocykpO1xuICAgIH1cbiAgICBzdWJzY3JpYmVUb3VjaEV2ZW50cygpIHtcbiAgICAgICAgaWYgKCFpc0RvY3VtZW50QXZhaWxhYmxlKCkgfHwgIXRoaXMudG91Y2hFbmFibGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiBcbiAgICAgICAgLy8gUm9sbCB1cCBNdWx0aVNlbGVjdCBvbiBpT1Mgd2hlbiB0YXBwZWQgb3V0c2lkZVxuICAgICAgICB0aGlzLnRvdWNoc3RhcnREaXNwb3NlSGFuZGxlciA9IHRoaXMucmVuZGVyZXIubGlzdGVuKGRvY3VtZW50LCAndG91Y2hzdGFydCcsIChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIGlmICgodGhpcy5pc0ZvY3VzZWQgfHwgdGhpcy5pc09wZW4pICYmICFpbkRyb3BEb3duKHRoaXMuaG9zdEVsZW1lbnQsIHRhcmdldCwgdGhpcy5wb3B1cFJlZikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl96b25lLnJ1bigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmx1cigpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc09wZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlUG9wdXAoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdW5zdWJzY3JpYmVFdmVudHMoKSB7XG4gICAgICAgIGlmICghaXNEb2N1bWVudEF2YWlsYWJsZSgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vYnNlcnZhYmxlU3Vic2NyaXB0aW9ucy51bnN1YnNjcmliZSgpO1xuICAgICAgICBpZiAodGhpcy5jdXN0b21WYWx1ZVN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgdGhpcy5jdXN0b21WYWx1ZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmxvY2FsaXphdGlvbkNoYW5nZVN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgdGhpcy5sb2NhbGl6YXRpb25DaGFuZ2VTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy50b3VjaHN0YXJ0RGlzcG9zZUhhbmRsZXIpIHtcbiAgICAgICAgICAgIHRoaXMudG91Y2hzdGFydERpc3Bvc2VIYW5kbGVyKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlR3JvdXBUYWcoZGF0YUl0ZW1zKSB7XG4gICAgICAgIGxldCBkYXRhID0gdGhpcy5kYXRhU2VydmljZS5kYXRhO1xuICAgICAgICBpZiAodGhpcy5kYXRhU2VydmljZS5ncm91cGVkKSB7XG4gICAgICAgICAgICBkYXRhID0gZGF0YS5maWx0ZXIoaXRlbSA9PiAhaXRlbS5oZWFkZXIpLm1hcChpdGVtID0+IGl0ZW0udmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRhdGFJdGVtVmFsdWVzID0gbmV3IFNldChkYXRhSXRlbXMubWFwKGl0ZW0gPT4gZ2V0dGVyJDEoaXRlbSwgdGhpcy52YWx1ZUZpZWxkKSkpO1xuICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZS5maWx0ZXIodmFsdWUgPT4ge1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBzZWxlY3RlZEluZGljZXMoW3ZhbHVlXSwgZGF0YSwgdGhpcy52YWx1ZUZpZWxkKVswXTtcbiAgICAgICAgICAgIGNvbnN0IGlzRGF0YUl0ZW1EaXNhYmxlZCA9IHRoaXMuZGlzYWJsZWRJdGVtc1NlcnZpY2UuaXNJbmRleERpc2FibGVkKGluZGV4KTtcbiAgICAgICAgICAgIHJldHVybiAhZGF0YUl0ZW1WYWx1ZXMuaGFzKGdldHRlciQxKHZhbHVlLCB0aGlzLnZhbHVlRmllbGQpKSB8fCBpc0RhdGFJdGVtRGlzYWJsZWQ7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVtaXRWYWx1ZUNoYW5nZSgpO1xuICAgIH1cbiAgICByZW1vdmVTaW5nbGVUYWcoZGF0YUl0ZW0pIHtcbiAgICAgICAgbGV0IGRhdGEgPSB0aGlzLmRhdGFTZXJ2aWNlLmRhdGE7XG4gICAgICAgIGlmICh0aGlzLmRhdGFTZXJ2aWNlLmdyb3VwZWQpIHtcbiAgICAgICAgICAgIGRhdGEgPSBkYXRhLmZpbHRlcihpdGVtID0+ICFpdGVtLmhlYWRlcikubWFwKGl0ZW0gPT4gaXRlbS52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW5kZXggPSBzZWxlY3RlZEluZGljZXMoW2RhdGFJdGVtXSwgZGF0YSwgdGhpcy52YWx1ZUZpZWxkKVswXTtcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWRJdGVtc1NlcnZpY2UuaXNJbmRleERpc2FibGVkKGluZGV4KSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc051bWJlcihpbmRleCkpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS51bnNlbGVjdChpbmRleCk7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCA9IGluZGV4O1xuICAgICAgICAgICAgdGhpcy50b2dnbGVQb3B1cChmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7IC8vIHRoZSBkZWxldGVkIGl0ZW0gaXMgbm90IHByZXNlbnQgaW4gdGhlIHNvdXJjZVxuICAgICAgICAgICAgY29uc3QgZmlsdGVyJCQxID0gaXRlbSA9PiBnZXR0ZXIkMShpdGVtLCB0aGlzLnZhbHVlRmllbGQpICE9PSBnZXR0ZXIkMShkYXRhSXRlbSwgdGhpcy52YWx1ZUZpZWxkKTtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLmZpbHRlcihmaWx0ZXIkJDEpO1xuICAgICAgICAgICAgdGhpcy5lbWl0VmFsdWVDaGFuZ2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICpcbiAgICAgKiBEZXRlcm1pbmVzIHdoaWNoIG9mIHRoZSBwcm92aWRlZCB0YWdzIHNob3VsZCBiZSBkaXNhYmxlZCBhbmQgc3RvcmVzIHRoZWlyIHBvc2l0aW9uIGluZGljZXNcbiAgICAgKi9cbiAgICBkaXNhYmxlZEl0ZW1zTWFwcGVyKCkge1xuICAgICAgICBjb25zdCB7IHNlbGVjdGVkIH0gPSB0aGlzLnNlbGVjdGlvblNlcnZpY2U7XG4gICAgICAgIHJldHVybiBuZXcgU2V0KHRoaXMuc2VsZWN0ZWREYXRhSXRlbXMucmVkdWNlKChpbmRpY2VzLCBfaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRpc2FibGVkSXRlbXNTZXJ2aWNlLmlzSW5kZXhEaXNhYmxlZChzZWxlY3RlZFtpbmRleF0pKSB7XG4gICAgICAgICAgICAgICAgaW5kaWNlcy5wdXNoKGluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbmRpY2VzO1xuICAgICAgICB9LCBbXSkpO1xuICAgIH1cbiAgICBjcmVhdGVDdXN0b21WYWx1ZVN0cmVhbSgpIHtcbiAgICAgICAgaWYgKHRoaXMuY3VzdG9tVmFsdWVTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tVmFsdWVTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmN1c3RvbVZhbHVlU3Vic2NyaXB0aW9uID0gdGhpcy5jdXN0b21WYWx1ZVN1YmplY3QucGlwZSh0YXAoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgICB9KSwgdGhpcy52YWx1ZU5vcm1hbGl6ZXIsIGNhdGNoRXJyb3IoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAodGhpcy5hdXRvQ2xvc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZVBvcHVwKGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmF1dG9DbG9zZSB8fCAhdGhpcy5maWx0ZXJhYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhckZpbHRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5uZXh0VGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hiYXIuZm9jdXMoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVDdXN0b21WYWx1ZVN0cmVhbSgpO1xuICAgICAgICAgICAgcmV0dXJuIG9mKG51bGwpO1xuICAgICAgICB9KSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKG5vcm1hbGl6ZWRWYWx1ZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoaXNQcmVzZW50KG5vcm1hbGl6ZWRWYWx1ZSkpIHsgLy8gaWYgdmFsdWVOb3JtYWxpemVyIHJldHVybnMgYG51bGxgIG9yIGB1bmRlZmluZWRgIGN1c3RvbSB2YWx1ZSBpcyBkaXNjYXJkZWRcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IHRoaXMudmFsdWVQcmltaXRpdmUgPyBnZXR0ZXIkMShub3JtYWxpemVkVmFsdWUsIHRoaXMudmFsdWVGaWVsZCkgOiBub3JtYWxpemVkVmFsdWU7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbUluZGV4ID0gdGhpcy5kYXRhU2VydmljZS5pbmRleE9mKG5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXN0b21JdGVtID0gaXRlbUluZGV4ID09PSAtMTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52YWx1ZS5pbmRleE9mKG5ld1ZhbHVlKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YWdzID0gdGhpcy50YWdNYXBwZXIoWy4uLnRoaXMuc2VsZWN0ZWREYXRhSXRlbXMsIG5vcm1hbGl6ZWRWYWx1ZV0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWN1c3RvbUl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5hZGQoaXRlbUluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSBbLi4udGhpcy52YWx1ZSwgbmV3VmFsdWVdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWN1c3RvbUl0ZW0gJiYgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmlzU2VsZWN0ZWQoaXRlbUluZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLnVuc2VsZWN0KGl0ZW1JbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCA9IGl0ZW1JbmRleDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLmZpbHRlcihpdGVtID0+IGdldHRlciQxKGl0ZW0sIHRoaXMudmFsdWVGaWVsZCkgIT09IG5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmVtaXRWYWx1ZUNoYW5nZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYXV0b0Nsb3NlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVQb3B1cChmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hdXRvQ2xvc2UgfHwgIXRoaXMuZmlsdGVyYWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJGaWx0ZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubmV4dFRpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoYmFyLmZvY3VzKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGhhbmRsZUl0ZW1DaGFuZ2UoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2UoZXZlbnQpO1xuICAgICAgICBpZiAodGhpcy5hdXRvQ2xvc2UpIHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlUG9wdXAoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmF1dG9DbG9zZSB8fCAhdGhpcy5maWx0ZXJhYmxlKSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFyRmlsdGVyKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlRW50ZXIoZXZlbnQpIHtcbiAgICAgICAgY29uc3Qgc2VydmljZSA9IHRoaXMuc2VsZWN0aW9uU2VydmljZTtcbiAgICAgICAgY29uc3QgZm9jdXNlZEluZGV4ID0gdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzZWQ7XG4gICAgICAgIGlmICh0aGlzLmlzT3Blbikge1xuICAgICAgICAgICAgZXZlbnQub3JpZ2luYWxFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmb2N1c2VkSW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd0N1c3RvbSAmJiB0aGlzLnRleHQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEN1c3RvbVZhbHVlKHRoaXMudGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47IC8vIENsZWFyIGZpbHRlciAmIGNsb3NlIGFyZSBkb25lIGF0IGN1c3RvbVZhbHVlU3Vic2NyaXB0aW9uIGR1ZSB0byByYWNlIGNvbmRpdGlvbnMuXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlcnZpY2UuaXNTZWxlY3RlZChmb2N1c2VkSW5kZXgpKSB7XG4gICAgICAgICAgICBzZXJ2aWNlLnVuc2VsZWN0KGZvY3VzZWRJbmRleCk7XG4gICAgICAgICAgICBzZXJ2aWNlLmZvY3VzZWQgPSBmb2N1c2VkSW5kZXg7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzZXJ2aWNlLmFkZChmb2N1c2VkSW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmF1dG9DbG9zZSkge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVQb3B1cChmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYXV0b0Nsb3NlIHx8ICF0aGlzLmZpbHRlcmFibGUpIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJGaWx0ZXIoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVDbG9zZSgpIHtcbiAgICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XG4gICAgICAgIHRoaXMuc2VhcmNoYmFyLmZvY3VzKCk7XG4gICAgfVxuICAgIGhhbmRsZUVuZCgpIHtcbiAgICAgICAgdGhpcy5mb2N1c2VkVGFnSW5kZXggPSB0aGlzLnRhZ3MubGVuZ3RoIC0gMTtcbiAgICB9XG4gICAgaGFuZGxlSG9tZSgpIHtcbiAgICAgICAgdGhpcy5mb2N1c2VkVGFnSW5kZXggPSAwO1xuICAgIH1cbiAgICBoYW5kbGVVcChpbmRleCkge1xuICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCA9IGluZGV4O1xuICAgIH1cbiAgICBoYW5kbGVCYWNrc3BhY2UoKSB7XG4gICAgICAgIGlmICh0aGlzLmZvY3VzZWRUYWdJbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZURlbGV0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVSZW1vdmVUYWcoeyB0YWc6IHRoaXMudGFnc1t0aGlzLnRhZ3MubGVuZ3RoIC0gMV0gfSk7XG4gICAgICAgICAgICB0aGlzLnNlYXJjaGJhci5mb2N1cygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZURlbGV0ZSgpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVSZW1vdmVUYWcoeyB0YWc6IHRoaXMudGFnc1t0aGlzLmZvY3VzZWRUYWdJbmRleF0gfSk7XG4gICAgICAgIGlmICh0aGlzLmZvY3VzZWRUYWdJbmRleCA9PT0gdGhpcy50YWdzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5mb2N1c2VkVGFnSW5kZXggPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlTGVmdEtleSgpIHtcbiAgICAgICAgaWYgKHRoaXMuZm9jdXNlZFRhZ0luZGV4ID09PSB1bmRlZmluZWQgfHwgdGhpcy5mb2N1c2VkVGFnSW5kZXggPCAwKSB7XG4gICAgICAgICAgICB0aGlzLmZvY3VzZWRUYWdJbmRleCA9IHRoaXMudGFncy5sZW5ndGggLSAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZm9jdXNlZFRhZ0luZGV4ICE9PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmZvY3VzZWRUYWdJbmRleC0tO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZURvd25LZXkoaW5kZXgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCA9IGluZGV4IHx8IHRoaXMuZmlyc3RGb2N1c2FibGVJbmRleCgwKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub3BlblBvcHVwKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlUmlnaHRLZXkoKSB7XG4gICAgICAgIGNvbnN0IGxhc3QgPSB0aGlzLnRhZ3MubGVuZ3RoIC0gMTtcbiAgICAgICAgaWYgKHRoaXMuZm9jdXNlZFRhZ0luZGV4ID09PSBsYXN0KSB7XG4gICAgICAgICAgICB0aGlzLmZvY3VzZWRUYWdJbmRleCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmZvY3VzZWRUYWdJbmRleCA8IGxhc3QpIHtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNlZFRhZ0luZGV4Kys7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmluZEluZGV4KHRleHQsIHN0YXJ0c0Zyb20gPSAwKSB7XG4gICAgICAgIGxldCBpdGVtVGV4dDtcbiAgICAgICAgdGV4dCA9IHRleHQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5kYXRhU2VydmljZS5maW5kSW5kZXgoaXRlbSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5kYXRhU2VydmljZS5ncm91cGVkKSB7XG4gICAgICAgICAgICAgICAgaXRlbVRleHQgPSBnZXR0ZXIkMShpdGVtLnZhbHVlLCB0aGlzLnRleHRGaWVsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpdGVtVGV4dCA9IGdldHRlciQxKGl0ZW0sIHRoaXMudGV4dEZpZWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGl0ZW1UZXh0ID0gIWlzUHJlc2VudChpdGVtVGV4dCkgPyBcIlwiIDogaXRlbVRleHQudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHRleHQgJiYgaXRlbVRleHQuc3RhcnRzV2l0aCh0ZXh0KTtcbiAgICAgICAgfSwgc3RhcnRzRnJvbSk7XG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkSXRlbXNTZXJ2aWNlLmlzSW5kZXhEaXNhYmxlZChpbmRleCkpIHtcbiAgICAgICAgICAgIHJldHVybiAoaW5kZXggKyAxID4gdGhpcy5kYXRhU2VydmljZS5pdGVtc0NvdW50KSA/IC0xIDogdGhpcy5maW5kSW5kZXgodGV4dCwgaW5kZXggKyAxKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZWFyY2hUZXh0QW5kRm9jdXModGV4dCkge1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZmluZEluZGV4KHRleHQpO1xuICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCA9IGluZGV4O1xuICAgIH1cbiAgICBjbG9zZVBvcHVwKCkge1xuICAgICAgICB0aGlzLnRvZ2dsZVBvcHVwKGZhbHNlKTtcbiAgICAgICAgdGhpcy5mb2N1c2VkVGFnSW5kZXggPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIG9wZW5Qb3B1cCgpIHtcbiAgICAgICAgdGhpcy50b2dnbGVQb3B1cCh0cnVlKTtcbiAgICAgICAgdGhpcy5mb2N1c2VkVGFnSW5kZXggPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHRvZ2dsZVBvcHVwKG9wZW4pIHtcbiAgICAgICAgY29uc3QgaXNEaXNhYmxlZCA9IHRoaXMuZGlzYWJsZWQgfHwgdGhpcy5yZWFkb25seTtcbiAgICAgICAgY29uc3Qgc2FtZVN0YXRlID0gdGhpcy5pc09wZW4gPT09IG9wZW47XG4gICAgICAgIGlmIChpc0Rpc2FibGVkIHx8IHNhbWVTdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlzRGVmYXVsdFByZXZlbnRlZCA9IHRoaXMudHJpZ2dlclBvcHVwRXZlbnRzKG9wZW4pO1xuICAgICAgICBpZiAoIWlzRGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICAgICAgdGhpcy5fdG9nZ2xlKG9wZW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRyaWdnZXJQb3B1cEV2ZW50cyhvcGVuKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50QXJncyA9IG5ldyBQcmV2ZW50YWJsZUV2ZW50KCk7XG4gICAgICAgIGlmIChvcGVuKSB7XG4gICAgICAgICAgICB0aGlzLm9wZW4uZW1pdChldmVudEFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jbG9zZS5lbWl0KGV2ZW50QXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV2ZW50QXJncy5pc0RlZmF1bHRQcmV2ZW50ZWQoKTtcbiAgICB9XG4gICAgX3RvZ2dsZShvcGVuKSB7XG4gICAgICAgIHRoaXMuX29wZW4gPSBvcGVuO1xuICAgICAgICB0aGlzLmRlc3Ryb3lQb3B1cCgpO1xuICAgICAgICBpZiAodGhpcy5fb3Blbikge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVQb3B1cCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRlc3Ryb3lQb3B1cCgpIHtcbiAgICAgICAgaWYgKHRoaXMucG9wdXBSZWYpIHtcbiAgICAgICAgICAgIHRoaXMucG9wdXBSZWYucG9wdXBFbGVtZW50XG4gICAgICAgICAgICAgICAgLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMucG9wdXBNb3VzZURvd25IYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucG9wdXBSZWYuY2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMucG9wdXBSZWYgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNyZWF0ZVBvcHVwKCkge1xuICAgICAgICBpZiAodGhpcy52aXJ0dWFsKSB7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWwuc2tpcCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaG9yaXpvbnRhbEFsaWduID0gdGhpcy5kaXJlY3Rpb24gPT09IFwicnRsXCIgPyBcInJpZ2h0XCIgOiBcImxlZnRcIjtcbiAgICAgICAgY29uc3QgYW5jaG9yUG9zaXRpb24gPSB7IGhvcml6b250YWw6IGhvcml6b250YWxBbGlnbiwgdmVydGljYWw6IFwiYm90dG9tXCIgfTtcbiAgICAgICAgY29uc3QgcG9wdXBQb3NpdGlvbiA9IHsgaG9yaXpvbnRhbDogaG9yaXpvbnRhbEFsaWduLCB2ZXJ0aWNhbDogXCJ0b3BcIiB9O1xuICAgICAgICB0aGlzLnBvcHVwUmVmID0gdGhpcy5wb3B1cFNlcnZpY2Uub3Blbih7XG4gICAgICAgICAgICBhbmNob3I6IHRoaXMud3JhcHBlcixcbiAgICAgICAgICAgIGFuY2hvckFsaWduOiBhbmNob3JQb3NpdGlvbixcbiAgICAgICAgICAgIGFuaW1hdGU6IHRoaXMucG9wdXBTZXR0aW5ncy5hbmltYXRlLFxuICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuYXBwZW5kVG8sXG4gICAgICAgICAgICBjb250ZW50OiB0aGlzLnBvcHVwVGVtcGxhdGUsXG4gICAgICAgICAgICBwb3B1cEFsaWduOiBwb3B1cFBvc2l0aW9uLFxuICAgICAgICAgICAgcG9wdXBDbGFzczogdGhpcy5saXN0Q29udGFpbmVyQ2xhc3NlcyxcbiAgICAgICAgICAgIHBvc2l0aW9uTW9kZTogJ2Fic29sdXRlJ1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcG9wdXBXcmFwcGVyID0gdGhpcy5wb3B1cFJlZi5wb3B1cEVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IHsgbWluLCBtYXggfSA9IHRoaXMud2lkdGg7XG4gICAgICAgIHBvcHVwV3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLnBvcHVwTW91c2VEb3duSGFuZGxlcik7XG4gICAgICAgIHBvcHVwV3JhcHBlci5zdHlsZS5taW5XaWR0aCA9IG1pbjtcbiAgICAgICAgcG9wdXBXcmFwcGVyLnN0eWxlLndpZHRoID0gbWF4O1xuICAgICAgICBwb3B1cFdyYXBwZXIuc3R5bGUuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG4gICAgICAgIHBvcHVwV3JhcHBlci5zZXRBdHRyaWJ1dGUoXCJkaXJcIiwgdGhpcy5kaXJlY3Rpb24pO1xuICAgICAgICB0aGlzLnBvcHVwUmVmLnBvcHVwT3Blbi5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zTGlzdC5zY3JvbGxUb0l0ZW0odGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzZWQpO1xuICAgICAgICAgICAgdGhpcy5vcGVuZWQuZW1pdCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wb3B1cFJlZi5wb3B1cENsb3NlLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlZC5lbWl0KCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnBvcHVwUmVmLnBvcHVwQW5jaG9yVmlld3BvcnRMZWF2ZS5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVQb3B1cChmYWxzZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbWl0VmFsdWVDaGFuZ2UoKSB7XG4gICAgICAgIHRoaXMub25DaGFuZ2VDYWxsYmFjayh0aGlzLnZhbHVlKTtcbiAgICAgICAgdGhpcy52YWx1ZUNoYW5nZS5lbWl0KHRoaXMudmFsdWUpO1xuICAgIH1cbiAgICByZXNvbHZlRGF0YUl0ZW1Gcm9tVGFncyh2YWx1ZSkge1xuICAgICAgICBpZiAoISh0aGlzLnRhZ3MgJiYgdGhpcy50YWdzLmxlbmd0aCAmJiBpc1ByZXNlbnQodmFsdWUpKSkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICAvLyBGbGF0dGVuaW5nIHRoZSB0YWdzIGFycmF5IGluIGNhc2Ugb2YgYSBzdW1tYXJ5IHRhZyBvY2N1cnJlbmNlLlxuICAgICAgICBjb25zdCB0YWdzID0gdGhpcy50YWdzLnJlZHVjZSgoYWNjLCB0YWcpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gaXNBcnJheSh0YWcpID8gdGFnIDogW3RhZ107XG4gICAgICAgICAgICBhY2MucHVzaCguLi5pdGVtcyk7XG4gICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9LCBbXSk7XG4gICAgICAgIHJldHVybiB0YWdzLmZpbmQodGFnID0+IGdldHRlciQxKHRhZywgdGhpcy52YWx1ZUZpZWxkKSA9PT0gZ2V0dGVyJDEodmFsdWUsIHRoaXMudmFsdWVGaWVsZCkpO1xuICAgIH1cbiAgICBmaXJzdEZvY3VzYWJsZUluZGV4KGluZGV4KSB7XG4gICAgICAgIGNvbnN0IG1heEluZGV4ID0gdGhpcy5kYXRhU2VydmljZS5pdGVtc0NvdW50O1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZEl0ZW1zU2VydmljZS5pc0luZGV4RGlzYWJsZWQoaW5kZXgpKSB7XG4gICAgICAgICAgICBjb25zdCBuZXh0SW5kZXggPSBpbmRleCArIDE7XG4gICAgICAgICAgICByZXR1cm4gKG5leHRJbmRleCA8IG1heEluZGV4KSA/IHRoaXMuZmlyc3RGb2N1c2FibGVJbmRleChuZXh0SW5kZXgpIDogdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICB9XG4gICAgfVxuICAgIG5leHRUaWNrKGYpIHtcbiAgICAgICAgdGhpcy5fem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAgICAgICAvLyBVc2UgYHNldFRpbWVvdXRgIGluc3RlYWQgb2YgYSByZXNvbHZlZCBwcm9taXNlXG4gICAgICAgICAgICAvLyBiZWNhdXNlIHRoZSBsYXR0ZXIgZG9lcyBub3Qgd2FpdCBsb25nIGVub3VnaC5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5fem9uZS5ydW4oZikpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2V0TWVzc2FnZXMoKSB7XG4gICAgICAgIHRoaXMuX3pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubWVzc2FnZXNUaW1lb3V0KTtcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZXNUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5ub0RhdGFUZXh0ID0gdGhpcy5sb2NhbGl6YXRpb24uZ2V0KCdub0RhdGFUZXh0Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn07XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBNdWx0aVNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwiZm9jdXNhYmxlSWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBNdWx0aVNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwiYXV0b0Nsb3NlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgTXVsdGlTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLCBcImxvYWRpbmdcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEFycmF5KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0FycmF5XSlcbl0sIE11bHRpU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJkYXRhXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQXJyYXkpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQXJyYXldKVxuXSwgTXVsdGlTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLCBcInZhbHVlXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgTXVsdGlTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLCBcInZhbHVlRmllbGRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIE11bHRpU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ0ZXh0RmllbGRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlcilcbl0sIE11bHRpU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ0YWJpbmRleFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoXCJ0YWJJbmRleFwiKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW051bWJlcl0pXG5dLCBNdWx0aVNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwidGFiSW5kZXhcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbU3RyaW5nXSlcbl0sIE11bHRpU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJwbGFjZWhvbGRlclwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBNdWx0aVNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGlzYWJsZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZ1bmN0aW9uKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0Z1bmN0aW9uXSlcbl0sIE11bHRpU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJpdGVtRGlzYWJsZWRcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSlcbl0sIE11bHRpU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJjaGVja2JveGVzXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIE11bHRpU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJyZWFkb25seVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIE11bHRpU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJmaWx0ZXJhYmxlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSlcbl0sIE11bHRpU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ2aXJ0dWFsXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pXG5dLCBNdWx0aVNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwicG9wdXBTZXR0aW5nc1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlcilcbl0sIE11bHRpU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJsaXN0SGVpZ2h0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0Jvb2xlYW5dKVxuXSwgTXVsdGlTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLCBcInZhbHVlUHJpbWl0aXZlXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIE11bHRpU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJjbGVhckJ1dHRvblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuXSwgTXVsdGlTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLCBcInRhZ01hcHBlclwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIE11bHRpU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJhbGxvd0N1c3RvbVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pXG5dLCBNdWx0aVNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwidmFsdWVOb3JtYWxpemVyXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgTXVsdGlTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLCBcImZpbHRlckNoYW5nZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIE11bHRpU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ2YWx1ZUNoYW5nZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIE11bHRpU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJvcGVuXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgTXVsdGlTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLCBcIm9wZW5lZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIE11bHRpU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJjbG9zZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIE11bHRpU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJjbG9zZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgnZm9jdXMnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgTXVsdGlTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLCBcIm9uRm9jdXNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgnYmx1cicpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBNdWx0aVNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwib25CbHVyXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgTXVsdGlTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLCBcInJlbW92ZVRhZ1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgVmlld0NoaWxkKCdjb250YWluZXInLCB7IHJlYWQ6IFZpZXdDb250YWluZXJSZWYsIHN0YXRpYzogdHJ1ZSB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgVmlld0NvbnRhaW5lclJlZilcbl0sIE11bHRpU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJjb250YWluZXJcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIFZpZXdDaGlsZChTZWFyY2hCYXJDb21wb25lbnQsIHsgc3RhdGljOiB0cnVlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTZWFyY2hCYXJDb21wb25lbnQpXG5dLCBNdWx0aVNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwic2VhcmNoYmFyXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBWaWV3Q2hpbGQoJ3BvcHVwVGVtcGxhdGUnLCB7IHN0YXRpYzogdHJ1ZSB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgVGVtcGxhdGVSZWYpXG5dLCBNdWx0aVNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwicG9wdXBUZW1wbGF0ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgVmlld0NoaWxkKCd3cmFwcGVyJywgeyBzdGF0aWM6IHRydWUgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEVsZW1lbnRSZWYpXG5dLCBNdWx0aVNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwid3JhcHBlclwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgVmlld0NoaWxkKCdvcHRpb25zTGlzdCcsIHsgc3RhdGljOiBmYWxzZSB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTGlzdENvbXBvbmVudClcbl0sIE11bHRpU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJvcHRpb25zTGlzdFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgQ29udGVudENoaWxkKEl0ZW1UZW1wbGF0ZURpcmVjdGl2ZSwgeyBzdGF0aWM6IGZhbHNlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBJdGVtVGVtcGxhdGVEaXJlY3RpdmUpXG5dLCBNdWx0aVNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwidGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIENvbnRlbnRDaGlsZChDdXN0b21JdGVtVGVtcGxhdGVEaXJlY3RpdmUsIHsgc3RhdGljOiBmYWxzZSB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQ3VzdG9tSXRlbVRlbXBsYXRlRGlyZWN0aXZlKVxuXSwgTXVsdGlTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLCBcImN1c3RvbUl0ZW1UZW1wbGF0ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgQ29udGVudENoaWxkKEdyb3VwVGVtcGxhdGVEaXJlY3RpdmUsIHsgc3RhdGljOiBmYWxzZSB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgR3JvdXBUZW1wbGF0ZURpcmVjdGl2ZSlcbl0sIE11bHRpU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJncm91cFRlbXBsYXRlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBDb250ZW50Q2hpbGQoRml4ZWRHcm91cFRlbXBsYXRlRGlyZWN0aXZlLCB7IHN0YXRpYzogZmFsc2UgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZpeGVkR3JvdXBUZW1wbGF0ZURpcmVjdGl2ZSlcbl0sIE11bHRpU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJmaXhlZEdyb3VwVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIENvbnRlbnRDaGlsZChIZWFkZXJUZW1wbGF0ZURpcmVjdGl2ZSwgeyBzdGF0aWM6IGZhbHNlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBIZWFkZXJUZW1wbGF0ZURpcmVjdGl2ZSlcbl0sIE11bHRpU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJoZWFkZXJUZW1wbGF0ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgQ29udGVudENoaWxkKEZvb3RlclRlbXBsYXRlRGlyZWN0aXZlLCB7IHN0YXRpYzogZmFsc2UgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZvb3RlclRlbXBsYXRlRGlyZWN0aXZlKVxuXSwgTXVsdGlTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLCBcImZvb3RlclRlbXBsYXRlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBDb250ZW50Q2hpbGQoVGFnVGVtcGxhdGVEaXJlY3RpdmUsIHsgc3RhdGljOiBmYWxzZSB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgVGFnVGVtcGxhdGVEaXJlY3RpdmUpXG5dLCBNdWx0aVNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwidGFnVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIENvbnRlbnRDaGlsZChHcm91cFRhZ1RlbXBsYXRlRGlyZWN0aXZlLCB7IHN0YXRpYzogZmFsc2UgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEdyb3VwVGFnVGVtcGxhdGVEaXJlY3RpdmUpXG5dLCBNdWx0aVNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwiZ3JvdXBUYWdUZW1wbGF0ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgQ29udGVudENoaWxkKE5vRGF0YVRlbXBsYXRlRGlyZWN0aXZlLCB7IHN0YXRpYzogZmFsc2UgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE5vRGF0YVRlbXBsYXRlRGlyZWN0aXZlKVxuXSwgTXVsdGlTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLCBcIm5vRGF0YVRlbXBsYXRlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay13aWRnZXQnKSxcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay1tdWx0aXNlbGVjdCcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgTXVsdGlTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLCBcIndpZGdldENsYXNzZXNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdhdHRyLmRpcicpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIE11bHRpU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXJcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay1zdGF0ZS1kaXNhYmxlZCcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBNdWx0aVNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGlzYWJsZWRDbGFzc1wiLCBudWxsKTtcbk11bHRpU2VsZWN0Q29tcG9uZW50ID0gTXVsdGlTZWxlY3RDb21wb25lbnRfMSA9IF9fZGVjb3JhdGUoW1xuICAgIENvbXBvbmVudCh7XG4gICAgICAgIGV4cG9ydEFzOiAna2VuZG9NdWx0aVNlbGVjdCcsXG4gICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgTVVMVElTRUxFQ1RfVkFMVUVfQUNDRVNTT1IsXG4gICAgICAgICAgICBEYXRhU2VydmljZSxcbiAgICAgICAgICAgIFNlbGVjdGlvblNlcnZpY2UsXG4gICAgICAgICAgICBOYXZpZ2F0aW9uU2VydmljZSxcbiAgICAgICAgICAgIERpc2FibGVkSXRlbXNTZXJ2aWNlLFxuICAgICAgICAgICAgTG9jYWxpemF0aW9uU2VydmljZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwcm92aWRlOiBMMTBOX1BSRUZJWCxcbiAgICAgICAgICAgICAgICB1c2VWYWx1ZTogJ2tlbmRvLm11bHRpc2VsZWN0J1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwcm92aWRlOiBGaWx0ZXJhYmxlQ29tcG9uZW50LCB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBNdWx0aVNlbGVjdENvbXBvbmVudF8xKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwcm92aWRlOiBLZW5kb0lucHV0LCB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBNdWx0aVNlbGVjdENvbXBvbmVudF8xKVxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBzZWxlY3RvcjogJ2tlbmRvLW11bHRpc2VsZWN0JyxcbiAgICAgICAgdGVtcGxhdGU6IGBcbiAgICAgICAgPG5nLWNvbnRhaW5lciBrZW5kb011bHRpU2VsZWN0TG9jYWxpemVkTWVzc2FnZXNcbiAgICAgICAgICAgIGkxOG4tbm9EYXRhVGV4dD1cImtlbmRvLm11bHRpc2VsZWN0Lm5vRGF0YVRleHR8VGhlIHRleHQgZGlzcGxheWVkIGluIHRoZSBwb3B1cCB3aGVuIHRoZXJlIGFyZSBubyBpdGVtc1wiXG4gICAgICAgICAgICBub0RhdGFUZXh0PVwiTk8gREFUQSBGT1VORFwiXG5cbiAgICAgICAgICAgIGkxOG4tY2xlYXJUaXRsZT1cImtlbmRvLmNvbWJvYm94LmNsZWFyVGl0bGV8VGhlIHRpdGxlIG9mIHRoZSBjbGVhciBidXR0b25cIlxuICAgICAgICAgICAgY2xlYXJUaXRsZT1cImNsZWFyXCJcbiAgICAgICAgPlxuICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImstbXVsdGlzZWxlY3Qtd3JhcCBrLWZsb2F0d3JhcFwiXG4gICAgICAgICAgICAjd3JhcHBlclxuICAgICAgICAgICAgKG1vdXNlZG93bik9XCJ3cmFwcGVyTW91c2Vkb3duKCRldmVudClcIlxuICAgICAgICA+XG4gICAgICAgICAgICA8a2VuZG8tdGFnbGlzdFxuICAgICAgICAgICAgICAgIFtpZF09XCJ0YWdMaXN0SWRcIlxuICAgICAgICAgICAgICAgIFt0YWdzXT1cInRhZ3NcIlxuICAgICAgICAgICAgICAgIFt0ZXh0RmllbGRdPVwidGV4dEZpZWxkXCJcbiAgICAgICAgICAgICAgICBbdmFsdWVGaWVsZF09XCJ2YWx1ZUZpZWxkXCJcbiAgICAgICAgICAgICAgICBbZm9jdXNlZF09XCJmb2N1c2VkVGFnSW5kZXhcIlxuICAgICAgICAgICAgICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiXG4gICAgICAgICAgICAgICAgW3RlbXBsYXRlXT1cInRhZ1RlbXBsYXRlXCJcbiAgICAgICAgICAgICAgICBbZ3JvdXBUZW1wbGF0ZV09XCJncm91cFRhZ1RlbXBsYXRlXCJcbiAgICAgICAgICAgICAgICBbdGFnUHJlZml4XT1cInRhZ1ByZWZpeFwiXG4gICAgICAgICAgICAgICAgW2Rpc2FibGVkSW5kaWNlc109XCJkaXNhYmxlZEluZGljZXNcIlxuICAgICAgICAgICAgICAgIChyZW1vdmVUYWcpPVwiaGFuZGxlUmVtb3ZlVGFnKCRldmVudClcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgPC9rZW5kby10YWdsaXN0PlxuICAgICAgICAgICAgPGtlbmRvLXNlYXJjaGJhclxuICAgICAgICAgICAgICAgICNzZWFyY2hiYXJcbiAgICAgICAgICAgICAgICBbaWRdPVwiZm9jdXNhYmxlSWRcIlxuICAgICAgICAgICAgICAgIFtyb2xlXT1cIidsaXN0Ym94J1wiXG4gICAgICAgICAgICAgICAgW3RhZ0xpc3RJZF09XCJ0YWdMaXN0SWRcIlxuICAgICAgICAgICAgICAgIFthY3RpdmVEZXNjZW5kYW50XT1cImFjdGl2ZURlc2NlbmRhbnRcIlxuICAgICAgICAgICAgICAgIFtub0RhdGFMYWJlbF09XCJub0RhdGFMYWJlbFwiXG4gICAgICAgICAgICAgICAgW3VzZXJJbnB1dF09XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWRcIlxuICAgICAgICAgICAgICAgIFtyZWFkb25seV09XCJyZWFkb25seVwiXG4gICAgICAgICAgICAgICAgW3RhYkluZGV4XT1cInRhYkluZGV4XCJcbiAgICAgICAgICAgICAgICBbcG9wdXBPcGVuXT1cImlzT3BlblwiXG4gICAgICAgICAgICAgICAgW3BsYWNlaG9sZGVyXT1cInBsYWNlaG9sZGVyXCJcbiAgICAgICAgICAgICAgICAob25OYXZpZ2F0ZSk9XCJoYW5kbGVOYXZpZ2F0ZSgkZXZlbnQpXCJcbiAgICAgICAgICAgICAgICAodmFsdWVDaGFuZ2UpPVwiaGFuZGxlRmlsdGVyKCRldmVudClcIlxuICAgICAgICAgICAgICAgIChvbkJsdXIpPVwib25TZWFyY2hCYXJCbHVyKClcIlxuICAgICAgICAgICAgICAgIChvbkZvY3VzKT1cIm9uU2VhcmNoQmFyRm9jdXMoKVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICA8L2tlbmRvLXNlYXJjaGJhcj5cbiAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgKm5nSWY9XCIhbG9hZGluZyAmJiAhcmVhZG9ubHkgJiYgY2xlYXJCdXR0b24gJiYgKHRhZ3M/Lmxlbmd0aCB8fCB0ZXh0Py5sZW5ndGgpXCJcbiAgICAgICAgICAgICAgICBjbGFzcz1cImstaWNvbiBrLWNsZWFyLXZhbHVlIGstaS1jbG9zZVwiXG4gICAgICAgICAgICAgICAgW3N0eWxlLnZpc2liaWxpdHldPVwiY2xlYXJCdXR0b25WaXNpYmxpdHlcIlxuICAgICAgICAgICAgICAgIFthdHRyLnRpdGxlXT1cImNsZWFyVGl0bGVcIlxuICAgICAgICAgICAgICAgIHJvbGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgIHRhYmluZGV4PVwiLTFcIlxuICAgICAgICAgICAgICAgIChtb3VzZWRvd24pPVwiY2xlYXJBbGwoJGV2ZW50KVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICpuZ0lmPVwibG9hZGluZ1wiXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJrLWljb24gay1pLWxvYWRpbmdcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPG5nLXRlbXBsYXRlICNwb3B1cFRlbXBsYXRlPlxuICAgICAgICAgICAgPCEtLWhlYWRlciB0ZW1wbGF0ZS0tPlxuICAgICAgICAgICAgPG5nLXRlbXBsYXRlICpuZ0lmPVwiaGVhZGVyVGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgIFt0ZW1wbGF0ZUNvbnRleHRdPVwie1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVJlZjogaGVhZGVyVGVtcGxhdGUudGVtcGxhdGVSZWZcbiAgICAgICAgICAgICAgICB9XCI+XG4gICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgPCEtLWN1c3RvbSBpdGVtIHRlbXBsYXRlLS0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiay1saXN0XCIgKm5nSWY9XCJhbGxvd0N1c3RvbSAmJiB0ZXh0XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImstaXRlbSBrLWN1c3RvbS1pdGVtXCIga2VuZG9Ecm9wRG93bnNTZWxlY3RhYmxlIFttdWx0aXBsZVNlbGVjdGlvbl09XCJ0cnVlXCIgW2luZGV4XT1cIi0xXCI+XG4gICAgICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSAqbmdJZj1cImN1c3RvbUl0ZW1UZW1wbGF0ZTtlbHNlIGRlZmF1bHRfY3VzdG9tX2l0ZW1fdGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgW3RlbXBsYXRlQ29udGV4dF09XCJ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVSZWY6IGN1c3RvbUl0ZW1UZW1wbGF0ZS50ZW1wbGF0ZVJlZixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW1wbGljaXQ6IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cIj5cbiAgICAgICAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlICNkZWZhdWx0X2N1c3RvbV9pdGVtX3RlbXBsYXRlPnt7IHRleHQgfX08L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktcGx1c1wiIHN0eWxlPVwiZmxvYXQ6IHJpZ2h0XCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8IS0tbGlzdC0tPlxuICAgICAgICAgICAgPGtlbmRvLWxpc3RcbiAgICAgICAgICAgICAgICAjb3B0aW9uc0xpc3RcbiAgICAgICAgICAgICAgICBbaWRdPVwibGlzdEJveElkXCJcbiAgICAgICAgICAgICAgICBbb3B0aW9uUHJlZml4XT1cIm9wdGlvblByZWZpeFwiXG4gICAgICAgICAgICAgICAgW2RhdGFdPVwiZGF0YVwiXG4gICAgICAgICAgICAgICAgW3RleHRGaWVsZF09XCJ0ZXh0RmllbGRcIlxuICAgICAgICAgICAgICAgIFt2YWx1ZUZpZWxkXT1cInZhbHVlRmllbGRcIlxuICAgICAgICAgICAgICAgIFtoZWlnaHRdPVwibGlzdEhlaWdodFwiXG4gICAgICAgICAgICAgICAgW3RlbXBsYXRlXT1cInRlbXBsYXRlXCJcbiAgICAgICAgICAgICAgICBbZ3JvdXBUZW1wbGF0ZV09XCJncm91cFRlbXBsYXRlXCJcbiAgICAgICAgICAgICAgICBbZml4ZWRHcm91cFRlbXBsYXRlXT1cImZpeGVkR3JvdXBUZW1wbGF0ZVwiXG4gICAgICAgICAgICAgICAgW3Nob3ddPVwiaXNPcGVuXCJcbiAgICAgICAgICAgICAgICBbbXVsdGlwbGVTZWxlY3Rpb25dPVwidHJ1ZVwiXG4gICAgICAgICAgICAgICAgW3ZpcnR1YWxdPVwidmlydHVhbFwiXG4gICAgICAgICAgICAgICAgKHBhZ2VDaGFuZ2UpPVwicGFnZUNoYW5nZSgkZXZlbnQpXCJcbiAgICAgICAgICAgICAgICBbY2hlY2tib3hlc109XCJjaGVja2JveGVzXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICA8L2tlbmRvLWxpc3Q+XG4gICAgICAgICAgICA8IS0tbm8gZGF0YSB0ZW1wbGF0ZS0tPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImstbm9kYXRhXCIgKm5nSWY9XCJkYXRhLmxlbmd0aCA9PT0gMFwiPlxuICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdJZl09XCJub0RhdGFUZW1wbGF0ZVwiXG4gICAgICAgICAgICAgICAgICAgIFt0ZW1wbGF0ZUNvbnRleHRdPVwie1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVSZWY6IG5vRGF0YVRlbXBsYXRlID8gbm9EYXRhVGVtcGxhdGUudGVtcGxhdGVSZWYgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgfVwiPlxuICAgICAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlIFtuZ0lmXT1cIiFub0RhdGFUZW1wbGF0ZVwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2Pnt7IG5vRGF0YVRleHQgfX08L2Rpdj5cbiAgICAgICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8IS0tZm9vdGVyIHRlbXBsYXRlLS0+XG4gICAgICAgICAgICA8bmctdGVtcGxhdGUgKm5nSWY9XCJmb290ZXJUZW1wbGF0ZVwiXG4gICAgICAgICAgICAgICAgW3RlbXBsYXRlQ29udGV4dF09XCJ7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUmVmOiBmb290ZXJUZW1wbGF0ZS50ZW1wbGF0ZVJlZlxuICAgICAgICAgICAgICAgIH1cIj5cbiAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdJZl09XCJpc09wZW5cIj5cbiAgICAgICAgICAgIDxrZW5kby1yZXNpemUtc2Vuc29yIChyZXNpemUpPVwib25SZXNpemUoKVwiPjwva2VuZG8tcmVzaXplLXNlbnNvcj5cbiAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgPG5nLWNvbnRhaW5lciAjY29udGFpbmVyPjwvbmctY29udGFpbmVyPlxuICBgXG4gICAgfSksXG4gICAgX19wYXJhbSgxMSwgT3B0aW9uYWwoKSksIF9fcGFyYW0oMTEsIEluamVjdChUT1VDSF9FTkFCTEVEKSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtMb2NhbGl6YXRpb25TZXJ2aWNlLFxuICAgICAgICBQb3B1cFNlcnZpY2UsXG4gICAgICAgIERhdGFTZXJ2aWNlLFxuICAgICAgICBTZWxlY3Rpb25TZXJ2aWNlLFxuICAgICAgICBOYXZpZ2F0aW9uU2VydmljZSxcbiAgICAgICAgRGlzYWJsZWRJdGVtc1NlcnZpY2UsXG4gICAgICAgIENoYW5nZURldGVjdG9yUmVmLFxuICAgICAgICBLZXlWYWx1ZURpZmZlcnMsXG4gICAgICAgIFJlbmRlcmVyMixcbiAgICAgICAgRWxlbWVudFJlZixcbiAgICAgICAgTmdab25lLCBCb29sZWFuXSlcbl0sIE11bHRpU2VsZWN0Q29tcG9uZW50KTtcblxuLyoqXG4gKiBSZW5kZXJzIHRoZSBjb2x1bW4gY2VsbCBjb250ZW50IG9mIHRoZSBNdWx0aUNvbHVtbkNvbWJvQm94LiBUbyBkZWZpbmUgYSBjb2x1bW4gY2VsbCB0ZW1wbGF0ZSwgbmVzdCBhbiBgPG5nLXRlbXBsYXRlPmAgdGFnXG4gKiB3aXRoIHRoZSBga2VuZG9NdWx0aUNvbHVtbkNvbWJvQm94Q29sdW1uQ2VsbFRlbXBsYXRlYCBkaXJlY3RpdmUgaW5zaWRlIHRoZSBbYDxrZW5kby1jb21ib2JveC1jb2x1bW4+YF0oeyUgc2x1ZyBhcGlfZHJvcGRvd25zX2NvbWJvYm94Y29sdW1uY29tcG9uZW50ICV9KSB0YWdcbiAqIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgdGVtcGxhdGVzX211bHRpY29sdW1uY29tYm9ib3ggJX0pKS5cbiAqXG4gKiBUaGUgY3VycmVudCBbYGNvbHVtbmBdKHslIHNsdWcgYXBpX2Ryb3Bkb3duc19jb21ib2JveGNvbHVtbmNvbXBvbmVudCAlfSkgYW5kIGRhdGEgaXRlbSBhcmUgYXZhaWxhYmxlIGFzIGNvbnRleHQgdmFyaWFibGVzOlxuICpcbiAqIC0gYGxldC1kYXRhSXRlbT1cImRhdGFJdGVtXCJgIChgYW55YCkgLSBUaGUgY3VycmVudCBkYXRhIGl0ZW0uIEFsc28gYXZhaWxhYmxlIGFzIGltcGxpY2l0IGNvbnRleHQgdmFyaWFibGUuXG4gKiAtIGBsZXQtY29sdW1uPVwiY29sdW1uXCJgIChbYENvbHVtbkNvbXBvbmVudGBdKHslIHNsdWcgYXBpX2Ryb3Bkb3duc19jb21ib2JveGNvbHVtbmNvbXBvbmVudCAlfSkpIC0gVGhlIGN1cnJlbnQgY29sdW1uIGNvbmZpZ3VyYXRpb24gb2JlamN0LlxuICovXG5sZXQgQ29sdW1uQ2VsbFRlbXBsYXRlRGlyZWN0aXZlID0gY2xhc3MgQ29sdW1uQ2VsbFRlbXBsYXRlRGlyZWN0aXZlIHtcbiAgICBjb25zdHJ1Y3Rvcih0ZW1wbGF0ZVJlZikge1xuICAgICAgICB0aGlzLnRlbXBsYXRlUmVmID0gdGVtcGxhdGVSZWY7XG4gICAgfVxufTtcbkNvbHVtbkNlbGxUZW1wbGF0ZURpcmVjdGl2ZSA9IF9fZGVjb3JhdGUoW1xuICAgIERpcmVjdGl2ZSh7XG4gICAgICAgIHNlbGVjdG9yOiAnW2tlbmRvTXVsdGlDb2x1bW5Db21ib0JveENvbHVtbkNlbGxUZW1wbGF0ZV0nXG4gICAgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtUZW1wbGF0ZVJlZl0pXG5dLCBDb2x1bW5DZWxsVGVtcGxhdGVEaXJlY3RpdmUpO1xuXG4vKipcbiAqIFJlbmRlcnMgdGhlIGNvbHVtbiBoZWFkZXIgY29udGVudCBvZiB0aGUgTXVsdGlDb2x1bW5Db21ib0JveC4gVG8gZGVmaW5lIGEgY29sdW1uIGhlYWRlciB0ZW1wbGF0ZSwgbmVzdCBhbiBgPG5nLXRlbXBsYXRlPmAgdGFnXG4gKiB3aXRoIHRoZSBga2VuZG9NdWx0aUNvbHVtbkNvbWJvQm94Q29sdW1uSGVhZGVyVGVtcGxhdGVgIGRpcmVjdGl2ZSBpbnNpZGUgdGhlIFtgPGtlbmRvLWNvbWJvYm94LWNvbHVtbj5gXSh7JSBzbHVnIGFwaV9kcm9wZG93bnNfY29tYm9ib3hjb2x1bW5jb21wb25lbnQgJX0pIHRhZ1xuICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyB0ZW1wbGF0ZXNfbXVsdGljb2x1bW5jb21ib2JveCAlfSkpLlxuICpcbiAqIFRoZSBjdXJyZW50IFtgY29sdW1uYF0oeyUgc2x1ZyBhcGlfZHJvcGRvd25zX2NvbWJvYm94Y29sdW1uY29tcG9uZW50ICV9KSBpcyBhdmFpbGFibGUgYXMgaW1wbGljaXQgY29udGV4dCB2YXJpYWJsZS5cbiAqL1xubGV0IENvbHVtbkhlYWRlclRlbXBsYXRlRGlyZWN0aXZlID0gY2xhc3MgQ29sdW1uSGVhZGVyVGVtcGxhdGVEaXJlY3RpdmUge1xuICAgIGNvbnN0cnVjdG9yKHRlbXBsYXRlUmVmKSB7XG4gICAgICAgIHRoaXMudGVtcGxhdGVSZWYgPSB0ZW1wbGF0ZVJlZjtcbiAgICB9XG59O1xuQ29sdW1uSGVhZGVyVGVtcGxhdGVEaXJlY3RpdmUgPSBfX2RlY29yYXRlKFtcbiAgICBEaXJlY3RpdmUoe1xuICAgICAgICBzZWxlY3RvcjogJ1trZW5kb011bHRpQ29sdW1uQ29tYm9Cb3hDb2x1bW5IZWFkZXJUZW1wbGF0ZV0nXG4gICAgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtUZW1wbGF0ZVJlZl0pXG5dLCBDb2x1bW5IZWFkZXJUZW1wbGF0ZURpcmVjdGl2ZSk7XG5cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgY29sdW1uIGRlZmluaXRpb24gb2YgdGhlIFtNdWx0aUNvbHVtbkNvbWJvQm94XSh7JSBzbHVnIG92ZXJ2aWV3X211bHRpY29sdW1uY29tYm9ib3ggJX0pXG4gKiAoW3NlZSBleGFtcGxlXSh7JSBzbHVnIGNvbHVtbnNfbXVsdGljb2x1bW5jb21ib2JveCAlfSkpLlxuICovXG5sZXQgQ29tYm9Cb3hDb2x1bW5Db21wb25lbnQgPSBjbGFzcyBDb21ib0JveENvbHVtbkNvbXBvbmVudCB7XG4gICAgLyoqXG4gICAgICogUmVwcmVzZW50cyB0aGUgY29sdW1uIGRlZmluaXRpb24gb2YgdGhlIFtNdWx0aUNvbHVtbkNvbWJvQm94XSh7JSBzbHVnIG92ZXJ2aWV3X211bHRpY29sdW1uY29tYm9ib3ggJX0pXG4gICAgICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBjb2x1bW5zX211bHRpY29sdW1uY29tYm9ib3ggJX0pKS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgdGhlIHZpc2liaWxpdHkgb2YgdGhlIGNvbHVtbi5cbiAgICAgICAgICpcbiAgICAgICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGlkZGVuID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1hdGNoZXNNZWRpYSA9IHRydWU7XG4gICAgfVxufTtcbl9fZGVjb3JhdGUoW1xuICAgIENvbnRlbnRDaGlsZChDb2x1bW5DZWxsVGVtcGxhdGVEaXJlY3RpdmUsIHsgc3RhdGljOiBmYWxzZSB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQ29sdW1uQ2VsbFRlbXBsYXRlRGlyZWN0aXZlKVxuXSwgQ29tYm9Cb3hDb2x1bW5Db21wb25lbnQucHJvdG90eXBlLCBcImNlbGxUZW1wbGF0ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgQ29udGVudENoaWxkKENvbHVtbkhlYWRlclRlbXBsYXRlRGlyZWN0aXZlLCB7IHN0YXRpYzogZmFsc2UgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIENvbHVtbkhlYWRlclRlbXBsYXRlRGlyZWN0aXZlKVxuXSwgQ29tYm9Cb3hDb2x1bW5Db21wb25lbnQucHJvdG90eXBlLCBcImhlYWRlclRlbXBsYXRlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBDb21ib0JveENvbHVtbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiZmllbGRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIENvbWJvQm94Q29sdW1uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0aXRsZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKVxuXSwgQ29tYm9Cb3hDb2x1bW5Db21wb25lbnQucHJvdG90eXBlLCBcIndpZHRoXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgQ29tYm9Cb3hDb2x1bW5Db21wb25lbnQucHJvdG90eXBlLCBcImhpZGRlblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuXSwgQ29tYm9Cb3hDb2x1bW5Db21wb25lbnQucHJvdG90eXBlLCBcInN0eWxlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG5dLCBDb21ib0JveENvbHVtbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiaGVhZGVyU3R5bGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbl0sIENvbWJvQm94Q29sdW1uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJjbGFzc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuXSwgQ29tYm9Cb3hDb2x1bW5Db21wb25lbnQucHJvdG90eXBlLCBcImhlYWRlckNsYXNzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBDb21ib0JveENvbHVtbkNvbXBvbmVudC5wcm90b3R5cGUsIFwibWVkaWFcIiwgdm9pZCAwKTtcbkNvbWJvQm94Q29sdW1uQ29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgQ29tcG9uZW50KHtcbiAgICAgICAgc2VsZWN0b3I6ICdrZW5kby1jb21ib2JveC1jb2x1bW4nLFxuICAgICAgICB0ZW1wbGF0ZTogJydcbiAgICB9KVxuXSwgQ29tYm9Cb3hDb2x1bW5Db21wb25lbnQpO1xuXG4vKipcbiAqIFBlcnNpc3RzIHRoZSBpbnRpYWxseSByZXNvbHZlZCBzY3JvbGxiYXIgd2lkdGggdmFsdWUuXG4gKi9cbmxldCBTQ1JPTExCQVJfV0lEVEg7XG4vKipcbiAqIEBoaWRkZW5cbiAqXG4gKiBHZXRzIHRoZSBkZWZhdWx0IHNjcm9sbGJhciB3aWR0aCBhY2NvcmluZyB0byB0aGUgY3VycmVudCBlbnZpcm9ubWVudC5cbiAqL1xuY29uc3Qgc2Nyb2xsYmFyV2lkdGggPSAoKSA9PiB7XG4gICAgLy8gY2FsY3VsYXRlIHNjcm9sbGJhciB3aWR0aCBvbmx5IG9uY2UsIHRoZW4gcmV0dXJuIHRoZSBtZW1vaXplZCB2YWx1ZVxuICAgIGlmIChpc05hTihTQ1JPTExCQVJfV0lEVEgpKSB7XG4gICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBkaXYuc3R5bGUuY3NzVGV4dCA9ICdvdmVyZmxvdzogc2Nyb2xsOyBvdmVyZmxvdy14OiBoaWRkZW47IHpvb206IDE7IGNsZWFyOiBib3RoOyBkaXNwbGF5OiBibG9jazsnO1xuICAgICAgICBkaXYuaW5uZXJIVE1MID0gJyZuYnNwOyc7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICAgICAgU0NST0xMQkFSX1dJRFRIID0gZGl2Lm9mZnNldFdpZHRoIC0gZGl2LnNjcm9sbFdpZHRoO1xuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGRpdik7XG4gICAgfVxuICAgIHJldHVybiBTQ1JPTExCQVJfV0lEVEg7XG59O1xuLyoqXG4gKiBDaGVja3MgaWYgYWxsIGNvbHVtbnMgaGF2ZSBhIHZhbGlkIHVzZXItZGVmaW5lZCB3aWR0aC5cbiAqL1xuY29uc3QgYWxsQ29sdW1uc1dpZHRoc1NldCA9IChjb2x1bW5zKSA9PiB7XG4gICAgaWYgKCFpc1ByZXNlbnQoY29sdW1ucykgfHwgY29sdW1ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gY29sdW1ucy50b0FycmF5KCkuZXZlcnkoY29sdW1uID0+ICFpc05hTihjb2x1bW4ud2lkdGgpICYmIGNvbHVtbi53aWR0aCA+IDApO1xufTtcbi8qKlxuICogQGhpZGRlblxuICpcbiAqIENhbGN1bGF0ZXMgdGhlIHJvdyB3aWR0aCBhY2NvcmRpbmcgdG8gdGhlIHBhc3NlZCBjb2x1bW5zIHdpZHRoIGNvbmZpZ3VyYXRpb24uXG4gKiBIaWRkZW4gY29sdW1ucyBhbmQgc3VjaCB0aGF0IGRvbid0IG1hdGNoIHRoZSBwcm92aWRlZCBtZWRpYSBxdWVyeSBhcmUgaWdub3JlZC5cbiAqIElmIHNvbWUgb2YgdGhlIGNvbHVtbnMgZG9uJ3QgaGF2ZSBhIHByZXNldCB3aWR0aCBvciBoYXZlIGFuIGludmFsaWQgd2lkdGggdmFsdWUsIHRoZSBmdW5jdGlvbiByZXR1cm5zIGBudWxsYC5cbiAqL1xuY29uc3QgZ2V0Um93V2lkdGhGcm9tQ29sdW1uc01ldGEgPSAoY29sdW1ucykgPT4ge1xuICAgIGlmICghYWxsQ29sdW1uc1dpZHRoc1NldChjb2x1bW5zKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgYm9yZGVyc1dpZHRoID0gMjtcbiAgICBjb25zdCBpbml0aWFsUm93V2lkaHQgPSBzY3JvbGxiYXJXaWR0aCgpICsgYm9yZGVyc1dpZHRoO1xuICAgIHJldHVybiBjb2x1bW5zLnJlZHVjZSgodG90YWxXaWR0aCwgY29sdW1uKSA9PiB7XG4gICAgICAgIGlmICghY29sdW1uLmhpZGRlbiAmJiBjb2x1bW4ubWF0Y2hlc01lZGlhKSB7XG4gICAgICAgICAgICB0b3RhbFdpZHRoICs9IHBhcnNlSW50KGNvbHVtbi53aWR0aCwgMTApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b3RhbFdpZHRoO1xuICAgIH0sIGluaXRpYWxSb3dXaWRodCk7XG59O1xuXG52YXIgTXVsdGlDb2x1bW5Db21ib0JveENvbXBvbmVudF8xO1xuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBbS2VuZG8gVUkgTXVsdGlDb2x1bW5Db21ib0JveCBjb21wb25lbnQgZm9yIEFuZ3VsYXJdKHslIHNsdWcgb3ZlcnZpZXdfbXVsdGljb2x1bW5jb21ib2JveCAlfSkuXG4gKi9cbmxldCBNdWx0aUNvbHVtbkNvbWJvQm94Q29tcG9uZW50ID0gTXVsdGlDb2x1bW5Db21ib0JveENvbXBvbmVudF8xID0gY2xhc3MgTXVsdGlDb2x1bW5Db21ib0JveENvbXBvbmVudCBleHRlbmRzIENvbWJvQm94Q29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihsb2NhbGl6YXRpb24sIHBvcHVwU2VydmljZSwgc2VsZWN0aW9uU2VydmljZSwgbmF2aWdhdGlvblNlcnZpY2UsIGRpc2FibGVkSXRlbXNTZXJ2aWNlLCBkYXRhU2VydmljZSwgem9uZSwgY2hhbmdlRGV0ZWN0b3IsIHJlbmRlcmVyLCBob3N0RWxlbWVudCwgdG91Y2hFbmFibGVkJCQxKSB7XG4gICAgICAgIHN1cGVyKGxvY2FsaXphdGlvbiwgcG9wdXBTZXJ2aWNlLCBzZWxlY3Rpb25TZXJ2aWNlLCBuYXZpZ2F0aW9uU2VydmljZSwgZGlzYWJsZWRJdGVtc1NlcnZpY2UsIGRhdGFTZXJ2aWNlLCB6b25lLCBjaGFuZ2VEZXRlY3RvciwgcmVuZGVyZXIsIGhvc3RFbGVtZW50LCB0b3VjaEVuYWJsZWQkJDEpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGhpZGRlblxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5ob3N0Q2xhc3NlcyA9IHRydWU7XG4gICAgICAgIHRoaXMucmVtb3ZlV2luZG93UmVzaXplTGlzdGVuZXIgPSBub29wO1xuICAgICAgICAvLyB0aGUgcm93IGhlaWdodCBpbiBAcHJvZ3Jlc3Mva2VuZG8tdGhlbWUtZGVmYXVsdFxuICAgICAgICB0aGlzLmRlZmF1bHRWaXJ0dWFsSXRlbUhlaWdodCA9IDM2O1xuICAgICAgICAvLyB1c2UgYSBzbWFsbGVyIHZpcnR1YWwgcGFnZSBzaXplIGFzIGNvbHVtbnMgd2l0aCBtdWx0aXBsZSBjZWxscyBjYW4gY2F1c2UgcG9vciBwZXJmb3JtYW5jZVxuICAgICAgICB0aGlzLmRlZmF1bHRWaXJ0dWFsUGFnZVNpemUgPSAzMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHNldCBoZWFkZXIoaGVhZGVyKSB7XG4gICAgICAgIC8vIHVwZGF0ZXMgdGhlIGhlYWRlciBwYWRkaW5nIG9uIGluaXRpYWwgcmVuZGVyIGFzIHRoZSByZXNpemUgc2Vuem9yIGRvZXNuJ3Qga2ljayBpbiBhcyBlYXJseVxuICAgICAgICB0aGlzLnVwZGF0ZUhlYWRlclBhZGRpbmcoaGVhZGVyICYmIGhlYWRlci5uYXRpdmVFbGVtZW50KTtcbiAgICB9XG4gICAgZ2V0IHBvcHVwV2lkdGgoKSB7XG4gICAgICAgIGNvbnN0IHdyYXBwZXJPZmZzZXRXaWR0aCA9IHRoaXMud3JhcHBlci5uYXRpdmVFbGVtZW50Lm9mZnNldFdpZHRoO1xuICAgICAgICBjb25zdCBtaW4gPSBgJHt3cmFwcGVyT2Zmc2V0V2lkdGh9cHhgO1xuICAgICAgICBjb25zdCB3aWR0aCA9IHRoaXMucG9wdXBTZXR0aW5ncy53aWR0aCB8fCBnZXRSb3dXaWR0aEZyb21Db2x1bW5zTWV0YSh0aGlzLmNvbHVtbnMpIHx8IHdyYXBwZXJPZmZzZXRXaWR0aDtcbiAgICAgICAgY29uc3QgbWF4ID0gaXNOYU4od2lkdGgpID8gd2lkdGggOiBgJHt3aWR0aH1weGA7XG4gICAgICAgIHJldHVybiB7IG1pbiwgbWF4IH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBnZXQgbGlzdENvbnRhaW5lckNsYXNzZXMoKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAnay1saXN0LWNvbnRhaW5lcicsXG4gICAgICAgICAgICAnay1wb3B1cCcsXG4gICAgICAgICAgICAnay1yZXNldCcsXG4gICAgICAgICAgICAnay1ncm91cCcsXG4gICAgICAgICAgICAnay1kcm9wZG93bmdyaWQtcG9wdXAnLFxuICAgICAgICAgICAgJ2stcG9wdXAtZmx1c2gnLFxuICAgICAgICAgICAgJ2stc3RhdGUtYm9yZGVyLXVwJ1xuICAgICAgICBdLmNvbmNhdCh0aGlzLnBvcHVwU2V0dGluZ3MucG9wdXBDbGFzcyB8fCBbXSk7XG4gICAgfVxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICAgICAgdGhpcy51cGRhdGVDb2x1bW5zTWVkaWFTdGF0ZSgpO1xuICAgICAgICB0aGlzLmFkZFdpbmRvd1Jlc2l6ZUxpc3RlbmVyKCk7XG4gICAgfVxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICBzdXBlci5uZ09uRGVzdHJveSgpO1xuICAgICAgICB0aGlzLnJlbW92ZVdpbmRvd1Jlc2l6ZUxpc3RlbmVyKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICB0ZXh0RnJvbShkYXRhSXRlbSwgZmllbGQpIHtcbiAgICAgICAgcmV0dXJuIGdldHRlciQxKGRhdGFJdGVtLCBmaWVsZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKlxuICAgICAqIEFkZHMgb3IgcmVtb3ZlcyBhIHBhZGRpbmcgdmFsdWUgYXQgdGhlIGVuZCBvZiB0aGUgaGVhZGVyIGNvbnRhaW5lciBlcXVhbCB0byB0aGUgc2l6ZSBvZiB0aGUgc2Nyb2xsYmFyLlxuICAgICAqIEFzIHdoZW4gdGhlIGl0ZW1zIGNvbnRhaW5lciBoYXMgYSBzY3JvbGxiYXIsIHRoZSBjb2x1bW4gaGVhZGVycyBhbmQgdGhlIGNlbGxzIGFyZSBtaXNhbGlnbmVkLlxuICAgICAqIFdoZW4gdGhlIGNvbnRhaW5lciBoYXMgYSBzY3JvbGxiYXIsIHRoZSBwYWRkaW5nIHN0eWxlIGlzIGFkZGVkLCBhbmQgd2hlbiB0aGVyZSBpcyBub25lIC0gaXQgaXMgcmVtb3ZlZC5cbiAgICAgKi9cbiAgICB1cGRhdGVIZWFkZXJQYWRkaW5nKGhlYWRlcikge1xuICAgICAgICBpZiAoIWlzUHJlc2VudChoZWFkZXIpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gdGhlIHNjcm9sbGJhciBpcyByZW5kZXJlZCBvbiB0aGUgbGVmdCBpbiBydGxcbiAgICAgICAgY29uc3QgaGVhZGVyUGFkZGluZ1Bvc2l0aW9uID0gdGhpcy5sb2NhbGl6YXRpb24ucnRsID8gJ3BhZGRpbmctbGVmdCcgOiAncGFkZGluZy1yaWdodCc7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnNMaXN0Lmhhc1Njcm9sbGJhcigpICYmIHNjcm9sbGJhcldpZHRoKCkgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKGhlYWRlciwgaGVhZGVyUGFkZGluZ1Bvc2l0aW9uLCBgJHtzY3JvbGxiYXJXaWR0aCgpfXB4YCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZVN0eWxlKGhlYWRlciwgaGVhZGVyUGFkZGluZ1Bvc2l0aW9uKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2ZXJpZnlTZXR0aW5ncygpIHtcbiAgICAgICAgaWYgKCFpc0Rldk1vZGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1ByZXNlbnQodGhpcy5kYXRhKSAmJiB0aGlzLmRhdGEubGVuZ3RoID4gMCAmJiB0aGlzLmRhdGEuc29tZShpdGVtID0+ICFpc09iamVjdChpdGVtKSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihNdWx0aUNvbHVtbkNvbWJvQm94TWVzc2FnZXMuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc1ByZXNlbnQodGhpcy52YWx1ZUZpZWxkKSB8fCAhaXNQcmVzZW50KHRoaXMudGV4dEZpZWxkKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKE11bHRpQ29sdW1uQ29tYm9Cb3hNZXNzYWdlcy50ZXh0QW5kVmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyLnZlcmlmeVNldHRpbmdzKCk7XG4gICAgfVxuICAgIGFkZFdpbmRvd1Jlc2l6ZUxpc3RlbmVyKCkge1xuICAgICAgICBpZiAoIWlzRG9jdW1lbnRBdmFpbGFibGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB0aGlzLnJlbW92ZVdpbmRvd1Jlc2l6ZUxpc3RlbmVyID0gdGhpcy5yZW5kZXJlci5saXN0ZW4od2luZG93LCAncmVzaXplJywgdGhpcy51cGRhdGVDb2x1bW5zTWVkaWFTdGF0ZS5iaW5kKHRoaXMpKSk7XG4gICAgfVxuICAgIHVwZGF0ZUNvbHVtbnNNZWRpYVN0YXRlKCkge1xuICAgICAgICBpZiAoIShpc1ByZXNlbnQodGhpcy5jb2x1bW5zKSAmJiBpc0RvY3VtZW50QXZhaWxhYmxlKCkpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb2x1bW5zLmZvckVhY2goY29sdW1uID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoZXNNZWRpYSA9ICFjb2x1bW4ubWVkaWEgfHwgd2luZG93Lm1hdGNoTWVkaWEoY29sdW1uLm1lZGlhKS5tYXRjaGVzO1xuICAgICAgICAgICAgaWYgKGNvbHVtbi5tYXRjaGVzTWVkaWEgIT09IG1hdGNoZXNNZWRpYSkge1xuICAgICAgICAgICAgICAgIGNvbHVtbi5tYXRjaGVzTWVkaWEgPSBtYXRjaGVzTWVkaWE7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVudGVyIHRoZSB6b25lIG9ubHkgaWYgdGhlIHBvcHVwIGlzIGFjdHVhbGx5IG9wZW5cbiAgICAgICAgICAgICAgICAgICAgLy8gdXBkYXRlIGl0cyB3aWR0aCBpbiBjYXNlIGl0J3MgZGVwZW5kZW50IG9uIHRoZSBjb2x1bW5zJyB3aWR0aFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnpvbmUucnVuKCgpID0+IHRoaXMucG9wdXBSZWYucG9wdXBFbGVtZW50LnN0eWxlLndpZHRoID0gdGhpcy5wb3B1cFdpZHRoLm1heCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59O1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmstZHJvcGRvd25ncmlkJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBNdWx0aUNvbHVtbkNvbWJvQm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJob3N0Q2xhc3Nlc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgQ29udGVudENoaWxkcmVuKENvbWJvQm94Q29sdW1uQ29tcG9uZW50KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgUXVlcnlMaXN0KVxuXSwgTXVsdGlDb2x1bW5Db21ib0JveENvbXBvbmVudC5wcm90b3R5cGUsIFwiY29sdW1uc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgVmlld0NoaWxkKCdoZWFkZXInLCB7IHN0YXRpYzogZmFsc2UgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEVsZW1lbnRSZWYpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbRWxlbWVudFJlZl0pXG5dLCBNdWx0aUNvbHVtbkNvbWJvQm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJoZWFkZXJcIiwgbnVsbCk7XG5NdWx0aUNvbHVtbkNvbWJvQm94Q29tcG9uZW50ID0gTXVsdGlDb2x1bW5Db21ib0JveENvbXBvbmVudF8xID0gX19kZWNvcmF0ZShbXG4gICAgQ29tcG9uZW50KHtcbiAgICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgICAgICBTZWxlY3Rpb25TZXJ2aWNlLFxuICAgICAgICAgICAgRGF0YVNlcnZpY2UsXG4gICAgICAgICAgICBOYXZpZ2F0aW9uU2VydmljZSxcbiAgICAgICAgICAgIERpc2FibGVkSXRlbXNTZXJ2aWNlLFxuICAgICAgICAgICAgTG9jYWxpemF0aW9uU2VydmljZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwcm92aWRlOiBMMTBOX1BSRUZJWCxcbiAgICAgICAgICAgICAgICB1c2VWYWx1ZTogJ2tlbmRvLm11bHRpY29sdW1uY29tYm9ib3gnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG11bHRpOiB0cnVlLFxuICAgICAgICAgICAgICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxuICAgICAgICAgICAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IE11bHRpQ29sdW1uQ29tYm9Cb3hDb21wb25lbnRfMSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZTogS2VuZG9JbnB1dCxcbiAgICAgICAgICAgICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBNdWx0aUNvbHVtbkNvbWJvQm94Q29tcG9uZW50XzEpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHByb3ZpZGU6IEZpbHRlcmFibGVDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gTXVsdGlDb2x1bW5Db21ib0JveENvbXBvbmVudF8xKVxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBzZWxlY3RvcjogJ2tlbmRvLW11bHRpY29sdW1uY29tYm9ib3gnLFxuICAgICAgICB0ZW1wbGF0ZTogYFxuICAgICAgICA8bmctY29udGFpbmVyXG4gICAgICAgICAgICBrZW5kb011bHRpQ29sdW1uQ29tYm9Cb3hMb2NhbGl6ZWRNZXNzYWdlc1xuXG4gICAgICAgICAgICBpMThuLW5vRGF0YVRleHQ9XCJrZW5kby5tdWx0aWNvbHVtbmNvbWJvYm94Lm5vRGF0YVRleHR8VGhlIHRleHQgZGlzcGxheWVkIGluIHRoZSBwb3B1cCB3aGVuIHRoZXJlIGFyZSBubyBpdGVtc1wiXG4gICAgICAgICAgICBub0RhdGFUZXh0PVwiTk8gREFUQSBGT1VORFwiXG5cbiAgICAgICAgICAgIGkxOG4tY2xlYXJUaXRsZT1cImtlbmRvLm11bHRpY29sdW1uY29tYm9ib3guY2xlYXJUaXRsZXxUaGUgdGl0bGUgb2YgdGhlIGNsZWFyIGJ1dHRvblwiXG4gICAgICAgICAgICBjbGVhclRpdGxlPVwiY2xlYXJcIlxuICAgICAgICA+XG4gICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICA8c3BhblxuICAgICAgICAgICAgI3dyYXBwZXJcbiAgICAgICAgICAgIHVuc2VsZWN0YWJsZT1cIm9uXCJcbiAgICAgICAgICAgIGNsYXNzPVwiay1kcm9wZG93bi13cmFwXCJcbiAgICAgICAgICAgIFtjbGFzcy5rLXN0YXRlLWRpc2FibGVkXT1cImRpc2FibGVkXCJcbiAgICAgICAgPlxuICAgICAgICAgICAgPGtlbmRvLXNlYXJjaGJhclxuICAgICAgICAgICAgICAgICNzZWFyY2hiYXJcbiAgICAgICAgICAgICAgICBbcm9sZV09XCInY29tYm9ib3gnXCJcbiAgICAgICAgICAgICAgICBbaWRdPVwiZm9jdXNhYmxlSWRcIlxuICAgICAgICAgICAgICAgIFtsaXN0SWRdPVwibGlzdEJveElkXCJcbiAgICAgICAgICAgICAgICBbYWN0aXZlRGVzY2VuZGFudF09XCJhY3RpdmVEZXNjZW5kYW50XCJcbiAgICAgICAgICAgICAgICBbbm9EYXRhTGFiZWxdPVwibm9EYXRhTGFiZWxcIlxuICAgICAgICAgICAgICAgIFt1c2VySW5wdXRdPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgW3N1Z2dlc3RlZFRleHRdPVwiZ2V0U3VnZ2VzdGlvbigpXCJcbiAgICAgICAgICAgICAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWRcIlxuICAgICAgICAgICAgICAgIFtyZWFkb25seV09XCJyZWFkb25seVwiXG4gICAgICAgICAgICAgICAgW3RhYkluZGV4XT1cInRhYkluZGV4XCJcbiAgICAgICAgICAgICAgICBbcG9wdXBPcGVuXT1cImlzT3BlblwiXG4gICAgICAgICAgICAgICAgW3BsYWNlaG9sZGVyXT1cInBsYWNlaG9sZGVyXCJcbiAgICAgICAgICAgICAgICAob25OYXZpZ2F0ZSk9XCJoYW5kbGVOYXZpZ2F0ZSgkZXZlbnQpXCJcbiAgICAgICAgICAgICAgICAodmFsdWVDaGFuZ2UpPVwic2VhcmNoQmFyQ2hhbmdlKCRldmVudClcIlxuICAgICAgICAgICAgICAgIChvbkJsdXIpPVwiaGFuZGxlQmx1cigpXCJcbiAgICAgICAgICAgICAgICAob25Gb2N1cyk9XCJoYW5kbGVGb2N1cygpXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgIDwva2VuZG8tc2VhcmNoYmFyPlxuXG4gICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICpuZ0lmPVwiY2xlYXJCdXR0b24gJiYgIWxvYWRpbmcgJiYgIWRpc2FibGVkICYmICFyZWFkb25seSAmJiB0ZXh0Py5sZW5ndGhcIlxuICAgICAgICAgICAgICAgIGNsYXNzPVwiay1pY29uIGstY2xlYXItdmFsdWUgay1pLWNsb3NlXCJcbiAgICAgICAgICAgICAgICBbc3R5bGUudmlzaWJpbGl0eV09XCJjbGVhckJ1dHRvblZpc2libGl0eVwiXG4gICAgICAgICAgICAgICAgYXJpYS1oaWRkZW49XCJ0cnVlXCJcbiAgICAgICAgICAgICAgICBbYXR0ci50aXRsZV09XCJjbGVhclRpdGxlXCJcbiAgICAgICAgICAgICAgICAoY2xpY2spPVwiY2xlYXJWYWx1ZSgkZXZlbnQpXCJcbiAgICAgICAgICAgICAgICBba2VuZG9FdmVudHNPdXRzaWRlQW5ndWxhcl09XCJ7XG4gICAgICAgICAgICAgICAgICAgIG1vdXNlZG93bjogcHJldmVudEV2ZW50RGVmYXVsdFxuICAgICAgICAgICAgICAgIH1cIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgPC9zcGFuPlxuXG4gICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICNzZWxlY3RcbiAgICAgICAgICAgICAgICBhcmlhLWhpZGRlbj1cInRydWVcIlxuICAgICAgICAgICAgICAgIHVuc2VsZWN0YWJsZT1cIm9uXCJcbiAgICAgICAgICAgICAgICBjbGFzcz1cImstc2VsZWN0XCJcbiAgICAgICAgICAgICAgICBba2VuZG9FdmVudHNPdXRzaWRlQW5ndWxhcl09XCJ7XG4gICAgICAgICAgICAgICAgICAgIG1vdXNlZG93bjogcHJldmVudEV2ZW50RGVmYXVsdFxuICAgICAgICAgICAgICAgIH1cIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiay1pY29uXCJcbiAgICAgICAgICAgICAgICAgICAgW25nQ2xhc3NdPVwiYnV0dG9uQ2xhc3Nlc1wiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgPC9zcGFuPlxuXG4gICAgICAgIDxuZy10ZW1wbGF0ZSAjcG9wdXBUZW1wbGF0ZT5cbiAgICAgICAgICAgIDwhLS11c2VyLWRlZmluZWQgaGVhZGVyIHRlbXBsYXRlIC0tPlxuICAgICAgICAgICAgPG5nLXRlbXBsYXRlXG4gICAgICAgICAgICAgICAgKm5nSWY9XCJoZWFkZXJUZW1wbGF0ZVwiXG4gICAgICAgICAgICAgICAgW3RlbXBsYXRlQ29udGV4dF09XCJ7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUmVmOiBoZWFkZXJUZW1wbGF0ZT8udGVtcGxhdGVSZWZcbiAgICAgICAgICAgICAgICB9XCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG5cbiAgICAgICAgICAgIDwhLS1ncmlkIGhlYWRlci0tPlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICNoZWFkZXJcbiAgICAgICAgICAgICAgICBjbGFzcz1cImstZ3JpZC1oZWFkZXJcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJrLWdyaWQtaGVhZGVyLXdyYXBcIj5cbiAgICAgICAgICAgICAgICAgICAgPHRhYmxlIHJvbGU9XCJwcmVzZW50YXRpb25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxjb2xncm91cD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0Zvcj1cImxldCBjb2x1bW4gb2YgY29sdW1uc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Y29sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqbmdJZj1cIiFjb2x1bW4uaGlkZGVuICYmIGNvbHVtbi5tYXRjaGVzTWVkaWFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3N0eWxlLndpZHRoLnB4XT1cImNvbHVtbi53aWR0aFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2NvbGdyb3VwPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRib2R5PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdGb3I9XCJsZXQgY29sdW1uIG9mIGNvbHVtbnNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpuZ0lmPVwiIWNvbHVtbi5oaWRkZW4gJiYgY29sdW1uLm1hdGNoZXNNZWRpYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJrLWhlYWRlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW25nU3R5bGVdPVwiY29sdW1uLmhlYWRlclN0eWxlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbbmdDbGFzc109XCJjb2x1bW4uaGVhZGVyQ2xhc3NcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCIhY29sdW1uLmhlYWRlclRlbXBsYXRlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGNvbHVtbi50aXRsZSB8fCBjb2x1bW4uZmllbGQgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bmctdGVtcGxhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKm5nSWY9XCJjb2x1bW4uaGVhZGVyVGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbdGVtcGxhdGVDb250ZXh0XT1cIntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUmVmOiBjb2x1bW4uaGVhZGVyVGVtcGxhdGU/LnRlbXBsYXRlUmVmLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGltcGxpY2l0OiBjb2x1bW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW46IGNvbHVtblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDwhLS0gaXRlbSB0ZW1wbGF0ZSAtLT5cbiAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSAjcm93VGVtcGxhdGUgbGV0LWRhdGFJdGVtPlxuICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nRm9yPVwibGV0IGNvbHVtbiBvZiBjb2x1bW5zXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgICAgICAgICAqbmdJZj1cIiFjb2x1bW4uaGlkZGVuICYmIGNvbHVtbi5tYXRjaGVzTWVkaWFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJrLWNlbGxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgW25nQ2xhc3NdPVwiY29sdW1uLmNsYXNzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtzdHlsZS53aWR0aC5weF09XCJjb2x1bW4ud2lkdGhcIlxuICAgICAgICAgICAgICAgICAgICAgICAgW25nU3R5bGVdPVwiY29sdW1uLnN0eWxlXCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cIiFjb2x1bW4uY2VsbFRlbXBsYXRlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3sgdGV4dEZyb20oZGF0YUl0ZW0sIGNvbHVtbi5maWVsZCkgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKm5nSWY9XCJjb2x1bW4uY2VsbFRlbXBsYXRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbdGVtcGxhdGVDb250ZXh0XT1cIntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVSZWY6IGNvbHVtbi5jZWxsVGVtcGxhdGU/LnRlbXBsYXRlUmVmLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW1wbGljaXQ6IGRhdGFJdGVtLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhSXRlbTogZGF0YUl0ZW0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbjogY29sdW1uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuXG4gICAgICAgICAgICA8IS0tbGlzdC0tPlxuICAgICAgICAgICAgPGtlbmRvLWxpc3RcbiAgICAgICAgICAgICAgICAjb3B0aW9uc0xpc3RcbiAgICAgICAgICAgICAgICBbaWRdPVwibGlzdEJveElkXCJcbiAgICAgICAgICAgICAgICBbb3B0aW9uUHJlZml4XT1cIm9wdGlvblByZWZpeFwiXG4gICAgICAgICAgICAgICAgW2RhdGFdPVwiZGF0YVwiXG4gICAgICAgICAgICAgICAgW3RleHRGaWVsZF09XCJ0ZXh0RmllbGRcIlxuICAgICAgICAgICAgICAgIFt2YWx1ZUZpZWxkXT1cInZhbHVlRmllbGRcIlxuICAgICAgICAgICAgICAgIFt0ZW1wbGF0ZV09XCJ7IHRlbXBsYXRlUmVmOiByb3dUZW1wbGF0ZSB9XCJcbiAgICAgICAgICAgICAgICBbZ3JvdXBUZW1wbGF0ZV09XCJncm91cFRlbXBsYXRlXCJcbiAgICAgICAgICAgICAgICBbZml4ZWRHcm91cFRlbXBsYXRlXT1cImZpeGVkR3JvdXBUZW1wbGF0ZVwiXG4gICAgICAgICAgICAgICAgW2hlaWdodF09XCJsaXN0SGVpZ2h0XCJcbiAgICAgICAgICAgICAgICBbc2hvd109XCJpc09wZW5cIlxuICAgICAgICAgICAgICAgIFt2aXJ0dWFsXT1cInZpcnR1YWxcIlxuICAgICAgICAgICAgICAgIFtsaXN0Q2xhc3NdPVwiJ2stcmVzZXQgay1ncmlkLWxpc3QnXCJcbiAgICAgICAgICAgICAgICAocGFnZUNoYW5nZSk9XCJwYWdlQ2hhbmdlKCRldmVudClcIlxuICAgICAgICAgICAgICAgIChsaXN0UmVzaXplKT1cInVwZGF0ZUhlYWRlclBhZGRpbmcoaGVhZGVyKVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICA8L2tlbmRvLWxpc3Q+XG5cbiAgICAgICAgICAgIDwhLS1uby1kYXRhIHRlbXBsYXRlLS0+XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgY2xhc3M9XCJrLW5vZGF0YVwiXG4gICAgICAgICAgICAgICAgKm5nSWY9XCJkYXRhLmxlbmd0aCA9PT0gMFwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlXG4gICAgICAgICAgICAgICAgICAgIFtuZ0lmXT1cIm5vRGF0YVRlbXBsYXRlXCJcbiAgICAgICAgICAgICAgICAgICAgW3RlbXBsYXRlQ29udGV4dF09XCJ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVJlZjogbm9EYXRhVGVtcGxhdGU/LnRlbXBsYXRlUmVmXG4gICAgICAgICAgICAgICAgICAgIH1cIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdJZl09XCIhbm9EYXRhVGVtcGxhdGVcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdj57eyBub0RhdGFUZXh0IH19PC9kaXY+XG4gICAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8IS0tdXNlci1kZWZpbmVkIGZvb3RlciB0ZW1wbGF0ZS0tPlxuICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImZvb3RlclRlbXBsYXRlXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImstZm9vdGVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgW3RlbXBsYXRlQ29udGV4dF09XCJ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVSZWY6IGZvb3RlclRlbXBsYXRlLnRlbXBsYXRlUmVmXG4gICAgICAgICAgICAgICAgICAgICAgICB9XCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgIDwvbmctdGVtcGxhdGU+XG5cbiAgICAgICAgPGtlbmRvLXJlc2l6ZS1zZW5zb3JcbiAgICAgICAgICAgICpuZ0lmPVwiaXNPcGVuXCJcbiAgICAgICAgICAgIChyZXNpemUpPVwib25SZXNpemUoKVwiXG4gICAgICAgID5cbiAgICAgICAgPC9rZW5kby1yZXNpemUtc2Vuc29yPlxuXG4gICAgICAgIDwhLS0gd2hlbiB0aGUgcG9wdXBTZXR0aW5ncy5hcHBlbmRUbyB2YWx1ZSBpcyBzZXQgdG8gJ2NvbXBvbmVudCcsIHRoaXMgY29udGFpbmVyIGlzIHVzZWQgLS0+XG4gICAgICAgIDxuZy1jb250YWluZXIgI2NvbnRhaW5lcj48L25nLWNvbnRhaW5lcj5cbiAgICBgXG4gICAgfSksXG4gICAgX19wYXJhbSgxMCwgSW5qZWN0KFRPVUNIX0VOQUJMRUQpKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0xvY2FsaXphdGlvblNlcnZpY2UsXG4gICAgICAgIFBvcHVwU2VydmljZSxcbiAgICAgICAgU2VsZWN0aW9uU2VydmljZSxcbiAgICAgICAgTmF2aWdhdGlvblNlcnZpY2UsXG4gICAgICAgIERpc2FibGVkSXRlbXNTZXJ2aWNlLFxuICAgICAgICBEYXRhU2VydmljZSxcbiAgICAgICAgTmdab25lLFxuICAgICAgICBDaGFuZ2VEZXRlY3RvclJlZixcbiAgICAgICAgUmVuZGVyZXIyLFxuICAgICAgICBFbGVtZW50UmVmLCBCb29sZWFuXSlcbl0sIE11bHRpQ29sdW1uQ29tYm9Cb3hDb21wb25lbnQpO1xuXG4vKipcbiAqIFJlbmRlcnMgdGhlIGNvbnRlbnQgb2YgZWFjaCBub2RlIGluIHRoZSBEcm9wRG93blRyZWUuIFRvIGRlZmluZSBhIG5vZGUgdGVtcGxhdGUsIG5lc3QgYW4gYDxuZy10ZW1wbGF0ZT5gIHRhZ1xuICogd2l0aCB0aGUgYGtlbmRvRHJvcERvd25UcmVlTm9kZVRlbXBsYXRlYCBkaXJlY3RpdmUgaW5zaWRlIHRoZSBgPGtlbmRvLWRyb3Bkb3dudHJlZT5gIHRhZy5cbiAqXG4gKiBUaGUgY3VycmVudCBkYXRhIGl0ZW0gYW5kIGhpZXJhcmNoaWNhbCBpbmRleCBhcmUgYXZhaWxhYmxlIGFzIGNvbnRleHQgdmFyaWFibGVzOlxuICpcbiAqIC0gYGxldC1kYXRhSXRlbWAgKGBhbnlgKSAtIFRoZSBjdXJyZW50IGRhdGEgaXRlbS4gQXZhaWxhYmxlIGFzIGltcGxpY2l0IGNvbnRleHQgdmFyaWFibGUuXG4gKiAtIGBsZXQtaW5kZXg9XCJpbmRleFwiYCAoYHN0cmluZ2ApIC0gVGhlIGN1cnJlbnQgaXRlbSBoaWVyYXJjaGljYWwgaW5kZXguXG4gKi9cbmxldCBOb2RlVGVtcGxhdGVEaXJlY3RpdmUgPSBjbGFzcyBOb2RlVGVtcGxhdGVEaXJlY3RpdmUge1xuICAgIGNvbnN0cnVjdG9yKHRlbXBsYXRlUmVmKSB7XG4gICAgICAgIHRoaXMudGVtcGxhdGVSZWYgPSB0ZW1wbGF0ZVJlZjtcbiAgICB9XG59O1xuTm9kZVRlbXBsYXRlRGlyZWN0aXZlID0gX19kZWNvcmF0ZShbXG4gICAgRGlyZWN0aXZlKHtcbiAgICAgICAgc2VsZWN0b3I6ICdba2VuZG9Ecm9wRG93blRyZWVOb2RlVGVtcGxhdGVdLCBba2VuZG9NdWx0aVNlbGVjdFRyZWVOb2RlVGVtcGxhdGVdJ1xuICAgIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbVGVtcGxhdGVSZWZdKVxuXSwgTm9kZVRlbXBsYXRlRGlyZWN0aXZlKTtcblxudmFyIERyb3BEb3duVHJlZUNvbXBvbmVudF8xO1xuLyogdHNsaW50OmRpc2FibGU6bWVtYmVyLW9yZGVyaW5nICovXG5jb25zdCBERUZBVUxUX1BPUFVQX1NFVFRJTkdTID0geyBhbmltYXRlOiB0cnVlIH07XG5jb25zdCBoYXNDaGlsZHJlbiA9ICgpID0+IGZhbHNlO1xuY29uc3QgZmV0Y2hDaGlsZHJlbiA9ICgpID0+IG9mKFtdKTtcbmNvbnN0IGl0ZW1EaXNhYmxlZCA9ICgpID0+IGZhbHNlO1xuY29uc3QgaXNOb2RlVmlzaWJsZSA9ICgpID0+IHRydWU7XG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIFtLZW5kbyBVSSBEcm9wRG93blRyZWUgY29tcG9uZW50IGZvciBBbmd1bGFyXSh7JSBzbHVnIG92ZXJ2aWV3X2RkdCAlfSkuXG4gKi9cbmxldCBEcm9wRG93blRyZWVDb21wb25lbnQgPSBEcm9wRG93blRyZWVDb21wb25lbnRfMSA9IGNsYXNzIERyb3BEb3duVHJlZUNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZXJ2aWNlLCBuYXZpZ2F0aW9uU2VydmljZSwgcmVuZGVyZXIsIGhvc3RFbGVtZW50LCBfem9uZSwgY2RyLCBsb2NhbGl6YXRpb24sIHRvdWNoRW5hYmxlZCQkMSkge1xuICAgICAgICB0aGlzLnBvcHVwU2VydmljZSA9IHBvcHVwU2VydmljZTtcbiAgICAgICAgdGhpcy5uYXZpZ2F0aW9uU2VydmljZSA9IG5hdmlnYXRpb25TZXJ2aWNlO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuaG9zdEVsZW1lbnQgPSBob3N0RWxlbWVudDtcbiAgICAgICAgdGhpcy5fem9uZSA9IF96b25lO1xuICAgICAgICB0aGlzLmNkciA9IGNkcjtcbiAgICAgICAgdGhpcy5sb2NhbGl6YXRpb24gPSBsb2NhbGl6YXRpb247XG4gICAgICAgIHRoaXMudG91Y2hFbmFibGVkID0gdG91Y2hFbmFibGVkJCQxO1xuICAgICAgICB0aGlzLmhvc3RDbGFzc2VzID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgcG9wdXAgaXMgYWJvdXQgdG8gb3BlblxuICAgICAgICAgKiAoW3NlZSBleGFtcGxlXSh7JSBzbHVnIG9wZW5zdGF0ZV9kZHQgJX0pKS5cbiAgICAgICAgICogVGhpcyBldmVudCBpcyBwcmV2ZW50YWJsZS4gSWYgeW91IGNhbmNlbCBpdCwgdGhlIHBvcHVwIHdpbGwgcmVtYWluIGNsb3NlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub3BlbiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGFmdGVyIHRoZSBwb3B1cCBoYXMgYmVlbiBvcGVuZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9wZW5lZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgcG9wdXAgaXMgYWJvdXQgdG8gY2xvc2VcbiAgICAgICAgICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBvcGVuc3RhdGVfZGR0ICV9KSkuXG4gICAgICAgICAqIFRoaXMgZXZlbnQgaXMgcHJldmVudGFibGUuIElmIHlvdSBjYW5jZWwgaXQsIHRoZSBwb3B1cCB3aWxsIHJlbWFpbiBvcGVuLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jbG9zZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGFmdGVyIHRoZSBwb3B1cCBoYXMgYmVlbiBjbG9zZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNsb3NlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIHdoZW4gdGhlIHVzZXIgZXhwYW5kcyBhIG5vZGUgaW4gdGhlIHBvcHVwIFRyZWVWaWV3LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5ub2RlRXhwYW5kID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgd2hlbiB0aGUgdXNlciBjb2xsYXBzZXMgYSBub2RlIGluIHRoZSBwb3B1cCBUcmVlVmlldy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubm9kZUNvbGxhcHNlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSB1c2VyIGZvY3VzZXMgdGhlIERyb3BEb3duVHJlZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25Gb2N1cyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgRHJvcERvd25UcmVlIGdldHMgYmx1cnJlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25CbHVyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSB2YWx1ZSBpcyBjaGFuZ2VkXG4gICAgICAgICAqIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgb3ZlcnZpZXdfZGR0ICV9I3RvYy1ldmVudHMpKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudmFsdWVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyB3aGVuIHRoZSB2YWx1ZSBvZiB0aGUgYnVpbHQtaW4gZmlsdGVyIGlucHV0IGVsZW1lbnQgY2hhbmdlcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZmlsdGVyQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgc2V0IHRvIGB0cnVlYCwgcmVuZGVycyBhIGJ1dHRvbiBvbiBob3ZlcmluZyBvdmVyIHRoZSBjb21wb25lbnQuXG4gICAgICAgICAqIENsaWNraW5nIHRoaXMgYnV0dG9uIHJlc2V0cyB0aGUgdmFsdWUgb2YgdGhlIGNvbXBvbmVudCB0byBgdW5kZWZpbmVkYCBhbmQgdHJpZ2dlcnMgdGhlIGBjaGFuZ2VgIGV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jbGVhckJ1dHRvbiA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGZ1bmN0aW9uIHdoaWNoIGRldGVybWluZXMgaWYgYSBzcGVjaWZpYyBub2RlIGhhcyBjaGlsZCBub2Rlcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGFzQ2hpbGRyZW4gPSBoYXNDaGlsZHJlbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgZnVuY3Rpb24gd2hpY2ggcHJvdmlkZXMgdGhlIGNoaWxkIG5vZGVzIGZvciBhIGdpdmVuIHBhcmVudCBub2RlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5mZXRjaENoaWxkcmVuID0gZmV0Y2hDaGlsZHJlbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBoaW50IHdoaWNoIGlzIGRpc3BsYXllZCB3aGVuIHRoZSBjb21wb25lbnQgaXMgZW1wdHkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBsYWNlaG9sZGVyID0gXCJcIjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgdGhlIGhlaWdodCBvZiB0aGUgb3B0aW9ucyBsaXN0LiBCeSBkZWZhdWx0LCBgbGlzdEhlaWdodGAgaXMgMjAwcHguXG4gICAgICAgICAqXG4gICAgICAgICAqID4gVGhlIGBsaXN0SGVpZ2h0YCBwcm9wZXJ0eSBhZmZlY3RzIG9ubHkgdGhlIGxpc3Qgb2Ygb3B0aW9ucyBhbmQgbm90IHRoZSB3aG9sZSBwb3B1cCBjb250YWluZXIuXG4gICAgICAgICAqID4gVG8gc2V0IHRoZSBoZWlnaHQgb2YgdGhlIHBvcHVwIGNvbnRhaW5lciwgdXNlIGBwb3B1cFNldHRpbmdzLmhlaWdodGAuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmxpc3RIZWlnaHQgPSAyMDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIHRoZSBkaXNhYmxlZCBzdGF0ZSBvZiB0aGUgY29tcG9uZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyB0aGUgcmVhZC1vbmx5IHN0YXRlIG9mIHRoZSBjb21wb25lbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlYWRvbmx5ID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgdGhlIHR5cGUgb2YgdGhlIHNlbGVjdGVkIHZhbHVlXG4gICAgICAgICAqIChbbW9yZSBpbmZvcm1hdGlvbiBhbmQgZXhhbXBsZV0oeyUgc2x1ZyB2YWx1ZWJpbmRpbmdfZGR0ICV9I3RvYy1wcmltaXRpdmUtdmFsdWVzKSkuXG4gICAgICAgICAqIElmIHNldCB0byBgdHJ1ZWAsIHRoZSBzZWxlY3RlZCB2YWx1ZSBoYXMgdG8gYmUgb2YgYSBwcmltaXRpdmUgdmFsdWUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnZhbHVlUHJpbWl0aXZlID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGZ1bmN0aW9uIHRoYXQgaXMgZXhlY3V0ZWQgZm9yIGVhY2ggZGF0YSBpdGVtIGFuZCBkZXRlcm1pbmVzIGlmIGEgc3BlY2lmaWMgaXRlbSBpcyBkaXNhYmxlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaXRlbURpc2FibGVkID0gaXRlbURpc2FibGVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQSBjYWxsYmFjayB3aGljaCBkZXRlcm1pbmVzIHdoZXRoZXIgYSB0cmVlIG5vZGUgc2hvdWxkIGJlIHJlbmRlcmVkIGFzIGhpZGRlbi4gVGhlIHV0aWxpdHkgLmstZGlzcGxheS1ub25lIGNsYXNzIGlzIHVzZWQgdG8gaGlkZSB0aGUgbm9kZXMuXG4gICAgICAgICAqIFVzZWZ1bCBmb3IgY3VzdG9tIGZpbHRlcmluZyBpbXBsZW1lbnRhdGlvbnMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmlzTm9kZVZpc2libGUgPSBpc05vZGVWaXNpYmxlO1xuICAgICAgICAvKipcbiAgICAgICAgICogSW5kaWNhdGVzIHdoZXRoZXIgdGhlIGNoaWxkIG5vZGVzIHdpbGwgYmUgZmV0Y2hlZCBvbiBub2RlIGV4cGFuZCBvciB3aWxsIGJlIGluaXRpYWxseSBwcmVmZXRjaGVkLlxuICAgICAgICAgKiBAZGVmYXVsdCB0cnVlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmxvYWRPbkRlbWFuZCA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZW5kZXJzIHRoZSBidWlsdC1pbiBpbnB1dCBlbGVtZW50IGZvciBmaWx0ZXJpbmcgdGhlIERyb3BEb3duVHJlZS5cbiAgICAgICAgICogSWYgc2V0IHRvIGB0cnVlYCwgdGhlIGNvbXBvbmVudCBlbWl0cyB0aGUgYGZpbHRlckNoYW5nZWAgZXZlbnQsIHdoaWNoIGNhbiBiZSB1c2VkIHRvIFtmaWx0ZXIgdGhlIERyb3BEb3duVHJlZSBtYW51YWxseV0oeyUgc2x1ZyBmaWx0ZXJpbmdfZGR0ICV9I3RvYy1tYW51YWwtZmlsdGVyaW5nKS5cbiAgICAgICAgICogQSBidWlsdC1pbiBmaWx0ZXJpbmcgaW1wbGVtZW50YXRpb24gaXMgYXZhaWxhYmxlIHRvIHVzZSB3aXRoIHRoZSBbYGtlbmRvRHJvcERvd25UcmVlSGllcmFyY2h5QmluZGluZ2BdKHslIHNsdWcgYXBpX2Ryb3Bkb3duc19kcm9wZG93bnRyZWVoaWVyYXJjaHliaW5kaW5nZGlyZWN0aXZlICV9KSBhbmQgW2BrZW5kb0Ryb3BEb3duVHJlZUZsYXRCaW5kaW5nYF0oeyUgc2x1ZyBhcGlfZHJvcGRvd25zX2Ryb3Bkb3dudHJlZWZsYXRiaW5kaW5nZGlyZWN0aXZlICV9KSBkaXJlY3RpdmVzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5maWx0ZXJhYmxlID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZpbHRlciA9ICcnO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGhpZGRlblxuICAgICAgICAgKlxuICAgICAgICAgKiBVc2VkIGJ5IHRoZSBrZW5kby1sYWJlbCBhbmQga2VuZG8tZmxvYXRpbmdsYWJlbCB0byBhY2Nlc3MgYW5kIGFzc29jaWF0ZSB0aGUgZm9jdXNhYmxlIGVsZW1lbnQgd2l0aCB0aGUgcHJvdmlkZWQgbGFiZWwgdmlhIGFyaWEtbGFiZWxsZWRieS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZm9jdXNhYmxlSWQgPSBgay0ke2d1aWQoKX1gO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGhpZGRlblxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zZWxlY3RlZEtleXMgPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBoaWRkZW5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZmlsdGVyU3RhdGVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmFsbE5vZGVzSGlkZGVuID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqXG4gICAgICAgICAqIFVzZWQgdG8gYXNzb2NpYXRlIHRoZSB2YWx1ZSBsYWJlbCB3aXRoIHRoZSB3cmFwcGVyIHZpYSBhcmlhLWRlc2NyaWJlZGJ5LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52YWx1ZUxhYmVsSWQgPSBgay0ke2d1aWQoKX1gO1xuICAgICAgICB0aGlzLl9wb3B1cFNldHRpbmdzID0gREVGQVVMVF9QT1BVUF9TRVRUSU5HUztcbiAgICAgICAgdGhpcy5fdGFiaW5kZXggPSAwO1xuICAgICAgICB0aGlzLl9pc0ZvY3VzZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gW107XG4gICAgICAgIHRoaXMub25Ub3VjaGVkQ2FsbGJhY2sgPSBub29wO1xuICAgICAgICB0aGlzLm9uQ2hhbmdlQ2FsbGJhY2sgPSBub29wO1xuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IGxvY2FsaXphdGlvbi5ydGwgPyAncnRsJyA6ICdsdHInO1xuICAgICAgICB0aGlzLnN1YnNjcmliZUV2ZW50cygpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZVRvdWNoRXZlbnRzKCk7XG4gICAgfVxuICAgIGdldCBjbGVhcmFibGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNsZWFyQnV0dG9uO1xuICAgIH1cbiAgICBzZXQgdHJlZXZpZXcodHJlZXZpZXcpIHtcbiAgICAgICAgaWYgKHRyZWV2aWV3KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0ZvY3VzZWQgJiYgIXRoaXMuZmlsdGVyYWJsZSB8fCB0aGlzLnRvdWNoRW5hYmxlZCkge1xuICAgICAgICAgICAgICAgIHRyZWV2aWV3LmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB0aGUgdHJlZXZpZXcgYW5pbWF0aW9ucyBhcmUgaW5pdGlhbGx5IGRpc2FibGVkICh3ZSBkb24ndCB3YW50IGV4cGFuZCBhbmltYXRpb25zIGR1cmluZyBwb3B1cCBvcGVuaW5nKVxuICAgICAgICAgICAgLy8gcmUtZW5hYmxlcyB0aGUgYW5pbWF0aW9ucyBmb3IgdXNlciBpbnRlcmFjdGlvblxuICAgICAgICAgICAgdHJlZXZpZXcuYW5pbWF0ZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl90cmVldmlldyA9IHRyZWV2aWV3O1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCB0cmVldmlldygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyZWV2aWV3O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBkYXRhIG9mIHRoZSBEcm9wRG93blRyZWUuXG4gICAgICpcbiAgICAgKiA+IFRoZSBkYXRhIGhhcyB0byBiZSBwcm92aWRlZCBpbiBhbiBhcnJheS1saWtlIGxpc3Qgd2l0aCBvYmplY3RzLlxuICAgICAqL1xuICAgIHNldCBkYXRhKGRhdGEpIHtcbiAgICAgICAgdGhpcy5fbm9kZXMgPSBkYXRhO1xuICAgICAgICB0aGlzLnNldFN0YXRlKCk7XG4gICAgfVxuICAgIGdldCBkYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbm9kZXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHZhbHVlIG9mIHRoZSBEcm9wRG93blRyZWUuXG4gICAgICogSXQgY2FuIGVpdGhlciBiZSBvZiB0aGUgcHJpbWl0aXZlIChzdHJpbmcsIG51bWJlcnMpIG9yIG9mIHRoZSBjb21wbGV4IChvYmplY3RzKSB0eXBlLlxuICAgICAqIFRvIGRlZmluZSB0aGUgdHlwZSwgdXNlIHRoZSBgdmFsdWVQcmltaXRpdmVgIG9wdGlvbi5cbiAgICAgKlxuICAgICAqL1xuICAgIHNldCB2YWx1ZShuZXdWYWx1ZSkge1xuICAgICAgICB0aGlzLl92YWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICB0aGlzLnNldFN0YXRlKCk7XG4gICAgfVxuICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb25maWd1cmVzIHRoZSBwb3B1cCBvZiB0aGUgRHJvcERvd25UcmVlLlxuICAgICAqXG4gICAgICogVGhlIGF2YWlsYWJsZSBvcHRpb25zIGFyZTpcbiAgICAgKiAtIGBhbmltYXRlOiBCb29sZWFuYCZtZGFzaDtDb250cm9scyB0aGUgcG9wdXAgYW5pbWF0aW9uLiBCeSBkZWZhdWx0LCB0aGUgb3BlbiBhbmQgY2xvc2UgYW5pbWF0aW9ucyBhcmUgZW5hYmxlZC5cbiAgICAgKiAtIGB3aWR0aDogTnVtYmVyIHwgU3RyaW5nYCZtZGFzaDtTZXRzIHRoZSB3aWR0aCBvZiB0aGUgcG9wdXAgY29udGFpbmVyLiBCeSBkZWZhdWx0LCB0aGUgd2lkdGggb2YgdGhlIGhvc3QgZWxlbWVudCBpcyB1c2VkLiBJZiBzZXQgdG8gYGF1dG9gLCB0aGUgY29tcG9uZW50IGF1dG9tYXRpY2FsbHkgYWRqdXN0cyB0aGUgd2lkdGggb2YgdGhlIHBvcHVwIGFuZCBubyBpdGVtIGxhYmVscyBhcmUgd3JhcHBlZC5cbiAgICAgKiAtIGBoZWlnaHQ6IE51bWJlcmAmbWRhc2g7U2V0cyB0aGUgaGVpZ2h0IG9mIHRoZSBwb3B1cCBjb250YWluZXIuXG4gICAgICogLSBgcG9wdXBDbGFzczogU3RyaW5nYCZtZGFzaDtTcGVjaWZpZXMgYSBsaXN0IG9mIENTUyBjbGFzc2VzIHRoYXQgYXJlIHVzZWQgdG8gc3R5bGUgdGhlIHBvcHVwLlxuICAgICAqIC0gYGFwcGVuZFRvOiBcInJvb3RcIiB8IFwiY29tcG9uZW50XCIgfCBWaWV3Q29udGFpbmVyUmVmYCZtZGFzaDtTcGVjaWZpZXMgdGhlIGNvbXBvbmVudCB0byB3aGljaCB0aGUgcG9wdXAgd2lsbCBiZSBhcHBlbmRlZC5cbiAgICAgKi9cbiAgICBzZXQgcG9wdXBTZXR0aW5ncyhzZXR0aW5ncykge1xuICAgICAgICB0aGlzLl9wb3B1cFNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9QT1BVUF9TRVRUSU5HUywgc2V0dGluZ3MpO1xuICAgIH1cbiAgICBnZXQgcG9wdXBTZXR0aW5ncygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BvcHVwU2V0dGluZ3M7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEtlZXBzIHRoZSBjdXJyZW50IGBkYXRhSXRlbWAgb2JqZWN0IGluIG9yZGVyIHRvIHJlc29sdmUgc2VsZWN0aW9uLlxuICAgICAqIE5lZWRzIHRvIGJlIHByb3ZpZGVkIHdoZW4gYHZhbHVlYCBpcyBib3VuZCBpbiBhbmQgYHZhbHVlUHJpbWl0aXZlYCBpcyBzZXQgdG8gdHJ1ZS5cbiAgICAgKi9cbiAgICBzZXQgZGF0YUl0ZW0oaXRlbSkge1xuICAgICAgICB0aGlzLl9kYXRhSXRlbSA9IGl0ZW07XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoKTtcbiAgICB9XG4gICAgZ2V0IGRhdGFJdGVtKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGF0YUl0ZW0gPyB0aGlzLl9kYXRhSXRlbSA6IHRoaXMudmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB0aGUgW2B0YWJpbmRleGBdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUTUwvR2xvYmFsX2F0dHJpYnV0ZXMvdGFiaW5kZXgpIG9mIHRoZSBjb21wb25lbnQuXG4gICAgICovXG4gICAgc2V0IHRhYmluZGV4KHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHByb3ZpZGVkVGFiSW5kZXggPSBOdW1iZXIodmFsdWUpO1xuICAgICAgICBjb25zdCBkZWZhdWx0VGFiSW5kZXggPSAwO1xuICAgICAgICB0aGlzLl90YWJpbmRleCA9ICFpc05hTihwcm92aWRlZFRhYkluZGV4KSA/IHByb3ZpZGVkVGFiSW5kZXggOiBkZWZhdWx0VGFiSW5kZXg7XG4gICAgfVxuICAgIGdldCB0YWJpbmRleCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzYWJsZWQgPyAtMSA6IHRoaXMuX3RhYmluZGV4O1xuICAgIH1cbiAgICBzZXQgaXNGb2N1c2VkKGlzRm9jdXNlZCkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyW2lzRm9jdXNlZCA/ICdhZGRDbGFzcycgOiAncmVtb3ZlQ2xhc3MnXSh0aGlzLndyYXBwZXIubmF0aXZlRWxlbWVudCwgJ2stc3RhdGUtZm9jdXNlZCcpO1xuICAgICAgICB0aGlzLl9pc0ZvY3VzZWQgPSBpc0ZvY3VzZWQ7XG4gICAgfVxuICAgIGdldCBpc0ZvY3VzZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc0ZvY3VzZWQ7XG4gICAgfVxuICAgIGdldCB3aWR0aCgpIHtcbiAgICAgICAgY29uc3Qgd3JhcHBlcldpZHRoID0gdGhpcy53cmFwcGVyLm5hdGl2ZUVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5wb3B1cFNldHRpbmdzLndpZHRoIHx8IHdyYXBwZXJXaWR0aDtcbiAgICAgICAgY29uc3QgbWluV2lkdGggPSBpc05hTih3cmFwcGVyV2lkdGgpID8gd3JhcHBlcldpZHRoIDogYCR7d3JhcHBlcldpZHRofXB4YDtcbiAgICAgICAgY29uc3QgbWF4V2lkdGggPSBpc05hTih3aWR0aCkgPyB3aWR0aCA6IGAke3dpZHRofXB4YDtcbiAgICAgICAgcmV0dXJuIHsgbWluOiBtaW5XaWR0aCwgbWF4OiBtYXhXaWR0aCB9O1xuICAgIH1cbiAgICBnZXQgaGVpZ2h0KCkge1xuICAgICAgICBjb25zdCBwb3B1cEhlaWdodCA9IHRoaXMucG9wdXBTZXR0aW5ncy5oZWlnaHQ7XG4gICAgICAgIHJldHVybiBpc1ByZXNlbnQocG9wdXBIZWlnaHQpID8gYCR7cG9wdXBIZWlnaHR9cHhgIDogJ2F1dG8nO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IG9wZW4gc3RhdGUgb2YgdGhlIHBvcHVwLlxuICAgICAqL1xuICAgIGdldCBpc09wZW4oKSB7XG4gICAgICAgIHJldHVybiBpc1ByZXNlbnQodGhpcy5wb3B1cFJlZik7XG4gICAgfVxuICAgIGdldCBjbGVhckJ1dHRvblZpc2libGl0eSgpIHtcbiAgICAgICAgaWYgKHRoaXMudG91Y2hFbmFibGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3Zpc2libGUnO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKlxuICAgICAqIEFsaWFzIGZvciBgaXNOb2RlRXhwYW5kZWRgLiBVc2VkIGZvciBjb21wYXRpYmlsaXR5IHdpdGggdGhlIGBFeHBhbmRhYmxlQ29tcG9uZW50YCBpbnRlcmZhY2UuXG4gICAgICogUmVxdWlyZWQgZm9yIHRoZSBleHBhbmQtZGlyZWN0aXZlLlxuICAgICAqL1xuICAgIHNldCBpc0V4cGFuZGVkKGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuaXNOb2RlRXhwYW5kZWQgPSBjYWxsYmFjaztcbiAgICB9XG4gICAgZ2V0IGlzRXhwYW5kZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzTm9kZUV4cGFuZGVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICpcbiAgICAgKiBBbGlhcyBmb3IgYG5vZGVFeHBhbmRgLiBVc2VkIGZvciBjb21wYXRpYmlsaXR5IHdpdGggdGhlIGBFeHBhbmRhYmxlQ29tcG9uZW50YCBpbnRlcmZhY2UuXG4gICAgICogUmVxdWlyZWQgZm9yIHRoZSBleHBhbmQtZGlyZWN0aXZlLlxuICAgICAqL1xuICAgIGdldCBleHBhbmQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vZGVFeHBhbmQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKlxuICAgICAqIEFsaWFzIGZvciBgbm9kZUNvbGxhcHNlYC4gVXNlZCBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIHRoZSBgRXhwYW5kYWJsZUNvbXBvbmVudGAgaW50ZXJmYWNlLlxuICAgICAqIFJlcXVpcmVkIGZvciB0aGUgZXhwYW5kLWRpcmVjdGl2ZS5cbiAgICAgKi9cbiAgICBnZXQgY29sbGFwc2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vZGVDb2xsYXBzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqXG4gICAgICogQWxpYXMgZm9yIGBkYXRhYC4gVXNlZCBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIHRoZSBgRGF0YUJvdW5kQ29tcG9uZW50YCBpbnRlcmZhY2UuXG4gICAgICogUmVxdWlyZWQgZm9yIHRoZSBkYXRhLWJpbmRpbmcgZGlyZWN0aXZlcy5cbiAgICAgKi9cbiAgICBzZXQgbm9kZXMobm9kZXMpIHtcbiAgICAgICAgdGhpcy5kYXRhID0gbm9kZXM7XG4gICAgfVxuICAgIGdldCBub2RlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqXG4gICAgICogQWxpYXMgZm9yIGBmZXRjaENoaWxkcmVuYC4gVXNlZCBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIHRoZSBgRGF0YUJvdW5kQ29tcG9uZW50YCBpbnRlcmZhY2UuXG4gICAgICogUmVxdWlyZWQgZm9yIHRoZSBkYXRhLWJpbmRpbmcgZGlyZWN0aXZlc1xuICAgICAqL1xuICAgIHNldCBjaGlsZHJlbihjYWxsYmFjaykge1xuICAgICAgICB0aGlzLmZldGNoQ2hpbGRyZW4gPSBjYWxsYmFjaztcbiAgICB9XG4gICAgZ2V0IGNoaWxkcmVuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mZXRjaENoaWxkcmVuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICpcbiAgICAgKiBBbGlhcyBmb3IgYGlzTm9kZVZpc2libGVgLiBVc2VkIGZvciBjb21wYXRpYmlsaXR5IHdpdGggdGhlIGBEYXRhQm91bmRDb21wb25lbnRgIGludGVyZmFjZS5cbiAgICAgKiBUaGUgYERhdGFCb3VuZENvbXBvbmVudGAgaW50ZXJmYWNlIGlzIHVzZWQgaW4gdGhlIGRhdGEtYmluZGluZyBkaXJlY3RpdmVzLlxuICAgICAqL1xuICAgIHNldCBpc1Zpc2libGUoY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5pc05vZGVWaXNpYmxlID0gY2FsbGJhY2s7XG4gICAgfVxuICAgIGdldCBpc1Zpc2libGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzTm9kZVZpc2libGU7XG4gICAgfVxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUF0dHJpYnV0ZSh0aGlzLmhvc3RFbGVtZW50Lm5hdGl2ZUVsZW1lbnQsICd0YWJpbmRleCcpO1xuICAgICAgICB0aGlzLmFzc2lnbkFyaWFEZXNjcmliZWRCeSgpO1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaCh0aGlzLmxvY2FsaXphdGlvblxuICAgICAgICAgICAgLmNoYW5nZXMuc3Vic2NyaWJlKCh7IHJ0bCB9KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IHJ0bCA/ICdydGwnIDogJ2x0cic7XG4gICAgICAgICAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveVBvcHVwKCk7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVFdmVudHMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXMpIHtcbiAgICAgICAgaWYgKGFueUNoYW5nZWQoWyd0ZXh0RmllbGQnLCAndmFsdWVGaWVsZCcsICd2YWx1ZVByaW1pdGl2ZSddLCBjaGFuZ2VzLCBmYWxzZSkpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgbmdBZnRlckNvbnRlbnRDaGVja2VkKCkge1xuICAgICAgICB0aGlzLnZlcmlmeVNldHRpbmdzKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKlxuICAgICAqIFVzZWQgYnkgdGhlIGtlbmRvLWZsb2F0aW5nbGFiZWwgY29tcG9uZW50IHRvIGRldGVybWluZSBpZiB0aGUgZmxvYXRpbmcgbGFiZWxcbiAgICAgKiBzaG91bGQgYmUgcmVuZGVyZWQgaW5zaWRlIHRoZSBpbnB1dCB3aGVuIHRoZSBjb21wb25lbnQgaXMgbm90IGZvY3VzZWQuXG4gICAgICovXG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLnRleHQgJiYgIXRoaXMucGxhY2Vob2xkZXI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICB0b2dnbGVQb3B1cChvcGVuKSB7XG4gICAgICAgIGNvbnN0IGlzRGlzYWJsZWQgPSB0aGlzLmRpc2FibGVkIHx8IHRoaXMucmVhZG9ubHk7XG4gICAgICAgIGNvbnN0IHNhbWVTdGF0ZSA9IHRoaXMuaXNPcGVuID09PSBvcGVuO1xuICAgICAgICBpZiAoaXNEaXNhYmxlZCB8fCBzYW1lU3RhdGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0b2dnbGVQcmV2ZW50ZWQgPSB0aGlzLnRyaWdnZXJQb3B1cEV2ZW50cyhvcGVuKTtcbiAgICAgICAgaWYgKCF0b2dnbGVQcmV2ZW50ZWQpIHtcbiAgICAgICAgICAgIG9wZW4gP1xuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlUG9wdXAoKSA6XG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95UG9wdXAoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgaGFuZGxlRm9jdXMoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc0ZvY3VzZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaXNGb2N1c2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChoYXNPYnNlcnZlcnModGhpcy5vbkZvY3VzKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3pvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkZvY3VzLmVtaXQoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgaGFuZGxlQmx1cihlKSB7XG4gICAgICAgIGNvbnN0IHJlbGF0ZWRUYXJnZXQgPSBlICYmIGUucmVsYXRlZFRhcmdldDtcbiAgICAgICAgaWYgKHRoaXMuaG9zdEVsZW1lbnQubmF0aXZlRWxlbWVudC5jb250YWlucyhyZWxhdGVkVGFyZ2V0KSB8fFxuICAgICAgICAgICAgKHRoaXMuaXNPcGVuICYmIHRoaXMucG9wdXBSZWYucG9wdXBFbGVtZW50LmNvbnRhaW5zKHJlbGF0ZWRUYXJnZXQpKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXNGb2N1c2VkID0gZmFsc2U7XG4gICAgICAgIGlmIChoYXNPYnNlcnZlcnModGhpcy5vbkJsdXIpIHx8XG4gICAgICAgICAgICBpc1VudG91Y2hlZCh0aGlzLmhvc3RFbGVtZW50Lm5hdGl2ZUVsZW1lbnQpKSB7XG4gICAgICAgICAgICB0aGlzLl96b25lLnJ1bigoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVQb3B1cChmYWxzZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkJsdXIuZW1pdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMub25Ub3VjaGVkQ2FsbGJhY2soKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVQb3B1cChmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGhhbmRsZUtleWRvd24oZXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQgfHwgdGhpcy5yZWFkb25seSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGV2ZW50RGF0YSA9IGV2ZW50O1xuICAgICAgICB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLnByb2Nlc3Moe1xuICAgICAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnREYXRhXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgaGFuZGxlQ2xpY2soKSB7XG4gICAgICAgIHRoaXMudG9nZ2xlUG9wdXAoIXRoaXMuaXNPcGVuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9jdXNlcyBhIHNwZWNpZmljIGl0ZW0gb2YgdGhlIERyb3BEb3duVHJlZSBiYXNlZCBvbiBhIHByb3ZpZGVkIGluZGV4IGluIHRoZSBmb3JtYXQgb2YgYDFfMWAuXG4gICAgICogVGhlIHRhcmdldGVkIGl0ZW0gc2hvdWxkIGJlIGV4cGFuZGVkIGluIG9yZGVyIGZvciBpdCB0byBiZSBmb2N1c2VkLlxuICAgICAqIElmIG51bGwgb3IgaW52YWxpZCBpbmRleCBpcyBwcm92aWRlZCB0aGUgZm9jdXMgd2lsbCBiZSBzZXQgb24gdGhlIGZpcnN0IGl0ZW0uXG4gICAgICovXG4gICAgZm9jdXNJdGVtQXQoaW5kZXgpIHtcbiAgICAgICAgaWYgKHRoaXMudHJlZXZpZXcpIHtcbiAgICAgICAgICAgIGNvbnN0IGxvb2t1cCA9IHRoaXMudHJlZXZpZXcuaXRlbUxvb2t1cChpbmRleCk7XG4gICAgICAgICAgICBsZXQgaXNJdGVtRGlzYWJsZWQgPSAhaXNQcmVzZW50KGxvb2t1cCkgfHwgdGhpcy50cmVldmlldy5pc0Rpc2FibGVkKGxvb2t1cC5pdGVtLmRhdGFJdGVtLCBsb29rdXAuaXRlbS5pbmRleCk7XG4gICAgICAgICAgICBpZiAoIWlzSXRlbURpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmVldmlldy5mb2N1cyhpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9jdXNlcyB0aGUgRHJvcERvd25UcmVlLlxuICAgICAqL1xuICAgIGZvY3VzKCkge1xuICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMud3JhcHBlci5uYXRpdmVFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQmx1cnMgdGhlIERyb3BEb3duVHJlZS5cbiAgICAgKi9cbiAgICBibHVyKCkge1xuICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMud3JhcHBlci5uYXRpdmVFbGVtZW50LmJsdXIoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIHZhbHVlIG9mIHRoZSBEcm9wRG93blRyZWUuXG4gICAgICogSWYgeW91IHVzZSB0aGUgYHJlc2V0YCBtZXRob2QgdG8gY2xlYXIgdGhlIHZhbHVlIG9mIHRoZSBjb21wb25lbnQsXG4gICAgICogdGhlIG1vZGVsIHdpbGwgbm90IHVwZGF0ZSBhdXRvbWF0aWNhbGx5IGFuZCB0aGUgYHZhbHVlQ2hhbmdlYCBldmVudCB3aWxsIG5vdCBiZSBmaXJlZC5cbiAgICAgKi9cbiAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5kYXRhSXRlbSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVG9nZ2xlcyB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgcG9wdXBcbiAgICAgKiAoW3NlZSBleGFtcGxlXSh7JSBzbHVnIG9wZW5zdGF0ZV9kZHQgJX0pKS5cbiAgICAgKiBJZiB5b3UgdXNlIHRoZSBgdG9nZ2xlYCBtZXRob2QgdG8gb3BlbiBvciBjbG9zZSB0aGUgcG9wdXAsIHRoZSBgb3BlbmAgYW5kIGBjbG9zZWAgZXZlbnRzIHdpbGwgbm90IGJlIGZpcmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wZW4gLSBUaGUgc3RhdGUgb2YgdGhlIHBvcHVwLlxuICAgICAqL1xuICAgIHRvZ2dsZShvcGVuKSB7XG4gICAgICAgIC8vIFRoZSBQcm9taXNlIGlzIHJlcXVpcmVkIHRvIG9wZW4gdGhlIHBvcHVwIG9uIGxvYWQuXG4gICAgICAgIC8vIE90aGVyd2lzZSwgdGhlIFwiVmlld0NvbnRhaW5lclJlZiBub3QgZm91bmQuLi5cIiBlcnJvciB3aWxsIGJlIHRocm93bi5cbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKG51bGwpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2hvdWxkT3BlbiA9IGlzUHJlc2VudChvcGVuKSA/IG9wZW4gOiAhaXNQcmVzZW50KHRoaXMucG9wdXBSZWYpO1xuICAgICAgICAgICAgdGhpcy5kZXN0cm95UG9wdXAoKTtcbiAgICAgICAgICAgIGlmIChzaG91bGRPcGVuKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVQb3B1cCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGdldCBwb3B1cENvbnRhaW5lckNsYXNzZXMoKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckNsYXNzZXMgPSBbJ2stcG9wdXAtZHJvcGRvd250cmVlJywgJ2stcmVzZXQnLCAnay1ncm91cCcsICdrLWxpc3QtY29udGFpbmVyJ107XG4gICAgICAgIGlmICh0aGlzLnBvcHVwU2V0dGluZ3MucG9wdXBDbGFzcykge1xuICAgICAgICAgICAgY29udGFpbmVyQ2xhc3Nlcy5wdXNoKHRoaXMucG9wdXBTZXR0aW5ncy5wb3B1cENsYXNzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29udGFpbmVyQ2xhc3NlcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIG9uU2VsZWN0aW9uQ2hhbmdlKHsgZGF0YUl0ZW0sIGluZGV4IH0pIHtcbiAgICAgICAgdGhpcy52YWx1ZURlcHRoID0gaW5kZXguc3BsaXQoJ18nKS5sZW5ndGggLSAxO1xuICAgICAgICBjb25zdCB2YWx1ZUZpZWxkID0gdGhpcy5nZXRGaWVsZCh0aGlzLnZhbHVlRmllbGQsIGRhdGFJdGVtKTtcbiAgICAgICAgY29uc3QgbmV3VmFsdWUgPSB0aGlzLnZhbHVlUHJpbWl0aXZlID9cbiAgICAgICAgICAgIGdldHRlcih2YWx1ZUZpZWxkKShkYXRhSXRlbSkgOlxuICAgICAgICAgICAgZGF0YUl0ZW07XG4gICAgICAgIGNvbnN0IHNob3VsZFVwZGF0ZVZhbHVlID0gbmV3VmFsdWUgIT09IHRoaXMudmFsdWU7XG4gICAgICAgIGlmIChzaG91bGRVcGRhdGVWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5kYXRhSXRlbSA9IGRhdGFJdGVtO1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgdGhpcy5lbWl0VmFsdWVDaGFuZ2UodGhpcy52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50b2dnbGVQb3B1cChmYWxzZSk7XG4gICAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIG1lc3NhZ2VGb3Ioa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsaXphdGlvbi5nZXQoa2V5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGNsZWFyVmFsdWUoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5kYXRhSXRlbSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5jbGVhclN0YXRlKCk7XG4gICAgICAgIHRoaXMudmFsdWVDaGFuZ2UuZW1pdCh1bmRlZmluZWQpO1xuICAgICAgICB0aGlzLmVtaXRWYWx1ZUNoYW5nZSgpO1xuICAgIH1cbiAgICBnZXQgYXBwZW5kVG8oKSB7XG4gICAgICAgIGNvbnN0IHsgYXBwZW5kVG8gfSA9IHRoaXMucG9wdXBTZXR0aW5ncztcbiAgICAgICAgaWYgKCFhcHBlbmRUbyB8fCBhcHBlbmRUbyA9PT0gJ3Jvb3QnKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcHBlbmRUbyA9PT0gJ2NvbXBvbmVudCcgPyB0aGlzLmNvbnRhaW5lciA6IGFwcGVuZFRvO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgcHJldmVudEV2ZW50RGVmYXVsdChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgd3JpdGVWYWx1ZSh2YWx1ZSkge1xuICAgICAgICAvLyBJZiB0aGUgdXNlciByZXNldHMgdGhlIHZhbHVlIGJ5IHByb3ZpZGluZyBudWxsL3VuZGVmaW5lZCB3ZSBuZWVkIHRvIHJlc2V0IHRoZSBgZGF0YUl0ZW1gXG4gICAgICAgIC8vIEJlY2F1c2UgdXBvbiBpbml0aWFsaXphdGlvbiBvZiB0aGUgY29tcG9uZW50IHRoZSBgd3JpdGVWYWx1ZWAgaXMgYmVpbmcgY2FsbGVkIHR3aWNlIC1cbiAgICAgICAgLy8gZmlyc3QgdGltZSB3aXRoIGBudWxsYCB2YWx1ZSByZWdhcmRsZXNzIG9mIHN5bmMvYXN5bmMgdmFsdWUgLSBhbiBleHRyYSBjaGVjayBpcyBhZGRlZCB0b1xuICAgICAgICAvLyBkaXN0aW5ndWlzaCBiZXR3ZWVuIGNsaWVudCByZXNldCBhbmQgaW5pdGlhbCBwaGFub3RtICdudWxsJyB2YWx1ZVxuICAgICAgICBpZiAoIWlzUHJlc2VudCh2YWx1ZSkgJiYgaXNQcmVzZW50KHRoaXMudmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFJdGVtID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWUgPT09IG51bGwgPyB1bmRlZmluZWQgOiB2YWx1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHJlZ2lzdGVyT25DaGFuZ2UoZm4pIHtcbiAgICAgICAgdGhpcy5vbkNoYW5nZUNhbGxiYWNrID0gZm47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICByZWdpc3Rlck9uVG91Y2hlZChmbikge1xuICAgICAgICB0aGlzLm9uVG91Y2hlZENhbGxiYWNrID0gZm47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzZXREaXNhYmxlZFN0YXRlKGlzRGlzYWJsZWQpIHtcbiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGlzRGlzYWJsZWQ7XG4gICAgICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgaGFuZGxlRmlsdGVySW5wdXRDaGFuZ2UodGVybSkge1xuICAgICAgICB0aGlzLmZpbHRlckNoYW5nZS5uZXh0KHRlcm0pO1xuICAgICAgICB0aGlzLmFsbE5vZGVzSGlkZGVuID0gdGhpcy5ub2Rlcy5ldmVyeSgobm9kZSwgaW5kZXgpID0+ICF0aGlzLmlzVmlzaWJsZShub2RlLCBTdHJpbmcoaW5kZXgpKSk7XG4gICAgfVxuICAgIHZlcmlmeVNldHRpbmdzKCkge1xuICAgICAgICBpZiAoIWlzRGV2TW9kZSgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudmFsdWVQcmltaXRpdmUgPT09IHRydWUgJiYgaXNQcmVzZW50KHRoaXMudmFsdWUpICYmIHR5cGVvZiB0aGlzLnZhbHVlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoRHJvcERvd25UcmVlTWVzc2FnZXMucHJpbWl0aXZlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy52YWx1ZVByaW1pdGl2ZSA9PT0gdHJ1ZSAmJiBpc1ByZXNlbnQodGhpcy52YWx1ZSkgJiYgdHlwZW9mIHRoaXMuZGF0YUl0ZW0gIT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihEcm9wRG93blRyZWVNZXNzYWdlcy5kYXRhSXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudmFsdWVQcmltaXRpdmUgPT09IGZhbHNlICYmIGlzUHJlc2VudCh0aGlzLnZhbHVlKSAmJiB0eXBlb2YgdGhpcy52YWx1ZSAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKERyb3BEb3duVHJlZU1lc3NhZ2VzLm9iamVjdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc1ByZXNlbnQodGhpcy52YWx1ZUZpZWxkKSB8fCAhaXNQcmVzZW50KHRoaXMudGV4dEZpZWxkKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKERyb3BEb3duVHJlZU1lc3NhZ2VzLnRleHRBbmRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChpc0FycmF5KHRoaXMudmFsdWVGaWVsZCkgfHwgaXNBcnJheSh0aGlzLnRleHRGaWVsZCkpICYmIGlzUHJlc2VudCh0aGlzLnZhbHVlKSAmJiAhaXNQcmVzZW50KHRoaXMudmFsdWVEZXB0aCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihEcm9wRG93blRyZWVNZXNzYWdlcy52YWx1ZURlcHRoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbWl0VmFsdWVDaGFuZ2UodmFsdWUpIHtcbiAgICAgICAgdGhpcy5vbkNoYW5nZUNhbGxiYWNrKHZhbHVlKTtcbiAgICAgICAgdGhpcy52YWx1ZUNoYW5nZS5lbWl0KHZhbHVlKTtcbiAgICB9XG4gICAgZ2V0VGV4dCh0ZXh0RmllbGQsIGRhdGFJdGVtKSB7XG4gICAgICAgIGlmIChpc1ByZXNlbnQoZGF0YUl0ZW0pICYmIGlzUHJlc2VudCh0ZXh0RmllbGQpKSB7XG4gICAgICAgICAgICBjb25zdCBmaWVsZCA9IHRoaXMuZ2V0RmllbGQodGV4dEZpZWxkLCBkYXRhSXRlbSk7XG4gICAgICAgICAgICByZXR1cm4gZ2V0dGVyKGZpZWxkKShkYXRhSXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKlxuICAgICAqIERldGVybWluZXMgdGhlIGB2YWx1ZUZpZWxkYCBhbmQgYHRleHRGaWVsZGAgZm9yIGEgc3BlY2lmaWMgbGV2ZWwgaW4gdGhlIGRhdGEgc2V0XG4gICAgICogIEBwYXJhbSBmaWVsZCAtIHRoZSBmaWVsZCB2YWx1ZSAoc3RyaW5nIHwgc3RyaW5nW10pXG4gICAgICogIEBwYXJhbSB2YWx1ZSAtIGN1cnJlbnQgdmFsdWVcbiAgICAgKi9cbiAgICBnZXRGaWVsZChmaWVsZCwgdmFsdWUpIHtcbiAgICAgICAgY29uc3QgZmllbGRzQ291bnQgPSBmaWVsZC5sZW5ndGggLSAxO1xuICAgICAgICBpZiAodHlwZW9mIGZpZWxkID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgLy8gSWYgdGhlIGB2YWx1ZUZpZWxkYCB8IGB0ZXh0RmllbGRgIGlzIHRoZSBzYW1lIGZvciBhbGwgbGV2ZWxzXG4gICAgICAgICAgICByZXR1cm4gZmllbGQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNQcmVzZW50KHRoaXMudmFsdWVEZXB0aCkpIHtcbiAgICAgICAgICAgIC8vIFdoZW4gYHZhbHVlRGVwdGhgIGNhbiBiZSBkZWZpbmVkIGZyb20gdGhlIGluZGV4IG9uIHNlbGVjdGlvbkNoYW5nZSBvciBwcm92aWRlZCBieSB0aGUgdXNlclxuICAgICAgICAgICAgcmV0dXJuIGZpZWxkc0NvdW50IDwgdGhpcy52YWx1ZURlcHRoID8gZmllbGRbZmllbGRzQ291bnRdIDogZmllbGRbdGhpcy52YWx1ZURlcHRoXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIEZhbGxiYWNrOiBMb29rIHRvIGZpbmQgYSBtYXRjaCBvZiBlYWNoIGZpZWxkIGluIHRoZSBjdXJyZW50IGRhdGEgaXRlbVxuICAgICAgICAgICAgLy8gU2lkZSBlZmZlY3QgbWF5IG9jY3VyIGlmIGFsbCBvZiB0aGUgbGlzdGVkIGZpZWxkcyBhcmUgcHJlc2VudCBpbiB0aGUgZGF0YSBpdGVtXG4gICAgICAgICAgICByZXR1cm4gZmllbGQuZmluZChpdGVtID0+IGl0ZW0gaW4gdmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRyaWdnZXJQb3B1cEV2ZW50cyhvcGVuKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50QXJncyA9IG5ldyBQcmV2ZW50YWJsZUV2ZW50KCk7XG4gICAgICAgIGlmIChvcGVuKSB7XG4gICAgICAgICAgICB0aGlzLm9wZW4uZW1pdChldmVudEFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jbG9zZS5lbWl0KGV2ZW50QXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV2ZW50QXJncy5pc0RlZmF1bHRQcmV2ZW50ZWQoKTtcbiAgICB9XG4gICAgY3JlYXRlUG9wdXAoKSB7XG4gICAgICAgIGNvbnN0IGhvcml6b250YWxBbGlnbiA9IHRoaXMuZGlyZWN0aW9uID09PSBcInJ0bFwiID8gXCJyaWdodFwiIDogXCJsZWZ0XCI7XG4gICAgICAgIGNvbnN0IGFuY2hvclBvc2l0aW9uID0geyBob3Jpem9udGFsOiBob3Jpem9udGFsQWxpZ24sIHZlcnRpY2FsOiAnYm90dG9tJyB9O1xuICAgICAgICBjb25zdCBwb3B1cFBvc2l0aW9uID0geyBob3Jpem9udGFsOiBob3Jpem9udGFsQWxpZ24sIHZlcnRpY2FsOiAndG9wJyB9O1xuICAgICAgICB0aGlzLnBvcHVwUmVmID0gdGhpcy5wb3B1cFNlcnZpY2Uub3Blbih7XG4gICAgICAgICAgICBhbmNob3I6IHRoaXMud3JhcHBlcixcbiAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmFwcGVuZFRvLFxuICAgICAgICAgICAgYW5jaG9yQWxpZ246IGFuY2hvclBvc2l0aW9uLFxuICAgICAgICAgICAgY29udGVudDogdGhpcy5wb3B1cFRlbXBsYXRlLFxuICAgICAgICAgICAgcG9wdXBBbGlnbjogcG9wdXBQb3NpdGlvbixcbiAgICAgICAgICAgIHBvc2l0aW9uTW9kZTogJ2Fic29sdXRlJyxcbiAgICAgICAgICAgIHBvcHVwQ2xhc3M6IHRoaXMucG9wdXBDb250YWluZXJDbGFzc2VzXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBwb3B1cFdyYXBwZXIgPSB0aGlzLnBvcHVwUmVmLnBvcHVwRWxlbWVudDtcbiAgICAgICAgY29uc3QgeyBtaW4sIG1heCB9ID0gdGhpcy53aWR0aDtcbiAgICAgICAgcG9wdXBXcmFwcGVyLnN0eWxlLm1pbldpZHRoID0gbWluO1xuICAgICAgICBwb3B1cFdyYXBwZXIuc3R5bGUud2lkdGggPSBtYXg7XG4gICAgICAgIHBvcHVwV3JhcHBlci5zdHlsZS5oZWlnaHQgPSB0aGlzLmhlaWdodDtcbiAgICAgICAgcG9wdXBXcmFwcGVyLnNldEF0dHJpYnV0ZShcImRpclwiLCB0aGlzLmRpcmVjdGlvbik7XG4gICAgICAgIHRoaXMucG9wdXBSZWYucG9wdXBPcGVuLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICAgICAgICB0aGlzLm9wZW5lZC5lbWl0KCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnBvcHVwUmVmLnBvcHVwQ2xvc2Uuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VkLmVtaXQoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRlc3Ryb3lQb3B1cCgpIHtcbiAgICAgICAgaWYgKHRoaXMucG9wdXBSZWYpIHtcbiAgICAgICAgICAgIHRoaXMucG9wdXBSZWYuY2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMucG9wdXBSZWYgPSBudWxsO1xuICAgICAgICAgICAgaWYgKHRoaXMuZmlsdGVyICE9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXIgPSBcIlwiO1xuICAgICAgICAgICAgICAgIHRoaXMuYWxsTm9kZXNIaWRkZW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAoaGFzT2JzZXJ2ZXJzKHRoaXMuZmlsdGVyQ2hhbmdlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl96b25lLnJ1bigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlckNoYW5nZS5lbWl0KFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlRXNjYXBlKCkge1xuICAgICAgICB0aGlzLnRvZ2dsZVBvcHVwKGZhbHNlKTtcbiAgICAgICAgdGhpcy5mb2N1cygpO1xuICAgIH1cbiAgICBzZXRTdGF0ZSgpIHtcbiAgICAgICAgaWYgKGlzUHJlc2VudCh0aGlzLnZhbHVlKSAmJiBpc1ByZXNlbnQodGhpcy5kYXRhSXRlbSkgJiYgaXNQcmVzZW50KHRoaXMudmFsdWVGaWVsZCkpIHtcbiAgICAgICAgICAgIHRoaXMudGV4dCA9IHRoaXMuZ2V0VGV4dCh0aGlzLnRleHRGaWVsZCwgdGhpcy5kYXRhSXRlbSk7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZUZpZWxkID0gdGhpcy5nZXRGaWVsZCh0aGlzLnZhbHVlRmllbGQsIHRoaXMuZGF0YUl0ZW0pO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RCeSA9IHZhbHVlRmllbGQ7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkS2V5cyA9IFtnZXR0ZXIodmFsdWVGaWVsZCkodGhpcy5kYXRhSXRlbSldO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jbGVhclN0YXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XG4gICAgfVxuICAgIGNsZWFyU3RhdGUoKSB7XG4gICAgICAgIHRoaXMudGV4dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy52YWx1ZURlcHRoID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnNlbGVjdGVkS2V5cyA9IFtdO1xuICAgIH1cbiAgICBzdWJzY3JpYmVFdmVudHMoKSB7XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKHRoaXMubmF2aWdhdGlvblNlcnZpY2Uub3Blbi5zdWJzY3JpYmUoKCkgPT4gdGhpcy50b2dnbGVQb3B1cCh0cnVlKSksIHRoaXMubmF2aWdhdGlvblNlcnZpY2UuY2xvc2Uuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlUG9wdXAoZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgICB9KSwgdGhpcy5uYXZpZ2F0aW9uU2VydmljZS5lbnRlclxuICAgICAgICAgICAgLnBpcGUodGFwKChldmVudCkgPT4gZXZlbnQub3JpZ2luYWxFdmVudC5wcmV2ZW50RGVmYXVsdCgpKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKCkgPT4gdGhpcy50b2dnbGVQb3B1cCh0cnVlKSksIHRoaXMubmF2aWdhdGlvblNlcnZpY2UuZXNjXG4gICAgICAgICAgICAuc3Vic2NyaWJlKCgpID0+IHRoaXMuaGFuZGxlRXNjYXBlKCkpLCB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLnRhYi5zdWJzY3JpYmUoKCkgPT4gdGhpcy5mb2N1cygpKSwgdGhpcy5uYXZpZ2F0aW9uU2VydmljZS5kb3duLnN1YnNjcmliZSgoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy50cmVldmlldykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGV2ZW50Lm9yaWdpbmFsRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGlmICghdGhpcy50cmVldmlldy5pc0FjdGl2ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJlZXZpZXcuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksIHRoaXMubmF2aWdhdGlvblNlcnZpY2UudXAuc3Vic2NyaWJlKChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnRyZWV2aWV3KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXZlbnQub3JpZ2luYWxFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZmlsdGVyYWJsZSAmJiB0aGlzLnRyZWV2aWV3WyduYXZpZ2F0aW9uU2VydmljZSddWydhY3RpdmVJbmRleCddID09PSAnMCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlcklucHV0Lm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzdWJzY3JpYmVUb3VjaEV2ZW50cygpIHtcbiAgICAgICAgaWYgKCFpc0RvY3VtZW50QXZhaWxhYmxlKCkgfHwgIXRoaXMudG91Y2hFbmFibGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiBcbiAgICAgICAgLy8gUm9sbCB1cCBEcm9wRG93blRyZWUgb24gaU9TIHdoZW4gdGFwcGVkIG91dHNpZGVcbiAgICAgICAgdGhpcy50b3VjaHN0YXJ0RGlzcG9zZUhhbmRsZXIgPSB0aGlzLnJlbmRlcmVyLmxpc3Rlbihkb2N1bWVudCwgJ3RvdWNoc3RhcnQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0ZvY3VzZWQgJiYgIWluRHJvcERvd24odGhpcy5ob3N0RWxlbWVudCwgdGFyZ2V0LCB0aGlzLnBvcHVwUmVmKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3pvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyZWV2aWV3LmJsdXIoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJsdXIoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB1bnN1YnNjcmliZUV2ZW50cygpIHtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmZvckVhY2goc3ViID0+IHN1Yi51bnN1YnNjcmliZSgpKTtcbiAgICAgICAgaWYgKHRoaXMudG91Y2hzdGFydERpc3Bvc2VIYW5kbGVyKSB7XG4gICAgICAgICAgICB0aGlzLnRvdWNoc3RhcnREaXNwb3NlSGFuZGxlcigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzc2lnbkFyaWFEZXNjcmliZWRCeSgpIHtcbiAgICAgICAgY29uc3QgY3VycmVudFZhbHVlID0gdGhpcy53cmFwcGVyLm5hdGl2ZUVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhcmlhLWRlc2NyaWJlZGJ5JykgfHwgJyc7XG4gICAgICAgIC8vIGFkZCB0byB0aGUgY3VycmVudCB2YWx1ZSAtIGRvbid0IHJlcGxhY2UgaXQgKHRoZSBhcmlhLWRlc2NyaWJlZGJ5IGlzIHVzZWQgYnkgdGhlIEZvcm1GaWVsZCBjb21wb25lbnQgYXMgd2VsbClcbiAgICAgICAgY29uc3QgbmV3VmFsdWUgPSBgJHt0aGlzLnZhbHVlTGFiZWxJZH0gJHtjdXJyZW50VmFsdWUudHJpbSgpfWAudHJpbSgpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldEF0dHJpYnV0ZSh0aGlzLndyYXBwZXIubmF0aXZlRWxlbWVudCwgJ2FyaWEtZGVzY3JpYmVkYnknLCBuZXdWYWx1ZSk7XG4gICAgfVxufTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLXdpZGdldCcpLFxuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLWRyb3Bkb3dudHJlZScpLFxuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLWRyb3Bkb3dudHJlZS1jbGVhcmFibGUnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIERyb3BEb3duVHJlZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiaG9zdENsYXNzZXNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdhdHRyLmRpcicpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBEcm9wRG93blRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcImRpcmVjdGlvblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmstZHJvcGRvd250cmVlLWNsZWFyYWJsZScpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBEcm9wRG93blRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcImNsZWFyYWJsZVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIENvbnRlbnRDaGlsZChOb0RhdGFUZW1wbGF0ZURpcmVjdGl2ZSwgeyBzdGF0aWM6IGZhbHNlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOb0RhdGFUZW1wbGF0ZURpcmVjdGl2ZSlcbl0sIERyb3BEb3duVHJlZUNvbXBvbmVudC5wcm90b3R5cGUsIFwibm9EYXRhVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIENvbnRlbnRDaGlsZChIZWFkZXJUZW1wbGF0ZURpcmVjdGl2ZSwgeyBzdGF0aWM6IGZhbHNlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBIZWFkZXJUZW1wbGF0ZURpcmVjdGl2ZSlcbl0sIERyb3BEb3duVHJlZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiaGVhZGVyVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIENvbnRlbnRDaGlsZChGb290ZXJUZW1wbGF0ZURpcmVjdGl2ZSwgeyBzdGF0aWM6IGZhbHNlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBGb290ZXJUZW1wbGF0ZURpcmVjdGl2ZSlcbl0sIERyb3BEb3duVHJlZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiZm9vdGVyVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIENvbnRlbnRDaGlsZChOb2RlVGVtcGxhdGVEaXJlY3RpdmUsIHsgc3RhdGljOiBmYWxzZSB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTm9kZVRlbXBsYXRlRGlyZWN0aXZlKVxuXSwgRHJvcERvd25UcmVlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJub2RlVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIENvbnRlbnRDaGlsZChWYWx1ZVRlbXBsYXRlRGlyZWN0aXZlLCB7IHN0YXRpYzogZmFsc2UgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFZhbHVlVGVtcGxhdGVEaXJlY3RpdmUpXG5dLCBEcm9wRG93blRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcInZhbHVlVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIFZpZXdDaGlsZCgncG9wdXBUZW1wbGF0ZScsIHsgc3RhdGljOiB0cnVlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBUZW1wbGF0ZVJlZilcbl0sIERyb3BEb3duVHJlZUNvbXBvbmVudC5wcm90b3R5cGUsIFwicG9wdXBUZW1wbGF0ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgVmlld0NoaWxkKCd3cmFwcGVyJywgeyBzdGF0aWM6IHRydWUgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEVsZW1lbnRSZWYpXG5dLCBEcm9wRG93blRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcIndyYXBwZXJcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIFZpZXdDaGlsZCgnY29udGFpbmVyJywgeyByZWFkOiBWaWV3Q29udGFpbmVyUmVmLCBzdGF0aWM6IHRydWUgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFZpZXdDb250YWluZXJSZWYpXG5dLCBEcm9wRG93blRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcImNvbnRhaW5lclwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgVmlld0NoaWxkKCd0cmVldmlldycsIHsgc3RhdGljOiBmYWxzZSB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgVHJlZVZpZXdDb21wb25lbnQpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbVHJlZVZpZXdDb21wb25lbnRdKVxuXSwgRHJvcERvd25UcmVlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0cmVldmlld1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIFZpZXdDaGlsZCgnZmlsdGVySW5wdXQnLCB7IHN0YXRpYzogZmFsc2UgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEVsZW1lbnRSZWYpXG5dLCBEcm9wRG93blRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcImZpbHRlcklucHV0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgRHJvcERvd25UcmVlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJvcGVuXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgRHJvcERvd25UcmVlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJvcGVuZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBEcm9wRG93blRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcImNsb3NlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgRHJvcERvd25UcmVlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJjbG9zZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBEcm9wRG93blRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcIm5vZGVFeHBhbmRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBEcm9wRG93blRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcIm5vZGVDb2xsYXBzZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCdmb2N1cycpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBEcm9wRG93blRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcIm9uRm9jdXNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgnYmx1cicpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBEcm9wRG93blRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcIm9uQmx1clwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIERyb3BEb3duVHJlZUNvbXBvbmVudC5wcm90b3R5cGUsIFwidmFsdWVDaGFuZ2VcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBEcm9wRG93blRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcImZpbHRlckNoYW5nZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIERyb3BEb3duVHJlZUNvbXBvbmVudC5wcm90b3R5cGUsIFwibG9hZGluZ1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIERyb3BEb3duVHJlZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiY2xlYXJCdXR0b25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEFycmF5KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0FycmF5XSlcbl0sIERyb3BEb3duVHJlZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiZGF0YVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKVxuXSwgRHJvcERvd25UcmVlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbl0sIERyb3BEb3duVHJlZUNvbXBvbmVudC5wcm90b3R5cGUsIFwidGV4dEZpZWxkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG5dLCBEcm9wRG93blRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcInZhbHVlRmllbGRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlcilcbl0sIERyb3BEb3duVHJlZUNvbXBvbmVudC5wcm90b3R5cGUsIFwidmFsdWVEZXB0aFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pXG5dLCBEcm9wRG93blRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcImhhc0NoaWxkcmVuXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBGdW5jdGlvbilcbl0sIERyb3BEb3duVHJlZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiZmV0Y2hDaGlsZHJlblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgRHJvcERvd25UcmVlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJwbGFjZWhvbGRlclwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pXG5dLCBEcm9wRG93blRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcInBvcHVwU2V0dGluZ3NcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSlcbl0sIERyb3BEb3duVHJlZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiZGF0YUl0ZW1cIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOdW1iZXIpXG5dLCBEcm9wRG93blRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcImxpc3RIZWlnaHRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBEcm9wRG93blRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcImRpc2FibGVkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgRHJvcERvd25UcmVlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJyZWFkb25seVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIERyb3BEb3duVHJlZUNvbXBvbmVudC5wcm90b3R5cGUsIFwidmFsdWVQcmltaXRpdmVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlciksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtOdW1iZXJdKVxuXSwgRHJvcERvd25UcmVlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0YWJpbmRleFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZ1bmN0aW9uKVxuXSwgRHJvcERvd25UcmVlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpdGVtRGlzYWJsZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZ1bmN0aW9uKVxuXSwgRHJvcERvd25UcmVlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpc05vZGVFeHBhbmRlZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pXG5dLCBEcm9wRG93blRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcImlzTm9kZVZpc2libGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBEcm9wRG93blRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcImxvYWRPbkRlbWFuZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIERyb3BEb3duVHJlZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiZmlsdGVyYWJsZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgRHJvcERvd25UcmVlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJmaWx0ZXJcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIERyb3BEb3duVHJlZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiZm9jdXNhYmxlSWRcIiwgdm9pZCAwKTtcbkRyb3BEb3duVHJlZUNvbXBvbmVudCA9IERyb3BEb3duVHJlZUNvbXBvbmVudF8xID0gX19kZWNvcmF0ZShbXG4gICAgQ29tcG9uZW50KHtcbiAgICAgICAgZXhwb3J0QXM6ICdrZW5kb0Ryb3BEb3duVHJlZScsXG4gICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgRGF0YVNlcnZpY2UsXG4gICAgICAgICAgICBTZWxlY3Rpb25TZXJ2aWNlLFxuICAgICAgICAgICAgTmF2aWdhdGlvblNlcnZpY2UsXG4gICAgICAgICAgICBEaXNhYmxlZEl0ZW1zU2VydmljZSxcbiAgICAgICAgICAgIExvY2FsaXphdGlvblNlcnZpY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZTogTDEwTl9QUkVGSVgsXG4gICAgICAgICAgICAgICAgdXNlVmFsdWU6ICdrZW5kby5kcm9wZG93bnRyZWUnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG11bHRpOiB0cnVlLFxuICAgICAgICAgICAgICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxuICAgICAgICAgICAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IERyb3BEb3duVHJlZUNvbXBvbmVudF8xKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwcm92aWRlOiBLZW5kb0lucHV0LFxuICAgICAgICAgICAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IERyb3BEb3duVHJlZUNvbXBvbmVudF8xKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwcm92aWRlOiBEYXRhQm91bmRDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gRHJvcERvd25UcmVlQ29tcG9uZW50XzEpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHByb3ZpZGU6IEV4cGFuZGFibGVDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gRHJvcERvd25UcmVlQ29tcG9uZW50XzEpXG4gICAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIHNlbGVjdG9yOiAna2VuZG8tZHJvcGRvd250cmVlJyxcbiAgICAgICAgdGVtcGxhdGU6IGBcbiAgICAgICAgPG5nLWNvbnRhaW5lciBrZW5kb0Ryb3BEb3duVHJlZUxvY2FsaXplZE1lc3NhZ2VzXG4gICAgICAgICAgICBpMThuLW5vRGF0YVRleHQ9XCJrZW5kby5kcm9wZG93bnRyZWUubm9EYXRhVGV4dHxUaGUgdGV4dCBkaXNwbGF5ZWQgaW4gdGhlIHBvcHVwIHdoZW4gdGhlcmUgYXJlIG5vIGl0ZW1zXCJcbiAgICAgICAgICAgIG5vRGF0YVRleHQ9XCJOTyBEQVRBIEZPVU5EXCJcblxuICAgICAgICAgICAgaTE4bi1jbGVhclRpdGxlPVwia2VuZG8uZHJvcGRvd250cmVlLmNsZWFyVGl0bGV8VGhlIHRpdGxlIG9mIHRoZSBjbGVhciBidXR0b25cIlxuICAgICAgICAgICAgY2xlYXJUaXRsZT1cImNsZWFyXCJcbiAgICAgICAgPlxuICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICN3cmFwcGVyXG4gICAgICAgICAgICBbbmdDbGFzc109XCJ7XG4gICAgICAgICAgICAgICAgJ2stZHJvcGRvd24td3JhcCc6IHRydWUsXG4gICAgICAgICAgICAgICAgJ2stc3RhdGUtZGlzYWJsZWQnOiB0aGlzLmRpc2FibGVkXG4gICAgICAgICAgICB9XCJcbiAgICAgICAgICAgIFthdHRyLmlkXT1cImZvY3VzYWJsZUlkXCJcbiAgICAgICAgICAgIHJvbGU9XCJsaXN0Ym94XCJcbiAgICAgICAgICAgIGFyaWEtaGFzcG9wdXA9XCJ0cmVlXCJcbiAgICAgICAgICAgIFthdHRyLmFyaWEtZXhwYW5kZWRdPVwiaXNPcGVuXCJcbiAgICAgICAgICAgIFthdHRyLmFyaWEtcmVhZG9ubHldPVwicmVhZG9ubHlcIlxuICAgICAgICAgICAgW2F0dHIudGFiaW5kZXhdPVwidGFiaW5kZXhcIlxuICAgICAgICAgICAgW2F0dHIuZGlyXT1cImRpcmVjdGlvblwiXG4gICAgICAgICAgICAoY2xpY2spPVwiaGFuZGxlQ2xpY2soKVwiXG4gICAgICAgICAgICAoa2V5ZG93bik9XCJoYW5kbGVLZXlkb3duKCRldmVudClcIlxuICAgICAgICAgICAgW2tlbmRvRXZlbnRzT3V0c2lkZUFuZ3VsYXJdPVwie1xuICAgICAgICAgICAgICAgIGZvY3VzOiBoYW5kbGVGb2N1cyxcbiAgICAgICAgICAgICAgICBibHVyOiBoYW5kbGVCbHVyXG4gICAgICAgICAgICB9XCJcbiAgICAgICAgICAgIFtzY29wZV09XCJ0aGlzXCJcbiAgICAgICAgPlxuICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICBbYXR0ci5pZF09XCJ2YWx1ZUxhYmVsSWRcIlxuICAgICAgICAgICAgICAgIGNsYXNzPVwiay1pbnB1dFwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlICpuZ0lmPVwidmFsdWVUZW1wbGF0ZVwiXG4gICAgICAgICAgICAgICAgICAgIFt0ZW1wbGF0ZUNvbnRleHRdPVwie1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVSZWY6IHZhbHVlVGVtcGxhdGUudGVtcGxhdGVSZWYsXG4gICAgICAgICAgICAgICAgICAgICAgICAkaW1wbGljaXQ6IGRhdGFJdGVtXG4gICAgICAgICAgICAgICAgICAgIH1cIj5cbiAgICAgICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdJZl09XCIhdmFsdWVUZW1wbGF0ZVwiPiB7eyB0ZXh0IHx8IHBsYWNlaG9sZGVyIH19IDwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICpuZ0lmPVwiIWxvYWRpbmcgJiYgIXJlYWRvbmx5ICYmIGNsZWFyQnV0dG9uICYmIHRleHQ/Lmxlbmd0aFwiXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJrLWljb24gay1jbGVhci12YWx1ZSBrLWktY2xvc2VcIlxuICAgICAgICAgICAgICAgIFtzdHlsZS52aXNpYmlsaXR5XT1cImNsZWFyQnV0dG9uVmlzaWJsaXR5XCJcbiAgICAgICAgICAgICAgICBhcmlhLWhpZGRlbj1cInRydWVcIlxuICAgICAgICAgICAgICAgIFthdHRyLnRpdGxlXT1cIm1lc3NhZ2VGb3IoJ2NsZWFyVGl0bGUnKVwiXG4gICAgICAgICAgICAgICAgKGNsaWNrKT1cImNsZWFyVmFsdWUoJGV2ZW50KVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImstc2VsZWN0XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWFycm93LTYwLWRvd25cIj48L3NwYW4+XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgICAgPG5nLXRlbXBsYXRlICNwb3B1cFRlbXBsYXRlPlxuICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICAqbmdJZj1cImZpbHRlcmFibGVcIlxuICAgICAgICAgICAgICAgIGNsYXNzPVwiay1saXN0LWZpbHRlclwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICNmaWx0ZXJJbnB1dFxuICAgICAgICAgICAgICAgICAgICAoaW5wdXQpPVwiaGFuZGxlRmlsdGVySW5wdXRDaGFuZ2UoJGV2ZW50LnRhcmdldC52YWx1ZSlcIlxuICAgICAgICAgICAgICAgICAgICBbZmlsdGVySW5wdXRdPVwiZmlsdGVyYWJsZSAmJiAhdG91Y2hFbmFibGVkXCJcbiAgICAgICAgICAgICAgICAgICAgKGtleWRvd24uYXJyb3dkb3duKT1cImhhbmRsZUtleWRvd24oJGV2ZW50KVwiXG4gICAgICAgICAgICAgICAgICAgIChrZXlkb3duLmFsdC5hcnJvd3VwKT1cImhhbmRsZUtleWRvd24oJGV2ZW50KVwiXG4gICAgICAgICAgICAgICAgICAgIFsobmdNb2RlbCldPVwiZmlsdGVyXCJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJrLXRleHRib3hcIlxuICAgICAgICAgICAgICAgICAgICByb2xlPVwidGV4dGJveFwiXG4gICAgICAgICAgICAgICAgICAgIGFyaWEtaGFzcG9wdXA9XCJ0cnVlXCJcbiAgICAgICAgICAgICAgICAgICAgYXJpYS1leHBhbmRlZD1cImZhbHNlXCJcbiAgICAgICAgICAgICAgICAgICAgdGFiaW5kZXg9XCIwXCJcbiAgICAgICAgICAgICAgICAgICAgYXJpYS1kaXNhYmxlZD1cImZhbHNlXCJcbiAgICAgICAgICAgICAgICAgICAgYXJpYS1yZWFkb25seT1cImZhbHNlXCJcbiAgICAgICAgICAgICAgICAgICAgW2tlbmRvRXZlbnRzT3V0c2lkZUFuZ3VsYXJdPVwie1xuICAgICAgICAgICAgICAgICAgICAgICAgYmx1cjogaGFuZGxlQmx1clxuICAgICAgICAgICAgICAgICAgICB9XCJcbiAgICAgICAgICAgICAgICAgICAgW3Njb3BlXT1cInRoaXNcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktem9vbVwiPjwvc3Bhbj5cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDwhLS1oZWFkZXIgdGVtcGxhdGUtLT5cbiAgICAgICAgICAgIDxuZy10ZW1wbGF0ZVxuICAgICAgICAgICAgICAgICpuZ0lmPVwiaGVhZGVyVGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgIFt0ZW1wbGF0ZUNvbnRleHRdPVwie1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVJlZjogaGVhZGVyVGVtcGxhdGU/LnRlbXBsYXRlUmVmXG4gICAgICAgICAgICAgICAgfVwiPlxuICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgIDxrZW5kby10cmVldmlld1xuICAgICAgICAgICAgICAgICN0cmVldmlld1xuICAgICAgICAgICAgICAgICpuZ0lmPVwiZGF0YS5sZW5ndGggIT09IDAgJiYgIWFsbE5vZGVzSGlkZGVuXCJcbiAgICAgICAgICAgICAgICBbbm9kZXNdPVwiZGF0YVwiXG4gICAgICAgICAgICAgICAgW3N0eWxlLm1heEhlaWdodC5weF09XCJsaXN0SGVpZ2h0XCJcbiAgICAgICAgICAgICAgICBbYW5pbWF0ZV09XCJmYWxzZVwiXG4gICAgICAgICAgICAgICAgWyhzZWxlY3RlZEtleXMpXT1cInNlbGVjdGVkS2V5c1wiXG4gICAgICAgICAgICAgICAgW3NlbGVjdEJ5XT1cInNlbGVjdEJ5XCJcbiAgICAgICAgICAgICAgICBbdGV4dEZpZWxkXT1cInRleHRGaWVsZFwiXG4gICAgICAgICAgICAgICAga2VuZG9UcmVlVmlld1NlbGVjdGFibGVcbiAgICAgICAgICAgICAgICBbY2hpbGRyZW5dPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgIFtoYXNDaGlsZHJlbl09XCJoYXNDaGlsZHJlblwiXG4gICAgICAgICAgICAgICAgW2xvYWRPbkRlbWFuZF09XCJsb2FkT25EZW1hbmRcIlxuICAgICAgICAgICAgICAgIFtpc0V4cGFuZGVkXT1cImlzTm9kZUV4cGFuZGVkXCJcbiAgICAgICAgICAgICAgICBbaXNEaXNhYmxlZF09XCJpdGVtRGlzYWJsZWRcIlxuICAgICAgICAgICAgICAgIFtub2RlVGVtcGxhdGVdPVwibm9kZVRlbXBsYXRlXCJcbiAgICAgICAgICAgICAgICBbZmlsdGVyXT1cImZpbHRlclwiXG4gICAgICAgICAgICAgICAgW2lzVmlzaWJsZV09XCJpc05vZGVWaXNpYmxlXCJcbiAgICAgICAgICAgICAgICAoZm9jdXNvdXQpPVwiaGFuZGxlQmx1cigkZXZlbnQpXCJcbiAgICAgICAgICAgICAgICAoa2V5ZG93bik9XCJoYW5kbGVLZXlkb3duKCRldmVudClcIlxuICAgICAgICAgICAgICAgIChzZWxlY3Rpb25DaGFuZ2UpPVwib25TZWxlY3Rpb25DaGFuZ2UoJGV2ZW50KVwiXG4gICAgICAgICAgICAgICAgKGV4cGFuZCk9XCJub2RlRXhwYW5kLmVtaXQoJGV2ZW50KVwiXG4gICAgICAgICAgICAgICAgKGNvbGxhcHNlKT1cIm5vZGVDb2xsYXBzZS5lbWl0KCRldmVudClcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgPC9rZW5kby10cmVldmlldz5cbiAgICAgICAgICAgIDwhLS1mb290ZXIgdGVtcGxhdGUtLT5cbiAgICAgICAgICAgIDxuZy10ZW1wbGF0ZVxuICAgICAgICAgICAgICAgICpuZ0lmPVwiZm9vdGVyVGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgIFt0ZW1wbGF0ZUNvbnRleHRdPVwie1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVJlZjogZm9vdGVyVGVtcGxhdGU/LnRlbXBsYXRlUmVmXG4gICAgICAgICAgICAgICAgfVwiPlxuICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgIDwhLS1uby1kYXRhIHRlbXBsYXRlLS0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiay1ub2RhdGFcIiAqbmdJZj1cImRhdGEubGVuZ3RoID09PSAwIHx8IGFsbE5vZGVzSGlkZGVuXCI+XG4gICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlIFtuZ0lmXT1cIm5vRGF0YVRlbXBsYXRlXCJcbiAgICAgICAgICAgICAgICAgICAgW3RlbXBsYXRlQ29udGV4dF09XCJ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVJlZjogbm9EYXRhVGVtcGxhdGU/LnRlbXBsYXRlUmVmXG4gICAgICAgICAgICAgICAgICAgIH1cIj5cbiAgICAgICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdJZl09XCIhbm9EYXRhVGVtcGxhdGVcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdj57eyBtZXNzYWdlRm9yKCdub0RhdGFUZXh0JykgfX08L2Rpdj5cbiAgICAgICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgIDxuZy1jb250YWluZXIgI2NvbnRhaW5lcj48L25nLWNvbnRhaW5lcj5cbiAgICBgLFxuICAgICAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxuICAgIH0pLFxuICAgIF9fcGFyYW0oNywgT3B0aW9uYWwoKSksIF9fcGFyYW0oNywgSW5qZWN0KFRPVUNIX0VOQUJMRUQpKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW1BvcHVwU2VydmljZSxcbiAgICAgICAgTmF2aWdhdGlvblNlcnZpY2UsXG4gICAgICAgIFJlbmRlcmVyMixcbiAgICAgICAgRWxlbWVudFJlZixcbiAgICAgICAgTmdab25lLFxuICAgICAgICBDaGFuZ2VEZXRlY3RvclJlZixcbiAgICAgICAgTG9jYWxpemF0aW9uU2VydmljZSwgQm9vbGVhbl0pXG5dLCBEcm9wRG93blRyZWVDb21wb25lbnQpO1xuXG52YXIgTXVsdGlTZWxlY3RUcmVlQ29tcG9uZW50XzE7XG4vKiB0c2xpbnQ6ZGlzYWJsZTptZW1iZXItb3JkZXJpbmcgKi9cbmNvbnN0IERFRkFVTFRfUE9QVVBfU0VUVElOR1MkMSA9IHsgYW5pbWF0ZTogdHJ1ZSB9O1xuY29uc3QgREVGQVVMVF9DSEVDS0FCTEVfU0VUVElOR1MgPSB7IGNoZWNrQ2hpbGRyZW46IHRydWUsIGNoZWNrT25DbGljazogdHJ1ZSB9O1xuY29uc3QgaGFzQ2hpbGRyZW4kMSA9ICgpID0+IGZhbHNlO1xuY29uc3QgZmV0Y2hDaGlsZHJlbiQxID0gKCkgPT4gb2YoW10pO1xuY29uc3QgaXRlbURpc2FibGVkJDEgPSAoKSA9PiBmYWxzZTtcbmNvbnN0IGlzTm9kZVZpc2libGUkMSA9ICgpID0+IHRydWU7XG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIFtLZW5kbyBVSSBNdWx0aVNlbGVjdFRyZWUgY29tcG9uZW50IGZvciBBbmd1bGFyXSh7JSBzbHVnIG92ZXJ2aWV3X211bHRpc2VsZWN0dHJlZSAlfSkuXG4gKi9cbmxldCBNdWx0aVNlbGVjdFRyZWVDb21wb25lbnQgPSBNdWx0aVNlbGVjdFRyZWVDb21wb25lbnRfMSA9IGNsYXNzIE11bHRpU2VsZWN0VHJlZUNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZXJ2aWNlLCByZW5kZXJlciwgaG9zdEVsZW1lbnQsIG5hdmlnYXRpb25TZXJ2aWNlLCBfem9uZSwgbG9jYWxpemF0aW9uLCBjZHIsIHRvdWNoRW5hYmxlZCQkMSkge1xuICAgICAgICB0aGlzLnBvcHVwU2VydmljZSA9IHBvcHVwU2VydmljZTtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLmhvc3RFbGVtZW50ID0gaG9zdEVsZW1lbnQ7XG4gICAgICAgIHRoaXMubmF2aWdhdGlvblNlcnZpY2UgPSBuYXZpZ2F0aW9uU2VydmljZTtcbiAgICAgICAgdGhpcy5fem9uZSA9IF96b25lO1xuICAgICAgICB0aGlzLmxvY2FsaXphdGlvbiA9IGxvY2FsaXphdGlvbjtcbiAgICAgICAgdGhpcy5jZHIgPSBjZHI7XG4gICAgICAgIHRoaXMudG91Y2hFbmFibGVkID0gdG91Y2hFbmFibGVkJCQxO1xuICAgICAgICB0aGlzLmhvc3RDbGFzc2VzID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgdGhlIGxldmVscyBpbiB0aGUgZGF0YSBzZXQgd2hlcmUgdGhlIHZhbHVlcyBjYW4gYmUgZm91bmQgd2hlbiBgdmFsdWVGaWVsZGAgaXMgYW4gQXJyYXkuXG4gICAgICAgICAqIFRoZSBmaWVsZCBzZXJ2ZXMgdG8gY29ycmVjdGx5IGFsbG9jYXRlIGEgZGF0YSBpdGVtIHVzZWQgd2hlbiB0aGUgTXVsdGlTZWxlY3RUcmVlIGlzIGluaXRpYWxpemVkIHdpdGggYSB2YWx1ZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudmFsdWVEZXB0aCA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGhpbnQgd2hpY2ggaXMgZGlzcGxheWVkIHdoZW4gdGhlIGNvbXBvbmVudCBpcyBlbXB0eS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucGxhY2Vob2xkZXIgPSBcIlwiO1xuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyB0aGUgaGVpZ2h0IG9mIHRoZSBvcHRpb25zIGxpc3QuIEJ5IGRlZmF1bHQsIGBsaXN0SGVpZ2h0YCBpcyAyMDBweC5cbiAgICAgICAgICpcbiAgICAgICAgICogPiBUaGUgYGxpc3RIZWlnaHRgIHByb3BlcnR5IGFmZmVjdHMgb25seSB0aGUgbGlzdCBvZiBvcHRpb25zIGFuZCBub3QgdGhlIHdob2xlIHBvcHVwIGNvbnRhaW5lci5cbiAgICAgICAgICogPiBUbyBzZXQgdGhlIGhlaWdodCBvZiB0aGUgcG9wdXAgY29udGFpbmVyLCB1c2UgYHBvcHVwU2V0dGluZ3MuaGVpZ2h0YC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubGlzdEhlaWdodCA9IDIwMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgdGhlIGRpc2FibGVkIHN0YXRlIG9mIHRoZSBjb21wb25lbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIHRoZSByZWFkLW9ubHkgc3RhdGUgb2YgdGhlIGNvbXBvbmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmVhZG9ubHkgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyB0aGUgdHlwZSBvZiB0aGUgc2VsZWN0ZWQgdmFsdWVcbiAgICAgICAgICogKFttb3JlIGluZm9ybWF0aW9uIGFuZCBleGFtcGxlXSh7JSBzbHVnIHZhbHVlYmluZGluZ19tdWx0aXNlbGVjdHRyZWUgJX0jdG9jLXByaW1pdGl2ZS12YWx1ZXMpKS5cbiAgICAgICAgICogSWYgc2V0IHRvIGB0cnVlYCwgdGhlIHNlbGVjdGVkIHZhbHVlIGhhcyB0byBiZSBhIHByaW1pdGl2ZSBvbmUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnZhbHVlUHJpbWl0aXZlID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbmRpY2F0ZXMgd2hldGhlciB0aGUgY2hpbGQgbm9kZXMgd2lsbCBiZSBmZXRjaGVkIG9uIG5vZGUgZXhwYW5kIG9yIHdpbGwgYmUgaW5pdGlhbGx5IHByZWZldGNoZWQuXG4gICAgICAgICAqIEBkZWZhdWx0IGZhbHNlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmxvYWRPbkRlbWFuZCA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGhpZGRlblxuICAgICAgICAgKlxuICAgICAgICAgKiBVc2VkIGJ5IHRoZSBrZW5kby1sYWJlbCBhbmQga2VuZG8tZmxvYXRpbmdsYWJlbCB0byBhY2Nlc3MgYW5kIGFzc29jaWF0ZSB0aGUgZm9jdXNhYmxlIGVsZW1lbnQgd2l0aCB0aGUgcHJvdmlkZWQgbGFiZWwgdmlhIGFyaWEtbGFiZWxsZWRieS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZm9jdXNhYmxlSWQgPSBgay0ke2d1aWQoKX1gO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgc2V0IHRvIGB0cnVlYCwgcmVuZGVycyBhIGJ1dHRvbiBvbiBob3ZlcmluZyBvdmVyIHRoZSBjb21wb25lbnQuXG4gICAgICAgICAqIENsaWNraW5nIHRoaXMgYnV0dG9uIHJlc2V0cyB0aGUgdmFsdWUgb2YgdGhlIGNvbXBvbmVudCB0byBgdW5kZWZpbmVkYCBhbmQgdHJpZ2dlcnMgdGhlIGBjaGFuZ2VgIGV2ZW50LlxuICAgICAgICAgKiBAZGVmYXVsdCB0cnVlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNsZWFyQnV0dG9uID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlbmRlcnMgdGhlIGJ1aWx0LWluIGlucHV0IGVsZW1lbnQgZm9yIGZpbHRlcmluZyB0aGUgTXVsdGlTZWxlY3RUcmVlLlxuICAgICAgICAgKiBJZiBzZXQgdG8gYHRydWVgLCB0aGUgY29tcG9uZW50IGVtaXRzIHRoZSBgZmlsdGVyQ2hhbmdlYCBldmVudCwgd2hpY2ggY2FuIGJlIHVzZWQgdG8gW2ZpbHRlciB0aGUgTXVsdGlTZWxlY3RUcmVlIG1hbnVhbGx5XSh7JSBzbHVnIGZpbHRlcmluZ19tdWx0aXNlbGVjdHRyZWUgJX0jdG9jLW1hbnVhbC1maWx0ZXJpbmcpLlxuICAgICAgICAgKiBBIGJ1aWx0LWluIGZpbHRlcmluZyBpbXBsZW1lbnRhdGlvbiBpcyBhdmFpbGFibGUgdG8gdXNlIHdpdGggdGhlIFtga2VuZG9NdWx0aVNlbGVjdFRyZWVIaWVyYXJjaHlCaW5kaW5nYF0oeyUgc2x1ZyBhcGlfZHJvcGRvd25zX211bHRpc2VsZWN0dHJlZWhpZXJhcmNoeWJpbmRpbmdkaXJlY3RpdmUgJX0pIGFuZCBbYGtlbmRvTXVsdGlTZWxlY3RUcmVlRmxhdEJpbmRpbmdgXSh7JSBzbHVnIGFwaV9kcm9wZG93bnNfbXVsdGlzZWxlY3R0cmVlZmxhdGJpbmRpbmdkaXJlY3RpdmUgJX0pIGRpcmVjdGl2ZXMuXG4gICAgICAgICAqIEBkZWZhdWx0IGZhbHNlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZpbHRlcmFibGUgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgZnVuY3Rpb24gd2hpY2ggZGV0ZXJtaW5lcyBpZiBhIHNwZWNpZmljIG5vZGUgaGFzIGNoaWxkIG5vZGVzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oYXNDaGlsZHJlbiA9IGhhc0NoaWxkcmVuJDE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGZ1bmN0aW9uIHdoaWNoIHByb3ZpZGVzIHRoZSBjaGlsZCBub2RlcyBmb3IgYSBnaXZlbiBwYXJlbnQgbm9kZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZmV0Y2hDaGlsZHJlbiA9IGZldGNoQ2hpbGRyZW4kMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgY2FsbGJhY2sgd2hpY2ggZGV0ZXJtaW5lcyB3aGV0aGVyIGEgdHJlZSBub2RlIHNob3VsZCBiZSByZW5kZXJlZCBhcyBoaWRkZW4uIFRoZSB1dGlsaXR5IC5rLWRpc3BsYXktbm9uZSBjbGFzcyBpcyB1c2VkIHRvIGhpZGUgdGhlIG5vZGVzLlxuICAgICAgICAgKiBVc2VmdWwgZm9yIGN1c3RvbSBmaWx0ZXJpbmcgaW1wbGVtZW50YXRpb25zLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pc05vZGVWaXNpYmxlID0gaXNOb2RlVmlzaWJsZSQxO1xuICAgICAgICAvKipcbiAgICAgICAgICogQSBmdW5jdGlvbiB0aGF0IGlzIGV4ZWN1dGVkIGZvciBlYWNoIGRhdGEgaXRlbSBhbmQgZGV0ZXJtaW5lcyBpZiBhIHNwZWNpZmljIGl0ZW0gaXMgZGlzYWJsZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLml0ZW1EaXNhYmxlZCA9IGl0ZW1EaXNhYmxlZCQxO1xuICAgICAgICAvKipcbiAgICAgICAgICogQSB1c2VyLWRlZmluZWQgY2FsbGJhY2sgZnVuY3Rpb24gd2hpY2ggcmVjZWl2ZXMgYW4gYXJyYXkgb2Ygc2VsZWN0ZWQgZGF0YSBpdGVtcyBhbmQgbWFwcyB0aGVtIHRvIGFuIGFycmF5IG9mIHRhZ3MuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7IEFueVtdIH0gZGF0YUl0ZW1zIC0gVGhlIHNlbGVjdGVkIGRhdGEgaXRlbXMgZnJvbSB0aGUgbGlzdC5cbiAgICAgICAgICogQHJldHVybnMgeyBBbnlbXSB9IC0gVGhlIHRhZ3MgdGhhdCB3aWxsIGJlIHJlbmRlcmVkIGJ5IHRoZSBjb21wb25lbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRhZ01hcHBlciA9ICh0YWdzKSA9PiB0YWdzIHx8IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSB1c2VyIGZvY3VzZXMgdGhlIE11bHRpU2VsZWN0VHJlZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25Gb2N1cyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgTXVsdGlTZWxlY3RUcmVlIGdldHMgYmx1cnJlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25CbHVyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSBwb3B1cCBpcyBhYm91dCB0byBvcGVuXG4gICAgICAgICAqIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgb3BlbnN0YXRlX211bHRpc2VsZWN0dHJlZSAlfSkpLlxuICAgICAgICAgKiBUaGlzIGV2ZW50IGlzIHByZXZlbnRhYmxlLiBJZiB5b3UgY2FuY2VsIGl0LCB0aGUgcG9wdXAgd2lsbCByZW1haW4gY2xvc2VkLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vcGVuID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgYWZ0ZXIgdGhlIHBvcHVwIGhhcyBiZWVuIG9wZW5lZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub3BlbmVkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSBwb3B1cCBpcyBhYm91dCB0byBjbG9zZVxuICAgICAgICAgKiAoW3NlZSBleGFtcGxlXSh7JSBzbHVnIG9wZW5zdGF0ZV9tdWx0aXNlbGVjdHRyZWUgJX0pKS5cbiAgICAgICAgICogVGhpcyBldmVudCBpcyBwcmV2ZW50YWJsZS4gSWYgeW91IGNhbmNlbCBpdCwgdGhlIHBvcHVwIHdpbGwgcmVtYWluIG9wZW4uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNsb3NlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgYWZ0ZXIgdGhlIHBvcHVwIGhhcyBiZWVuIGNsb3NlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2xvc2VkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgd2hlbiB0aGUgdXNlciBleHBhbmRzIGEgbm9kZSBpbiB0aGUgcG9wdXAgVHJlZVZpZXcuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm5vZGVFeHBhbmQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyB3aGVuIHRoZSB1c2VyIGNvbGxhcHNlcyBhIG5vZGUgaW4gdGhlIHBvcHVwIFRyZWVWaWV3LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5ub2RlQ29sbGFwc2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgdGhlIHZhbHVlIGlzIGNoYW5nZWRcbiAgICAgICAgICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBvdmVydmlld19tdWx0aXNlbGVjdHRyZWUgJX0jdG9jLWV2ZW50cykpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52YWx1ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSBhIHRhZyBpcyBhYm91dCB0byBiZSByZW1vdmVkLlxuICAgICAgICAgKiBUaGlzIGV2ZW50IGlzIHByZXZlbnRhYmxlLiBJZiB5b3UgY2FuY2VsIGl0LCB0aGUgdGFnIHdpbGwgbm90IGJlIHJlbW92ZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlbW92ZVRhZyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIHdoZW4gdGhlIHZhbHVlIG9mIHRoZSBidWlsdC1pbiBmaWx0ZXIgaW5wdXQgZWxlbWVudCBjaGFuZ2VzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5maWx0ZXJDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZpbHRlclN0YXRlQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGhpZGRlblxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jaGVja2VkSXRlbXMgPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBoaWRkZW5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2hlY2tCeSA9IChpdGVtKSA9PiBpdGVtO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGhpZGRlblxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zaG93QWZ0ZXIgPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGhpZGRlblxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hbGxOb2Rlc0hpZGRlbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLnRhZ0xpc3RJZCA9IGd1aWQoKTtcbiAgICAgICAgdGhpcy50YWdQcmVmaXggPSBcInRhZy1cIiArIGd1aWQoKTtcbiAgICAgICAgdGhpcy5mb2N1c2VkVGFnSW5kZXggPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX3ZhbHVlID0gW107XG4gICAgICAgIHRoaXMuX3RhYmluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5fcG9wdXBTZXR0aW5ncyA9IERFRkFVTFRfUE9QVVBfU0VUVElOR1MkMTtcbiAgICAgICAgdGhpcy5fY2hlY2thYmxlU2V0dGluZ3MgPSBERUZBVUxUX0NIRUNLQUJMRV9TRVRUSU5HUztcbiAgICAgICAgdGhpcy5faXNGb2N1c2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IFtdO1xuICAgICAgICB0aGlzLm9uVG91Y2hlZENhbGxiYWNrID0gbm9vcDtcbiAgICAgICAgdGhpcy5vbkNoYW5nZUNhbGxiYWNrID0gbm9vcDtcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBsb2NhbGl6YXRpb24ucnRsID8gJ3J0bCcgOiAnbHRyJztcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVFdmVudHMoKTtcbiAgICB9XG4gICAgc2V0IHRyZWV2aWV3KHRyZWV2aWV3KSB7XG4gICAgICAgIHRoaXMuX3RyZWV2aWV3ID0gdHJlZXZpZXc7XG4gICAgICAgIGlmICh0cmVldmlldykge1xuICAgICAgICAgICAgLy8gSWYgZmlsdGVyaW5nIGlzIGVuYWJsZWQsIGZvY3VzIHRoZSBUcmVlVmlldyBvbiBtb2JpbGUgZGV2aWNlcyBpbnN0ZWFkIG9mIHRoZSBmaWx0ZXIgaW5wdXRcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRm9jdXNlZCAmJiAhdGhpcy5maWx0ZXJhYmxlIHx8IHRoaXMudG91Y2hFbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgdHJlZXZpZXcuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogdGhlIHRyZWV2aWV3IGFuaW1hdGlvbnMgYXJlIGluaXRpYWxseSBkaXNhYmxlZCAod2UgZG9uJ3Qgd2FudCBleHBhbmQgYW5pbWF0aW9ucyBkdXJpbmcgcG9wdXAgb3BlbmluZylcbiAgICAgICAgICAgICAqIHJlLWVuYWJsZXMgdGhlIGFuaW1hdGlvbnMgZm9yIHVzZXIgaW50ZXJhY3Rpb25cbiAgICAgICAgICAgICAqIFRoZSBQcm9taXNlIGlzIHJlcXVpcmVkIHRvIHByb3Blcmx5IGNoYW5nZSB0aGUgYGFuaW1hdGVgIHByb3BlcnR5IHdoZW5cbiAgICAgICAgICAgICAqIHRoZSBwb3B1cCBpcyBhcHBlbmRlZCB0byBhIGNvbnRhaW5lciBhbmQgb3BlbmVkIHVwb24gaW5pdGlhbGl6YXRpb24uXG4gICAgICAgICAgICAgKiBPdGhlcndpc2UsIHRoZSBcIkV4cHJlc3Npb24gaGFzIGNoYW5nZWQuLi5cIiB0eXBlIGVycm9yIHdpbGwgYmUgdGhyb3duLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBQcm9taXNlLnJlc29sdmUobnVsbCkudGhlbigoKSA9PiB0aGlzLnRyZWV2aWV3LmFuaW1hdGUgPSB0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgdHJlZXZpZXcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmVldmlldztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHRoZSBbYHRhYmluZGV4YF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9HbG9iYWxfYXR0cmlidXRlcy90YWJpbmRleCkgb2YgdGhlIGNvbXBvbmVudC5cbiAgICAgKi9cbiAgICBzZXQgdGFiaW5kZXgodmFsdWUpIHtcbiAgICAgICAgY29uc3QgcHJvdmlkZWRUYWJJbmRleCA9IHBhcnNlTnVtYmVyKHZhbHVlKTtcbiAgICAgICAgY29uc3QgZGVmYXVsdFRhYkluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5fdGFiaW5kZXggPSAhaXNOYU4ocHJvdmlkZWRUYWJJbmRleCkgPyBwcm92aWRlZFRhYkluZGV4IDogZGVmYXVsdFRhYkluZGV4O1xuICAgIH1cbiAgICBnZXQgdGFiaW5kZXgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpc2FibGVkID8gLTEgOiB0aGlzLl90YWJpbmRleDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29uZmlndXJlcyB0aGUgcG9wdXAgb2YgdGhlIE11bHRpU2VsZWN0VHJlZS5cbiAgICAgKlxuICAgICAqIFRoZSBhdmFpbGFibGUgb3B0aW9ucyBhcmU6XG4gICAgICogLSBgYW5pbWF0ZTogQm9vbGVhbmAmbWRhc2g7Q29udHJvbHMgdGhlIHBvcHVwIGFuaW1hdGlvbi4gQnkgZGVmYXVsdCwgdGhlIG9wZW4gYW5kIGNsb3NlIGFuaW1hdGlvbnMgYXJlIGVuYWJsZWQuXG4gICAgICogLSBgd2lkdGg6IE51bWJlciB8IFN0cmluZ2AmbWRhc2g7U2V0cyB0aGUgd2lkdGggb2YgdGhlIHBvcHVwIGNvbnRhaW5lci4gQnkgZGVmYXVsdCwgdGhlIHdpZHRoIG9mIHRoZSBob3N0IGVsZW1lbnQgaXMgdXNlZC4gSWYgc2V0IHRvIGBhdXRvYCwgdGhlIGNvbXBvbmVudCBhdXRvbWF0aWNhbGx5IGFkanVzdHMgdGhlIHdpZHRoIG9mIHRoZSBwb3B1cCBhbmQgbm8gaXRlbSBsYWJlbHMgYXJlIHdyYXBwZWQuXG4gICAgICogLSBgaGVpZ2h0OiBOdW1iZXJgJm1kYXNoO1NldHMgdGhlIGhlaWdodCBvZiB0aGUgcG9wdXAgY29udGFpbmVyLlxuICAgICAqIC0gYHBvcHVwQ2xhc3M6IFN0cmluZ2AmbWRhc2g7U3BlY2lmaWVzIGEgbGlzdCBvZiBDU1MgY2xhc3NlcyB0aGF0IGFyZSB1c2VkIHRvIHN0eWxlIHRoZSBwb3B1cC5cbiAgICAgKiAtIGBhcHBlbmRUbzogXCJyb290XCIgfCBcImNvbXBvbmVudFwiIHwgVmlld0NvbnRhaW5lclJlZmAmbWRhc2g7U3BlY2lmaWVzIHRoZSBjb21wb25lbnQgdG8gd2hpY2ggdGhlIHBvcHVwIHdpbGwgYmUgYXBwZW5kZWQuXG4gICAgICovXG4gICAgc2V0IHBvcHVwU2V0dGluZ3Moc2V0dGluZ3MpIHtcbiAgICAgICAgdGhpcy5fcG9wdXBTZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfUE9QVVBfU0VUVElOR1MkMSwgc2V0dGluZ3MpO1xuICAgICAgICAvLyBgZGV0ZWN0Q2hhbmdlc2AgbmVlZGVkLCBvdGhlcndpc2UgdXBvbiB2YWx1ZSBpbml0aWFsaXphdGlvbiBhbmQgYGFwcGVuZFRvYCBwcm9wZXJ0eVxuICAgICAgICAvLyBhbiBlcnJvciBpcyB0aHJvd24gPT4gRXhwcmVzc2lvbkNoYW5nZWRBZnRlckl0SGFzQmVlbkNoZWNrZWRFcnJvclxuICAgICAgICB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgfVxuICAgIGdldCBwb3B1cFNldHRpbmdzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcG9wdXBTZXR0aW5ncztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVmaW5lcyB0aGUgY2hlY2thYmxlIHNldHRpbmdzIG9mIHRoZSBNdWx0aVNlbGVjVHJlZSBub2Rlcy5cbiAgICAgKiBJZiBubyB2YWx1ZSBpcyBwcm92aWRlZCwgdGhlIGRlZmF1bHQgW2BDaGVja2FibGVTZXR0aW5nc2BdKHslIHNsdWcgYXBpX2Ryb3Bkb3duc19tdWx0aXNlbGVjdHRyZWVjaGVja2FibGVzZXR0aW5ncyAlfSkgYXJlIGFwcGxpZWQuXG4gICAgICovXG4gICAgc2V0IGNoZWNrYWJsZVNldHRpbmdzKHNldHRpbmdzKSB7XG4gICAgICAgIHRoaXMuX2NoZWNrYWJsZVNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9DSEVDS0FCTEVfU0VUVElOR1MsIHNldHRpbmdzKTtcbiAgICB9XG4gICAgZ2V0IGNoZWNrYWJsZVNldHRpbmdzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2hlY2thYmxlU2V0dGluZ3M7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGRhdGEgb2YgdGhlIE11bHRpU2VsZWN0VHJlZS5cbiAgICAgKlxuICAgICAqID4gVGhlIGRhdGEgaGFzIHRvIGJlIHByb3ZpZGVkIGluIGFuIGFycmF5LWxpa2UgbGlzdCB3aXRoIG9iamVjdHMuXG4gICAgICovXG4gICAgc2V0IGRhdGEoZGF0YSkge1xuICAgICAgICB0aGlzLl9ub2RlcyA9IGRhdGE7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoKTtcbiAgICB9XG4gICAgZ2V0IGRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ub2RlcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgdmFsdWUgb2YgdGhlIE11bHRpU2VsZWN0VHJlZS5cbiAgICAgKiBJdCBjYW4gZWl0aGVyIGJlIG9mIHRoZSBwcmltaXRpdmUgKHN0cmluZywgbnVtYmVycykgb3Igb2YgdGhlIGNvbXBsZXggKG9iamVjdHMpIHR5cGUuXG4gICAgICogVG8gZGVmaW5lIHRoZSB0eXBlLCB1c2UgdGhlIGB2YWx1ZVByaW1pdGl2ZWAgb3B0aW9uLlxuICAgICAqXG4gICAgICovXG4gICAgc2V0IHZhbHVlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3ZhbHVlID0gdmFsdWUgPyB2YWx1ZSA6IFtdO1xuICAgICAgICB0aGlzLnNldFN0YXRlKCk7XG4gICAgfVxuICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBLZWVwcyB0aGUgY3VycmVudCBgZGF0YUl0ZW1zYCBvYmplY3QgaW4gb3JkZXIgdG8gcmVzb2x2ZSBzZWxlY3Rpb24uXG4gICAgICogTmVlZHMgdG8gYmUgcHJvdmlkZWQgd2hlbiB3aGVuIHByb2dyYW1tYXRpY2FsbHkgc2V0dGluZyBhIGB2YWx1ZWAgYW5kIGB2YWx1ZVByaW1pdGl2ZWAgaXMgc2V0IHRvIGB0cnVlYC5cbiAgICAgKi9cbiAgICBzZXQgZGF0YUl0ZW1zKGl0ZW1zKSB7XG4gICAgICAgIHRoaXMuX2RhdGFJdGVtcyA9IChpdGVtcyB8fCBbXSkubWFwKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgaWYgKGhhc1Byb3BzKGl0ZW0sIFsnZGF0YUl0ZW0nLCAnaW5kZXgnLCAnbGV2ZWwnXSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZGF0YUl0ZW06IGl0ZW0sXG4gICAgICAgICAgICAgICAgaW5kZXg6IG51bGwsXG4gICAgICAgICAgICAgICAgbGV2ZWw6IHRoaXMudmFsdWVEZXB0aFtpbmRleF0gfHwgMFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoKTtcbiAgICB9XG4gICAgZ2V0IGRhdGFJdGVtcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGFJdGVtcyB8fCB0aGlzLnZhbHVlLm1hcCgodmFsdWUsIGluZGV4KSA9PiAoe1xuICAgICAgICAgICAgZGF0YUl0ZW06IHZhbHVlLFxuICAgICAgICAgICAgaW5kZXg6IG51bGwsXG4gICAgICAgICAgICBsZXZlbDogdGhpcy52YWx1ZURlcHRoW2luZGV4XSB8fCAwXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGdldCBmb2N1c2VkVGFnSWQoKSB7XG4gICAgICAgIGlmICghaXNQcmVzZW50KHRoaXMuZm9jdXNlZFRhZ0luZGV4KSB8fCB0aGlzLmlzT3Blbikge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGF0YUl0ZW0gPSB0aGlzLnRhZ3NbdGhpcy5mb2N1c2VkVGFnSW5kZXhdO1xuICAgICAgICByZXR1cm4gYCR7dGhpcy50YWdQcmVmaXh9LSR7dmFsdWVGcm9tKHsgZGF0YUl0ZW0gfSwgdGhpcy52YWx1ZUZpZWxkKX1gO1xuICAgIH1cbiAgICBzZXQgaXNGb2N1c2VkKGlzRm9jdXNlZCkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyW2lzRm9jdXNlZCA/ICdhZGRDbGFzcycgOiAncmVtb3ZlQ2xhc3MnXSh0aGlzLmhvc3RFbGVtZW50Lm5hdGl2ZUVsZW1lbnQsICdrLXN0YXRlLWZvY3VzZWQnKTtcbiAgICAgICAgdGhpcy5faXNGb2N1c2VkID0gaXNGb2N1c2VkO1xuICAgIH1cbiAgICBnZXQgaXNGb2N1c2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNGb2N1c2VkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IG9wZW4gc3RhdGUgb2YgdGhlIHBvcHVwLlxuICAgICAqL1xuICAgIGdldCBpc09wZW4oKSB7XG4gICAgICAgIHJldHVybiBpc1ByZXNlbnQodGhpcy5wb3B1cFJlZik7XG4gICAgfVxuICAgIGdldCB3aWR0aCgpIHtcbiAgICAgICAgY29uc3Qgd3JhcHBlcldpZHRoID0gdGhpcy53cmFwcGVyLm5hdGl2ZUVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5wb3B1cFNldHRpbmdzLndpZHRoIHx8IHdyYXBwZXJXaWR0aDtcbiAgICAgICAgY29uc3QgbWluV2lkdGggPSBpc05hTih3cmFwcGVyV2lkdGgpID8gd3JhcHBlcldpZHRoIDogYCR7d3JhcHBlcldpZHRofXB4YDtcbiAgICAgICAgY29uc3QgbWF4V2lkdGggPSBpc05hTih3aWR0aCkgPyB3aWR0aCA6IGAke3dpZHRofXB4YDtcbiAgICAgICAgcmV0dXJuIHsgbWluOiBtaW5XaWR0aCwgbWF4OiBtYXhXaWR0aCB9O1xuICAgIH1cbiAgICBnZXQgaGVpZ2h0KCkge1xuICAgICAgICBjb25zdCBwb3B1cEhlaWdodCA9IHRoaXMucG9wdXBTZXR0aW5ncy5oZWlnaHQ7XG4gICAgICAgIHJldHVybiBpc1ByZXNlbnQocG9wdXBIZWlnaHQpID8gYCR7cG9wdXBIZWlnaHR9cHhgIDogJ2F1dG8nO1xuICAgIH1cbiAgICBnZXQgYXBwZW5kVG8oKSB7XG4gICAgICAgIGNvbnN0IHsgYXBwZW5kVG8gfSA9IHRoaXMucG9wdXBTZXR0aW5ncztcbiAgICAgICAgaWYgKCFhcHBlbmRUbyB8fCBhcHBlbmRUbyA9PT0gJ3Jvb3QnKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcHBlbmRUbyA9PT0gJ2NvbXBvbmVudCcgPyB0aGlzLmNvbnRhaW5lciA6IGFwcGVuZFRvO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgZ2V0IHBvcHVwQ29udGFpbmVyQ2xhc3NlcygpIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyQ2xhc3NlcyA9IFsnay1wb3B1cC1kcm9wZG93bnRyZWUnLCAnay1yZXNldCcsICdrLWdyb3VwJywgJ2stbGlzdC1jb250YWluZXInXTtcbiAgICAgICAgaWYgKHRoaXMucG9wdXBTZXR0aW5ncy5wb3B1cENsYXNzKSB7XG4gICAgICAgICAgICBjb250YWluZXJDbGFzc2VzLnB1c2godGhpcy5wb3B1cFNldHRpbmdzLnBvcHVwQ2xhc3MpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb250YWluZXJDbGFzc2VzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICpcbiAgICAgKiBBbGlhcyBmb3IgYGRhdGFgLiBVc2VkIGZvciBjb21wYXRpYmlsaXR5IHdpdGggdGhlIGBEYXRhQm91bmRDb21wb25lbnRgIGludGVyZmFjZS5cbiAgICAgKiBSZXF1aXJlZCBmb3IgdGhlIGRhdGEtYmluZGluZyBkaXJlY3RpdmVzLlxuICAgICAqL1xuICAgIHNldCBub2Rlcyhub2Rlcykge1xuICAgICAgICB0aGlzLmRhdGEgPSBub2RlcztcbiAgICB9XG4gICAgZ2V0IG5vZGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICpcbiAgICAgKiBBbGlhcyBmb3IgYGZldGNoQ2hpbGRyZW5gLiBVc2VkIGZvciBjb21wYXRpYmlsaXR5IHdpdGggdGhlIGBEYXRhQm91bmRDb21wb25lbnRgIGludGVyZmFjZS5cbiAgICAgKiBSZXF1aXJlZCBmb3IgdGhlIGRhdGEtYmluZGluZyBkaXJlY3RpdmVzXG4gICAgICovXG4gICAgc2V0IGNoaWxkcmVuKGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuZmV0Y2hDaGlsZHJlbiA9IGNhbGxiYWNrO1xuICAgIH1cbiAgICBnZXQgY2hpbGRyZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZldGNoQ2hpbGRyZW47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKlxuICAgICAqIEFsaWFzIGZvciBgbm9kZUV4cGFuZGAuIFVzZWQgZm9yIGNvbXBhdGliaWxpdHkgd2l0aCB0aGUgYEV4cGFuZGFibGVDb21wb25lbnRgIGludGVyZmFjZS5cbiAgICAgKiBSZXF1aXJlZCBmb3IgdGhlIGV4cGFuZC1kaXJlY3RpdmUuXG4gICAgICovXG4gICAgZ2V0IGV4cGFuZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZUV4cGFuZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqXG4gICAgICogQWxpYXMgZm9yIGBub2RlQ29sbGFwc2VgLiBVc2VkIGZvciBjb21wYXRpYmlsaXR5IHdpdGggdGhlIGBFeHBhbmRhYmxlQ29tcG9uZW50YCBpbnRlcmZhY2UuXG4gICAgICogUmVxdWlyZWQgZm9yIHRoZSBleHBhbmQtZGlyZWN0aXZlLlxuICAgICAqL1xuICAgIGdldCBjb2xsYXBzZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZUNvbGxhcHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICpcbiAgICAgKiBBbGlhcyBmb3IgYGlzTm9kZUV4cGFuZGVkYC4gVXNlZCBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIHRoZSBgRXhwYW5kYWJsZUNvbXBvbmVudGAgaW50ZXJmYWNlLlxuICAgICAqIFJlcXVpcmVkIGZvciB0aGUgZXhwYW5kLWRpcmVjdGl2ZS5cbiAgICAgKi9cbiAgICBzZXQgaXNFeHBhbmRlZChjYWxsYmFjaykge1xuICAgICAgICB0aGlzLmlzTm9kZUV4cGFuZGVkID0gY2FsbGJhY2s7XG4gICAgfVxuICAgIGdldCBpc0V4cGFuZGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc05vZGVFeHBhbmRlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqXG4gICAgICogQWxpYXMgZm9yIGBpc05vZGVWaXNpYmxlYC4gVXNlZCBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIHRoZSBgRGF0YUJvdW5kQ29tcG9uZW50YCBpbnRlcmZhY2UuXG4gICAgICogVGhlIGBEYXRhQm91bmRDb21wb25lbnRgIGludGVyZmFjZSBpcyB1c2VkIGluIHRoZSBkYXRhLWJpbmRpbmcgZGlyZWN0aXZlcy5cbiAgICAgKi9cbiAgICBzZXQgaXNWaXNpYmxlKGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuaXNOb2RlVmlzaWJsZSA9IGNhbGxiYWNrO1xuICAgIH1cbiAgICBnZXQgaXNWaXNpYmxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc05vZGVWaXNpYmxlO1xuICAgIH1cbiAgICBnZXQgaXNUYWdGb2N1c2VkKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMuaXNPcGVuICYmIHRoaXMuZm9jdXNlZFRhZ0luZGV4ICE9PSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGdldCBpc1RyZWVWaWV3QWN0aXZlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50cmVldmlldyAmJiB0aGlzLnRyZWV2aWV3LmlzQWN0aXZlO1xuICAgIH1cbiAgICBnZXQgaXNXcmFwcGVyQWN0aXZlKCkge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gdGhpcy53cmFwcGVyLm5hdGl2ZUVsZW1lbnQ7XG4gICAgfVxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUF0dHJpYnV0ZSh0aGlzLmhvc3RFbGVtZW50Lm5hdGl2ZUVsZW1lbnQsICd0YWJpbmRleCcpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldEF0dHJpYnV0ZSh0aGlzLndyYXBwZXIubmF0aXZlRWxlbWVudCwgJ2FyaWEtZXhwYW5kZWQnLCBTdHJpbmcodGhpcy5pc09wZW4pKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2godGhpcy5sb2NhbGl6YXRpb25cbiAgICAgICAgICAgIC5jaGFuZ2VzLnN1YnNjcmliZSgoeyBydGwgfSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBydGwgPyAncnRsJyA6ICdsdHInO1xuICAgICAgICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLmRlc3Ryb3lQb3B1cCgpO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlRXZlbnRzKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzKSB7XG4gICAgICAgIGlmIChhbnlDaGFuZ2VkKFsndGV4dEZpZWxkJywgJ3ZhbHVlRmllbGQnLCAndmFsdWVQcmltaXRpdmUnXSwgY2hhbmdlcywgZmFsc2UpKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFueUNoYW5nZWQoWyd2YWx1ZURlcHRoJywgJ3ZhbHVlJywgJ2RhdGFJdGVtcyddLCBjaGFuZ2VzLCBmYWxzZSkpIHtcbiAgICAgICAgICAgIGlmIChjaGFuZ2VzLnZhbHVlICYmICFjaGFuZ2VzLmRhdGFJdGVtcyAmJiAhdGhpcy52YWx1ZVByaW1pdGl2ZSkge1xuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgZGF0YUl0ZW1zIGlmIHRoZSB2YWx1ZSBpcyB1cGRhdGVkIHByb2dyYW1tYXRpY2FsbHkgKG5vbi1wcmltaXRpdmUgdmFsdWVzIG9ubHkpXG4gICAgICAgICAgICAgICAgLy8gSW4gdGhlIHByaW1pdGl2ZSBjYXNlLCB0aGUgY2xpZW50IHNob3VsZCB1cGRhdGUgdGhlIGRhdGFJdGVtcyBhcyB3ZWxsXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhSXRlbXMgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gUmUtbWFwIHRoZSBkYXRhSXRlbXMgYmVjYXVzZSBgdmFsdWVEZXB0aGAgaXMgbm90IHlldCBhdmFpbGFibGUgd2hlbiB0aGUgY2hlY2sgZGlyZWN0aXZlIHBhcnNlcyB0aGUgaXRlbXNcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFJdGVtcyA9IHRoaXMuZGF0YUl0ZW1zLm1hcCgoaXRlbSwgaW5kZXgpID0+IChPYmplY3QuYXNzaWduKHt9LCBpdGVtLCB7IGxldmVsOiB0aGlzLnZhbHVlRGVwdGhbaW5kZXhdIHx8IDAgfSkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgbmdBZnRlckNvbnRlbnRDaGVja2VkKCkge1xuICAgICAgICB0aGlzLnZlcmlmeVNldHRpbmdzKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKlxuICAgICAqIFVzZWQgYnkgdGhlIGtlbmRvLWZsb2F0aW5nbGFiZWwgY29tcG9uZW50IHRvIGRldGVybWluZSBpZiB0aGUgZmxvYXRpbmcgbGFiZWxcbiAgICAgKiBzaG91bGQgYmUgcmVuZGVyZWQgaW5zaWRlIHRoZSBpbnB1dCB3aGVuIHRoZSBjb21wb25lbnQgaXMgbm90IGZvY3VzZWQuXG4gICAgICovXG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuICFCb29sZWFuKHRoaXMucGxhY2Vob2xkZXIpICYmICghaXNQcmVzZW50KHRoaXMudmFsdWUpIHx8IHRoaXMudmFsdWUubGVuZ3RoID09PSAwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9jdXNlcyB0aGUgTXVsdGlTZWxlY3RUcmVlLlxuICAgICAqL1xuICAgIGZvY3VzKCkge1xuICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMud3JhcHBlci5uYXRpdmVFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQmx1cnMgdGhlIE11bHRpU2VsZWN0VHJlZS5cbiAgICAgKi9cbiAgICBibHVyKCkge1xuICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMud3JhcHBlci5uYXRpdmVFbGVtZW50LmJsdXIoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb2N1c2VzIGEgc3BlY2lmaWMgaXRlbSBvZiB0aGUgTXVsdGlTZWxlY3RUcmVlIGJhc2VkIG9uIGEgcHJvdmlkZWQgaW5kZXggaW4gdGhlIGZvcm1hdCBvZiBgMV8xYC5cbiAgICAgKiBUaGUgdGFyZ2V0ZWQgaXRlbSBzaG91bGQgYmUgZXhwYW5kZWQgaW4gb3JkZXIgZm9yIGl0IHRvIGJlIGZvY3VzZWQuXG4gICAgICogSWYgbnVsbCBvciBpbnZhbGlkIGluZGV4IGlzIHByb3ZpZGVkIHRoZSBmb2N1cyB3aWxsIGJlIHNldCBvbiB0aGUgZmlyc3QgaXRlbS5cbiAgICAgKi9cbiAgICBmb2N1c0l0ZW1BdChpbmRleCkge1xuICAgICAgICBpZiAodGhpcy50cmVldmlldykge1xuICAgICAgICAgICAgY29uc3QgbG9va3VwID0gdGhpcy50cmVldmlldy5pdGVtTG9va3VwKGluZGV4KTtcbiAgICAgICAgICAgIGNvbnN0IGlzSXRlbURpc2FibGVkID0gIWlzUHJlc2VudChsb29rdXApIHx8IHRoaXMudHJlZXZpZXcuaXNEaXNhYmxlZChsb29rdXAuaXRlbS5kYXRhSXRlbSwgbG9va3VwLml0ZW0uaW5kZXgpO1xuICAgICAgICAgICAgaWYgKCFpc0l0ZW1EaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJlZXZpZXcuZm9jdXMoaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgdmFsdWUgb2YgdGhlIE11bHRpU2VsZWN0VHJlZS5cbiAgICAgKiBJZiB5b3UgdXNlIHRoZSBgcmVzZXRgIG1ldGhvZCB0byBjbGVhciB0aGUgdmFsdWUgb2YgdGhlIGNvbXBvbmVudCxcbiAgICAgKiB0aGUgbW9kZWwgd2lsbCBub3QgdXBkYXRlIGF1dG9tYXRpY2FsbHkgYW5kIHRoZSBgdmFsdWVDaGFuZ2VgIGV2ZW50IHdpbGwgbm90IGJlIGZpcmVkLlxuICAgICAqL1xuICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLnZhbHVlID0gW107XG4gICAgICAgIHRoaXMuZGF0YUl0ZW1zID0gW107XG4gICAgICAgIHRoaXMudmFsdWVEZXB0aCA9IFtdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUb2dnbGVzIHRoZSB2aXNpYmlsaXR5IG9mIHRoZSBwb3B1cFxuICAgICAqIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgb3BlbnN0YXRlX211bHRpc2VsZWN0dHJlZSAlfSkpLlxuICAgICAqIElmIHlvdSB1c2UgdGhlIGB0b2dnbGVgIG1ldGhvZCB0byBvcGVuIG9yIGNsb3NlIHRoZSBwb3B1cCwgdGhlIGBvcGVuYCBhbmQgYGNsb3NlYCBldmVudHMgd2lsbCBub3QgYmUgZmlyZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3BlbiAtIFRoZSBzdGF0ZSBvZiB0aGUgcG9wdXAuXG4gICAgICovXG4gICAgdG9nZ2xlKG9wZW4pIHtcbiAgICAgICAgLy8gVGhlIFByb21pc2UgaXMgcmVxdWlyZWQgdG8gb3BlbiB0aGUgcG9wdXAgb24gbG9hZC5cbiAgICAgICAgLy8gT3RoZXJ3aXNlLCB0aGUgXCJWaWV3Q29udGFpbmVyUmVmIG5vdCBmb3VuZC4uLlwiIGVycm9yIHdpbGwgYmUgdGhyb3duLlxuICAgICAgICBQcm9taXNlLnJlc29sdmUobnVsbCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzaG91bGRPcGVuID0gaXNQcmVzZW50KG9wZW4pID8gb3BlbiA6ICFpc1ByZXNlbnQodGhpcy5wb3B1cFJlZik7XG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3lQb3B1cCgpO1xuICAgICAgICAgICAgaWYgKHNob3VsZE9wZW4pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVBvcHVwKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgaGFuZGxlRm9jdXMoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc0ZvY3VzZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaXNGb2N1c2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChoYXNPYnNlcnZlcnModGhpcy5vbkZvY3VzKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3pvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkZvY3VzLmVtaXQoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFJlLWZvY3VzIHRoZSB0cmVldmlldyBpZiBgY2xvc2VgIGlzIHByZXZlbnRlZFxuICAgICAgICAgICAgaWYgKHRoaXMuaXNPcGVuICYmIHRoaXMudHJlZXZpZXcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3ROb2RlT25Gb2N1cy5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRyZWV2aWV3LmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGhhbmRsZUJsdXIoZSkge1xuICAgICAgICBjb25zdCByZWxhdGVkVGFyZ2V0ID0gZSAmJiBlLnJlbGF0ZWRUYXJnZXQ7XG4gICAgICAgIGlmICh0aGlzLmhvc3RFbGVtZW50Lm5hdGl2ZUVsZW1lbnQuY29udGFpbnMocmVsYXRlZFRhcmdldCkgfHxcbiAgICAgICAgICAgICh0aGlzLmlzT3BlbiAmJiB0aGlzLnBvcHVwUmVmLnBvcHVwRWxlbWVudC5jb250YWlucyhyZWxhdGVkVGFyZ2V0KSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzRm9jdXNlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnRvZ2dsZVBvcHVwKGZhbHNlKTtcbiAgICAgICAgaWYgKGhhc09ic2VydmVycyh0aGlzLm9uQmx1cikgfHxcbiAgICAgICAgICAgIGlzVW50b3VjaGVkKHRoaXMuaG9zdEVsZW1lbnQubmF0aXZlRWxlbWVudCkpIHtcbiAgICAgICAgICAgIHRoaXMuX3pvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQmx1ci5lbWl0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5vblRvdWNoZWRDYWxsYmFjaygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGhhbmRsZUNsaWNrKCkge1xuICAgICAgICB0aGlzLnRvZ2dsZVBvcHVwKCF0aGlzLmlzT3Blbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBoYW5kbGVLZXlkb3duKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IGRlbGV0ZVRhZyA9IHRoaXMuaXNXcmFwcGVyQWN0aXZlICYmIGV2ZW50LmtleUNvZGUgPT09IEtleXMuQmFja3NwYWNlICYmIHRoaXMudGFncy5sZW5ndGggPiAwO1xuICAgICAgICBpZiAoZGVsZXRlVGFnKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUJhY2tzcGFjZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkIHx8IHRoaXMucmVhZG9ubHkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBldmVudERhdGEgPSBldmVudDtcbiAgICAgICAgY29uc3QgYWN0aW9uID0gdGhpcy5uYXZpZ2F0aW9uU2VydmljZS5wcm9jZXNzKHtcbiAgICAgICAgICAgIG9yaWdpbmFsRXZlbnQ6IGV2ZW50RGF0YVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGFjdGlvbiA9PT0gTmF2aWdhdGlvbkFjdGlvbi5PcGVuKSB7XG4gICAgICAgICAgICBldmVudERhdGEucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgaGFuZGxlTm9kZUNsaWNrKG5vZGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzRm9jdXNlZCkge1xuICAgICAgICAgICAgLy8gUmUtZm9jdXMgdGhlIE11bHRpU2VsZWN0VHJlZSB3aGVuIHBvcHVwIGNsb3NlIGlzIHByZXZlbnRlZCBhbmQgYSBub2RlIGlzIGNsaWNrZWRcbiAgICAgICAgICAgIC8vIE9uIGNsaWNrIHRoZSBmb2N1cyBzaG91bGQgYmUgb24gdGhlIGNsaWNrZWQgZWxlbWVudCB3aGljaCBpcyB3aHkgd2UgbmVlZCB0byB1cGRhdGUgdGhlIGxhc3ROb2RlT25Gb2N1c1xuICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gbm9kZS5vcmlnaW5hbEV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICB0aGlzLmxhc3ROb2RlT25Gb2N1cyA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgdG9nZ2xlUG9wdXAob3Blbikge1xuICAgICAgICBjb25zdCBpc0Rpc2FibGVkID0gdGhpcy5kaXNhYmxlZCB8fCB0aGlzLnJlYWRvbmx5O1xuICAgICAgICBjb25zdCBzYW1lU3RhdGUgPSB0aGlzLmlzT3BlbiA9PT0gb3BlbjtcbiAgICAgICAgdGhpcy5fem9uZS5ydW4oKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5mb2N1c2VkVGFnSW5kZXggPSB1bmRlZmluZWQ7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoaXNEaXNhYmxlZCB8fCBzYW1lU3RhdGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0b2dnbGVQcmV2ZW50ZWQgPSB0aGlzLnRyaWdnZXJQb3B1cEV2ZW50cyhvcGVuKTtcbiAgICAgICAgaWYgKCF0b2dnbGVQcmV2ZW50ZWQpIHtcbiAgICAgICAgICAgIG9wZW4gP1xuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlUG9wdXAoKSA6XG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95UG9wdXAoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlVHJlZVZpZXdGcm9tVGFiT3JkZXIoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgbWVzc2FnZUZvcihrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxpemF0aW9uLmdldChrZXkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgaGFuZGxlQ2hlY2tlZEl0ZW1zQ2hhbmdlKGl0ZW1zKSB7XG4gICAgICAgIHRoaXMudmFsdWVEZXB0aCA9IGl0ZW1zLm1hcChpdGVtID0+IGl0ZW0ubGV2ZWwpO1xuICAgICAgICB0aGlzLmRhdGFJdGVtcyA9IGl0ZW1zLnNsaWNlKCk7XG4gICAgICAgIHRoaXMudXBkYXRlVmFsdWUodGhpcy5kYXRhSXRlbXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgaGFuZGxlUmVtb3ZlVGFnKHsgdGFnLCBpbmRleCB9KSB7XG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkIHx8IHRoaXMucmVhZG9ubHkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBldmVudEFyZ3MgPSBuZXcgUmVtb3ZlVGFnRXZlbnQodGFnKTtcbiAgICAgICAgdGhpcy5yZW1vdmVUYWcuZW1pdChldmVudEFyZ3MpO1xuICAgICAgICBpZiAoZXZlbnRBcmdzLmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmVtb3ZlIHRhZ3MgYmFzZWQgb24gdGhlaXIgcG9zaXRpb24gaW5kZXhcbiAgICAgICAgaWYgKHRhZyBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICAvLyBSZW1vdmUgZ3JvdXAgdGFnXG4gICAgICAgICAgICB0aGlzLmRhdGFJdGVtcyA9IHRoaXMuZGF0YUl0ZW1zLmZpbHRlcigoX2l0ZW0sIGkpID0+IGkgPCB0aGlzLnNob3dBZnRlciB8fCB0aGlzLmRpc2FibGVkSW5kaWNlcy5oYXMoaSkpO1xuICAgICAgICAgICAgdGhpcy52YWx1ZURlcHRoID0gdGhpcy52YWx1ZURlcHRoLmZpbHRlcigoX2l0ZW0sIGkpID0+IGkgPCB0aGlzLnNob3dBZnRlciB8fCB0aGlzLmRpc2FibGVkSW5kaWNlcy5oYXMoaSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gUmVtb3ZlIHNpbmdsZSB0YWdcbiAgICAgICAgICAgIHRoaXMuZGF0YUl0ZW1zID0gdGhpcy5kYXRhSXRlbXMuZmlsdGVyKChfaXRlbSwgaSkgPT4gaSAhPT0gaW5kZXggfHwgdGhpcy5kaXNhYmxlZEluZGljZXMuaGFzKGkpKTtcbiAgICAgICAgICAgIHRoaXMudmFsdWVEZXB0aCA9IHRoaXMudmFsdWVEZXB0aC5maWx0ZXIoKF9pdGVtLCBpKSA9PiBpICE9PSBpbmRleCB8fCB0aGlzLmRpc2FibGVkSW5kaWNlcy5oYXMoaSkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlVmFsdWUodGhpcy5kYXRhSXRlbXMpO1xuICAgICAgICAvLyBmb2N1cyB0aGUgd3JhcHBlciBpZiB0aGUgY29tcG9uZW50IGlzIG5vdCBmb2N1c2VkIC0gdGhlIGZsb2F0aW5nIGxhYmVsIHJlYWN0cyB0byBmb2N1cy9ibHVyXG4gICAgICAgIGlmICghdGhpcy5pc0ZvY3VzZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgaGFuZGxlVGFnTWFwcGVyQ2hhbmdlKHNob3dBZnRlcikge1xuICAgICAgICB0aGlzLnNob3dBZnRlciA9IHBhcnNlTnVtYmVyKHNob3dBZnRlcik7XG4gICAgICAgIHRoaXMuc2V0VGFncygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgY2xlYXJBbGwoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWUuZmlsdGVyKChfaXRlbSwgaW5kZXgpID0+IHRoaXMuZGlzYWJsZWRJbmRpY2VzLmhhcyhpbmRleCkpO1xuICAgICAgICB0aGlzLmRhdGFJdGVtcyA9IHRoaXMuZGF0YUl0ZW1zLmZpbHRlcigoX2l0ZW0sIGluZGV4KSA9PiB0aGlzLmRpc2FibGVkSW5kaWNlcy5oYXMoaW5kZXgpKTtcbiAgICAgICAgdGhpcy52YWx1ZURlcHRoID0gdGhpcy52YWx1ZURlcHRoLmZpbHRlcigoX2RlcHRoLCBpbmRleCkgPT4gdGhpcy5kaXNhYmxlZEluZGljZXMuaGFzKGluZGV4KSk7XG4gICAgICAgIHRoaXMuZW1pdFZhbHVlQ2hhbmdlKHRoaXMudmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgd3JpdGVWYWx1ZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWUgfHwgW107XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgZGF0YUl0ZW1zIGlmIHRoZSB2YWx1ZSBpcyB1cGRhdGVkIHByb2dyYW1tYXRpY2FsbHkgKG5vbi1wcmltaXRpdmUgdmFsdWVzIG9ubHkpXG4gICAgICAgIC8vIEluIHRoZSBwcmltaXRpdmUgY2FzZSwgdGhlIGNsaWVudCBzaG91bGQgdXBkYXRlIHRoZSBkYXRhSXRlbXMgYXMgd2VsbFxuICAgICAgICBpZiAoIXRoaXMudmFsdWVQcmltaXRpdmUpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YUl0ZW1zID0gdGhpcy52YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgcmVnaXN0ZXJPbkNoYW5nZShmbikge1xuICAgICAgICB0aGlzLm9uQ2hhbmdlQ2FsbGJhY2sgPSBmbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHJlZ2lzdGVyT25Ub3VjaGVkKGZuKSB7XG4gICAgICAgIHRoaXMub25Ub3VjaGVkQ2FsbGJhY2sgPSBmbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHNldERpc2FibGVkU3RhdGUoaXNEaXNhYmxlZCkge1xuICAgICAgICB0aGlzLmRpc2FibGVkID0gaXNEaXNhYmxlZDtcbiAgICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBoYW5kbGVGaWx0ZXJJbnB1dENoYW5nZSh0ZXJtKSB7XG4gICAgICAgIHRoaXMuZmlsdGVyQ2hhbmdlLm5leHQodGVybSk7XG4gICAgICAgIHRoaXMuYWxsTm9kZXNIaWRkZW4gPSB0aGlzLm5vZGVzLmV2ZXJ5KChub2RlLCBpbmRleCkgPT4gIXRoaXMuaXNWaXNpYmxlKG5vZGUsIFN0cmluZyhpbmRleCkpKTtcbiAgICB9XG4gICAgdmVyaWZ5U2V0dGluZ3MoKSB7XG4gICAgICAgIGlmICghaXNEZXZNb2RlKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzUHJlc2VudCh0aGlzLnZhbHVlRmllbGQpIHx8ICFpc1ByZXNlbnQodGhpcy50ZXh0RmllbGQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoTXVsdGlTZWxlY3RUcmVlTWVzc2FnZXMudGV4dEFuZFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzQXJyYXkodGhpcy52YWx1ZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihNdWx0aVNlbGVjdFRyZWVNZXNzYWdlcy5hcnJheSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudmFsdWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaWYgKHRoaXMudmFsdWVQcmltaXRpdmUgJiYgdGhpcy52YWx1ZS5zb21lKGl0ZW0gPT4gaXNPYmplY3QoaXRlbSkpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKE11bHRpU2VsZWN0VHJlZU1lc3NhZ2VzLnByaW1pdGl2ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBpc0V2ZXJ5RGF0YUl0ZW1PYmplY3QgPSB0aGlzLmRhdGFJdGVtcy5ldmVyeShpdGVtID0+IGlzT2JqZWN0KGl0ZW0uZGF0YUl0ZW0pKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlUHJpbWl0aXZlICYmICFpc0FycmF5KHRoaXMuZGF0YUl0ZW1zKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihNdWx0aVNlbGVjdFRyZWVNZXNzYWdlcy5kYXRhSXRlbXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMudmFsdWVQcmltaXRpdmUgJiYgIWlzRXZlcnlEYXRhSXRlbU9iamVjdCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihNdWx0aVNlbGVjdFRyZWVNZXNzYWdlcy5kYXRhSXRlbXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMudmFsdWVQcmltaXRpdmUgJiYgdGhpcy5kYXRhSXRlbXMubGVuZ3RoICE9PSB0aGlzLnZhbHVlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihNdWx0aVNlbGVjdFRyZWVNZXNzYWdlcy5kYXRhSXRlbXNMZW5ndGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLnZhbHVlUHJpbWl0aXZlICYmICFpc09iamVjdEFycmF5KHRoaXMudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKE11bHRpU2VsZWN0VHJlZU1lc3NhZ2VzLm9iamVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKGlzQXJyYXkodGhpcy52YWx1ZUZpZWxkKSB8fCBpc0FycmF5KHRoaXMudGV4dEZpZWxkKSkgJiYgIWlzQXJyYXkodGhpcy52YWx1ZURlcHRoKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihNdWx0aVNlbGVjdFRyZWVNZXNzYWdlcy52YWx1ZURlcHRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoaXNBcnJheSh0aGlzLnZhbHVlRmllbGQpIHx8IGlzQXJyYXkodGhpcy50ZXh0RmllbGQpKSAmJiB0aGlzLnZhbHVlRGVwdGgubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKE11bHRpU2VsZWN0VHJlZU1lc3NhZ2VzLnZhbHVlRGVwdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChpc0FycmF5KHRoaXMudmFsdWVGaWVsZCkgfHwgaXNBcnJheSh0aGlzLnRleHRGaWVsZCkpICYmIHRoaXMudmFsdWVEZXB0aC5sZW5ndGggIT09IHRoaXMudmFsdWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKE11bHRpU2VsZWN0VHJlZU1lc3NhZ2VzLnZhbHVlRGVwdGhMZW5ndGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVtaXRWYWx1ZUNoYW5nZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLm9uQ2hhbmdlQ2FsbGJhY2sodmFsdWUpO1xuICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQodmFsdWUpO1xuICAgIH1cbiAgICB0cmlnZ2VyUG9wdXBFdmVudHMob3Blbikge1xuICAgICAgICBjb25zdCBldmVudEFyZ3MgPSBuZXcgUHJldmVudGFibGVFdmVudCgpO1xuICAgICAgICBvcGVuID9cbiAgICAgICAgICAgIHRoaXMub3Blbi5lbWl0KGV2ZW50QXJncykgOlxuICAgICAgICAgICAgdGhpcy5jbG9zZS5lbWl0KGV2ZW50QXJncyk7XG4gICAgICAgIHJldHVybiBldmVudEFyZ3MuaXNEZWZhdWx0UHJldmVudGVkKCk7XG4gICAgfVxuICAgIGNyZWF0ZVBvcHVwKCkge1xuICAgICAgICBjb25zdCBob3Jpem9udGFsQWxpZ24gPSB0aGlzLmRpcmVjdGlvbiA9PT0gXCJydGxcIiA/IFwicmlnaHRcIiA6IFwibGVmdFwiO1xuICAgICAgICBjb25zdCBhbmNob3JQb3NpdGlvbiA9IHsgaG9yaXpvbnRhbDogaG9yaXpvbnRhbEFsaWduLCB2ZXJ0aWNhbDogJ2JvdHRvbScgfTtcbiAgICAgICAgY29uc3QgcG9wdXBQb3NpdGlvbiA9IHsgaG9yaXpvbnRhbDogaG9yaXpvbnRhbEFsaWduLCB2ZXJ0aWNhbDogJ3RvcCcgfTtcbiAgICAgICAgdGhpcy5wb3B1cFJlZiA9IHRoaXMucG9wdXBTZXJ2aWNlLm9wZW4oe1xuICAgICAgICAgICAgYW5jaG9yOiB0aGlzLndyYXBwZXIsXG4gICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5hcHBlbmRUbyxcbiAgICAgICAgICAgIGFuY2hvckFsaWduOiBhbmNob3JQb3NpdGlvbixcbiAgICAgICAgICAgIGNvbnRlbnQ6IHRoaXMucG9wdXBUZW1wbGF0ZSxcbiAgICAgICAgICAgIHBvcHVwQWxpZ246IHBvcHVwUG9zaXRpb24sXG4gICAgICAgICAgICBwb3NpdGlvbk1vZGU6ICdhYnNvbHV0ZScsXG4gICAgICAgICAgICBwb3B1cENsYXNzOiB0aGlzLnBvcHVwQ29udGFpbmVyQ2xhc3Nlc1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcG9wdXBXcmFwcGVyID0gdGhpcy5wb3B1cFJlZi5wb3B1cEVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IHsgbWluLCBtYXggfSA9IHRoaXMud2lkdGg7XG4gICAgICAgIHBvcHVwV3JhcHBlci5zdHlsZS5taW5XaWR0aCA9IG1pbjtcbiAgICAgICAgcG9wdXBXcmFwcGVyLnN0eWxlLndpZHRoID0gbWF4O1xuICAgICAgICBwb3B1cFdyYXBwZXIuc3R5bGUuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0QXR0cmlidXRlKHBvcHVwV3JhcHBlciwgJ2RpcicsIHRoaXMuZGlyZWN0aW9uKTtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRBdHRyaWJ1dGUodGhpcy53cmFwcGVyLm5hdGl2ZUVsZW1lbnQsICdhcmlhLWV4cGFuZGVkJywgJ3RydWUnKTtcbiAgICAgICAgdGhpcy5wb3B1cFJlZi5wb3B1cE9wZW4uc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcbiAgICAgICAgICAgIHRoaXMub3BlbmVkLmVtaXQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucG9wdXBSZWYucG9wdXBDbG9zZS5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZWQuZW1pdCgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGVzdHJveVBvcHVwKCkge1xuICAgICAgICBpZiAodGhpcy5wb3B1cFJlZikge1xuICAgICAgICAgICAgdGhpcy5wb3B1cFJlZi5jbG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5wb3B1cFJlZiA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldEF0dHJpYnV0ZSh0aGlzLndyYXBwZXIubmF0aXZlRWxlbWVudCwgJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmZpbHRlciAhPT0gXCJcIikge1xuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyID0gXCJcIjtcbiAgICAgICAgICAgICAgICB0aGlzLmFsbE5vZGVzSGlkZGVuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKGhhc09ic2VydmVycyh0aGlzLmZpbHRlckNoYW5nZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fem9uZS5ydW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJDaGFuZ2UuZW1pdChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHN1YnNjcmliZUV2ZW50cygpIHtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2godGhpcy5uYXZpZ2F0aW9uU2VydmljZS5vcGVuLnN1YnNjcmliZSgoKSA9PiB0aGlzLnRvZ2dsZVBvcHVwKHRydWUpKSwgdGhpcy5uYXZpZ2F0aW9uU2VydmljZS5lbnRlclxuICAgICAgICAgICAgLnBpcGUodGFwKChldmVudCkgPT4gZXZlbnQub3JpZ2luYWxFdmVudC5wcmV2ZW50RGVmYXVsdCgpKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKCkgPT4gdGhpcy50b2dnbGVQb3B1cCh0cnVlKSksIG1lcmdlKHRoaXMubmF2aWdhdGlvblNlcnZpY2UuY2xvc2UsIHRoaXMubmF2aWdhdGlvblNlcnZpY2UuZXNjKS5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgICAgICAgdGhpcy50b2dnbGVQb3B1cChmYWxzZSk7XG4gICAgICAgIH0pLCB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLnRhYi5zdWJzY3JpYmUodGhpcy5oYW5kbGVUYWJLZXkuYmluZCh0aGlzKSksIHRoaXMubmF2aWdhdGlvblNlcnZpY2UudXAuc3Vic2NyaWJlKHRoaXMuaGFuZGxlVXBLZXkuYmluZCh0aGlzKSksIHRoaXMubmF2aWdhdGlvblNlcnZpY2UuZG93bi5zdWJzY3JpYmUodGhpcy5oYW5kbGVEb3duS2V5LmJpbmQodGhpcykpLCB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLmxlZnRcbiAgICAgICAgICAgIC5waXBlKGZpbHRlcigoKSA9PiAhdGhpcy5pc1RyZWVWaWV3QWN0aXZlKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUodGhpcy5kaXJlY3Rpb24gPT09ICdydGwnID8gdGhpcy5oYW5kbGVSaWdodEtleS5iaW5kKHRoaXMpIDogdGhpcy5oYW5kbGVMZWZ0S2V5LmJpbmQodGhpcykpLCB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLnJpZ2h0XG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoKCkgPT4gIXRoaXMuaXNUcmVlVmlld0FjdGl2ZSkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKHRoaXMuZGlyZWN0aW9uID09PSAncnRsJyA/IHRoaXMuaGFuZGxlTGVmdEtleS5iaW5kKHRoaXMpIDogdGhpcy5oYW5kbGVSaWdodEtleS5iaW5kKHRoaXMpKSwgdGhpcy5uYXZpZ2F0aW9uU2VydmljZS5ob21lLnBpcGUoZmlsdGVyKCgpID0+ICF0aGlzLmlzT3BlbikpLnN1YnNjcmliZSh0aGlzLmhhbmRsZUhvbWUuYmluZCh0aGlzKSksIHRoaXMubmF2aWdhdGlvblNlcnZpY2UuZW5kLnBpcGUoZmlsdGVyKCgpID0+ICF0aGlzLmlzT3BlbikpLnN1YnNjcmliZSh0aGlzLmhhbmRsZUVuZC5iaW5kKHRoaXMpKSwgdGhpcy5uYXZpZ2F0aW9uU2VydmljZS5iYWNrc3BhY2UucGlwZShmaWx0ZXIoKCkgPT4gdGhpcy5pc1RhZ0ZvY3VzZWQpKS5zdWJzY3JpYmUodGhpcy5oYW5kbGVCYWNrc3BhY2UuYmluZCh0aGlzKSksIHRoaXMubmF2aWdhdGlvblNlcnZpY2UuZGVsZXRlLnBpcGUoZmlsdGVyKCgpID0+IHRoaXMuaXNUYWdGb2N1c2VkKSkuc3Vic2NyaWJlKHRoaXMuaGFuZGxlRGVsZXRlLmJpbmQodGhpcykpKTtcbiAgICB9XG4gICAgaGFuZGxlVGFiS2V5KCkge1xuICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgICAgIGlmICh0aGlzLmlzT3Blbikge1xuICAgICAgICAgICAgdGhpcy50cmVldmlldy5ibHVyKCk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVRyZWVWaWV3RnJvbVRhYk9yZGVyKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlVXBLZXkoZXZlbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnRyZWV2aWV3KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZXZlbnQub3JpZ2luYWxFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAvLyBQcmV2ZW50IHRvZ2dsaW5nIHRoZSBmb2N1cyBiZXR3ZWVuIHRoZSBmaWx0ZXJJbnB1dCBhbmQgdGhlIHdyYXBwZXIgZWxlbWVudHMgd2l0aCBgdXBgIGtleVxuICAgICAgICBpZiAodGhpcy5pc1dyYXBwZXJBY3RpdmUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpc0ZpcnN0Tm9kZUFjdGl2ZSA9IHRoaXMudHJlZXZpZXdbJ25hdmlnYXRpb25TZXJ2aWNlJ11bJ2FjdGl2ZUluZGV4J10gPT09ICcwJztcbiAgICAgICAgaWYgKHRoaXMuZmlsdGVyYWJsZSkge1xuICAgICAgICAgICAgY29uc3QgaXNGaWx0ZXJBY3RpdmUgPSB0aGlzLmZpbHRlcklucHV0Lm5hdGl2ZUVsZW1lbnQgPT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAoaXNGaWx0ZXJBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghaXNGaWx0ZXJBY3RpdmUgJiYgaXNGaXJzdE5vZGVBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlcklucHV0Lm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuZmlsdGVyYWJsZSAmJiBpc0ZpcnN0Tm9kZUFjdGl2ZSkge1xuICAgICAgICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZURvd25LZXkoZXZlbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnRyZWV2aWV3KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZXZlbnQub3JpZ2luYWxFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAvLyBQdXQgdGhlIGZvY3VzIGJhY2sgb24gdGhlIGZpbHRlciBpbnB1dCBpZiB0aGUgd3JhcHBlciBpcyBmb2N1c2VkXG4gICAgICAgIGlmICh0aGlzLmZpbHRlcmFibGUgJiYgdGhpcy5pc1dyYXBwZXJBY3RpdmUpIHtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVySW5wdXQubmF0aXZlRWxlbWVudC5mb2N1cygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCF0aGlzLnRyZWV2aWV3LmlzQWN0aXZlKSB7XG4gICAgICAgICAgICB0aGlzLnRyZWV2aWV3LmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mb2N1c2VkVGFnSW5kZXggPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGhhbmRsZVJpZ2h0S2V5KGV2ZW50KSB7XG4gICAgICAgIGV2ZW50Lm9yaWdpbmFsRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgY29uc3QgbGFzdCA9IHRoaXMudGFncy5sZW5ndGggLSAxO1xuICAgICAgICBpZiAodGhpcy5mb2N1c2VkVGFnSW5kZXggPT09IGxhc3QpIHtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNlZFRhZ0luZGV4ID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZm9jdXNlZFRhZ0luZGV4IDwgbGFzdCkge1xuICAgICAgICAgICAgdGhpcy5mb2N1c2VkVGFnSW5kZXgrKztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghdGhpcy5mb2N1c2VkVGFnSW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNlZFRhZ0luZGV4ID0gMDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVMZWZ0S2V5KGV2ZW50KSB7XG4gICAgICAgIGV2ZW50Lm9yaWdpbmFsRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKHRoaXMuZm9jdXNlZFRhZ0luZGV4ID09PSB1bmRlZmluZWQgfHwgdGhpcy5mb2N1c2VkVGFnSW5kZXggPCAwKSB7XG4gICAgICAgICAgICB0aGlzLmZvY3VzZWRUYWdJbmRleCA9IHRoaXMudGFncy5sZW5ndGggLSAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZm9jdXNlZFRhZ0luZGV4ICE9PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmZvY3VzZWRUYWdJbmRleC0tO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZUVuZChldmVudCkge1xuICAgICAgICBldmVudC5vcmlnaW5hbEV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuZm9jdXNlZFRhZ0luZGV4ID0gdGhpcy50YWdzLmxlbmd0aCAtIDE7XG4gICAgfVxuICAgIGhhbmRsZUhvbWUoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQub3JpZ2luYWxFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLmZvY3VzZWRUYWdJbmRleCA9IDA7XG4gICAgfVxuICAgIGhhbmRsZUJhY2tzcGFjZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuZm9jdXNlZFRhZ0luZGV4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRGVsZXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSB0aGlzLnRhZ3NbdGhpcy50YWdzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnRhZ3MubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlUmVtb3ZlVGFnKHsgdGFnLCBpbmRleCB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVEZWxldGUoKSB7XG4gICAgICAgIGNvbnN0IHRhZyA9IHRoaXMudGFnc1t0aGlzLmZvY3VzZWRUYWdJbmRleF07XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5mb2N1c2VkVGFnSW5kZXg7XG4gICAgICAgIHRoaXMuaGFuZGxlUmVtb3ZlVGFnKHsgdGFnLCBpbmRleCB9KTtcbiAgICAgICAgaWYgKHRoaXMuZm9jdXNlZFRhZ0luZGV4ID09PSB0aGlzLnRhZ3MubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLmZvY3VzZWRUYWdJbmRleCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1bnN1YnNjcmliZUV2ZW50cygpIHtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmZvckVhY2goc3ViID0+IHN1Yi51bnN1YnNjcmliZSgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoZSBgVHJlZVZpZXdgIGZyb20gdGhlIHRhYiBvcmRlciwgb3RoZXJ3aXNlIGEgZm9jdXMgbG9vcCBiZXR3ZWVuIHRoZSBwYWdlIGVsZW1lbnRzIHdpbGwgb2NjdXJcbiAgICAgKiBhbmQgdGhlIHVzZXIgd2lsbCBub3QgYmUgYWJsZSB0byB0YWIgdG8gdGhlIHJlc3Qgb2YgdGhlIGJyb3dzZXIgZWxlbWVudHNcbiAgICAgKi9cbiAgICByZW1vdmVUcmVlVmlld0Zyb21UYWJPcmRlcigpIHtcbiAgICAgICAgY29uc3Qgbm9kZXMgPSB0aGlzLnRyZWV2aWV3LmVsZW1lbnQubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdsaScpO1xuICAgICAgICBub2Rlcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgaWYgKGl0ZW0uZ2V0QXR0cmlidXRlKCd0YWJpbmRleCcpID09PSAnMCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3ROb2RlT25Gb2N1cyA9IGl0ZW07XG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0Tm9kZU9uRm9jdXMuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICctMScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2V0U3RhdGUoKSB7XG4gICAgICAgIGlmIChpc1ByZXNlbnQodGhpcy5kYXRhSXRlbXMpICYmIGlzUHJlc2VudCh0aGlzLnZhbHVlRmllbGQpKSB7XG4gICAgICAgICAgICB0aGlzLnNldFRhZ3MoKTtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tlZEl0ZW1zID0gdGhpcy5kYXRhSXRlbXMuc2xpY2UoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG4gICAgc2V0VGFncygpIHtcbiAgICAgICAgY29uc3Qgc291cmNlID0gdGhpcy5kYXRhSXRlbXMubWFwKGl0ZW0gPT4gaXRlbS5kYXRhSXRlbSk7XG4gICAgICAgIHRoaXMudGFncyA9IHRoaXMudGFnTWFwcGVyKHNvdXJjZSk7XG4gICAgICAgIHRoaXMuZGlzYWJsZWRJbmRpY2VzID0gdGhpcy5kaXNhYmxlZEl0ZW1zTWFwcGVyKCk7XG4gICAgfVxuICAgIHVwZGF0ZVZhbHVlKHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gdGhpcy52YWx1ZVByaW1pdGl2ZSA/XG4gICAgICAgICAgICB2YWx1ZS5tYXAoaXRlbSA9PiB2YWx1ZUZyb20oaXRlbSwgdGhpcy52YWx1ZUZpZWxkKSkgOlxuICAgICAgICAgICAgdmFsdWUubWFwKGl0ZW0gPT4gaXRlbS5kYXRhSXRlbSk7XG4gICAgICAgIHRoaXMudmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgdGhpcy5lbWl0VmFsdWVDaGFuZ2UodGhpcy52YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKlxuICAgICAqIERldGVybWluZXMgd2hpY2ggb2YgdGhlIHByb3ZpZGVkIHRhZ3Mgc2hvdWxkIGJlIGRpc2FibGVkIGFuZCBzdG9yZXMgdGhlaXIgcG9zaXRpb24gaW5kaWNlc1xuICAgICAqL1xuICAgIGRpc2FibGVkSXRlbXNNYXBwZXIoKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2V0KHRoaXMuZGF0YUl0ZW1zLnJlZHVjZSgoaW5kaWNlcywgaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLml0ZW1EaXNhYmxlZChpdGVtLmRhdGFJdGVtLCBpdGVtLmluZGV4KSkge1xuICAgICAgICAgICAgICAgIGluZGljZXMucHVzaChpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW5kaWNlcztcbiAgICAgICAgfSwgW10pKTtcbiAgICB9XG59O1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmstd2lkZ2V0JyksXG4gICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmstZHJvcGRvd250cmVlJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBNdWx0aVNlbGVjdFRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcImhvc3RDbGFzc2VzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnYXR0ci5kaXInKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgTXVsdGlTZWxlY3RUcmVlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXJlY3Rpb25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIENvbnRlbnRDaGlsZChIZWFkZXJUZW1wbGF0ZURpcmVjdGl2ZSwgeyBzdGF0aWM6IGZhbHNlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBIZWFkZXJUZW1wbGF0ZURpcmVjdGl2ZSlcbl0sIE11bHRpU2VsZWN0VHJlZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiaGVhZGVyVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIENvbnRlbnRDaGlsZChGb290ZXJUZW1wbGF0ZURpcmVjdGl2ZSwgeyBzdGF0aWM6IGZhbHNlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBGb290ZXJUZW1wbGF0ZURpcmVjdGl2ZSlcbl0sIE11bHRpU2VsZWN0VHJlZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiZm9vdGVyVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIENvbnRlbnRDaGlsZChOb2RlVGVtcGxhdGVEaXJlY3RpdmUsIHsgc3RhdGljOiBmYWxzZSB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTm9kZVRlbXBsYXRlRGlyZWN0aXZlKVxuXSwgTXVsdGlTZWxlY3RUcmVlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJub2RlVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIENvbnRlbnRDaGlsZChOb0RhdGFUZW1wbGF0ZURpcmVjdGl2ZSwgeyBzdGF0aWM6IGZhbHNlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOb0RhdGFUZW1wbGF0ZURpcmVjdGl2ZSlcbl0sIE11bHRpU2VsZWN0VHJlZUNvbXBvbmVudC5wcm90b3R5cGUsIFwibm9EYXRhVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIENvbnRlbnRDaGlsZChUYWdUZW1wbGF0ZURpcmVjdGl2ZSwgeyBzdGF0aWM6IGZhbHNlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBUYWdUZW1wbGF0ZURpcmVjdGl2ZSlcbl0sIE11bHRpU2VsZWN0VHJlZUNvbXBvbmVudC5wcm90b3R5cGUsIFwidGFnVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIENvbnRlbnRDaGlsZChHcm91cFRhZ1RlbXBsYXRlRGlyZWN0aXZlLCB7IHN0YXRpYzogZmFsc2UgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEdyb3VwVGFnVGVtcGxhdGVEaXJlY3RpdmUpXG5dLCBNdWx0aVNlbGVjdFRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcImdyb3VwVGFnVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIFZpZXdDaGlsZCgncG9wdXBUZW1wbGF0ZScsIHsgc3RhdGljOiB0cnVlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBUZW1wbGF0ZVJlZilcbl0sIE11bHRpU2VsZWN0VHJlZUNvbXBvbmVudC5wcm90b3R5cGUsIFwicG9wdXBUZW1wbGF0ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgVmlld0NoaWxkKCd3cmFwcGVyJywgeyBzdGF0aWM6IHRydWUgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEVsZW1lbnRSZWYpXG5dLCBNdWx0aVNlbGVjdFRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcIndyYXBwZXJcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIFZpZXdDaGlsZCgnY29udGFpbmVyJywgeyByZWFkOiBWaWV3Q29udGFpbmVyUmVmLCBzdGF0aWM6IHRydWUgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFZpZXdDb250YWluZXJSZWYpXG5dLCBNdWx0aVNlbGVjdFRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcImNvbnRhaW5lclwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgVmlld0NoaWxkKCd0cmVldmlldycsIHsgc3RhdGljOiBmYWxzZSB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgVHJlZVZpZXdDb21wb25lbnQpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbVHJlZVZpZXdDb21wb25lbnRdKVxuXSwgTXVsdGlTZWxlY3RUcmVlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0cmVldmlld1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIFZpZXdDaGlsZCgnZmlsdGVySW5wdXQnLCB7IHN0YXRpYzogZmFsc2UgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEVsZW1lbnRSZWYpXG5dLCBNdWx0aVNlbGVjdFRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcImZpbHRlcklucHV0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOdW1iZXIpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTnVtYmVyXSlcbl0sIE11bHRpU2VsZWN0VHJlZUNvbXBvbmVudC5wcm90b3R5cGUsIFwidGFiaW5kZXhcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSlcbl0sIE11bHRpU2VsZWN0VHJlZUNvbXBvbmVudC5wcm90b3R5cGUsIFwicG9wdXBTZXR0aW5nc1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKVxuXSwgTXVsdGlTZWxlY3RUcmVlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJjaGVja2FibGVTZXR0aW5nc1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEFycmF5KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0FycmF5XSlcbl0sIE11bHRpU2VsZWN0VHJlZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiZGF0YVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEFycmF5KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0FycmF5XSlcbl0sIE11bHRpU2VsZWN0VHJlZUNvbXBvbmVudC5wcm90b3R5cGUsIFwidmFsdWVcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBBcnJheSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtBcnJheV0pXG5dLCBNdWx0aVNlbGVjdFRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcImRhdGFJdGVtc1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbl0sIE11bHRpU2VsZWN0VHJlZUNvbXBvbmVudC5wcm90b3R5cGUsIFwidGV4dEZpZWxkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG5dLCBNdWx0aVNlbGVjdFRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcInZhbHVlRmllbGRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEFycmF5KVxuXSwgTXVsdGlTZWxlY3RUcmVlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ2YWx1ZURlcHRoXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgTXVsdGlTZWxlY3RUcmVlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJsb2FkaW5nXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBNdWx0aVNlbGVjdFRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcInBsYWNlaG9sZGVyXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOdW1iZXIpXG5dLCBNdWx0aVNlbGVjdFRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcImxpc3RIZWlnaHRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBNdWx0aVNlbGVjdFRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcImRpc2FibGVkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgTXVsdGlTZWxlY3RUcmVlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJyZWFkb25seVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIE11bHRpU2VsZWN0VHJlZUNvbXBvbmVudC5wcm90b3R5cGUsIFwidmFsdWVQcmltaXRpdmVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBNdWx0aVNlbGVjdFRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcImxvYWRPbkRlbWFuZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgTXVsdGlTZWxlY3RUcmVlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJmb2N1c2FibGVJZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIE11bHRpU2VsZWN0VHJlZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiY2xlYXJCdXR0b25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBNdWx0aVNlbGVjdFRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcImZpbHRlcmFibGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZ1bmN0aW9uKVxuXSwgTXVsdGlTZWxlY3RUcmVlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJoYXNDaGlsZHJlblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pXG5dLCBNdWx0aVNlbGVjdFRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcImZldGNoQ2hpbGRyZW5cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZ1bmN0aW9uKVxuXSwgTXVsdGlTZWxlY3RUcmVlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpc05vZGVFeHBhbmRlZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pXG5dLCBNdWx0aVNlbGVjdFRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcImlzTm9kZVZpc2libGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZ1bmN0aW9uKVxuXSwgTXVsdGlTZWxlY3RUcmVlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpdGVtRGlzYWJsZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbl0sIE11bHRpU2VsZWN0VHJlZUNvbXBvbmVudC5wcm90b3R5cGUsIFwidGFnTWFwcGVyXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoJ2ZvY3VzJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIE11bHRpU2VsZWN0VHJlZUNvbXBvbmVudC5wcm90b3R5cGUsIFwib25Gb2N1c1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCdibHVyJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIE11bHRpU2VsZWN0VHJlZUNvbXBvbmVudC5wcm90b3R5cGUsIFwib25CbHVyXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgTXVsdGlTZWxlY3RUcmVlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJvcGVuXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgTXVsdGlTZWxlY3RUcmVlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJvcGVuZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBNdWx0aVNlbGVjdFRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcImNsb3NlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgTXVsdGlTZWxlY3RUcmVlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJjbG9zZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBNdWx0aVNlbGVjdFRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcIm5vZGVFeHBhbmRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBNdWx0aVNlbGVjdFRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcIm5vZGVDb2xsYXBzZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIE11bHRpU2VsZWN0VHJlZUNvbXBvbmVudC5wcm90b3R5cGUsIFwidmFsdWVDaGFuZ2VcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBNdWx0aVNlbGVjdFRyZWVDb21wb25lbnQucHJvdG90eXBlLCBcInJlbW92ZVRhZ1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIE11bHRpU2VsZWN0VHJlZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiZmlsdGVyQ2hhbmdlXCIsIHZvaWQgMCk7XG5NdWx0aVNlbGVjdFRyZWVDb21wb25lbnQgPSBNdWx0aVNlbGVjdFRyZWVDb21wb25lbnRfMSA9IF9fZGVjb3JhdGUoW1xuICAgIENvbXBvbmVudCh7XG4gICAgICAgIGV4cG9ydEFzOiAna2VuZG9NdWx0aVNlbGVjdFRyZWUnLFxuICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgIExvY2FsaXphdGlvblNlcnZpY2UsXG4gICAgICAgICAgICBOYXZpZ2F0aW9uU2VydmljZSxcbiAgICAgICAgICAgIERhdGFTZXJ2aWNlLFxuICAgICAgICAgICAgRGlzYWJsZWRJdGVtc1NlcnZpY2UsXG4gICAgICAgICAgICBTZWxlY3Rpb25TZXJ2aWNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHByb3ZpZGU6IEwxME5fUFJFRklYLFxuICAgICAgICAgICAgICAgIHVzZVZhbHVlOiAna2VuZG8ubXVsdGlzZWxlY3R0cmVlJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBtdWx0aTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcbiAgICAgICAgICAgICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBNdWx0aVNlbGVjdFRyZWVDb21wb25lbnRfMSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZTogRGF0YUJvdW5kQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IE11bHRpU2VsZWN0VHJlZUNvbXBvbmVudF8xKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwcm92aWRlOiBFeHBhbmRhYmxlQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IE11bHRpU2VsZWN0VHJlZUNvbXBvbmVudF8xKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwcm92aWRlOiBLZW5kb0lucHV0LFxuICAgICAgICAgICAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IE11bHRpU2VsZWN0VHJlZUNvbXBvbmVudF8xKVxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBzZWxlY3RvcjogJ2tlbmRvLW11bHRpc2VsZWN0dHJlZScsXG4gICAgICAgIHRlbXBsYXRlOiBgXG4gICAgICAgIDxuZy1jb250YWluZXIga2VuZG9NdWx0aVNlbGVjdFRyZWVMb2NhbGl6ZWRNZXNzYWdlc1xuICAgICAgICAgICAgaTE4bi1ub0RhdGFUZXh0PVwia2VuZG8ubXVsdGlzZWxlY3R0cmVlLm5vRGF0YVRleHR8VGhlIHRleHQgZGlzcGxheWVkIGluIHRoZSBwb3B1cCB3aGVuIHRoZXJlIGFyZSBubyBpdGVtc1wiXG4gICAgICAgICAgICBub0RhdGFUZXh0PVwiTk8gREFUQSBGT1VORFwiXG5cbiAgICAgICAgICAgIGkxOG4tY2xlYXJUaXRsZT1cImtlbmRvLm11bHRpc2VsZWN0dHJlZS5jbGVhclRpdGxlfFRoZSB0aXRsZSBvZiB0aGUgY2xlYXIgYnV0dG9uXCJcbiAgICAgICAgICAgIGNsZWFyVGl0bGU9XCJjbGVhclwiXG4gICAgICAgID5cbiAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgIDxkaXYgI3dyYXBwZXJcbiAgICAgICAgICAgIFtuZ0NsYXNzXT1cIntcbiAgICAgICAgICAgICAgICAnay1tdWx0aXNlbGVjdC13cmFwJzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAnay1mbG9hdHdyYXAnOiB0cnVlLFxuICAgICAgICAgICAgICAgICdrLXN0YXRlLWRpc2FibGVkJzogdGhpcy5kaXNhYmxlZFxuICAgICAgICAgICAgfVwiXG4gICAgICAgICAgICByb2xlPVwibGlzdGJveFwiXG4gICAgICAgICAgICBhcmlhLWhhc3BvcHVwPVwidHJlZVwiXG4gICAgICAgICAgICBbYXR0ci5hcmlhLWRlc2NyaWJlZGJ5XT1cInRhZ0xpc3RJZFwiXG4gICAgICAgICAgICBbYXR0ci5hcmlhLXJlYWRvbmx5XT1cInJlYWRvbmx5XCJcbiAgICAgICAgICAgIFthdHRyLmFyaWEtYWN0aXZlZGVzY2VuZGFudF09XCJmb2N1c2VkVGFnSWRcIlxuICAgICAgICAgICAgW2F0dHIudGFiaW5kZXhdPVwidGFiaW5kZXhcIlxuICAgICAgICAgICAgW2F0dHIuaWRdPVwiZm9jdXNhYmxlSWRcIlxuICAgICAgICAgICAgW2F0dHIuZGlyXT1cImRpcmVjdGlvblwiXG4gICAgICAgICAgICAoY2xpY2spPVwiaGFuZGxlQ2xpY2soKVwiXG4gICAgICAgICAgICAoa2V5ZG93bik9XCJoYW5kbGVLZXlkb3duKCRldmVudClcIlxuICAgICAgICAgICAgW2tlbmRvRXZlbnRzT3V0c2lkZUFuZ3VsYXJdPVwie1xuICAgICAgICAgICAgICAgIGZvY3VzOiBoYW5kbGVGb2N1cyxcbiAgICAgICAgICAgICAgICBibHVyOiBoYW5kbGVCbHVyXG4gICAgICAgICAgICB9XCJcbiAgICAgICAgICAgIFtzY29wZV09XCJ0aGlzXCJcbiAgICAgICAgPlxuICAgICAgICAgICAgPGtlbmRvLXRhZ2xpc3RcbiAgICAgICAgICAgICAgICBbaWRdPVwidGFnTGlzdElkXCJcbiAgICAgICAgICAgICAgICBbdGFnc109XCJ0YWdzXCJcbiAgICAgICAgICAgICAgICBbZm9jdXNlZF09XCJmb2N1c2VkVGFnSW5kZXhcIlxuICAgICAgICAgICAgICAgIFt0ZXh0RmllbGRdPVwidGV4dEZpZWxkXCJcbiAgICAgICAgICAgICAgICBbdmFsdWVGaWVsZF09XCJ2YWx1ZUZpZWxkXCJcbiAgICAgICAgICAgICAgICBbdmFsdWVEZXB0aF09XCJ2YWx1ZURlcHRoXCJcbiAgICAgICAgICAgICAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWRcIlxuICAgICAgICAgICAgICAgIFt0YWdQcmVmaXhdPVwidGFnUHJlZml4XCJcbiAgICAgICAgICAgICAgICBbdGVtcGxhdGVdPVwidGFnVGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgIFtncm91cFRlbXBsYXRlXT1cImdyb3VwVGFnVGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgIFtkaXNhYmxlZEluZGljZXNdPVwiZGlzYWJsZWRJbmRpY2VzXCJcbiAgICAgICAgICAgICAgICAocmVtb3ZlVGFnKT1cImhhbmRsZVJlbW92ZVRhZygkZXZlbnQpXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgIDwva2VuZG8tdGFnbGlzdD5cbiAgICAgICAgICAgIDxzcGFuICpuZ0lmPVwiIXRhZ3MgfHwgIXRhZ3MubGVuZ3RoXCJcbiAgICAgICAgICAgICAgICBjbGFzcz1cImstaW5wdXQgay1yZWFkb25seVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge3sgcGxhY2Vob2xkZXIgfX1cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgKm5nSWY9XCIhZGlzYWJsZWQgJiYgIWxvYWRpbmcgJiYgIXJlYWRvbmx5ICYmIGNsZWFyQnV0dG9uICYmIHRhZ3M/Lmxlbmd0aFwiXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJrLWljb24gay1jbGVhci12YWx1ZSBrLWktY2xvc2VcIlxuICAgICAgICAgICAgICAgIFthdHRyLnRpdGxlXT1cIm1lc3NhZ2VGb3IoJ2NsZWFyVGl0bGUnKVwiXG4gICAgICAgICAgICAgICAgcm9sZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgdGFiaW5kZXg9XCItMVwiXG4gICAgICAgICAgICAgICAgKGNsaWNrKT1cImNsZWFyQWxsKCRldmVudClcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICAqbmdJZj1cImxvYWRpbmdcIlxuICAgICAgICAgICAgICAgIGNsYXNzPVwiay1pY29uIGstaS1sb2FkaW5nXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxuZy10ZW1wbGF0ZSAjcG9wdXBUZW1wbGF0ZT5cbiAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgKm5nSWY9XCJmaWx0ZXJhYmxlXCJcbiAgICAgICAgICAgICAgICBjbGFzcz1cImstbGlzdC1maWx0ZXJcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAjZmlsdGVySW5wdXRcbiAgICAgICAgICAgICAgICAgICAgKGlucHV0KT1cImhhbmRsZUZpbHRlcklucHV0Q2hhbmdlKCRldmVudC50YXJnZXQudmFsdWUpXCJcbiAgICAgICAgICAgICAgICAgICAgW2ZpbHRlcklucHV0XT1cImZpbHRlcmFibGUgJiYgIXRvdWNoRW5hYmxlZFwiXG4gICAgICAgICAgICAgICAgICAgIChrZXlkb3duLmFycm93ZG93bik9XCJoYW5kbGVLZXlkb3duKCRldmVudClcIlxuICAgICAgICAgICAgICAgICAgICAoa2V5ZG93bi5hcnJvd3VwKT1cImhhbmRsZUtleWRvd24oJGV2ZW50KVwiXG4gICAgICAgICAgICAgICAgICAgIChrZXlkb3duLmFsdC5hcnJvd3VwKT1cImhhbmRsZUtleWRvd24oJGV2ZW50KVwiXG4gICAgICAgICAgICAgICAgICAgIFsobmdNb2RlbCldPVwiZmlsdGVyXCJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJrLXRleHRib3hcIlxuICAgICAgICAgICAgICAgICAgICByb2xlPVwidGV4dGJveFwiXG4gICAgICAgICAgICAgICAgICAgIGFyaWEtaGFzcG9wdXA9XCJ0cnVlXCJcbiAgICAgICAgICAgICAgICAgICAgYXJpYS1leHBhbmRlZD1cImZhbHNlXCJcbiAgICAgICAgICAgICAgICAgICAgdGFiaW5kZXg9XCIwXCJcbiAgICAgICAgICAgICAgICAgICAgYXJpYS1kaXNhYmxlZD1cImZhbHNlXCJcbiAgICAgICAgICAgICAgICAgICAgYXJpYS1yZWFkb25seT1cImZhbHNlXCJcbiAgICAgICAgICAgICAgICAgICAgW2tlbmRvRXZlbnRzT3V0c2lkZUFuZ3VsYXJdPVwie1xuICAgICAgICAgICAgICAgICAgICAgICAgYmx1cjogaGFuZGxlQmx1clxuICAgICAgICAgICAgICAgICAgICB9XCJcbiAgICAgICAgICAgICAgICAgICAgW3Njb3BlXT1cInRoaXNcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktem9vbVwiPjwvc3Bhbj5cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDwhLS1oZWFkZXIgdGVtcGxhdGUtLT5cbiAgICAgICAgICAgIDxuZy10ZW1wbGF0ZVxuICAgICAgICAgICAgICAgICpuZ0lmPVwiaGVhZGVyVGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgIFt0ZW1wbGF0ZUNvbnRleHRdPVwie1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVJlZjogaGVhZGVyVGVtcGxhdGU/LnRlbXBsYXRlUmVmXG4gICAgICAgICAgICAgICAgfVwiPlxuICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgIDxrZW5kby10cmVldmlld1xuICAgICAgICAgICAgICAgICN0cmVldmlld1xuICAgICAgICAgICAgICAgIFtub2Rlc109XCJkYXRhXCJcbiAgICAgICAgICAgICAgICBbc3R5bGUubWF4SGVpZ2h0LnB4XT1cImxpc3RIZWlnaHRcIlxuICAgICAgICAgICAgICAgIFthbmltYXRlXT1cImZhbHNlXCJcbiAgICAgICAgICAgICAgICBrZW5kb011bHRpU2VsZWN0VHJlZUNoZWNrYWJsZVxuICAgICAgICAgICAgICAgIFtjaGVja2FibGVdPVwiY2hlY2thYmxlU2V0dGluZ3NcIlxuICAgICAgICAgICAgICAgIFtjaGVja2VkSXRlbXNdPVwiY2hlY2tlZEl0ZW1zXCJcbiAgICAgICAgICAgICAgICBbdmFsdWVGaWVsZF09XCJ2YWx1ZUZpZWxkXCJcbiAgICAgICAgICAgICAgICBbdGV4dEZpZWxkXT1cInRleHRGaWVsZFwiXG4gICAgICAgICAgICAgICAgW2NoaWxkcmVuXT1cImNoaWxkcmVuXCJcbiAgICAgICAgICAgICAgICBbaGFzQ2hpbGRyZW5dPVwiaGFzQ2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgIFtpc0V4cGFuZGVkXT1cImlzTm9kZUV4cGFuZGVkXCJcbiAgICAgICAgICAgICAgICBbaXNEaXNhYmxlZF09XCJpdGVtRGlzYWJsZWRcIlxuICAgICAgICAgICAgICAgIFtub2RlVGVtcGxhdGVdPVwibm9kZVRlbXBsYXRlXCJcbiAgICAgICAgICAgICAgICBbbG9hZE9uRGVtYW5kXT1cImxvYWRPbkRlbWFuZFwiXG4gICAgICAgICAgICAgICAgW2ZpbHRlcl09XCJmaWx0ZXJcIlxuICAgICAgICAgICAgICAgIFtpc1Zpc2libGVdPVwiaXNOb2RlVmlzaWJsZVwiXG4gICAgICAgICAgICAgICAgKGtleWRvd24pPVwiaGFuZGxlS2V5ZG93bigkZXZlbnQpXCJcbiAgICAgICAgICAgICAgICAobm9kZUNsaWNrKT1cImhhbmRsZU5vZGVDbGljaygkZXZlbnQpXCJcbiAgICAgICAgICAgICAgICAoZXhwYW5kKT1cIm5vZGVFeHBhbmQuZW1pdCgkZXZlbnQpXCJcbiAgICAgICAgICAgICAgICAoY29sbGFwc2UpPVwibm9kZUNvbGxhcHNlLmVtaXQoJGV2ZW50KVwiXG4gICAgICAgICAgICAgICAgKGNoZWNrZWRJdGVtc0NoYW5nZSk9XCJoYW5kbGVDaGVja2VkSXRlbXNDaGFuZ2UoJGV2ZW50KVwiXG4gICAgICAgICAgICAgICAgW2tlbmRvRXZlbnRzT3V0c2lkZUFuZ3VsYXJdPVwie1xuICAgICAgICAgICAgICAgICAgICBmb2N1c291dDogaGFuZGxlQmx1clxuICAgICAgICAgICAgICAgIH1cIlxuICAgICAgICAgICAgICAgIFtzY29wZV09XCJ0aGlzXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgIDwva2VuZG8tdHJlZXZpZXc+XG4gICAgICAgICAgICA8IS0tZm9vdGVyIHRlbXBsYXRlLS0+XG4gICAgICAgICAgICA8bmctdGVtcGxhdGVcbiAgICAgICAgICAgICAgICAqbmdJZj1cImZvb3RlclRlbXBsYXRlXCJcbiAgICAgICAgICAgICAgICBbdGVtcGxhdGVDb250ZXh0XT1cIntcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVSZWY6IGZvb3RlclRlbXBsYXRlPy50ZW1wbGF0ZVJlZlxuICAgICAgICAgICAgICAgIH1cIj5cbiAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICA8IS0tbm8tZGF0YSB0ZW1wbGF0ZS0tPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImstbm9kYXRhXCIgKm5nSWY9XCJkYXRhPy5sZW5ndGggPT09IDAgfHwgYWxsTm9kZXNIaWRkZW5cIj5cbiAgICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgW25nSWZdPVwibm9EYXRhVGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgICAgICBbdGVtcGxhdGVDb250ZXh0XT1cIntcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUmVmOiBub0RhdGFUZW1wbGF0ZT8udGVtcGxhdGVSZWZcbiAgICAgICAgICAgICAgICAgICAgfVwiPlxuICAgICAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlIFtuZ0lmXT1cIiFub0RhdGFUZW1wbGF0ZVwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2Pnt7IG1lc3NhZ2VGb3IoJ25vRGF0YVRleHQnKSB9fTwvZGl2PlxuICAgICAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgPG5nLWNvbnRhaW5lciAjY29udGFpbmVyPjwvbmctY29udGFpbmVyPlxuICAgIGBcbiAgICB9KSxcbiAgICBfX3BhcmFtKDcsIE9wdGlvbmFsKCkpLCBfX3BhcmFtKDcsIEluamVjdChUT1VDSF9FTkFCTEVEKSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtQb3B1cFNlcnZpY2UsXG4gICAgICAgIFJlbmRlcmVyMixcbiAgICAgICAgRWxlbWVudFJlZixcbiAgICAgICAgTmF2aWdhdGlvblNlcnZpY2UsXG4gICAgICAgIE5nWm9uZSxcbiAgICAgICAgTG9jYWxpemF0aW9uU2VydmljZSxcbiAgICAgICAgQ2hhbmdlRGV0ZWN0b3JSZWYsIEJvb2xlYW5dKVxuXSwgTXVsdGlTZWxlY3RUcmVlQ29tcG9uZW50KTtcblxuLyoqXG4gKiBBIGRpcmVjdGl2ZSB3aGljaCBlbmNhcHN1bGF0ZXMgdGhlIHJldHJpZXZhbCBvZiB0aGUgY2hpbGQgbm9kZXMgd2hlbiBmbGF0IGRhdGEgaXMgcHJvdmlkZWQuXG4gKi9cbmxldCBEcm9wRG93blRyZWVGbGF0QmluZGluZ0RpcmVjdGl2ZSA9IGNsYXNzIERyb3BEb3duVHJlZUZsYXRCaW5kaW5nRGlyZWN0aXZlIGV4dGVuZHMgRmxhdERhdGFCaW5kaW5nRGlyZWN0aXZlIHtcbiAgICBjb25zdHJ1Y3Rvcihkcm9wRG93blRyZWUpIHtcbiAgICAgICAgc3VwZXIoZHJvcERvd25UcmVlKTtcbiAgICB9XG59O1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoJ2tlbmRvRHJvcERvd25UcmVlRmxhdEJpbmRpbmcnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQXJyYXkpXG5dLCBEcm9wRG93blRyZWVGbGF0QmluZGluZ0RpcmVjdGl2ZS5wcm90b3R5cGUsIFwibm9kZXNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCd2YWx1ZUZpZWxkJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIERyb3BEb3duVHJlZUZsYXRCaW5kaW5nRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJpZEZpZWxkXCIsIHZvaWQgMCk7XG5Ecm9wRG93blRyZWVGbGF0QmluZGluZ0RpcmVjdGl2ZSA9IF9fZGVjb3JhdGUoW1xuICAgIERpcmVjdGl2ZSh7XG4gICAgICAgIHNlbGVjdG9yOiAnW2tlbmRvRHJvcERvd25UcmVlRmxhdEJpbmRpbmddJ1xuICAgIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbRGF0YUJvdW5kQ29tcG9uZW50XSlcbl0sIERyb3BEb3duVHJlZUZsYXRCaW5kaW5nRGlyZWN0aXZlKTtcblxuLyoqXG4gKiBBIGRpcmVjdGl2ZSB3aGljaCBlbmNhcHN1bGF0ZXMgdGhlIHJldHJpZXZhbCBvZiB0aGUgY2hpbGQgbm9kZXMgd2hlbiBoaWVyYXJjaGljYWwgZGF0YSBpcyBwcm92aWRlZC5cbiAqL1xubGV0IERyb3BEb3duVHJlZUhpZXJhcmNoeUJpbmRpbmdEaXJlY3RpdmUgPSBjbGFzcyBEcm9wRG93blRyZWVIaWVyYXJjaHlCaW5kaW5nRGlyZWN0aXZlIGV4dGVuZHMgSGllcmFyY2h5QmluZGluZ0RpcmVjdGl2ZSB7XG4gICAgY29uc3RydWN0b3IoZHJvcERvd25UcmVlKSB7XG4gICAgICAgIHN1cGVyKGRyb3BEb3duVHJlZSk7XG4gICAgICAgIHRoaXMuZHJvcERvd25UcmVlID0gZHJvcERvd25UcmVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbm9kZXMgd2hpY2ggd2lsbCBiZSBkaXNwbGF5ZWQgYnkgdGhlIERyb3BEb3duVHJlZS5cbiAgICAgKi9cbiAgICBzZXQgZGF0YShub2Rlcykge1xuICAgICAgICB0aGlzLmRyb3BEb3duVHJlZS5ub2RlcyA9IG5vZGVzO1xuICAgICAgICB0aGlzLm5vZGVzID0gbm9kZXM7XG4gICAgfVxufTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCdrZW5kb0Ryb3BEb3duVHJlZUhpZXJhcmNoeUJpbmRpbmcnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQXJyYXkpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQXJyYXldKVxuXSwgRHJvcERvd25UcmVlSGllcmFyY2h5QmluZGluZ0RpcmVjdGl2ZS5wcm90b3R5cGUsIFwiZGF0YVwiLCBudWxsKTtcbkRyb3BEb3duVHJlZUhpZXJhcmNoeUJpbmRpbmdEaXJlY3RpdmUgPSBfX2RlY29yYXRlKFtcbiAgICBEaXJlY3RpdmUoe1xuICAgICAgICBzZWxlY3RvcjogJ1trZW5kb0Ryb3BEb3duVHJlZUhpZXJhcmNoeUJpbmRpbmddJ1xuICAgIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbRGF0YUJvdW5kQ29tcG9uZW50XSlcbl0sIERyb3BEb3duVHJlZUhpZXJhcmNoeUJpbmRpbmdEaXJlY3RpdmUpO1xuXG4vKipcbiAqIEEgZGlyZWN0aXZlIHdoaWNoIGVuY2Fwc3VsYXRlcyB0aGUgcmV0cmlldmFsIG9mIHRoZSBjaGlsZCBub2RlcyB3aGVuIGZsYXQgZGF0YSBpcyBwcm92aWRlZC5cbiAqL1xubGV0IE11bHRpU2VsZWN0VHJlZUZsYXRCaW5kaW5nRGlyZWN0aXZlID0gY2xhc3MgTXVsdGlTZWxlY3RUcmVlRmxhdEJpbmRpbmdEaXJlY3RpdmUgZXh0ZW5kcyBGbGF0RGF0YUJpbmRpbmdEaXJlY3RpdmUge1xuICAgIGNvbnN0cnVjdG9yKG11bHRpU2VsZWN0VHJlZSkge1xuICAgICAgICBzdXBlcihtdWx0aVNlbGVjdFRyZWUpO1xuICAgIH1cbn07XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgna2VuZG9NdWx0aVNlbGVjdFRyZWVGbGF0QmluZGluZycpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBBcnJheSlcbl0sIE11bHRpU2VsZWN0VHJlZUZsYXRCaW5kaW5nRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJub2Rlc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoJ3ZhbHVlRmllbGQnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgTXVsdGlTZWxlY3RUcmVlRmxhdEJpbmRpbmdEaXJlY3RpdmUucHJvdG90eXBlLCBcImlkRmllbGRcIiwgdm9pZCAwKTtcbk11bHRpU2VsZWN0VHJlZUZsYXRCaW5kaW5nRGlyZWN0aXZlID0gX19kZWNvcmF0ZShbXG4gICAgRGlyZWN0aXZlKHtcbiAgICAgICAgc2VsZWN0b3I6ICdba2VuZG9NdWx0aVNlbGVjdFRyZWVGbGF0QmluZGluZ10nXG4gICAgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtEYXRhQm91bmRDb21wb25lbnRdKVxuXSwgTXVsdGlTZWxlY3RUcmVlRmxhdEJpbmRpbmdEaXJlY3RpdmUpO1xuXG4vKipcbiAqIEEgZGlyZWN0aXZlIHdoaWNoIGVuY2Fwc3VsYXRlcyB0aGUgcmV0cmlldmFsIG9mIHRoZSBjaGlsZCBub2RlcyB3aGVuIGhpZXJhcmNoaWNhbCBkYXRhIGlzIHByb3ZpZGVkLlxuICovXG5sZXQgTXVsdGlTZWxlY3RUcmVlSGllcmFyY2h5QmluZGluZ0RpcmVjdGl2ZSA9IGNsYXNzIE11bHRpU2VsZWN0VHJlZUhpZXJhcmNoeUJpbmRpbmdEaXJlY3RpdmUgZXh0ZW5kcyBIaWVyYXJjaHlCaW5kaW5nRGlyZWN0aXZlIHtcbiAgICBjb25zdHJ1Y3RvcihtdWx0aVNlbGVjdFRyZWUpIHtcbiAgICAgICAgc3VwZXIobXVsdGlTZWxlY3RUcmVlKTtcbiAgICAgICAgdGhpcy5tdWx0aVNlbGVjdFRyZWUgPSBtdWx0aVNlbGVjdFRyZWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBub2RlcyB3aGljaCB3aWxsIGJlIGRpc3BsYXllZCBieSB0aGUgTXVsdGlTZWxlY3RUcmVlLlxuICAgICAqL1xuICAgIHNldCBkYXRhKG5vZGVzKSB7XG4gICAgICAgIHRoaXMubXVsdGlTZWxlY3RUcmVlLm5vZGVzID0gbm9kZXM7XG4gICAgICAgIHRoaXMubm9kZXMgPSBub2RlcztcbiAgICB9XG59O1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoJ2tlbmRvTXVsdGlTZWxlY3RUcmVlSGllcmFyY2h5QmluZGluZycpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBBcnJheSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtBcnJheV0pXG5dLCBNdWx0aVNlbGVjdFRyZWVIaWVyYXJjaHlCaW5kaW5nRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJkYXRhXCIsIG51bGwpO1xuTXVsdGlTZWxlY3RUcmVlSGllcmFyY2h5QmluZGluZ0RpcmVjdGl2ZSA9IF9fZGVjb3JhdGUoW1xuICAgIERpcmVjdGl2ZSh7XG4gICAgICAgIHNlbGVjdG9yOiAnW2tlbmRvTXVsdGlTZWxlY3RUcmVlSGllcmFyY2h5QmluZGluZ10nXG4gICAgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtEYXRhQm91bmRDb21wb25lbnRdKVxuXSwgTXVsdGlTZWxlY3RUcmVlSGllcmFyY2h5QmluZGluZ0RpcmVjdGl2ZSk7XG5cbi8qKlxuICogQSBkaXJlY3RpdmUgd2hpY2ggbWFuYWdlcyB0aGUgZXhwYW5kZWQgc3RhdGUgb2YgdGhlIHBvcHVwIFRyZWVWaWV3LlxuICovXG5sZXQgRHJvcERvd25UcmVlc0V4cGFuZERpcmVjdGl2ZSA9IGNsYXNzIERyb3BEb3duVHJlZXNFeHBhbmREaXJlY3RpdmUgZXh0ZW5kcyBFeHBhbmREaXJlY3RpdmUge1xuICAgIGNvbnN0cnVjdG9yKGRyb3BEb3duVHJlZSkge1xuICAgICAgICBzdXBlcihkcm9wRG93blRyZWUpO1xuICAgIH1cbn07XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgnaXNOb2RlRXhwYW5kZWQnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pXG5dLCBEcm9wRG93blRyZWVzRXhwYW5kRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJpc0V4cGFuZGVkXCIsIHZvaWQgMCk7XG5Ecm9wRG93blRyZWVzRXhwYW5kRGlyZWN0aXZlID0gX19kZWNvcmF0ZShbXG4gICAgRGlyZWN0aXZlKHtcbiAgICAgICAgc2VsZWN0b3I6ICdba2VuZG9Ecm9wRG93blRyZWVFeHBhbmRhYmxlXSwgW2tlbmRvTXVsdGlTZWxlY3RUcmVlRXhwYW5kYWJsZV0nXG4gICAgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtFeHBhbmRhYmxlQ29tcG9uZW50XSlcbl0sIERyb3BEb3duVHJlZXNFeHBhbmREaXJlY3RpdmUpO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xubGV0IFRhZ0xpc3RDb21wb25lbnQgPSBjbGFzcyBUYWdMaXN0Q29tcG9uZW50IHtcbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGNvbGxlY3Rpb24gd2l0aCB0aGUgZGlzYWJsZWQgdGFncycgaW5kaWNlcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGlzYWJsZWRJbmRpY2VzID0gbmV3IFNldCgpO1xuICAgICAgICB0aGlzLnJlbW92ZVRhZyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICB9XG4gICAgdGFnUHJvcCh0YWcsIHByb3AsIGluZGV4KSB7XG4gICAgICAgIGNvbnN0IHByb3BGaWVsZCA9IHByb3AgJiYgdGhpcy5nZXRQcm9wRmllbGQodGFnLCBwcm9wLCBpbmRleCk7XG4gICAgICAgIHJldHVybiBnZXR0ZXIkMSh0YWcsIHByb3BGaWVsZCk7XG4gICAgfVxuICAgIGlzVGFnRGlzYWJsZWQodGFnLCBwb3NpdGlvbkluZGV4KSB7XG4gICAgICAgIGlmICh0aGlzLmlzR3JvdXBUYWcodGFnKSkge1xuICAgICAgICAgICAgLyoqIFRoZSBgcG9zaXRpb25JbmRleGAgaXMgdXNlZCB0byBkZXRlcm1pbmUgYWZ0ZXIgaG93IG1hbnkgc2luZ2xlIHRhZ3MgaXMgdGhlIGdyb3VwIHRhZyBkaXNwbGF5ZWQgPT5cbiAgICAgICAgICAgICAqID0+IGl0IGlzIHVzZWQgdG8gaW5jcmVtZW50IHRoZSBpbmRpY2VzIGluc2lkZSB0aGUgZ3JvdXAgdGFnIHNvIHRoYXQgd2UgZGV0ZXJtaW5lIHRoZSBhY3R1YWwgcG9zaXRpb24gaW5kZXhcbiAgICAgICAgICAgICAqIG9mIGVhY2ggZ3JvdXAgdGFnIGl0ZW0gYXMgdGhleSBhcHBlYXIgaW4gdGhlIGB2YWx1ZWAgKGltcG9ydGFudCB0byBjaGVjayBhZ2FpbnN0IGBkaXNhYmxlZEluZGljZXNgKVxuICAgICAgICAgICAgICogZS5nLiBgZGlzYWJsZWRJbmRpY2VzID0gWzAsIDFdYCAmJiBgdGFncyA9IFsnU21hbGwnLCBbJ01lZGl1bScsICdMYXJnZSddXWAgPT4gd2l0aG91dCB0aGUgaW5jcmVtZW50YXRpb24gd2l0aFxuICAgICAgICAgICAgICogYHBvc2l0aW9uSW5kZXhgLCB0aGUgZ3JvdXAgdGFnIHdvdWxkIHlpZWxkIFswLCAxXSBhcyBpbmRpY2VzLCB3aGlsZSBpdCBzaG91bGQgeWllbGQgWzEsIDJdXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHJldHVybiB0YWcuZXZlcnkoKF90YWcsIGluZGV4KSA9PiB0aGlzLmRpc2FibGVkSW5kaWNlcy5oYXMoaW5kZXggKyBwb3NpdGlvbkluZGV4KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzYWJsZWRJbmRpY2VzLmhhcyhwb3NpdGlvbkluZGV4KTtcbiAgICB9XG4gICAgZGVsZXRlVGFnKGV2ZW50LCB0YWcsIGluZGV4KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWQgJiYgZXZlbnQud2hpY2ggPT09IDEpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlVGFnLmVtaXQoeyB0YWcsIGluZGV4IH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGl0ZW1JZCh0YWcsIGluZGV4KSB7XG4gICAgICAgIGlmICh0YWcpIHsgLy9iZWNhdXNlIG9mIGN1c3RvbSB2YWx1ZXNcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRhZ1ByZWZpeCArIFwiLVwiICsgdGhpcy50YWdQcm9wKHRhZywgdGhpcy52YWx1ZUZpZWxkLCBpbmRleCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaXNHcm91cFRhZyh0YWcpIHtcbiAgICAgICAgcmV0dXJuIHRhZyBpbnN0YW5jZW9mIEFycmF5O1xuICAgIH1cbiAgICB0YWdBcmlhSGlkZGVuKGluZGV4KSB7XG4gICAgICAgIHJldHVybiBpc1ByZXNlbnQodGhpcy5mb2N1c2VkKSAmJiB0aGlzLmZvY3VzZWQgIT09IGluZGV4O1xuICAgIH1cbiAgICBnZXRQcm9wRmllbGQodGFnLCBwcm9wLCBpbmRleCkge1xuICAgICAgICAvLyBOZWVkZWQgZm9yIE11bHRpU2VsZWN0VHJlZSB2YWx1ZSBiaW5kaW5nIChIZXRlcm9nZW5lb3VzIERhdGEpXG4gICAgICAgIGNvbnN0IGZpZWxkc0NvdW50ID0gcHJvcC5sZW5ndGggLSAxO1xuICAgICAgICBpZiAodHlwZW9mIHByb3AgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvcDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnZhbHVlRGVwdGgpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlcHRoID0gdGhpcy52YWx1ZURlcHRoW2luZGV4XTtcbiAgICAgICAgICAgIHJldHVybiBmaWVsZHNDb3VudCA8IGRlcHRoID8gcHJvcFtmaWVsZHNDb3VudF0gOiBwcm9wW2RlcHRoXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBwcm9wLmZpbmQoaXRlbSA9PiBpdGVtIGluIHRhZyk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQXJyYXkpXG5dLCBUYWdMaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ0YWdzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG5dLCBUYWdMaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ0ZXh0RmllbGRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIFRhZ0xpc3RDb21wb25lbnQucHJvdG90eXBlLCBcInZhbHVlRmllbGRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEFycmF5KVxuXSwgVGFnTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwidmFsdWVEZXB0aFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKVxuXSwgVGFnTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwiZm9jdXNlZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgVGFnVGVtcGxhdGVEaXJlY3RpdmUpXG5dLCBUYWdMaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ0ZW1wbGF0ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgR3JvdXBUYWdUZW1wbGF0ZURpcmVjdGl2ZSlcbl0sIFRhZ0xpc3RDb21wb25lbnQucHJvdG90eXBlLCBcImdyb3VwVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBUYWdMaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXNhYmxlZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgVGFnTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwidGFnUHJlZml4XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBUYWdMaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJpZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU2V0KVxuXSwgVGFnTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGlzYWJsZWRJbmRpY2VzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgVGFnTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwicmVtb3ZlVGFnXCIsIHZvaWQgMCk7XG5UYWdMaXN0Q29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgQ29tcG9uZW50KHtcbiAgICAgICAgc2VsZWN0b3I6ICdrZW5kby10YWdsaXN0JyxcbiAgICAgICAgdGVtcGxhdGU6IGBcbiAgICAgICAgPHVsIFthdHRyLmlkXT1cImlkXCIgY2xhc3M9XCJrLXJlc2V0XCI+XG4gICAgICAgICAgICA8bGlcbiAgICAgICAgICAgICAgICAqbmdGb3I9XCJsZXQgdGFnIG9mIHRhZ3M7IGxldCBpbmRleCA9IGluZGV4O1wiXG4gICAgICAgICAgICAgICAgcm9sZT1cIm9wdGlvblwiXG4gICAgICAgICAgICAgICAgW2F0dHIuaWRdPVwiaXRlbUlkKHRhZywgaW5kZXgpXCJcbiAgICAgICAgICAgICAgICBbYXR0ci5hcmlhLWhpZGRlbl09XCJ0YWdBcmlhSGlkZGVuKGluZGV4KVwiXG4gICAgICAgICAgICAgICAgYXJpYS1zZWxlY3RlZD1cInRydWVcIlxuICAgICAgICAgICAgICAgIFthdHRyLmFyaWEtc2V0c2l6ZV09XCJ0YWdzPy5sZW5ndGhcIlxuICAgICAgICAgICAgICAgIGNsYXNzPVwiay1idXR0b25cIlxuICAgICAgICAgICAgICAgIFtuZ0NsYXNzXT1cIntcbiAgICAgICAgICAgICAgICAgICAgJ2stc3RhdGUtZm9jdXNlZCc6IGluZGV4ID09PSBmb2N1c2VkLFxuICAgICAgICAgICAgICAgICAgICAnay1zdGF0ZS1kaXNhYmxlZCc6IGlzVGFnRGlzYWJsZWQodGFnLCBpbmRleClcbiAgICAgICAgICAgICAgICB9XCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgKm5nSWY9XCJpc0dyb3VwVGFnKHRhZyk7IHRoZW4gZ3JvdXBUYWcgZWxzZSBzaW5nbGVUYWdcIj48L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgI2dyb3VwVGFnPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlICpuZ0lmPVwiZ3JvdXBUZW1wbGF0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFt0ZW1wbGF0ZUNvbnRleHRdPVwie1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVJlZjogZ3JvdXBUZW1wbGF0ZS50ZW1wbGF0ZVJlZixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGltcGxpY2l0OiB0YWdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgW25nSWZdPVwiIWdyb3VwVGVtcGxhdGVcIj57eyB0YWcubGVuZ3RoIH19IHt7IHRhZy5sZW5ndGggPT09IDEgPyAnaXRlbScgOiAnaXRlbXMnIH19IHNlbGVjdGVkPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlICNzaW5nbGVUYWc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgKm5nSWY9XCJ0ZW1wbGF0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFt0ZW1wbGF0ZUNvbnRleHRdPVwie1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVJlZjogdGVtcGxhdGUudGVtcGxhdGVSZWYsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbXBsaWNpdDogdGFnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlIFtuZ0lmXT1cIiF0ZW1wbGF0ZVwiPnt7IHRhZ1Byb3AodGFnLCB0ZXh0RmllbGQsIGluZGV4KSB9fTwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG5cbiAgICAgICAgICAgICAgICA8c3BhbiBhcmlhLWxhYmVsPVwiZGVsZXRlXCIgW2F0dHIuYXJpYS1oaWRkZW5dPVwiaW5kZXggIT09IGZvY3VzZWRcIiBjbGFzcz1cImstc2VsZWN0XCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1jbG9zZVwiIChtb3VzZWRvd24pPVwiZGVsZXRlVGFnKCRldmVudCwgdGFnLCBpbmRleClcIj5cbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDwvbGk+XG4gICAgICAgIDwvdWw+XG4gIGBcbiAgICB9KVxuXSwgVGFnTGlzdENvbXBvbmVudCk7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5jbGFzcyBNZXNzYWdlcyBleHRlbmRzIENvbXBvbmVudE1lc3NhZ2VzIHtcbn1cbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIE1lc3NhZ2VzLnByb3RvdHlwZSwgXCJub0RhdGFUZXh0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBNZXNzYWdlcy5wcm90b3R5cGUsIFwiY2xlYXJUaXRsZVwiLCB2b2lkIDApO1xuXG52YXIgTG9jYWxpemVkTWVzc2FnZXNEaXJlY3RpdmVfMTtcbi8qKlxuICogQGhpZGRlblxuICovXG5sZXQgTG9jYWxpemVkTWVzc2FnZXNEaXJlY3RpdmUgPSBMb2NhbGl6ZWRNZXNzYWdlc0RpcmVjdGl2ZV8xID0gY2xhc3MgTG9jYWxpemVkTWVzc2FnZXNEaXJlY3RpdmUgZXh0ZW5kcyBNZXNzYWdlcyB7XG4gICAgY29uc3RydWN0b3Ioc2VydmljZSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnNlcnZpY2UgPSBzZXJ2aWNlO1xuICAgIH1cbn07XG5Mb2NhbGl6ZWRNZXNzYWdlc0RpcmVjdGl2ZSA9IExvY2FsaXplZE1lc3NhZ2VzRGlyZWN0aXZlXzEgPSBfX2RlY29yYXRlKFtcbiAgICBEaXJlY3RpdmUoe1xuICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwcm92aWRlOiBNZXNzYWdlcyxcbiAgICAgICAgICAgICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBMb2NhbGl6ZWRNZXNzYWdlc0RpcmVjdGl2ZV8xKVxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBzZWxlY3RvcjogYFxuICAgIFtrZW5kb0Ryb3BEb3duTGlzdExvY2FsaXplZE1lc3NhZ2VzXSxcbiAgICBba2VuZG9Ecm9wRG93blRyZWVMb2NhbGl6ZWRNZXNzYWdlc10sXG4gICAgW2tlbmRvQ29tYm9Cb3hMb2NhbGl6ZWRNZXNzYWdlc10sXG4gICAgW2tlbmRvTXVsdGlDb2x1bW5Db21ib0JveExvY2FsaXplZE1lc3NhZ2VzXSxcbiAgICBba2VuZG9BdXRvQ29tcGxldGVMb2NhbGl6ZWRNZXNzYWdlc10sXG4gICAgW2tlbmRvTXVsdGlTZWxlY3RMb2NhbGl6ZWRNZXNzYWdlc10sXG4gICAgW2tlbmRvTXVsdGlTZWxlY3RUcmVlTG9jYWxpemVkTWVzc2FnZXNdXG4gIGBcbiAgICB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0xvY2FsaXphdGlvblNlcnZpY2VdKVxuXSwgTG9jYWxpemVkTWVzc2FnZXNEaXJlY3RpdmUpO1xuXG52YXIgQ3VzdG9tTWVzc2FnZXNDb21wb25lbnRfMTtcbi8qKlxuICogQ3VzdG9tIGNvbXBvbmVudCBtZXNzYWdlcyBvdmVycmlkZSBkZWZhdWx0IGNvbXBvbmVudCBtZXNzYWdlc1xuICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBydGxfZHJvcGRvd25zICV9I3RvYy1tZXNzYWdlcykpLlxuICovXG5sZXQgQ3VzdG9tTWVzc2FnZXNDb21wb25lbnQgPSBDdXN0b21NZXNzYWdlc0NvbXBvbmVudF8xID0gY2xhc3MgQ3VzdG9tTWVzc2FnZXNDb21wb25lbnQgZXh0ZW5kcyBNZXNzYWdlcyB7XG4gICAgY29uc3RydWN0b3Ioc2VydmljZSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnNlcnZpY2UgPSBzZXJ2aWNlO1xuICAgIH1cbiAgICBnZXQgb3ZlcnJpZGUoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn07XG5DdXN0b21NZXNzYWdlc0NvbXBvbmVudCA9IEN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50XzEgPSBfX2RlY29yYXRlKFtcbiAgICBDb21wb25lbnQoe1xuICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwcm92aWRlOiBNZXNzYWdlcyxcbiAgICAgICAgICAgICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBDdXN0b21NZXNzYWdlc0NvbXBvbmVudF8xKVxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBzZWxlY3RvcjogJ2tlbmRvLWRyb3Bkb3dubGlzdC1tZXNzYWdlcyxrZW5kby1jb21ib2JveC1tZXNzYWdlcyxrZW5kby1tdWx0aWNvbHVtbmNvbWJvYm94LW1lc3NhZ2VzLGtlbmRvLWF1dG9jb21wbGV0ZS1tZXNzYWdlcyxrZW5kby1tdWx0aXNlbGVjdC1tZXNzYWdlcyxrZW5kby1kcm9wZG93bnRyZWUtbWVzc2FnZXMsa2VuZG8tbXVsdGlzZWxlY3R0cmVlLW1lc3NhZ2VzJyxcbiAgICAgICAgdGVtcGxhdGU6IGBgXG4gICAgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtMb2NhbGl6YXRpb25TZXJ2aWNlXSlcbl0sIEN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50KTtcblxuY29uc3QgREVGQVVMVF9GSUxURVJfU0VUVElOR1MgPSB7XG4gICAgY2FzZVNlbnNpdGl2ZTogZmFsc2UsXG4gICAgb3BlcmF0b3I6ICdzdGFydHNXaXRoJ1xufTtcbi8qKlxuICogSW1wbGVtZW50cyBhbiBldmVudCBoYW5kbGVyIGZvciB0aGUgYGZpbHRlckNoYW5nZWAgZXZlbnQgb2YgYSBEcm9wRG93bnMgY29tcG9uZW50XG4gKiB3aGljaCBwZXJmb3JtcyBzaW1wbGUgZGF0YSBmaWx0ZXJpbmcuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBfQENvbXBvbmVudCh7XG4gKiBzZWxlY3RvcjogJ215LWFwcCcsXG4gKiB0ZW1wbGF0ZTogYFxuICogIDxrZW5kby1hdXRvY29tcGxldGVcbiAqICAgICAgW2RhdGFdPVwiZGF0YVwiXG4gKiAgICAgIGtlbmRvRHJvcERvd25GaWx0ZXJcbiAqICAgICAgcGxhY2Vob2xkZXI9XCJlLmcuIEFuZG9ycmFcIlxuICogID5cbiAqICA8L2tlbmRvLWF1dG9jb21wbGV0ZT5cbiAqIGBcbiAqIH0pXG4gKiBjbGFzcyBBcHBDb21wb25lbnQge1xuICogICAgIHB1YmxpYyBkYXRhOiBBcnJheTxzdHJpbmc+ID0gW1wiQWxiYW5pYVwiLCBcIkFuZG9ycmFcIiwgXCJBcm1lbmlhXCIsIFwiQXVzdHJpYVwiLCBcIkF6ZXJiYWlqYW5cIl07XG4gKiB9XG4gKiBgYGBcbiAqL1xubGV0IEZpbHRlckRpcmVjdGl2ZSA9IGNsYXNzIEZpbHRlckRpcmVjdGl2ZSB7XG4gICAgY29uc3RydWN0b3IoY29tcG9uZW50KSB7XG4gICAgICAgIHRoaXMuY29tcG9uZW50ID0gY29tcG9uZW50O1xuICAgICAgICAvKipcbiAgICAgICAgICogQGhpZGRlblxuICAgICAgICAgKlxuICAgICAgICAgKiBTZXRzIHdoZXRoZXIgdGhlIGZpbHRlcmluZyBmdW5jdGlvbmFsaXR5IGlzIGVuYWJsZWQgb24gY29tcG9uZW50IGluaXQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZpbHRlcmFibGUgPSB0cnVlO1xuICAgICAgICB0aGlzLl9kYXRhID0gW107XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBpbml0aWFsIGRhdGEgdGhhdCB3aWxsIGJlIHVzZWQgYXMgYSBzb3VyY2UgYXJyYXkgZm9yIHRoZSBmaWx0ZXJpbmcgb3BlcmF0aW9ucy5cbiAgICAgKi9cbiAgICBzZXQgZGF0YShkYXRhKSB7XG4gICAgICAgIHRoaXMuX2RhdGEgPSBkYXRhIHx8IFtdO1xuICAgIH1cbiAgICBnZXQgZGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGE7XG4gICAgfVxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICB0aGlzLmNvbXBvbmVudC5maWx0ZXJhYmxlID0gdGhpcy5maWx0ZXJhYmxlO1xuICAgICAgICB0aGlzLmZpbHRlckNoYW5nZVN1YnNjcmlwdGlvbiA9IHRoaXMuY29tcG9uZW50LmZpbHRlckNoYW5nZVxuICAgICAgICAgICAgLnN1YnNjcmliZSh0aGlzLmhhbmRsZUZpbHRlckNoYW5nZS5iaW5kKHRoaXMpKTtcbiAgICB9XG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIGlmIChpc1ByZXNlbnQodGhpcy5maWx0ZXJDaGFuZ2VTdWJzY3JpcHRpb24pKSB7XG4gICAgICAgICAgICB0aGlzLmZpbHRlckNoYW5nZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZUZpbHRlckNoYW5nZShxdWVyeSkge1xuICAgICAgICB0aGlzLmNvbXBvbmVudC5kYXRhID0gdGhpcy5kYXRhLmZpbHRlcihpdGVtID0+IHRoaXMubWF0Y2hlc0FueUZpZWxkKGl0ZW0sIHF1ZXJ5KSk7XG4gICAgfVxuICAgIG1hdGNoZXNBbnlGaWVsZChpdGVtLCBxdWVyeSkge1xuICAgICAgICBjb25zdCBub3JtYWxpemVkUXVlcnkgPSB0aGlzLm5vcm1hbGl6ZVZhbHVlKHF1ZXJ5KTtcbiAgICAgICAgY29uc3QgeyBmaWVsZHMgfSA9IHRoaXMuZmlsdGVyU2V0dGluZ3M7XG4gICAgICAgIC8vIGlmIG5vIGZpbHRlciBmaWVsZHMgYXJlIHByZXNlbnQsIHdlIGFyZSBkZWFsaW5nIHdpdGggcHJpbWl0aXZlIGRhdGFcbiAgICAgICAgaWYgKGZpZWxkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNoZWNrSXRlbShpdGVtLCBub3JtYWxpemVkUXVlcnkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmaWVsZHMuc29tZShmaWVsZCA9PiB0aGlzLmNoZWNrSXRlbShnZXR0ZXIkMShpdGVtLCBmaWVsZCksIG5vcm1hbGl6ZWRRdWVyeSkpO1xuICAgIH1cbiAgICBjaGVja0l0ZW0odGFyZ2V0LCBxdWVyeSkge1xuICAgICAgICB0YXJnZXQgPSB0aGlzLm5vcm1hbGl6ZVZhbHVlKHRhcmdldCk7XG4gICAgICAgIGlmICh0aGlzLmZpbHRlclNldHRpbmdzLm9wZXJhdG9yID09PSAnY29udGFpbnMnKSB7XG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0LmluZGV4T2YocXVlcnkpICE9PSAtMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXQuaW5kZXhPZihxdWVyeSkgPT09IDA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbm9ybWFsaXplVmFsdWUodmFsdWUpIHtcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZFZhbHVlID0gaXNQcmVzZW50KHZhbHVlKSA/IHZhbHVlLnRvU3RyaW5nKCkgOiAnJztcbiAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyU2V0dGluZ3MuY2FzZVNlbnNpdGl2ZSA/IG5vcm1hbGl6ZWRWYWx1ZSA6IG5vcm1hbGl6ZWRWYWx1ZS50b0xvd2VyQ2FzZSgpO1xuICAgIH1cbiAgICBnZXRGaWx0ZXJGaWVsZHMocHJvdmlkZWRGaWVsZHMpIHtcbiAgICAgICAgLy8gaWdub3JlIHByb3ZpZGVkIGZpZWxkcyBpZiB0aGUgY29tcG9uZW50IGRlYWxzIHdpdGggcHJpbWl0aXZlIGRhdGFcbiAgICAgICAgaWYgKCF0aGlzLmNvbXBvbmVudC50ZXh0RmllbGQgJiYgIXRoaXMuY29tcG9uZW50LnZhbHVlRmllbGQpIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNBcnJheShwcm92aWRlZEZpZWxkcykgJiYgcHJvdmlkZWRGaWVsZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHByb3ZpZGVkRmllbGRzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gdGhlIGF1dG9jb21wbGV0ZSB1c2VzIGB2YWx1ZUZpZWxkYCBmb3IgdGV4dCBleHRyYWN0aW9uXG4gICAgICAgICAgICBjb25zdCB0ZXh0RmllbGQgPSB0aGlzLmNvbXBvbmVudC50ZXh0RmllbGQgfHwgdGhpcy5jb21wb25lbnQudmFsdWVGaWVsZDtcbiAgICAgICAgICAgIHJldHVybiBbdGV4dEZpZWxkXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgZmlsdGVyU2V0dGluZ3MoKSB7XG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gdGhpcy5yYXdTZXR0aW5ncztcbiAgICAgICAgY29uc3QgcHJvdmlkZWRGaWVsZHMgPSBpc1ByZXNlbnQoc2V0dGluZ3MpICYmIHR5cGVvZiBzZXR0aW5ncyA9PT0gJ29iamVjdCcgPyBzZXR0aW5ncy5maWVsZHMgOiBbXTtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfRklMVEVSX1NFVFRJTkdTLCBzZXR0aW5ncywgeyBmaWVsZHM6IHRoaXMuZ2V0RmlsdGVyRmllbGRzKHByb3ZpZGVkRmllbGRzKSB9KTtcbiAgICB9XG59O1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQXJyYXkpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQXJyYXldKVxuXSwgRmlsdGVyRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJkYXRhXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoJ2tlbmRvRHJvcERvd25GaWx0ZXInKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuXSwgRmlsdGVyRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJyYXdTZXR0aW5nc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIEZpbHRlckRpcmVjdGl2ZS5wcm90b3R5cGUsIFwiZmlsdGVyYWJsZVwiLCB2b2lkIDApO1xuRmlsdGVyRGlyZWN0aXZlID0gX19kZWNvcmF0ZShbXG4gICAgRGlyZWN0aXZlKHtcbiAgICAgICAgc2VsZWN0b3I6ICdba2VuZG9Ecm9wRG93bkZpbHRlcl0nXG4gICAgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtGaWx0ZXJhYmxlQ29tcG9uZW50XSlcbl0sIEZpbHRlckRpcmVjdGl2ZSk7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5sZXQgRmlsdGVySW5wdXREaXJlY3RpdmUgPSBjbGFzcyBGaWx0ZXJJbnB1dERpcmVjdGl2ZSB7XG4gICAgY29uc3RydWN0b3IoZWxlbWVudCwgem9uZSkge1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICB0aGlzLnpvbmUgPSB6b25lO1xuICAgIH1cbiAgICBuZ09uQ2hhbmdlcygpIHtcbiAgICAgICAgaWYgKHRoaXMuZm9jdXNlZCkge1xuICAgICAgICAgICAgdGhpcy5uZXh0VGljaygoKSA9PiB0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudC5mb2N1cygpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBuZXh0VGljayhmbikge1xuICAgICAgICB0aGlzLnpvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4gc2V0VGltZW91dChmbikpO1xuICAgIH1cbn07XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgnZmlsdGVySW5wdXQnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIEZpbHRlcklucHV0RGlyZWN0aXZlLnByb3RvdHlwZSwgXCJmb2N1c2VkXCIsIHZvaWQgMCk7XG5GaWx0ZXJJbnB1dERpcmVjdGl2ZSA9IF9fZGVjb3JhdGUoW1xuICAgIERpcmVjdGl2ZSh7XG4gICAgICAgIHNlbGVjdG9yOiAnW2ZpbHRlcklucHV0XScgLy8gdHNsaW50OmRpc2FibGUtbGluZVxuICAgIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbRWxlbWVudFJlZixcbiAgICAgICAgTmdab25lXSlcbl0sIEZpbHRlcklucHV0RGlyZWN0aXZlKTtcblxuY29uc3QgU0hBUkVEX0RJUkVDVElWRVMgPSBbXG4gICAgSGVhZGVyVGVtcGxhdGVEaXJlY3RpdmUsXG4gICAgRm9vdGVyVGVtcGxhdGVEaXJlY3RpdmUsXG4gICAgSXRlbVRlbXBsYXRlRGlyZWN0aXZlLFxuICAgIEdyb3VwVGVtcGxhdGVEaXJlY3RpdmUsXG4gICAgRml4ZWRHcm91cFRlbXBsYXRlRGlyZWN0aXZlLFxuICAgIE5vRGF0YVRlbXBsYXRlRGlyZWN0aXZlLFxuICAgIFZhbHVlVGVtcGxhdGVEaXJlY3RpdmUsXG4gICAgVGFnVGVtcGxhdGVEaXJlY3RpdmUsXG4gICAgR3JvdXBUYWdUZW1wbGF0ZURpcmVjdGl2ZSxcbiAgICBMb2NhbGl6ZWRNZXNzYWdlc0RpcmVjdGl2ZSxcbiAgICBDdXN0b21NZXNzYWdlc0NvbXBvbmVudCxcbiAgICBGaWx0ZXJEaXJlY3RpdmUsXG4gICAgRmlsdGVySW5wdXREaXJlY3RpdmVcbl07XG4vKipcbiAqIEBoaWRkZW5cbiAqXG4gKiBUaGUgZXhwb3J0ZWQgcGFja2FnZSBtb2R1bGUuXG4gKlxuICogVGhlIHBhY2thZ2UgZXhwb3J0czpcbiAqIC0gYEl0ZW1UZW1wbGF0ZURpcmVjdGl2ZWAmbWRhc2g7VGhlIGl0ZW0gdGVtcGxhdGUgZGlyZWN0aXZlLlxuICogLSBgVmFsdWVUZW1wbGF0ZURpcmVjdGl2ZWAmbWRhc2g7VGhlIHZhbHVlIHRlbXBsYXRlIGRpcmVjdGl2ZS5cbiAqIC0gYEhlYWRlclRlbXBsYXRlRGlyZWN0aXZlYCZtZGFzaDtUaGUgaGVhZGVyIHRlbXBsYXRlIGRpcmVjdGl2ZS5cbiAqIC0gYEZvb3RlclRlbXBsYXRlRGlyZWN0aXZlYCZtZGFzaDtUaGUgZm9vdGVyIHRlbXBsYXRlIGRpcmVjdGl2ZS5cbiAqIC0gYE5vRGF0YVRlbXBsYXRlRGlyZWN0aXZlYCZtZGFzaDtUaGUgbm9EYXRhIHRlbXBsYXRlIGRpcmVjdGl2ZS5cbiAqIC0gYFRhZ1RlbXBsYXRlRGlyZWN0aXZlYCZtZGFzaDtUaGUgdGFnIHRlbXBsYXRlIGRpcmVjdGl2ZS5cbiAqIC0gYFN1bW1hcnlUYWdUZW1wbGF0ZURpcmVjdGl2ZWAmbWRhc2g7VGhlIHN1bW1hcnkgdGFnIHRlbXBsYXRlIGRpcmVjdGl2ZS5cbiAqL1xubGV0IFNoYXJlZERpcmVjdGl2ZXNNb2R1bGUgPSBjbGFzcyBTaGFyZWREaXJlY3RpdmVzTW9kdWxlIHtcbn07XG5TaGFyZWREaXJlY3RpdmVzTW9kdWxlID0gX19kZWNvcmF0ZShbXG4gICAgTmdNb2R1bGUoe1xuICAgICAgICBkZWNsYXJhdGlvbnM6IFtTSEFSRURfRElSRUNUSVZFU10sXG4gICAgICAgIGV4cG9ydHM6IFtTSEFSRURfRElSRUNUSVZFU11cbiAgICB9KVxuXSwgU2hhcmVkRGlyZWN0aXZlc01vZHVsZSk7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5sZXQgU2VsZWN0YWJsZURpcmVjdGl2ZSA9IGNsYXNzIFNlbGVjdGFibGVEaXJlY3RpdmUge1xuICAgIGNvbnN0cnVjdG9yKHNlbGVjdGlvblNlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5jaGVja2JveGVzID0geyBlbmFibGVkOiBmYWxzZSB9O1xuICAgICAgICAvLyBASG9zdEJpbmRpbmcoJ2F0dHIub2Zmc2V0LWluZGV4JylcbiAgICAgICAgLy8gQElucHV0KCkgcHVibGljIG9mZnNldEluZGV4OiBudW1iZXI7XG4gICAgICAgIHRoaXMubXVsdGlwbGVTZWxlY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlID0gc2VsZWN0aW9uU2VydmljZTtcbiAgICB9XG4gICAgZ2V0IGZvY3VzZWRDbGFzc05hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvblNlcnZpY2UuaXNGb2N1c2VkKHRoaXMuaW5kZXgpO1xuICAgIH1cbiAgICBnZXQgc2VsZWN0ZWRDbGFzc05hbWUoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5jaGVja2JveGVzLmVuYWJsZWQgJiYgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmlzU2VsZWN0ZWQodGhpcy5pbmRleCk7XG4gICAgfVxuICAgIG9uQ2xpY2soZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGlmICh0aGlzLmNoZWNrYm94ZXMuZW5hYmxlZCAmJiAhdGhpcy5jaGVja2JveGVzLmNoZWNrT25DbGljaykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm11bHRpcGxlU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmlzU2VsZWN0ZWQodGhpcy5pbmRleCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UudW5zZWxlY3QodGhpcy5pbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UuYWRkKHRoaXMuaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmNoYW5nZSh0aGlzLmluZGV4KTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnYXR0ci5pbmRleCcpLFxuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlcilcbl0sIFNlbGVjdGFibGVEaXJlY3RpdmUucHJvdG90eXBlLCBcImluZGV4XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG5dLCBTZWxlY3RhYmxlRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJjaGVja2JveGVzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnc3R5bGUuaGVpZ2h0LnB4JyksXG4gICAgSG9zdEJpbmRpbmcoJ3N0eWxlLm1pbkhlaWdodC5weCcpLFxuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlcilcbl0sIFNlbGVjdGFibGVEaXJlY3RpdmUucHJvdG90eXBlLCBcImhlaWdodFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIFNlbGVjdGFibGVEaXJlY3RpdmUucHJvdG90eXBlLCBcIm11bHRpcGxlU2VsZWN0aW9uXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay1zdGF0ZS1mb2N1c2VkJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIFNlbGVjdGFibGVEaXJlY3RpdmUucHJvdG90eXBlLCBcImZvY3VzZWRDbGFzc05hbWVcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay1zdGF0ZS1zZWxlY3RlZCcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBTZWxlY3RhYmxlRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJzZWxlY3RlZENsYXNzTmFtZVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RMaXN0ZW5lcignY2xpY2snLCBbJyRldmVudCddKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpyZXR1cm50eXBlXCIsIHZvaWQgMClcbl0sIFNlbGVjdGFibGVEaXJlY3RpdmUucHJvdG90eXBlLCBcIm9uQ2xpY2tcIiwgbnVsbCk7XG5TZWxlY3RhYmxlRGlyZWN0aXZlID0gX19kZWNvcmF0ZShbXG4gICAgRGlyZWN0aXZlKHtcbiAgICAgICAgc2VsZWN0b3I6ICdba2VuZG9Ecm9wRG93bnNTZWxlY3RhYmxlXSdcbiAgICB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW1NlbGVjdGlvblNlcnZpY2VdKVxuXSwgU2VsZWN0YWJsZURpcmVjdGl2ZSk7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5sZXQgVGVtcGxhdGVDb250ZXh0RGlyZWN0aXZlID0gY2xhc3MgVGVtcGxhdGVDb250ZXh0RGlyZWN0aXZlIHtcbiAgICBjb25zdHJ1Y3Rvcih2aWV3Q29udGFpbmVyUmVmKSB7XG4gICAgICAgIHRoaXMudmlld0NvbnRhaW5lclJlZiA9IHZpZXdDb250YWluZXJSZWY7XG4gICAgfVxuICAgIHNldCB0ZW1wbGF0ZUNvbnRleHQoY29udGV4dCkge1xuICAgICAgICBpZiAodGhpcy5pbnNlcnRlZFZpZXdSZWYpIHtcbiAgICAgICAgICAgIHRoaXMudmlld0NvbnRhaW5lclJlZi5yZW1vdmUodGhpcy52aWV3Q29udGFpbmVyUmVmLmluZGV4T2YodGhpcy5pbnNlcnRlZFZpZXdSZWYpKTtcbiAgICAgICAgICAgIHRoaXMuaW5zZXJ0ZWRWaWV3UmVmID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250ZXh0LnRlbXBsYXRlUmVmKSB7XG4gICAgICAgICAgICB0aGlzLmluc2VydGVkVmlld1JlZiA9IHRoaXMudmlld0NvbnRhaW5lclJlZi5jcmVhdGVFbWJlZGRlZFZpZXcoY29udGV4dC50ZW1wbGF0ZVJlZiwgY29udGV4dCk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pXG5dLCBUZW1wbGF0ZUNvbnRleHREaXJlY3RpdmUucHJvdG90eXBlLCBcInRlbXBsYXRlQ29udGV4dFwiLCBudWxsKTtcblRlbXBsYXRlQ29udGV4dERpcmVjdGl2ZSA9IF9fZGVjb3JhdGUoW1xuICAgIERpcmVjdGl2ZSh7XG4gICAgICAgIHNlbGVjdG9yOiAnW3RlbXBsYXRlQ29udGV4dF0nIC8vIHRzbGludDpkaXNhYmxlLWxpbmVcbiAgICB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW1ZpZXdDb250YWluZXJSZWZdKVxuXSwgVGVtcGxhdGVDb250ZXh0RGlyZWN0aXZlKTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKlxuICogQSBkaXJlY3RpdmUgd2hpY2ggbWFuYWdlcyB0aGUgaW4tbWVtb3J5IGNoZWNrZWQgc3RhdGUgb2YgdGhlIE11bHRpU2VsZWN0VHJlZSBub2Rlcy5cbiAqL1xubGV0IENoZWNrRGlyZWN0aXZlID0gY2xhc3MgQ2hlY2tEaXJlY3RpdmUge1xuICAgIGNvbnN0cnVjdG9yKHRyZWVWaWV3KSB7XG4gICAgICAgIHRoaXMudHJlZVZpZXcgPSB0cmVlVmlldztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIHdoZW4gdGhlIGBjaGVja2VkSXRlbXNgIGNvbGxlY3Rpb24gd2FzIHVwZGF0ZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNoZWNrZWRJdGVtc0NoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhvbGRzIGEgU2V0IHdpdGgganVzdCB0aGUgY2hlY2tlZCBpdGVtIGtleXMuXG4gICAgICAgICAqXG4gICAgICAgICAqIFNob3VsZCBiZSB1cGRhdGVkIGVhY2ggdGltZSB0aGUgYGNoZWNrZWRJdGVtc2AgdmFsdWUgb3IgY29udGVudCBpcyBjaGFuZ2VkLlxuICAgICAgICAgKiBDYW4gYmUgdXNlZCBmb3IgZWZmaWNpZW50IGxvb2stdXAgb2Ygd2hldGhlciBhbiBpdGVtIGlzIGNoZWNrZWQgb3Igbm90IChPKDEpIGFjY2VzcyB0aW1lKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2hlY2tlZEtleXMgPSBuZXcgU2V0KCk7XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IG5ldyBTdWJzY3JpcHRpb24oKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmFkZCh0aGlzLnRyZWVWaWV3LmNoZWNrZWRDaGFuZ2VcbiAgICAgICAgICAgIC5zdWJzY3JpYmUodGhpcy5oYW5kbGVDaGVja2VkQ2hhbmdlLmJpbmQodGhpcykpKTtcbiAgICAgICAgdGhpcy50cmVlVmlldy5pc0NoZWNrZWQgPSB0aGlzLmdldENoZWNrZWRTdGF0ZS5iaW5kKHRoaXMpO1xuICAgIH1cbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzKSB7XG4gICAgICAgIGlmIChpc1ByZXNlbnQoY2hhbmdlcy5jaGVja2FibGUpKSB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUNoZWNrT25DbGljaygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1ByZXNlbnQoY2hhbmdlcy5jaGVja2VkSXRlbXMpKSB7XG4gICAgICAgICAgICB0aGlzLmNoZWNrZWRJdGVtcyA9IHRoaXMuY2hlY2tlZEl0ZW1zIHx8IFtdO1xuICAgICAgICAgICAgdGhpcy5jaGVja2VkS2V5cyA9IG5ldyBTZXQodGhpcy5jaGVja2VkSXRlbXMubWFwKGl0ZW0gPT4gdmFsdWVGcm9tKGl0ZW0sIHRoaXMudmFsdWVGaWVsZCkpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVDbGljaygpO1xuICAgIH1cbiAgICBnZXRDaGVja2VkU3RhdGUoZGF0YUl0ZW0sIGluZGV4KSB7XG4gICAgICAgIGlmICh0aGlzLmlzSXRlbUNoZWNrZWQoeyBkYXRhSXRlbSwgaW5kZXggfSkpIHtcbiAgICAgICAgICAgIHJldHVybiAnY2hlY2tlZCc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5jaGVja2FibGUuY2hlY2tDaGlsZHJlbiAmJiB0aGlzLmlzSXRlbUluZGV0ZXJtaW5hdGUodGhpcy50cmVlVmlldy5pdGVtTG9va3VwKGluZGV4KSkpIHtcbiAgICAgICAgICAgIHJldHVybiAnaW5kZXRlcm1pbmF0ZSc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gJ25vbmUnO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZUNoZWNrZWRDaGFuZ2Uobm9kZSkge1xuICAgICAgICB0aGlzLmNoZWNrTm9kZShub2RlKTtcbiAgICAgICAgLy8gcGFyZW50cyBzaG91bGQgYmUgY2hlY2tlZCBpZiBgY2hlY2tDaGlsZHJlbmAgaXMgc2V0IHRvIGB0cnVlYCAoc2luZ2xlIGNvbmZpZyBvcHRpb24gZm9yIGJvdGgpXG4gICAgICAgIGNvbnN0IGNoZWNrUGFyZW50cyA9IHRoaXMuY2hlY2thYmxlLmNoZWNrQ2hpbGRyZW47XG4gICAgICAgIGlmIChjaGVja1BhcmVudHMpIHtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tQYXJlbnRzKG5vZGUucGFyZW50KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNoZWNrZWRJdGVtc0NoYW5nZS5lbWl0KHRoaXMuY2hlY2tlZEl0ZW1zLnNsaWNlKCkpO1xuICAgIH1cbiAgICB0b2dnbGVDaGVja09uQ2xpY2soKSB7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVDbGljaygpO1xuICAgICAgICBpZiAodGhpcy5jaGVja2FibGUuY2hlY2tPbkNsaWNrKSB7XG4gICAgICAgICAgICB0aGlzLmNsaWNrU3Vic2NyaXB0aW9uID0gdGhpcy50cmVlVmlldy5ub2RlQ2xpY2tcbiAgICAgICAgICAgICAgICAucGlwZShmaWx0ZXIoZXZlbnQgPT4gZXZlbnQudHlwZSA9PT0gJ2NsaWNrJykpXG4gICAgICAgICAgICAgICAgLnN1YnNjcmliZShldmVudCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9va3VwID0gdGhpcy50cmVlVmlldy5pdGVtTG9va3VwKGV2ZW50Lml0ZW0uaW5kZXgpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2hlY2tlZENoYW5nZShsb29rdXApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdW5zdWJzY3JpYmVDbGljaygpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xpY2tTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuY2xpY2tTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIHRoaXMuY2xpY2tTdWJzY3JpcHRpb24gPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNoZWNrTm9kZShsb29rdXApIHtcbiAgICAgICAgaWYgKHRoaXMudHJlZVZpZXcuaXNEaXNhYmxlZChsb29rdXAuaXRlbS5kYXRhSXRlbSwgbG9va3VwLml0ZW0uaW5kZXgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gbG9va3VwLml0ZW07XG4gICAgICAgIGNvbnN0IHBlbmRpbmdDaGVjayA9IFt0YXJnZXRdO1xuICAgICAgICAvLyBUT0RPOiBleHRyYWN0IGluIGEgc2VwYXJhdGUgYGNoZWNrQ2hpbGRyZW5gIG1ldGhvZD9cbiAgICAgICAgaWYgKHRoaXMuY2hlY2thYmxlLmNoZWNrQ2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlciQkMSA9IChpdGVtKSA9PiB0aGlzLnRyZWVWaWV3LmlzVmlzaWJsZShpdGVtLmRhdGFJdGVtLCBpdGVtLmluZGV4KSAmJlxuICAgICAgICAgICAgICAgICF0aGlzLnRyZWVWaWV3LmlzRGlzYWJsZWQoaXRlbS5kYXRhSXRlbSwgaXRlbS5pbmRleCk7XG4gICAgICAgICAgICBmZXRjaERlc2NlbmRlbnROb2Rlcyhsb29rdXAsIGZpbHRlciQkMSlcbiAgICAgICAgICAgICAgICAuZm9yRWFjaChsb29rdXAgPT4gcGVuZGluZ0NoZWNrLnB1c2gobG9va3VwLml0ZW0pKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzaG91bGRDaGVjayA9ICF0aGlzLmlzSXRlbUNoZWNrZWQodGFyZ2V0KTtcbiAgICAgICAgcGVuZGluZ0NoZWNrLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICBpZiAoc2hvdWxkQ2hlY2spIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEl0ZW0oaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUl0ZW0oaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjaGVja1BhcmVudHMocGFyZW50KSB7XG4gICAgICAgIGxldCBjdXJyZW50UGFyZW50ID0gcGFyZW50O1xuICAgICAgICB3aGlsZSAoY3VycmVudFBhcmVudCkge1xuICAgICAgICAgICAgY29uc3QgYWxsQ2hpbGRyZW5TZWxlY3RlZCA9IGN1cnJlbnRQYXJlbnQuY2hpbGRyZW4uZXZlcnkoaXRlbSA9PiB0aGlzLmlzSXRlbUNoZWNrZWQoaXRlbSkpO1xuICAgICAgICAgICAgaWYgKGFsbENoaWxkcmVuU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEl0ZW0oY3VycmVudFBhcmVudC5pdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlSXRlbShjdXJyZW50UGFyZW50Lml0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudFBhcmVudCA9IGN1cnJlbnRQYXJlbnQucGFyZW50O1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkZEl0ZW0oaXRlbSkge1xuICAgICAgICBpZiAodGhpcy5pc0l0ZW1DaGVja2VkKGl0ZW0pKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGV2ZWwgPSBnZXRIaWVyYXJjaGljYWxJdGVtTGV2ZWwoaXRlbS5pbmRleCk7XG4gICAgICAgIGNvbnN0IGNhbmRpZGF0ZSA9IE9iamVjdC5hc3NpZ24oe30sIGl0ZW0sIHsgbGV2ZWwgfSk7XG4gICAgICAgIHRoaXMuY2hlY2tlZEl0ZW1zLnB1c2goY2FuZGlkYXRlKTtcbiAgICAgICAgdGhpcy5jaGVja2VkS2V5cy5hZGQodmFsdWVGcm9tKGNhbmRpZGF0ZSwgdGhpcy52YWx1ZUZpZWxkKSk7XG4gICAgfVxuICAgIHJlbW92ZUl0ZW0oaXRlbSkge1xuICAgICAgICBpZiAoIXRoaXMuaXNJdGVtQ2hlY2tlZChpdGVtKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxldmVsID0gZ2V0SGllcmFyY2hpY2FsSXRlbUxldmVsKGl0ZW0uaW5kZXgpO1xuICAgICAgICBjb25zdCBjYW5kaWRhdGUgPSBPYmplY3QuYXNzaWduKHt9LCBpdGVtLCB7IGxldmVsIH0pO1xuICAgICAgICB0aGlzLmNoZWNrZWRJdGVtcyA9IHRoaXMuY2hlY2tlZEl0ZW1zXG4gICAgICAgICAgICAuZmlsdGVyKGl0ZW0gPT4gdmFsdWVGcm9tKGl0ZW0sIHRoaXMudmFsdWVGaWVsZCkgIT09IHZhbHVlRnJvbShjYW5kaWRhdGUsIHRoaXMudmFsdWVGaWVsZCkpO1xuICAgICAgICB0aGlzLmNoZWNrZWRLZXlzLmRlbGV0ZSh2YWx1ZUZyb20oY2FuZGlkYXRlLCB0aGlzLnZhbHVlRmllbGQpKTtcbiAgICB9XG4gICAgaXNJdGVtQ2hlY2tlZChpdGVtKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoZWNrZWRLZXlzLmhhcyh2YWx1ZUZyb20oaXRlbSwgdGhpcy52YWx1ZUZpZWxkKSk7XG4gICAgfVxuICAgIGlzSXRlbUluZGV0ZXJtaW5hdGUobG9va3VwKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkcmVuID0gbG9va3VwLmNoaWxkcmVuO1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoY2hpbGRyZW4pIHx8IGNoaWxkcmVuLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGxldCBpbmRleCA9IDA7XG4gICAgICAgIGxldCBjaGlsZCA9IGNoaWxkcmVuW2luZGV4XTtcbiAgICAgICAgd2hpbGUgKGlzUHJlc2VudChjaGlsZCkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzSXRlbUNoZWNrZWQoY2hpbGQuaXRlbSkgfHwgdGhpcy5pc0l0ZW1JbmRldGVybWluYXRlKGNoaWxkKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5kZXggKz0gMTtcbiAgICAgICAgICAgIGNoaWxkID0gY2hpbGRyZW5baW5kZXhdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59O1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuXSwgQ2hlY2tEaXJlY3RpdmUucHJvdG90eXBlLCBcImNoZWNrYWJsZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuXSwgQ2hlY2tEaXJlY3RpdmUucHJvdG90eXBlLCBcInZhbHVlRmllbGRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEFycmF5KVxuXSwgQ2hlY2tEaXJlY3RpdmUucHJvdG90eXBlLCBcImNoZWNrZWRJdGVtc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIENoZWNrRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJjaGVja2VkSXRlbXNDaGFuZ2VcIiwgdm9pZCAwKTtcbkNoZWNrRGlyZWN0aXZlID0gX19kZWNvcmF0ZShbXG4gICAgRGlyZWN0aXZlKHtcbiAgICAgICAgc2VsZWN0b3I6ICdba2VuZG9NdWx0aVNlbGVjdFRyZWVDaGVja2FibGVdJ1xuICAgIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbVHJlZVZpZXdDb21wb25lbnRdKVxuXSwgQ2hlY2tEaXJlY3RpdmUpO1xuXG5jb25zdCBJTlRFUk5BTF9ESVJFQ1RJVkVTID0gW1xuICAgIExpc3RDb21wb25lbnQsXG4gICAgTGlzdEl0ZW1EaXJlY3RpdmUsXG4gICAgU2VsZWN0YWJsZURpcmVjdGl2ZSxcbiAgICBTZWFyY2hCYXJDb21wb25lbnQsXG4gICAgVGVtcGxhdGVDb250ZXh0RGlyZWN0aXZlLFxuICAgIFRhZ0xpc3RDb21wb25lbnQsXG4gICAgQ2hlY2tEaXJlY3RpdmVcbl07XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xubGV0IFNoYXJlZE1vZHVsZSA9IGNsYXNzIFNoYXJlZE1vZHVsZSB7XG59O1xuU2hhcmVkTW9kdWxlID0gX19kZWNvcmF0ZShbXG4gICAgTmdNb2R1bGUoe1xuICAgICAgICBkZWNsYXJhdGlvbnM6IFtJTlRFUk5BTF9ESVJFQ1RJVkVTXSxcbiAgICAgICAgZXhwb3J0czogW0lOVEVSTkFMX0RJUkVDVElWRVMsIENvbW1vbk1vZHVsZSwgRm9ybXNNb2R1bGUsIFBvcHVwTW9kdWxlLCBSZXNpemVTZW5zb3JNb2R1bGUsIFNoYXJlZERpcmVjdGl2ZXNNb2R1bGUsIEV2ZW50c01vZHVsZV0sXG4gICAgICAgIGltcG9ydHM6IFtDb21tb25Nb2R1bGUsIEZvcm1zTW9kdWxlLCBQb3B1cE1vZHVsZSwgUmVzaXplU2Vuc29yTW9kdWxlLCBTaGFyZWREaXJlY3RpdmVzTW9kdWxlLCBFdmVudHNNb2R1bGVdXG4gICAgfSlcbl0sIFNoYXJlZE1vZHVsZSk7XG5cbi8qKlxuICogQSBkaXJlY3RpdmUgd2hpY2ggY29uZmlndXJlcyB0aGUgTXVsdGlTZWxlY3RUcmVlIHRvIHNob3cgb25lIHNpbmdsZSBzdW1tYXJ5IHRhZyBmb3IgYWxsIHNlbGVjdGVkIGRhdGEgaXRlbXMuXG4gKiBXaGVuIGEgbnVtYmVyIGlzIHByb3ZpZGVkLCB0aGUgc3VtbWFyeSB0YWcgaXMgZGlzcGxheWVkIGFmdGVyIHRoZSBnaXZlbiBhbW91bnQgb2YgZGF0YSBpdGVtcyBhcmUgc2VsZWN0ZWRcbiAqIChbbW9yZSBpbmZvcm1hdGlvbiBhbmQgZXhhbXBsZXNdKHslIHNsdWcgYXBpX2Ryb3Bkb3duc19tdWx0aXNlbGVjdHRyZWVzdW1tYXJ5dGFnZGlyZWN0aXZlICV9KSkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzLW5vLXJ1blxuICogPGtlbmRvLW11bHRpc2VsZWN0dHJlZSBrZW5kb011bHRpU2VsZWN0VHJlZVN1bW1hcnlUYWcgW2RhdGFdPVwiZGF0YVwiPjwva2VuZG8tbXVsdGlzZWxlY3R0cmVlPlxuICogYGBgXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzLW5vLXJ1blxuICogPGtlbmRvLW11bHRpc2VsZWN0dHJlZSBba2VuZG9NdWx0aVNlbGVjdFRyZWVTdW1tYXJ5VGFnXT1cIjJcIiBbZGF0YV09XCJkYXRhXCI+PC9rZW5kby1tdWx0aXNlbGVjdHRyZWU+XG4gKiBgYGBcbiAqL1xubGV0IE11bHRpU2VsZWN0VHJlZVN1bW1hcnlUYWdEaXJlY3RpdmUgPSBjbGFzcyBNdWx0aVNlbGVjdFRyZWVTdW1tYXJ5VGFnRGlyZWN0aXZlIHtcbiAgICBjb25zdHJ1Y3RvcihtdWx0aVNlbGVjdFRyZWVDb21wb25lbnQpIHtcbiAgICAgICAgdGhpcy5tdWx0aVNlbGVjdFRyZWVDb21wb25lbnQgPSBtdWx0aVNlbGVjdFRyZWVDb21wb25lbnQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIG51bWVyaWMgdmFsdWUgdGhhdCBpbmRpY2F0ZXMgdGhlIG51bWJlciBvZiBzZWxlY3RlZCBkYXRhIGl0ZW1zIGFmdGVyIHdoaWNoIHRoZSBzdW1tYXJ5IHRhZyB3aWxsIGFwcGVhci5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2hvd0FmdGVyID0gMDtcbiAgICAgICAgdGhpcy5jcmVhdGVUYWdNYXBwZXIoKTtcbiAgICB9XG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlcykge1xuICAgICAgICBpZiAoaXNQcmVzZW50KGNoYW5nZXMuc2hvd0FmdGVyKSkge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVUYWdNYXBwZXIoKTtcbiAgICAgICAgICAgIHRoaXMubXVsdGlTZWxlY3RUcmVlQ29tcG9uZW50LmhhbmRsZVRhZ01hcHBlckNoYW5nZSh0aGlzLnNob3dBZnRlcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY3JlYXRlVGFnTWFwcGVyKCkge1xuICAgICAgICBjb25zdCBzaG93QWZ0ZXIgPSBwYXJzZU51bWJlcih0aGlzLnNob3dBZnRlcik7XG4gICAgICAgIHRoaXMubXVsdGlTZWxlY3RUcmVlQ29tcG9uZW50LnRhZ01hcHBlciA9ICh0YWdzKSA9PiB7XG4gICAgICAgICAgICBpZiAodGFncy5sZW5ndGggPiBzaG93QWZ0ZXIpIHtcbiAgICAgICAgICAgICAgICAvLyB0YWdzIHByb3ZpZGVkIGluIGFuIGFycmF5IGFyZSByZW5kZXJlZCBhcyBhIHNpbmdsZSBncm91cCB0YWdcbiAgICAgICAgICAgICAgICByZXR1cm4gWy4uLnRhZ3Muc2xpY2UoMCwgc2hvd0FmdGVyKSwgdGFncy5zbGljZShzaG93QWZ0ZXIpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0YWdzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbn07XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgna2VuZG9NdWx0aVNlbGVjdFRyZWVTdW1tYXJ5VGFnJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbl0sIE11bHRpU2VsZWN0VHJlZVN1bW1hcnlUYWdEaXJlY3RpdmUucHJvdG90eXBlLCBcInNob3dBZnRlclwiLCB2b2lkIDApO1xuTXVsdGlTZWxlY3RUcmVlU3VtbWFyeVRhZ0RpcmVjdGl2ZSA9IF9fZGVjb3JhdGUoW1xuICAgIERpcmVjdGl2ZSh7XG4gICAgICAgIHNlbGVjdG9yOiAnW2tlbmRvTXVsdGlTZWxlY3RUcmVlU3VtbWFyeVRhZ10nXG4gICAgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtNdWx0aVNlbGVjdFRyZWVDb21wb25lbnRdKVxuXSwgTXVsdGlTZWxlY3RUcmVlU3VtbWFyeVRhZ0RpcmVjdGl2ZSk7XG5cbmNvbnN0IERST1BET1dOVFJFRV9ESVJFQ1RJVkVTID0gW1xuICAgIERyb3BEb3duVHJlZUNvbXBvbmVudCxcbiAgICBNdWx0aVNlbGVjdFRyZWVDb21wb25lbnQsXG4gICAgRHJvcERvd25UcmVlRmxhdEJpbmRpbmdEaXJlY3RpdmUsXG4gICAgRHJvcERvd25UcmVlSGllcmFyY2h5QmluZGluZ0RpcmVjdGl2ZSxcbiAgICBNdWx0aVNlbGVjdFRyZWVGbGF0QmluZGluZ0RpcmVjdGl2ZSxcbiAgICBNdWx0aVNlbGVjdFRyZWVIaWVyYXJjaHlCaW5kaW5nRGlyZWN0aXZlLFxuICAgIERyb3BEb3duVHJlZXNFeHBhbmREaXJlY3RpdmUsXG4gICAgTm9kZVRlbXBsYXRlRGlyZWN0aXZlLFxuICAgIE11bHRpU2VsZWN0VHJlZVN1bW1hcnlUYWdEaXJlY3RpdmVcbl07XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xubGV0IERyb3BEb3duVHJlZXNNb2R1bGUgPSBjbGFzcyBEcm9wRG93blRyZWVzTW9kdWxlIHtcbn07XG5Ecm9wRG93blRyZWVzTW9kdWxlID0gX19kZWNvcmF0ZShbXG4gICAgTmdNb2R1bGUoe1xuICAgICAgICBkZWNsYXJhdGlvbnM6IFtEUk9QRE9XTlRSRUVfRElSRUNUSVZFU10sXG4gICAgICAgIGV4cG9ydHM6IFtEUk9QRE9XTlRSRUVfRElSRUNUSVZFUywgU2hhcmVkRGlyZWN0aXZlc01vZHVsZV0sXG4gICAgICAgIGltcG9ydHM6IFtTaGFyZWRNb2R1bGUsIFRyZWVWaWV3TW9kdWxlXVxuICAgIH0pXG5dLCBEcm9wRG93blRyZWVzTW9kdWxlKTtcblxuLyoqXG4gKiBBIGRpcmVjdGl2ZSB3aGljaCBjb25maWd1cmVzIHRoZSBNdWx0aVNlbGVjdCB0byBzaG93IG9uZSBzaW5nbGUgc3VtbWFyeSB0YWcgZm9yIGFsbCBzZWxlY3RlZCBkYXRhIGl0ZW1zLlxuICogV2hlbiBhIG51bWJlciBpcyBwcm92aWRlZCwgdGhlIHN1bW1hcnkgdGFnIGlzIGRpc3BsYXllZCBhZnRlciB0aGUgZ2l2ZW4gYW1vdW50IG9mIGRhdGEgaXRlbXMgYXJlIHNlbGVjdGVkXG4gKiAoW21vcmUgaW5mb3JtYXRpb24gYW5kIGV4YW1wbGVzXSh7JSBzbHVnIHN1bW1hcnl0YWdtb2RlX211bHRpc2VsZWN0ICV9KSkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzLW5vLXJ1blxuICogPGtlbmRvLW11bHRpc2VsZWN0IGtlbmRvTXVsdGlTZWxlY3RTdW1tYXJ5VGFnIFtkYXRhXT1cImRhdGFcIj48L2tlbmRvLW11bHRpc2VsZWN0PlxuICogYGBgXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzLW5vLXJ1blxuICogPGtlbmRvLW11bHRpc2VsZWN0IFtrZW5kb011bHRpU2VsZWN0U3VtbWFyeVRhZ109XCIyXCIgW2RhdGFdPVwiZGF0YVwiPjwva2VuZG8tbXVsdGlzZWxlY3Q+XG4gKiBgYGBcbiAqL1xubGV0IFN1bW1hcnlUYWdEaXJlY3RpdmUgPSBjbGFzcyBTdW1tYXJ5VGFnRGlyZWN0aXZlIHtcbiAgICBjb25zdHJ1Y3RvcihtdWx0aVNlbGVjdENvbXBvbmVudCkge1xuICAgICAgICB0aGlzLm11bHRpU2VsZWN0Q29tcG9uZW50ID0gbXVsdGlTZWxlY3RDb21wb25lbnQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIG51bWVyaWMgdmFsdWUgdGhhdCBpbmRpY2F0ZXMgdGhlIG51bWJlciBvZiBzZWxlY3RlZCBkYXRhIGl0ZW1zIGFmdGVyIHdoaWNoIHRoZSBzdW1tYXJ5IHRhZyB3aWxsIGFwcGVhci5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2hvd0FmdGVyID0gMDtcbiAgICAgICAgdGhpcy5jcmVhdGVUYWdNYXBwZXIoKTtcbiAgICB9XG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlcykge1xuICAgICAgICBpZiAoaXNQcmVzZW50KGNoYW5nZXMuc2hvd0FmdGVyKSkge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVUYWdNYXBwZXIoKTtcbiAgICAgICAgICAgIHRoaXMubXVsdGlTZWxlY3RDb21wb25lbnQub25UYWdNYXBwZXJDaGFuZ2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjcmVhdGVUYWdNYXBwZXIoKSB7XG4gICAgICAgIGNvbnN0IHNob3dBZnRlciA9IHBhcnNlTnVtYmVyKHRoaXMuc2hvd0FmdGVyKTtcbiAgICAgICAgdGhpcy5tdWx0aVNlbGVjdENvbXBvbmVudC50YWdNYXBwZXIgPSAodGFncykgPT4ge1xuICAgICAgICAgICAgaWYgKHRhZ3MubGVuZ3RoID4gc2hvd0FmdGVyKSB7XG4gICAgICAgICAgICAgICAgbGV0IHJlc3VsdDtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB0YWdzLnNsaWNlKDAsIHNob3dBZnRlcik7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2godGFncy5zbGljZShzaG93QWZ0ZXIsIHRhZ3MubGVuZ3RoKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0YWdzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbn07XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgna2VuZG9NdWx0aVNlbGVjdFN1bW1hcnlUYWcnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuXSwgU3VtbWFyeVRhZ0RpcmVjdGl2ZS5wcm90b3R5cGUsIFwic2hvd0FmdGVyXCIsIHZvaWQgMCk7XG5TdW1tYXJ5VGFnRGlyZWN0aXZlID0gX19kZWNvcmF0ZShbXG4gICAgRGlyZWN0aXZlKHtcbiAgICAgICAgc2VsZWN0b3I6ICdba2VuZG9NdWx0aVNlbGVjdFN1bW1hcnlUYWddJ1xuICAgIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTXVsdGlTZWxlY3RDb21wb25lbnRdKVxuXSwgU3VtbWFyeVRhZ0RpcmVjdGl2ZSk7XG5cbmNvbnN0IEFVVE9DT01QTEVURV9ESVJFQ1RJVkVTID0gW1xuICAgIEF1dG9Db21wbGV0ZUNvbXBvbmVudFxuXTtcbi8qKlxuICogQGhpZGRlblxuICpcbiAqIFRoZSBleHBvcnRlZCBwYWNrYWdlIG1vZHVsZS5cbiAqXG4gKiBUaGUgcGFja2FnZSBleHBvcnRzOlxuICogLSBgQXV0b0NvbXBsZXRlQ29tcG9uZW50YCZtZGFzaDtUaGUgQXV0b0NvbXBsZXRlIGNvbXBvbmVudCBjbGFzcy5cbiAqIC0gYEl0ZW1UZW1wbGF0ZURpcmVjdGl2ZWAmbWRhc2g7VGhlIGl0ZW0gdGVtcGxhdGUgZGlyZWN0aXZlLlxuICogLSBgSGVhZGVyVGVtcGxhdGVEaXJlY3RpdmVgJm1kYXNoO1RoZSBoZWFkZXIgdGVtcGxhdGUgZGlyZWN0aXZlLlxuICogLSBgRm9vdGVyVGVtcGxhdGVEaXJlY3RpdmVgJm1kYXNoO1RoZSBmb290ZXIgdGVtcGxhdGUgZGlyZWN0aXZlLlxuICovXG5sZXQgQXV0b0NvbXBsZXRlTW9kdWxlID0gY2xhc3MgQXV0b0NvbXBsZXRlTW9kdWxlIHtcbn07XG5BdXRvQ29tcGxldGVNb2R1bGUgPSBfX2RlY29yYXRlKFtcbiAgICBOZ01vZHVsZSh7XG4gICAgICAgIGRlY2xhcmF0aW9uczogW0FVVE9DT01QTEVURV9ESVJFQ1RJVkVTXSxcbiAgICAgICAgZXhwb3J0czogW0FVVE9DT01QTEVURV9ESVJFQ1RJVkVTLCBTaGFyZWREaXJlY3RpdmVzTW9kdWxlXSxcbiAgICAgICAgaW1wb3J0czogW1NoYXJlZE1vZHVsZV1cbiAgICB9KVxuXSwgQXV0b0NvbXBsZXRlTW9kdWxlKTtcblxuY29uc3QgQ09NQk9CT1hfRElSRUNUSVZFUyA9IFtcbiAgICBDb21ib0JveENvbXBvbmVudCxcbiAgICBNdWx0aUNvbHVtbkNvbWJvQm94Q29tcG9uZW50LFxuICAgIENvbWJvQm94Q29sdW1uQ29tcG9uZW50LFxuICAgIENvbHVtbkhlYWRlclRlbXBsYXRlRGlyZWN0aXZlLFxuICAgIENvbHVtbkNlbGxUZW1wbGF0ZURpcmVjdGl2ZVxuXTtcbmNvbnN0IMm1MCQ0ID0gdG91Y2hFbmFibGVkO1xuLyoqXG4gKiBAaGlkZGVuXG4gKlxuICogVGhlIGV4cG9ydGVkIHBhY2thZ2UgbW9kdWxlLlxuICpcbiAqIFRoZSBwYWNrYWdlIGV4cG9ydHM6XG4gKiAtIGBDb21ib0JveENvbXBvbmVudGAmbWRhc2g7VGhlIENvbWJvQm94IGNvbXBvbmVudCBjbGFzcy5cbiAqIC0gYE11bHRpQ29sdW1uQ29tYm9Cb3hDb21wb25lbnRgJm1kYXNoO1RoZSBNdWx0aUNvbHVtbkNvbWJvQm94IGNvbXBvbmVudCBjbGFzcy5cbiAqIC0gYEl0ZW1UZW1wbGF0ZURpcmVjdGl2ZWAmbWRhc2g7VGhlIGl0ZW0gdGVtcGxhdGUgZGlyZWN0aXZlLlxuICogLSBgSGVhZGVyVGVtcGxhdGVEaXJlY3RpdmVgJm1kYXNoO1RoZSBoZWFkZXIgdGVtcGxhdGUgZGlyZWN0aXZlLlxuICogLSBgRm9vdGVyVGVtcGxhdGVEaXJlY3RpdmVgJm1kYXNoO1RoZSBmb290ZXIgdGVtcGxhdGUgZGlyZWN0aXZlLlxuICogLSBgQ29sdW1uSGVhZGVyVGVtcGxhdGVEaXJlY3RpdmVgJm1kYXNoO1RoZSBjb2x1bW4gaGVhZGVyIHRlbXBsYXRlIGRpcmVjdGl2ZS5cbiAqIC0gYENvbHVtbkNlbGxUZW1wbGF0ZURpcmVjdGl2ZWAmbWRhc2g7VGhlIGNvbHVtbiBjZWxsIHRlbXBsYXRlIGRpcmVjdGl2ZS5cbiAqL1xubGV0IENvbWJvQm94TW9kdWxlID0gY2xhc3MgQ29tYm9Cb3hNb2R1bGUge1xufTtcbkNvbWJvQm94TW9kdWxlID0gX19kZWNvcmF0ZShbXG4gICAgTmdNb2R1bGUoe1xuICAgICAgICBkZWNsYXJhdGlvbnM6IFtDT01CT0JPWF9ESVJFQ1RJVkVTXSxcbiAgICAgICAgZXhwb3J0czogW0NPTUJPQk9YX0RJUkVDVElWRVMsIFNoYXJlZERpcmVjdGl2ZXNNb2R1bGVdLFxuICAgICAgICBpbXBvcnRzOiBbU2hhcmVkTW9kdWxlXSxcbiAgICAgICAgcHJvdmlkZXJzOiBbeyBwcm92aWRlOiBUT1VDSF9FTkFCTEVELCB1c2VWYWx1ZTogybUwJDQgfV1cbiAgICB9KVxuXSwgQ29tYm9Cb3hNb2R1bGUpO1xuXG5jb25zdCBEUk9QRE9XTkxJU1RfRElSRUNUSVZFUyA9IFtcbiAgICBEcm9wRG93bkxpc3RDb21wb25lbnRcbl07XG4vKipcbiAqIEBoaWRkZW5cbiAqXG4gKiBUaGUgZXhwb3J0ZWQgcGFja2FnZSBtb2R1bGUuXG4gKlxuICogVGhlIHBhY2thZ2UgZXhwb3J0czpcbiAqIC0gYERyb3BEb3duTGlzdENvbXBvbmVudGAmbWRhc2g7VGhlIERyb3BEb3duTGlzdCBjb21wb25lbnQgY2xhc3MuXG4gKiAtIGBJdGVtVGVtcGxhdGVEaXJlY3RpdmVgJm1kYXNoO1RoZSBpdGVtIHRlbXBsYXRlIGRpcmVjdGl2ZS5cbiAqIC0gYFZhbHVlVGVtcGxhdGVEaXJlY3RpdmVgJm1kYXNoO1RoZSB2YWx1ZSB0ZW1wbGF0ZSBkaXJlY3RpdmUuXG4gKiAtIGBIZWFkZXJUZW1wbGF0ZURpcmVjdGl2ZWAmbWRhc2g7VGhlIGhlYWRlciB0ZW1wbGF0ZSBkaXJlY3RpdmUuXG4gKiAtIGBGb290ZXJUZW1wbGF0ZURpcmVjdGl2ZWAmbWRhc2g7VGhlIGZvb3RlciB0ZW1wbGF0ZSBkaXJlY3RpdmUuXG4gKi9cbmxldCBEcm9wRG93bkxpc3RNb2R1bGUgPSBjbGFzcyBEcm9wRG93bkxpc3RNb2R1bGUge1xufTtcbkRyb3BEb3duTGlzdE1vZHVsZSA9IF9fZGVjb3JhdGUoW1xuICAgIE5nTW9kdWxlKHtcbiAgICAgICAgZGVjbGFyYXRpb25zOiBbRFJPUERPV05MSVNUX0RJUkVDVElWRVNdLFxuICAgICAgICBleHBvcnRzOiBbRFJPUERPV05MSVNUX0RJUkVDVElWRVMsIFNoYXJlZERpcmVjdGl2ZXNNb2R1bGVdLFxuICAgICAgICBpbXBvcnRzOiBbU2hhcmVkTW9kdWxlXVxuICAgIH0pXG5dLCBEcm9wRG93bkxpc3RNb2R1bGUpO1xuXG5jb25zdCBNVUxUSVNFTEVDVF9ESVJFQ1RJVkVTID0gW1xuICAgIE11bHRpU2VsZWN0Q29tcG9uZW50LFxuICAgIFN1bW1hcnlUYWdEaXJlY3RpdmUsXG4gICAgQ3VzdG9tSXRlbVRlbXBsYXRlRGlyZWN0aXZlXG5dO1xuY29uc3QgybUwJDUgPSB0b3VjaEVuYWJsZWQ7XG4vKipcbiAqIEBoaWRkZW5cbiAqXG4gKiBUaGUgZXhwb3J0ZWQgcGFja2FnZSBtb2R1bGUuXG4gKlxuICogVGhlIHBhY2thZ2UgZXhwb3J0czpcbiAqIC0gYE11bHRpU2VsZWN0Q29tcG9uZW50YCZtZGFzaDtUaGUgTXVsdGlTZWxlY3QgY29tcG9uZW50IGNsYXNzLlxuICogLSBgU3VtbWFyeVRhZ0RpcmVjdGl2ZWAmbWRhc2g7VGhlIE11bHRpU2VsZWN0IHN1bW1hcnkgdGFnIGRpcmVjdGl2ZS5cbiAqIC0gYEl0ZW1UZW1wbGF0ZURpcmVjdGl2ZWAmbWRhc2g7VGhlIGl0ZW0gdGVtcGxhdGUgZGlyZWN0aXZlLlxuICogLSBgQ3VzdG9tSXRlbVRlbXBsYXRlRGlyZWN0aXZlYCZtZGFzaDtUaGUgY3VzdG9tIGl0ZW0gdGVtcGxhdGUgZGlyZWN0aXZlLlxuICogLSBgVGFnVGVtcGxhdGVEaXJlY3RpdmVgJm1kYXNoO1RoZSB0YWcgdGVtcGxhdGUgZGlyZWN0aXZlLlxuICogLSBgU3VtbWFyeVRhZ1RlbXBsYXRlRGlyZWN0aXZlYCZtZGFzaDtUaGUgc3VtbWFyeSB0YWcgdGVtcGxhdGUgZGlyZWN0aXZlLlxuICogLSBgSGVhZGVyVGVtcGxhdGVEaXJlY3RpdmVgJm1kYXNoO1RoZSBoZWFkZXIgdGVtcGxhdGUgZGlyZWN0aXZlLlxuICogLSBgRm9vdGVyVGVtcGxhdGVEaXJlY3RpdmVgJm1kYXNoO1RoZSBmb290ZXIgdGVtcGxhdGUgZGlyZWN0aXZlLlxuICogLSBgTm9EYXRhVGVtcGxhdGVEaXJlY3RpdmVgJm1kYXNoO1RoZSBuby1kYXRhIHRlbXBsYXRlIGRpcmVjdGl2ZS5cbiAqL1xubGV0IE11bHRpU2VsZWN0TW9kdWxlID0gY2xhc3MgTXVsdGlTZWxlY3RNb2R1bGUge1xufTtcbk11bHRpU2VsZWN0TW9kdWxlID0gX19kZWNvcmF0ZShbXG4gICAgTmdNb2R1bGUoe1xuICAgICAgICBkZWNsYXJhdGlvbnM6IFtNVUxUSVNFTEVDVF9ESVJFQ1RJVkVTXSxcbiAgICAgICAgZXhwb3J0czogW01VTFRJU0VMRUNUX0RJUkVDVElWRVMsIFNoYXJlZERpcmVjdGl2ZXNNb2R1bGVdLFxuICAgICAgICBpbXBvcnRzOiBbU2hhcmVkTW9kdWxlXSxcbiAgICAgICAgcHJvdmlkZXJzOiBbeyBwcm92aWRlOiBUT1VDSF9FTkFCTEVELCB1c2VWYWx1ZTogybUwJDUgfV1cbiAgICB9KVxuXSwgTXVsdGlTZWxlY3RNb2R1bGUpO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIFtOZ01vZHVsZV0oe3sgc2l0ZS5kYXRhLnVybHMuYW5ndWxhclsnbmdtb2R1bGVhcGknXSB9fSlcbiAqIGRlZmluaXRpb24gZm9yIHRoZSBEcm9wZG93bnMgY29tcG9uZW50cy5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIGBgYHRzLW5vLXJ1blxuICogLy8gSW1wb3J0IHRoZSBEcm9wZG93bnMgbW9kdWxlXG4gKiBpbXBvcnQgeyBEcm9wRG93bnNNb2R1bGUgfSBmcm9tICdAcHJvZ3Jlc3Mva2VuZG8tYW5ndWxhci1kcm9wZG93bnMnO1xuICpcbiAqIC8vIFRoZSBicm93c2VyIHBsYXRmb3JtIHdpdGggYSBjb21waWxlclxuICogaW1wb3J0IHsgcGxhdGZvcm1Ccm93c2VyRHluYW1pYyB9IGZyb20gJ0Bhbmd1bGFyL3BsYXRmb3JtLWJyb3dzZXItZHluYW1pYyc7XG4gKlxuICogaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbiAqXG4gKiAvLyBJbXBvcnQgdGhlIGFwcCBjb21wb25lbnRcbiAqIGltcG9ydCB7IEFwcENvbXBvbmVudCB9IGZyb20gJy4vYXBwLmNvbXBvbmVudCc7XG4gKlxuICogLy8gRGVmaW5lIHRoZSBhcHAgbW9kdWxlXG4gKiBfQE5nTW9kdWxlKHtcbiAqICAgICBkZWNsYXJhdGlvbnM6IFtBcHBDb21wb25lbnRdLCAvLyBkZWNsYXJlIHRoZSBhcHAgY29tcG9uZW50XG4gKiAgICAgaW1wb3J0czogICAgICBbQnJvd3Nlck1vZHVsZSwgRHJvcERvd25zTW9kdWxlXSwgLy8gaW1wb3J0IHRoZSBEcm9wZG93bnMgbW9kdWxlXG4gKiAgICAgYm9vdHN0cmFwOiAgICBbQXBwQ29tcG9uZW50XVxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBBcHBNb2R1bGUge31cbiAqXG4gKiAvLyBDb21waWxlIGFuZCBsYXVuY2ggdGhlIG1vZHVsZVxuICogcGxhdGZvcm1Ccm93c2VyRHluYW1pYygpLmJvb3RzdHJhcE1vZHVsZShBcHBNb2R1bGUpO1xuICpcbiAqIGBgYFxuICovXG5sZXQgRHJvcERvd25zTW9kdWxlID0gY2xhc3MgRHJvcERvd25zTW9kdWxlIHtcbn07XG5Ecm9wRG93bnNNb2R1bGUgPSBfX2RlY29yYXRlKFtcbiAgICBOZ01vZHVsZSh7XG4gICAgICAgIGV4cG9ydHM6IFtBdXRvQ29tcGxldGVNb2R1bGUsIENvbWJvQm94TW9kdWxlLCBEcm9wRG93bkxpc3RNb2R1bGUsIE11bHRpU2VsZWN0TW9kdWxlLCBEcm9wRG93blRyZWVzTW9kdWxlXVxuICAgIH0pXG5dLCBEcm9wRG93bnNNb2R1bGUpO1xuXG4vKipcbiAqIEdlbmVyYXRlZCBidW5kbGUgaW5kZXguIERvIG5vdCBlZGl0LlxuICovXG5cbmV4cG9ydCB7IEFVVE9DT01QTEVURV9WQUxVRV9BQ0NFU1NPUiwgQ09NQk9CT1hfVkFMVUVfQUNDRVNTT1IsIFRPVUNIX0VOQUJMRUQsIERhdGFTZXJ2aWNlLCBEaXNhYmxlZEl0ZW1zU2VydmljZSwgRmlsdGVySW5wdXREaXJlY3RpdmUsIEZpbHRlcmFibGVDb21wb25lbnQsIExpc3RJdGVtRGlyZWN0aXZlLCBDdXN0b21NZXNzYWdlc0NvbXBvbmVudCwgTG9jYWxpemVkTWVzc2FnZXNEaXJlY3RpdmUsIE1lc3NhZ2VzLCBOYXZpZ2F0aW9uU2VydmljZSwgU2VhcmNoQmFyQ29tcG9uZW50LCBTZWxlY3Rpb25TZXJ2aWNlLCBUYWdMaXN0Q29tcG9uZW50LCBOb0RhdGFUZW1wbGF0ZURpcmVjdGl2ZSwgVGFnVGVtcGxhdGVEaXJlY3RpdmUsIERST1BET1dOTElTVF9WQUxVRV9BQ0NFU1NPUiwgQ2hlY2tEaXJlY3RpdmUsIE11bHRpU2VsZWN0VHJlZVN1bW1hcnlUYWdEaXJlY3RpdmUsIEF1dG9Db21wbGV0ZUNvbXBvbmVudCwgQ29tYm9Cb3hDb21wb25lbnQsIERyb3BEb3duTGlzdENvbXBvbmVudCwgTXVsdGlTZWxlY3RDb21wb25lbnQsIE11bHRpQ29sdW1uQ29tYm9Cb3hDb21wb25lbnQsIENvbWJvQm94Q29sdW1uQ29tcG9uZW50LCBDb2x1bW5DZWxsVGVtcGxhdGVEaXJlY3RpdmUsIENvbHVtbkhlYWRlclRlbXBsYXRlRGlyZWN0aXZlLCBEcm9wRG93blRyZWVDb21wb25lbnQsIE11bHRpU2VsZWN0VHJlZUNvbXBvbmVudCwgRHJvcERvd25UcmVlRmxhdEJpbmRpbmdEaXJlY3RpdmUsIERyb3BEb3duVHJlZUhpZXJhcmNoeUJpbmRpbmdEaXJlY3RpdmUsIE11bHRpU2VsZWN0VHJlZUZsYXRCaW5kaW5nRGlyZWN0aXZlLCBNdWx0aVNlbGVjdFRyZWVIaWVyYXJjaHlCaW5kaW5nRGlyZWN0aXZlLCBEcm9wRG93blRyZWVzRXhwYW5kRGlyZWN0aXZlLCBEcm9wRG93blRyZWVzTW9kdWxlLCBOb2RlVGVtcGxhdGVEaXJlY3RpdmUsIEl0ZW1UZW1wbGF0ZURpcmVjdGl2ZSwgR3JvdXBUZW1wbGF0ZURpcmVjdGl2ZSwgRml4ZWRHcm91cFRlbXBsYXRlRGlyZWN0aXZlLCBDdXN0b21JdGVtVGVtcGxhdGVEaXJlY3RpdmUsIEhlYWRlclRlbXBsYXRlRGlyZWN0aXZlLCBGb290ZXJUZW1wbGF0ZURpcmVjdGl2ZSwgVmFsdWVUZW1wbGF0ZURpcmVjdGl2ZSwgVGVtcGxhdGVDb250ZXh0RGlyZWN0aXZlLCBHcm91cFRhZ1RlbXBsYXRlRGlyZWN0aXZlLCBTZWxlY3RhYmxlRGlyZWN0aXZlLCBTdW1tYXJ5VGFnRGlyZWN0aXZlLCBGaWx0ZXJEaXJlY3RpdmUsIERyb3BEb3duc01vZHVsZSwgTXVsdGlTZWxlY3RNb2R1bGUsIFNoYXJlZE1vZHVsZSwgQXV0b0NvbXBsZXRlTW9kdWxlLCBDb21ib0JveE1vZHVsZSwgRHJvcERvd25MaXN0TW9kdWxlLCBTaGFyZWREaXJlY3RpdmVzTW9kdWxlLCBMaXN0Q29tcG9uZW50LCBQcmV2ZW50YWJsZUV2ZW50LCBSZW1vdmVUYWdFdmVudCB9O1xuIl19","map":null,"metadata":{},"sourceType":"module"}