{"ast":null,"code":"import HasObservers from '../core/has-observers';\nimport toMatrix from './to-matrix';\nimport Matrix from './matrix';\nimport Point from './point';\n\nclass Transformation extends HasObservers {\n  constructor(matrix = Matrix.unit()) {\n    super();\n    this._matrix = matrix;\n  }\n\n  clone() {\n    return new Transformation(this._matrix.clone());\n  }\n\n  equals(other) {\n    return other && other._matrix.equals(this._matrix);\n  }\n\n  translate(x, y) {\n    this._matrix = this._matrix.multiplyCopy(Matrix.translate(x, y));\n\n    this._optionsChange();\n\n    return this;\n  }\n\n  scale(scaleX, scaleY = scaleX, origin = null) {\n    let originPoint = origin;\n\n    if (originPoint) {\n      originPoint = Point.create(originPoint);\n      this._matrix = this._matrix.multiplyCopy(Matrix.translate(originPoint.x, originPoint.y));\n    }\n\n    this._matrix = this._matrix.multiplyCopy(Matrix.scale(scaleX, scaleY));\n\n    if (originPoint) {\n      this._matrix = this._matrix.multiplyCopy(Matrix.translate(-originPoint.x, -originPoint.y));\n    }\n\n    this._optionsChange();\n\n    return this;\n  }\n\n  rotate(angle, origin) {\n    const originPoint = Point.create(origin) || Point.ZERO;\n    this._matrix = this._matrix.multiplyCopy(Matrix.rotate(angle, originPoint.x, originPoint.y));\n\n    this._optionsChange();\n\n    return this;\n  }\n\n  multiply(transformation) {\n    const matrix = toMatrix(transformation);\n    this._matrix = this._matrix.multiplyCopy(matrix);\n\n    this._optionsChange();\n\n    return this;\n  }\n\n  matrix(value) {\n    if (value) {\n      this._matrix = value;\n\n      this._optionsChange();\n\n      return this;\n    }\n\n    return this._matrix;\n  }\n\n  _optionsChange() {\n    this.optionsChange({\n      field: \"transform\",\n      value: this\n    });\n  }\n\n}\n\nexport default Transformation;","map":null,"metadata":{},"sourceType":"module"}