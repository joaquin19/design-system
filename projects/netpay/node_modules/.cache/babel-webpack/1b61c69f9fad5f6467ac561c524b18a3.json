{"ast":null,"code":"/**-----------------------------------------------------------------------------------------\n* Copyright © 2021 Progress Software Corporation. All rights reserved.\n* Licensed under commercial license. See LICENSE.md in the project root for more information\n*-------------------------------------------------------------------------------------------*/\nimport { __decorate, __param, __metadata } from 'tslib';\nimport { isDevMode, Directive, Optional, TemplateRef, EventEmitter, Input, Output, HostBinding, ViewChild, ElementRef, ContentChild, Component, forwardRef, Injector, Renderer2, NgZone, ChangeDetectorRef, Inject, Injectable, HostListener, ViewChildren, QueryList, NgModule, ViewContainerRef, ContentChildren } from '@angular/core';\nimport { NgControl, NG_VALUE_ACCESSOR, NG_VALIDATORS, RadioControlValueAccessor } from '@angular/forms';\nimport { Subscription, fromEvent, interval, merge, Observable, Subject } from 'rxjs';\nimport { take, filter, concatMap, startWith, takeUntil, skip, debounceTime, throttleTime } from 'rxjs/operators';\nimport { LocalizationService, L10N_PREFIX, RTL, ComponentMessages, MessageService } from '@progress/kendo-angular-l10n';\nimport { Keys, guid, hasObservers, anyChanged, isDocumentAvailable, KendoInput, isChanged, DraggableModule, EventsModule, ResizeSensorModule } from '@progress/kendo-angular-common';\nimport { validatePackage } from '@progress/kendo-licensing';\nimport { browser, mobileOS } from '@progress/kendo-common';\nimport { IntlService } from '@progress/kendo-angular-intl';\nimport { CommonModule } from '@angular/common';\nimport { PopupService, PopupModule } from '@progress/kendo-angular-popup';\nimport { Color, parseColor, namedColors } from '@progress/kendo-drawing';\n/**\n * @hidden\n *\n * Checks if the value is `null` or `undefined`. Falsy values like '', 0, false, NaN, etc. are regarded as present.\n */\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@progress/kendo-angular-l10n';\nimport * as ɵngcc2 from '@progress/kendo-angular-common';\nimport * as ɵngcc3 from '@angular/common';\nimport * as ɵngcc4 from '@progress/kendo-angular-intl';\nimport * as ɵngcc5 from '@progress/kendo-angular-popup';\nconst _c0 = [\"wrap\"];\nconst _c1 = [\"track\"];\nconst _c2 = [\"sliderSelection\"];\nconst _c3 = [\"ticks\"];\nconst _c4 = [\"draghandle\"];\nconst _c5 = [\"decreaseButton\"];\nconst _c6 = [\"increaseButton\"];\n\nfunction SliderComponent_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\", 13, 14);\n    ɵngcc0.ɵɵelement(2, \"span\", 15);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"title\", ctx_r1.decrementMessage);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵclassProp(\"k-i-arrow-w\", !ctx_r1.vertical)(\"k-i-arrow-s\", ctx_r1.vertical);\n  }\n}\n\nfunction SliderComponent_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\", 16, 17);\n    ɵngcc0.ɵɵlistener(\"click\", function SliderComponent_span_4_Template_span_click_0_listener($event) {\n      return $event.preventDefault();\n    });\n    ɵngcc0.ɵɵelement(2, \"span\", 15);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"title\", ctx_r2.incrementMessage);\n    ɵngcc0.ɵɵattribute(\"aria-label\", ctx_r2.currentValue);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵclassProp(\"k-i-arrow-e\", !ctx_r2.vertical)(\"k-i-arrow-n\", ctx_r2.vertical);\n  }\n}\n\nfunction SliderComponent_ul_5_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"ul\", 18, 19);\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"tickTitle\", ctx_r3.title)(\"vertical\", ctx_r3.vertical)(\"step\", ctx_r3.smallStep)(\"largeStep\", ctx_r3.largeStep)(\"min\", ctx_r3.min)(\"max\", ctx_r3.max)(\"labelTemplate\", ctx_r3.labelTemplate == null ? null : ctx_r3.labelTemplate.templateRef);\n    ɵngcc0.ɵɵattribute(\"aria-hidden\", true);\n  }\n}\n\nconst _c13 = function (a0, a1) {\n  return {\n    click: a0,\n    keydown: a1\n  };\n};\n\nconst _c14 = [\"draghandleStart\"];\nconst _c15 = [\"draghandleEnd\"];\n\nfunction RangeSliderComponent_ul_3_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"ul\", 12, 13);\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"tickTitle\", ctx_r1.title)(\"vertical\", ctx_r1.vertical)(\"step\", ctx_r1.smallStep)(\"largeStep\", ctx_r1.largeStep)(\"min\", ctx_r1.min)(\"max\", ctx_r1.max)(\"labelTemplate\", ctx_r1.labelTemplate == null ? null : ctx_r1.labelTemplate.templateRef);\n    ɵngcc0.ɵɵattribute(\"aria-hidden\", true);\n  }\n}\n\nconst _c20 = [\"wrapper\"];\n\nconst _c25 = function (a0, a1, a2, a3) {\n  return {\n    click: a0,\n    keydown: a1,\n    focus: a2,\n    blur: a3\n  };\n};\n\nfunction TextBoxContainerComponent_label_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"label\", 1);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"for\", ctx_r0.id);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r0.floatingLabel);\n  }\n}\n\nconst _c26 = [\"*\"];\nconst _c27 = [\"numericInput\"];\nconst _c28 = [\"numericWrap\"];\n\nconst _c33 = function (a0, a1) {\n  return {\n    mouseup: a0,\n    mouseleave: a1\n  };\n};\n\nconst _c34 = function (a0) {\n  return {\n    mousedown: a0\n  };\n};\n\nfunction NumericTextBoxComponent_span_5_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\", 6);\n    ɵngcc0.ɵɵelementStart(1, \"span\", 7);\n    ɵngcc0.ɵɵelement(2, \"span\", 8);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"span\", 9);\n    ɵngcc0.ɵɵelement(4, \"span\", 10);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"kendoEventsOutsideAngular\", ɵngcc0.ɵɵpureFunction2(11, _c33, ctx_r2.releaseArrow, ctx_r2.releaseArrow));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵclassProp(\"k-state-active\", ctx_r2.arrowDirection === ctx_r2.ArrowDirection.Up);\n    ɵngcc0.ɵɵproperty(\"kendoEventsOutsideAngular\", ɵngcc0.ɵɵpureFunction1(14, _c34, ctx_r2.increasePress))(\"title\", ctx_r2.incrementTitle);\n    ɵngcc0.ɵɵattribute(\"aria-label\", ctx_r2.incrementTitle);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵclassProp(\"k-state-active\", ctx_r2.arrowDirection === ctx_r2.ArrowDirection.Down);\n    ɵngcc0.ɵɵproperty(\"kendoEventsOutsideAngular\", ɵngcc0.ɵɵpureFunction1(16, _c34, ctx_r2.decreasePress))(\"title\", ctx_r2.decrementTitle);\n    ɵngcc0.ɵɵattribute(\"aria-label\", ctx_r2.decrementTitle);\n  }\n}\n\nconst _c35 = function (a0, a1) {\n  return {\n    mousewheel: a0,\n    DOMMouseScroll: a1\n  };\n};\n\nconst _c36 = function (a0, a1, a2, a3, a4, a5, a6) {\n  return {\n    mousedown: a0,\n    dragenter: a1,\n    keydown: a2,\n    input: a3,\n    focus: a4,\n    blur: a5,\n    paste: a6\n  };\n};\n\nconst _c37 = [\"input\"];\n\nconst _c38 = function (a0, a1, a2, a3, a4) {\n  return {\n    focus: a0,\n    blur: a1,\n    click: a2,\n    dragstart: a3,\n    drop: a4\n  };\n};\n\nconst _c39 = [\"tickElement\"];\nconst _c40 = [\"kendoSliderTicks\", \"\"];\n\nfunction SliderTicksComponent_li_0_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\", 7);\n    ɵngcc0.ɵɵelementContainer(1, 8);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const tick_r3 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r5 = ɵngcc0.ɵɵnextContext();\n\n    const _r1 = ɵngcc0.ɵɵreference(2);\n\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r5.labelTemplate || _r1)(\"ngTemplateOutletContext\", tick_r3);\n  }\n}\n\nfunction SliderTicksComponent_li_0_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtext(1, \"\\u00A0\");\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n}\n\nfunction SliderTicksComponent_li_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"li\", 2, 3);\n    ɵngcc0.ɵɵelementContainerStart(2, 4);\n    ɵngcc0.ɵɵtemplate(3, SliderTicksComponent_li_0_span_3_Template, 2, 2, \"span\", 5);\n    ɵngcc0.ɵɵtemplate(4, SliderTicksComponent_li_0_ng_container_4_Template, 2, 0, \"ng-container\", 6);\n    ɵngcc0.ɵɵelementContainerEnd();\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const tick_r3 = ctx.$implicit;\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵpropertyInterpolate(\"title\", ctx_r0.tickTitle(tick_r3.value));\n    ɵngcc0.ɵɵproperty(\"ngClass\", tick_r3.classes);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngSwitch\", tick_r3.large);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngSwitchCase\", true);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngSwitchCase\", false);\n  }\n}\n\nfunction SliderTicksComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n  }\n\n  if (rf & 2) {\n    const value_r8 = ctx.value;\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ctx_r2.tickTitle(value_r8), \" \");\n  }\n}\n\nfunction TextBoxComponent_2_ng_template_0_Template(rf, ctx) {}\n\nfunction TextBoxComponent_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, TextBoxComponent_2_ng_template_0_Template, 0, 0, \"ng-template\", 8);\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r0.prefixTemplate == null ? null : ctx_r0.prefixTemplate.templateRef);\n  }\n}\n\nfunction TextBoxComponent_span_6_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"span\", 9);\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngClass\", ctx_r2.errorIconClasses);\n  }\n}\n\nfunction TextBoxComponent_span_7_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"span\", 9);\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngClass\", ctx_r3.successIconClasses);\n  }\n}\n\nfunction TextBoxComponent_span_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"span\", 10);\n    ɵngcc0.ɵɵlistener(\"click\", function TextBoxComponent_span_8_Template_span_click_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r8);\n      const ctx_r7 = ɵngcc0.ɵɵnextContext();\n      return ctx_r7.clearValue();\n    })(\"mousedown\", function TextBoxComponent_span_8_Template_span_mousedown_0_listener($event) {\n      return $event.preventDefault();\n    })(\"keydown.enter\", function TextBoxComponent_span_8_Template_span_keydown_enter_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r8);\n      const ctx_r10 = ɵngcc0.ɵɵnextContext();\n      return ctx_r10.clearValue($event);\n    })(\"keydown.space\", function TextBoxComponent_span_8_Template_span_keydown_space_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r8);\n      const ctx_r11 = ɵngcc0.ɵɵnextContext();\n      return ctx_r11.clearValue($event);\n    });\n    ɵngcc0.ɵɵelement(1, \"span\", 9);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"tabindex\", ctx_r4.tabIndex)(\"title\", ctx_r4.clearTitle());\n    ɵngcc0.ɵɵattribute(\"aria-label\", ctx_r4.clearTitle());\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngClass\", ctx_r4.clearButtonClasses);\n  }\n}\n\nfunction TextBoxComponent_9_ng_template_0_Template(rf, ctx) {}\n\nfunction TextBoxComponent_9_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, TextBoxComponent_9_ng_template_0_Template, 0, 0, \"ng-template\", 8);\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r5.suffixTemplate == null ? null : ctx_r5.suffixTemplate.templateRef);\n  }\n}\n\nconst _c43 = function (a0, a1, a2) {\n  return {\n    focus: a0,\n    blur: a1,\n    input: a2\n  };\n};\n\nconst _c44 = [[[\"kendo-textarea-suffix\"]]];\nconst _c45 = [\"kendo-textarea-suffix\"];\nconst _c46 = [\"opacityInput\"];\n\nfunction ColorInputComponent_kendo_numerictextbox_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"kendo-numerictextbox\", 7, 8);\n    ɵngcc0.ɵɵlistener(\"valueChange\", function ColorInputComponent_kendo_numerictextbox_6_Template_kendo_numerictextbox_valueChange_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r5);\n      const ctx_r4 = ɵngcc0.ɵɵnextContext();\n      return ctx_r4.rgba.a = $event;\n    })(\"blur\", function ColorInputComponent_kendo_numerictextbox_6_Template_kendo_numerictextbox_blur_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r5);\n      const ctx_r6 = ɵngcc0.ɵɵnextContext();\n      return ctx_r6.handleRgbaInputBlur();\n    })(\"valueChange\", function ColorInputComponent_kendo_numerictextbox_6_Template_kendo_numerictextbox_valueChange_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r5);\n      const ctx_r7 = ɵngcc0.ɵɵnextContext();\n      return ctx_r7.handleRgbaValueChange();\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"disabled\", ctx_r1.disabled)(\"readonly\", ctx_r1.readonly)(\"min\", 0)(\"max\", 1)(\"placeholder\", ctx_r1.textFor(\"alphaInputPlaceholder\"))(\"value\", ctx_r1.rgba.a)(\"autoCorrect\", true)(\"spinners\", false)(\"step\", 0.01)(\"format\", \"n2\")(\"decimals\", 2);\n  }\n}\n\nfunction ColorInputComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\");\n    ɵngcc0.ɵɵtext(1, \"a\");\n    ɵngcc0.ɵɵelementEnd();\n  }\n}\n\nconst _c47 = [\"gradientDragHandle\"];\nconst _c48 = [\"inputs\"];\nconst _c49 = [\"alphaSlider\"];\nconst _c50 = [\"gradientWrapper\"];\n\nfunction ColorGradientComponent_span_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"span\", 12);\n    ɵngcc0.ɵɵlistener(\"click\", function ColorGradientComponent_span_8_Template_span_click_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r6);\n      const ctx_r5 = ɵngcc0.ɵɵnextContext();\n      return ctx_r5.reset();\n    })(\"keydown.enter\", function ColorGradientComponent_span_8_Template_span_keydown_enter_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r6);\n      const ctx_r7 = ɵngcc0.ɵɵnextContext();\n      return ctx_r7.reset();\n    })(\"keydown.space\", function ColorGradientComponent_span_8_Template_span_keydown_space_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r6);\n      const ctx_r8 = ɵngcc0.ɵɵnextContext();\n      return ctx_r8.reset();\n    });\n    ɵngcc0.ɵɵelement(1, \"span\", 13);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵattribute(\"aria-label\", ctx_r2.clearButtonTitle)(\"title\", ctx_r2.clearButtonTitle);\n  }\n}\n\nfunction ColorGradientComponent_kendo_slider_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"kendo-slider\", 14, 15);\n    ɵngcc0.ɵɵlistener(\"valueChange\", function ColorGradientComponent_kendo_slider_10_Template_kendo_slider_valueChange_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r11);\n      const ctx_r10 = ɵngcc0.ɵɵnextContext();\n      return ctx_r10.handleAlphaSliderChange($event);\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"dragHandleTitle\", ctx_r3.opacitySliderTitle)(\"disabled\", ctx_r3.disabled)(\"readonly\", ctx_r3.readonly)(\"showButtons\", false)(\"tickPlacement\", \"none\")(\"vertical\", true)(\"min\", 0)(\"max\", 100)(\"smallStep\", 1)(\"largeStep\", 10)(\"value\", ctx_r3.alphaSliderValue);\n  }\n}\n\nconst _c71 = [\"palette\"];\nconst _c72 = [\"container\"];\nconst _c73 = [\"popupTemplate\"];\nconst _c74 = [\"colorGradient\"];\n\nfunction ColorPickerComponent_span_3_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"span\", 11);\n  }\n}\n\nfunction ColorPickerComponent_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"span\", 9);\n    ɵngcc0.ɵɵlistener(\"click\", function ColorPickerComponent_span_3_Template_span_click_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r8);\n      const ctx_r7 = ɵngcc0.ɵɵnextContext();\n      return ctx_r7.handleActiveColorClick();\n    });\n    ɵngcc0.ɵɵtemplate(1, ColorPickerComponent_span_3_span_1_Template, 1, 0, \"span\", 10);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵstyleProp(\"background-color\", ctx_r1.value);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r1.value);\n  }\n}\n\nfunction ColorPickerComponent_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"span\", 12);\n    ɵngcc0.ɵɵlistener(\"click\", function ColorPickerComponent_span_4_Template_span_click_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r10);\n      const ctx_r9 = ɵngcc0.ɵɵnextContext();\n      return ctx_r9.handleActiveColorClick();\n    });\n    ɵngcc0.ɵɵelement(1, \"span\", 13);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngClass\", ctx_r2.iconStyles);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵstyleProp(\"background-color\", ctx_r2.value);\n  }\n}\n\nfunction ColorPickerComponent_ng_template_7_kendo_colorgradient_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"kendo-colorgradient\", 16, 17);\n    ɵngcc0.ɵɵlistener(\"focusout\", function ColorPickerComponent_ng_template_7_kendo_colorgradient_0_Template_kendo_colorgradient_focusout_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r15);\n      const ctx_r14 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r14.handlePopupBlur($event);\n    })(\"valueChange\", function ColorPickerComponent_ng_template_7_kendo_colorgradient_0_Template_kendo_colorgradient_valueChange_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r15);\n      const ctx_r16 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r16.handleValueChange($event, false);\n    })(\"keydown\", function ColorPickerComponent_ng_template_7_kendo_colorgradient_0_Template_kendo_colorgradient_keydown_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r15);\n      const ctx_r17 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r17.handlePopupKeyDown($event);\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r11 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"value\", ctx_r11.value)(\"format\", ctx_r11.format)(\"opacity\", ctx_r11.gradientSettings.opacity)(\"clearButton\", ctx_r11.gradientSettings.clearButton)(\"delay\", ctx_r11.gradientSettings.delay);\n  }\n}\n\nfunction ColorPickerComponent_ng_template_7_kendo_colorpalette_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"kendo-colorpalette\", 18, 19);\n    ɵngcc0.ɵɵlistener(\"blur\", function ColorPickerComponent_ng_template_7_kendo_colorpalette_1_Template_kendo_colorpalette_blur_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r20);\n      const ctx_r19 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r19.handlePopupBlur($event);\n    })(\"cellSelection\", function ColorPickerComponent_ng_template_7_kendo_colorpalette_1_Template_kendo_colorpalette_cellSelection_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r20);\n      const ctx_r21 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r21.handleValueChange($event, true);\n    })(\"mousedown\", function ColorPickerComponent_ng_template_7_kendo_colorpalette_1_Template_kendo_colorpalette_mousedown_0_listener($event) {\n      return $event.preventDefault();\n    })(\"keydown\", function ColorPickerComponent_ng_template_7_kendo_colorpalette_1_Template_kendo_colorpalette_keydown_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r20);\n      const ctx_r23 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r23.handlePopupKeyDown($event);\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r12 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"palette\", ctx_r12.paletteSettings.palette)(\"columns\", ctx_r12.paletteSettings.columns)(\"tileSize\", ctx_r12.paletteSettings.tileSize)(\"format\", ctx_r12.format)(\"value\", ctx_r12.value);\n  }\n}\n\nfunction ColorPickerComponent_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, ColorPickerComponent_ng_template_7_kendo_colorgradient_0_Template, 2, 5, \"kendo-colorgradient\", 14);\n    ɵngcc0.ɵɵtemplate(1, ColorPickerComponent_ng_template_7_kendo_colorpalette_1_Template, 2, 5, \"kendo-colorpalette\", 15);\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r4.view === \"gradient\" || ctx_r4.view === \"combo\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r4.view === \"palette\" || ctx_r4.view === \"combo\");\n  }\n}\n\nconst _c93 = function (a1, a2) {\n  return {\n    \"k-picker-wrap\": true,\n    \"k-state-disabled\": a1,\n    \"k-state-focused\": a2\n  };\n};\n\nconst _c96 = function (a0, a1, a2, a3) {\n  return {\n    backgroundColor: a0,\n    width: a1,\n    height: a2,\n    minWidth: a3\n  };\n};\n\nfunction ColorPaletteComponent_tr_4_td_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"td\", 5);\n    ɵngcc0.ɵɵlistener(\"click\", function ColorPaletteComponent_tr_4_td_1_Template_td_click_0_listener() {\n      const restoredCtx = ɵngcc0.ɵɵrestoreView(_r7);\n      const color_r4 = restoredCtx.$implicit;\n      const colIndex_r5 = restoredCtx.index;\n      const rowIndex_r2 = ɵngcc0.ɵɵnextContext().index;\n      const ctx_r6 = ɵngcc0.ɵɵnextContext();\n      return ctx_r6.handleCellSelection(color_r4, {\n        row: rowIndex_r2,\n        col: colIndex_r5\n      });\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const color_r4 = ctx.$implicit;\n    const colIndex_r5 = ctx.index;\n    const rowIndex_r2 = ɵngcc0.ɵɵnextContext().index;\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassProp(\"k-state-selected\", (ctx_r3.focusedCell == null ? null : ctx_r3.focusedCell.row) === rowIndex_r2 && (ctx_r3.focusedCell == null ? null : ctx_r3.focusedCell.col) === colIndex_r5);\n    ɵngcc0.ɵɵproperty(\"id\", rowIndex_r2 + \"\" + colIndex_r5)(\"ngStyle\", ɵngcc0.ɵɵpureFunction4(7, _c96, color_r4, ctx_r3.tileLayout.width + \"px\", ctx_r3.tileLayout.height + \"px\", ctx_r3.tileLayout.width + \"px\"));\n    ɵngcc0.ɵɵattribute(\"aria-selected\", (ctx_r3.focusedCell == null ? null : ctx_r3.focusedCell.row) === rowIndex_r2 && (ctx_r3.focusedCell == null ? null : ctx_r3.focusedCell.col) === colIndex_r5)(\"aria-label\", color_r4)(\"value\", color_r4);\n  }\n}\n\nfunction ColorPaletteComponent_tr_4_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"tr\");\n    ɵngcc0.ɵɵtemplate(1, ColorPaletteComponent_tr_4_td_1_Template, 1, 12, \"td\", 4);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const row_r1 = ctx.$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", row_r1);\n  }\n}\n\nfunction FormFieldComponent_ng_content_3_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵprojection(0, 2, [\"*ngIf\", \"hasHints\"]);\n  }\n}\n\nfunction FormFieldComponent_ng_content_4_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵprojection(0, 3, [\"*ngIf\", \"hasErrors\"]);\n  }\n}\n\nconst _c97 = [[[\"label\"], [\"kendo-label\"]], \"*\", [[\"kendo-formhint\"]], [[\"kendo-formerror\"]]];\nconst _c98 = [\"label, kendo-label\", \"*\", \"kendo-formhint\", \"kendo-formerror\"];\n\nconst isPresent = value => value !== null && value !== undefined;\n/**\n * @hidden\n */\n\n\nconst areSame = (value1, value2) => value1 === value2 || value1 === null && value2 === undefined || value1 === undefined && value2 === null;\n/**\n * @hidden\n */\n\n\nconst requiresZoneOnBlur = ngControl => ngControl && (!ngControl.touched || ngControl.control && ngControl.control.updateOn === 'blur');\n/**\n * @hidden\n *\n * Fits the contender number into the specified bounds. If the number is NaN or null, the min is returned.\n *\n * @param contender Represents the number you want to fit into specified bounds.\n * @param min The inclusive lower bound number.\n * @param max The inclusive upper bound number.\n */\n\n\nconst fitIntoBounds = (contender, min, max) => {\n  if (!isPresent(contender) || isNaN(contender)) {\n    return min;\n  }\n\n  return contender <= min ? min : contender >= max ? max : contender;\n};\n/**\n * @hidden\n */\n\n\nconst MAX_PRECISION = 20;\n/**\n * @hidden\n */\n\nconst limitPrecision = precision => Math.min(precision, MAX_PRECISION);\n/**\n * @hidden\n */\n\n\nconst fractionLength = value => {\n  return (String(value).split('.')[1] || \"\").length;\n};\n\nconst maxFractionLength = (value1, value2) => {\n  return Math.max(fractionLength(value1), fractionLength(value2));\n};\n/**\n * @hidden\n */\n\n\nconst toFixedPrecision = (value, precision) => {\n  const maxPrecision = limitPrecision(precision);\n  return parseFloat(value.toFixed(maxPrecision));\n};\n/**\n * @hidden\n */\n\n\nconst add = (value1, value2) => {\n  const maxPrecision = maxFractionLength(value1, value2);\n  return toFixedPrecision(value1 + value2, maxPrecision);\n};\n/**\n * @hidden\n */\n\n\nconst subtract = (value1, value2) => {\n  return add(value1, -value2);\n};\n/**\n * @hidden\n */\n\n\nconst multiply = (value1, value2) => {\n  const maxPrecision = fractionLength(value1) + fractionLength(value2);\n  return toFixedPrecision(value1 * value2, maxPrecision);\n};\n/**\n * @hidden\n */\n\n\nconst divide = (dividend, divisor) => {\n  if (divisor === 0) {\n    return NaN;\n  }\n\n  const power = maxFractionLength(dividend, divisor);\n  const correctionValue = Math.pow(10, power);\n  return correctionValue * dividend / (correctionValue * divisor);\n};\n/**\n * @hidden\n */\n\n\nconst remainder = (dividend, divisor) => {\n  return Math.abs(subtract(dividend, multiply(divisor, Math.floor(divide(dividend, divisor)))));\n};\n/**\n * @hidden\n */\n\n\nconst calculateFixedTrackSize = ({\n  max,\n  min,\n  smallStep,\n  fixedTickWidth\n}) => (max - min) / smallStep * fixedTickWidth;\n/**\n * @hidden\n */\n\n\nconst calculateTrackSize = (wrapperWidth, offset, showButtons = true) => {\n  const BUTTONS_COUNT = 2;\n  const trackOffset = showButtons ? parseFloat(offset) * BUTTONS_COUNT : 0;\n  const trackWidth = wrapperWidth - trackOffset;\n  return Math.floor(trackWidth);\n};\n/**\n * @hidden\n */\n\n\nconst calculateTicksCount = (min = 0, max = 0, smallStep = 1) => {\n  if (smallStep <= 0) {\n    throw new Error('Invalid argument: smallStep must be a positive number');\n  }\n\n  const adjustedRange = Math.abs(subtract(max, min));\n  const adjustedRatio = Math.floor(divide(adjustedRange, smallStep));\n  const result = add(adjustedRatio, 1);\n  return result;\n};\n/**\n * @hidden\n */\n\n\nconst calculateValueFromTick = (index, {\n  max,\n  min,\n  smallStep,\n  reverse,\n  vertical\n}) => {\n  const value = add(min, multiply(index, smallStep));\n  return vertical || reverse ? Math.abs(subtract(value, max)) : value;\n};\n/**\n * @hidden\n */\n\n\nconst calculateHandlePosition = ({\n  handleWidth,\n  trackWidth,\n  min,\n  max,\n  reverse,\n  value\n}) => {\n  const halfHandleWidth = Math.floor(handleWidth / 2);\n  const step = trackWidth / Math.abs(max - min);\n  let pos = isPresent(value) ? step * (value - min) : min;\n\n  if (reverse) {\n    pos = trackWidth - pos;\n  }\n\n  return Math.floor(pos - halfHandleWidth);\n};\n/**\n * @hidden\n */\n\n\nconst decreaseValueToStep = (value, {\n  max,\n  min,\n  smallStep,\n  largeStep\n}, large = false) => {\n  const step = large && largeStep ? multiply(smallStep, largeStep) : smallStep;\n  const stepValue = subtract(value, min);\n  let result;\n  const stepRemainder = remainder(stepValue, step);\n\n  if (stepRemainder === 0) {\n    result = subtract(stepValue, step);\n  } else {\n    result = subtract(stepValue, stepRemainder);\n  }\n\n  return limitValue(add(result, min), min, max);\n};\n/**\n * @hidden\n */\n\n\nconst increaseValueToStep = (value, {\n  max,\n  min,\n  smallStep,\n  largeStep\n}, large = false) => {\n  const step = large && largeStep ? multiply(smallStep, largeStep) : smallStep;\n  const stepValue = subtract(value, min);\n  const stepRemainder = remainder(stepValue, step);\n  const result = add(subtract(stepValue, stepRemainder), step);\n  return limitValue(add(result, min), min, max);\n};\n/**\n * @hidden\n */\n\n\nconst isStartHandle = dragHandle => dragHandle.id.indexOf('k-start-handle') > -1;\n/**\n * @hidden\n */\n\n\nconst snapValue = (value, options) => {\n  const {\n    smallStep,\n    min,\n    max\n  } = options;\n  const limited = limitValue(value, min, max);\n\n  if (value !== limited) {\n    return limited;\n  }\n\n  const left = decreaseValueToStep(value, options);\n  const right = increaseValueToStep(value, options);\n\n  if ((value - min) % smallStep === 0) {\n    return value;\n  }\n\n  if (right - value <= (right - left) / 2) {\n    return right;\n  }\n\n  return left;\n};\n/**\n * @hidden\n */\n\n\nconst trimValue = (max, min, value) => {\n  if (value > max) {\n    return max;\n  }\n\n  if (value < min) {\n    return min;\n  }\n\n  return value;\n};\n/**\n * @hidden\n */\n\n\nconst trimValueRange = (max, min, value) => {\n  return value ? [trimValue(max, min, value[0]), trimValue(max, min, value[1])] : [min, min];\n};\n/**\n * @hidden\n */\n\n\nconst identity = value => value;\n/**\n * @hidden\n */\n\n\nconst isSameRange = (value1, value2) => areSame(value1[0], value2[0]) && areSame(value1[1], value2[1]);\n/**\n * @hidden\n */\n\n\nconst elementOffset = element => {\n  const box = element.getBoundingClientRect();\n  const documentElement = document.documentElement;\n  return {\n    left: box.left + (window.pageXOffset || documentElement.scrollLeft) - (documentElement.clientLeft || 0),\n    top: box.top + (window.pageYOffset || documentElement.scrollTop) - (documentElement.clientTop || 0)\n  };\n};\n/**\n * @hidden\n */\n\n\nconst limitValue = (value, min, max) => {\n  return Math.max(Math.min(value, max), min);\n};\n/**\n * @hidden\n */\n\n\nconst eventValue = (eventArgs, scaleElement, options) => {\n  const {\n    min,\n    max,\n    vertical,\n    rtl\n  } = options;\n  const trackOffset = elementOffset(scaleElement);\n  const offset = vertical ? eventArgs.pageY - trackOffset.top : eventArgs.pageX - trackOffset.left;\n  const scale = (max - min) / (vertical ? scaleElement.clientHeight : scaleElement.clientWidth);\n  const offsetValue = offset * scale;\n  let value = rtl || vertical ? max - offsetValue : min + offsetValue;\n  const stepFractionLength = fractionLength(options.smallStep);\n  value = toFixedPrecision(value, stepFractionLength + 1);\n  return snapValue(value, options);\n};\n/**\n * @hidden\n */\n\n\nconst isButton = element => {\n  return element.className.indexOf('k-button-increase') >= 0 || element.className.indexOf('k-button-decrease') >= 0;\n};\n/**\n * @hidden\n */\n\n\nconst increment = options => {\n  return increaseValueToStep(options.value, options);\n};\n/**\n * @hidden\n */\n\n\nconst decrement = options => {\n  return decreaseValueToStep(options.value, options);\n};\n/**\n * @hidden\n */\n\n\nconst incrementLarge = options => {\n  return increaseValueToStep(options.value, options, true);\n};\n/**\n * @hidden\n */\n\n\nconst decrementLarge = options => {\n  return decreaseValueToStep(options.value, options, true);\n};\n/**\n * @hidden\n */\n\n\nconst validateValue = value => {\n  if (isDevMode && value && value[0] > value[1]) {\n    throw new Error('[RangeSlider] The start value should not be greater than the end value.');\n  }\n};\n/**\n * @hidden\n */\n\n\nclass SliderModelBase {\n  constructor(props, wrapper, track, renderer) {\n    this.props = props;\n    this.wrapper = wrapper;\n    this.track = track;\n    this.renderer = renderer;\n    this.props = props;\n    this.wrapper = wrapper;\n    this.track = track;\n    this.tickSizes = this.getTickSizes();\n  }\n\n  resizeTrack() {\n    const orientation = this.props.vertical ? 'height' : 'width';\n    const trackWidth = this.trackWidth();\n    this.track.style[orientation] = `${trackWidth}px`;\n  }\n\n  resizeTicks(ticksContainer, ticks) {\n    const dimension = this.props.vertical ? \"height\" : \"width\";\n    [...ticks].map((tick, index) => tick.style[dimension] = `${this.tickSizes[index]}px`);\n\n    if (this.props.vertical) {\n      this.adjustPadding(ticksContainer);\n    }\n  }\n\n  resizeWrapper() {\n    const dimension = this.props.vertical ? \"height\" : \"width\";\n    const wrapperSize = this.elementSize(this.wrapper);\n    const trackWidth = calculateTrackSize(wrapperSize, this.elementOffset(this.track));\n    const fixedTrackWidth = calculateFixedTrackSize(this.props);\n    const wrapperParentEl = this.wrapper.parentElement;\n\n    if (trackWidth > fixedTrackWidth) {\n      wrapperParentEl.style[dimension] = `${wrapperSize - (trackWidth - fixedTrackWidth)}px`;\n    } else {\n      wrapperParentEl.style[dimension] = `${wrapperSize + (fixedTrackWidth - trackWidth)}px`;\n    }\n  }\n\n  trackWidth() {\n    if (this.props.fixedTickWidth) {\n      return calculateFixedTrackSize(this.props);\n    }\n\n    return calculateTrackSize(this.elementSize(this.wrapper), this.elementOffset(this.track), this.props.buttons);\n  }\n\n  getTickSizes() {\n    const {\n      min,\n      max,\n      smallStep\n    } = this.props;\n    const count = calculateTicksCount(min, max, smallStep);\n    const trackSize = this.trackWidth();\n    const distStep = trackSize / subtract(max, min);\n    const result = [];\n    let usedSpace = 0;\n    let endPoint = 0;\n\n    for (let i = 0; i < count; i++) {\n      if (i === 0 || i === count - 1) {\n        endPoint += smallStep / 2 * distStep;\n      } else {\n        endPoint += smallStep * distStep;\n      } // ensure that the sum of the tick sizes does not exceed the track width\n\n\n      endPoint = +endPoint.toFixed(2) - 0.01;\n      const size = Math.round(endPoint - usedSpace);\n      result.push(size);\n      usedSpace += size;\n    }\n\n    if (usedSpace >= trackSize) {\n      result[result.length - 1] -= 1;\n    }\n\n    return result;\n  }\n\n  adjustPadding(ticksContainer) {\n    const totalTickSize = this.tickSizes.reduce((prev, curr) => prev + curr, 0);\n    const trackWidth = this.trackWidth();\n    const reminder = trackWidth - totalTickSize;\n\n    if (reminder !== 0) {\n      const padding = reminder + this.elementOffset(this.track);\n      ticksContainer.style.paddingTop = `${padding}px`;\n    }\n  }\n\n  elementOffset(element) {\n    const {\n      vertical\n    } = this.props;\n    const style = getComputedStyle(element);\n    return parseInt(vertical ? style.bottom : style.left, 10);\n  }\n\n  elementSize(element) {\n    const {\n      vertical\n    } = this.props;\n    return vertical ? element.clientHeight : element.clientWidth;\n  }\n\n}\n/**\n * @hidden\n */\n\n\nclass SliderModel extends SliderModelBase {\n  positionHandle(dragHandle) {\n    const {\n      max,\n      min,\n      reverse,\n      vertical\n    } = this.props;\n    const position = vertical ? 'bottom' : 'left';\n    const trackWidth = this.trackWidth();\n    const value = trimValue(max, min, this.props.value);\n    this.handlePosition = calculateHandlePosition({\n      min,\n      max,\n      reverse,\n      value,\n      trackWidth,\n      handleWidth: dragHandle.offsetWidth\n    });\n    this.renderer.setStyle(dragHandle, position, `${this.handlePosition}px`);\n  }\n\n  positionSelection(dragHandle, selection) {\n    const {\n      reverse,\n      vertical\n    } = this.props;\n    const dimension = vertical ? 'height' : 'width';\n    const handleWidth = Math.floor(dragHandle.offsetWidth / 2);\n    let size = this.handlePosition + handleWidth;\n\n    if (reverse) {\n      size = this.trackWidth() - size;\n    }\n\n    this.renderer.setStyle(selection, dimension, `${size}px`);\n  }\n\n}\n\nconst UNTOUCHED = 'ng-untouched';\n\nconst toClassList = classNames => String(classNames).trim().split(' ');\n/**\n * @hidden\n */\n\n\nconst hasClass = (element, className) => Boolean(toClassList(element.className).find(name => name === className));\n/**\n * @hidden\n */\n\n\nfunction invokeElementMethod(element, name, ...args) {\n  if (element && element.nativeElement) {\n    return element.nativeElement[name].apply(element.nativeElement, args);\n  }\n}\n/**\n * @hidden\n */\n\n\nconst isUntouched = element => element && element.nativeElement && hasClass(element.nativeElement, UNTOUCHED);\n/**\n * @hidden\n */\n\n\nconst containsFocus = (hostElement, contender) => hostElement && contender && (hostElement === contender || hostElement.contains(contender));\n/**\n * @hidden\n */\n\n\nconst closest = (node, predicate) => {\n  while (node && !predicate(node)) {\n    node = node.parentNode;\n  }\n\n  return node;\n};\n/**\n * @hidden\n */\n\n\nconst packageMetadata = {\n  name: '@progress/kendo-angular-inputs',\n  productName: 'Kendo UI for Angular',\n  productCodes: ['KENDOUIANGULAR', 'KENDOUICOMPLETE'],\n  publishDate: 1630598817,\n  version: '',\n  licensingDocsUrl: 'https://www.telerik.com/kendo-angular-ui/my-license/?utm_medium=product&utm_source=kendoangular&utm_campaign=kendo-ui-angular-purchase-license-keys-warning'\n};\n/**\n * Represents the template for the labels of the Slider.\n * To define the labels template, nest an `<ng-template>` tag with the `kendoSliderLabelTemplate` directive inside\n * the `<kendo-slider>` tag. The template context is passed to the `label` value.\n *\n * @example\n * ```ts-no-run\n *\n * _@Component({\n *     selector: 'my-app',\n *     template: `\n *         <kendo-slider [largeStep]=\"2\">\n *           <ng-template kendoSliderLabelTemplate let-value=\"value\">\n *             <b>{{value}}</b>\n *           </ng-template>\n *         </kendo-slider>\n *     `\n * })\n *\n * class AppComponent {\n * }\n *\n * ```\n */\n\nlet LabelTemplateDirective = /*#__PURE__*/(() => {\n  let LabelTemplateDirective = class LabelTemplateDirective {\n    constructor(templateRef) {\n      this.templateRef = templateRef;\n    }\n\n  };\n\n  LabelTemplateDirective.ɵfac = function LabelTemplateDirective_Factory(t) {\n    return new (t || LabelTemplateDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef, 8));\n  };\n\n  LabelTemplateDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: LabelTemplateDirective,\n    selectors: [[\"\", \"kendoSliderLabelTemplate\", \"\"]]\n  });\n  LabelTemplateDirective = __decorate([__param(0, Optional()), __metadata(\"design:paramtypes\", [TemplateRef])], LabelTemplateDirective);\n  /**\n   * @hidden\n   */\n\n  return LabelTemplateDirective;\n})();\nlet SliderBase = /*#__PURE__*/(() => {\n  class SliderBase {\n    constructor(localizationService, injector, renderer, ngZone, changeDetector, hostElement) {\n      this.localizationService = localizationService;\n      this.injector = injector;\n      this.renderer = renderer;\n      this.ngZone = ngZone;\n      this.changeDetector = changeDetector;\n      this.hostElement = hostElement;\n      /**\n       * Defines the title of the ticks ([see example]({% slug ticks_slider %}#toc-titles)). The default title\n       * for each tick is its Slider value. If you use a callback function, the function accepts an argument\n       * that holds the value of the component and returns a string with the new title.\n       */\n\n      this.title = identity;\n      /**\n       * Denotes the location of the tick marks in the Slider ([see example]({% slug ticks_slider %}#toc-placement)).\n       *\n       * The available options are:\n       * * `before`&mdash;The tick marks are located to the top side of the horizontal track or to the left side of a vertical track.\n       * * `after`&mdash;The tick marks are located to the bottom side of the horizontal track or to the right side of the vertical track.\n       * * `both`&mdash; (Default) The tick marks are located on both sides of the track.\n       * * `none`&mdash;The tick marks are not visible. The actual elements are not added to the DOM tree.\n       */\n\n      this.tickPlacement = 'both';\n      /**\n       * If `vertical` is set to `true`, the orientation of the Slider changes from horizontal to vertical\n       * ([see example]({% slug orientation_slider %})).\n       */\n\n      this.vertical = false;\n      /**\n       * The minimum value of the Slider ([see example]({% slug predefinedsteps_slider %}#toc-small-steps)).\n       * The attribute accepts both integers and floating-point numbers.\n       */\n\n      this.min = 0;\n      /**\n       * The maximum value of the Slider ([see example]({% slug predefinedsteps_slider %}#toc-small-steps)).\n       * The attribute accepts both integers and floating-point numbers.\n       */\n\n      this.max = 10;\n      /**\n       * The step value of the Slider ([see example]({% slug predefinedsteps_slider %}#toc-small-steps)).\n       * Accepts positive values only. Can be an integer or a floating-point number.\n       */\n\n      this.smallStep = 1;\n      /**\n       * Specifies that every n<sup>th</sup> tick will be large and will have a label\n       * ([see example]({% slug predefinedsteps_slider %}#toc-large-steps)).\n       * Accepts positive integer values only.\n       */\n\n      this.largeStep = null;\n      /**\n       * Determines whether the Slider is disabled ([see example]({% slug disabledstate_slider %})).\n       */\n\n      this.disabled = false;\n      /**\n       * Determines whether the Slider is in its read-only state ([see example]({% slug readonly_slider %})).\n       */\n\n      this.readonly = false;\n      /**\n       * Specifies the [tabindex](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex) of the Slider.\n       */\n\n      this.tabindex = 0;\n      /**\n       * Fires each time the user focuses the component.\n       */\n\n      this.onFocus = new EventEmitter(); //tslint:disable-line:no-output-rename\n\n      /**\n       * Fires each time the component is blurred.\n       */\n\n      this.onBlur = new EventEmitter(); //tslint:disable-line:no-output-rename\n\n      /**\n       * Fires each time the user selects a new value.\n       */\n\n      this.valueChange = new EventEmitter();\n      this.sliderClass = true;\n      this.widgetClass = true;\n      this.subscriptions = new Subscription();\n      /**\n       * @hidden\n       */\n\n      this.ifEnabled = (callback, event) => {\n        if (!this.isDisabled) {\n          callback.call(this, event);\n        }\n      };\n\n      validatePackage(packageMetadata);\n      this.direction = localizationService.rtl ? 'rtl' : 'ltr';\n    }\n\n    get horizontalClass() {\n      return !this.vertical;\n    }\n\n    get verticalClass() {\n      return this.vertical;\n    }\n\n    get disabledClass() {\n      return this.disabled;\n    }\n    /**\n     * @hidden\n     * Called when the status of the component changes to or from `disabled`.\n     * Depending on the value, it enables or disables the appropriate DOM element.\n     *\n     * @param isDisabled\n     */\n\n\n    setDisabledState(isDisabled) {\n      this.changeDetector.markForCheck();\n      this.disabled = isDisabled;\n    }\n\n    ngOnInit() {\n      this.subscriptions.add(this.localizationService.changes.subscribe(({\n        rtl\n      }) => {\n        this.direction = rtl ? 'rtl' : 'ltr';\n        this.sizeComponent();\n      }));\n\n      if (this.hostElement) {\n        this.renderer.removeAttribute(this.hostElement.nativeElement, \"tabindex\");\n      }\n\n      this.control = this.injector.get(NgControl, null);\n    }\n    /**\n     * @hidden\n     */\n\n\n    get isDisabled() {\n      return this.disabled || this.readonly;\n    }\n    /**\n     * @hidden\n     * Used by the FloatingLabel to determine if the component is empty.\n     */\n\n\n    isEmpty() {\n      return false;\n    }\n\n    get reverse() {\n      return this.localizationService.rtl && !this.vertical;\n    }\n\n    get keyBinding() {\n      const reverse = this.reverse;\n      return {\n        [Keys.ArrowLeft]: reverse ? increment : decrement,\n        [Keys.ArrowRight]: reverse ? decrement : increment,\n        [Keys.ArrowDown]: decrement,\n        [Keys.ArrowUp]: increment,\n        [Keys.PageUp]: incrementLarge,\n        [Keys.PageDown]: decrementLarge,\n        [Keys.Home]: ({\n          min\n        }) => min,\n        [Keys.End]: ({\n          max\n        }) => max\n      };\n    }\n\n    resetStyles(elements) {\n      elements.forEach(el => {\n        if (el) {\n          if (this.vertical) {\n            this.renderer.removeStyle(el, 'width');\n            this.renderer.removeStyle(el, 'left');\n            this.renderer.removeStyle(el, 'right');\n          } else {\n            this.renderer.removeStyle(el, 'height');\n            this.renderer.removeStyle(el, 'bottom');\n          }\n\n          this.renderer.removeStyle(el, 'padding-top');\n        }\n      });\n    }\n\n  }\n\n  SliderBase.ɵfac = function SliderBase_Factory(t) {\n    ɵngcc0.ɵɵinvalidFactory();\n  };\n\n  SliderBase.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: SliderBase,\n    contentQueries: function SliderBase_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, LabelTemplateDirective, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.labelTemplate = _t.first);\n      }\n    },\n    viewQuery: function SliderBase_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c0, 7);\n        ɵngcc0.ɵɵviewQuery(_c1, 7);\n        ɵngcc0.ɵɵviewQuery(_c2, 7);\n        ɵngcc0.ɵɵviewQuery(_c3, 5, ElementRef);\n        ɵngcc0.ɵɵviewQuery(_c3, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.wrapper = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.track = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.sliderSelection = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.ticksContainer = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.ticks = _t.first);\n      }\n    },\n    hostVars: 11,\n    hostBindings: function SliderBase_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"dir\", ctx.direction);\n        ɵngcc0.ɵɵclassProp(\"k-slider\", ctx.sliderClass)(\"k-widget\", ctx.widgetClass)(\"k-slider-horizontal\", ctx.horizontalClass)(\"k-slider-vertical\", ctx.verticalClass)(\"k-state-disabled\", ctx.disabledClass);\n      }\n    },\n    inputs: {\n      title: \"title\",\n      tickPlacement: \"tickPlacement\",\n      vertical: \"vertical\",\n      min: \"min\",\n      max: \"max\",\n      smallStep: \"smallStep\",\n      largeStep: \"largeStep\",\n      disabled: \"disabled\",\n      readonly: \"readonly\",\n      tabindex: \"tabindex\",\n      fixedTickWidth: \"fixedTickWidth\"\n    },\n    outputs: {\n      onFocus: \"focus\",\n      onBlur: \"blur\",\n      valueChange: \"valueChange\"\n    }\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", Function)], SliderBase.prototype, \"title\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], SliderBase.prototype, \"tickPlacement\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], SliderBase.prototype, \"vertical\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Number)], SliderBase.prototype, \"min\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Number)], SliderBase.prototype, \"max\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Number)], SliderBase.prototype, \"smallStep\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Number)], SliderBase.prototype, \"largeStep\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Number)], SliderBase.prototype, \"fixedTickWidth\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], SliderBase.prototype, \"disabled\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], SliderBase.prototype, \"readonly\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Number)], SliderBase.prototype, \"tabindex\", void 0);\n\n  __decorate([Output('focus'), __metadata(\"design:type\", EventEmitter)], SliderBase.prototype, \"onFocus\", void 0);\n\n  __decorate([Output('blur'), __metadata(\"design:type\", EventEmitter)], SliderBase.prototype, \"onBlur\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], SliderBase.prototype, \"valueChange\", void 0);\n\n  __decorate([HostBinding('attr.dir'), __metadata(\"design:type\", String)], SliderBase.prototype, \"direction\", void 0);\n\n  __decorate([HostBinding('class.k-slider-horizontal'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], SliderBase.prototype, \"horizontalClass\", null);\n\n  __decorate([HostBinding('class.k-slider-vertical'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], SliderBase.prototype, \"verticalClass\", null);\n\n  __decorate([HostBinding('class.k-slider'), __metadata(\"design:type\", Boolean)], SliderBase.prototype, \"sliderClass\", void 0);\n\n  __decorate([HostBinding('class.k-widget'), __metadata(\"design:type\", Boolean)], SliderBase.prototype, \"widgetClass\", void 0);\n\n  __decorate([HostBinding('class.k-state-disabled'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], SliderBase.prototype, \"disabledClass\", null);\n\n  __decorate([ViewChild('wrap', {\n    static: true\n  }), __metadata(\"design:type\", ElementRef)], SliderBase.prototype, \"wrapper\", void 0);\n\n  __decorate([ViewChild('track', {\n    static: true\n  }), __metadata(\"design:type\", ElementRef)], SliderBase.prototype, \"track\", void 0);\n\n  __decorate([ViewChild('sliderSelection', {\n    static: true\n  }), __metadata(\"design:type\", ElementRef)], SliderBase.prototype, \"sliderSelection\", void 0);\n\n  __decorate([ViewChild('ticks', {\n    read: ElementRef,\n    static: false\n  }), __metadata(\"design:type\", ElementRef)], SliderBase.prototype, \"ticksContainer\", void 0);\n\n  __decorate([ViewChild('ticks', {\n    static: false\n  }), __metadata(\"design:type\", Object)], SliderBase.prototype, \"ticks\", void 0);\n\n  __decorate([ContentChild(LabelTemplateDirective, {\n    static: false\n  }), __metadata(\"design:type\", LabelTemplateDirective)], SliderBase.prototype, \"labelTemplate\", void 0);\n\n  return SliderBase;\n})();\nvar SliderComponent_1;\nconst PRESSED = 'k-pressed';\n/**\n * Represents the [Kendo UI Slider component for Angular]({% slug overview_slider %}).\n */\n\nlet SliderComponent = SliderComponent_1 = class SliderComponent extends SliderBase {\n  constructor(localization, injector, renderer, ngZone, changeDetector, hostElement) {\n    super(localization, injector, renderer, ngZone, changeDetector, hostElement);\n    this.localization = localization;\n    this.injector = injector;\n    this.renderer = renderer;\n    this.ngZone = ngZone;\n    this.changeDetector = changeDetector;\n    this.hostElement = hostElement;\n    /**\n     * @hidden\n     */\n\n    this.focusableId = `k-${guid()}`;\n    /**\n     * Determines if the animation will be played on value change.\n     * Regardless of this setting, no animation will be played during the initial rendering.\n     */\n\n    this.animate = true;\n    /**\n     * Renders the arrow side buttons of the Slider ([see example]({% slug sidebuttons_slider %}#toc-hidden-state)).\n     * When `showButtons` is set to `false`, the buttons are not displayed.\n     */\n\n    this.showButtons = true;\n    /**\n     * The current value of the Slider when it is initially displayed.\n     * The component can use either NgModel or the `value` binding but not both of them at the same time.\n     */\n\n    this.value = this.min;\n    this.focusChangedProgrammatically = false;\n    /**\n     * @hidden\n     */\n\n    this.onWrapClick = args => {\n      const target = args.target;\n\n      if (!this.isDisabled && !(isButton(target) || isButton(target.parentNode))) {\n        const value = eventValue(args, this.track.nativeElement, this.getProps());\n        this.changeValue(value);\n      }\n\n      invokeElementMethod(this.draghandle, 'focus');\n    };\n    /**\n     * @hidden\n     */\n\n\n    this.onKeyDown = e => {\n      const options = this.getProps();\n      const {\n        max,\n        min\n      } = options;\n      const handler = this.keyBinding[e.keyCode];\n\n      if (this.isDisabled || !handler) {\n        return;\n      }\n\n      const value = handler(options);\n      this.changeValue(trimValue(max, min, value));\n      e.preventDefault();\n    };\n\n    this.ngChange = _ => {};\n\n    this.ngTouched = () => {};\n\n    this.decreaseValue = () => {\n      this.changeValue(decreaseValueToStep(this.value, this.getProps()));\n    };\n\n    this.increaseValue = () => {\n      this.changeValue(increaseValueToStep(this.value, this.getProps()));\n    };\n\n    this.handleBlur = () => {\n      this.changeDetector.markForCheck();\n      this.focused = false;\n\n      if (hasObservers(this.onBlur) || requiresZoneOnBlur(this.control)) {\n        this.ngZone.run(() => {\n          this.ngTouched();\n\n          if (!this.focusChangedProgrammatically) {\n            this.onBlur.emit();\n          }\n        });\n      }\n    };\n  }\n  /**\n   * @hidden\n   */\n\n\n  set tabIndex(tabIndex) {\n    this.tabindex = tabIndex;\n  }\n\n  get tabIndex() {\n    return this.tabindex;\n  }\n  /**\n   * @hidden\n   */\n\n\n  get currentValue() {\n    return isPresent(this.value) ? this.value.toString() : '';\n  }\n  /**\n   * Focuses the Slider.\n   *\n   * @example\n   * ```ts-no-run\n   * _@Component({\n   * selector: 'my-app',\n   * template: `\n   *  <button (click)=\"slider.focus()\">Focus</button>\n   *  <kendo-slider #slider></kendo-slider>\n   * `\n   * })\n   * class AppComponent { }\n   * ```\n   */\n\n\n  focus() {\n    if (!this.disabled) {\n      this.focusChangedProgrammatically = true;\n      invokeElementMethod(this.draghandle, 'focus');\n      this.focusChangedProgrammatically = false;\n    }\n  }\n  /**\n   * Blurs the Slider.\n   */\n\n\n  blur() {\n    this.focusChangedProgrammatically = true;\n    invokeElementMethod(this.draghandle, 'blur');\n    this.handleBlur();\n    this.focusChangedProgrammatically = false;\n  }\n\n  ngOnChanges(changes) {\n    if (anyChanged(['value', 'fixedTickWidth', 'tickPlacement'], changes, true)) {\n      this.ngZone.onStable.asObservable().pipe(take(1)).subscribe(() => {\n        this.sizeComponent(false);\n      });\n    }\n  }\n\n  ngAfterViewInit() {\n    if (!isDocumentAvailable()) {\n      return;\n    }\n\n    if (this.showButtons) {\n      this.setValueChangeInterval(this.increaseButton.nativeElement, () => this.increaseValue());\n      this.setValueChangeInterval(this.decreaseButton.nativeElement, () => this.decreaseValue());\n    }\n\n    this.sizeComponent(false);\n\n    if (this.ticks) {\n      this.ticks.tickElements.changes.subscribe(() => this.sizeComponent(false));\n    }\n\n    this.attachElementEventHandlers();\n  }\n\n  ngOnDestroy() {\n    if (this.subscriptions) {\n      this.subscriptions.unsubscribe();\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  get incrementMessage() {\n    return this.incrementTitle || this.localizationService.get('increment');\n  }\n  /**\n   * @hidden\n   */\n\n\n  get decrementMessage() {\n    return this.decrementTitle || this.localizationService.get('decrement');\n  }\n  /**\n   * @hidden\n   */\n\n\n  get dragHandleMessage() {\n    return this.dragHandleTitle || this.localizationService.get('dragHandle');\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleDragPress(args) {\n    if (args.originalEvent) {\n      args.originalEvent.preventDefault();\n    }\n\n    this.renderer.removeClass(this.hostElement.nativeElement, 'k-slider-transitions');\n  }\n  /**\n   * @hidden\n   */\n\n\n  onHandleDrag(args) {\n    this.dragging = true;\n    this.changeValue(eventValue(args, this.track.nativeElement, this.getProps()));\n  }\n  /**\n   * @hidden\n   */\n\n\n  onHandleRelease() {\n    this.dragging = false; //needed for animation\n\n    this.renderer.addClass(this.hostElement.nativeElement, 'k-slider-transitions');\n  } //ngModel binding\n\n  /**\n   * @hidden\n   */\n\n\n  writeValue(value) {\n    this.changeDetector.markForCheck();\n    this.value = value;\n    this.sizeComponent(this.animate);\n  }\n  /**\n   * @hidden\n   */\n\n\n  registerOnChange(fn) {\n    this.ngChange = fn;\n  }\n  /**\n   * @hidden\n   */\n\n\n  registerOnTouched(fn) {\n    this.ngTouched = fn;\n  }\n  /**\n   * @hidden\n   */\n\n\n  changeValue(value) {\n    if (!areSame(this.value, value)) {\n      this.ngZone.run(() => {\n        this.value = value;\n        this.ngChange(value);\n        this.valueChange.emit(value);\n        this.sizeComponent(this.animate);\n        this.changeDetector.markForCheck();\n      });\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  sizeComponent(animate) {\n    if (!isDocumentAvailable()) {\n      return;\n    }\n\n    const wrapper = this.wrapper.nativeElement;\n    const track = this.track.nativeElement;\n    const selectionEl = this.sliderSelection.nativeElement;\n    const dragHandleEl = this.draghandle.nativeElement;\n    const ticks = this.ticks ? this.ticksContainer.nativeElement : null;\n\n    if (!animate) {\n      this.renderer.removeClass(this.hostElement.nativeElement, 'k-slider-transitions');\n    }\n\n    this.resetStyles([track, selectionEl, dragHandleEl, ticks, this.hostElement.nativeElement]);\n    const props = this.getProps();\n    const model = new SliderModel(props, wrapper, track, this.renderer);\n    model.resizeTrack();\n\n    if (this.ticks) {\n      //for case when tickPlacement: none\n      model.resizeTicks(this.ticksContainer.nativeElement, this.ticks.tickElements.map(element => element.nativeElement));\n    }\n\n    model.positionHandle(dragHandleEl);\n    model.positionSelection(dragHandleEl, selectionEl);\n\n    if (!animate) {\n      this.hostElement.nativeElement.getBoundingClientRect();\n      this.renderer.addClass(this.hostElement.nativeElement, 'k-slider-transitions');\n    }\n\n    if (this.fixedTickWidth) {\n      model.resizeWrapper();\n    }\n  }\n\n  set focused(value) {\n    if (this.isFocused !== value && this.hostElement) {\n      this.isFocused = value;\n    }\n  }\n\n  set dragging(value) {\n    if (this.isDragged !== value && this.sliderSelection && this.draghandle) {\n      const sliderSelection = this.sliderSelection.nativeElement;\n      const draghandle = this.draghandle.nativeElement;\n\n      if (value) {\n        this.renderer.addClass(sliderSelection, PRESSED);\n        this.renderer.addClass(draghandle, PRESSED);\n      } else {\n        this.renderer.removeClass(sliderSelection, PRESSED);\n        this.renderer.removeClass(draghandle, PRESSED);\n      }\n\n      this.isDragged = value;\n    }\n  }\n\n  setValueChangeInterval(element, callback) {\n    this.ngZone.runOutsideAngular(() => {\n      const mousedown = fromEvent(element, 'mousedown');\n      const mouseup = fromEvent(element, 'mouseup');\n      const mouseout = fromEvent(element, 'mouseout');\n      const subscription = mousedown.pipe(filter(e => e.button === 0 && !this.isDisabled), concatMap(() => interval(150).pipe(startWith(-1), takeUntil(merge(mouseup, mouseout))))).subscribe(() => {\n        if (!this.isFocused) {\n          invokeElementMethod(this.draghandle, 'focus');\n        }\n\n        callback();\n      });\n      this.subscriptions.add(subscription);\n    });\n  }\n\n  getProps() {\n    return {\n      buttons: this.showButtons,\n      disabled: this.disabled,\n      fixedTickWidth: this.fixedTickWidth,\n      largeStep: this.largeStep,\n      max: this.max,\n      min: this.min,\n      readonly: this.readonly,\n      reverse: this.reverse,\n      rtl: this.localizationService.rtl,\n      smallStep: this.smallStep,\n      value: trimValue(this.max, this.min, this.value),\n      vertical: this.vertical\n    };\n  }\n\n  attachElementEventHandlers() {\n    const hostElement = this.hostElement.nativeElement;\n    let tabbing = false;\n    let cursorInsideWrapper = false;\n    this.ngZone.runOutsideAngular(() => {\n      // focusIn and focusOut are relative to the host element\n      this.subscriptions.add(this.renderer.listen(hostElement, 'focusin', () => {\n        if (!this.isFocused) {\n          this.ngZone.run(() => {\n            if (!this.focusChangedProgrammatically) {\n              this.onFocus.emit();\n            }\n\n            this.focused = true;\n          });\n        }\n      }));\n      this.subscriptions.add(this.renderer.listen(hostElement, 'focusout', args => {\n        if (!this.isFocused) {\n          return;\n        }\n\n        if (tabbing) {\n          if (args.relatedTarget !== this.draghandle.nativeElement) {\n            this.handleBlur();\n          }\n\n          tabbing = false;\n        } else {\n          if (!cursorInsideWrapper) {\n            this.handleBlur();\n          }\n        }\n      }));\n      this.subscriptions.add(this.renderer.listen(hostElement, 'mouseenter', () => {\n        cursorInsideWrapper = true;\n      }));\n      this.subscriptions.add(this.renderer.listen(hostElement, 'mouseleave', () => {\n        cursorInsideWrapper = false;\n      }));\n      this.subscriptions.add(this.renderer.listen(hostElement, 'keydown', args => {\n        if (args.keyCode === Keys.Tab) {\n          tabbing = true;\n        } else {\n          tabbing = false;\n        }\n      }));\n    });\n  }\n\n};\n\nSliderComponent.ɵfac = function SliderComponent_Factory(t) {\n  return new (t || SliderComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Injector), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef));\n};\n\nSliderComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: SliderComponent,\n  selectors: [[\"kendo-slider\"]],\n  viewQuery: function SliderComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵviewQuery(_c4, 7);\n      ɵngcc0.ɵɵviewQuery(_c5, 5);\n      ɵngcc0.ɵɵviewQuery(_c6, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.draghandle = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.decreaseButton = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.increaseButton = _t.first);\n    }\n  },\n  inputs: {\n    focusableId: \"focusableId\",\n    animate: \"animate\",\n    showButtons: \"showButtons\",\n    value: \"value\",\n    tabIndex: \"tabIndex\",\n    dragHandleTitle: \"dragHandleTitle\",\n    incrementTitle: \"incrementTitle\",\n    decrementTitle: \"decrementTitle\"\n  },\n  exportAs: [\"kendoSlider\"],\n  features: [ɵngcc0.ɵɵProvidersFeature([LocalizationService, {\n    provide: L10N_PREFIX,\n    useValue: 'kendo.slider'\n  }, {\n    multi: true,\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => SliderComponent_1)\n  }, {\n    provide: KendoInput,\n    useExisting: forwardRef(() => SliderComponent_1)\n  }]), ɵngcc0.ɵɵInheritDefinitionFeature, ɵngcc0.ɵɵNgOnChangesFeature],\n  decls: 13,\n  vars: 25,\n  consts: function () {\n    let i18n_7;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The title of the **Increase** button of the Slider.\n       * @meaning kendo.slider.increment\n       */\n      const MSG_EXTERNAL_8302125540024939132$$DIST_FESM2015_INDEX_JS_8 = goog.getMsg(\"increment\");\n      i18n_7 = MSG_EXTERNAL_8302125540024939132$$DIST_FESM2015_INDEX_JS_8;\n    } else {\n      i18n_7 = $localize`:kendo.slider.increment|The title of the **Increase** button of the Slider.␟0fa71630d40c425b9c366afd7f6c3cecc5bef59d␟8302125540024939132:increment`;\n    }\n\n    let i18n_9;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The title of the **Decrease** button of the Slider.\n       * @meaning kendo.slider.decrement\n       */\n      const MSG_EXTERNAL_652458644240352212$$DIST_FESM2015_INDEX_JS_10 = goog.getMsg(\"decrement\");\n      i18n_9 = MSG_EXTERNAL_652458644240352212$$DIST_FESM2015_INDEX_JS_10;\n    } else {\n      i18n_9 = $localize`:kendo.slider.decrement|The title of the **Decrease** button of the Slider.␟042c26f68d78afd6834ea46a5f7533850fe8c800␟652458644240352212:decrement`;\n    }\n\n    let i18n_11;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The title of the drag handle of the Slider.\n       * @meaning kendo.slider.dragHandle\n       */\n      const MSG_EXTERNAL_9117416417579607469$$DIST_FESM2015_INDEX_JS_12 = goog.getMsg(\"Drag\");\n      i18n_11 = MSG_EXTERNAL_9117416417579607469$$DIST_FESM2015_INDEX_JS_12;\n    } else {\n      i18n_11 = $localize`:kendo.slider.dragHandle|The title of the drag handle of the Slider.␟481eb98e9cd8ef8e8b22051796441901e883763d␟9117416417579607469:Drag`;\n    }\n\n    return [[\"kendoSliderLocalizedMessages\", \"\", \"increment\", i18n_7, \"decrement\", i18n_9, \"dragHandle\", i18n_11], [1, \"k-slider-wrap\", 3, \"kendoEventsOutsideAngular\"], [\"wrap\", \"\"], [\"class\", \"k-button k-button-decrease\", \"role\", \"presentation\", 3, \"title\", 4, \"ngIf\"], [\"class\", \"k-button k-button-increase\", 3, \"title\", \"click\", 4, \"ngIf\"], [\"kendoSliderTicks\", \"\", 3, \"tickTitle\", \"vertical\", \"step\", \"largeStep\", \"min\", \"max\", \"labelTemplate\", 4, \"ngIf\"], [1, \"k-slider-track\"], [\"track\", \"\"], [1, \"k-slider-selection\"], [\"sliderSelection\", \"\"], [\"role\", \"slider\", \"kendoDraggable\", \"\", 1, \"k-draghandle\", 3, \"title\", \"id\", \"kendoPress\", \"kendoDrag\", \"kendoRelease\"], [\"draghandle\", \"\"], [3, \"resize\"], [\"role\", \"presentation\", 1, \"k-button\", \"k-button-decrease\", 3, \"title\"], [\"decreaseButton\", \"\"], [1, \"k-icon\"], [1, \"k-button\", \"k-button-increase\", 3, \"title\", \"click\"], [\"increaseButton\", \"\"], [\"kendoSliderTicks\", \"\", 3, \"tickTitle\", \"vertical\", \"step\", \"largeStep\", \"min\", \"max\", \"labelTemplate\"], [\"ticks\", \"\"]];\n  },\n  template: function SliderComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵelementContainerStart(0, 0);\n      ɵngcc0.ɵɵelementStart(1, \"div\", 1, 2);\n      ɵngcc0.ɵɵtemplate(3, SliderComponent_span_3_Template, 3, 5, \"span\", 3);\n      ɵngcc0.ɵɵtemplate(4, SliderComponent_span_4_Template, 3, 6, \"span\", 4);\n      ɵngcc0.ɵɵtemplate(5, SliderComponent_ul_5_Template, 2, 8, \"ul\", 5);\n      ɵngcc0.ɵɵelementStart(6, \"div\", 6, 7);\n      ɵngcc0.ɵɵelement(8, \"div\", 8, 9);\n      ɵngcc0.ɵɵelementStart(10, \"a\", 10, 11);\n      ɵngcc0.ɵɵlistener(\"kendoPress\", function SliderComponent_Template_a_kendoPress_10_listener($event) {\n        return ctx.ifEnabled(ctx.handleDragPress, $event);\n      })(\"kendoDrag\", function SliderComponent_Template_a_kendoDrag_10_listener($event) {\n        return ctx.ifEnabled(ctx.onHandleDrag, $event);\n      })(\"kendoRelease\", function SliderComponent_Template_a_kendoRelease_10_listener($event) {\n        return ctx.ifEnabled(ctx.onHandleRelease, $event);\n      });\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵelementStart(12, \"kendo-resize-sensor\", 12);\n      ɵngcc0.ɵɵlistener(\"resize\", function SliderComponent_Template_kendo_resize_sensor_resize_12_listener() {\n        return ctx.sizeComponent(false);\n      });\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵelementContainerEnd();\n    }\n\n    if (rf & 2) {\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵclassProp(\"k-slider-buttons\", ctx.showButtons)(\"k-slider-topleft\", ctx.tickPlacement === \"before\")(\"k-slider-bottomright\", ctx.tickPlacement === \"after\");\n      ɵngcc0.ɵɵproperty(\"kendoEventsOutsideAngular\", ɵngcc0.ɵɵpureFunction2(22, _c13, ctx.onWrapClick, ctx.onKeyDown));\n      ɵngcc0.ɵɵadvance(2);\n      ɵngcc0.ɵɵproperty(\"ngIf\", ctx.showButtons);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngIf\", ctx.showButtons);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngIf\", ctx.tickPlacement !== \"none\");\n      ɵngcc0.ɵɵadvance(5);\n      ɵngcc0.ɵɵstyleProp(\"touch-action\", ctx.isDisabled ? \"\" : \"none\");\n      ɵngcc0.ɵɵproperty(\"title\", ctx.dragHandleMessage)(\"id\", ctx.focusableId);\n      ɵngcc0.ɵɵattribute(\"aria-valuemin\", ctx.min)(\"aria-valuemax\", ctx.max)(\"aria-valuenow\", ctx.currentValue)(\"aria-valuetext\", ctx.currentValue)(\"aria-disabled\", ctx.disabled ? true : undefined)(\"aria-readonly\", ctx.readonly ? true : undefined)(\"aria-orientation\", ctx.vertical ? \"vertical\" : \"horizontal\")(\"tabindex\", ctx.disabled ? \"-1\" : ctx.tabIndex);\n    }\n  },\n  directives: function () {\n    return [LocalizedSliderMessagesDirective, ɵngcc2.EventsOutsideAngularDirective, ɵngcc3.NgIf, ɵngcc2.DraggableDirective, ɵngcc2.ResizeSensorComponent, SliderTicksComponent];\n  },\n  encapsulation: 2\n});\n\n__decorate([Input(), __metadata(\"design:type\", String)], SliderComponent.prototype, \"focusableId\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], SliderComponent.prototype, \"dragHandleTitle\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], SliderComponent.prototype, \"incrementTitle\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], SliderComponent.prototype, \"animate\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], SliderComponent.prototype, \"decrementTitle\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], SliderComponent.prototype, \"showButtons\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Number)], SliderComponent.prototype, \"value\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Number), __metadata(\"design:paramtypes\", [Number])], SliderComponent.prototype, \"tabIndex\", null);\n\n__decorate([ViewChild('draghandle', {\n  static: true\n}), __metadata(\"design:type\", ElementRef)], SliderComponent.prototype, \"draghandle\", void 0);\n\n__decorate([ViewChild('decreaseButton', {\n  static: false\n}), __metadata(\"design:type\", ElementRef)], SliderComponent.prototype, \"decreaseButton\", void 0);\n\n__decorate([ViewChild('increaseButton', {\n  static: false\n}), __metadata(\"design:type\", ElementRef)], SliderComponent.prototype, \"increaseButton\", void 0);\n\nSliderComponent = SliderComponent_1 = __decorate([__metadata(\"design:paramtypes\", [LocalizationService, Injector, Renderer2, NgZone, ChangeDetectorRef, ElementRef])], SliderComponent);\n/**\n * @hidden\n */\n\nclass RangeSliderModel extends SliderModelBase {\n  positionHandle(dragHandle) {\n    if (!dragHandle.id) {\n      return;\n    }\n\n    const {\n      max,\n      min,\n      reverse,\n      vertical\n    } = this.props;\n    const position = vertical ? 'bottom' : 'left';\n    const trackWidth = this.trackWidth();\n    const value = isStartHandle(dragHandle) ? trimValueRange(max, min, this.props.value)[0] : trimValueRange(max, min, this.props.value)[1];\n\n    if (isStartHandle(dragHandle)) {\n      this.startHandlePosition = calculateHandlePosition({\n        min,\n        max,\n        reverse,\n        value,\n        trackWidth,\n        handleWidth: dragHandle.offsetWidth\n      });\n      this.renderer.setStyle(dragHandle, position, `${this.startHandlePosition}px`);\n    } else {\n      this.endHandlePosition = calculateHandlePosition({\n        min,\n        max,\n        reverse,\n        value,\n        trackWidth,\n        handleWidth: dragHandle.offsetWidth\n      });\n      this.renderer.setStyle(dragHandle, position, `${this.endHandlePosition}px`);\n    }\n  }\n\n  positionSelection(dragHandle, selection) {\n    const {\n      reverse,\n      vertical\n    } = this.props;\n    const dimension = vertical ? 'height' : 'width';\n    const position = vertical ? 'bottom' : reverse ? 'right' : 'left';\n    const handleWidth = Math.floor(dragHandle.offsetWidth / 2);\n    const size = Math.abs(this.endHandlePosition - this.startHandlePosition);\n    const currentSelectionPosition = vertical ? dragHandle.style.bottom : dragHandle.style.left;\n    this.renderer.setStyle(selection, dimension, `${size}px`);\n    this.renderer.setStyle(selection, position, reverse ? this.trackWidth() - parseFloat(currentSelectionPosition) - handleWidth + 'px' : parseFloat(currentSelectionPosition) + handleWidth + 'px');\n  }\n\n}\n\nvar RangeSliderComponent_1;\nconst PRESSED$1 = 'k-pressed';\n/**\n * Represents the [Kendo UI RangeSlider component for Angular]({% slug overview_rangeslider %}).\n */\n\nlet RangeSliderComponent = RangeSliderComponent_1 = class RangeSliderComponent extends SliderBase {\n  constructor(localization, injector, renderer, ngZone, changeDetector, hostElement) {\n    super(localization, injector, renderer, ngZone, changeDetector, hostElement);\n    this.localization = localization;\n    this.injector = injector;\n    this.renderer = renderer;\n    this.ngZone = ngZone;\n    this.changeDetector = changeDetector;\n    this.hostElement = hostElement;\n    /**\n     * @hidden\n     */\n\n    this.startHandleId = `k-start-handle-${guid()}`;\n    /**\n     * @hidden\n     */\n\n    this.endHandleId = `k-end-handle-${guid()}`;\n    /**\n     * @hidden\n     */\n\n    this.focusableId = this.startHandleId;\n    this.handleZIndex = 0;\n    this.activeHandle = 'startHandle';\n    this.focusChangedProgrammatically = false;\n    /**\n     * @hidden\n     */\n\n    this.onWrapClick = args => {\n      if (!this.isDisabled) {\n        this.value = this.value || [this.min, this.min];\n        const trackValue = eventValue(args, this.track.nativeElement, this.getProps());\n        let newRangeValue;\n        const [startValue, endValue] = newRangeValue = this.value;\n\n        if (trackValue <= startValue) {\n          newRangeValue = [trackValue, endValue];\n          this.activeHandle = 'startHandle';\n        } else if (startValue < trackValue && trackValue < endValue) {\n          if (trackValue < (startValue + endValue) / 2) {\n            newRangeValue = [trackValue, endValue];\n            this.activeHandle = 'startHandle';\n          } else {\n            newRangeValue = [startValue, trackValue];\n            this.activeHandle = 'endHandle';\n          }\n        } else if (trackValue >= endValue) {\n          newRangeValue = [startValue, trackValue];\n          this.activeHandle = 'endHandle';\n        }\n\n        const activeHandle = this.activeHandle === 'startHandle' ? this.draghandleStart : this.draghandleEnd;\n        invokeElementMethod(activeHandle, 'focus');\n        this.changeValue(newRangeValue);\n      }\n    };\n    /**\n     * @hidden\n     */\n\n\n    this.onKeyDown = e => {\n      this.value = this.value || [this.min, this.min];\n      const options = this.getProps();\n      const {\n        max,\n        min\n      } = options;\n      const handler = this.keyBinding[e.keyCode];\n\n      if (this.isDisabled || !handler) {\n        return;\n      }\n\n      this.renderer.setStyle(e.target, 'zIndex', ++this.handleZIndex);\n      const startHandleIsActive = isStartHandle(e.target);\n      const value = handler(Object.assign({}, options, {\n        value: startHandleIsActive ? this.value[0] : this.value[1]\n      }));\n\n      if (startHandleIsActive) {\n        if (value > this.value[1]) {\n          this.value[1] = value;\n        }\n      } else {\n        if (value < this.value[0]) {\n          this.value[0] = value;\n        }\n      }\n\n      const trimmedValue = trimValue(max, min, value);\n      const newValue = startHandleIsActive ? [trimmedValue, this.value[1]] : [this.value[0], trimmedValue];\n      this.changeValue(newValue);\n      e.preventDefault();\n    };\n\n    this.ngChange = _ => {};\n\n    this.ngTouched = () => {};\n\n    this.handleBlur = () => {\n      this.changeDetector.markForCheck();\n      this.focused = false;\n\n      if (hasObservers(this.onBlur) || requiresZoneOnBlur(this.control)) {\n        this.ngZone.run(() => {\n          this.ngTouched();\n\n          if (!this.focusChangedProgrammatically) {\n            this.onBlur.emit();\n          }\n        });\n      }\n    };\n  }\n  /**\n   * Focuses the RangeSlider.\n   *\n   * @example\n   * ```ts-no-run\n   * _@Component({\n   * selector: 'my-app',\n   * template: `\n   *     <div>\n   *         <button class=\"k-button\" (click)=\"slider.focus()\">Focus</button>\n   *     </div>\n   *     <kendo-rangeslider #slider></kendo-rangeslider>\n   * `\n   * })\n   * class AppComponent { }\n   * ```\n   */\n\n\n  focus() {\n    this.focusChangedProgrammatically = true;\n    invokeElementMethod(this.draghandleStart, 'focus');\n    this.focusChangedProgrammatically = false;\n  }\n  /**\n   * Blurs the RangeSlider.\n   */\n\n\n  blur() {\n    this.focusChangedProgrammatically = true;\n    const activeHandle = this.activeHandle === 'startHandle' ? this.draghandleStart : this.draghandleEnd;\n    invokeElementMethod(activeHandle, 'blur');\n    this.handleBlur();\n    this.focusChangedProgrammatically = false;\n  }\n\n  ngOnInit() {\n    if (!this.value) {\n      this.value = [this.min, this.max];\n    }\n\n    super.ngOnInit();\n  }\n\n  ngOnChanges(changes) {\n    if (anyChanged(['value', 'fixedTickWidth', 'tickPlacement'], changes, true)) {\n      if (changes.value && changes.value.currentValue) {\n        validateValue(changes.value.currentValue);\n      }\n\n      this.ngZone.onStable.asObservable().pipe(take(1)).subscribe(() => {\n        this.sizeComponent();\n      });\n    }\n  }\n\n  ngAfterViewInit() {\n    if (!isDocumentAvailable()) {\n      return;\n    }\n\n    this.sizeComponent();\n\n    if (this.ticks) {\n      this.ticks.tickElements.changes.subscribe(() => this.sizeComponent());\n    }\n\n    this.attachElementEventHandlers();\n  }\n\n  ngOnDestroy() {\n    if (this.subscriptions) {\n      this.subscriptions.unsubscribe();\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  textFor(key) {\n    return this.localization.get(key);\n  }\n  /**\n   * @hidden\n   */\n\n\n  get valueText() {\n    return this.value ? `${this.value[0]} - ${this.value[1]}` : '';\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleDragPress(args) {\n    if (args.originalEvent) {\n      args.originalEvent.preventDefault();\n    }\n\n    const target = args.originalEvent.target;\n    this.draggedHandle = target;\n    this.renderer.setStyle(target, 'zIndex', ++this.handleZIndex);\n  }\n  /**\n   * @hidden\n   */\n\n\n  onHandleDrag(args) {\n    this.value = this.value || [this.min, this.min];\n    const target = args.originalEvent.target;\n    const lastCoords = this.draggedHandle.getBoundingClientRect();\n    this.lastHandlePosition = {\n      x: lastCoords.left,\n      y: lastCoords.top\n    };\n    this.dragging = {\n      value: true,\n      target\n    };\n    const left = args.pageX < this.lastHandlePosition.x;\n    const right = args.pageX > this.lastHandlePosition.x;\n    const up = args.pageY > this.lastHandlePosition.y;\n\n    const moveStartHandle = () => this.changeValue([eventValue(args, this.track.nativeElement, this.getProps()), this.value[1]]);\n\n    const moveEndHandle = () => this.changeValue([this.value[0], eventValue(args, this.track.nativeElement, this.getProps())]);\n\n    const moveBothHandles = () => this.changeValue([eventValue(args, this.track.nativeElement, this.getProps()), eventValue(args, this.track.nativeElement, this.getProps())]);\n\n    const activeStartHandle = isStartHandle(this.draggedHandle);\n    const vertical = this.vertical;\n    const horizontal = !vertical;\n    const forward = vertical && up || (this.reverse ? horizontal && right : horizontal && left); // const forward = (this.reverse ? (!this.vertical && !left) : (!this.vertical && left)) || (this.vertical && up);\n\n    if (this.value[0] === this.value[1]) {\n      if (forward) {\n        activeStartHandle ? moveStartHandle() : moveBothHandles();\n      } else {\n        activeStartHandle ? moveBothHandles() : moveEndHandle();\n      }\n    } else {\n      activeStartHandle ? moveStartHandle() : moveEndHandle();\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  onHandleRelease(args) {\n    this.dragging = {\n      value: false,\n      target: args.originalEvent.target\n    }; //needed for animation\n\n    this.draggedHandle = undefined;\n  } //ngModel binding\n\n  /**\n   * @hidden\n   */\n\n\n  writeValue(value) {\n    validateValue(value);\n    this.value = value;\n    this.sizeComponent();\n  }\n  /**\n   * @hidden\n   */\n\n\n  registerOnChange(fn) {\n    this.ngChange = fn;\n  }\n  /**\n   * @hidden\n   */\n\n\n  registerOnTouched(fn) {\n    this.ngTouched = fn;\n  }\n  /**\n   * @hidden\n   */\n\n\n  changeValue(value) {\n    if (!this.value || !isSameRange(this.value, value)) {\n      this.ngZone.run(() => {\n        this.value = value;\n        this.ngChange(value);\n\n        if (this.value) {\n          this.valueChange.emit(value);\n        }\n\n        this.sizeComponent();\n      });\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  sizeComponent() {\n    if (!isDocumentAvailable()) {\n      return;\n    }\n\n    const wrapper = this.wrapper.nativeElement;\n    const track = this.track.nativeElement;\n    const selectionEl = this.sliderSelection.nativeElement;\n    const dragHandleStartEl = this.draghandleStart.nativeElement;\n    const dragHandleEndEl = this.draghandleEnd.nativeElement;\n    const ticks = this.ticks ? this.ticksContainer.nativeElement : null;\n    this.resetStyles([track, selectionEl, dragHandleStartEl, dragHandleEndEl, ticks, this.hostElement.nativeElement]);\n    const props = this.getProps();\n    const model = new RangeSliderModel(props, wrapper, track, this.renderer);\n    model.resizeTrack();\n\n    if (this.ticks) {\n      //for case when tickPlacement: none\n      model.resizeTicks(this.ticksContainer.nativeElement, this.ticks.tickElements.map(element => element.nativeElement));\n    }\n\n    model.positionHandle(dragHandleStartEl);\n    model.positionHandle(dragHandleEndEl);\n    model.positionSelection(dragHandleStartEl, selectionEl);\n\n    if (this.fixedTickWidth) {\n      model.resizeWrapper();\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  get isDisabled() {\n    return this.disabled || this.readonly;\n  }\n  /**\n   * @hidden\n   * Used by the FloatingLabel to determine if the component is empty.\n   */\n\n\n  isEmpty() {\n    return false;\n  }\n\n  set focused(value) {\n    if (this.isFocused !== value && this.hostElement) {\n      this.isFocused = value;\n    }\n  }\n\n  set dragging(data) {\n    if (this.isDragged !== data.value && this.sliderSelection && this.draghandleStart && this.draghandleEnd) {\n      const sliderSelection = this.sliderSelection.nativeElement;\n      const draghandle = data.target;\n\n      if (data.value) {\n        this.renderer.addClass(sliderSelection, PRESSED$1);\n        this.renderer.addClass(draghandle, PRESSED$1);\n      } else {\n        this.renderer.removeClass(sliderSelection, PRESSED$1);\n        this.renderer.removeClass(draghandle, PRESSED$1);\n      }\n\n      this.isDragged = data.value;\n    }\n  }\n\n  getProps() {\n    return {\n      disabled: this.disabled,\n      fixedTickWidth: this.fixedTickWidth,\n      largeStep: this.largeStep,\n      max: this.max,\n      min: this.min,\n      readonly: this.readonly,\n      reverse: this.reverse,\n      rtl: this.localizationService.rtl,\n      smallStep: this.smallStep,\n      value: trimValueRange(this.max, this.min, this.value),\n      vertical: this.vertical,\n      buttons: false\n    };\n  }\n\n  attachElementEventHandlers() {\n    const hostElement = this.hostElement.nativeElement;\n    let tabbing = false;\n    let cursorInsideWrapper = false;\n    this.ngZone.runOutsideAngular(() => {\n      // focusIn and focusOut are relative to the host element\n      this.subscriptions.add(this.renderer.listen(hostElement, 'focusin', () => {\n        if (!this.isFocused) {\n          this.ngZone.run(() => {\n            if (!this.focusChangedProgrammatically) {\n              this.onFocus.emit();\n            }\n\n            this.focused = true;\n          });\n        }\n      }));\n      this.subscriptions.add(this.renderer.listen(hostElement, 'focusout', args => {\n        if (!this.isFocused) {\n          return;\n        }\n\n        if (tabbing) {\n          if (args.relatedTarget !== this.draghandleStart.nativeElement && args.relatedTarget !== this.draghandleEnd.nativeElement) {\n            this.handleBlur();\n          }\n\n          tabbing = false;\n        } else {\n          if (!cursorInsideWrapper) {\n            this.handleBlur();\n          }\n        }\n      }));\n      this.subscriptions.add(this.renderer.listen(hostElement, 'mouseenter', () => {\n        cursorInsideWrapper = true;\n      }));\n      this.subscriptions.add(this.renderer.listen(hostElement, 'mouseleave', () => {\n        cursorInsideWrapper = false;\n      }));\n      this.subscriptions.add(this.renderer.listen(hostElement, 'keydown', args => {\n        if (args.keyCode === Keys.Tab) {\n          tabbing = true;\n        } else {\n          tabbing = false;\n        }\n      }));\n    });\n  }\n\n};\n\nRangeSliderComponent.ɵfac = function RangeSliderComponent_Factory(t) {\n  return new (t || RangeSliderComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Injector), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef));\n};\n\nRangeSliderComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: RangeSliderComponent,\n  selectors: [[\"kendo-rangeslider\"]],\n  viewQuery: function RangeSliderComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵviewQuery(_c14, 7);\n      ɵngcc0.ɵɵviewQuery(_c15, 7);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.draghandleStart = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.draghandleEnd = _t.first);\n    }\n  },\n  inputs: {\n    value: \"value\"\n  },\n  exportAs: [\"kendoRangeSlider\"],\n  features: [ɵngcc0.ɵɵProvidersFeature([LocalizationService, {\n    provide: L10N_PREFIX,\n    useValue: 'kendo.rangeslider'\n  }, {\n    multi: true,\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => RangeSliderComponent_1)\n  }, {\n    provide: KendoInput,\n    useExisting: forwardRef(() => RangeSliderComponent_1)\n  }]), ɵngcc0.ɵɵInheritDefinitionFeature, ɵngcc0.ɵɵNgOnChangesFeature],\n  decls: 13,\n  vars: 33,\n  consts: function () {\n    let i18n_16;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The title of the **Start** drag handle of the Slider.\n       * @meaning kendo.rangeslider.dragHandleStart\n       */\n      const MSG_EXTERNAL_1512034289801794423$$DIST_FESM2015_INDEX_JS_17 = goog.getMsg(\"Drag\");\n      i18n_16 = MSG_EXTERNAL_1512034289801794423$$DIST_FESM2015_INDEX_JS_17;\n    } else {\n      i18n_16 = $localize`:kendo.rangeslider.dragHandleStart|The title of the **Start** drag handle of the Slider.␟4487c64285c2d8cdb336be783b6cb9304ce86007␟1512034289801794423:Drag`;\n    }\n\n    let i18n_18;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The title of the **End** drag handle of the Slider.\n       * @meaning kendo.rangeslider.dragHandleEnd\n       */\n      const MSG_EXTERNAL_6915505327582510906$$DIST_FESM2015_INDEX_JS_19 = goog.getMsg(\"Drag\");\n      i18n_18 = MSG_EXTERNAL_6915505327582510906$$DIST_FESM2015_INDEX_JS_19;\n    } else {\n      i18n_18 = $localize`:kendo.rangeslider.dragHandleEnd|The title of the **End** drag handle of the Slider.␟d6af522570cc1aff06104cee4b7780d6835e01d1␟6915505327582510906:Drag`;\n    }\n\n    return [[\"kendoSliderLocalizedMessages\", \"\", \"dragHandleStart\", i18n_16, \"dragHandleEnd\", i18n_18], [1, \"k-slider-wrap\", 3, \"kendoEventsOutsideAngular\"], [\"wrap\", \"\"], [\"kendoSliderTicks\", \"\", 3, \"tickTitle\", \"vertical\", \"step\", \"largeStep\", \"min\", \"max\", \"labelTemplate\", 4, \"ngIf\"], [1, \"k-slider-track\"], [\"track\", \"\"], [1, \"k-slider-selection\"], [\"sliderSelection\", \"\"], [\"role\", \"slider\", \"kendoDraggable\", \"\", 1, \"k-draghandle\", 3, \"id\", \"title\", \"kendoPress\", \"kendoDrag\", \"kendoRelease\"], [\"draghandleStart\", \"\"], [\"draghandleEnd\", \"\"], [3, \"resize\"], [\"kendoSliderTicks\", \"\", 3, \"tickTitle\", \"vertical\", \"step\", \"largeStep\", \"min\", \"max\", \"labelTemplate\"], [\"ticks\", \"\"]];\n  },\n  template: function RangeSliderComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵelementContainerStart(0, 0);\n      ɵngcc0.ɵɵelementStart(1, \"div\", 1, 2);\n      ɵngcc0.ɵɵtemplate(3, RangeSliderComponent_ul_3_Template, 2, 8, \"ul\", 3);\n      ɵngcc0.ɵɵelementStart(4, \"div\", 4, 5);\n      ɵngcc0.ɵɵelement(6, \"div\", 6, 7);\n      ɵngcc0.ɵɵelementStart(8, \"a\", 8, 9);\n      ɵngcc0.ɵɵlistener(\"kendoPress\", function RangeSliderComponent_Template_a_kendoPress_8_listener($event) {\n        return ctx.ifEnabled(ctx.handleDragPress, $event);\n      })(\"kendoDrag\", function RangeSliderComponent_Template_a_kendoDrag_8_listener($event) {\n        return ctx.ifEnabled(ctx.onHandleDrag, $event);\n      })(\"kendoRelease\", function RangeSliderComponent_Template_a_kendoRelease_8_listener($event) {\n        return ctx.ifEnabled(ctx.onHandleRelease, $event);\n      });\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵelementStart(10, \"a\", 8, 10);\n      ɵngcc0.ɵɵlistener(\"kendoPress\", function RangeSliderComponent_Template_a_kendoPress_10_listener($event) {\n        return ctx.ifEnabled(ctx.handleDragPress, $event);\n      })(\"kendoDrag\", function RangeSliderComponent_Template_a_kendoDrag_10_listener($event) {\n        return ctx.ifEnabled(ctx.onHandleDrag, $event);\n      })(\"kendoRelease\", function RangeSliderComponent_Template_a_kendoRelease_10_listener($event) {\n        return ctx.ifEnabled(ctx.onHandleRelease, $event);\n      });\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵelementStart(12, \"kendo-resize-sensor\", 11);\n      ɵngcc0.ɵɵlistener(\"resize\", function RangeSliderComponent_Template_kendo_resize_sensor_resize_12_listener() {\n        return ctx.sizeComponent();\n      });\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵelementContainerEnd();\n    }\n\n    if (rf & 2) {\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵclassProp(\"k-slider-topleft\", ctx.tickPlacement === \"before\")(\"k-slider-bottomright\", ctx.tickPlacement === \"after\");\n      ɵngcc0.ɵɵproperty(\"kendoEventsOutsideAngular\", ɵngcc0.ɵɵpureFunction2(30, _c13, ctx.onWrapClick, ctx.onKeyDown));\n      ɵngcc0.ɵɵadvance(2);\n      ɵngcc0.ɵɵproperty(\"ngIf\", ctx.tickPlacement !== \"none\");\n      ɵngcc0.ɵɵadvance(5);\n      ɵngcc0.ɵɵstyleProp(\"touch-action\", ctx.isDisabled ? \"\" : \"none\");\n      ɵngcc0.ɵɵproperty(\"id\", ctx.startHandleId)(\"title\", ctx.textFor(\"dragHandleStart\"));\n      ɵngcc0.ɵɵattribute(\"tabindex\", ctx.disabled ? undefined : ctx.tabindex)(\"aria-valuemin\", ctx.min)(\"aria-valuemax\", ctx.max)(\"aria-valuenow\", ctx.value ? ctx.value[0] : null)(\"aria-valuetext\", ctx.valueText)(\"aria-disabled\", ctx.disabled ? true : undefined)(\"aria-readonly\", ctx.readonly ? true : undefined)(\"aria-orientation\", ctx.vertical ? \"vertical\" : \"horizontal\");\n      ɵngcc0.ɵɵadvance(2);\n      ɵngcc0.ɵɵstyleProp(\"touch-action\", ctx.isDisabled ? \"\" : \"none\");\n      ɵngcc0.ɵɵproperty(\"id\", ctx.endHandleId)(\"title\", ctx.textFor(\"dragHandleEnd\"));\n      ɵngcc0.ɵɵattribute(\"tabindex\", ctx.disabled ? undefined : ctx.tabindex)(\"aria-valuemin\", ctx.min)(\"aria-valuemax\", ctx.max)(\"aria-valuenow\", ctx.value ? ctx.value[1] : null)(\"aria-valuetext\", ctx.valueText)(\"aria-disabled\", ctx.disabled ? true : undefined)(\"aria-readonly\", ctx.readonly ? true : undefined)(\"aria-orientation\", ctx.vertical ? \"vertical\" : \"horizontal\");\n    }\n  },\n  directives: function () {\n    return [LocalizedRangeSliderMessagesDirective, ɵngcc2.EventsOutsideAngularDirective, ɵngcc3.NgIf, ɵngcc2.DraggableDirective, ɵngcc2.ResizeSensorComponent, SliderTicksComponent];\n  },\n  encapsulation: 2\n});\n\n__decorate([Input(), __metadata(\"design:type\", Array)], RangeSliderComponent.prototype, \"value\", void 0);\n\n__decorate([ViewChild('draghandleStart', {\n  static: true\n}), __metadata(\"design:type\", ElementRef)], RangeSliderComponent.prototype, \"draghandleStart\", void 0);\n\n__decorate([ViewChild('draghandleEnd', {\n  static: true\n}), __metadata(\"design:type\", ElementRef)], RangeSliderComponent.prototype, \"draghandleEnd\", void 0);\n\nRangeSliderComponent = RangeSliderComponent_1 = __decorate([__metadata(\"design:paramtypes\", [LocalizationService, Injector, Renderer2, NgZone, ChangeDetectorRef, ElementRef])], RangeSliderComponent);\nvar SwitchComponent_1;\nconst FOCUSED = 'k-state-focused';\n/**\n * Represents the [Kendo UI Switch component for Angular]({% slug overview_switch %}).\n */\n\nlet SwitchComponent = SwitchComponent_1 = class SwitchComponent {\n  constructor(renderer, hostElement, localizationService, injector, changeDetector, ngZone) {\n    this.renderer = renderer;\n    this.hostElement = hostElement;\n    this.localizationService = localizationService;\n    this.injector = injector;\n    this.changeDetector = changeDetector;\n    this.ngZone = ngZone;\n    /**\n     * @hidden\n     */\n\n    this.focusableId = `k-${guid()}`;\n    /**\n     * Determines whether the Switch is disabled ([see example]({% slug disabled_switch %})).\n     */\n\n    this.disabled = false;\n    /**\n     * Determines whether the Switch is in its read-only state ([see example]({% slug readonly_switch %})).\n     */\n\n    this.readonly = false;\n    /**\n     * Specifies the [tabindex](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex) of the Switch.\n     */\n\n    this.tabindex = 0;\n    /**\n     * Fires each time the user focuses the `input` element.\n     */\n\n    this.onFocus = new EventEmitter(); //tslint:disable-line:no-output-rename\n\n    /**\n     * Fires each time the `input` element gets blurred.\n     */\n\n    this.onBlur = new EventEmitter(); //tslint:disable-line:no-output-rename\n\n    /**\n     * Fires each time the user selects a new value.\n     */\n\n    this.valueChange = new EventEmitter();\n    this.hostClasses = true;\n    /**\n     * @hidden\n     */\n\n    this.initialized = false;\n    this._checked = false;\n\n    this.ngChange = _ => {};\n\n    this.ngTouched = () => {};\n    /**\n     * @hidden\n     */\n\n\n    this.handleFocus = () => {\n      this.focused = true;\n\n      if (hasObservers(this.onFocus)) {\n        this.ngZone.run(() => {\n          this.onFocus.emit();\n        });\n      }\n    };\n    /**\n     * @hidden\n     */\n\n\n    this.handleBlur = () => {\n      this.changeDetector.markForCheck();\n      this.focused = false;\n\n      if (hasObservers(this.onBlur) || requiresZoneOnBlur(this.control)) {\n        this.ngZone.run(() => {\n          this.ngTouched();\n          this.onBlur.emit();\n        });\n      }\n    };\n\n    validatePackage(packageMetadata);\n    this.direction = localizationService.rtl ? 'rtl' : 'ltr';\n    this.keyDownHandler = this.keyDownHandler.bind(this);\n    this.clickHandler = this.clickHandler.bind(this);\n  }\n  /**\n   * Sets the value of the Switch when it is initially displayed.\n   */\n\n\n  set checked(value) {\n    this.setHostClasses(value);\n    this._checked = value;\n  }\n\n  get checked() {\n    return this._checked;\n  }\n  /**\n   * @hidden\n   */\n\n\n  set tabIndex(tabIndex) {\n    this.tabindex = tabIndex;\n  }\n\n  get tabIndex() {\n    return this.tabindex;\n  }\n\n  get ieClass() {\n    return browser && browser.msie;\n  }\n\n  get ariaDisabled() {\n    return this.disabled ? true : undefined;\n  }\n\n  get ariaReadonly() {\n    return this.readonly;\n  }\n\n  get disabledClass() {\n    return this.disabled;\n  }\n  /**\n   * @hidden\n   */\n\n\n  get onLabelMessage() {\n    return this.onLabel || this.localizationService.get('on');\n  }\n  /**\n   * @hidden\n   */\n\n\n  get offLabelMessage() {\n    return this.offLabel || this.localizationService.get('off');\n  }\n\n  get isEnabled() {\n    return !this.disabled && !this.readonly;\n  }\n\n  ngOnInit() {\n    if (this.hostElement) {\n      const wrapper = this.hostElement.nativeElement;\n      this.renderer.removeAttribute(wrapper, \"tabindex\");\n    }\n\n    this.localizationChangeSubscription = this.localizationService.changes.pipe(skip(1)).subscribe(({\n      rtl\n    }) => {\n      this.direction = rtl ? 'rtl' : 'ltr';\n    });\n    this.control = this.injector.get(NgControl, null);\n    this.ngZone.onStable.pipe(take(1)).subscribe(() => this.initialized = true);\n  }\n\n  ngOnDestroy() {\n    if (this.localizationChangeSubscription) {\n      this.localizationChangeSubscription.unsubscribe();\n    }\n  }\n  /**\n   * Focuses the Switch.\n   *\n   * @example\n   * ```ts-no-run\n   * _@Component({\n   * selector: 'my-app',\n   * template: `\n   *  <button (click)=\"switch.focus()\">Focus</button>\n   *  <kendo-switch #switch></kendo-switch>\n   * `\n   * })\n   * class AppComponent { }\n   * ```\n   */\n\n\n  focus() {\n    if (!this.wrapper) {\n      return;\n    }\n\n    this.wrapper.nativeElement.focus();\n  }\n  /**\n   * Blurs the Switch.\n   */\n\n\n  blur() {\n    if (!this.wrapper) {\n      return;\n    }\n\n    this.wrapper.nativeElement.blur();\n  }\n  /**\n   * @hidden\n   * Called when the status of the component changes to or from `disabled`.\n   * Depending on the value, it enables or disables the appropriate DOM element.\n   */\n\n\n  setDisabledState(isDisabled) {\n    this.disabled = isDisabled;\n    this.changeDetector.markForCheck();\n  }\n  /**\n   * @hidden\n   */\n\n\n  writeValue(value) {\n    this.checked = value === null ? false : value;\n    this.changeDetector.markForCheck();\n  }\n  /**\n   * @hidden\n   */\n\n\n  registerOnChange(fn) {\n    this.ngChange = fn;\n  }\n  /**\n   * @hidden\n   */\n\n\n  registerOnTouched(fn) {\n    this.ngTouched = fn;\n  }\n  /**\n   * @hidden\n   */\n\n\n  keyDownHandler(e) {\n    const keyCode = e.keyCode;\n\n    if (this.isEnabled && (keyCode === Keys.Space || keyCode === Keys.Enter)) {\n      this.changeValue(!this.checked);\n      e.preventDefault();\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  clickHandler() {\n    if (this.isEnabled) {\n      this.changeValue(!this.checked);\n    }\n  }\n  /**\n   * @hidden\n   * Used by the TextBoxContainer to determine if the component is empty.\n   */\n\n\n  isEmpty() {\n    return false;\n  }\n\n  changeValue(value) {\n    if (this.checked !== value) {\n      this.ngZone.run(() => {\n        this.checked = value;\n        this.ngChange(value);\n        this.valueChange.emit(value);\n        this.changeDetector.markForCheck();\n      });\n    }\n  }\n\n  set focused(value) {\n    if (this.isFocused !== value && this.hostElement) {\n      const element = this.hostElement.nativeElement;\n\n      if (value) {\n        this.renderer.addClass(element, FOCUSED);\n      } else {\n        this.renderer.removeClass(element, FOCUSED);\n      }\n\n      this.isFocused = value;\n    }\n  }\n\n  setHostClasses(value) {\n    if (value) {\n      this.renderer.removeClass(this.hostElement.nativeElement, 'k-switch-off');\n      this.renderer.addClass(this.hostElement.nativeElement, 'k-switch-on');\n    } else {\n      this.renderer.removeClass(this.hostElement.nativeElement, 'k-switch-on');\n      this.renderer.addClass(this.hostElement.nativeElement, 'k-switch-off');\n    }\n  }\n\n};\n\nSwitchComponent.ɵfac = function SwitchComponent_Factory(t) {\n  return new (t || SwitchComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Injector), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone));\n};\n\nSwitchComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: SwitchComponent,\n  selectors: [[\"kendo-switch\"]],\n  viewQuery: function SwitchComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵviewQuery(_c20, 7);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.wrapper = _t.first);\n    }\n  },\n  hostVars: 9,\n  hostBindings: function SwitchComponent_HostBindings(rf, ctx) {\n    if (rf & 2) {\n      ɵngcc0.ɵɵattribute(\"dir\", ctx.direction)(\"aria-disabled\", ctx.ariaDisabled)(\"aria-readonly\", ctx.ariaReadonly);\n      ɵngcc0.ɵɵclassProp(\"k-switch\", ctx.hostClasses)(\"k-ie\", ctx.ieClass)(\"k-state-disabled\", ctx.disabledClass);\n    }\n  },\n  inputs: {\n    focusableId: \"focusableId\",\n    disabled: \"disabled\",\n    readonly: \"readonly\",\n    tabindex: \"tabindex\",\n    checked: \"checked\",\n    tabIndex: \"tabIndex\",\n    onLabel: \"onLabel\",\n    offLabel: \"offLabel\"\n  },\n  outputs: {\n    onFocus: \"focus\",\n    onBlur: \"blur\",\n    valueChange: \"valueChange\"\n  },\n  exportAs: [\"kendoSwitch\"],\n  features: [ɵngcc0.ɵɵProvidersFeature([LocalizationService, {\n    provide: L10N_PREFIX,\n    useValue: 'kendo.switch'\n  }, {\n    multi: true,\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => SwitchComponent_1)\n    /* tslint:disable-line */\n\n  }, {\n    provide: KendoInput,\n    useExisting: forwardRef(() => SwitchComponent_1)\n  }])],\n  decls: 8,\n  vars: 17,\n  consts: function () {\n    let i18n_21;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The **On** label of the Switch.\n       * @meaning kendo.switch.on\n       */\n      const MSG_EXTERNAL_818154782831456441$$DIST_FESM2015_INDEX_JS_22 = goog.getMsg(\"ON\");\n      i18n_21 = MSG_EXTERNAL_818154782831456441$$DIST_FESM2015_INDEX_JS_22;\n    } else {\n      i18n_21 = $localize`:kendo.switch.on|The **On** label of the Switch.␟155f0a38198ffbf0429c5dbf9765e74f246a8617␟818154782831456441:ON`;\n    }\n\n    let i18n_23;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The **Off** label of the Switch.\n       * @meaning kendo.switch.off\n       */\n      const MSG_EXTERNAL_759820891948194060$$DIST_FESM2015_INDEX_JS_24 = goog.getMsg(\"OFF\");\n      i18n_23 = MSG_EXTERNAL_759820891948194060$$DIST_FESM2015_INDEX_JS_24;\n    } else {\n      i18n_23 = $localize`:kendo.switch.off|The **Off** label of the Switch.␟79df1a6d2b35c32b2948e3cee56dd3ffe28127bc␟759820891948194060:OFF`;\n    }\n\n    return [[\"kendoSwitchLocalizedMessages\", \"\", \"on\", i18n_21, \"off\", i18n_23], [\"role\", \"switch\", 1, \"k-switch-container\", 3, \"id\", \"kendoEventsOutsideAngular\"], [\"wrapper\", \"\"], [1, \"k-switch-label-on\"], [1, \"k-switch-label-off\"], [1, \"k-switch-handle\"]];\n  },\n  template: function SwitchComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵelementContainerStart(0, 0);\n      ɵngcc0.ɵɵelementStart(1, \"span\", 1, 2);\n      ɵngcc0.ɵɵelementStart(3, \"span\", 3);\n      ɵngcc0.ɵɵtext(4);\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵelementStart(5, \"span\", 4);\n      ɵngcc0.ɵɵtext(6);\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵelement(7, \"span\", 5);\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵelementContainerEnd();\n    }\n\n    if (rf & 2) {\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵstyleProp(\"transition-duration\", ctx.initialized ? \"200ms\" : \"0ms\");\n      ɵngcc0.ɵɵproperty(\"id\", ctx.focusableId)(\"kendoEventsOutsideAngular\", ɵngcc0.ɵɵpureFunction4(12, _c25, ctx.clickHandler, ctx.keyDownHandler, ctx.handleFocus, ctx.handleBlur));\n      ɵngcc0.ɵɵattribute(\"aria-checked\", ctx.checked)(\"tabindex\", ctx.disabled ? undefined : ctx.tabIndex);\n      ɵngcc0.ɵɵadvance(2);\n      ɵngcc0.ɵɵattribute(\"aria-hidden\", true);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵtextInterpolate(ctx.onLabelMessage);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵattribute(\"aria-hidden\", true);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵtextInterpolate(ctx.offLabelMessage);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵstyleProp(\"transition-duration\", ctx.initialized ? \"200ms\" : \"0ms\");\n    }\n  },\n  directives: function () {\n    return [LocalizedSwitchMessagesDirective, ɵngcc2.EventsOutsideAngularDirective];\n  },\n  encapsulation: 2\n});\n\n__decorate([Input(), __metadata(\"design:type\", String)], SwitchComponent.prototype, \"focusableId\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], SwitchComponent.prototype, \"onLabel\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], SwitchComponent.prototype, \"offLabel\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [Boolean])], SwitchComponent.prototype, \"checked\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], SwitchComponent.prototype, \"disabled\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], SwitchComponent.prototype, \"readonly\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Number)], SwitchComponent.prototype, \"tabindex\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Number), __metadata(\"design:paramtypes\", [Number])], SwitchComponent.prototype, \"tabIndex\", null);\n\n__decorate([Output('focus'), __metadata(\"design:type\", EventEmitter)], SwitchComponent.prototype, \"onFocus\", void 0);\n\n__decorate([Output('blur'), __metadata(\"design:type\", EventEmitter)], SwitchComponent.prototype, \"onBlur\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], SwitchComponent.prototype, \"valueChange\", void 0);\n\n__decorate([ViewChild('wrapper', {\n  static: true\n}), __metadata(\"design:type\", Object)], SwitchComponent.prototype, \"wrapper\", void 0);\n\n__decorate([HostBinding('attr.dir'), __metadata(\"design:type\", String)], SwitchComponent.prototype, \"direction\", void 0);\n\n__decorate([HostBinding('class.k-ie'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], SwitchComponent.prototype, \"ieClass\", null);\n\n__decorate([HostBinding('attr.aria-disabled'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], SwitchComponent.prototype, \"ariaDisabled\", null);\n\n__decorate([HostBinding('attr.aria-readonly'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], SwitchComponent.prototype, \"ariaReadonly\", null);\n\n__decorate([HostBinding('class.k-switch'), __metadata(\"design:type\", Boolean)], SwitchComponent.prototype, \"hostClasses\", void 0);\n\n__decorate([HostBinding('class.k-state-disabled'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], SwitchComponent.prototype, \"disabledClass\", null);\n\nSwitchComponent = SwitchComponent_1 = __decorate([__metadata(\"design:paramtypes\", [Renderer2, ElementRef, LocalizationService, Injector, ChangeDetectorRef, NgZone])], SwitchComponent);\nvar TextAreaDirective_1;\n/**\n * Represents the [Kendo UI TextArea directive for the Inputs components for Angular]({% slug overview_textarea %}).\n * Provides floating labels to `textarea` elements.\n *\n * @example\n * ```ts-no-run\n * <textarea kendoTextArea></textarea>\n * ```\n */\n\nlet TextAreaDirective = TextAreaDirective_1 = class TextAreaDirective {\n  constructor(renderer, element, zone, changeDetector, injector, rtl) {\n    this.renderer = renderer;\n    this.element = element;\n    this.zone = zone;\n    this.changeDetector = changeDetector;\n    this.injector = injector;\n    this.elementClass = true;\n    this.autofillClass = true;\n    /**\n     * Fires each time the textarea value is changed.\n     */\n\n    this.valueChange = new EventEmitter();\n    /**\n     * Specifies if the `textarea` element will resize its height automatically\n     * ([see example]({% slug overview_textarea %}#toc-auto-resizing)).\n     *\n     * @default false\n     */\n\n    this.autoSize = false;\n    /**\n     * @hidden\n     */\n\n    this.onFocus = new EventEmitter();\n    /**\n     * @hidden\n     */\n\n    this.onBlur = new EventEmitter();\n    /**\n     * @hidden\n     */\n\n    this.onValueChange = new EventEmitter();\n    /**\n     * @hidden\n     */\n\n    this.autoFillStart = new EventEmitter();\n    /**\n     * @hidden\n     */\n\n    this.autoFillEnd = new EventEmitter();\n    this.listeners = [];\n\n    this.ngChange = _ => {};\n\n    this.ngTouched = () => {};\n\n    this.direction = rtl ? 'rtl' : 'ltr';\n  }\n\n  get id() {\n    return this.element.nativeElement.id;\n  }\n\n  set id(id) {\n    this.renderer.setAttribute(this.element.nativeElement, 'id', id);\n  }\n  /**\n   * @hidden\n   */\n\n\n  writeValue(value) {\n    this.elementValue = value;\n    this.resize();\n  }\n  /**\n   * @hidden\n   */\n\n\n  registerOnChange(fn) {\n    this.ngChange = fn;\n  }\n  /**\n   * @hidden\n   */\n\n\n  registerOnTouched(fn) {\n    this.ngTouched = fn;\n  }\n  /**\n   * @hidden\n   */\n\n\n  setDisabledState(isDisabled) {\n    this.setElementProperty('disabled', isDisabled);\n  }\n\n  ngOnInit() {\n    const element = this.element.nativeElement;\n    this.zone.runOutsideAngular(() => {\n      this.listeners = [this.renderer.listen(element, 'focus', this.handleFocus.bind(this)), this.renderer.listen(element, 'blur', this.handleBlur.bind(this)), this.renderer.listen(element, 'animationstart', e => {\n        if (e.animationName === 'autoFillStart') {\n          this.autoFillStart.emit();\n        } else if (e.animationName === 'autoFillEnd') {\n          this.autoFillEnd.emit();\n        }\n      })];\n\n      if (isDocumentAvailable() && this.autoSize) {\n        this.resizeSubscription = fromEvent(window, 'resize').pipe(debounceTime(50)).subscribe(() => this.resize());\n      }\n\n      this.inputSubscription = fromEvent(element, 'input').subscribe(this.handleInput.bind(this));\n    });\n    this.control = this.injector.get(NgControl, null);\n  }\n\n  ngOnChanges(changes) {\n    const element = this.element.nativeElement;\n\n    if (changes.value) {\n      this.elementValue = this.value;\n    }\n\n    if (changes.autoSize) {\n      if (this.autoSize) {\n        this.initialHeight = element.offsetHeight;\n        this.renderer.setStyle(element, 'resize', 'none');\n      } else {\n        this.renderer.setStyle(element, 'overflow-y', 'auto');\n        this.renderer.setStyle(element, 'resize', 'both');\n        element.style.height = `${this.initialHeight}px`;\n      }\n    }\n\n    this.resize();\n  }\n\n  ngOnDestroy() {\n    this.listeners.forEach(listener => listener());\n\n    if (this.inputSubscription) {\n      this.inputSubscription.unsubscribe();\n    }\n\n    if (this.resizeSubscription) {\n      this.resizeSubscription.unsubscribe();\n    }\n  }\n\n  get elementValue() {\n    if (this.element) {\n      return this.element.nativeElement.value;\n    }\n\n    return '';\n  }\n\n  set elementValue(value) {\n    this.setElementProperty('value', value === undefined || value === null ? '' : value);\n  }\n\n  setElementProperty(name, value) {\n    if (this.element) {\n      this.renderer.setProperty(this.element.nativeElement, name, value);\n    }\n  }\n\n  resize() {\n    if (!this.autoSize) {\n      return;\n    }\n\n    const element = this.element.nativeElement;\n    this.renderer.setStyle(element, 'overflow-y', 'hidden');\n    element.style.height = `${this.initialHeight}px`;\n    const scrollHeight = element.scrollHeight;\n\n    if (scrollHeight > this.initialHeight) {\n      element.style.height = `${scrollHeight}px`;\n    }\n  }\n\n  handleInput() {\n    const value = this.elementValue;\n    this.value = value;\n\n    if (this.control || hasObservers(this.onValueChange) || hasObservers(this.valueChange)) {\n      this.zone.run(() => {\n        this.ngChange(value);\n        this.onValueChange.emit(value);\n        this.valueChange.emit(value);\n        this.changeDetector.markForCheck();\n      });\n    }\n\n    this.resize();\n  }\n\n  handleFocus() {\n    if (hasObservers(this.onFocus)) {\n      this.zone.run(() => {\n        this.onFocus.emit();\n      });\n    }\n  }\n\n  handleBlur() {\n    if (hasObservers(this.onBlur) || requiresZoneOnBlur(this.control)) {\n      this.zone.run(() => {\n        this.ngTouched();\n        this.onBlur.emit();\n        this.changeDetector.markForCheck();\n      });\n    }\n  }\n\n};\n\nTextAreaDirective.ɵfac = function TextAreaDirective_Factory(t) {\n  return new (t || TextAreaDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Injector), ɵngcc0.ɵɵdirectiveInject(RTL, 8));\n};\n\nTextAreaDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n  type: TextAreaDirective,\n  selectors: [[\"textarea\", \"kendoTextArea\", \"\"]],\n  hostVars: 5,\n  hostBindings: function TextAreaDirective_HostBindings(rf, ctx) {\n    if (rf & 2) {\n      ɵngcc0.ɵɵattribute(\"dir\", ctx.direction);\n      ɵngcc0.ɵɵclassProp(\"k-textarea\", ctx.elementClass)(\"k-autofill\", ctx.autofillClass);\n    }\n  },\n  inputs: {\n    autoSize: \"autoSize\",\n    value: \"value\"\n  },\n  outputs: {\n    valueChange: \"valueChange\"\n  },\n  features: [ɵngcc0.ɵɵProvidersFeature([{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => TextAreaDirective_1),\n    multi: true\n  }, {\n    provide: KendoInput,\n    useExisting: forwardRef(() => TextAreaDirective_1)\n  }]), ɵngcc0.ɵɵNgOnChangesFeature]\n});\n\n__decorate([HostBinding('class.k-textarea'), __metadata(\"design:type\", Boolean)], TextAreaDirective.prototype, \"elementClass\", void 0);\n\n__decorate([HostBinding('class.k-autofill'), __metadata(\"design:type\", Boolean)], TextAreaDirective.prototype, \"autofillClass\", void 0);\n\n__decorate([HostBinding('attr.dir'), __metadata(\"design:type\", String)], TextAreaDirective.prototype, \"direction\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], TextAreaDirective.prototype, \"valueChange\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], TextAreaDirective.prototype, \"autoSize\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], TextAreaDirective.prototype, \"value\", void 0);\n\nTextAreaDirective = TextAreaDirective_1 = __decorate([__param(5, Optional()), __param(5, Inject(RTL)), __metadata(\"design:paramtypes\", [Renderer2, ElementRef, NgZone, ChangeDetectorRef, Injector, Boolean])], TextAreaDirective);\n/**\n * @hidden\n */\n\nclass FloatingLabelInputAdapter {\n  constructor(component, formControl) {\n    this.component = component;\n\n    const isObservableOrEventEmitter = event => event instanceof Observable || event instanceof EventEmitter;\n\n    if (isObservableOrEventEmitter(component.onFocus)) {\n      this.onFocus = component.onFocus;\n    }\n\n    if (isObservableOrEventEmitter(component.autoFillStart)) {\n      this.autoFillStart = component.autoFillStart;\n    }\n\n    if (isObservableOrEventEmitter(component.autoFillEnd)) {\n      this.autoFillEnd = component.autoFillEnd;\n    }\n\n    if (isObservableOrEventEmitter(component.onBlur)) {\n      this.onBlur = component.onBlur;\n    }\n\n    if (formControl) {\n      this.onValueChange = formControl.valueChanges;\n    } else if (component.onValueChange) {\n      this.onValueChange = component.onValueChange;\n    }\n  }\n\n  get focusableId() {\n    const component = this.component;\n\n    if ('focusableId' in component) {\n      return component.focusableId;\n    } else if ('id' in component) {\n      return component.id;\n    }\n\n    return \"\";\n  }\n\n  set focusableId(value) {\n    const component = this.component;\n\n    if ('focusableId' in component) {\n      component.focusableId = value;\n    } else if ('id' in component) {\n      component.id = value;\n    }\n  }\n\n}\n\nconst isFunction = x => Object.prototype.toString.call(x) === '[object Function]';\n/**\n * @hidden\n */\n\n\nlet TextBoxContainerComponent = /*#__PURE__*/(() => {\n  let TextBoxContainerComponent = class TextBoxContainerComponent {\n    constructor(elementRef, renderer, changeDetectorRef, rtl) {\n      this.elementRef = elementRef;\n      this.renderer = renderer;\n      this.changeDetectorRef = changeDetectorRef;\n      /**\n       * @hidden\n       */\n\n      this.focused = false;\n      /**\n       * @hidden\n       */\n\n      this.empty = true;\n      /**\n       * @hidden\n       */\n\n      this.invalid = false;\n      this._subscriptions = [];\n      this.autoFillStarted = false;\n      this.direction = rtl ? 'rtl' : 'ltr';\n      this.renderer.removeAttribute(this.elementRef.nativeElement, \"id\");\n    }\n\n    get hostClasses() {\n      return true;\n    }\n\n    get textareaElementClass() {\n      return !!this.textarea;\n    }\n\n    get focusedClass() {\n      return this.focused;\n    }\n\n    get invalidClass() {\n      return this.invalid;\n    }\n    /**\n     * @hidden\n     */\n\n\n    ngAfterContentInit() {\n      if (!this.formControl && !this.kendoInput) {\n        if (isDevMode()) {\n          throw new Error(\"The TextBoxContainer requires a Kendo Input component\" + \" or a forms-bound component to function properly.\");\n        }\n\n        return;\n      } // add focus/blur/valueChange handlers\n\n\n      const control = new FloatingLabelInputAdapter(this.kendoInput || this.formControl.valueAccessor, this.formControl);\n\n      const setFocus = isFocused => () => {\n        this.focused = isFocused;\n        this.updateState();\n      };\n\n      this.subscribe(control, 'onFocus', setFocus(true));\n      this.subscribe(control, 'onBlur', setFocus(false));\n      this.subscribe(control, 'autoFillStart', () => {\n        this.autoFillStarted = true;\n        this.renderer.removeClass(this.elementRef.nativeElement, 'k-state-empty');\n      });\n      this.subscribe(control, 'autoFillEnd', () => {\n        if (this.autoFillStarted) {\n          this.autoFillStarted = false;\n\n          if (this.empty) {\n            this.renderer.addClass(this.elementRef.nativeElement, 'k-state-empty');\n          }\n        }\n      });\n\n      const updateState = () => this.updateState();\n\n      updateState();\n      this.subscribe(control, 'onValueChange', updateState); // set label id for floating label\n\n      if (this.id && control.focusableId) {\n        // input wins\n        this.id = control.focusableId;\n      } else if (this.id) {\n        control.focusableId = this.id;\n      } else if (control.focusableId) {\n        this.id = control.focusableId;\n      } else {\n        const id = \"_\" + guid();\n        control.focusableId = id;\n        this.id = id;\n      }\n    }\n    /**\n     * @hidden\n     */\n\n\n    ngOnDestroy() {\n      this._subscriptions.forEach(s => s.unsubscribe());\n\n      this._subscriptions = [];\n    }\n\n    subscribe(control, eventName, handler) {\n      if (control[eventName] instanceof EventEmitter) {\n        const subscription = control[eventName].subscribe(handler);\n\n        this._subscriptions.push(subscription);\n      }\n    }\n\n    updateState() {\n      const empty = value => {\n        // zero is not an empty value (e.g., NumericTextBox)\n        if (value === 0 || value === false) {\n          return false;\n        } // empty arrays are an empty value (e.g., MultiSelect)\n\n\n        if (Array.isArray(value) && !value.length) {\n          return true;\n        }\n\n        return !value;\n      };\n\n      const formControl = this.formControl;\n\n      if (formControl) {\n        const valueAccessor = formControl.valueAccessor;\n\n        if (isFunction(valueAccessor.isEmpty)) {\n          this.empty = valueAccessor.isEmpty();\n        } else {\n          this.empty = empty(formControl.value);\n        }\n\n        this.invalid = formControl.invalid && (formControl.touched || formControl.dirty);\n      } else {\n        this.empty = isFunction(this.kendoInput.isEmpty) ? this.kendoInput.isEmpty() : empty(this.kendoInput.value);\n      }\n\n      if (this.empty) {\n        this.renderer.addClass(this.elementRef.nativeElement, 'k-state-empty');\n      } else {\n        this.renderer.removeClass(this.elementRef.nativeElement, 'k-state-empty');\n      }\n\n      this.changeDetectorRef.markForCheck();\n    }\n\n  };\n\n  TextBoxContainerComponent.ɵfac = function TextBoxContainerComponent_Factory(t) {\n    return new (t || TextBoxContainerComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(RTL, 8));\n  };\n\n  TextBoxContainerComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: TextBoxContainerComponent,\n    selectors: [[\"kendo-textbox-container\"]],\n    contentQueries: function TextBoxContainerComponent_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, KendoInput, 5);\n        ɵngcc0.ɵɵcontentQuery(dirIndex, TextAreaDirective, 5);\n        ɵngcc0.ɵɵcontentQuery(dirIndex, NgControl, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.kendoInput = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.textarea = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.formControl = _t.first);\n      }\n    },\n    hostVars: 9,\n    hostBindings: function TextBoxContainerComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"dir\", ctx.direction);\n        ɵngcc0.ɵɵclassProp(\"k-textbox-container\", ctx.hostClasses)(\"k-textarea-wrapper\", ctx.textareaElementClass)(\"k-state-focused\", ctx.focusedClass)(\"k-state-invalid\", ctx.invalidClass);\n      }\n    },\n    inputs: {\n      id: \"id\",\n      floatingLabel: \"floatingLabel\"\n    },\n    ngContentSelectors: _c26,\n    decls: 2,\n    vars: 1,\n    consts: [[\"class\", \"k-label\", 3, \"for\", 4, \"ngIf\"], [1, \"k-label\", 3, \"for\"]],\n    template: function TextBoxContainerComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵprojection(0);\n        ɵngcc0.ɵɵtemplate(1, TextBoxContainerComponent_label_1_Template, 2, 2, \"label\", 0);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.floatingLabel);\n      }\n    },\n    directives: [ɵngcc3.NgIf],\n    encapsulation: 2\n  });\n\n  __decorate([HostBinding('class.k-textbox-container'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], TextBoxContainerComponent.prototype, \"hostClasses\", null);\n\n  __decorate([HostBinding('class.k-textarea-wrapper'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], TextBoxContainerComponent.prototype, \"textareaElementClass\", null);\n\n  __decorate([HostBinding('class.k-state-focused'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], TextBoxContainerComponent.prototype, \"focusedClass\", null);\n\n  __decorate([HostBinding('class.k-state-invalid'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], TextBoxContainerComponent.prototype, \"invalidClass\", null);\n\n  __decorate([HostBinding('attr.dir'), __metadata(\"design:type\", String)], TextBoxContainerComponent.prototype, \"direction\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], TextBoxContainerComponent.prototype, \"id\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], TextBoxContainerComponent.prototype, \"floatingLabel\", void 0);\n\n  __decorate([ContentChild(KendoInput, {\n    static: false\n  }), __metadata(\"design:type\", Object)], TextBoxContainerComponent.prototype, \"kendoInput\", void 0);\n\n  __decorate([ContentChild(TextAreaDirective, {\n    static: false\n  }), __metadata(\"design:type\", TextAreaDirective)], TextBoxContainerComponent.prototype, \"textarea\", void 0);\n\n  __decorate([ContentChild(NgControl, {\n    static: false\n  }), __metadata(\"design:type\", NgControl)], TextBoxContainerComponent.prototype, \"formControl\", void 0);\n\n  TextBoxContainerComponent = __decorate([__param(3, Optional()), __param(3, Inject(RTL)), __metadata(\"design:paramtypes\", [ElementRef, Renderer2, ChangeDetectorRef, Boolean])], TextBoxContainerComponent);\n  return TextBoxContainerComponent;\n})();\nvar TextBoxDirective_1;\n/**\n * Represents the [Kendo UI TextBox directive]({% slug overview_textbox %}) for the Inputs components for Angular.\n * Used to style the textbox of any `input` element.\n *\n * @example\n * ```ts-no-run\n * <input kendoTextBox />\n * <input kendoTextBox type=\"email\" />\n * <input kendoTextBox type=\"password\" />\n * ```\n */\n\nlet TextBoxDirective = TextBoxDirective_1 = class TextBoxDirective {\n  constructor(renderer, inputElement, ngZone) {\n    this.renderer = renderer;\n    this.inputElement = inputElement;\n    this.ngZone = ngZone;\n    this.hostClass = true;\n    /**\n     * @hidden\n     */\n\n    this.onFocus = new EventEmitter();\n    /**\n     * @hidden\n     */\n\n    this.onBlur = new EventEmitter();\n    /**\n     * @hidden\n     */\n\n    this.onValueChange = new EventEmitter();\n    /**\n     * @hidden\n     */\n\n    this.autoFillStart = new EventEmitter();\n    /**\n     * @hidden\n     */\n\n    this.autoFillEnd = new EventEmitter();\n    this.listeners = [];\n  }\n  /**\n   * @hidden\n   */\n\n\n  set value(text) {\n    if (!this.inputElement) {\n      return;\n    }\n\n    this.inputElement.nativeElement.value = text === undefined || text === null ? '' : text;\n    this.onValueChange.emit();\n  }\n  /**\n   * @hidden\n   */\n\n\n  get value() {\n    return this.inputElement.nativeElement.value;\n  }\n\n  get id() {\n    return this.inputElement.nativeElement.id;\n  }\n\n  set id(id) {\n    this.renderer.setAttribute(this.inputElement.nativeElement, 'id', id);\n  }\n\n  ngAfterViewInit() {\n    const input = this.inputElement.nativeElement;\n    this.listeners = [this.renderer.listen(input, 'focus', () => this.onFocus.emit()), this.renderer.listen(input, 'blur', () => this.onBlur.emit())];\n    this.ngZone.runOutsideAngular(() => {\n      this.renderer.listen(input, 'animationstart', e => {\n        if (e.animationName === 'autoFillStart') {\n          this.autoFillStart.emit();\n        } else if (e.animationName === 'autoFillEnd') {\n          this.autoFillEnd.emit();\n        }\n      });\n    });\n  }\n\n  ngOnDestroy() {\n    this.listeners.forEach(listener => listener());\n  }\n\n};\n\nTextBoxDirective.ɵfac = function TextBoxDirective_Factory(t) {\n  return new (t || TextBoxDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone));\n};\n\nTextBoxDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n  type: TextBoxDirective,\n  selectors: [[\"input\", \"kendoTextBox\", \"\"]],\n  hostVars: 2,\n  hostBindings: function TextBoxDirective_HostBindings(rf, ctx) {\n    if (rf & 2) {\n      ɵngcc0.ɵɵclassProp(\"k-textbox\", ctx.hostClass);\n    }\n  },\n  inputs: {\n    value: \"value\"\n  },\n  features: [ɵngcc0.ɵɵProvidersFeature([{\n    provide: KendoInput,\n    useExisting: forwardRef(() => TextBoxDirective_1)\n  }])]\n});\n\n__decorate([HostBinding('class.k-textbox'), __metadata(\"design:type\", Boolean)], TextBoxDirective.prototype, \"hostClass\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [String])], TextBoxDirective.prototype, \"value\", null);\n\nTextBoxDirective = TextBoxDirective_1 = __decorate([__metadata(\"design:paramtypes\", [Renderer2, ElementRef, NgZone])], TextBoxDirective);\n/**\n * @hidden\n */\n\nconst createMaxValidator = maxValue => {\n  return c => {\n    if (!isPresent(maxValue) || !isPresent(c.value) || c.value <= maxValue) {\n      return null;\n    }\n\n    return {\n      maxError: {\n        maxValue: maxValue,\n        value: c.value\n      }\n    };\n  };\n};\n/**\n * @hidden\n */\n\n\nconst createMinValidator = minValue => {\n  return c => {\n    if (!isPresent(minValue) || !isPresent(c.value) || c.value >= minValue) {\n      return null;\n    }\n\n    return {\n      minError: {\n        minValue: minValue,\n        value: c.value\n      }\n    };\n  };\n};\n/**\n * @hidden\n */\n\n\nconst MIN_DOC_LINK = 'http://www.telerik.com/kendo-angular-ui/components/inputs/api/NumericTextBoxComponent/#toc-min';\n/**\n * @hidden\n */\n\nconst MAX_DOC_LINK = 'http://www.telerik.com/kendo-angular-ui/components/inputs/api/NumericTextBoxComponent/#toc-max';\n/**\n * @hidden\n */\n\nconst POINT = \".\";\n/**\n * @hidden\n */\n\nconst INITIAL_SPIN_DELAY = 500;\n/**\n * @hidden\n */\n\nconst SPIN_DELAY = 50;\n/**\n * @hidden\n */\n\nconst EXPONENT_REGEX = /[eE][\\-+]?([0-9]+)/;\n/**\n * @hidden\n */\n\nconst numericRegex = options => {\n  const {\n    autoCorrect,\n    decimals,\n    min\n  } = options;\n  let separator = options.separator;\n\n  if (separator === POINT) {\n    separator = '\\\\' + separator;\n  }\n\n  const signPattern = autoCorrect && min !== null && min >= 0 ? '' : '-?';\n  let numberPattern;\n\n  if (decimals === 0) {\n    numberPattern = '\\\\d*';\n  } else {\n    numberPattern = `(?:(?:\\\\d+(${separator}\\\\d*)?)|(?:${separator}\\\\d*))?`;\n  }\n\n  return new RegExp(`^${signPattern}${numberPattern}$`);\n};\n/**\n * @hidden\n */\n\n\nconst decimalPart = value => {\n  return value >= 0 ? Math.floor(value) : Math.ceil(value);\n};\n/**\n * @hidden\n */\n\n\nconst noop = _ => {}; // tslint:disable-line:no-empty\n\n/**\n * @hidden\n */\n\n\nconst defined = value => {\n  return typeof value !== 'undefined';\n};\n/**\n * @hidden\n */\n\n\nconst isNumber = value => {\n  return !isNaN(value) && value !== null;\n};\n/**\n * @hidden\n */\n\n\nfunction pad(value, digits) {\n  const count = digits - String(value).length;\n  let result = value;\n\n  if (count > 0) {\n    const padString = new Array(count + 1).join(\"0\");\n    result = parseFloat(value + padString);\n  }\n\n  return result;\n}\n/**\n * @hidden\n */\n\n\nconst getDeltaFromMouseWheel = e => {\n  let delta = 0;\n\n  if (e.wheelDelta) {\n    delta = e.wheelDelta / 120;\n    delta = delta > 0 ? Math.ceil(delta) : Math.floor(delta);\n  } else if (e.detail) {\n    delta = Math.round(-e.detail / 3);\n  }\n\n  return delta;\n};\n/**\n * @hidden\n */\n\n\nconst getCaretPosition = element => element.selectionStart;\n/**\n * @hidden\n */\n\n\nconst extractSignificantNumericChars = (formattedString, separator) => {\n  const significantCharacters = `${separator}0123456789-`;\n  return formattedString.split('').reduce((acc, curr) => significantCharacters.includes(curr) ? ++acc : acc, 0);\n};\n/**\n * @hidden\n */\n\n\nvar ArrowDirection = /*#__PURE__*/(() => {\n  (function (ArrowDirection) {\n    ArrowDirection[ArrowDirection[\"Down\"] = -1] = \"Down\";\n    ArrowDirection[ArrowDirection[\"None\"] = 0] = \"None\";\n    ArrowDirection[ArrowDirection[\"Up\"] = 1] = \"Up\";\n  })(ArrowDirection || (ArrowDirection = {}));\n\n  return ArrowDirection;\n})();\nvar NumericTextBoxComponent_1;\nconst PARSABLE_OPTIONS = ['min', 'max', 'step', 'decimals'];\nconst PARSABLE_DEFAULTS = {\n  decimals: null,\n  max: null,\n  min: null,\n  step: 1\n};\nconst FOCUSED$1 = 'k-state-focused';\nconst FORMATTED_VALUE = 'k-formatted-value';\n/**\n * Represents the [Kendo UI NumericTextBox component for Angular]({% slug overview_numerictextbox %}).\n */\n\nlet NumericTextBoxComponent = NumericTextBoxComponent_1 = class NumericTextBoxComponent {\n  constructor(intl, renderer, localizationService, injector, ngZone, changeDetector, hostElement) {\n    this.intl = intl;\n    this.renderer = renderer;\n    this.localizationService = localizationService;\n    this.injector = injector;\n    this.ngZone = ngZone;\n    this.changeDetector = changeDetector;\n    this.hostElement = hostElement;\n    /**\n     * @hidden\n     */\n\n    this.focusableId = `k-${guid()}`;\n    /**\n     * Determines whether the NumericTextBox is disabled ([see example]({% slug disabled_numerictextbox %})).\n     */\n\n    this.disabled = false;\n    /**\n     * Determines whether the NumericTextBox is in its read-only state ([see example]({% slug readonly_numerictextbox %})).\n     */\n\n    this.readonly = false;\n    /**\n     * Sets the title of the `input` element of the NumericTextBox.\n     */\n\n    this.title = '';\n    /**\n     * Specifies whether the value will be auto-corrected based on the minimum and maximum values\n     * ([see example]({% slug precision_numerictextbox %})).\n     */\n\n    this.autoCorrect = false;\n    /**\n     * Specifies the number of decimals that the user can enter when the input is focused\n     * ([see example]({% slug precision_numerictextbox %})).\n     */\n\n    this.decimals = null;\n    /**\n     * Specifies the value that is used to increment or decrement the component value\n     * ([see example]({% slug predefinedsteps_numerictextbox %})).\n     */\n\n    this.step = 1;\n    /**\n     * Specifies whether the **Up** and **Down** spin buttons will be rendered\n     * ([see example]({% slug spinbuttons_numerictextbox %})).\n     */\n\n    this.spinners = true;\n    /**\n     * Determines whether the built-in minimum or maximum validators are enforced when a form is validated.\n     *\n     * > The 4.2.0 Angular version introduces the `min` and `max` validation directives. As a result, even if you set `rangeValidation`\n     * to `false`, the built-in Angular validators will be executed.\n     */\n\n    this.rangeValidation = true;\n    /**\n     * Specifies the [tabindex](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex) of the component.\n     */\n\n    this.tabindex = 0;\n    /**\n     * Determines whether the value of the NumericTextBox will be changed via scrolling. Defaults to `true`.\n     *\n     * @default true\n     */\n\n    this.changeValueOnScroll = true;\n    /**\n     * Determines whether the whole value will be selected when the NumericTextBox is clicked. Defaults to `true`.\n     */\n\n    this.selectOnFocus = true;\n    /**\n     * Specifies the value of the NumericTextBox\n     * ([see example]({% slug formats_numerictextbox %})).\n     */\n\n    this.value = null;\n    /**\n     * Fires each time the user selects a new value ([see example]({% slug overview_numerictextbox %}#toc-events)).\n     */\n\n    this.valueChange = new EventEmitter();\n    /**\n     * Fires each time the user focuses the `input` element ([see example]({% slug overview_numerictextbox %}#toc-events)).\n     */\n\n    this.onFocus = new EventEmitter();\n    /**\n     * Fires each time the `input` element gets blurred ([see example]({% slug overview_numerictextbox %}#toc-events)).\n     */\n\n    this.onBlur = new EventEmitter();\n    /**\n     * @hidden\n     */\n\n    this.ArrowDirection = ArrowDirection;\n    /**\n     * @hidden\n     */\n\n    this.arrowDirection = ArrowDirection.None;\n    this.inputValue = '';\n    this.minValidateFn = noop;\n    this.maxValidateFn = noop;\n    this._format = \"n2\";\n    this.isPasted = false;\n    this.mouseDown = false;\n    this.ngChange = noop;\n    this.ngTouched = noop;\n    this.ngValidatorChange = noop;\n    /**\n     * @hidden\n     */\n\n    this.increasePress = e => {\n      this.arrowPress(ArrowDirection.Up, e);\n    };\n    /**\n     * @hidden\n     */\n\n\n    this.decreasePress = e => {\n      this.arrowPress(ArrowDirection.Down, e);\n    };\n    /**\n     * @hidden\n     */\n\n\n    this.releaseArrow = () => {\n      clearTimeout(this.spinTimeout);\n\n      if (this.arrowDirection !== ArrowDirection.None) {\n        this.arrowDirection = ArrowDirection.None;\n        this.changeDetector.detectChanges();\n      }\n    };\n    /**\n     * @hidden\n     */\n\n\n    this.handlePaste = () => {\n      this.isPasted = true;\n    };\n    /**\n     * @hidden\n     */\n\n\n    this.handleInput = () => {\n      const input = this.numericInput.nativeElement;\n      let {\n        selectionStart,\n        selectionEnd,\n        value: inputValue\n      } = input;\n\n      if (this.pressedKey === Keys.NumpadDecimal) {\n        inputValue = this.replaceNumpadDotValue();\n      }\n\n      if (this.isPasted) {\n        inputValue = this.formatInputValue(this.intl.parseNumber(inputValue));\n      }\n\n      if (!this.isValid(inputValue)) {\n        input.value = this.inputValue;\n        this.setSelection(selectionStart - 1, selectionEnd - 1);\n        return;\n      }\n\n      const parsedValue = this.intl.parseNumber(inputValue);\n      let value = this.restrictDecimals(parsedValue);\n\n      if (this.autoCorrect) {\n        const limited = this.limitInputValue(value);\n        value = limited.value;\n        selectionStart = limited.selectionStart;\n        selectionEnd = limited.selectionEnd;\n      }\n\n      if (parsedValue !== value || this.hasTrailingZeros(inputValue) || !this.focused) {\n        this.setInputValue(value);\n        this.setSelection(selectionStart, selectionEnd);\n      } else {\n        this.inputValue = inputValue;\n      }\n\n      if (this.isPasted) {\n        input.value = this.inputValue;\n      }\n\n      this.updateValue(value);\n      this.previousSelection = null;\n      this.isPasted = false;\n    };\n    /**\n     * @hidden\n     */\n\n\n    this.handleDragEnter = () => {\n      if (!this.focused && !this.isDisabled) {\n        this.setInputValue(this.value, true);\n      }\n    };\n    /**\n     * @hidden\n     */\n\n\n    this.handleMouseDown = () => {\n      this.mouseDown = true;\n    };\n    /**\n     * @hidden\n     */\n\n\n    this.handleFocus = () => {\n      if (!this.focused) {\n        this.focused = true;\n\n        if (!this.isDisabled) {\n          const shouldSelectAll = this.selectOnFocus || !this.mouseDown;\n          this.ngZone.runOutsideAngular(() => {\n            setTimeout(() => {\n              if (shouldSelectAll) {\n                this.selectAll();\n              } else {\n                this.selectCaret();\n              }\n            }, 0);\n          });\n        }\n      }\n\n      this.mouseDown = false;\n\n      if (hasObservers(this.onFocus)) {\n        this.ngZone.run(() => {\n          this.onFocus.emit();\n        });\n      }\n    };\n    /**\n     * @hidden\n     */\n\n\n    this.handleBlur = () => {\n      this.changeDetector.markForCheck();\n      this.focused = false; //blur is thrown before input when dragging the input text in IE\n\n      if (this.inputValue !== this.elementValue) {\n        this.handleInput();\n      }\n\n      this.setInputValue();\n\n      if (hasObservers(this.onBlur) || requiresZoneOnBlur(this.control)) {\n        this.ngZone.run(() => {\n          this.ngTouched();\n          this.onBlur.emit();\n        });\n      }\n    };\n    /**\n     * @hidden\n     */\n\n\n    this.handleKeyDown = e => {\n      if (this.isDisabled) {\n        return;\n      }\n\n      let step;\n\n      if (e.keyCode === Keys.ArrowDown) {\n        step = -1;\n      } else if (e.keyCode === Keys.ArrowUp) {\n        step = 1;\n      }\n\n      if (step && this.step) {\n        e.preventDefault();\n        this.addStep(step);\n      }\n\n      const input = this.numericInput.nativeElement;\n      this.previousSelection = {\n        end: input.selectionEnd,\n        start: input.selectionStart\n      };\n      this.pressedKey = e.keyCode;\n    };\n    /**\n     * @hidden\n     */\n\n\n    this.handleWheel = e => {\n      if (this.focused && !this.isDisabled && this.changeValueOnScroll) {\n        e.preventDefault();\n        const delta = getDeltaFromMouseWheel(e);\n        this.addStep(delta);\n      }\n    };\n\n    validatePackage(packageMetadata);\n    this.direction = localizationService.rtl ? 'rtl' : 'ltr';\n  }\n  /**\n   * Specifies the number format which is used when the NumericTextBox is not focused\n   * ([see example]({% slug formats_numerictextbox %})).\n   * If `format` is set to `null` or `undefined`, the default format will be used.\n   */\n\n\n  get format() {\n    const format = this._format;\n    return format !== null && format !== undefined ? format : 'n2';\n  }\n\n  set format(value) {\n    this._format = value;\n  }\n  /**\n   * @hidden\n   */\n\n\n  set tabIndex(tabIndex) {\n    this.tabindex = tabIndex;\n  }\n\n  get tabIndex() {\n    return this.tabindex;\n  }\n\n  get widgetClasses() {\n    return true;\n  }\n\n  ngOnInit() {\n    this.subscriptions = this.localizationService.changes.subscribe(({\n      rtl\n    }) => {\n      this.direction = rtl ? 'rtl' : 'ltr';\n    });\n    this.subscriptions.add(this.intl.changes.subscribe(this.intlChange.bind(this)));\n\n    if (this.hostElement) {\n      this.renderer.removeAttribute(this.hostElement.nativeElement, \"tabindex\");\n    }\n\n    this.control = this.injector.get(NgControl, null);\n  }\n  /**\n   * @hidden\n   */\n\n\n  ngOnChanges(changes) {\n    if (anyChanged(PARSABLE_OPTIONS, changes, false)) {\n      this.parseOptions(PARSABLE_OPTIONS.filter(option => changes[option]));\n    }\n\n    this.verifySettings();\n\n    if (anyChanged(['min', 'max', 'rangeValidation'], changes, false)) {\n      this.minValidateFn = this.rangeValidation ? createMinValidator(this.min) : noop;\n      this.maxValidateFn = this.rangeValidation ? createMaxValidator(this.max) : noop;\n      this.ngValidatorChange();\n    }\n\n    if (anyChanged(['autoCorrect', 'decimals', 'min'], changes)) {\n      delete this.numericRegex;\n    }\n\n    if (anyChanged(['value', 'format'], changes, false)) {\n      this.verifyValue(this.value);\n      this.value = this.restrictModelValue(this.value);\n\n      if (!this.focused || this.intl.parseNumber(this.elementValue) !== this.value) {\n        this.setInputValue();\n      }\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  ngOnDestroy() {\n    if (this.subscriptions) {\n      this.subscriptions.unsubscribe();\n    }\n\n    clearTimeout(this.spinTimeout);\n  }\n  /**\n   * @hidden\n   */\n\n\n  validate(control) {\n    return this.minValidateFn(control) || this.maxValidateFn(control);\n  }\n  /**\n   * @hidden\n   */\n\n\n  registerOnValidatorChange(fn) {\n    this.ngValidatorChange = fn;\n  }\n  /**\n   * @hidden\n   */\n\n\n  writeValue(value) {\n    this.verifyValue(value);\n    let restrictedValue = this.restrictModelValue(value);\n    this.value = restrictedValue;\n    this.setInputValue();\n  }\n  /**\n   * @hidden\n   */\n\n\n  registerOnChange(fn) {\n    this.ngChange = fn;\n  }\n  /**\n   * @hidden\n   */\n\n\n  registerOnTouched(fn) {\n    this.ngTouched = fn;\n  }\n  /**\n   * @hidden\n   * Called when the status of the component changes to or from `disabled`.\n   * Depending on the value, it enables or disables the appropriate DOM element.\n   *\n   * @param isDisabled\n   */\n\n\n  setDisabledState(isDisabled) {\n    this.changeDetector.markForCheck();\n    this.disabled = isDisabled;\n  }\n  /**\n   * Focuses the NumericTextBox.\n   *\n   * @example\n   * ```ts-no-run\n   * _@Component({\n   * selector: 'my-app',\n   * template: `\n   *  <button (click)=\"numerictextbox.focus()\">Focus NumericTextBox</button>\n   *  <kendo-numerictextbox #numerictextbox></kendo-numerictextbox>\n   * `\n   * })\n   * class AppComponent { }\n   * ```\n   */\n\n\n  focus() {\n    invokeElementMethod(this.numericInput, 'focus');\n  }\n  /**\n   * Blurs the NumericTextBox.\n   */\n\n\n  blur() {\n    invokeElementMethod(this.numericInput, 'blur');\n  }\n  /**\n   * Notifies the `NumericTextBoxComponent` that the input value should be changed.\n   * Can be used to update the input after setting the component properties directly.\n   */\n\n\n  notifyValueChange() {\n    this.setInputValue();\n  }\n  /**\n   * @hidden\n   */\n\n\n  get incrementTitle() {\n    return this.localizationService.get('increment');\n  }\n  /**\n   * @hidden\n   */\n\n\n  get decrementTitle() {\n    return this.localizationService.get('decrement');\n  }\n\n  get decimalSeparator() {\n    const numberSymbols = this.intl.numberSymbols();\n    return numberSymbols.decimal;\n  }\n\n  get elementValue() {\n    return this.numericInput.nativeElement.value;\n  }\n\n  set elementValue(value) {\n    this.renderer.setProperty(this.numericInput.nativeElement, 'value', value);\n  }\n\n  get focused() {\n    return this.isFocused;\n  }\n\n  get hasDecimals() {\n    return this.decimals !== null && this.decimals >= 0;\n  }\n\n  set focused(value) {\n    if (this.isFocused !== value && this.numericWrap) {\n      const wrap = this.numericWrap.nativeElement;\n      const input = this.numericInput.nativeElement;\n\n      if (value) {\n        this.renderer.addClass(wrap, FOCUSED$1);\n\n        if (!this.isDisabled) {\n          this.renderer.removeClass(input, FORMATTED_VALUE);\n        }\n      } else {\n        this.renderer.removeClass(wrap, FOCUSED$1);\n        this.renderer.addClass(input, FORMATTED_VALUE);\n      }\n\n      this.isFocused = value;\n    }\n  }\n\n  get isDisabled() {\n    return this.disabled || this.readonly;\n  }\n\n  arrowPress(direction, e) {\n    e.preventDefault();\n\n    if (this.isDisabled) {\n      return;\n    }\n\n    if (!mobileOS) {\n      this.focused = true;\n      this.focus();\n    }\n\n    if (this.arrowDirection !== direction) {\n      this.arrowDirection = direction;\n      this.changeDetector.detectChanges();\n    }\n\n    if (this.step) {\n      this.spin(direction, INITIAL_SPIN_DELAY);\n    } else {\n      this.setInputValue();\n    }\n  }\n\n  updateValue(value) {\n    if (!areSame(this.value, value)) {\n      this.ngZone.run(() => {\n        this.value = value;\n        this.ngChange(value);\n        this.valueChange.emit(value);\n        this.changeDetector.markForCheck();\n      });\n    }\n  }\n\n  replaceNumpadDotValue() {\n    let value = this.inputValue || \"\";\n\n    if (this.previousSelection) {\n      const input = this.numericInput.nativeElement;\n      const {\n        selectionStart,\n        selectionEnd\n      } = input;\n      const {\n        start,\n        end\n      } = this.previousSelection;\n      input.value = value = value.substring(0, start) + this.decimalSeparator + value.substring(end);\n      this.setSelection(selectionStart, selectionEnd);\n    }\n\n    return value;\n  }\n\n  isValid(value) {\n    if (!this.numericRegex) {\n      this.numericRegex = numericRegex({\n        autoCorrect: this.autoCorrect,\n        decimals: this.decimals,\n        min: this.min,\n        separator: this.decimalSeparator\n      });\n    }\n\n    return this.numericRegex.test(value);\n  }\n\n  spin(step, timeout) {\n    clearTimeout(this.spinTimeout);\n    this.spinTimeout = window.setTimeout(() => {\n      this.spin(step, SPIN_DELAY);\n    }, timeout);\n    this.addStep(step);\n  }\n\n  addStep(step) {\n    let value = add(this.value || 0, this.step * step);\n    value = this.limitValue(value);\n    value = this.restrictDecimals(value);\n    this.setInputValue(value);\n    this.updateValue(value);\n  }\n\n  setSelection(start, end) {\n    if (this.focused) {\n      invokeElementMethod(this.numericInput, 'setSelectionRange', start, end);\n    }\n  }\n\n  limitValue(value) {\n    let result = value;\n\n    if (!this.isInRange(value)) {\n      if (isNumber(this.max) && value > this.max) {\n        result = this.max;\n      }\n\n      if (isNumber(this.min) && value < this.min) {\n        result = this.min;\n      }\n    }\n\n    return result;\n  }\n\n  limitInputValue(value) {\n    let {\n      selectionStart,\n      selectionEnd,\n      value: enteredValue\n    } = this.numericInput.nativeElement;\n    let limitedValue = value;\n    let selectToEnd = false;\n\n    if (!this.isInRange(value)) {\n      const lengthChange = enteredValue.length - String(this.inputValue).length;\n      const {\n        min,\n        max\n      } = this;\n      const hasMax = isNumber(max);\n      const hasMin = isNumber(min);\n      let padLimit, replaceNext;\n      let correctedValue = value;\n\n      if (selectionStart === 0 && this.inputValue.substr(1) === enteredValue) {\n        return {\n          selectionEnd: selectionEnd,\n          selectionStart: selectionStart,\n          value: null\n        };\n      }\n\n      if (hasMax && value > max) {\n        if (value > 0) {\n          replaceNext = true;\n        } else {\n          padLimit = max;\n        }\n      } else if (hasMin && value < min) {\n        if (value > 0) {\n          padLimit = min;\n        } else {\n          replaceNext = true;\n        }\n      }\n\n      if (padLimit) {\n        const paddedValue = this.tryPadValue(value, padLimit);\n\n        if (paddedValue && decimalPart(value) !== decimalPart(padLimit)) {\n          correctedValue = paddedValue;\n          selectToEnd = true;\n        }\n      } else if (replaceNext) {\n        if (this.inputValue && selectionStart !== enteredValue.length) {\n          correctedValue = parseFloat(enteredValue.substr(0, selectionStart) + enteredValue.substr(selectionStart + lengthChange));\n        }\n      }\n\n      limitedValue = this.limitValue(correctedValue);\n      selectToEnd = (selectToEnd || limitedValue !== correctedValue) && this.previousSelection && this.previousSelection.end - this.previousSelection.start + lengthChange > 0;\n    }\n\n    return {\n      selectionEnd: selectToEnd ? String(limitedValue).length : selectionEnd,\n      selectionStart: selectionStart,\n      value: limitedValue\n    };\n  }\n\n  tryPadValue(value, limit) {\n    const limitLength = String(Math.floor(limit)).length;\n    const zeroPadded = pad(value, limitLength);\n    const zeroPaddedNext = pad(value, limitLength + 1);\n    let result;\n\n    if (this.isInRange(zeroPadded)) {\n      result = zeroPadded;\n    } else if (this.isInRange(zeroPaddedNext)) {\n      result = zeroPaddedNext;\n    }\n\n    return result;\n  }\n\n  isInRange(value) {\n    return !isNumber(value) || (!isNumber(this.min) || this.min <= value) && (!isNumber(this.max) || value <= this.max);\n  }\n\n  restrictModelValue(value) {\n    let result = this.restrictDecimals(value, true);\n\n    if (this.autoCorrect && this.limitValue(result) !== result) {\n      result = null;\n    }\n\n    return result;\n  }\n\n  restrictDecimals(value, round) {\n    let result = value;\n\n    if (value && this.hasDecimals) {\n      const decimals = this.decimals;\n      const stringValue = String(value);\n\n      if (round || EXPONENT_REGEX.test(stringValue)) {\n        result = toFixedPrecision(value, decimals);\n      } else {\n        const parts = stringValue.split(POINT);\n        let fraction = parts[1];\n\n        if (fraction && fraction.length > decimals) {\n          fraction = fraction.substr(0, decimals);\n          result = parseFloat(`${parts[0]}${POINT}${fraction}`);\n        }\n      }\n    }\n\n    return result;\n  }\n\n  formatInputValue(value) {\n    let stringValue = String(value);\n    const exponentMatch = EXPONENT_REGEX.exec(stringValue);\n\n    if (exponentMatch) {\n      stringValue = value.toFixed(limitPrecision(parseInt(exponentMatch[1], 10)));\n    }\n\n    return stringValue.replace(POINT, this.decimalSeparator);\n  }\n\n  formatValue(value, focused) {\n    let formattedValue;\n\n    if (value === null || !defined(value) || value === '') {\n      formattedValue = '';\n    } else if (focused && !this.readonly) {\n      formattedValue = this.formatInputValue(value);\n    } else {\n      formattedValue = this.intl.formatNumber(value, this.format);\n    }\n\n    return formattedValue;\n  }\n\n  setInputValue(value = this.value, focused = this.focused) {\n    const formattedValue = this.formatValue(value, focused);\n    this.elementValue = formattedValue;\n    this.inputValue = formattedValue;\n  }\n\n  verifySettings() {\n    if (!isDevMode()) {\n      return;\n    }\n\n    if (this.min !== null && this.max !== null && this.min > this.max) {\n      throw new Error(`The max value should be bigger than the min. See ${MIN_DOC_LINK} and ${MAX_DOC_LINK}.`);\n    }\n  }\n\n  verifyValue(value) {\n    if (isDevMode() && value && typeof value !== 'number') {\n      throw new Error(`The NumericTextBox component requires value of type Number and ${JSON.stringify(value)} was set.`);\n    }\n  }\n\n  parseOptions(options) {\n    for (let idx = 0; idx < options.length; idx++) {\n      const name = options[idx];\n      const value = this[name];\n\n      if (typeof value === 'string') {\n        const parsed = parseFloat(value);\n        const valid = !isNaN(parsed);\n\n        if (isDevMode() && !valid && value !== '') {\n          throw new Error('The NumericTextBox component requires value of type Number or a String representing ' + `a number for the ${name} property and ${JSON.stringify(value)} was set.`);\n        }\n\n        this[name] = valid ? parsed : PARSABLE_DEFAULTS[name];\n      }\n    }\n  }\n\n  intlChange() {\n    delete this.numericRegex;\n\n    if (this.numericInput && (!this.focused || !this.isValid(this.elementValue))) {\n      this.setInputValue();\n    }\n  }\n\n  hasTrailingZeros(inputValue) {\n    if (this.hasDecimals && this.focused) {\n      const fraction = inputValue.split(this.decimalSeparator)[1];\n      return fraction && fraction.length > this.decimals && fraction.lastIndexOf('0') === fraction.length - 1;\n    }\n  }\n\n  selectAll() {\n    this.setInputValue();\n    this.setSelection(0, this.inputValue.length);\n  }\n\n  selectCaret() {\n    const caretPosition = getCaretPosition(this.numericInput.nativeElement);\n    const formattedValue = this.elementValue;\n    const partialValue = formattedValue.substring(0, caretPosition);\n    this.setInputValue();\n\n    if (partialValue.length) {\n      const significantCharsInFormattedValue = extractSignificantNumericChars(partialValue, this.decimalSeparator);\n      const adjustedSignificantChars = this.adjustSignificantChars(formattedValue, significantCharsInFormattedValue);\n      this.setSelection(adjustedSignificantChars, adjustedSignificantChars);\n    } else {\n      this.setSelection(0, 0);\n    }\n  }\n\n  numberOfLeadingZeroes(formattedValue) {\n    const separatorIndex = formattedValue.indexOf(this.decimalSeparator);\n    const matchedLeadingZeroes = formattedValue.match(/^[^1-9]*?(0+)/);\n\n    if (matchedLeadingZeroes) {\n      const lengthOfMatch = matchedLeadingZeroes[0].length;\n      const lengthOfLeadingZeroesMatch = matchedLeadingZeroes[1].length;\n      return lengthOfMatch === separatorIndex ? lengthOfLeadingZeroesMatch - 1 : lengthOfLeadingZeroesMatch;\n    }\n\n    return 0;\n  }\n\n  adjustSignificantChars(formattedValue, significantChars) {\n    const leadingZeroes = this.numberOfLeadingZeroes(formattedValue);\n\n    if (leadingZeroes > 0) {\n      return Math.max(0, significantChars - leadingZeroes);\n    }\n\n    return significantChars;\n  }\n\n};\n\nNumericTextBoxComponent.ɵfac = function NumericTextBoxComponent_Factory(t) {\n  return new (t || NumericTextBoxComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc4.IntlService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Injector), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef));\n};\n\nNumericTextBoxComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: NumericTextBoxComponent,\n  selectors: [[\"kendo-numerictextbox\"]],\n  viewQuery: function NumericTextBoxComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵviewQuery(_c27, 7);\n      ɵngcc0.ɵɵviewQuery(_c28, 7);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.numericInput = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.numericWrap = _t.first);\n    }\n  },\n  hostVars: 5,\n  hostBindings: function NumericTextBoxComponent_HostBindings(rf, ctx) {\n    if (rf & 2) {\n      ɵngcc0.ɵɵattribute(\"dir\", ctx.direction);\n      ɵngcc0.ɵɵclassProp(\"k-widget\", ctx.widgetClasses)(\"k-numerictextbox\", ctx.widgetClasses);\n    }\n  },\n  inputs: {\n    focusableId: \"focusableId\",\n    disabled: \"disabled\",\n    readonly: \"readonly\",\n    title: \"title\",\n    autoCorrect: \"autoCorrect\",\n    decimals: \"decimals\",\n    step: \"step\",\n    spinners: \"spinners\",\n    rangeValidation: \"rangeValidation\",\n    tabindex: \"tabindex\",\n    changeValueOnScroll: \"changeValueOnScroll\",\n    selectOnFocus: \"selectOnFocus\",\n    value: \"value\",\n    format: \"format\",\n    tabIndex: \"tabIndex\",\n    max: \"max\",\n    min: \"min\",\n    placeholder: \"placeholder\",\n    maxlength: \"maxlength\"\n  },\n  outputs: {\n    valueChange: \"valueChange\",\n    onFocus: \"focus\",\n    onBlur: \"blur\"\n  },\n  exportAs: [\"kendoNumericTextBox\"],\n  features: [ɵngcc0.ɵɵProvidersFeature([LocalizationService, {\n    provide: L10N_PREFIX,\n    useValue: 'kendo.numerictextbox'\n  }, {\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => NumericTextBoxComponent_1),\n    multi: true\n  }, {\n    provide: NG_VALIDATORS,\n    useExisting: forwardRef(() => NumericTextBoxComponent_1),\n    multi: true\n  }, {\n    provide: KendoInput,\n    useExisting: forwardRef(() => NumericTextBoxComponent_1)\n  }]), ɵngcc0.ɵɵNgOnChangesFeature],\n  decls: 6,\n  vars: 26,\n  consts: function () {\n    let i18n_29;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The title for the **Increment** button in the NumericTextBox\n       * @meaning kendo.numerictextbox.increment\n       */\n      const MSG_EXTERNAL_4467784268438010275$$DIST_FESM2015_INDEX_JS_30 = goog.getMsg(\"Increase value\");\n      i18n_29 = MSG_EXTERNAL_4467784268438010275$$DIST_FESM2015_INDEX_JS_30;\n    } else {\n      i18n_29 = $localize`:kendo.numerictextbox.increment|The title for the **Increment** button in the NumericTextBox␟0fc68540ffa04fdc246cf6cf8a1fed085f8b19a5␟4467784268438010275:Increase value`;\n    }\n\n    let i18n_31;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The title for the **Decrement** button in the NumericTextBox\n       * @meaning kendo.numerictextbox.decrement\n       */\n      const MSG_EXTERNAL_3960022057994897997$$DIST_FESM2015_INDEX_JS_32 = goog.getMsg(\"Decrease value\");\n      i18n_31 = MSG_EXTERNAL_3960022057994897997$$DIST_FESM2015_INDEX_JS_32;\n    } else {\n      i18n_31 = $localize`:kendo.numerictextbox.decrement|The title for the **Decrement** button in the NumericTextBox␟df4751834075bf970c77d0da2c960b4e19a6b0dd␟3960022057994897997:Decrease value`;\n    }\n\n    return [[\"kendoNumericTextBoxLocalizedMessages\", \"\", \"increment\", i18n_29, \"decrement\", i18n_31], [1, \"k-numeric-wrap\", 3, \"kendoEventsOutsideAngular\"], [\"numericWrap\", \"\"], [\"role\", \"spinbutton\", \"autocomplete\", \"off\", \"autocorrect\", \"off\", 1, \"k-input\", \"k-formatted-value\", 3, \"id\", \"tabindex\", \"disabled\", \"readonly\", \"kendoEventsOutsideAngular\"], [\"numericInput\", \"\"], [\"class\", \"k-select\", 3, \"kendoEventsOutsideAngular\", 4, \"ngIf\"], [1, \"k-select\", 3, \"kendoEventsOutsideAngular\"], [\"role\", \"button\", 1, \"k-link\", \"k-link-increase\", 3, \"kendoEventsOutsideAngular\", \"title\"], [1, \"k-icon\", \"k-i-arrow-n\"], [\"role\", \"button\", 1, \"k-link\", \"k-link-decrease\", 3, \"kendoEventsOutsideAngular\", \"title\"], [1, \"k-icon\", \"k-i-arrow-s\"]];\n  },\n  template: function NumericTextBoxComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵelementContainer(0, 0);\n      ɵngcc0.ɵɵelementStart(1, \"span\", 1, 2);\n      ɵngcc0.ɵɵelement(3, \"input\", 3, 4);\n      ɵngcc0.ɵɵtemplate(5, NumericTextBoxComponent_span_5_Template, 5, 18, \"span\", 5);\n      ɵngcc0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵclassProp(\"k-state-disabled\", ctx.disabled);\n      ɵngcc0.ɵɵproperty(\"kendoEventsOutsideAngular\", ɵngcc0.ɵɵpureFunction2(15, _c35, ctx.handleWheel, ctx.handleWheel));\n      ɵngcc0.ɵɵadvance(2);\n      ɵngcc0.ɵɵproperty(\"id\", ctx.focusableId)(\"tabindex\", ctx.tabIndex)(\"disabled\", ctx.disabled)(\"readonly\", ctx.readonly)(\"kendoEventsOutsideAngular\", ɵngcc0.ɵɵpureFunction7(18, _c36, ctx.handleMouseDown, ctx.handleDragEnter, ctx.handleKeyDown, ctx.handleInput, ctx.handleFocus, ctx.handleBlur, ctx.handlePaste));\n      ɵngcc0.ɵɵattribute(\"aria-valuemin\", ctx.min)(\"aria-valuemax\", ctx.max)(\"aria-valuenow\", ctx.value)(\"title\", ctx.title)(\"placeholder\", ctx.placeholder)(\"maxLength\", ctx.maxlength);\n      ɵngcc0.ɵɵadvance(2);\n      ɵngcc0.ɵɵproperty(\"ngIf\", ctx.spinners);\n    }\n  },\n  directives: function () {\n    return [LocalizedNumericTextBoxMessagesDirective, ɵngcc2.EventsOutsideAngularDirective, ɵngcc3.NgIf];\n  },\n  encapsulation: 2\n});\n\n__decorate([Input(), __metadata(\"design:type\", String)], NumericTextBoxComponent.prototype, \"focusableId\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], NumericTextBoxComponent.prototype, \"disabled\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], NumericTextBoxComponent.prototype, \"readonly\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], NumericTextBoxComponent.prototype, \"title\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], NumericTextBoxComponent.prototype, \"autoCorrect\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], NumericTextBoxComponent.prototype, \"format\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Number)], NumericTextBoxComponent.prototype, \"max\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Number)], NumericTextBoxComponent.prototype, \"min\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Number)], NumericTextBoxComponent.prototype, \"decimals\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], NumericTextBoxComponent.prototype, \"placeholder\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Number)], NumericTextBoxComponent.prototype, \"step\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], NumericTextBoxComponent.prototype, \"spinners\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], NumericTextBoxComponent.prototype, \"rangeValidation\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Number)], NumericTextBoxComponent.prototype, \"tabindex\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Number), __metadata(\"design:paramtypes\", [Number])], NumericTextBoxComponent.prototype, \"tabIndex\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], NumericTextBoxComponent.prototype, \"changeValueOnScroll\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], NumericTextBoxComponent.prototype, \"selectOnFocus\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Number)], NumericTextBoxComponent.prototype, \"value\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Number)], NumericTextBoxComponent.prototype, \"maxlength\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], NumericTextBoxComponent.prototype, \"valueChange\", void 0);\n\n__decorate([Output('focus'), __metadata(\"design:type\", EventEmitter)], NumericTextBoxComponent.prototype, \"onFocus\", void 0);\n\n__decorate([Output('blur'), __metadata(\"design:type\", EventEmitter)], NumericTextBoxComponent.prototype, \"onBlur\", void 0);\n\n__decorate([ViewChild('numericInput', {\n  static: true\n}), __metadata(\"design:type\", ElementRef)], NumericTextBoxComponent.prototype, \"numericInput\", void 0);\n\n__decorate([ViewChild('numericWrap', {\n  static: true\n}), __metadata(\"design:type\", ElementRef)], NumericTextBoxComponent.prototype, \"numericWrap\", void 0);\n\n__decorate([HostBinding('attr.dir'), __metadata(\"design:type\", String)], NumericTextBoxComponent.prototype, \"direction\", void 0);\n\n__decorate([HostBinding('class.k-widget'), HostBinding('class.k-numerictextbox'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], NumericTextBoxComponent.prototype, \"widgetClasses\", null);\n\nNumericTextBoxComponent = NumericTextBoxComponent_1 = __decorate([__metadata(\"design:paramtypes\", [IntlService, Renderer2, LocalizationService, Injector, NgZone, ChangeDetectorRef, ElementRef])], NumericTextBoxComponent);\n/**\n * @hidden\n */\n\nlet NumericTextBoxMessages = /*#__PURE__*/(() => {\n  class NumericTextBoxMessages extends ComponentMessages {}\n\n  NumericTextBoxMessages.ɵfac = /*@__PURE__*/function () {\n    let ɵNumericTextBoxMessages_BaseFactory;\n    return function NumericTextBoxMessages_Factory(t) {\n      return (ɵNumericTextBoxMessages_BaseFactory || (ɵNumericTextBoxMessages_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NumericTextBoxMessages)))(t || NumericTextBoxMessages);\n    };\n  }();\n\n  NumericTextBoxMessages.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NumericTextBoxMessages,\n    inputs: {\n      decrement: \"decrement\",\n      increment: \"increment\"\n    },\n    features: [ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", String)], NumericTextBoxMessages.prototype, \"decrement\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], NumericTextBoxMessages.prototype, \"increment\", void 0);\n\n  return NumericTextBoxMessages;\n})();\nvar NumericTextBoxCustomMessagesComponent_1;\n/**\n * Custom component messages override default component messages.\n */\n\nlet NumericTextBoxCustomMessagesComponent = NumericTextBoxCustomMessagesComponent_1 = class NumericTextBoxCustomMessagesComponent extends NumericTextBoxMessages {\n  constructor(service) {\n    super();\n    this.service = service;\n  }\n\n  get override() {\n    return true;\n  }\n\n};\n\nNumericTextBoxCustomMessagesComponent.ɵfac = function NumericTextBoxCustomMessagesComponent_Factory(t) {\n  return new (t || NumericTextBoxCustomMessagesComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService));\n};\n\nNumericTextBoxCustomMessagesComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: NumericTextBoxCustomMessagesComponent,\n  selectors: [[\"kendo-numerictextbox-messages\"]],\n  features: [ɵngcc0.ɵɵProvidersFeature([{\n    provide: NumericTextBoxMessages,\n    useExisting: forwardRef(() => NumericTextBoxCustomMessagesComponent_1) // tslint:disable-line:no-forward-ref\n\n  }]), ɵngcc0.ɵɵInheritDefinitionFeature],\n  decls: 0,\n  vars: 0,\n  template: function NumericTextBoxCustomMessagesComponent_Template(rf, ctx) {},\n  encapsulation: 2\n});\nNumericTextBoxCustomMessagesComponent = NumericTextBoxCustomMessagesComponent_1 = __decorate([__metadata(\"design:paramtypes\", [LocalizationService])], NumericTextBoxCustomMessagesComponent);\n/**\n * @hidden\n */\n\nvar ResultType = /*#__PURE__*/(() => {\n  (function (ResultType) {\n    ResultType[ResultType[\"Literal\"] = 0] = \"Literal\";\n    ResultType[ResultType[\"Mask\"] = 1] = \"Mask\";\n    ResultType[ResultType[\"Undefined\"] = 2] = \"Undefined\";\n  })(ResultType || (ResultType = {}));\n\n  return ResultType;\n})();\n\n/**\n * @hidden\n */\nclass Result {\n  constructor(value, rest, type = ResultType.Undefined) {\n    this.value = value;\n    this.rest = rest;\n    this.type = type;\n  } //map :: Functor f => f a ~> (a -> b) -> f b\n\n\n  map(fn) {\n    return new Result(fn(this.value), this.rest);\n  } //chain :: Chain m => m a ~> (a -> m b) -> m b\n\n\n  chain(fn) {\n    return fn(this.value, this.rest);\n  }\n\n  fold(s, _\n  /*we don't need it*/\n  ) {\n    return s(this.value, this.rest);\n  }\n\n  concat(r) {\n    return this.map((vs, _) => r.chain((v, __) => vs.concat([v])));\n  }\n\n  toString() {\n    return `Result({ value: '${this.value}', rest: ${this.rest} })`;\n  }\n\n}\n/**\n * @hidden\n */\n\n\nclass Stream {\n  constructor(input = [], control = []) {\n    this.input = input;\n    this.control = control;\n    this.inputCursor = 0;\n    this.controlCursor = 0;\n  }\n\n  eof() {\n    return this.inputCursor >= this.input.length;\n  } // Get the first value from the input.\n\n\n  next() {\n    return {\n      char: this.input[this.inputCursor++],\n      control: this.control[this.controlCursor++]\n    };\n  }\n\n  peek() {\n    return {\n      char: this.input[this.inputCursor],\n      control: this.control[this.controlCursor]\n    };\n  }\n\n  eat_input() {\n    this.inputCursor++;\n  }\n\n  eat_control() {\n    this.controlCursor++;\n  }\n\n  eat() {\n    this.inputCursor++;\n    this.controlCursor++;\n  }\n\n}\n\nconst toArray = value => (value || '').split('');\n\nconst ESCAPE_CHARACTER = '\\\\';\n/**\n * @hidden\n */\n\nclass Parser {\n  constructor(parse) {\n    this.parse = parse;\n  }\n\n  run(input, control = '') {\n    if (input instanceof Stream) {\n      return this.parse(input);\n    } else {\n      return this.parse(new Stream(toArray(input), toArray(control)));\n    }\n  } //map :: Functor f => f a ~> (a -> b) -> f b\n\n\n  map(f) {\n    return new Parser(stream => this.parse(stream).map(f));\n  } //chain :: Chain m => m a ~> (a -> m b) -> m b\n\n\n  chain(f) {\n    return new Parser(stream => this.parse(stream).chain((v, s) => f(v).run(s)));\n  }\n\n  isLiteral(c) {\n    return this.run(c).type === ResultType.Literal;\n  }\n\n}\n/**\n * @hidden\n */\n\n\nconst mask = ({\n  prompt,\n  promptPlaceholder\n}) => rule => new Parser(stream => {\n  while (!stream.eof()) {\n    const {\n      char,\n      control\n    } = stream.peek();\n\n    if (char === control && control === prompt) {\n      stream.eat();\n      return new Result(prompt, stream, ResultType.Mask);\n    }\n\n    if (rule.test(char)) {\n      stream.eat();\n      return new Result(char, stream, ResultType.Mask);\n    }\n\n    if (char === promptPlaceholder) {\n      stream.eat();\n      return new Result(prompt, stream, ResultType.Mask);\n    }\n\n    stream.eat_input();\n  }\n\n  stream.eat();\n  return new Result(prompt, stream, ResultType.Mask);\n});\n/**\n * @hidden\n */\n\n\nconst literal = _token => new Parser(stream => {\n  //    let {char, control} = stream.peek();\n  let char = stream.peek().char;\n\n  if (char === _token) {\n    stream.eat();\n    return new Result(_token, stream, ResultType.Literal);\n  } //    if (control === _token) {\n  //        while (!stream.eof() && char !== _token) {\n  //            stream.eat_input();\n  //            char = stream.peek().char;\n  //        }\n  //    }\n  //\n  //    if (control !== undefined) {\n  //        stream.eat();\n  //    }\n\n\n  return new Result(_token, stream, ResultType.Literal);\n});\n/**\n * @hidden\n */\n\n\nconst unmask = prompt => rule => new Parser(stream => {\n  while (!stream.eof()) {\n    const {\n      char,\n      control\n    } = stream.peek();\n\n    if (char === prompt && control === prompt) {\n      stream.eat();\n      return new Result(char, stream);\n    }\n\n    if (rule.test(char)) {\n      stream.eat();\n      return new Result(char, stream);\n    }\n\n    stream.eat_input();\n  }\n\n  stream.eat();\n  return new Result('', stream);\n});\n/**\n * @hidden\n */\n\n\nconst unliteral = _token => new Parser(stream => {\n  if (stream.eof()) {\n    return new Result('', stream);\n  }\n\n  const {\n    char\n  } = stream.peek();\n\n  if (char === _token) {\n    stream.eat();\n  }\n\n  return new Result(_token, stream);\n});\n/**\n * @hidden\n */\n\n\nconst token = (rules, creator) => new Parser(stream => {\n  let {\n    char\n  } = stream.next();\n  const rule = rules[char];\n\n  if (char === ESCAPE_CHARACTER) {\n    char = stream.next().char;\n    return new Result(creator.literal(char), stream);\n  }\n\n  if (!rule) {\n    return new Result(creator.literal(char), stream);\n  }\n\n  return new Result(creator.mask(rule), stream);\n});\n/**\n * @hidden\n */\n\n\nconst rawMask = ({\n  prompt,\n  promptPlaceholder\n}) => new Parser(stream => {\n  let {\n    char\n  } = stream.next();\n\n  if (char === prompt) {\n    return new Result(promptPlaceholder, stream);\n  }\n\n  return new Result(char, stream);\n});\n/**\n * @hidden\n */\n\n\nconst rawLiteral = includeLiterals => new Parser(stream => {\n  let {\n    char\n  } = stream.next();\n\n  if (includeLiterals) {\n    return new Result(char, stream);\n  }\n\n  return new Result('', stream);\n});\n/**\n * @hidden\n */\n\n\nconst always = value => new Parser(stream => new Result(value, stream));\n/**\n * @hidden\n */\n\n\nconst append = (p1, p2) => p1.chain(vs => p2.map(v => vs.concat([v])));\n/**\n * @hidden\n */\n\n\nconst sequence = list => list.reduce((acc, parser) => append(acc, parser), always([]));\n/**\n * @hidden\n */\n\n\nconst greedy = parser => new Parser(stream => {\n  let result = new Result([], stream);\n\n  while (!stream.eof()) {\n    result = result.concat(parser.run(stream));\n  }\n\n  return result;\n});\n/**\n * @hidden\n */\n\n\nlet MaskingService = /*#__PURE__*/(() => {\n  let MaskingService = class MaskingService {\n    /**\n     * @hidden\n     */\n    constructor() {\n      this.rules = {};\n      this.prompt = \"_\";\n      this.mask = \"\";\n      this.promptPlaceholder = \" \";\n      this.includeLiterals = false;\n      this.maskTokens = [];\n      this.unmaskTokens = [];\n      this.rawTokens = [];\n      this.validationTokens = [];\n    }\n\n    update({\n      mask: mask$$1 = '',\n      prompt = '',\n      promptPlaceholder = ' ',\n      rules = {},\n      includeLiterals = false\n    }) {\n      this.mask = mask$$1;\n      this.prompt = prompt;\n      this.promptPlaceholder = promptPlaceholder;\n      this.rules = rules;\n      this.includeLiterals = includeLiterals;\n      this.tokenize();\n    }\n\n    validationValue(maskedValue = '') {\n      let value = maskedValue;\n      sequence(this.validationTokens).run(maskedValue).fold(unmasked => {\n        value = unmasked.join('');\n      });\n      return value;\n    }\n\n    rawValue(maskedValue = '') {\n      let value = maskedValue;\n\n      if (!this.rawTokens.length) {\n        return value;\n      }\n\n      sequence(this.rawTokens).run(maskedValue).fold(unmasked => {\n        value = unmasked.join('');\n      });\n      return value;\n    }\n    /**\n     * @hidden\n     */\n\n\n    maskRaw(rawValue = '') {\n      let value = rawValue;\n\n      if (!this.maskTokens.length) {\n        return value;\n      }\n\n      sequence(this.maskTokens).run(rawValue).fold(masked => {\n        value = masked.join('');\n      });\n      return value;\n    }\n\n    maskInput(input, control, splitPoint) {\n      if (input.length < control.length) {\n        return this.maskRemoved(input, control, splitPoint);\n      }\n\n      return this.maskInserted(input, control, splitPoint);\n    }\n\n    maskInRange(pasted, oldValue, start, end) {\n      let value = '';\n      let selection = end;\n      const beforeChange = oldValue.split('').slice(0, start);\n      const afterChange = oldValue.split('').slice(end);\n      sequence(this.maskTokens.slice(start, end)).run(pasted).fold(masked => {\n        value = beforeChange.concat(masked).concat(afterChange).join('');\n      });\n      return {\n        selection,\n        value\n      };\n    }\n\n    maskRemoved(input, control, splitPoint) {\n      let value = '';\n      let selection = splitPoint;\n      const unchanged = input.split('').slice(splitPoint);\n      const changed = input.split('').slice(0, splitPoint).join('');\n      const take$$1 = this.maskTokens.length - (input.length - splitPoint);\n      sequence(this.maskTokens.slice(0, take$$1)).run(changed, control).fold(masked => {\n        selection = this.adjustPosition(masked, selection);\n        value = masked.concat(unchanged).join('');\n      });\n      return {\n        selection,\n        value\n      };\n    }\n\n    adjustPosition(input, selection) {\n      const caretChar = input[selection];\n      const isLiteral = this.maskTokens[selection].isLiteral(caretChar);\n\n      if (!isLiteral && caretChar !== this.prompt) {\n        return selection + 1;\n      }\n\n      return selection;\n    }\n\n    maskInserted(input, control, splitPoint) {\n      let value = '';\n      let selection = splitPoint;\n      const changed = input.slice(0, splitPoint);\n      sequence(this.unmaskTokens).run(changed, control).chain(unmasked => {\n        selection = unmasked.join('').length;\n        const unchanged = control.slice(selection);\n        return sequence(this.maskTokens).run(unmasked.join('') + unchanged, control);\n      }).fold(masked => {\n        value = masked.join('');\n      });\n      return {\n        selection,\n        value\n      };\n    }\n\n    get maskTokenCreator() {\n      const {\n        prompt,\n        promptPlaceholder\n      } = this;\n      return {\n        literal: rule => literal(rule),\n        mask: rule => mask({\n          prompt,\n          promptPlaceholder\n        })(rule)\n      };\n    }\n\n    get unmaskTokenCreator() {\n      return {\n        literal: rule => unliteral(rule),\n        mask: rule => unmask(this.prompt)(rule)\n      };\n    }\n\n    get rawTokenCreator() {\n      const {\n        prompt,\n        promptPlaceholder,\n        includeLiterals\n      } = this;\n      return {\n        literal: _ => rawLiteral(includeLiterals),\n        mask: _ => rawMask({\n          prompt,\n          promptPlaceholder\n        })\n      };\n    }\n\n    get validationTokenCreator() {\n      const {\n        prompt\n      } = this;\n      return {\n        literal: _ => rawLiteral(false),\n        mask: _ => rawMask({\n          prompt,\n          promptPlaceholder: ''\n        })\n      };\n    }\n\n    tokenize() {\n      greedy(token(this.rules, this.maskTokenCreator)).run(this.mask).fold((tokens, _) => {\n        this.maskTokens = tokens;\n      });\n      greedy(token(this.rules, this.unmaskTokenCreator)).run(this.mask).fold((tokens, _) => {\n        this.unmaskTokens = tokens;\n      });\n      greedy(token(this.rules, this.rawTokenCreator)).run(this.mask).fold((tokens, _) => {\n        this.rawTokens = tokens;\n      });\n      greedy(token(this.rules, this.validationTokenCreator)).run(this.mask).fold((tokens, _) => {\n        this.validationTokens = tokens;\n      });\n    }\n\n  };\n\n  MaskingService.ɵfac = function MaskingService_Factory(t) {\n    return new (t || MaskingService)();\n  };\n\n  MaskingService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: MaskingService,\n    factory: function (t) {\n      return MaskingService.ɵfac(t);\n    }\n  });\n  return MaskingService;\n})();\nvar MaskedTextBoxComponent_1;\nconst resolvedPromise = Promise.resolve(null);\nconst FOCUSED$2 = 'k-state-focused';\n/**\n * Represents the [Kendo UI MaskedTextBox component for Angular]({% slug overview_maskedtextbox %}).\n *\n * @example\n * ```ts-no-run\n *\n * _@Component({\n *     selector: 'my-app',\n *     template: `\n *      <kendo-maskedtextbox\n *          [mask]=\"mask\"\n *          [value]=\"value\">\n *      </kendo-maskedtextbox>\n *     `\n * })\n *\n * class AppComponent {\n *  public value: string = \"9580128055807792\";\n *  public mask: string = \"0000-0000-0000-0000\";\n * }\n * ```\n */\n\nlet MaskedTextBoxComponent = MaskedTextBoxComponent_1 = class MaskedTextBoxComponent {\n  constructor(service, renderer, hostElement, ngZone, injector, changeDetector, rtl) {\n    this.service = service;\n    this.renderer = renderer;\n    this.hostElement = hostElement;\n    this.ngZone = ngZone;\n    this.injector = injector;\n    this.changeDetector = changeDetector;\n    /**\n     * @hidden\n     */\n\n    this.focusableId = `k-${guid()}`;\n    /**\n     * Determines whether the MaskedTextBox is disabled ([see example]({% slug disabled_maskedtextbox %})).\n     */\n\n    this.disabled = false;\n    /**\n     * Determines whether the MaskedTextBox is in its read-only state ([see example]({% slug readonly_maskedtextbox %})).\n     */\n\n    this.readonly = false;\n    this.hostClasses = true;\n    /**\n     * Represents a prompt character for the masked value.\n     * @default `_`\n     */\n\n    this.prompt = '_';\n    /**\n     * Indicates a character which represents an empty position in the raw value.\n     * @default ' '\n     */\n\n    this.promptPlaceholder = ' ';\n    /**\n     * Indicates whether to include literals in the raw value  ([see example]({% slug value_maskedtextbox %})).\n     * @default false\n     */\n\n    this.includeLiterals = false;\n    /**\n     * Specifies if the mask should be shown on focus for empty value.\n     */\n\n    this.maskOnFocus = false;\n    /**\n     * Determines whether the built-in mask validator is enforced when a form is validated\n     * ([see example]({% slug validation_maskedtextbox %})).\n     * @default true\n     */\n\n    this.maskValidation = true;\n    /**\n     * Specifies the [tabindex](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex) of the component.\n     */\n\n    this.tabindex = 0;\n    /**\n     * Fires each time the user focuses the `input` element.\n     *\n     * > To wire the event programmatically, use the `onFocus` property.\n     *\n     * @example\n     * ```ts-no-run\n     * _@Component({\n     * selector: 'my-app',\n     * template: `\n     *  <kendo-maskedtextbox (focus)=\"handleFocus()\"></kendo-maskedtextbox>\n     * `\n     * })\n     * class AppComponent {\n     *   public handleFocus(): void {\n     *      console.log(\"Component is focused\");\n     *   }\n     * }\n     * ```\n     */\n\n    this.onFocus = new EventEmitter(); //tslint:disable-line:no-output-rename\n\n    /**\n     * Fires each time the `input` element gets blurred.\n     *\n     * > To wire the event programmatically, use the `onBlur` property.\n     *\n     * @example\n     * ```ts-no-run\n     * _@Component({\n     * selector: 'my-app',\n     * template: `\n     *  <kendo-maskedtextbox (blur)=\"handleBlur()\"></kendo-maskedtextbox>\n     * `\n     * })\n     * class AppComponent {\n     *   public handleBlur(): void {\n     *      console.log(\"Component is blurred\");\n     *   }\n     * }\n     * ```\n     */\n\n    this.onBlur = new EventEmitter(); //tslint:disable-line:no-output-rename\n\n    /**\n     * Fires each time the value changes.\n     */\n\n    this.valueChange = new EventEmitter();\n    this.focusClick = false;\n    this.defaultRules = {\n      \"#\": /[\\d\\s\\+\\-]/,\n      \"&\": /[\\S]/,\n      \"0\": /[\\d]/,\n      \"9\": /[\\d\\s]/,\n      \"?\": /[a-zA-Z\\s]/,\n      \"A\": /[a-zA-Z0-9]/,\n      \"C\": /./,\n      \"L\": /[a-zA-Z]/,\n      \"a\": /[a-zA-Z0-9\\s]/\n    };\n    this.isPasted = false;\n    this.selection = [0, 0];\n    /**\n     * @hidden\n     */\n\n    this.handleFocus = () => {\n      this.focused = true;\n\n      if (this.maskOnFocus && this.emptyMask) {\n        this.updateInput(this.service.maskRaw(this.value));\n        this.ngZone.runOutsideAngular(() => {\n          setTimeout(() => {\n            this.setSelection(0, 0);\n          }, 0);\n        });\n      }\n\n      if (hasObservers(this.onFocus)) {\n        this.ngZone.run(() => {\n          this.onFocus.emit();\n        });\n      }\n    };\n    /**\n     * @hidden\n     */\n\n\n    this.handleClick = () => {\n      if (this.focused && !this.focusClick) {\n        this.focusClick = true;\n        const {\n          selectionStart,\n          selectionEnd\n        } = this.input.nativeElement;\n\n        if (selectionStart === selectionEnd) {\n          this.setFocusSelection();\n        }\n      }\n    };\n    /**\n     * @hidden\n     */\n\n\n    this.handleBlur = () => {\n      this.changeDetector.markForCheck();\n      this.focused = false;\n      this.focusClick = false;\n\n      if (this.maskOnFocus && this.emptyMask) {\n        this.updateInput(this.maskedValue);\n      }\n\n      if (hasObservers(this.onBlur) || requiresZoneOnBlur(this.control)) {\n        this.ngZone.run(() => {\n          this.onTouched();\n          this.onBlur.emit();\n        });\n      }\n    };\n\n    this.onChange = _ => {};\n\n    this.onTouched = () => {};\n\n    validatePackage(packageMetadata);\n    this.direction = rtl ? 'rtl' : 'ltr';\n    this.updateService();\n  }\n\n  get hostDisabledClass() {\n    return this.disabled;\n  }\n  /**\n   * Exposes the RegExp-based mask validation array ([see example]({% slug masks_maskedtextbox %})).\n   */\n\n\n  get rules() {\n    return this._rules || this.defaultRules;\n  }\n\n  set rules(value) {\n    this._rules = Object.assign({}, this.defaultRules, value);\n  }\n  /**\n   * @hidden\n   */\n\n\n  set tabIndex(tabIndex) {\n    this.tabindex = tabIndex;\n  }\n\n  get tabIndex() {\n    return this.tabindex;\n  }\n\n  ngOnInit() {\n    if (this.hostElement) {\n      this.renderer.removeAttribute(this.hostElement.nativeElement, \"tabindex\");\n    }\n\n    this.control = this.injector.get(NgControl, null);\n  }\n  /**\n   * @hidden\n   * Used by the TextBoxContainer to determine if the MaskedTextBox is empty.\n   */\n\n\n  isEmpty() {\n    if (this.input) {\n      return !Boolean(this.input.nativeElement.value);\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleDragDrop() {\n    return false;\n  }\n  /**\n   * Focuses the MaskedTextBox.\n   *\n   * @example\n   * ```ts-no-run\n   * _@Component({\n   * selector: 'my-app',\n   * template: `\n   *  <button (click)=\"maskedinput.focus()\">Focus the input</button>\n   *  <kendo-maskedtextbox #maskedinput></kendo-maskedtextbox>\n   * `\n   * })\n   * class AppComponent { }\n   * ```\n   */\n\n\n  focus() {\n    if (!this.input) {\n      return;\n    }\n\n    this.input.nativeElement.focus();\n    this.setFocusSelection();\n  }\n  /**\n   * Blurs the MaskedTextBox.\n   */\n\n\n  blur() {\n    if (!this.input) {\n      return;\n    }\n\n    this.input.nativeElement.blur();\n  }\n  /**\n   * @hidden\n   */\n\n\n  pasteHandler(e) {\n    const {\n      selectionStart,\n      selectionEnd\n    } = e.target;\n\n    if (selectionEnd === selectionStart) {\n      return;\n    }\n\n    this.isPasted = true;\n    this.selection = [selectionStart, selectionEnd];\n  }\n  /**\n   * @hidden\n   */\n\n\n  inputHandler(e) {\n    const value = e.target.value;\n    const [start, end] = this.selection;\n\n    if (!this.mask) {\n      this.updateValue(value);\n      this.isPasted = false;\n      return;\n    }\n\n    let result;\n\n    if (this.isPasted) {\n      this.isPasted = false;\n      const rightPart = this.maskedValue.length - end;\n      const to = value.length - rightPart;\n      result = this.service.maskInRange(value.slice(start, to), this.maskedValue, start, end);\n    } else {\n      result = this.service.maskInput(value, this.maskedValue, e.target.selectionStart);\n    }\n\n    this.updateInput(result.value, result.selection);\n    this.updateValue(result.value);\n  }\n  /**\n   * @hidden\n   */\n\n\n  ngOnChanges(changes) {\n    if (changes.value) {\n      this.value = this.normalizeValue();\n    }\n\n    if (!this.mask) {\n      this.updateInput(this.value);\n      return;\n    }\n\n    const next = this.extractChanges(changes);\n    this.updateService(next);\n\n    if (isChanged('value', changes)) {\n      const maskedValue = this.service.maskRaw(this.value);\n\n      if (maskedValue !== this.maskedValue) {\n        this.updateInput(maskedValue);\n      }\n    } else if (anyChanged(['promptPlaceholder', 'includeLiterals'], changes)) {\n      resolvedPromise.then(() => {\n        this.updateValue(this.maskedValue);\n      });\n    } else {\n      this.updateInput(this.service.maskRaw(this.value));\n    }\n  }\n  /**\n   * @hidden\n   * Writes a new value to the element.\n   */\n\n\n  writeValue(value) {\n    this.value = this.normalizeValue(value);\n    this.updateInput(this.service.maskRaw(this.value));\n  }\n  /**\n   * @hidden\n   * Sets the function that will be called when a `change` event is triggered.\n   */\n\n\n  registerOnChange(fn) {\n    this.onChange = fn;\n  }\n  /**\n   * @hidden\n   * Sets the function that will be called when a `touch` event is triggered.\n   */\n\n\n  registerOnTouched(fn) {\n    this.onTouched = fn;\n  }\n  /**\n   * @hidden\n   * Called when the status of the component changes to or from `disabled`.\n   * Depending on the value, it enables or disables the appropriate DOM element.\n   *\n   * @param isDisabled\n   */\n\n\n  setDisabledState(isDisabled) {\n    this.changeDetector.markForCheck();\n    this.disabled = isDisabled;\n  }\n  /**\n   * @hidden\n   */\n\n\n  validate(_) {\n    if (this.maskValidation === false || !this.mask) {\n      return null;\n    }\n\n    if (!this.service.validationValue(this.maskedValue)) {\n      return null;\n    }\n\n    if (this.maskedValue.indexOf(this.prompt) !== -1) {\n      return {\n        patternError: {\n          mask: this.mask,\n          maskedValue: this.maskedValue,\n          value: this.value\n        }\n      };\n    }\n\n    return null;\n  }\n  /**\n   * @hidden\n   */\n\n\n  updateValue(maskedValue) {\n    if (this.mask && !this.service.validationValue(maskedValue)) {\n      this.value = '';\n    } else {\n      this.value = this.service.rawValue(maskedValue);\n    }\n\n    this.onChange(this.value);\n    this.valueChange.emit(this.value);\n  }\n\n  updateInput(maskedValue = '', selection) {\n    this.maskedValue = maskedValue;\n    const value = this.maskOnFocus && !this.focused && this.emptyMask ? '' : maskedValue;\n    this.renderer.setProperty(this.input.nativeElement, \"value\", value);\n\n    if (selection !== undefined) {\n      this.setSelection(selection, selection);\n    }\n  }\n\n  extractChanges(changes) {\n    return Object.keys(changes).filter(key => key !== 'rules').reduce((obj, key) => {\n      obj[key] = changes[key].currentValue;\n      return obj;\n    }, {}); // tslint:disable-line:align\n  }\n\n  updateService(extra) {\n    const config = Object.assign({\n      includeLiterals: this.includeLiterals,\n      mask: this.mask,\n      prompt: this.prompt,\n      promptPlaceholder: this.promptPlaceholder,\n      rules: this.rules\n    }, extra); // tslint:disable-line:align\n\n    this.service.update(config);\n  }\n\n  setSelection(start = this.selection[0], end = this.selection[1]) {\n    if (this.focused) {\n      invokeElementMethod(this.input, 'setSelectionRange', start, end);\n    }\n  }\n\n  get emptyMask() {\n    return this.service.maskRaw() === this.maskedValue;\n  }\n\n  setFocusSelection() {\n    const selectionStart = this.input.nativeElement.selectionStart;\n    const index = this.maskedValue ? this.maskedValue.indexOf(this.prompt) : 0;\n\n    if (index >= 0 && index < selectionStart) {\n      this.selection = [index, index];\n      this.setSelection();\n    }\n  }\n\n  get focused() {\n    return this.isFocused;\n  }\n\n  set focused(value) {\n    if (this.isFocused !== value && this.hostElement) {\n      const element = this.hostElement.nativeElement;\n\n      if (value) {\n        this.renderer.addClass(element, FOCUSED$2);\n      } else {\n        this.renderer.removeClass(element, FOCUSED$2);\n      }\n\n      this.isFocused = value;\n    }\n  }\n\n  normalizeValue(value = this.value) {\n    const present = isPresent(value);\n\n    if (present && typeof value !== 'string') {\n      if (isDevMode()) {\n        throw new Error('The MaskedTextBox component supports only string values.');\n      }\n\n      return String(value);\n    }\n\n    return present ? value : '';\n  }\n\n};\n\nMaskedTextBoxComponent.ɵfac = function MaskedTextBoxComponent_Factory(t) {\n  return new (t || MaskedTextBoxComponent)(ɵngcc0.ɵɵdirectiveInject(MaskingService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Injector), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(RTL, 8));\n};\n\nMaskedTextBoxComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: MaskedTextBoxComponent,\n  selectors: [[\"kendo-maskedtextbox\"]],\n  viewQuery: function MaskedTextBoxComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵviewQuery(_c37, 7);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.input = _t.first);\n    }\n  },\n  hostVars: 7,\n  hostBindings: function MaskedTextBoxComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵlistener(\"paste\", function MaskedTextBoxComponent_paste_HostBindingHandler($event) {\n        return ctx.pasteHandler($event);\n      })(\"input\", function MaskedTextBoxComponent_input_HostBindingHandler($event) {\n        return ctx.inputHandler($event);\n      });\n    }\n\n    if (rf & 2) {\n      ɵngcc0.ɵɵattribute(\"dir\", ctx.direction);\n      ɵngcc0.ɵɵclassProp(\"k-widget\", ctx.hostClasses)(\"k-maskedtextbox\", ctx.hostClasses)(\"k-state-disabled\", ctx.hostDisabledClass);\n    }\n  },\n  inputs: {\n    focusableId: \"focusableId\",\n    disabled: \"disabled\",\n    readonly: \"readonly\",\n    prompt: \"prompt\",\n    promptPlaceholder: \"promptPlaceholder\",\n    includeLiterals: \"includeLiterals\",\n    maskOnFocus: \"maskOnFocus\",\n    maskValidation: \"maskValidation\",\n    tabindex: \"tabindex\",\n    rules: \"rules\",\n    tabIndex: \"tabIndex\",\n    value: \"value\",\n    title: \"title\",\n    mask: \"mask\"\n  },\n  outputs: {\n    onFocus: \"focus\",\n    onBlur: \"blur\",\n    valueChange: \"valueChange\"\n  },\n  exportAs: [\"kendoMaskedTextBox\"],\n  features: [ɵngcc0.ɵɵProvidersFeature([MaskingService, {\n    multi: true,\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => MaskedTextBoxComponent_1)\n    /* tslint:disable-line */\n\n  }, {\n    multi: true,\n    provide: NG_VALIDATORS,\n    useExisting: forwardRef(() => MaskedTextBoxComponent_1)\n    /* tslint:disable-line */\n\n  }, {\n    provide: KendoInput,\n    useExisting: forwardRef(() => MaskedTextBoxComponent_1)\n  }]), ɵngcc0.ɵɵNgOnChangesFeature],\n  decls: 2,\n  vars: 12,\n  consts: [[\"type\", \"text\", \"autocomplete\", \"off\", \"autocorrect\", \"off\", \"autocapitalize\", \"off\", \"spellcheck\", \"false\", 1, \"k-textbox\", 3, \"id\", \"tabindex\", \"disabled\", \"readonly\", \"kendoEventsOutsideAngular\"], [\"input\", \"\"]],\n  template: function MaskedTextBoxComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵelement(0, \"input\", 0, 1);\n    }\n\n    if (rf & 2) {\n      ɵngcc0.ɵɵproperty(\"id\", ctx.focusableId)(\"tabindex\", ctx.tabIndex)(\"disabled\", ctx.disabled)(\"readonly\", ctx.readonly)(\"kendoEventsOutsideAngular\", ɵngcc0.ɵɵpureFunction5(6, _c38, ctx.handleFocus, ctx.handleBlur, ctx.handleClick, ctx.handleDragDrop, ctx.handleDragDrop));\n      ɵngcc0.ɵɵattribute(\"title\", ctx.title);\n    }\n  },\n  directives: [ɵngcc2.EventsOutsideAngularDirective],\n  encapsulation: 2\n});\n\n__decorate([Input(), __metadata(\"design:type\", String)], MaskedTextBoxComponent.prototype, \"focusableId\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], MaskedTextBoxComponent.prototype, \"disabled\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], MaskedTextBoxComponent.prototype, \"readonly\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], MaskedTextBoxComponent.prototype, \"title\", void 0);\n\n__decorate([HostBinding('attr.dir'), __metadata(\"design:type\", String)], MaskedTextBoxComponent.prototype, \"direction\", void 0);\n\n__decorate([HostBinding('class.k-widget'), HostBinding('class.k-maskedtextbox'), __metadata(\"design:type\", Boolean)], MaskedTextBoxComponent.prototype, \"hostClasses\", void 0);\n\n__decorate([HostBinding('class.k-state-disabled'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], MaskedTextBoxComponent.prototype, \"hostDisabledClass\", null);\n\n__decorate([Input(), __metadata(\"design:type\", String)], MaskedTextBoxComponent.prototype, \"mask\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], MaskedTextBoxComponent.prototype, \"value\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], MaskedTextBoxComponent.prototype, \"rules\", null);\n\n__decorate([Input(), __metadata(\"design:type\", String)], MaskedTextBoxComponent.prototype, \"prompt\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], MaskedTextBoxComponent.prototype, \"promptPlaceholder\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], MaskedTextBoxComponent.prototype, \"includeLiterals\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], MaskedTextBoxComponent.prototype, \"maskOnFocus\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], MaskedTextBoxComponent.prototype, \"maskValidation\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Number)], MaskedTextBoxComponent.prototype, \"tabindex\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Number), __metadata(\"design:paramtypes\", [Number])], MaskedTextBoxComponent.prototype, \"tabIndex\", null);\n\n__decorate([Output('focus'), __metadata(\"design:type\", EventEmitter)], MaskedTextBoxComponent.prototype, \"onFocus\", void 0);\n\n__decorate([Output('blur'), __metadata(\"design:type\", EventEmitter)], MaskedTextBoxComponent.prototype, \"onBlur\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], MaskedTextBoxComponent.prototype, \"valueChange\", void 0);\n\n__decorate([ViewChild('input', {\n  static: true\n}), __metadata(\"design:type\", ElementRef)], MaskedTextBoxComponent.prototype, \"input\", void 0);\n\n__decorate([HostListener('paste', ['$event']), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Object]), __metadata(\"design:returntype\", void 0)], MaskedTextBoxComponent.prototype, \"pasteHandler\", null);\n\n__decorate([HostListener('input', ['$event']), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Object]), __metadata(\"design:returntype\", void 0)], MaskedTextBoxComponent.prototype, \"inputHandler\", null);\n\nMaskedTextBoxComponent = MaskedTextBoxComponent_1 = __decorate([__param(6, Optional()), __param(6, Inject(RTL)), __metadata(\"design:paramtypes\", [MaskingService, Renderer2, ElementRef, NgZone, Injector, ChangeDetectorRef, Boolean])], MaskedTextBoxComponent);\n/**\n * @hidden\n */\n\nclass SliderTick {\n  constructor(value) {\n    this.value = value;\n    this.classes = {\n      'k-tick': true\n    };\n  }\n\n}\n/**\n * @hidden\n */\n\n\nlet SliderTicksComponent = /*#__PURE__*/(() => {\n  let SliderTicksComponent = class SliderTicksComponent {\n    constructor(rtl) {\n      this.rtl = rtl;\n      this.wrapperClasses = 'k-reset k-slider-items';\n      this.ticks = [];\n    }\n\n    ngOnChanges(_) {\n      this.createTicks();\n    }\n\n    createTicks() {\n      const count = calculateTicksCount(this.min, this.max, this.step);\n      const largeStep = this.largeStep;\n      const tickValueProps = {\n        max: this.max,\n        min: this.min,\n        smallStep: this.step\n      };\n      let result = [];\n\n      for (let i = 0; i < count; i++) {\n        result.push(new SliderTick(calculateValueFromTick(i, tickValueProps)));\n\n        if (largeStep && i % largeStep === 0) {\n          result[i].large = true;\n          result[i].classes['k-tick-large'] = true;\n        }\n      }\n\n      if (this.rtl || this.vertical) {\n        result = result.reverse();\n      }\n\n      if (result.length > 0) {\n        Object.assign(result[0].classes, this.endTickClasses(true));\n        Object.assign(result[result.length - 1].classes, this.endTickClasses(false));\n      }\n\n      this.ticks = result;\n    }\n\n    endTickClasses(first) {\n      return {\n        'k-first': first && !this.vertical || !first && this.vertical,\n        'k-last': !first && !this.vertical || first && this.vertical\n      };\n    }\n\n  };\n\n  SliderTicksComponent.ɵfac = function SliderTicksComponent_Factory(t) {\n    return new (t || SliderTicksComponent)(ɵngcc0.ɵɵdirectiveInject(RTL, 8));\n  };\n\n  SliderTicksComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: SliderTicksComponent,\n    selectors: [[\"\", \"kendoSliderTicks\", \"\"]],\n    viewQuery: function SliderTicksComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c39, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.tickElements = _t);\n      }\n    },\n    hostVars: 2,\n    hostBindings: function SliderTicksComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassMap(ctx.wrapperClasses);\n      }\n    },\n    inputs: {\n      tickTitle: \"tickTitle\",\n      vertical: \"vertical\",\n      step: \"step\",\n      largeStep: \"largeStep\",\n      min: \"min\",\n      max: \"max\",\n      labelTemplate: \"labelTemplate\"\n    },\n    features: [ɵngcc0.ɵɵNgOnChangesFeature],\n    attrs: _c40,\n    decls: 3,\n    vars: 1,\n    consts: [[\"role\", \"presentation\", 3, \"ngClass\", \"title\", 4, \"ngFor\", \"ngForOf\"], [\"defaultLabel\", \"\"], [\"role\", \"presentation\", 3, \"ngClass\", \"title\"], [\"tickElement\", \"\"], [3, \"ngSwitch\"], [\"class\", \"k-label\", 4, \"ngSwitchCase\"], [4, \"ngSwitchCase\"], [1, \"k-label\"], [3, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"]],\n    template: function SliderTicksComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, SliderTicksComponent_li_0_Template, 5, 5, \"li\", 0);\n        ɵngcc0.ɵɵtemplate(1, SliderTicksComponent_ng_template_1_Template, 1, 1, \"ng-template\", null, 1, ɵngcc0.ɵɵtemplateRefExtractor);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.ticks);\n      }\n    },\n    directives: [ɵngcc3.NgForOf, ɵngcc3.NgClass, ɵngcc3.NgSwitch, ɵngcc3.NgSwitchCase, ɵngcc3.NgTemplateOutlet],\n    encapsulation: 2\n  });\n\n  __decorate([HostBinding('class'), __metadata(\"design:type\", String)], SliderTicksComponent.prototype, \"wrapperClasses\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Function)], SliderTicksComponent.prototype, \"tickTitle\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], SliderTicksComponent.prototype, \"vertical\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Number)], SliderTicksComponent.prototype, \"step\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Number)], SliderTicksComponent.prototype, \"largeStep\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Number)], SliderTicksComponent.prototype, \"min\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Number)], SliderTicksComponent.prototype, \"max\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", TemplateRef)], SliderTicksComponent.prototype, \"labelTemplate\", void 0);\n\n  __decorate([ViewChildren('tickElement'), __metadata(\"design:type\", QueryList)], SliderTicksComponent.prototype, \"tickElements\", void 0);\n\n  SliderTicksComponent = __decorate([__param(0, Optional()), __param(0, Inject(RTL)), __metadata(\"design:paramtypes\", [Boolean])], SliderTicksComponent);\n  /**\n   * @hidden\n   */\n\n  return SliderTicksComponent;\n})();\nlet SlidersCommonModule = /*#__PURE__*/(() => {\n  let SlidersCommonModule = class SlidersCommonModule {};\n\n  SlidersCommonModule.ɵfac = function SlidersCommonModule_Factory(t) {\n    return new (t || SlidersCommonModule)();\n  };\n\n  SlidersCommonModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: SlidersCommonModule\n  });\n  SlidersCommonModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule, DraggableModule, EventsModule, ResizeSensorModule], DraggableModule, EventsModule, ResizeSensorModule]\n  });\n  /**\n   * @hidden\n   */\n\n  return SlidersCommonModule;\n})();\nlet SliderMessages = /*#__PURE__*/(() => {\n  class SliderMessages extends ComponentMessages {}\n\n  SliderMessages.ɵfac = /*@__PURE__*/function () {\n    let ɵSliderMessages_BaseFactory;\n    return function SliderMessages_Factory(t) {\n      return (ɵSliderMessages_BaseFactory || (ɵSliderMessages_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(SliderMessages)))(t || SliderMessages);\n    };\n  }();\n\n  SliderMessages.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: SliderMessages,\n    inputs: {\n      decrement: \"decrement\",\n      increment: \"increment\",\n      dragHandle: \"dragHandle\"\n    },\n    features: [ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", String)], SliderMessages.prototype, \"decrement\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], SliderMessages.prototype, \"increment\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], SliderMessages.prototype, \"dragHandle\", void 0);\n\n  return SliderMessages;\n})();\nvar LocalizedSliderMessagesDirective_1;\n/**\n * @hidden\n */\n\nlet LocalizedSliderMessagesDirective = LocalizedSliderMessagesDirective_1 = class LocalizedSliderMessagesDirective extends SliderMessages {\n  constructor(service) {\n    super();\n    this.service = service;\n  }\n\n};\n\nLocalizedSliderMessagesDirective.ɵfac = function LocalizedSliderMessagesDirective_Factory(t) {\n  return new (t || LocalizedSliderMessagesDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService));\n};\n\nLocalizedSliderMessagesDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n  type: LocalizedSliderMessagesDirective,\n  selectors: [[\"\", \"kendoSliderLocalizedMessages\", \"\"]],\n  features: [ɵngcc0.ɵɵProvidersFeature([{\n    provide: SliderMessages,\n    useExisting: forwardRef(() => LocalizedSliderMessagesDirective_1) // tslint:disable-line:no-forward-ref\n\n  }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n});\nLocalizedSliderMessagesDirective = LocalizedSliderMessagesDirective_1 = __decorate([__metadata(\"design:paramtypes\", [LocalizationService])], LocalizedSliderMessagesDirective);\nvar SliderCustomMessagesComponent_1;\n/**\n * Custom component messages override default component messages.\n */\n\nlet SliderCustomMessagesComponent = SliderCustomMessagesComponent_1 = class SliderCustomMessagesComponent extends SliderMessages {\n  constructor(service) {\n    super();\n    this.service = service;\n  }\n\n  get override() {\n    return true;\n  }\n\n};\n\nSliderCustomMessagesComponent.ɵfac = function SliderCustomMessagesComponent_Factory(t) {\n  return new (t || SliderCustomMessagesComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService));\n};\n\nSliderCustomMessagesComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: SliderCustomMessagesComponent,\n  selectors: [[\"kendo-slider-messages\"]],\n  features: [ɵngcc0.ɵɵProvidersFeature([{\n    provide: SliderMessages,\n    useExisting: forwardRef(() => SliderCustomMessagesComponent_1) // tslint:disable-line:no-forward-ref\n\n  }]), ɵngcc0.ɵɵInheritDefinitionFeature],\n  decls: 0,\n  vars: 0,\n  template: function SliderCustomMessagesComponent_Template(rf, ctx) {},\n  encapsulation: 2\n});\nSliderCustomMessagesComponent = SliderCustomMessagesComponent_1 = __decorate([__metadata(\"design:paramtypes\", [LocalizationService])], SliderCustomMessagesComponent);\n/**\n * Represents the [NgModule]({{ site.data.urls.angular['ngmoduleapi'] }})\n * definition for the Slider component.\n *\n * @example\n *\n * ```ts-no-run\n * // Import the Inputs module\n * import { SliderModule } from '@progress/kendo-angular-inputs';\n *\n * // The browser platform with a compiler\n * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n * import { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n *\n * import { NgModule } from '@angular/core';\n *\n * // Import the app component\n * import { AppComponent } from './app.component';\n *\n * // Define the app module\n * _@NgModule({\n *     declarations: [AppComponent], // declare app component\n *     imports:      [BrowserModule, BrowserAnimationsModule, SliderModule], // import Slider module\n *     bootstrap:    [AppComponent]\n * })\n * export class AppModule {}\n *\n * // Compile and launch the module\n * platformBrowserDynamic().bootstrapModule(AppModule);\n *\n * ```\n */\n\nlet SliderModule = /*#__PURE__*/(() => {\n  let SliderModule = class SliderModule {};\n\n  SliderModule.ɵfac = function SliderModule_Factory(t) {\n    return new (t || SliderModule)();\n  };\n\n  SliderModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: SliderModule\n  });\n  SliderModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule, SlidersCommonModule]]\n  });\n  /**\n   * @hidden\n   */\n\n  return SliderModule;\n})();\nlet RangeSliderMessages = /*#__PURE__*/(() => {\n  class RangeSliderMessages extends ComponentMessages {}\n\n  RangeSliderMessages.ɵfac = /*@__PURE__*/function () {\n    let ɵRangeSliderMessages_BaseFactory;\n    return function RangeSliderMessages_Factory(t) {\n      return (ɵRangeSliderMessages_BaseFactory || (ɵRangeSliderMessages_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(RangeSliderMessages)))(t || RangeSliderMessages);\n    };\n  }();\n\n  RangeSliderMessages.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: RangeSliderMessages,\n    inputs: {\n      dragHandleStart: \"dragHandleStart\",\n      dragHandleEnd: \"dragHandleEnd\"\n    },\n    features: [ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", String)], RangeSliderMessages.prototype, \"dragHandleStart\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], RangeSliderMessages.prototype, \"dragHandleEnd\", void 0);\n\n  return RangeSliderMessages;\n})();\nvar LocalizedRangeSliderMessagesDirective_1;\n/**\n * @hidden\n */\n\nlet LocalizedRangeSliderMessagesDirective = LocalizedRangeSliderMessagesDirective_1 = class LocalizedRangeSliderMessagesDirective extends RangeSliderMessages {\n  constructor(service) {\n    super();\n    this.service = service;\n  }\n\n};\n\nLocalizedRangeSliderMessagesDirective.ɵfac = function LocalizedRangeSliderMessagesDirective_Factory(t) {\n  return new (t || LocalizedRangeSliderMessagesDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService));\n};\n\nLocalizedRangeSliderMessagesDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n  type: LocalizedRangeSliderMessagesDirective,\n  selectors: [[\"\", \"kendoSliderLocalizedMessages\", \"\"]],\n  features: [ɵngcc0.ɵɵProvidersFeature([{\n    provide: RangeSliderMessages,\n    useExisting: forwardRef(() => LocalizedRangeSliderMessagesDirective_1) // tslint:disable-line:no-forward-ref\n\n  }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n});\nLocalizedRangeSliderMessagesDirective = LocalizedRangeSliderMessagesDirective_1 = __decorate([__metadata(\"design:paramtypes\", [LocalizationService])], LocalizedRangeSliderMessagesDirective);\nvar RangeSliderCustomMessagesComponent_1;\n/**\n * Custom component messages override default component messages.\n */\n\nlet RangeSliderCustomMessagesComponent = RangeSliderCustomMessagesComponent_1 = class RangeSliderCustomMessagesComponent extends RangeSliderMessages {\n  constructor(service) {\n    super();\n    this.service = service;\n  }\n\n  get override() {\n    return true;\n  }\n\n};\n\nRangeSliderCustomMessagesComponent.ɵfac = function RangeSliderCustomMessagesComponent_Factory(t) {\n  return new (t || RangeSliderCustomMessagesComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService));\n};\n\nRangeSliderCustomMessagesComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: RangeSliderCustomMessagesComponent,\n  selectors: [[\"kendo-rangeslider-messages\"]],\n  features: [ɵngcc0.ɵɵProvidersFeature([{\n    provide: RangeSliderMessages,\n    useExisting: forwardRef(() => RangeSliderCustomMessagesComponent_1) // tslint:disable-line:no-forward-ref\n\n  }]), ɵngcc0.ɵɵInheritDefinitionFeature],\n  decls: 0,\n  vars: 0,\n  template: function RangeSliderCustomMessagesComponent_Template(rf, ctx) {},\n  encapsulation: 2\n});\nRangeSliderCustomMessagesComponent = RangeSliderCustomMessagesComponent_1 = __decorate([__metadata(\"design:paramtypes\", [LocalizationService])], RangeSliderCustomMessagesComponent);\n/**\n * Represents the [NgModule]({{ site.data.urls.angular['ngmoduleapi'] }})\n * definition for the RangeSlider component.\n *\n * @example\n *\n * ```ts-no-run\n * // Import the Inputs module\n * import { RangeSliderModule } from '@progress/kendo-angular-inputs';\n *\n * // The browser platform with a compiler\n * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n * import { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n *\n * import { NgModule } from '@angular/core';\n *\n * // Import the app component\n * import { AppComponent } from './app.component';\n *\n * // Define the app module\n * _@NgModule({\n *     declarations: [AppComponent], // declare app component\n *     imports:      [BrowserModule, BrowserAnimationsModule, RangeSliderModule], // import RangeSlider module\n *     bootstrap:    [AppComponent]\n * })\n * export class AppModule {}\n *\n * // Compile and launch the module\n * platformBrowserDynamic().bootstrapModule(AppModule);\n *\n * ```\n */\n\nlet RangeSliderModule = /*#__PURE__*/(() => {\n  let RangeSliderModule = class RangeSliderModule {};\n\n  RangeSliderModule.ɵfac = function RangeSliderModule_Factory(t) {\n    return new (t || RangeSliderModule)();\n  };\n\n  RangeSliderModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: RangeSliderModule\n  });\n  RangeSliderModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule, SlidersCommonModule]]\n  });\n  /**\n   * @hidden\n   */\n\n  return RangeSliderModule;\n})();\nlet Messages = /*#__PURE__*/(() => {\n  class Messages extends ComponentMessages {}\n\n  Messages.ɵfac = /*@__PURE__*/function () {\n    let ɵMessages_BaseFactory;\n    return function Messages_Factory(t) {\n      return (ɵMessages_BaseFactory || (ɵMessages_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(Messages)))(t || Messages);\n    };\n  }();\n\n  Messages.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: Messages,\n    inputs: {\n      on: \"on\",\n      off: \"off\"\n    },\n    features: [ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", String)], Messages.prototype, \"on\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], Messages.prototype, \"off\", void 0);\n\n  return Messages;\n})();\nvar LocalizedSwitchMessagesDirective_1;\n/**\n * @hidden\n */\n\nlet LocalizedSwitchMessagesDirective = LocalizedSwitchMessagesDirective_1 = class LocalizedSwitchMessagesDirective extends Messages {\n  constructor(service) {\n    super();\n    this.service = service;\n  }\n\n};\n\nLocalizedSwitchMessagesDirective.ɵfac = function LocalizedSwitchMessagesDirective_Factory(t) {\n  return new (t || LocalizedSwitchMessagesDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService));\n};\n\nLocalizedSwitchMessagesDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n  type: LocalizedSwitchMessagesDirective,\n  selectors: [[\"\", \"kendoSwitchLocalizedMessages\", \"\"]],\n  features: [ɵngcc0.ɵɵProvidersFeature([{\n    provide: Messages,\n    useExisting: forwardRef(() => LocalizedSwitchMessagesDirective_1) // tslint:disable-line:no-forward-ref\n\n  }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n});\nLocalizedSwitchMessagesDirective = LocalizedSwitchMessagesDirective_1 = __decorate([__metadata(\"design:paramtypes\", [LocalizationService])], LocalizedSwitchMessagesDirective);\nvar SwitchCustomMessagesComponent_1;\n/**\n * Custom component messages override default component messages.\n */\n\nlet SwitchCustomMessagesComponent = SwitchCustomMessagesComponent_1 = class SwitchCustomMessagesComponent extends Messages {\n  constructor(service) {\n    super();\n    this.service = service;\n  }\n\n  get override() {\n    return true;\n  }\n\n};\n\nSwitchCustomMessagesComponent.ɵfac = function SwitchCustomMessagesComponent_Factory(t) {\n  return new (t || SwitchCustomMessagesComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService));\n};\n\nSwitchCustomMessagesComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: SwitchCustomMessagesComponent,\n  selectors: [[\"kendo-switch-messages\"]],\n  features: [ɵngcc0.ɵɵProvidersFeature([{\n    provide: Messages,\n    useExisting: forwardRef(() => SwitchCustomMessagesComponent_1) // tslint:disable-line:no-forward-ref\n\n  }]), ɵngcc0.ɵɵInheritDefinitionFeature],\n  decls: 0,\n  vars: 0,\n  template: function SwitchCustomMessagesComponent_Template(rf, ctx) {},\n  encapsulation: 2\n});\nSwitchCustomMessagesComponent = SwitchCustomMessagesComponent_1 = __decorate([__metadata(\"design:paramtypes\", [LocalizationService])], SwitchCustomMessagesComponent);\n/**\n * Represents the [NgModule]({{ site.data.urls.angular['ngmoduleapi'] }})\n * definition for the Switch component.\n *\n * @example\n *\n * ```ts-no-run\n * // Import the Switch module\n * import { SwitchModule } from '@progress/kendo-angular-inputs';\n *\n * // The browser platform with a compiler\n * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n *\n * import { NgModule } from '@angular/core';\n *\n * // Import the app component\n * import { AppComponent } from './app.component';\n *\n * // Define the app module\n * _@NgModule({\n *     declarations: [AppComponent], // declare app component\n *     imports:      [BrowserModule, SwitchModule], // import Switch module\n *     bootstrap:    [AppComponent]\n * })\n * export class AppModule {}\n *\n * // Compile and launch the module\n * platformBrowserDynamic().bootstrapModule(AppModule);\n *\n * ```\n */\n\nlet SwitchModule = /*#__PURE__*/(() => {\n  let SwitchModule = class SwitchModule {};\n\n  SwitchModule.ɵfac = function SwitchModule_Factory(t) {\n    return new (t || SwitchModule)();\n  };\n\n  SwitchModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: SwitchModule\n  });\n  SwitchModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule, EventsModule, ResizeSensorModule]]\n  });\n  return SwitchModule;\n})();\nvar LocalizedNumericTextBoxMessagesDirective_1;\n/**\n * @hidden\n */\n\nlet LocalizedNumericTextBoxMessagesDirective = LocalizedNumericTextBoxMessagesDirective_1 = class LocalizedNumericTextBoxMessagesDirective extends NumericTextBoxMessages {\n  constructor(service) {\n    super();\n    this.service = service;\n  }\n\n};\n\nLocalizedNumericTextBoxMessagesDirective.ɵfac = function LocalizedNumericTextBoxMessagesDirective_Factory(t) {\n  return new (t || LocalizedNumericTextBoxMessagesDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService));\n};\n\nLocalizedNumericTextBoxMessagesDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n  type: LocalizedNumericTextBoxMessagesDirective,\n  selectors: [[\"\", \"kendoNumericTextBoxLocalizedMessages\", \"\"]],\n  features: [ɵngcc0.ɵɵProvidersFeature([{\n    provide: NumericTextBoxMessages,\n    useExisting: forwardRef(() => LocalizedNumericTextBoxMessagesDirective_1) // tslint:disable-line:no-forward-ref\n\n  }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n});\nLocalizedNumericTextBoxMessagesDirective = LocalizedNumericTextBoxMessagesDirective_1 = __decorate([__metadata(\"design:paramtypes\", [LocalizationService])], LocalizedNumericTextBoxMessagesDirective);\n/**\n * Represents the [NgModule]({{ site.data.urls.angular['ngmoduleapi'] }})\n * definition for the NumericTextBox component.\n *\n * @example\n *\n * ```ts-no-run\n * // Import the NumericTextBox module\n * import { NumericTextBoxModule } from '@progress/kendo-angular-inputs';\n *\n * // The browser platform with a compiler\n * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n *\n * import { NgModule } from '@angular/core';\n *\n * // Import the app component\n * import { AppComponent } from './app.component';\n *\n * // Define the app module\n * _@NgModule({\n *     declarations: [AppComponent], // declare app component\n *     imports:      [BrowserModule, NumericTextBoxModule], // import NumericTextBox module\n *     bootstrap:    [AppComponent]\n * })\n * export class AppModule {}\n *\n * // Compile and launch the module\n * platformBrowserDynamic().bootstrapModule(AppModule);\n *\n * ```\n */\n\nlet NumericTextBoxModule = /*#__PURE__*/(() => {\n  let NumericTextBoxModule = class NumericTextBoxModule {};\n\n  NumericTextBoxModule.ɵfac = function NumericTextBoxModule_Factory(t) {\n    return new (t || NumericTextBoxModule)();\n  };\n\n  NumericTextBoxModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NumericTextBoxModule\n  });\n  NumericTextBoxModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule, EventsModule]]\n  });\n  /**\n   * Represents the [NgModule]({{ site.data.urls.angular['ngmoduleapi'] }})\n   * definition for the MaskedTextBox component.\n   *\n   * @example\n   *\n   * ```ts-no-run\n   * // Import the MaskedTextBox module\n   * import { MaskedTextBoxModule } from '@progress/kendo-angular-inputs';\n   *\n   * // The browser platform with a compiler\n   * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n   *\n   * import { NgModule } from '@angular/core';\n   *\n   * // Import the app component\n   * import { AppComponent } from './app.component';\n   *\n   * // Define the app module\n   * _@NgModule({\n   *     declarations: [AppComponent], // declare app component\n   *     imports:      [BrowserModule, MaskedTextBoxModule], // import MaskedTextBox module\n   *     bootstrap:    [AppComponent]\n   * })\n   * export class AppModule {}\n   *\n   * // Compile and launch the module\n   * platformBrowserDynamic().bootstrapModule(AppModule);\n   *\n   * ```\n   */\n\n  return NumericTextBoxModule;\n})();\nlet MaskedTextBoxModule = /*#__PURE__*/(() => {\n  let MaskedTextBoxModule = class MaskedTextBoxModule {};\n\n  MaskedTextBoxModule.ɵfac = function MaskedTextBoxModule_Factory(t) {\n    return new (t || MaskedTextBoxModule)();\n  };\n\n  MaskedTextBoxModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: MaskedTextBoxModule\n  });\n  MaskedTextBoxModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule, EventsModule]]\n  });\n  /**\n   * Specifies the adornments in the suffix container ([see examples]({% slug adornments_textbox %}#toc-suffixadornments)).\n   *  @example\n   * ```ts-no-run\n   * _@Component({\n   * selector: 'my-app',\n   * template: `\n   *  <kendo-textbox>\n   *    <ng-template kendoTextBoxSuffixTemplate>\n   *        <button kendoButton look=\"clear\" icon=\"image\"></button>\n   *    </ng-template>\n   *  </kendo-textbox>\n   * `\n   * })\n   * class AppComponent {}\n   * ```\n   */\n\n  return MaskedTextBoxModule;\n})();\nlet TextBoxSuffixTemplateDirective = /*#__PURE__*/(() => {\n  let TextBoxSuffixTemplateDirective = class TextBoxSuffixTemplateDirective {\n    constructor(templateRef) {\n      this.templateRef = templateRef;\n    }\n\n  };\n\n  TextBoxSuffixTemplateDirective.ɵfac = function TextBoxSuffixTemplateDirective_Factory(t) {\n    return new (t || TextBoxSuffixTemplateDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef, 8));\n  };\n\n  TextBoxSuffixTemplateDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: TextBoxSuffixTemplateDirective,\n    selectors: [[\"\", \"kendoTextBoxSuffixTemplate\", \"\"]]\n  });\n  TextBoxSuffixTemplateDirective = __decorate([__param(0, Optional()), __metadata(\"design:paramtypes\", [TemplateRef])], TextBoxSuffixTemplateDirective);\n  /**\n   * Specifies the adornments in the prefix container ([see examples]({% slug adornments_textbox %}#toc-prefixadornments)).\n   * @example\n   * ```ts-no-run\n   * _@Component({\n   * selector: 'my-app',\n   * template: `\n   *  <kendo-textbox>\n   *    <ng-template kendoTextBoxPrefixTemplate>\n   *        <button kendoButton look=\"clear\" icon=\"image\"></button>\n   *    </ng-template>\n   *  </kendo-textbox>\n   * `\n   * })\n   * class AppComponent {}\n   * ```\n   */\n\n  return TextBoxSuffixTemplateDirective;\n})();\nlet TextBoxPrefixTemplateDirective = /*#__PURE__*/(() => {\n  let TextBoxPrefixTemplateDirective = class TextBoxPrefixTemplateDirective {\n    constructor(templateRef) {\n      this.templateRef = templateRef;\n    }\n\n  };\n\n  TextBoxPrefixTemplateDirective.ɵfac = function TextBoxPrefixTemplateDirective_Factory(t) {\n    return new (t || TextBoxPrefixTemplateDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef, 8));\n  };\n\n  TextBoxPrefixTemplateDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: TextBoxPrefixTemplateDirective,\n    selectors: [[\"\", \"kendoTextBoxPrefixTemplate\", \"\"]]\n  });\n  TextBoxPrefixTemplateDirective = __decorate([__param(0, Optional()), __metadata(\"design:paramtypes\", [TemplateRef])], TextBoxPrefixTemplateDirective);\n  return TextBoxPrefixTemplateDirective;\n})();\nvar TextBoxComponent_1;\nconst FOCUSED$3 = 'k-state-focused';\nlet TextBoxComponent = TextBoxComponent_1 = class TextBoxComponent {\n  constructor(localizationService, ngZone, changeDetector, renderer, injector, hostElement) {\n    this.localizationService = localizationService;\n    this.ngZone = ngZone;\n    this.changeDetector = changeDetector;\n    this.renderer = renderer;\n    this.injector = injector;\n    this.hostElement = hostElement;\n    /**\n     * @hidden\n     */\n\n    this.focusableId = `k-${guid()}`;\n    /**\n     * Sets the `title` attribute of the `input` element of the TextBox.\n     */\n\n    this.title = '';\n    /**\n     * Sets the disabled state of the component.\n     *\n     * @default false\n     */\n\n    this.disabled = false;\n    /**\n     * Sets the read-only state of the component.\n     *\n     * @default false\n     */\n\n    this.readonly = false;\n    /**\n     * Specifies the `tabindex` of the TextBox.\n     *\n     * @default 0\n     */\n\n    this.tabindex = 0;\n    /**\n     * Provides a value for the TextBox.\n     */\n\n    this.value = null;\n    /**\n     * Determines whether the whole value will be selected when the TextBox is clicked. Defaults to `false`.\n     *\n     * @default false\n     */\n\n    this.selectOnFocus = false;\n    /**\n     * Specifies when the Success icon will be shown ([see example]({% slug validation_textbox %})).\n     *\n     * The possible values are:\n     *\n     * `boolean`&mdash;The Success icon is displayed, if the condition given by the developer is met.\n     *\n     * `initial`&mdash;The Success icon will be displayed when the component state is neither `invalid` nor `touched` or `dirty`.\n     *\n     * @default false\n     */\n\n    this.showSuccessIcon = false;\n    /**\n     * Specifies when the Error icon will be shown ([see example]({% slug validation_textbox %})).\n     *\n     * The possible values are:\n     *\n     * * `initial`&mdash;The Error icon will be displayed when the component state is\n     * `invalid` and `touched` or `dirty`.\n     * * `boolean`&mdash;The Error icon is displayed, if the condition given by the developer is met.\n     *\n     * @default false\n     */\n\n    this.showErrorIcon = false;\n    /**\n     * Specifies whether a Clear button will be rendered.\n     *\n     * @default false\n     */\n\n    this.clearButton = false;\n    /**\n     * Fires each time the value is changed&mdash;\n     * when the component is blurred or the value is cleared through the **Clear** button\n     * ([see example]({% slug overview_textbox %}#toc-events)).\n     * When the value of the component is programmatically changed to `ngModel` or `formControl`\n     * through its API or form binding, the `valueChange` event is not triggered because it\n     * might cause a mix-up with the built-in `valueChange` mechanisms of the `ngModel` or `formControl` bindings.\n     */\n\n    this.valueChange = new EventEmitter();\n    /**\n     * Fires each time the user focuses the `input` element.\n     */\n\n    this.inputFocus = new EventEmitter();\n    /**\n     * Fires each time the `input` element gets blurred.\n     */\n\n    this.inputBlur = new EventEmitter();\n    /**\n     * Fires each time the user focuses the TextBox component.\n     *\n     * > To wire the event programmatically, use the `onFocus` property.\n     *\n     * @example\n     * ```ts-no-run\n     * _@Component({\n     * selector: 'my-app',\n     * template: `\n     *  <kendo-textbox (focus)=\"handleFocus()\"></kendo-textbox>\n     * `\n     * })\n     * class AppComponent {\n     *   public handleFocus(): void {\n     *      console.log('Component is isFocused');\n     *   }\n     * }\n     * ```\n     */\n\n    this.onFocus = new EventEmitter();\n    /**\n     * Fires each time the TextBox component gets blurred.\n     *\n     * > To wire the event programmatically, use the `onBlur` property.\n     *\n     * @example\n     * ```ts-no-run\n     * _@Component({\n     * selector: 'my-app',\n     * template: `\n     *  <kendo-textbox (blur)=\"handleBlur()\"></kendo-textbox>\n     * `\n     * })\n     * class AppComponent {\n     *   public handleBlur(): void {\n     *      console.log('Component is blurred');\n     *   }\n     * }\n     * ```\n     */\n\n    this.onBlur = new EventEmitter();\n    this.hostClass = true;\n    this._isFocused = false;\n    this.focusChangedProgrammatically = false;\n    /**\n     * @hidden\n     */\n\n    this.handleInputFocus = () => {\n      if (!this.disabled) {\n        if (this.selectOnFocus && this.value) {\n          this.ngZone.run(() => {\n            setTimeout(() => {\n              this.selectAll();\n            });\n          });\n        }\n\n        if (hasObservers(this.onFocus)) {\n          if (!this.isFocused) {\n            this.ngZone.run(() => {\n              this.onFocus.emit();\n            });\n          }\n        }\n\n        if (hasObservers(this.inputFocus)) {\n          if (!this.focusChangedProgrammatically || this.focusChangedProgrammatically && this.clearButtonClicked) {\n            this.ngZone.run(() => {\n              this.inputFocus.emit();\n            });\n          }\n        }\n\n        this.ngZone.run(() => {\n          this.isFocused = true;\n        });\n      }\n    };\n    /**\n     * @hidden\n     */\n\n\n    this.handleInputBlur = () => {\n      this.changeDetector.markForCheck();\n\n      if (hasObservers(this.inputBlur) || requiresZoneOnBlur(this.control)) {\n        this.ngZone.run(() => {\n          this.ngTouched();\n          this.inputBlur.emit();\n        });\n      }\n    };\n    /**\n     * @hidden\n     */\n\n\n    this.handleInput = ev => {\n      let incomingValue = ev.target.value;\n      this.updateValue(incomingValue);\n    };\n\n    this.ngChange = _ => {};\n\n    this.ngTouched = () => {};\n\n    validatePackage(packageMetadata);\n    this.direction = localizationService.rtl ? 'rtl' : 'ltr';\n  }\n  /**\n   * @hidden\n   */\n\n\n  set tabIndex(tabIndex) {\n    this.tabindex = tabIndex;\n  }\n\n  get tabIndex() {\n    return this.tabindex;\n  }\n\n  get disabledClass() {\n    return this.disabled;\n  }\n\n  ngOnInit() {\n    this.control = this.injector.get(NgControl, null);\n    this.checkClearButton();\n    this.subscriptions = this.localizationService.changes.subscribe(({\n      rtl\n    }) => {\n      this.direction = rtl ? 'rtl' : 'ltr';\n    });\n  }\n\n  ngAfterViewInit() {\n    const hostElement = this.hostElement.nativeElement;\n    let cursorInsideWrapper = false;\n    let tabbing = false;\n    this.ngZone.runOutsideAngular(() => {\n      // focusIn and focusOut are relative to the host element\n      this.subscriptions.add(this.renderer.listen(hostElement, 'focusin', () => {\n        if (!this.isFocused) {\n          this.ngZone.run(() => {\n            this.onFocus.emit();\n            this.isFocused = true;\n          });\n        }\n      }));\n      this.subscriptions.add(this.renderer.listen(hostElement, 'focusout', args => {\n        if (!this.isFocused) {\n          return;\n        }\n\n        if (tabbing) {\n          const closestTextbox = closest(args.relatedTarget, element => element === this.hostElement.nativeElement);\n\n          if (!closestTextbox) {\n            this.handleBlur();\n          }\n\n          tabbing = false;\n        } else {\n          if (!cursorInsideWrapper && !this.clearButtonClicked) {\n            this.handleBlur();\n          }\n        }\n      }));\n      this.subscriptions.add(this.renderer.listen(hostElement, 'mouseenter', () => {\n        cursorInsideWrapper = true;\n      }));\n      this.subscriptions.add(this.renderer.listen(hostElement, 'mouseleave', () => {\n        cursorInsideWrapper = false;\n      }));\n      this.subscriptions.add(this.renderer.listen(hostElement, 'keydown', args => {\n        if (args.keyCode === Keys.Tab) {\n          tabbing = true;\n        } else {\n          tabbing = false;\n        }\n      }));\n    });\n  }\n\n  ngOnChanges(changes) {\n    if (changes.disabled || changes.readonly || changes.value) {\n      this.checkClearButton();\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.subscriptions) {\n      this.subscriptions.unsubscribe();\n    }\n  }\n  /**\n   * Focuses the TextBox.\n   *\n   * @example\n   * ```ts-no-run\n   * _@Component({\n   * selector: 'my-app',\n   * template: `\n   *  <button (click)=\"input.focus()\">Focus the input</button>\n   *  <kendo-textbox #input></kendo-textbox>\n   * `\n   * })\n   * class AppComponent { }\n   * ```\n   */\n\n\n  focus() {\n    if (!this.input) {\n      return;\n    }\n\n    this.focusChangedProgrammatically = true;\n    this.isFocused = true;\n    this.input.nativeElement.focus();\n    this.focusChangedProgrammatically = false;\n  }\n  /**\n   * Blurs the TextBox.\n   */\n\n\n  blur() {\n    this.focusChangedProgrammatically = true;\n    const isFocusedElement = this.hostElement.nativeElement.querySelector(':focus');\n\n    if (isFocusedElement) {\n      isFocusedElement.blur();\n    }\n\n    this.isFocused = false;\n    this.focusChangedProgrammatically = false;\n  }\n  /**\n   * @hidden\n   */\n\n\n  clearTitle() {\n    return this.localizationService.get('clear');\n  }\n  /**\n   * @hidden\n   */\n\n\n  checkClearButton() {\n    this.showClearButton = !this.disabled && !this.readonly && this.clearButton && !!this.value;\n  }\n  /**\n   * @hidden\n   */\n\n\n  clearValue(ev) {\n    if (ev) {\n      ev.preventDefault();\n    }\n\n    this.clearButtonClicked = true;\n    this.input.nativeElement.value = '';\n    this.input.nativeElement.focus();\n    this.updateValue('');\n    this.checkClearButton();\n    this.clearButtonClicked = false;\n  }\n  /**\n   * @hidden\n   */\n\n\n  writeValue(value) {\n    this.value = value;\n    this.checkClearButton();\n  }\n  /**\n   * @hidden\n   */\n\n\n  registerOnChange(fn) {\n    this.ngChange = fn;\n  }\n  /**\n   * @hidden\n   */\n\n\n  registerOnTouched(fn) {\n    this.ngTouched = fn;\n  }\n  /**\n   * @hidden\n   * Called when the status of the component changes to or from `disabled`.\n   * Depending on the value, it enables or disables the appropriate DOM element.\n   *\n   * @param isDisabled\n   */\n\n\n  setDisabledState(isDisabled) {\n    this.changeDetector.markForCheck();\n    this.disabled = isDisabled;\n  }\n  /**\n   * @hidden\n   */\n\n\n  showErrorsInitial() {\n    if (!this.control) {\n      return false;\n    }\n\n    const {\n      invalid,\n      dirty,\n      touched\n    } = this.control;\n    return invalid && (dirty || touched);\n  }\n  /**\n   * @hidden\n   */\n\n\n  showSuccessInitial() {\n    if (!this.control) {\n      return false;\n    }\n\n    const {\n      valid,\n      dirty,\n      touched\n    } = this.control;\n    return valid && (dirty || touched);\n  }\n  /**\n   * @hidden\n   */\n\n\n  get successIconClasses() {\n    return this.successIcon ? `k-text-success ${this.successIcon}` : `k-text-success k-icon k-i-check-outline`;\n  }\n  /**\n   * @hidden\n   */\n\n\n  get errorIconClasses() {\n    return this.errorIcon ? `k-text-error ${this.errorIcon}` : `k-text-error k-icon k-i-warning`;\n  }\n  /**\n   * @hidden\n   */\n\n\n  get clearButtonClasses() {\n    return this.clearButtonIcon ? this.clearButtonIcon : `k-icon k-i-close-circle`;\n  }\n  /**\n   * @hidden\n   */\n\n\n  get hasErrors() {\n    return this.showErrorIcon === 'initial' ? this.showErrorsInitial() : this.showErrorIcon;\n  }\n  /**\n   * @hidden\n   */\n\n\n  get isSuccessful() {\n    return this.showSuccessIcon === 'initial' ? this.showSuccessInitial() : this.showSuccessIcon;\n  }\n\n  setSelection(start, end) {\n    if (this.isFocused) {\n      invokeElementMethod(this.input, 'setSelectionRange', start, end);\n    }\n  }\n\n  selectAll() {\n    if (this.value) {\n      this.setSelection(0, this.value.length);\n    }\n  }\n\n  updateValue(value) {\n    if (!areSame(this.value, value)) {\n      this.ngZone.run(() => {\n        this.value = value;\n        this.ngChange(value);\n        this.valueChange.emit(value);\n        this.checkClearButton();\n        this.changeDetector.markForCheck();\n      });\n    }\n  }\n\n  get isFocused() {\n    return this._isFocused;\n  }\n\n  set isFocused(value) {\n    if (this._isFocused !== value && this.hostElement) {\n      const element = this.hostElement.nativeElement;\n\n      if (value && !this.disabled) {\n        this.renderer.addClass(element, FOCUSED$3);\n      } else {\n        this.renderer.removeClass(element, FOCUSED$3);\n      }\n\n      this._isFocused = value;\n    }\n  }\n\n  handleBlur() {\n    this.ngZone.run(() => {\n      if (!this.focusChangedProgrammatically) {\n        this.onBlur.emit();\n      }\n\n      this.isFocused = false;\n    });\n  }\n\n};\n\nTextBoxComponent.ɵfac = function TextBoxComponent_Factory(t) {\n  return new (t || TextBoxComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Injector), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef));\n};\n\nTextBoxComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: TextBoxComponent,\n  selectors: [[\"kendo-textbox\"]],\n  contentQueries: function TextBoxComponent_ContentQueries(rf, ctx, dirIndex) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵcontentQuery(dirIndex, TextBoxSuffixTemplateDirective, 5);\n      ɵngcc0.ɵɵcontentQuery(dirIndex, TextBoxPrefixTemplateDirective, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.suffixTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.prefixTemplate = _t.first);\n    }\n  },\n  viewQuery: function TextBoxComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵviewQuery(_c37, 7);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.input = _t.first);\n    }\n  },\n  hostVars: 5,\n  hostBindings: function TextBoxComponent_HostBindings(rf, ctx) {\n    if (rf & 2) {\n      ɵngcc0.ɵɵattribute(\"dir\", ctx.direction);\n      ɵngcc0.ɵɵclassProp(\"k-textbox\", ctx.hostClass)(\"k-state-disabled\", ctx.disabledClass);\n    }\n  },\n  inputs: {\n    focusableId: \"focusableId\",\n    title: \"title\",\n    disabled: \"disabled\",\n    readonly: \"readonly\",\n    tabindex: \"tabindex\",\n    value: \"value\",\n    selectOnFocus: \"selectOnFocus\",\n    showSuccessIcon: \"showSuccessIcon\",\n    showErrorIcon: \"showErrorIcon\",\n    clearButton: \"clearButton\",\n    tabIndex: \"tabIndex\",\n    successIcon: \"successIcon\",\n    errorIcon: \"errorIcon\",\n    clearButtonIcon: \"clearButtonIcon\",\n    placeholder: \"placeholder\",\n    maxlength: \"maxlength\"\n  },\n  outputs: {\n    valueChange: \"valueChange\",\n    inputFocus: \"inputFocus\",\n    inputBlur: \"inputBlur\",\n    onFocus: \"focus\",\n    onBlur: \"blur\"\n  },\n  exportAs: [\"kendoTextBox\"],\n  features: [ɵngcc0.ɵɵProvidersFeature([LocalizationService, {\n    provide: L10N_PREFIX,\n    useValue: 'kendo.textbox'\n  }, {\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => TextBoxComponent_1),\n    multi: true\n  }, {\n    provide: KendoInput,\n    useExisting: forwardRef(() => TextBoxComponent_1)\n  }]), ɵngcc0.ɵɵNgOnChangesFeature],\n  decls: 10,\n  vars: 18,\n  consts: function () {\n    let i18n_41;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The title for the **Clear** button in the TextBox.\n       * @meaning kendo.textbox.clear\n       */\n      const MSG_EXTERNAL_2651889799249671820$$DIST_FESM2015_INDEX_JS_42 = goog.getMsg(\"Clear\");\n      i18n_41 = MSG_EXTERNAL_2651889799249671820$$DIST_FESM2015_INDEX_JS_42;\n    } else {\n      i18n_41 = $localize`:kendo.textbox.clear|The title for the **Clear** button in the TextBox.␟e6edd360fd0d3c873c0d94a3aecd3c407d31da5a␟2651889799249671820:Clear`;\n    }\n\n    return [[\"kendoTextBoxLocalizedMessages\", \"\", \"clear\", i18n_41], [1, \"k-input-prefix\"], [4, \"ngIf\"], [1, \"k-input\", 3, \"id\", \"disabled\", \"readonly\", \"value\", \"kendoEventsOutsideAngular\"], [\"input\", \"\"], [1, \"k-input-suffix\"], [3, \"ngClass\", 4, \"ngIf\"], [\"role\", \"button\", \"class\", \"k-clear-value\", 3, \"tabindex\", \"title\", \"click\", \"mousedown\", \"keydown.enter\", \"keydown.space\", 4, \"ngIf\"], [3, \"ngTemplateOutlet\"], [3, \"ngClass\"], [\"role\", \"button\", 1, \"k-clear-value\", 3, \"tabindex\", \"title\", \"click\", \"mousedown\", \"keydown.enter\", \"keydown.space\"]];\n  },\n  template: function TextBoxComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵelementContainer(0, 0);\n      ɵngcc0.ɵɵelementStart(1, \"span\", 1);\n      ɵngcc0.ɵɵtemplate(2, TextBoxComponent_2_Template, 1, 1, undefined, 2);\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵelement(3, \"input\", 3, 4);\n      ɵngcc0.ɵɵelementStart(5, \"span\", 5);\n      ɵngcc0.ɵɵtemplate(6, TextBoxComponent_span_6_Template, 1, 1, \"span\", 6);\n      ɵngcc0.ɵɵtemplate(7, TextBoxComponent_span_7_Template, 1, 1, \"span\", 6);\n      ɵngcc0.ɵɵtemplate(8, TextBoxComponent_span_8_Template, 2, 4, \"span\", 7);\n      ɵngcc0.ɵɵtemplate(9, TextBoxComponent_9_Template, 1, 1, undefined, 2);\n      ɵngcc0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      ɵngcc0.ɵɵadvance(2);\n      ɵngcc0.ɵɵproperty(\"ngIf\", ctx.prefixTemplate);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"id\", ctx.focusableId)(\"disabled\", ctx.disabled)(\"readonly\", ctx.readonly)(\"value\", ctx.value)(\"kendoEventsOutsideAngular\", ɵngcc0.ɵɵpureFunction3(14, _c43, ctx.handleInputFocus, ctx.handleInputBlur, ctx.handleInput));\n      ɵngcc0.ɵɵattribute(\"tabindex\", ctx.disabled ? undefined : ctx.tabindex)(\"placeholder\", ctx.placeholder)(\"title\", ctx.title)(\"maxlength\", ctx.maxlength);\n      ɵngcc0.ɵɵadvance(3);\n      ɵngcc0.ɵɵproperty(\"ngIf\", ctx.hasErrors);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngIf\", ctx.isSuccessful);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngIf\", ctx.showClearButton);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngIf\", ctx.suffixTemplate);\n    }\n  },\n  directives: function () {\n    return [LocalizedTextBoxMessagesDirective, ɵngcc3.NgIf, ɵngcc2.EventsOutsideAngularDirective, ɵngcc3.NgTemplateOutlet, ɵngcc3.NgClass];\n  },\n  encapsulation: 2\n});\n\n__decorate([Input(), __metadata(\"design:type\", String)], TextBoxComponent.prototype, \"focusableId\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], TextBoxComponent.prototype, \"title\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], TextBoxComponent.prototype, \"disabled\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], TextBoxComponent.prototype, \"readonly\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Number)], TextBoxComponent.prototype, \"tabindex\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], TextBoxComponent.prototype, \"value\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], TextBoxComponent.prototype, \"selectOnFocus\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Object)], TextBoxComponent.prototype, \"showSuccessIcon\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Object)], TextBoxComponent.prototype, \"showErrorIcon\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], TextBoxComponent.prototype, \"clearButton\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], TextBoxComponent.prototype, \"successIcon\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], TextBoxComponent.prototype, \"errorIcon\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], TextBoxComponent.prototype, \"clearButtonIcon\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Number), __metadata(\"design:paramtypes\", [Number])], TextBoxComponent.prototype, \"tabIndex\", null);\n\n__decorate([Input(), __metadata(\"design:type\", String)], TextBoxComponent.prototype, \"placeholder\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Number)], TextBoxComponent.prototype, \"maxlength\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], TextBoxComponent.prototype, \"valueChange\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], TextBoxComponent.prototype, \"inputFocus\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], TextBoxComponent.prototype, \"inputBlur\", void 0);\n\n__decorate([Output('focus'), __metadata(\"design:type\", EventEmitter)], TextBoxComponent.prototype, \"onFocus\", void 0);\n\n__decorate([Output('blur'), __metadata(\"design:type\", EventEmitter)], TextBoxComponent.prototype, \"onBlur\", void 0);\n\n__decorate([ViewChild('input', {\n  static: true\n}), __metadata(\"design:type\", ElementRef)], TextBoxComponent.prototype, \"input\", void 0);\n\n__decorate([ContentChild(TextBoxSuffixTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", TextBoxSuffixTemplateDirective)], TextBoxComponent.prototype, \"suffixTemplate\", void 0);\n\n__decorate([ContentChild(TextBoxPrefixTemplateDirective, {\n  static: false\n}), __metadata(\"design:type\", TextBoxPrefixTemplateDirective)], TextBoxComponent.prototype, \"prefixTemplate\", void 0);\n\n__decorate([HostBinding('class.k-state-disabled'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], TextBoxComponent.prototype, \"disabledClass\", null);\n\n__decorate([HostBinding('class.k-textbox'), __metadata(\"design:type\", Boolean)], TextBoxComponent.prototype, \"hostClass\", void 0);\n\n__decorate([HostBinding('attr.dir'), __metadata(\"design:type\", String)], TextBoxComponent.prototype, \"direction\", void 0);\n\nTextBoxComponent = TextBoxComponent_1 = __decorate([__metadata(\"design:paramtypes\", [LocalizationService, NgZone, ChangeDetectorRef, Renderer2, Injector, ElementRef])], TextBoxComponent);\n/**\n * @hidden\n */\n\nlet TextBoxMessages = /*#__PURE__*/(() => {\n  class TextBoxMessages extends ComponentMessages {}\n\n  TextBoxMessages.ɵfac = /*@__PURE__*/function () {\n    let ɵTextBoxMessages_BaseFactory;\n    return function TextBoxMessages_Factory(t) {\n      return (ɵTextBoxMessages_BaseFactory || (ɵTextBoxMessages_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(TextBoxMessages)))(t || TextBoxMessages);\n    };\n  }();\n\n  TextBoxMessages.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: TextBoxMessages,\n    inputs: {\n      clear: \"clear\"\n    },\n    features: [ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", String)], TextBoxMessages.prototype, \"clear\", void 0);\n\n  return TextBoxMessages;\n})();\nvar TextBoxCustomMessagesComponent_1;\n/**\n * Custom component messages override default component messages.\n */\n\nlet TextBoxCustomMessagesComponent = TextBoxCustomMessagesComponent_1 = class TextBoxCustomMessagesComponent extends TextBoxMessages {\n  constructor(service) {\n    super();\n    this.service = service;\n  }\n\n  get override() {\n    return true;\n  }\n\n};\n\nTextBoxCustomMessagesComponent.ɵfac = function TextBoxCustomMessagesComponent_Factory(t) {\n  return new (t || TextBoxCustomMessagesComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService));\n};\n\nTextBoxCustomMessagesComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: TextBoxCustomMessagesComponent,\n  selectors: [[\"kendo-textbox-messages\"]],\n  features: [ɵngcc0.ɵɵProvidersFeature([{\n    provide: TextBoxMessages,\n    useExisting: forwardRef(() => TextBoxCustomMessagesComponent_1) // tslint:disable-line:no-forward-ref\n\n  }]), ɵngcc0.ɵɵInheritDefinitionFeature],\n  decls: 0,\n  vars: 0,\n  template: function TextBoxCustomMessagesComponent_Template(rf, ctx) {},\n  encapsulation: 2\n});\nTextBoxCustomMessagesComponent = TextBoxCustomMessagesComponent_1 = __decorate([__metadata(\"design:paramtypes\", [LocalizationService])], TextBoxCustomMessagesComponent);\nvar LocalizedTextBoxMessagesDirective_1;\n/**\n * @hidden\n */\n\nlet LocalizedTextBoxMessagesDirective = LocalizedTextBoxMessagesDirective_1 = class LocalizedTextBoxMessagesDirective extends TextBoxMessages {\n  constructor(service) {\n    super();\n    this.service = service;\n  }\n\n};\n\nLocalizedTextBoxMessagesDirective.ɵfac = function LocalizedTextBoxMessagesDirective_Factory(t) {\n  return new (t || LocalizedTextBoxMessagesDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService));\n};\n\nLocalizedTextBoxMessagesDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n  type: LocalizedTextBoxMessagesDirective,\n  selectors: [[\"\", \"kendoTextBoxLocalizedMessages\", \"\"]],\n  features: [ɵngcc0.ɵɵProvidersFeature([{\n    provide: TextBoxMessages,\n    useExisting: forwardRef(() => LocalizedTextBoxMessagesDirective_1) // tslint:disable-line:no-forward-ref\n\n  }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n});\nLocalizedTextBoxMessagesDirective = LocalizedTextBoxMessagesDirective_1 = __decorate([__metadata(\"design:paramtypes\", [LocalizationService])], LocalizedTextBoxMessagesDirective);\n/**\n * Specifies a separator in the content of components like the TextArea and the TextBox. ([see examples]({% slug adornments_textbox %}#toc-separator)).\n * @example\n * ```ts-no-run\n * _@Component({\n * selector: 'my-app',\n * template: `\n *  <kendo-textbox>\n *    <ng-template kendoTextBoxSuffixTemplate>\n *        <kendo-input-separator></kendo-input-separator>\n *        <button kendoButton look=\"clear\" icon=\"image\"></button>\n *    </ng-template>\n *  </kendo-textbox>\n * `\n * })\n * class AppComponent {}\n * ```\n */\n\nlet InputSeparatorComponent = /*#__PURE__*/(() => {\n  let InputSeparatorComponent = class InputSeparatorComponent {\n    /**\n     * Specifies a separator in the content of components like the TextArea and the TextBox. ([see examples]({% slug adornments_textbox %}#toc-separator)).\n     * @example\n     * ```ts-no-run\n     * _@Component({\n     * selector: 'my-app',\n     * template: `\n     *  <kendo-textbox>\n     *    <ng-template kendoTextBoxSuffixTemplate>\n     *        <kendo-input-separator></kendo-input-separator>\n     *        <button kendoButton look=\"clear\" icon=\"image\"></button>\n     *    </ng-template>\n     *  </kendo-textbox>\n     * `\n     * })\n     * class AppComponent {}\n     * ```\n     */\n    constructor() {\n      this.hostClass = true;\n    }\n\n  };\n\n  InputSeparatorComponent.ɵfac = function InputSeparatorComponent_Factory(t) {\n    return new (t || InputSeparatorComponent)();\n  };\n\n  InputSeparatorComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: InputSeparatorComponent,\n    selectors: [[\"kendo-input-separator\"], [\"kendo-textbox-separator\"]],\n    hostVars: 2,\n    hostBindings: function InputSeparatorComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"k-input-separator\", ctx.hostClass);\n      }\n    },\n    decls: 0,\n    vars: 0,\n    template: function InputSeparatorComponent_Template(rf, ctx) {},\n    encapsulation: 2\n  });\n\n  __decorate([HostBinding('class.k-input-separator'), __metadata(\"design:type\", Boolean)], InputSeparatorComponent.prototype, \"hostClass\", void 0);\n  /**\n   * @hidden\n   */\n\n\n  return InputSeparatorComponent;\n})();\nconst SHARED_DIRECTIVES = [InputSeparatorComponent, TextAreaDirective];\n/**\n * @hidden\n */\n\nlet SharedModule = /*#__PURE__*/(() => {\n  let SharedModule = class SharedModule {};\n\n  SharedModule.ɵfac = function SharedModule_Factory(t) {\n    return new (t || SharedModule)();\n  };\n\n  SharedModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: SharedModule\n  });\n  SharedModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({});\n  /**\n   * Represents the [NgModule]({{ site.data.urls.angular['ngmoduleapi'] }})\n   * definition for the TextBox directive.\n   *\n   * @example\n   *\n   * ```ts-no-run\n   * // Import the TextBox module\n   * import { TextBoxModule } from '@progress/kendo-angular-inputs';\n   *\n   * // The browser platform with a compiler\n   * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n   *\n   * import { NgModule } from '@angular/core';\n   *\n   * // Import the app component\n   * import { AppComponent } from './app.component';\n   *\n   * // Define the app module\n   * _@NgModule({\n   *     declarations: [AppComponent], // declare app component\n   *     imports:      [BrowserModule, TextBoxModule], // import TextBox module\n   *     bootstrap:    [AppComponent]\n   * })\n   * export class AppModule {}\n   *\n   * // Compile and launch the module\n   * platformBrowserDynamic().bootstrapModule(AppModule);\n   *\n   * ```\n   */\n\n  return SharedModule;\n})();\nlet TextBoxModule = /*#__PURE__*/(() => {\n  let TextBoxModule = class TextBoxModule {};\n\n  TextBoxModule.ɵfac = function TextBoxModule_Factory(t) {\n    return new (t || TextBoxModule)();\n  };\n\n  TextBoxModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: TextBoxModule\n  });\n  TextBoxModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule, EventsModule, SharedModule], EventsModule]\n  });\n  /**\n   * @hidden\n   */\n\n  return TextBoxModule;\n})();\nlet TextFieldsBase = /*#__PURE__*/(() => {\n  class TextFieldsBase {\n    constructor(localizationService, ngZone, changeDetector, renderer, injector, hostElement) {\n      this.localizationService = localizationService;\n      this.ngZone = ngZone;\n      this.changeDetector = changeDetector;\n      this.renderer = renderer;\n      this.injector = injector;\n      this.hostElement = hostElement;\n      /**\n       * Sets the `title` attribute of the internal textarea input element of the component.\n       */\n\n      this.title = '';\n      /**\n       * Sets the disabled state of the TextArea component.\n       *\n       * @default false\n       */\n\n      this.disabled = false;\n      /**\n       * Sets the read-only state of the TextArea component.\n       *\n       * @default false\n       */\n\n      this.readonly = false;\n      /**\n       * Provides a value for the TextArea component.\n       */\n\n      this.value = null;\n      /**\n       * Determines whether the whole value will be selected when the TextArea is clicked. Defaults to `false`.\n       *\n       * @default false\n       */\n\n      this.selectOnFocus = false;\n      /**\n       * Fires each time the user focuses the internal textarea element of the component.\n       * This event is useful when you need to distinguish between focusing the textarea element and focusing one of its adornments.\n       */\n\n      this.inputFocus = new EventEmitter();\n      /**\n       * Fires each time the internal textarea element gets blurred.\n       * This event is useful when adornments are used, in order to distinguish between blurring the textarea element and blurring the whole TextArea component.\n       */\n\n      this.inputBlur = new EventEmitter();\n      this.subscriptions = new Subscription();\n      this._isFocused = false;\n      this.focusChangedProgrammatically = false;\n      /**\n       * @hidden\n       */\n\n      this.handleInputBlur = () => {\n        this.changeDetector.markForCheck();\n\n        if (hasObservers(this.inputBlur) || requiresZoneOnBlur(this.control)) {\n          this.ngZone.run(() => {\n            this.ngTouched();\n            this.inputBlur.emit();\n          });\n        }\n      };\n\n      this.ngChange = _ => {};\n\n      this.ngTouched = () => {};\n    }\n\n    get disabledClass() {\n      return this.disabled;\n    }\n\n    ngOnDestroy() {\n      this.subscriptions.unsubscribe();\n    }\n    /**\n     * @hidden\n     * Called when the status of the component changes to or from `disabled`.\n     * Depending on the value, it enables or disables the appropriate DOM element.\n     *\n     * @param isDisabled\n     */\n\n\n    setDisabledState(isDisabled) {\n      this.changeDetector.markForCheck();\n      this.disabled = isDisabled;\n    }\n\n  }\n\n  TextFieldsBase.ɵfac = function TextFieldsBase_Factory(t) {\n    ɵngcc0.ɵɵinvalidFactory();\n  };\n\n  TextFieldsBase.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: TextFieldsBase,\n    viewQuery: function TextFieldsBase_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c37, 7);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.input = _t.first);\n      }\n    },\n    hostVars: 3,\n    hostBindings: function TextFieldsBase_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"dir\", ctx.direction);\n        ɵngcc0.ɵɵclassProp(\"k-state-disabled\", ctx.disabledClass);\n      }\n    },\n    inputs: {\n      title: \"title\",\n      disabled: \"disabled\",\n      readonly: \"readonly\",\n      value: \"value\",\n      selectOnFocus: \"selectOnFocus\",\n      placeholder: \"placeholder\"\n    },\n    outputs: {\n      inputFocus: \"inputFocus\",\n      inputBlur: \"inputBlur\"\n    }\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", String)], TextFieldsBase.prototype, \"title\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], TextFieldsBase.prototype, \"disabled\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], TextFieldsBase.prototype, \"readonly\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], TextFieldsBase.prototype, \"value\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], TextFieldsBase.prototype, \"selectOnFocus\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], TextFieldsBase.prototype, \"placeholder\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], TextFieldsBase.prototype, \"inputFocus\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], TextFieldsBase.prototype, \"inputBlur\", void 0);\n\n  __decorate([ViewChild('input', {\n    static: true\n  }), __metadata(\"design:type\", ElementRef)], TextFieldsBase.prototype, \"input\", void 0);\n\n  __decorate([HostBinding('class.k-state-disabled'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], TextFieldsBase.prototype, \"disabledClass\", null);\n\n  __decorate([HostBinding('attr.dir'), __metadata(\"design:type\", String)], TextFieldsBase.prototype, \"direction\", void 0);\n\n  return TextFieldsBase;\n})();\nvar TextAreaComponent_1;\nconst resizeClasses = {\n  'vertical': 'k-resize-vertical',\n  'horizontal': 'k-resize-horizontal',\n  'both': 'k-resize-both',\n  'none': 'k-resize-none',\n  'auto': 'k-resize-none'\n};\nconst FOCUSED$4 = 'k-state-focus';\n/**\n * Represents the [Kendo UI TextArea component for Angular]({% slug overview_textarea %}).\n */\n\nlet TextAreaComponent = TextAreaComponent_1 = class TextAreaComponent extends TextFieldsBase {\n  constructor(localizationService, ngZone, changeDetector, renderer, injector, hostElement) {\n    super(localizationService, ngZone, changeDetector, renderer, injector, hostElement);\n    this.localizationService = localizationService;\n    this.ngZone = ngZone;\n    this.changeDetector = changeDetector;\n    this.renderer = renderer;\n    this.injector = injector;\n    this.hostElement = hostElement;\n    /**\n     * @hidden\n     */\n\n    this.focusableId = `k-${guid()}`;\n    this.hostClass = true;\n    /**\n     * Specifies the flow direction of the TextArea sections. This property is useful when adornments are used, in order to specify\n     * their position in relation to the textarea element.\n     *\n     * The possible values are:\n     * * `vertical`(Default) &mdash;TextArea sections are placed from top to bottom.\n     * * `horizontal`&mdash;TextArea sections are placed from left to right in `ltr`, and from right to left in `rtl` mode.\n     */\n\n    this.flow = 'vertical';\n    /**\n     * Specifies the [tabindex](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex) of the component.\n     */\n\n    this.tabindex = 0;\n    /**\n     * Configures the resize behavior of the TextArea.\n     *\n     * The possible values are:\n     * * `vertical`(Default)&mdash;The TextArea component can be resized only vertically.\n     * * `horizontal`&mdash;The TextArea component can be resized only horizontally.\n     * * `both`&mdash;The TextArea component can be resized in both (horizontal and vertical) directions.\n     * * `auto`&mdash;Specifies whether the TextArea component will adjust its height automatically, based on the content.\n     * * `none`&mdash;The TextArea cannot be resized.\n     *\n     */\n\n    this.resizable = 'vertical';\n    /**\n     * Fires each time the user focuses the TextArea component.\n     *\n     * > To wire the event programmatically, use the `onFocus` property.\n     *\n     * @example\n     * ```ts\n     * _@Component({\n     * selector: 'my-app',\n     * template: `\n     *  <kendo-textarea (focus)=\"handleFocus()\"></kendo-textarea>\n     * `\n     * })\n     * class AppComponent {\n     *   public handleFocus(): void {\n     *      console.log('Component is focused');\n     *   }\n     * }\n     * ```\n     */\n\n    this.onFocus = new EventEmitter();\n    /**\n     * Fires each time the TextArea component gets blurred.\n     *\n     * > To wire the event programmatically, use the `onBlur` property.\n     *\n     * @example\n     * ```ts\n     * _@Component({\n     * selector: 'my-app',\n     * template: `\n     *  <kendo-textarea (blur)=\"handleBlur()\"></kendo-textarea>\n     * `\n     * })\n     * class AppComponent {\n     *   public handleBlur(): void {\n     *      console.log('Component is blurred');\n     *   }\n     * }\n     * ```\n     */\n\n    this.onBlur = new EventEmitter();\n    /**\n     * Fires each time the value is changed or the component is blurred\n     * ([see example]({% slug overview_textarea %}#toc-events)).\n     * When the component value is changed programmatically or via its form control binding, the valueChange event is not emitted.\n     */\n\n    this.valueChange = new EventEmitter();\n    /**\n     * @hidden\n     */\n\n    this.handleInput = ev => {\n      let incomingValue = ev.target.value;\n      this.updateValue(incomingValue);\n      this.resize();\n    };\n    /**\n     * @hidden\n     */\n\n\n    this.handleInputFocus = () => {\n      if (!this.disabled) {\n        if (this.selectOnFocus && this.value) {\n          this.ngZone.run(() => {\n            setTimeout(() => {\n              this.selectAll();\n            });\n          });\n        }\n\n        if (hasObservers(this.onFocus)) {\n          if (!this.isFocused) {\n            this.ngZone.run(() => {\n              this.onFocus.emit();\n            });\n          }\n        }\n\n        if (hasObservers(this.inputFocus)) {\n          if (!this.focusChangedProgrammatically) {\n            this.ngZone.run(() => {\n              this.inputFocus.emit();\n            });\n          }\n        }\n\n        this.ngZone.run(() => {\n          this.isFocused = true;\n        });\n      }\n    };\n\n    validatePackage(packageMetadata);\n    this.direction = localizationService.rtl ? 'rtl' : 'ltr';\n  }\n\n  get flowCol() {\n    return this.flow === 'vertical';\n  }\n\n  get flowRow() {\n    return this.flow === 'horizontal';\n  }\n  /**\n   * @hidden\n   */\n\n\n  set tabIndex(tabIndex) {\n    this.tabindex = tabIndex;\n  }\n\n  get tabIndex() {\n    return this.tabindex;\n  }\n\n  ngAfterViewInit() {\n    const hostElement = this.hostElement.nativeElement;\n    let cursorInsideWrapper = false;\n    let tabbing = false;\n    this.ngZone.runOutsideAngular(() => {\n      // focusIn and focusOut are relative to the host element\n      this.subscriptions.add(this.renderer.listen(hostElement, 'focusin', () => {\n        if (!this.isFocused) {\n          this.ngZone.run(() => {\n            this.onFocus.emit();\n            this.isFocused = true;\n          });\n        }\n      }));\n      this.subscriptions.add(this.renderer.listen(hostElement, 'focusout', args => {\n        if (!this.isFocused) {\n          return;\n        }\n\n        if (tabbing) {\n          const closestTextbox = closest(args.relatedTarget, element => element === this.hostElement.nativeElement);\n\n          if (!closestTextbox) {\n            this.handleBlur();\n          }\n\n          tabbing = false;\n        } else {\n          if (!cursorInsideWrapper) {\n            this.handleBlur();\n          }\n        }\n      }));\n      this.subscriptions.add(this.renderer.listen(hostElement, 'mouseenter', () => {\n        cursorInsideWrapper = true;\n      }));\n      this.subscriptions.add(this.renderer.listen(hostElement, 'mouseleave', () => {\n        cursorInsideWrapper = false;\n      }));\n      this.subscriptions.add(this.renderer.listen(hostElement, 'keydown', args => {\n        if (args.keyCode === Keys.Tab) {\n          tabbing = true;\n        } else {\n          tabbing = false;\n        }\n      }));\n    });\n  }\n\n  ngOnInit() {\n    this.control = this.injector.get(NgControl, null);\n\n    if (isDocumentAvailable() && this.resizable === 'auto') {\n      this.resizeSubscription = fromEvent(window, 'resize').pipe(debounceTime(50)).subscribe(() => this.resize());\n    }\n\n    if (this.hostElement) {\n      this.renderer.removeAttribute(this.hostElement.nativeElement, \"tabindex\");\n    }\n\n    this.subscriptions = this.localizationService.changes.subscribe(({\n      rtl\n    }) => {\n      this.direction = rtl ? 'rtl' : 'ltr';\n    });\n  }\n\n  ngOnChanges(changes) {\n    const hostElement = this.hostElement.nativeElement;\n    const element = this.input.nativeElement;\n\n    if (changes.resizable) {\n      if (this.resizable === 'auto') {\n        this.initialHeight = element.offsetHeight;\n      } else {\n        this.renderer.setStyle(element, 'overflow-y', 'auto');\n        this.renderer.setStyle(element, 'resize', 'both');\n        element.style.height = `${this.initialHeight}px`;\n      }\n    }\n\n    if (changes.cols) {\n      if (isPresent(changes.cols.currentValue)) {\n        this.renderer.setStyle(hostElement, 'width', 'auto');\n      } else {\n        this.renderer.removeStyle(hostElement, 'width');\n      }\n    }\n  }\n\n  ngAfterViewChecked() {\n    this.resize();\n  }\n  /**\n   * @hidden\n   */\n\n\n  writeValue(value) {\n    this.value = value;\n  }\n  /**\n   * @hidden\n   */\n\n\n  registerOnChange(fn) {\n    this.ngChange = fn;\n  }\n  /**\n   * @hidden\n   */\n\n\n  registerOnTouched(fn) {\n    this.ngTouched = fn;\n  }\n\n  updateValue(value) {\n    if (!areSame(this.value, value)) {\n      this.ngZone.run(() => {\n        this.value = value;\n        this.ngChange(value);\n        this.valueChange.emit(value);\n        this.changeDetector.markForCheck();\n      });\n    }\n  }\n\n  ngOnDestroy() {\n    super.ngOnDestroy();\n\n    if (this.resizeSubscription) {\n      this.resizeSubscription.unsubscribe();\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  get resizableClass() {\n    return resizeClasses[this.resizable];\n  }\n  /**\n   * Focuses the TextArea component.\n   *\n   * @example\n   * ```ts\n   * _@Component({\n   * selector: 'my-app',\n   * template: `\n   *  <button (click)=\"textarea.focus()\">Focus the textarea</button>\n   *  <kendo-textarea #textarea></kendo-textarea>\n   * `\n   * })\n   * class AppComponent { }\n   * ```\n   */\n\n\n  focus() {\n    if (!this.input) {\n      return;\n    }\n\n    this.focusChangedProgrammatically = true;\n    this.isFocused = true;\n    this.input.nativeElement.focus();\n    this.focusChangedProgrammatically = false;\n  }\n  /**\n   * Blurs the TextArea component.\n   */\n\n\n  blur() {\n    this.focusChangedProgrammatically = true;\n    const isFocusedElement = this.hostElement.nativeElement.querySelector(':focus');\n\n    if (isFocusedElement) {\n      isFocusedElement.blur();\n    }\n\n    this.isFocused = false;\n    this.focusChangedProgrammatically = false;\n  }\n\n  resize() {\n    if (this.resizable !== 'auto') {\n      return;\n    }\n\n    const element = this.input.nativeElement;\n    this.renderer.setStyle(element, 'overflow-y', 'hidden');\n    this.renderer.setStyle(element, 'height', `${this.initialHeight}px`);\n    const scrollHeight = element.scrollHeight;\n\n    if (scrollHeight > this.initialHeight) {\n      element.style.height = `${scrollHeight}px`;\n    }\n  }\n\n  get isFocused() {\n    return this._isFocused;\n  }\n\n  set isFocused(value) {\n    if (this._isFocused !== value && this.hostElement) {\n      const element = this.hostElement.nativeElement;\n\n      if (value && !this.disabled) {\n        this.renderer.addClass(element, FOCUSED$4);\n      } else {\n        this.renderer.removeClass(element, FOCUSED$4);\n      }\n\n      this._isFocused = value;\n    }\n  }\n\n  handleBlur() {\n    this.ngZone.run(() => {\n      if (!this.focusChangedProgrammatically) {\n        this.onBlur.emit();\n      }\n\n      this.isFocused = false;\n    });\n  }\n\n  setSelection(start, end) {\n    if (this.isFocused) {\n      invokeElementMethod(this.input, 'setSelectionRange', start, end);\n    }\n  }\n\n  selectAll() {\n    if (this.value) {\n      this.setSelection(0, this.value.length);\n    }\n  }\n\n};\n\nTextAreaComponent.ɵfac = function TextAreaComponent_Factory(t) {\n  return new (t || TextAreaComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Injector), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef));\n};\n\nTextAreaComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: TextAreaComponent,\n  selectors: [[\"kendo-textarea\"]],\n  hostVars: 6,\n  hostBindings: function TextAreaComponent_HostBindings(rf, ctx) {\n    if (rf & 2) {\n      ɵngcc0.ɵɵclassProp(\"k-textarea\", ctx.hostClass)(\"k-flex-col\", ctx.flowCol)(\"k-flex-row\", ctx.flowRow);\n    }\n  },\n  inputs: {\n    focusableId: \"focusableId\",\n    flow: \"flow\",\n    tabindex: \"tabindex\",\n    resizable: \"resizable\",\n    tabIndex: \"tabIndex\",\n    rows: \"rows\",\n    cols: \"cols\",\n    maxlength: \"maxlength\"\n  },\n  outputs: {\n    onFocus: \"focus\",\n    onBlur: \"blur\",\n    valueChange: \"valueChange\"\n  },\n  exportAs: [\"kendoTextArea\"],\n  features: [ɵngcc0.ɵɵProvidersFeature([LocalizationService, {\n    provide: L10N_PREFIX,\n    useValue: 'kendo.textarea'\n  }, {\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => TextAreaComponent_1),\n    multi: true\n  }, {\n    provide: KendoInput,\n    useExisting: forwardRef(() => TextAreaComponent_1)\n  }]), ɵngcc0.ɵɵInheritDefinitionFeature, ɵngcc0.ɵɵNgOnChangesFeature],\n  ngContentSelectors: _c45,\n  decls: 4,\n  vars: 19,\n  consts: [[1, \"k-input\", 3, \"ngClass\", \"id\", \"value\", \"disabled\", \"readonly\", \"kendoEventsOutsideAngular\"], [\"input\", \"\"]],\n  template: function TextAreaComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵprojectionDef(_c44);\n      ɵngcc0.ɵɵelementStart(0, \"textarea\", 0, 1);\n      ɵngcc0.ɵɵtext(2, \"            \");\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵprojection(3);\n    }\n\n    if (rf & 2) {\n      ɵngcc0.ɵɵproperty(\"ngClass\", ctx.resizableClass)(\"id\", ctx.focusableId)(\"value\", ctx.value)(\"disabled\", ctx.disabled)(\"readonly\", ctx.readonly)(\"kendoEventsOutsideAngular\", ɵngcc0.ɵɵpureFunction3(15, _c43, ctx.handleInputFocus, ctx.handleInputBlur, ctx.handleInput));\n      ɵngcc0.ɵɵattribute(\"aria-multiline\", true)(\"aria-disabled\", ctx.disabled ? true : undefined)(\"aria-readonly\", ctx.readonly ? true : undefined)(\"placeholder\", ctx.placeholder)(\"rows\", ctx.rows)(\"cols\", ctx.cols)(\"tabindex\", ctx.tabIndex)(\"title\", ctx.title)(\"maxlength\", ctx.maxlength);\n    }\n  },\n  directives: [ɵngcc3.NgClass, ɵngcc2.EventsOutsideAngularDirective],\n  encapsulation: 2\n});\n\n__decorate([Input(), __metadata(\"design:type\", String)], TextAreaComponent.prototype, \"focusableId\", void 0);\n\n__decorate([HostBinding('class.k-textarea'), __metadata(\"design:type\", Boolean)], TextAreaComponent.prototype, \"hostClass\", void 0);\n\n__decorate([HostBinding('class.k-flex-col'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], TextAreaComponent.prototype, \"flowCol\", null);\n\n__decorate([HostBinding('class.k-flex-row'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], TextAreaComponent.prototype, \"flowRow\", null);\n\n__decorate([Input(), __metadata(\"design:type\", String)], TextAreaComponent.prototype, \"flow\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Number)], TextAreaComponent.prototype, \"rows\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Number)], TextAreaComponent.prototype, \"cols\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Number)], TextAreaComponent.prototype, \"maxlength\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Number)], TextAreaComponent.prototype, \"tabindex\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Number), __metadata(\"design:paramtypes\", [Number])], TextAreaComponent.prototype, \"tabIndex\", null);\n\n__decorate([Input(), __metadata(\"design:type\", String)], TextAreaComponent.prototype, \"resizable\", void 0);\n\n__decorate([Output('focus'), __metadata(\"design:type\", EventEmitter)], TextAreaComponent.prototype, \"onFocus\", void 0);\n\n__decorate([Output('blur'), __metadata(\"design:type\", EventEmitter)], TextAreaComponent.prototype, \"onBlur\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], TextAreaComponent.prototype, \"valueChange\", void 0);\n\nTextAreaComponent = TextAreaComponent_1 = __decorate([__metadata(\"design:paramtypes\", [LocalizationService, NgZone, ChangeDetectorRef, Renderer2, Injector, ElementRef])], TextAreaComponent);\n/**\n * Specifies the adornments in the suffix container ([see example]({% slug textarea_adornments %}).\n *  @example\n * ```ts-no-run\n * _@Component({\n * selector: 'my-app',\n * template: `\n *  <kendo-textarea>\n *    <kendo-textarea-suffix>\n *        <button kendoButton look=\"clear\" icon=\"image\"></button>\n *    </kendo-textarea-suffix>\n *  </kendo-textarea>\n * `\n * })\n * class AppComponent {}\n * ```\n */\n\nlet TextAreaSuffixComponent = /*#__PURE__*/(() => {\n  let TextAreaSuffixComponent = class TextAreaSuffixComponent {\n    /**\n     * Specifies the adornments in the suffix container ([see example]({% slug textarea_adornments %}).\n     *  @example\n     * ```ts-no-run\n     * _@Component({\n     * selector: 'my-app',\n     * template: `\n     *  <kendo-textarea>\n     *    <kendo-textarea-suffix>\n     *        <button kendoButton look=\"clear\" icon=\"image\"></button>\n     *    </kendo-textarea-suffix>\n     *  </kendo-textarea>\n     * `\n     * })\n     * class AppComponent {}\n     * ```\n     */\n    constructor() {\n      this.hostClass = true;\n    }\n\n  };\n\n  TextAreaSuffixComponent.ɵfac = function TextAreaSuffixComponent_Factory(t) {\n    return new (t || TextAreaSuffixComponent)();\n  };\n\n  TextAreaSuffixComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: TextAreaSuffixComponent,\n    selectors: [[\"kendo-textarea-suffix\"]],\n    hostVars: 2,\n    hostBindings: function TextAreaSuffixComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"k-textarea-suffix\", ctx.hostClass);\n      }\n    },\n    exportAs: [\"kendoTextAreaSuffix\"],\n    ngContentSelectors: _c26,\n    decls: 1,\n    vars: 0,\n    template: function TextAreaSuffixComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵprojection(0);\n      }\n    },\n    encapsulation: 2\n  });\n\n  __decorate([HostBinding('class.k-textarea-suffix'), __metadata(\"design:type\", Boolean)], TextAreaSuffixComponent.prototype, \"hostClass\", void 0);\n  /**\n   * Represents the [NgModule]({{ site.data.urls.angular['ngmoduleapi'] }})\n   * definition for the TextArea component.\n   *\n   * @example\n   *\n   * ```ts-no-run\n   * // Import the TextArea module\n   * import { TextAreaModule } from '@progress/kendo-angular-inputs';\n   *\n   * // The browser platform with a compiler\n   * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n   *\n   * import { NgModule } from '@angular/core';\n   *\n   * // Import the app component\n   * import { AppComponent } from './app.component';\n   *\n   * // Define the app module\n   * _@NgModule({\n   *     declarations: [AppComponent], // declare app component\n   *     imports:      [BrowserModule, TextAreaModule], // import TextArea module\n   *     bootstrap:    [AppComponent]\n   * })\n   * export class AppModule {}\n   *\n   * // Compile and launch the module\n   * platformBrowserDynamic().bootstrapModule(AppModule);\n   *\n   * ```\n   */\n\n\n  return TextAreaSuffixComponent;\n})();\nlet TextAreaModule = /*#__PURE__*/(() => {\n  let TextAreaModule = class TextAreaModule {};\n\n  TextAreaModule.ɵfac = function TextAreaModule_Factory(t) {\n    return new (t || TextAreaModule)();\n  };\n\n  TextAreaModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: TextAreaModule\n  });\n  TextAreaModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule, EventsModule, SharedModule], EventsModule]\n  });\n  /**\n   * @hidden\n   */\n\n  return TextAreaModule;\n})();\n\nclass PreventableEvent {\n  constructor() {\n    this.prevented = false;\n  }\n  /**\n   * Prevents the default action for a specified event.\n   * In this way, the source component suppresses the built-in behavior that follows the event.\n   */\n\n\n  preventDefault() {\n    this.prevented = true;\n  }\n  /**\n   * If the event is prevented by any of its subscribers, returns `true`.\n   *\n   * @returns - `true` if the default action was prevented. Otherwise, returns `false`.\n   */\n\n\n  isDefaultPrevented() {\n    return this.prevented;\n  }\n\n}\n/**\n * Fires each time the left side of the ColorPicker wrapper is clicked.\n * The event is triggered regardless of whether a ColorPicker icon is set or not.\n *\n * Provides information about the current active color and gives the option to prevent the opening of the popup.\n *\n * @example\n *\n * ```ts-no-run\n * _@Component({\n *   selector: 'my-app',\n *   template: `\n *       <kendo-colorpicker\n *           [icon]=\"'edit-tools'\"\n *           [value]=\"'#900'\"\n *           (activeColorClick)=\"handleActiveColorClick($event)\"\n *       >\n *       </kendo-colorpicker>\n *   `\n * })\n * class AppComponent {\n *     public handleActiveColorClick(event: ActiveColorClickEvent): void {\n *         event.preventOpen();\n *\n *         console.log('Open prevented:', event.isOpenPrevented());\n *         console.log('Current color:', event.color);\n *     }\n *  }\n * ```\n */\n\n\nclass ActiveColorClickEvent {\n  /**\n   * @hidden\n   * @param color Represents the current value of the ColorPicker.\n   */\n  constructor(color) {\n    this.color = color;\n    this.openPrevented = false;\n  }\n  /**\n   * Prevents the opening of the popup.\n   */\n\n\n  preventOpen() {\n    this.openPrevented = true;\n  }\n  /**\n   * Returns `true` if the popup opening is prevented by any of its subscribers.\n   *\n   * @returns - Returns `true` if the open action was prevented. Otherwise, returns `false`.\n   */\n\n\n  isOpenPrevented() {\n    return this.openPrevented;\n  }\n\n}\n/**\n * @hidden\n *\n * Returns the hex or rgba string representation of the color.\n */\n\n\nconst parseColor$1 = (value, format, safe = true) => {\n  const allowedFormats = ['hex', 'rgba', 'name'];\n\n  if (allowedFormats.indexOf(format) === -1) {\n    throw new Error(`Unsupported color output format '${format}'. The available options are 'hex', 'rgba' or 'name'.`);\n  }\n\n  if (!isPresent(value)) {\n    return;\n  }\n\n  if (format === 'name') {\n    return nameFormat(value, safe);\n  }\n\n  const parsedColor = parseColor(value.trim(), safe);\n\n  if (!isPresent(parsedColor)) {\n    return;\n  }\n\n  return format === 'hex' ? parsedColor.toCss() : parsedColor.toCssRgba();\n};\n/**\n * @hidden\n *\n * Returns an HSV object representation of the color string.\n */\n\n\nconst getHSV = (value, safe = true) => {\n  const parsed = parseColor(value, safe);\n\n  if (!isPresent(parsed)) {\n    return {};\n  }\n\n  return parsed.toHSV();\n};\n/**\n * @hidden\n *\n * Returns an RGBA object representation of the color string.\n */\n\n\nconst getRGBA = (value, safe = true) => {\n  const parsed = parseColor(value, safe);\n\n  if (!isPresent(parsed)) {\n    return {};\n  }\n\n  return parsed.toBytes();\n};\n/**\n * @hidden\n *\n * Returns the RGBA string representation of the color.\n */\n\n\nconst getColorFromHSV = hsva => {\n  const hue = fitIntoBounds(hsva.h, 0, 359.9);\n  const saturation = fitIntoBounds(hsva.s, 0, 1);\n  const value = fitIntoBounds(hsva.v, 0, 1);\n  const alpha = fitIntoBounds(hsva.a, 0, 1);\n  return Color.fromHSV(hue, saturation, value, alpha).toCssRgba();\n};\n/**\n * @hidden\n *\n * Returns the RGBA string representation of the color based on the `hue`, assuming the `value`, `saturation` and `alpha` have value of `1`.\n */\n\n\nconst getColorFromHue = hue => {\n  return getColorFromHSV({\n    h: hue,\n    s: 1,\n    v: 1,\n    a: 1\n  });\n};\n/**\n * @hidden\n *\n * Returns the RGBA string representation of the color.\n */\n\n\nconst getColorFromRGBA = rgba => {\n  const red = fitIntoBounds(rgba.r, 0, 255);\n  const green = fitIntoBounds(rgba.g, 0, 255);\n  const blue = fitIntoBounds(rgba.b, 0, 255);\n  const alpha = fitIntoBounds(rgba.a, 0, 1);\n  return Color.fromBytes(red, green, blue, alpha).toCssRgba();\n};\n/**\n *\n * @hidden\n */\n\n\nfunction nameFormat(value, safe) {\n  value = value.toLowerCase().trim();\n\n  if (isPresent(namedColors[value])) {\n    return value;\n  }\n\n  if (parseColor(value, safe)) {\n    value = parseColor(value, safe).toHex();\n  }\n\n  const key = Object.keys(namedColors).find(key => namedColors[key] === value);\n\n  if (!key && !safe) {\n    throw new Error(`The provided color ${value} is not supported for 'format=\"name\"' property.To display ${value} color, the component 'format' property shoud be set to 'hex' or 'rgba' `);\n  }\n\n  return key;\n} // tslint:disable:max-line-length\n\n/**\n * @hidden\n */\n\n\nconst PALETTEPRESETS = {\n  basic: {\n    colors: '000000,7f7f7f,880015,ed1c24,ff7f27,fff200,22b14c,00a2e8,3f48cc,a349a4,ffffff,c3c3c3,b97a57,ffaec9,ffc90e,efe4b0,b5e61d,99d9ea,7092be,c8bfe7',\n    columns: 10\n  },\n  office: {\n    colors: 'ffffff, 000000, e6e6e6, 435569, 4371c4, ed7e32, a5a4a5, febf04, 5a9bd5, 71ae48, f2f2f3, 7f7f7f, d1cece, d5dde3, dae1f4, fce5d4, deeded, fff2cc, deeaf6, e1efd9, d7d8d8, 585959, aeabab, adbaca, b4c5e7, f6caac, dbdbdb, ffe498, bcd6ee, c5e0b2, bfbfc0, 3f3f3f, 767070, 8595b1, 8fabdb, f5b183, c9c8c9, fed965, 9bc4e5, a8d08d, a5a5a6, 262625, 393939, 334050, 2e5496, c45a11, 7b7b7a, bf9000, 2f75b5, 548235, 7f7f7f, 0b0c0c, 161616, 222a34, 203764, 843d0b, 525252, 7f6000, 1d4d79, 375623',\n    columns: 10\n  },\n  apex: {\n    colors: 'ffffff, 000000, c9c2d1, 69676d, ceb966, 9cb084, 6bb1c9, 6585cf, 7e6bc9, a379bb, f2f2f2, 7f7f7f, f4f2f5, e0e0e2, f5f1e0, ebefe6, e1eff4, e0e6f5, e5e1f4, ece4f1, d8d8d8, 595959, e9e6ec, c2c1c5, ebe3c1, d7dfcd, c3dfe9, c1ceeb, cbc3e9, dac9e3, bfbfbf, 3f3f3f, dedae3, a4a3a8, e1d5a3, c3cfb5, a6d0de, a2b5e2, b1a6de, c7aed6, a5a5a5, 262626, 9688a5, 4e4d51, ae9638, 758c5a, 3d8da9, 365bb0, 533da9, 7d4d99, 7f7f7f, 0c0c0c, 635672, 343336, 746425, 4e5d3c, 295e70, 243c75, 372970, 533366',\n    columns: 10\n  },\n  austin: {\n    colors: 'ffffff, 000000, caf278, 3e3d2d, 94c600, 71685a, ff6700, 909465, 956b43, fea022, f2f2f2, 7f7f7f, f4fce4, dddcd0, efffc0, e3e1dc, ffe0cb, e8e9df, ece1d6, feecd2, d8d8d8, 595959, e9f9c9, bbb9a1, dfff82, c8c3ba, ffc299, d2d4c0, dac3ad, fed9a6, bfbfbf, 3f3f3f, dff7ae, ada598, cfff43, ada598, ffa365, bcbfa1, c8a585, fec67a, a5a5a5, 262626, a9ea25, 2e2d21, 6f9400, 544e43, bf4d00, 6c6f4b, 6f5032, d77b00, 7f7f7f, 0c0c0c, 74a50f, 1f1e16, 4a6300, 38342d, 7f3300, 484a32, 4a3521, 8f5200',\n    columns: 10\n  },\n  clarity: {\n    colors: 'ffffff, 292934, f3f2dc, d2533c, 93a299, ad8f67, 726056, 4c5a6a, 808da0, 79463d, f2f2f2, e7e7ec, e7e5b9, f6dcd8, e9ecea, eee8e0, e4dedb, d8dde3, e5e8ec, e9d6d3, d8d8d8, c4c4d1, d5d185, edbab1, d3d9d6, ded2c2, c9beb8, b2bcc8, ccd1d9, d3aea7, bfbfbf, 8a8aa3, aca73b, e4978a, bec7c1, cdbba3, af9e94, 8c9bac, b2bac6, bd857c, a5a5a5, 56566e, 56531d, a43925, 6b7c72, 866b48, 554840, 39434f, 5c697b, 5a342d, 7f7f7f, 3b3b4b, 22210b, 6d2619, 47534c, 594730, 39302b, 262d35, 3d4652, 3c231e',\n    columns: 10\n  },\n  slipstream: {\n    colors: 'ffffff, 000000, b4dcfa, 212745, 4e67c8, 5eccf3, a7ea52, 5dceaf, ff8021, f14124, f2f2f2, 7f7f7f, 8bc9f7, c7cce4, dbe0f4, def4fc, edfadc, def5ef, ffe5d2, fcd9d3, d8d8d8, 595959, 4facf3, 909aca, b8c2e9, beeafa, dbf6b9, beebdf, ffcca6, f9b3a7, bfbfbf, 3f3f3f, 0d78c9, 5967af, 94a3de, 9ee0f7, caf297, 9de1cf, ffb279, f68d7b, a5a5a5, 262626, 063c64, 181d33, 31479f, 11b2eb, 81d319, 34ac8b, d85c00, c3260c, 7f7f7f, 0c0c0c, 021828, 101322, 202f6a, 0b769c, 568c11, 22725c, 903d00, 821908',\n    columns: 10\n  },\n  metro: {\n    colors: 'ffffff, 000000, d6ecff, 4e5b6f, 7fd13b, ea157a, feb80a, 00addc, 738ac8, 1ab39f, f2f2f2, 7f7f7f, a7d6ff, d9dde4, e5f5d7, fad0e4, fef0cd, c5f2ff, e2e7f4, c9f7f1, d8d8d8, 595959, 60b5ff, b3bcca, cbecb0, f6a1c9, fee29c, 8be6ff, c7d0e9, 94efe3, bfbfbf, 3f3f3f, 007dea, 8d9baf, b2e389, f272af, fed46b, 51d9ff, aab8de, 5fe7d5, a5a5a5, 262626, 003e75, 3a4453, 5ea226, af0f5b, c58c00, 0081a5, 425ea9, 138677, 7f7f7f, 0c0c0c, 00192e, 272d37, 3f6c19, 750a3d, 835d00, 00566e, 2c3f71, 0c594f',\n    columns: 10\n  },\n  flow: {\n    colors: 'ffffff, 000000, dbf5f9, 04617b, 0f6fc6, 009dd9, 0bd0d9, 10cf9b, 7cca62, a5c249, f2f2f2, 7f7f7f, b2e9f2, b4ecfc, c7e2fa, c4eeff, c9fafc, c9faed, e4f4df, edf2da, d8d8d8, 595959, 76d9e8, 6adafa, 90c6f6, 89deff, 93f5f9, 94f6db, cae9c0, dbe6b6, bfbfbf, 3f3f3f, 21b2c8, 20c8f7, 59a9f2, 4fceff, 5df0f6, 5ff2ca, b0dfa0, c9da91, a5a5a5, 262626, 105964, 02485c, 0b5394, 0075a2, 089ca2, 0b9b74, 54a838, 7e9532, 7f7f7f, 0c0c0c, 062328, 01303d, 073763, 004e6c, 05686c, 07674d, 387025, 546321',\n    columns: 10\n  },\n  hardcover: {\n    colors: 'ffffff, 000000, ece9c6, 895d1d, 873624, d6862d, d0be40, 877f6c, 972109, aeb795, f2f2f2, 7f7f7f, e1dca5, f2e0c6, f0d0c9, f6e6d5, f5f2d8, e7e5e1, fbc7bc, eef0e9, d8d8d8, 595959, d0c974, e6c28d, e2a293, eeceaa, ece5b2, cfccc3, f78f7a, dee2d4, bfbfbf, 3f3f3f, a29a36, daa454, d4735e, e6b681, e2d88c, b7b2a5, f35838, ced3bf, a5a5a5, 262626, 514d1b, 664515, 65281a, a2641f, a39428, 655f50, 711806, 879464, 7f7f7f, 0c0c0c, 201e0a, 442e0e, 431b11, 6c4315, 6d621a, 433f35, 4b1004, 5a6243',\n    columns: 10\n  },\n  trek: {\n    colors: 'ffffff, 000000, fbeec9, 4e3b30, f0a22e, a5644e, b58b80, c3986d, a19574, c17529, f2f2f2, 7f7f7f, f7e09e, e1d6cf, fcecd5, eddfda, f0e7e5, f3eae1, ece9e3, f5e3d1, d8d8d8, 595959, f3cc5f, c4ad9f, f9d9ab, dcc0b6, e1d0cc, e7d5c4, d9d4c7, ebc7a3, bfbfbf, 3f3f3f, d29f0f, a78470, f6c781, cba092, d2b9b2, dbc1a7, c6bfab, e1ac76, a5a5a5, 262626, 694f07, 3a2c24, c87d0e, 7b4b3a, 926255, a17242, 7b7153, 90571e, 7f7f7f, 0c0c0c, 2a1f03, 271d18, 855309, 523226, 614138, 6b4c2c, 524b37, 603a14',\n    columns: 10\n  },\n  verve: {\n    colors: 'ffffff, 000000, d2d2d2, 666666, ff388c, e40059, 9c007f, 68007f, 005bd3, 00349e, f2f2f2, 7f7f7f, bdbdbd, e0e0e0, ffd7e8, ffc6dc, ffb8f1, f1b2ff, c3dcff, b8cfff, d8d8d8, 595959, 9d9d9d, c1c1c1, ffafd1, ff8eba, ff71e4, e365ff, 87baff, 72a0ff, bfbfbf, 3f3f3f, 696969, a3a3a3, ff87ba, ff5597, ff2ad7, d519ff, 4b98ff, 2b71ff, a5a5a5, 262626, 343434, 4c4c4c, e90062, ab0042, 75005f, 4e005f, 00449e, 002676, 7f7f7f, 0c0c0c, 151515, 333333, 9b0041, 72002c, 4e003f, 34003f, 002d69, 00194f',\n    columns: 10\n  },\n  monochrome: {\n    colors: '000000, 1a1a1a, 333333, 4d4d4d, 666666, 808080, 999999, b3b3b3, cccccc, e6e6e6, f2f2f2, ffffff',\n    columns: 12\n  },\n  accessible: {\n    colors: 'black, grey, darkred, red, darkorange, gold, green, blue, darkblue, purple, white, darkgrey, saddlebrown, pink, orange, yellow, lightgreen, lightskyblue, lightblue, mediumpurple',\n    columns: 10\n  }\n};\n/**\n * @hidden\n */\n\nlet ColorPickerLocalizationService = /*#__PURE__*/(() => {\n  let ColorPickerLocalizationService = class ColorPickerLocalizationService extends LocalizationService {\n    constructor(prefix, messageService, _rtl) {\n      super(prefix, messageService, _rtl);\n    }\n\n  };\n\n  ColorPickerLocalizationService.ɵfac = function ColorPickerLocalizationService_Factory(t) {\n    return new (t || ColorPickerLocalizationService)(ɵngcc0.ɵɵinject(L10N_PREFIX), ɵngcc0.ɵɵinject(ɵngcc1.MessageService, 8), ɵngcc0.ɵɵinject(RTL, 8));\n  };\n\n  ColorPickerLocalizationService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: ColorPickerLocalizationService,\n    factory: function (t) {\n      return ColorPickerLocalizationService.ɵfac(t);\n    }\n  });\n  ColorPickerLocalizationService = __decorate([__param(0, Inject(L10N_PREFIX)), __param(1, Optional()), __param(2, Optional()), __param(2, Inject(RTL)), __metadata(\"design:paramtypes\", [String, MessageService, Boolean])], ColorPickerLocalizationService);\n  /**\n   * @hidden\n   */\n\n  return ColorPickerLocalizationService;\n})();\nlet ColorGradientLocalizationService = /*#__PURE__*/(() => {\n  let ColorGradientLocalizationService = class ColorGradientLocalizationService extends LocalizationService {\n    constructor(prefix, messageService, _rtl, colorPickerLocalization) {\n      super(prefix, messageService, _rtl);\n      this.colorPickerLocalization = colorPickerLocalization;\n    }\n\n    get(shortKey) {\n      if (this.colorPickerLocalization) {\n        return this.colorPickerLocalization.get(shortKey);\n      }\n\n      return super.get(shortKey);\n    }\n\n  };\n\n  ColorGradientLocalizationService.ɵfac = function ColorGradientLocalizationService_Factory(t) {\n    return new (t || ColorGradientLocalizationService)(ɵngcc0.ɵɵinject(L10N_PREFIX), ɵngcc0.ɵɵinject(ɵngcc1.MessageService, 8), ɵngcc0.ɵɵinject(RTL, 8), ɵngcc0.ɵɵinject(ColorPickerLocalizationService, 8));\n  };\n\n  ColorGradientLocalizationService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: ColorGradientLocalizationService,\n    factory: function (t) {\n      return ColorGradientLocalizationService.ɵfac(t);\n    }\n  });\n  ColorGradientLocalizationService = __decorate([__param(0, Inject(L10N_PREFIX)), __param(1, Optional()), __param(2, Optional()), __param(2, Inject(RTL)), __param(3, Optional()), __param(3, Inject(ColorPickerLocalizationService)), __metadata(\"design:paramtypes\", [String, MessageService, Boolean, ColorPickerLocalizationService])], ColorGradientLocalizationService);\n  /**\n   * @hidden\n   */\n\n  return ColorGradientLocalizationService;\n})();\nlet ColorInputComponent = /*#__PURE__*/(() => {\n  let ColorInputComponent = class ColorInputComponent {\n    constructor(localization, host) {\n      this.localization = localization;\n      this.host = host;\n      /**\n       * Sets whether the alpha slider will be shown.\n       */\n\n      this.opacity = true;\n      /**\n       * Sets the disabled state of the ColorInput.\n       */\n\n      this.disabled = false;\n      /**\n       * Sets the read-only state of the ColorInput.\n       */\n\n      this.readonly = false;\n      /**\n       * Emits a parsed rgba string color.\n       */\n\n      this.valueChange = new EventEmitter();\n      this.colorInputClass = true;\n      /**\n       * The rgba inputs values.\n       */\n\n      this.rgba = {};\n    }\n    /**\n     * Indicates whether any of the inputs are focused.\n     */\n\n\n    get isFocused() {\n      if (!(isDocumentAvailable() && isPresent(this.host))) {\n        return false;\n      }\n\n      const activeElement = document.activeElement;\n      return this.host.nativeElement.contains(activeElement);\n    }\n    /**\n     * Indicates whether any of the rgba inputs have value.\n     */\n\n\n    get rgbaInputValid() {\n      return Object.keys(this.rgba).every(key => isPresent(this.rgba[key]));\n    }\n\n    ngOnChanges(changes) {\n      if (isPresent(changes.value) && !this.isFocused) {\n        this.hex = parseColor$1(this.value, 'hex');\n        this.rgba = getRGBA(this.value);\n        this.rgba.a = parseColor$1(this.value, 'rgba') ? this.rgba.a : 1;\n      }\n    }\n\n    handleRgbaValueChange() {\n      const color = getColorFromRGBA(this.rgba);\n\n      if (!this.rgbaInputValid || color === this.value) {\n        return;\n      }\n\n      this.value = color;\n      this.rgba = getRGBA(this.value);\n      this.hex = parseColor$1(color, 'hex');\n      this.valueChange.emit(color);\n    }\n\n    handleHexValueChange(hex) {\n      this.hex = hex;\n      const color = parseColor$1(hex, 'rgba');\n\n      if (!isPresent(color) || color === this.value) {\n        return;\n      }\n\n      this.value = color;\n      this.rgba = getRGBA(color);\n      this.valueChange.emit(color);\n    }\n\n    handleRgbaInputBlur() {\n      if (!this.rgbaInputValid) {\n        this.rgba = getRGBA(this.value);\n      }\n    }\n\n    handleHexInputBlur() {\n      this.hex = parseColor$1(this.value, 'hex');\n    }\n    /**\n     * @hidden\n     */\n\n\n    textFor(key) {\n      return this.localization.get(key);\n    }\n\n  };\n\n  ColorInputComponent.ɵfac = function ColorInputComponent_Factory(t) {\n    return new (t || ColorInputComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef));\n  };\n\n  ColorInputComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: ColorInputComponent,\n    selectors: [[\"kendo-colorinput\"]],\n    viewQuery: function ColorInputComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c46, 5, ElementRef);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.opacityInput = _t.first);\n      }\n    },\n    hostVars: 2,\n    hostBindings: function ColorInputComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"k-colorinputs\", ctx.colorInputClass);\n      }\n    },\n    inputs: {\n      opacity: \"opacity\",\n      disabled: \"disabled\",\n      readonly: \"readonly\",\n      value: \"value\"\n    },\n    outputs: {\n      valueChange: \"valueChange\"\n    },\n    features: [ɵngcc0.ɵɵNgOnChangesFeature],\n    decls: 17,\n    vars: 36,\n    consts: [[1, \"k-hbox\", \"k-gradient-values\"], [1, \"k-textbox\", \"k-hex-value\", 3, \"disabled\", \"readonly\", \"value\", \"placeholder\", \"blur\", \"input\"], [\"hexInput\", \"\"], [3, \"disabled\", \"readonly\", \"min\", \"max\", \"placeholder\", \"value\", \"autoCorrect\", \"spinners\", \"format\", \"decimals\", \"valueChange\", \"blur\"], [3, \"disabled\", \"readonly\", \"min\", \"max\", \"placeholder\", \"value\", \"autoCorrect\", \"spinners\", \"step\", \"format\", \"decimals\", \"valueChange\", \"blur\", 4, \"ngIf\"], [1, \"k-hex-value\"], [4, \"ngIf\"], [3, \"disabled\", \"readonly\", \"min\", \"max\", \"placeholder\", \"value\", \"autoCorrect\", \"spinners\", \"step\", \"format\", \"decimals\", \"valueChange\", \"blur\"], [\"opacityInput\", \"\"]],\n    template: function ColorInputComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r8 = ɵngcc0.ɵɵgetCurrentView();\n\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"input\", 1, 2);\n        ɵngcc0.ɵɵlistener(\"blur\", function ColorInputComponent_Template_input_blur_1_listener() {\n          return ctx.handleHexInputBlur();\n        })(\"input\", function ColorInputComponent_Template_input_input_1_listener() {\n          ɵngcc0.ɵɵrestoreView(_r8);\n\n          const _r0 = ɵngcc0.ɵɵreference(2);\n\n          return ctx.handleHexValueChange(_r0.value);\n        });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(3, \"kendo-numerictextbox\", 3);\n        ɵngcc0.ɵɵlistener(\"valueChange\", function ColorInputComponent_Template_kendo_numerictextbox_valueChange_3_listener($event) {\n          return ctx.rgba.r = $event;\n        })(\"blur\", function ColorInputComponent_Template_kendo_numerictextbox_blur_3_listener() {\n          return ctx.handleRgbaInputBlur();\n        })(\"valueChange\", function ColorInputComponent_Template_kendo_numerictextbox_valueChange_3_listener() {\n          return ctx.handleRgbaValueChange();\n        });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(4, \"kendo-numerictextbox\", 3);\n        ɵngcc0.ɵɵlistener(\"valueChange\", function ColorInputComponent_Template_kendo_numerictextbox_valueChange_4_listener($event) {\n          return ctx.rgba.g = $event;\n        })(\"blur\", function ColorInputComponent_Template_kendo_numerictextbox_blur_4_listener() {\n          return ctx.handleRgbaInputBlur();\n        })(\"valueChange\", function ColorInputComponent_Template_kendo_numerictextbox_valueChange_4_listener() {\n          return ctx.handleRgbaValueChange();\n        });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(5, \"kendo-numerictextbox\", 3);\n        ɵngcc0.ɵɵlistener(\"valueChange\", function ColorInputComponent_Template_kendo_numerictextbox_valueChange_5_listener($event) {\n          return ctx.rgba.b = $event;\n        })(\"blur\", function ColorInputComponent_Template_kendo_numerictextbox_blur_5_listener() {\n          return ctx.handleRgbaInputBlur();\n        })(\"valueChange\", function ColorInputComponent_Template_kendo_numerictextbox_valueChange_5_listener() {\n          return ctx.handleRgbaValueChange();\n        });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(6, ColorInputComponent_kendo_numerictextbox_6_Template, 2, 11, \"kendo-numerictextbox\", 4);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(7, \"div\", 0);\n        ɵngcc0.ɵɵelementStart(8, \"div\", 5);\n        ɵngcc0.ɵɵtext(9, \"hex\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(10, \"div\");\n        ɵngcc0.ɵɵtext(11, \"r\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(12, \"div\");\n        ɵngcc0.ɵɵtext(13, \"g\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(14, \"div\");\n        ɵngcc0.ɵɵtext(15, \"b\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(16, ColorInputComponent_div_16_Template, 2, 0, \"div\", 6);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"disabled\", ctx.disabled)(\"readonly\", ctx.readonly)(\"value\", ctx.hex || \"\")(\"placeholder\", ctx.textFor(\"hexInputPlaceholder\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"disabled\", ctx.disabled)(\"readonly\", ctx.readonly)(\"min\", 0)(\"max\", 255)(\"placeholder\", ctx.textFor(\"redInputPlaceholder\"))(\"value\", ctx.rgba.r)(\"autoCorrect\", true)(\"spinners\", false)(\"format\", \"n\")(\"decimals\", 0);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"disabled\", ctx.disabled)(\"readonly\", ctx.readonly)(\"min\", 0)(\"max\", 255)(\"placeholder\", ctx.textFor(\"greenInputPlaceholder\"))(\"value\", ctx.rgba.g)(\"autoCorrect\", true)(\"spinners\", false)(\"format\", \"n\")(\"decimals\", 0);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"disabled\", ctx.disabled)(\"readonly\", ctx.readonly)(\"min\", 0)(\"max\", 255)(\"placeholder\", ctx.textFor(\"blueInputPlaceholder\"))(\"value\", ctx.rgba.b)(\"autoCorrect\", true)(\"spinners\", false)(\"format\", \"n\")(\"decimals\", 0);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.opacity);\n        ɵngcc0.ɵɵadvance(10);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.opacity);\n      }\n    },\n    directives: [NumericTextBoxComponent, ɵngcc3.NgIf],\n    encapsulation: 2\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", String)], ColorInputComponent.prototype, \"value\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], ColorInputComponent.prototype, \"opacity\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], ColorInputComponent.prototype, \"disabled\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], ColorInputComponent.prototype, \"readonly\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], ColorInputComponent.prototype, \"valueChange\", void 0);\n\n  __decorate([HostBinding('class.k-colorinputs'), __metadata(\"design:type\", Boolean)], ColorInputComponent.prototype, \"colorInputClass\", void 0);\n\n  __decorate([ViewChild('opacityInput', {\n    read: ElementRef,\n    static: false\n  }), __metadata(\"design:type\", ElementRef)], ColorInputComponent.prototype, \"opacityInput\", void 0);\n\n  ColorInputComponent = __decorate([__metadata(\"design:paramtypes\", [LocalizationService, ElementRef])], ColorInputComponent);\n  return ColorInputComponent;\n})();\nvar ColorGradientComponent_1;\nconst DEFAULT_OUTPUT_FORMAT = 'rgba';\nconst DEFAULT_BACKGROUND_COLOR = 'rgba(255, 0, 0, 1)';\nlet serial = 0;\nconst DRAGHANDLE_MOVE_SPEED = 5;\n/**\n * The ColorGradient component enables smooth color transitions and provides options for selecting specific colors over the drag handle.\n * The ColorGradient is independently used by `kendo-colorpicker` and can be directly added to the page.\n */\n\nlet ColorGradientComponent = ColorGradientComponent_1 = class ColorGradientComponent {\n  constructor(host, ngZone, renderer, cdr, localizationService) {\n    this.host = host;\n    this.ngZone = ngZone;\n    this.renderer = renderer;\n    this.cdr = cdr;\n    this.localizationService = localizationService;\n    /**\n     * @hidden\n     */\n\n    this.hostClasses = true;\n    /**\n     * @hidden\n     */\n\n    this.id = `k-colorgradient-${serial++}`;\n    /**\n     * Defines whether the alpha slider will be displayed.\n     */\n\n    this.opacity = true;\n    /**\n     * Sets the disabled state of the ColorGradient.\n     */\n\n    this.disabled = false;\n    /**\n     * Sets the read-only state of the ColorGradient.\n     */\n\n    this.readonly = false;\n    /**\n     * Specifies whether the ColorGradient should display a 'Clear color' button.\n     */\n\n    this.clearButton = false;\n    /**\n     * Determines the delay time (in milliseconds) before the value is changed on handle drag. A value of 0 indicates no delay.\n     *\n     * @default 0\n     */\n\n    this.delay = 0;\n    /**\n     * Fires each time the user selects a new color.\n     */\n\n    this.valueChange = new EventEmitter();\n    /**\n     * @hidden\n     */\n\n    this.backgroundColor = DEFAULT_BACKGROUND_COLOR;\n    /**\n     * @hidden\n     *\n     * Represents the currently selected `hue`, `saturation`, `value`, and `alpha` values.\n     * The values are initially set in `ngOnInit` or in `ngOnChanges` and are\n     * updated on moving the drag handle or the sliders.\n     */\n\n    this.hsva = {};\n    /**\n     * Specifies the output format of the ColorGradientComponent.\n     * The input value may be in a different format. However, it will be parsed into the output `format`\n     * after the component processes it.\n     *\n     * The supported values are:\n     * * (Default) `rgba`\n     * * `hex`\n     */\n\n    this.format = DEFAULT_OUTPUT_FORMAT;\n    this._tabindex = 0;\n    this.listeners = [];\n    this.updateValues = new Subject();\n\n    this.notifyNgChanged = () => {};\n\n    this.notifyNgTouched = () => {};\n\n    this.dynamicRTLSubscription = localizationService.changes.subscribe(({\n      rtl\n    }) => {\n      this.direction = rtl ? 'rtl' : 'ltr';\n    });\n  }\n  /**\n   * @hidden\n   */\n\n\n  get readonlyAttribute() {\n    return this.readonly;\n  }\n  /**\n   * @hidden\n   */\n\n\n  get disabledClass() {\n    return this.disabled;\n  }\n  /**\n   * @hidden\n   */\n\n\n  get hostTabindex() {\n    return this.tabindex;\n  }\n  /**\n   * @hidden\n   */\n\n\n  get gradientId() {\n    return this.id;\n  }\n  /**\n   * Specifies the value of the initially selected color.\n   */\n\n\n  set value(value) {\n    this._value = parseColor$1(value, this.format);\n  }\n\n  get value() {\n    return this._value;\n  }\n  /**\n   * Specifies the [tabindex](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex) of the component.\n   */\n\n\n  set tabindex(value) {\n    const tabindex = Number(value);\n    const defaultValue = 0;\n    this._tabindex = !isNaN(tabindex) ? tabindex : defaultValue;\n  }\n\n  get tabindex() {\n    return !this.disabled ? this._tabindex : undefined;\n  }\n  /**\n   * Indicates whether the ColorGradient or any of its content is focused.\n   */\n\n\n  get isFocused() {\n    if (!(isDocumentAvailable() && isPresent(this.host))) {\n      return false;\n    }\n\n    return this.host.nativeElement === document.activeElement || this.host.nativeElement.contains(document.activeElement);\n  }\n  /**\n   * @hidden\n   */\n\n\n  get alphaSliderValue() {\n    // setting the initial value to undefined to force the slider to recalculate the height of the slider track on the next cdr run\n    if (!(isPresent(this.hsva) && isPresent(this.hsva.a))) {\n      return;\n    }\n\n    return this.hsva.a * 100;\n  }\n\n  get gradientRect() {\n    return this.gradientWrapper.nativeElement.getBoundingClientRect();\n  }\n\n  ngAfterViewInit() {\n    this.updateUI();\n    this.cdr.detectChanges();\n    this.addEventListeners();\n    this.subscribeChanges();\n  }\n\n  ngOnChanges(changes) {\n    if (isChanged('value', changes) && !this.isFocused) {\n      this.updateUI();\n    }\n\n    if (isChanged('delay', changes)) {\n      this.unsubscribeChanges();\n      this.subscribeChanges();\n    }\n  }\n\n  ngOnDestroy() {\n    this.listeners.forEach(removeListener => removeListener());\n\n    if (this.dynamicRTLSubscription) {\n      this.dynamicRTLSubscription.unsubscribe();\n    }\n\n    this.unsubscribeChanges();\n  }\n  /**\n   * Focuses the component.\n   */\n\n\n  focus() {\n    if (this.disabled) {\n      return;\n    }\n\n    this.host.nativeElement.focus();\n  }\n  /**\n   * @hidden\n   */\n\n\n  reset() {\n    this.handleValueChange(undefined);\n    this.updateUI();\n    this.host.nativeElement.focus();\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleDragPress(args) {\n    if (this.disabled || this.readonly || !isPresent(args.originalEvent)) {\n      return;\n    }\n\n    this.focus();\n    args.originalEvent.preventDefault();\n  }\n  /**\n   * @hidden\n   */\n\n\n  onHandleDrag(args) {\n    if (this.disabled || this.readonly) {\n      return;\n    }\n\n    this.renderer.addClass(this.gradientWrapper.nativeElement, 'k-dragging');\n    this.changePosition(args);\n  }\n  /**\n   * @hidden\n   */\n\n\n  onHandleRelease() {\n    if (this.disabled || this.readonly) {\n      return;\n    }\n\n    this.renderer.removeClass(this.gradientWrapper.nativeElement, 'k-dragging');\n    this.handleValueChange(getColorFromHSV(this.hsva));\n  }\n  /**\n   * @hidden\n   */\n\n\n  onKeyboardAction(args) {\n    if (this.disabled || this.readonly) {\n      return;\n    }\n\n    if (args.key && args.key.indexOf('Arrow') !== -1) {\n      args.preventDefault();\n      const dragHandleElement = this.gradientDragHandle.nativeElement;\n      this.renderer.addClass(this.gradientWrapper.nativeElement, 'k-dragging');\n      let keyboardMoveX = 0;\n      let keyboardMoveY = 0;\n\n      switch (args.key) {\n        case 'ArrowRight':\n          keyboardMoveX = DRAGHANDLE_MOVE_SPEED;\n          break;\n\n        case 'ArrowLeft':\n          keyboardMoveX = -DRAGHANDLE_MOVE_SPEED;\n          break;\n\n        case 'ArrowUp':\n          keyboardMoveY = -DRAGHANDLE_MOVE_SPEED;\n          break;\n\n        case 'ArrowDown':\n          keyboardMoveY = DRAGHANDLE_MOVE_SPEED;\n          break;\n\n        default:\n          break;\n      }\n\n      const newY = parseInt(dragHandleElement.style.top, 10) + keyboardMoveY;\n      const newX = parseInt(dragHandleElement.style.left, 10) + keyboardMoveX;\n      this.renderer.setStyle(dragHandleElement, 'top', `${newY}px`);\n      this.renderer.setStyle(dragHandleElement, 'left', `${newX}px`);\n      this.ngZone.run(() => this.moveDragHandle(newX, newY));\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  changePosition(position) {\n    if (this.disabled || this.readonly) {\n      return;\n    }\n\n    this.gradientDragHandle.nativeElement.focus();\n    const newX = position.clientX - this.gradientRect.left;\n    const newY = position.clientY - this.gradientRect.top;\n    this.ngZone.run(() => this.moveDragHandle(newX, newY));\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleHueSliderChange(hue) {\n    this.handleValueChange(getColorFromHSV(this.hsva));\n    this.backgroundColor = getColorFromHue(hue);\n    this.setAlphaSliderBackground(this.backgroundColor);\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleAlphaSliderChange(alpha) {\n    this.hsva.a = alpha / 100;\n    this.handleValueChange(getColorFromHSV(this.hsva));\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleInputsValueChange(color) {\n    const parsed = parseColor$1(color, this.format);\n\n    if (this.value !== parsed) {\n      this.handleValueChange(parsed);\n      this.updateUI();\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  writeValue(value) {\n    this.value = value;\n\n    if (isPresent(this.gradientWrapper)) {\n      this.updateUI();\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  registerOnChange(fn) {\n    this.notifyNgChanged = fn;\n  }\n  /**\n   * @hidden\n   */\n\n\n  registerOnTouched(fn) {\n    this.notifyNgTouched = fn;\n  }\n  /**\n   * @hidden\n   */\n\n\n  setDisabledState(isDisabled) {\n    this.cdr.markForCheck();\n    this.disabled = isDisabled;\n  }\n  /**\n   * @hidden\n   */\n\n\n  get colorGradientHandleTitle() {\n    return this.localizationService.get('colorGradientHandle');\n  }\n  /**\n   * @hidden\n   */\n\n\n  get colorGradientHandleAriaLabel() {\n    const parsed = parseColor$1(this.value, this.format);\n    return `${this.value ? parsed : this.localizationService.get('colorGradientHandle')}`;\n  }\n  /**\n   * @hidden\n   */\n\n\n  get hueSliderTitle() {\n    return this.localizationService.get('hueSliderHandle');\n  }\n  /**\n   * @hidden\n   */\n\n\n  get opacitySliderTitle() {\n    return this.localizationService.get('opacitySliderHandle');\n  }\n  /**\n   * @hidden\n   */\n\n\n  get clearButtonTitle() {\n    return this.localizationService.get('clearButton');\n  }\n  /**\n   * @hidden\n   * Used by the TextBoxContainer to determine if the component is empty.\n   */\n\n\n  isEmpty() {\n    return false;\n  }\n\n  moveDragHandle(positionX, positionY) {\n    const top = fitIntoBounds(positionY, 0, this.gradientRect.height);\n    const left = fitIntoBounds(positionX, 0, this.gradientRect.width);\n    this.setDragHandleElementPosition(top, left);\n    this.hsva.s = left / this.gradientRect.width;\n    this.hsva.v = 1 - top / this.gradientRect.height;\n    this.updateValues.next(getColorFromHSV(this.hsva));\n    this.setAlphaSliderBackground(getColorFromHSV(Object.assign({}, this.hsva, {\n      a: 1\n    })));\n  }\n\n  updateUI() {\n    if (!isDocumentAvailable()) {\n      return;\n    }\n\n    this.hsva = this.value ? getHSV(this.value) : {\n      h: 0,\n      s: 0,\n      v: 1,\n      a: 1\n    };\n    const top = (1 - this.hsva.v) * this.gradientRect.height;\n    const left = this.hsva.s * this.gradientRect.width;\n    this.setDragHandleElementPosition(top, left);\n    this.backgroundColor = getColorFromHue(this.hsva.h);\n    this.setAlphaSliderBackground(this.backgroundColor);\n    this.setHostElementAriaLabel();\n  }\n\n  handleValueChange(color) {\n    if (this.value === color) {\n      return;\n    }\n\n    this.value = color;\n    this.valueChange.emit(color);\n    this.notifyNgChanged(color);\n    this.setHostElementAriaLabel();\n  }\n\n  setDragHandleElementPosition(top, left) {\n    const dragHandle = this.gradientDragHandle.nativeElement;\n    this.renderer.setStyle(dragHandle, 'top', `${top}px`);\n    this.renderer.setStyle(dragHandle, 'left', `${left}px`);\n  }\n\n  setAlphaSliderBackground(backgroundColor) {\n    if (!isPresent(this.alphaSlider)) {\n      return;\n    }\n\n    const sliderTrack = this.alphaSlider.track.nativeElement;\n    this.renderer.setStyle(sliderTrack, 'background', `linear-gradient(to top, transparent, ${backgroundColor})`);\n  }\n\n  setHostElementAriaLabel() {\n    const parsed = parseColor$1(this.value, this.format);\n    this.renderer.setAttribute(this.host.nativeElement, 'aria-label', `${this.value ? parsed : this.localizationService.get('colorGradientNoColor')}`);\n  }\n\n  addEventListeners() {\n    this.ngZone.runOutsideAngular(() => {\n      const focusOutListener = this.renderer.listen(this.host.nativeElement, 'focusout', event => {\n        if (!containsFocus(this.host.nativeElement, event.relatedTarget) && isUntouched(this.host)) {\n          this.ngZone.run(() => this.notifyNgTouched());\n        }\n      });\n      const keydownListener = this.renderer.listen(this.gradientDragHandle.nativeElement, 'keydown', event => {\n        this.onKeyboardAction(event);\n      });\n      const keyupListener = this.renderer.listen(this.gradientDragHandle.nativeElement, 'keyup', () => {\n        this.renderer.removeClass(this.gradientWrapper.nativeElement, 'k-dragging');\n\n        if (!this.readonly && !this.disabled) {\n          this.ngZone.run(() => this.handleValueChange(getColorFromHSV(this.hsva)));\n        }\n      });\n      const dragHandleFocusInListener = this.renderer.listen(this.gradientDragHandle.nativeElement, 'focusin', () => {\n        this.renderer.addClass(this.gradientDragHandle.nativeElement, 'k-state-focus');\n      });\n      const dragHandleFocusOutListener = this.renderer.listen(this.gradientDragHandle.nativeElement, 'focusout', () => {\n        this.renderer.removeClass(this.gradientDragHandle.nativeElement, 'k-state-focus');\n      });\n      this.listeners.push(focusOutListener, keydownListener, keyupListener, dragHandleFocusInListener, dragHandleFocusOutListener);\n    });\n  }\n\n  subscribeChanges() {\n    this.changeRequestsSubscription = this.updateValues.pipe(throttleTime(this.delay)).subscribe(value => {\n      this.handleValueChange(value);\n    });\n  }\n\n  unsubscribeChanges() {\n    if (this.changeRequestsSubscription) {\n      this.changeRequestsSubscription.unsubscribe();\n    }\n  }\n\n};\n\nColorGradientComponent.ɵfac = function ColorGradientComponent_Factory(t) {\n  return new (t || ColorGradientComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService));\n};\n\nColorGradientComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: ColorGradientComponent,\n  selectors: [[\"kendo-colorgradient\"]],\n  viewQuery: function ColorGradientComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵviewQuery(_c47, 5, ElementRef);\n      ɵngcc0.ɵɵviewQuery(_c48, 5);\n      ɵngcc0.ɵɵviewQuery(_c49, 5);\n      ɵngcc0.ɵɵviewQuery(_c50, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.gradientDragHandle = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.inputs = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.alphaSlider = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.gradientWrapper = _t.first);\n    }\n  },\n  hostVars: 10,\n  hostBindings: function ColorGradientComponent_HostBindings(rf, ctx) {\n    if (rf & 2) {\n      ɵngcc0.ɵɵattribute(\"dir\", ctx.direction)(\"aria-readonly\", ctx.readonlyAttribute)(\"tabindex\", ctx.hostTabindex)(\"id\", ctx.gradientId);\n      ɵngcc0.ɵɵclassProp(\"k-widget\", ctx.hostClasses)(\"k-flatcolorpicker\", ctx.hostClasses)(\"k-state-disabled\", ctx.disabledClass);\n    }\n  },\n  inputs: {\n    id: \"id\",\n    opacity: \"opacity\",\n    disabled: \"disabled\",\n    readonly: \"readonly\",\n    clearButton: \"clearButton\",\n    delay: \"delay\",\n    format: \"format\",\n    value: \"value\",\n    tabindex: \"tabindex\"\n  },\n  outputs: {\n    valueChange: \"valueChange\"\n  },\n  features: [ɵngcc0.ɵɵProvidersFeature([{\n    multi: true,\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => ColorGradientComponent_1)\n  }, {\n    provide: KendoInput,\n    useExisting: forwardRef(() => ColorGradientComponent_1)\n  }, ColorGradientLocalizationService, {\n    provide: LocalizationService,\n    useExisting: ColorGradientLocalizationService\n  }, {\n    provide: L10N_PREFIX,\n    useValue: 'kendo.colorgradient'\n  }]), ɵngcc0.ɵɵNgOnChangesFeature],\n  decls: 13,\n  vars: 24,\n  consts: function () {\n    let i18n_51;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The aria-label applied to the ColorGradient component when the value is empty.\n       * @meaning kendo.colorgradient.colorGradientNoColor\n       */\n      const MSG_EXTERNAL_3796155240301823948$$DIST_FESM2015_INDEX_JS_52 = goog.getMsg(\"Colorgradient no color chosen\");\n      i18n_51 = MSG_EXTERNAL_3796155240301823948$$DIST_FESM2015_INDEX_JS_52;\n    } else {\n      i18n_51 = $localize`:kendo.colorgradient.colorGradientNoColor|The aria-label applied to the ColorGradient component when the value is empty.␟136a6a537523c480df0e58c17cc6d4c2dda8e626␟3796155240301823948:Colorgradient no color chosen`;\n    }\n\n    let i18n_53;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The title for the gradient color drag handle chooser.\n       * @meaning kendo.colorgradient.colorGradientHandle\n       */\n      const MSG_EXTERNAL_8537406358423916512$$DIST_FESM2015_INDEX_JS_54 = goog.getMsg(\"Choose color\");\n      i18n_53 = MSG_EXTERNAL_8537406358423916512$$DIST_FESM2015_INDEX_JS_54;\n    } else {\n      i18n_53 = $localize`:kendo.colorgradient.colorGradientHandle|The title for the gradient color drag handle chooser.␟462ab46551fd64dca63ba38254e46a52aeb05205␟8537406358423916512:Choose color`;\n    }\n\n    let i18n_55;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The title for the clear button.\n       * @meaning kendo.colorgradient.clearButton\n       */\n      const MSG_EXTERNAL_7605097752673642325$$DIST_FESM2015_INDEX_JS_56 = goog.getMsg(\"Clear value\");\n      i18n_55 = MSG_EXTERNAL_7605097752673642325$$DIST_FESM2015_INDEX_JS_56;\n    } else {\n      i18n_55 = $localize`:kendo.colorgradient.clearButton|The title for the clear button.␟6dc40c4a4ff302d1fe29e7bf9eadf1440b4654cf␟7605097752673642325:Clear value`;\n    }\n\n    let i18n_57;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The title for the hue slider handle.\n       * @meaning kendo.colorgradient.hueSliderHandle\n       */\n      const MSG_EXTERNAL_8568799441668530127$$DIST_FESM2015_INDEX_JS_58 = goog.getMsg(\"Set hue\");\n      i18n_57 = MSG_EXTERNAL_8568799441668530127$$DIST_FESM2015_INDEX_JS_58;\n    } else {\n      i18n_57 = $localize`:kendo.colorgradient.hueSliderHandle|The title for the hue slider handle.␟22a98afddf46223dce8a3e122f4fe84ca76488b9␟8568799441668530127:Set hue`;\n    }\n\n    let i18n_59;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The title for the opacity slider handle.\n       * @meaning kendo.colorgradient.opacitySliderHandle\n       */\n      const MSG_EXTERNAL_2665102430468067218$$DIST_FESM2015_INDEX_JS_60 = goog.getMsg(\"Set opacity\");\n      i18n_59 = MSG_EXTERNAL_2665102430468067218$$DIST_FESM2015_INDEX_JS_60;\n    } else {\n      i18n_59 = $localize`:kendo.colorgradient.opacitySliderHandle|The title for the opacity slider handle.␟ad3087c7bf139a41bf6a7fc454f4e857492c9d22␟2665102430468067218:Set opacity`;\n    }\n\n    let i18n_61;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The placeholder for the HEX color input.\n       * @meaning kendo.colorgradient.hexInputPlaceholder\n       */\n      const MSG_EXTERNAL_1551996638068326100$$DIST_FESM2015_INDEX_JS_62 = goog.getMsg(\"HEX Color\");\n      i18n_61 = MSG_EXTERNAL_1551996638068326100$$DIST_FESM2015_INDEX_JS_62;\n    } else {\n      i18n_61 = $localize`:kendo.colorgradient.hexInputPlaceholder|The placeholder for the HEX color input.␟0223abe5dc060383b58df6d9f83dc98b08ba8e2b␟1551996638068326100:HEX Color`;\n    }\n\n    let i18n_63;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The placeholder for the red color input.\n       * @meaning kendo.colorgradient.redInputPlaceholder\n       */\n      const MSG_EXTERNAL_865798719701025148$$DIST_FESM2015_INDEX_JS_64 = goog.getMsg(\"Red\");\n      i18n_63 = MSG_EXTERNAL_865798719701025148$$DIST_FESM2015_INDEX_JS_64;\n    } else {\n      i18n_63 = $localize`:kendo.colorgradient.redInputPlaceholder|The placeholder for the red color input.␟ec8e6ab816ff2b3686ad6594068d26e3c72e49d3␟865798719701025148:Red`;\n    }\n\n    let i18n_65;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The placeholder for the green color input.\n       * @meaning kendo.colorgradient.greenInputPlaceholder\n       */\n      const MSG_EXTERNAL_7119549617208224702$$DIST_FESM2015_INDEX_JS_66 = goog.getMsg(\"Green\");\n      i18n_65 = MSG_EXTERNAL_7119549617208224702$$DIST_FESM2015_INDEX_JS_66;\n    } else {\n      i18n_65 = $localize`:kendo.colorgradient.greenInputPlaceholder|The placeholder for the green color input.␟50e5480cded07f92356e43143800db6b44dce024␟7119549617208224702:Green`;\n    }\n\n    let i18n_67;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The placeholder for the blue color input.\n       * @meaning kendo.colorgradient.blueInputPlaceholder\n       */\n      const MSG_EXTERNAL_8925567330503382499$$DIST_FESM2015_INDEX_JS_68 = goog.getMsg(\"Blue\");\n      i18n_67 = MSG_EXTERNAL_8925567330503382499$$DIST_FESM2015_INDEX_JS_68;\n    } else {\n      i18n_67 = $localize`:kendo.colorgradient.blueInputPlaceholder|The placeholder for the blue color input.␟f07b6e271e4cb957c512029298715c8f4970eca8␟8925567330503382499:Blue`;\n    }\n\n    let i18n_69;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The placeholder for the alpha input.\n       * @meaning kendo.colorgradient.alphaInputPlaceholder\n       */\n      const MSG_EXTERNAL_6303797935938211585$$DIST_FESM2015_INDEX_JS_70 = goog.getMsg(\"Alpha\");\n      i18n_69 = MSG_EXTERNAL_6303797935938211585$$DIST_FESM2015_INDEX_JS_70;\n    } else {\n      i18n_69 = $localize`:kendo.colorgradient.alphaInputPlaceholder|The placeholder for the alpha input.␟122a5434fa0f1ee3ef735e859c1db1606542c995␟6303797935938211585:Alpha`;\n    }\n\n    return [[\"kendoColorGradientLocalizedMessages\", \"\", \"colorGradientNoColor\", i18n_51, \"colorGradientHandle\", i18n_53, \"clearButton\", i18n_55, \"hueSliderHandle\", i18n_57, \"opacitySliderHandle\", i18n_59, \"hexInputPlaceholder\", i18n_61, \"redInputPlaceholder\", i18n_63, \"greenInputPlaceholder\", i18n_65, \"blueInputPlaceholder\", i18n_67, \"alphaInputPlaceholder\", i18n_69], [1, \"k-hbox\", \"k-hsv-wrap\"], [1, \"k-hsv-rectangle\"], [\"kendoDraggable\", \"\", 1, \"k-hsv-gradient\", 3, \"click\", \"kendoPress\", \"kendoDrag\", \"kendoRelease\"], [\"gradientWrapper\", \"\"], [\"tabindex\", \"0\", 1, \"k-draghandle\"], [\"gradientDragHandle\", \"\"], [\"class\", \"k-clear-color k-button k-bare k-button-icon\", \"tabindex\", \"0\", 3, \"click\", \"keydown.enter\", \"keydown.space\", 4, \"ngIf\"], [1, \"k-hue-slider\", 3, \"dragHandleTitle\", \"disabled\", \"readonly\", \"showButtons\", \"tickPlacement\", \"vertical\", \"min\", \"max\", \"smallStep\", \"largeStep\", \"value\", \"valueChange\"], [\"class\", \"k-alpha-slider\", 3, \"dragHandleTitle\", \"disabled\", \"readonly\", \"showButtons\", \"tickPlacement\", \"vertical\", \"min\", \"max\", \"smallStep\", \"largeStep\", \"value\", \"valueChange\", 4, \"ngIf\"], [3, \"opacity\", \"value\", \"disabled\", \"readonly\", \"valueChange\"], [\"inputs\", \"\"], [\"tabindex\", \"0\", 1, \"k-clear-color\", \"k-button\", \"k-bare\", \"k-button-icon\", 3, \"click\", \"keydown.enter\", \"keydown.space\"], [1, \"k-icon\", \"k-i-reset-color\"], [1, \"k-alpha-slider\", 3, \"dragHandleTitle\", \"disabled\", \"readonly\", \"showButtons\", \"tickPlacement\", \"vertical\", \"min\", \"max\", \"smallStep\", \"largeStep\", \"value\", \"valueChange\"], [\"alphaSlider\", \"\"]];\n  },\n  template: function ColorGradientComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵelementContainer(0, 0);\n      ɵngcc0.ɵɵelementStart(1, \"div\", 1);\n      ɵngcc0.ɵɵelementStart(2, \"div\", 2);\n      ɵngcc0.ɵɵelementStart(3, \"div\", 3, 4);\n      ɵngcc0.ɵɵlistener(\"click\", function ColorGradientComponent_Template_div_click_3_listener($event) {\n        return ctx.changePosition($event);\n      })(\"kendoPress\", function ColorGradientComponent_Template_div_kendoPress_3_listener($event) {\n        return ctx.handleDragPress($event);\n      })(\"kendoDrag\", function ColorGradientComponent_Template_div_kendoDrag_3_listener($event) {\n        return ctx.onHandleDrag($event);\n      })(\"kendoRelease\", function ColorGradientComponent_Template_div_kendoRelease_3_listener() {\n        return ctx.onHandleRelease();\n      });\n      ɵngcc0.ɵɵelement(5, \"div\", 5, 6);\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵelementStart(7, \"div\");\n      ɵngcc0.ɵɵtemplate(8, ColorGradientComponent_span_8_Template, 2, 2, \"span\", 7);\n      ɵngcc0.ɵɵelementStart(9, \"kendo-slider\", 8);\n      ɵngcc0.ɵɵlistener(\"valueChange\", function ColorGradientComponent_Template_kendo_slider_valueChange_9_listener($event) {\n        return ctx.hsva.h = $event;\n      })(\"valueChange\", function ColorGradientComponent_Template_kendo_slider_valueChange_9_listener($event) {\n        return ctx.handleHueSliderChange($event);\n      });\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵtemplate(10, ColorGradientComponent_kendo_slider_10_Template, 2, 11, \"kendo-slider\", 9);\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵelementStart(11, \"kendo-colorinput\", 10, 11);\n      ɵngcc0.ɵɵlistener(\"valueChange\", function ColorGradientComponent_Template_kendo_colorinput_valueChange_11_listener($event) {\n        return ctx.handleInputsValueChange($event);\n      });\n      ɵngcc0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      ɵngcc0.ɵɵadvance(2);\n      ɵngcc0.ɵɵstyleProp(\"background-color\", ctx.backgroundColor);\n      ɵngcc0.ɵɵadvance(3);\n      ɵngcc0.ɵɵattribute(\"title\", ctx.colorGradientHandleTitle)(\"aria-label\", ctx.colorGradientHandleAriaLabel);\n      ɵngcc0.ɵɵadvance(2);\n      ɵngcc0.ɵɵclassMapInterpolate1(\"k-hbox k-sliders-wrap \", ctx.clearButton ? \"k-sliders-wrap-clearable\" : \"\", \"\");\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngIf\", ctx.clearButton);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"dragHandleTitle\", ctx.hueSliderTitle)(\"disabled\", ctx.disabled)(\"readonly\", ctx.readonly)(\"showButtons\", false)(\"tickPlacement\", \"none\")(\"vertical\", true)(\"min\", 0)(\"max\", 360)(\"smallStep\", 5)(\"largeStep\", 10)(\"value\", ctx.hsva.h);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngIf\", ctx.opacity && ctx.format === \"rgba\");\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"opacity\", ctx.opacity)(\"value\", ctx.value)(\"disabled\", ctx.disabled)(\"readonly\", ctx.readonly);\n    }\n  },\n  directives: function () {\n    return [LocalizedColorPickerMessagesDirective, ɵngcc2.DraggableDirective, ɵngcc3.NgIf, SliderComponent, ColorInputComponent];\n  },\n  encapsulation: 2\n});\n\n__decorate([HostBinding('class.k-widget'), HostBinding('class.k-flatcolorpicker'), __metadata(\"design:type\", Boolean)], ColorGradientComponent.prototype, \"hostClasses\", void 0);\n\n__decorate([HostBinding('attr.aria-readonly'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], ColorGradientComponent.prototype, \"readonlyAttribute\", null);\n\n__decorate([HostBinding('class.k-state-disabled'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], ColorGradientComponent.prototype, \"disabledClass\", null);\n\n__decorate([HostBinding('attr.tabindex'), __metadata(\"design:type\", Number), __metadata(\"design:paramtypes\", [])], ColorGradientComponent.prototype, \"hostTabindex\", null);\n\n__decorate([HostBinding('attr.id'), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [])], ColorGradientComponent.prototype, \"gradientId\", null);\n\n__decorate([Input(), __metadata(\"design:type\", String)], ColorGradientComponent.prototype, \"id\", void 0);\n\n__decorate([HostBinding('attr.dir'), __metadata(\"design:type\", String)], ColorGradientComponent.prototype, \"direction\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], ColorGradientComponent.prototype, \"opacity\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], ColorGradientComponent.prototype, \"disabled\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], ColorGradientComponent.prototype, \"readonly\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], ColorGradientComponent.prototype, \"clearButton\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Number)], ColorGradientComponent.prototype, \"delay\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [String])], ColorGradientComponent.prototype, \"value\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Number), __metadata(\"design:paramtypes\", [Number])], ColorGradientComponent.prototype, \"tabindex\", null);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], ColorGradientComponent.prototype, \"valueChange\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], ColorGradientComponent.prototype, \"format\", void 0);\n\n__decorate([ViewChild('gradientDragHandle', {\n  read: ElementRef,\n  static: false\n}), __metadata(\"design:type\", ElementRef)], ColorGradientComponent.prototype, \"gradientDragHandle\", void 0);\n\n__decorate([ViewChild('inputs', {\n  static: false\n}), __metadata(\"design:type\", ColorInputComponent)], ColorGradientComponent.prototype, \"inputs\", void 0);\n\n__decorate([ViewChild('alphaSlider', {\n  static: false\n}), __metadata(\"design:type\", SliderComponent)], ColorGradientComponent.prototype, \"alphaSlider\", void 0);\n\n__decorate([ViewChild('gradientWrapper', {\n  static: false\n}), __metadata(\"design:type\", ElementRef)], ColorGradientComponent.prototype, \"gradientWrapper\", void 0);\n\nColorGradientComponent = ColorGradientComponent_1 = __decorate([__metadata(\"design:paramtypes\", [ElementRef, NgZone, Renderer2, ChangeDetectorRef, LocalizationService])], ColorGradientComponent);\nvar ColorPickerComponent_1;\nconst DEFAULT_PRESET = 'office';\nconst DEFAULT_ACCESSIBLE_PRESET = 'accessible';\nlet serial$1 = 0;\n/**\n * Represents the [Kendo UI ColorPicker component for Angular]({% slug overview_colorpicker %}).\n * Designed to replace the `<input type=\"color\">` HTML5 tag which is not widely supported in browsers.\n */\n\nlet ColorPickerComponent = ColorPickerComponent_1 = class ColorPickerComponent {\n  constructor(popupService, cdr, localizationService, ngZone) {\n    this.popupService = popupService;\n    this.cdr = cdr;\n    this.localizationService = localizationService;\n    this.ngZone = ngZone;\n    /**\n     * @hidden\n     */\n\n    this.hostClasses = true;\n    /**\n     * @hidden\n     */\n\n    this.focusableId = `k-colorpicker-${serial$1++}`;\n    /**\n     * Sets what view the ColorPicker will render in the popup.\n     */\n\n    this.view = 'gradient';\n    /**\n     * Sets the read-only state of the ColorPicker.\n     */\n\n    this.readonly = false;\n    /**\n     * Sets the disabled state of the ColorPicker.\n     */\n\n    this.disabled = false;\n    /**\n     * Specifies the output format of the ColorPicker.\n     * The input value may be in a different format. However, it will be parsed into the output `format`\n     * after the component processes it.\n     *\n     * If the `gradient` view is used with the `opacity` option set to true, this setting will be ignored and `rgba` will be used instead.\n     *\n     * The supported values are:\n     * * `rgba` (default)\n     * * `hex`\n     * * [name](https://www.w3.org/wiki/CSS/Properties/color/keywords)\n     */\n\n    this.format = 'rgba';\n    /**\n     * Fires each time the value is changed.\n     */\n\n    this.valueChange = new EventEmitter();\n    /**\n     * Fires each time the popup is about to open.\n     * This event is preventable. If you cancel it, the popup will remain closed.\n     */\n\n    this.open = new EventEmitter();\n    /**\n     * Fires each time the popup is about to close.\n     * This event is preventable. If you cancel it, the popup will remain open.\n     */\n\n    this.close = new EventEmitter();\n    /**\n     * Fires each time ColorPicker is focused.\n     */\n\n    this.onFocus = new EventEmitter();\n    /**\n     * Fires each time the ColorPicker is blurred.\n     */\n\n    this.onBlur = new EventEmitter();\n    /**\n     * Fires each time the left side of the ColorPicker wrapper is clicked.\n     * The event is triggered regardless of whether a ColorPicker icon is set or not.\n     *\n     * The [ActiveColorClickEvent]({% slug api_inputs_activecolorclickevent %}) event provides the option to prevent the popup opening.\n     */\n\n    this.activeColorClick = new EventEmitter();\n    this._tabindex = 0;\n    this._popupSettings = {\n      animate: true\n    };\n    this._paletteSettings = {};\n    this._gradientSettings = {\n      opacity: true,\n      clearButton: false,\n      delay: 0\n    };\n\n    this.notifyNgTouched = () => {};\n\n    this.notifyNgChanged = () => {};\n\n    validatePackage(packageMetadata);\n    this.dynamicRTLSubscription = this.localizationService.changes.subscribe(({\n      rtl\n    }) => {\n      this.direction = rtl ? 'rtl' : 'ltr';\n    });\n  }\n  /**\n   * Specifies the value of the initially selected color.\n   */\n\n\n  set value(value) {\n    this._value = parseColor$1(value, this.format);\n  }\n\n  get value() {\n    return this._value;\n  }\n  /**\n   * Configures the popup of the ColorPicker.\n   */\n\n\n  set popupSettings(value) {\n    this._popupSettings = Object.assign(this._popupSettings, value);\n  }\n\n  get popupSettings() {\n    return this._popupSettings;\n  }\n  /**\n   * Configures the palette that is displayed in the ColorPicker popup.\n   */\n\n\n  set paletteSettings(value) {\n    this._paletteSettings = Object.assign(this._paletteSettings, value);\n  }\n\n  get paletteSettings() {\n    return this._paletteSettings;\n  }\n  /**\n   * Configures the gradient that is displayed in the ColorPicker popup.\n   */\n\n\n  set gradientSettings(value) {\n    this._gradientSettings = Object.assign(this._gradientSettings, value);\n  }\n\n  get gradientSettings() {\n    return this._gradientSettings;\n  }\n  /**\n   * Specifies the [tabindex](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex) of the component.\n   */\n\n\n  set tabindex(value) {\n    const tabindex = Number(value);\n    const defaultValue = 0;\n    this._tabindex = !isNaN(tabindex) ? tabindex : defaultValue;\n  }\n\n  get tabindex() {\n    return !this.disabled ? this._tabindex : undefined;\n  }\n  /**\n   * Indicates whether the ColorPicker popup is open.\n   */\n\n\n  get isOpen() {\n    return isPresent(this.popupRef);\n  }\n  /**\n   * @hidden\n   */\n\n\n  get iconStyles() {\n    if (this.iconClass) {\n      return this.iconClass;\n    }\n\n    if (this.icon) {\n      return `k-icon k-i-${this.icon}`;\n    }\n  }\n\n  ngOnInit() {\n    const defaultPreset = this.format !== 'name' ? DEFAULT_PRESET : DEFAULT_ACCESSIBLE_PRESET;\n    const settingsPalette = this._paletteSettings.palette;\n    const presetColumns = typeof settingsPalette === 'string' && PALETTEPRESETS[settingsPalette] ? PALETTEPRESETS[settingsPalette].columns : undefined;\n    this._paletteSettings = {\n      palette: settingsPalette || defaultPreset,\n      tileSize: this._paletteSettings.tileSize || 24,\n      columns: this._paletteSettings.columns || presetColumns || 10\n    };\n  }\n\n  ngOnChanges(changes) {\n    if (changes.format && changes.format.currentValue === 'name') {\n      this.view = 'palette';\n    }\n\n    if (this.view === 'gradient' && this.gradientSettings.opacity) {\n      this.format = 'rgba';\n      this.value = parseColor$1(this.value, this.format);\n    }\n  }\n\n  ngOnDestroy() {\n    this.closePopup();\n\n    if (this.dynamicRTLSubscription) {\n      this.dynamicRTLSubscription.unsubscribe();\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleWrapperClick() {\n    this.toggleWithEvents(!this.isOpen);\n    this.focus();\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleActiveColorClick() {\n    this.focus();\n    const event = new ActiveColorClickEvent(this.value);\n    this.activeColorClick.emit(event);\n\n    if (!event.isOpenPrevented() || this.isOpen) {\n      this.handleWrapperClick();\n    }\n  }\n  /**\n   * Focuses the wrapper of the ColorPicker.\n   */\n\n\n  focus() {\n    if (this.disabled) {\n      return;\n    }\n\n    this.wrapper.nativeElement.focus();\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleWrapperFocus() {\n    if (isPresent(this.palette)) {\n      this.palette.nativeElement.focus();\n    }\n\n    if (this.isFocused) {\n      return;\n    }\n\n    this.isFocused = true;\n    this.onFocus.emit();\n  }\n  /**\n   * Blurs the ColorPicker.\n   */\n\n\n  blur() {\n    this.wrapper.nativeElement.blur();\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleWrapperBlur() {\n    if (this.isOpen) {\n      return;\n    }\n\n    this.isFocused = false;\n    this.onBlur.emit();\n    this.notifyNgTouched();\n  }\n  /**\n   * Clears the color value of the ColorPicker.\n   */\n\n\n  reset() {\n    if (!isPresent(this.value)) {\n      return;\n    }\n\n    this._value = undefined;\n    this.notifyNgChanged(undefined);\n  }\n  /**\n   * Toggles the popup of the ColorPicker.\n   * Does not trigger the `open` and `close` events of the component.\n   *\n   * @param open An optional parameter. Specifies whether the popup will be opened or closed.\n   */\n\n\n  toggle(open) {\n    if (this.disabled || this.readonly) {\n      return;\n    }\n\n    this.closePopup();\n    open = isPresent(open) ? open : !this.isOpen;\n\n    if (open) {\n      this.openPopup();\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleValueChange(color, closePopup) {\n    const parsedColor = parseColor$1(color, this.format);\n    const valueChange = parsedColor !== this.value;\n\n    if (closePopup) {\n      this.toggleWithEvents(false);\n      this.focus();\n    }\n\n    if (valueChange) {\n      this.value = parsedColor;\n      this.valueChange.emit(parsedColor);\n      this.notifyNgChanged(parsedColor);\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  handlePopupBlur(event) {\n    const focusInPopupElement = this.popupRef.popupElement.contains(event.relatedTarget);\n    const wrapperClicked = event.relatedTarget === this.wrapper.nativeElement;\n\n    if (!this.isFocused || wrapperClicked || focusInPopupElement) {\n      return;\n    }\n\n    this.isFocused = false;\n    this.onBlur.emit();\n    this.notifyNgTouched();\n    this.toggleWithEvents(false);\n  }\n  /**\n   * @hidden\n   */\n\n\n  writeValue(value) {\n    this.value = value;\n  }\n  /**\n   * @hidden\n   */\n\n\n  registerOnChange(fn) {\n    this.notifyNgChanged = fn;\n  }\n  /**\n   * @hidden\n   */\n\n\n  registerOnTouched(fn) {\n    this.notifyNgTouched = fn;\n  }\n  /**\n   * @hidden\n   */\n\n\n  setDisabledState(isDisabled) {\n    this.cdr.markForCheck();\n    this.disabled = isDisabled;\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleWrapperKeyDown(event) {\n    if (event.keyCode === Keys.ArrowDown || event.keyCode === Keys.Enter) {\n      event.preventDefault();\n      this.toggleWithEvents(true);\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  handlePopupKeyDown(event) {\n    if (event.keyCode === Keys.Escape) {\n      this.toggleWithEvents(false);\n      this.wrapper.nativeElement.focus();\n    }\n\n    if (event.keyCode === Keys.Tab) {\n      const firstElement = this.colorGradient ? this.colorGradient.gradientDragHandle.nativeElement : this.palette.nativeElement;\n      const lastElement = this.palette ? this.palette.nativeElement : this.colorGradient.inputs.opacityInput.nativeElement.childNodes[1].children[0];\n\n      if (event.shiftKey) {\n        if (event.target === firstElement) {\n          event.preventDefault();\n          lastElement.focus();\n          return;\n        }\n      } else {\n        if (event.target === lastElement) {\n          event.preventDefault();\n          firstElement.focus();\n          return;\n        }\n      }\n    }\n  }\n  /**\n   * @hidden\n   * Used by the TextBoxContainer to determine if the component is empty.\n   */\n\n\n  isEmpty() {\n    return false;\n  }\n\n  toggleWithEvents(open) {\n    const sameState = this.isOpen === open;\n\n    if (this.disabled || this.readonly || sameState) {\n      return;\n    }\n\n    const eventArgs = new PreventableEvent();\n    open ? this.open.emit(eventArgs) : this.close.emit(eventArgs);\n\n    if (!eventArgs.isDefaultPrevented()) {\n      this.toggle(open);\n    }\n\n    if (open) {\n      this.ngZone.runOutsideAngular(() => {\n        setTimeout(() => {\n          if (this.colorGradient) {\n            this.colorGradient.gradientDragHandle.nativeElement.focus();\n          }\n        });\n      });\n    }\n  }\n\n  openPopup() {\n    const horizontalAlign = this.direction === \"rtl\" ? \"right\" : \"left\";\n    const anchorPosition = {\n      horizontal: horizontalAlign,\n      vertical: \"bottom\"\n    };\n    const popupPosition = {\n      horizontal: horizontalAlign,\n      vertical: \"top\"\n    };\n    this.popupRef = this.popupService.open({\n      anchor: this.wrapper,\n      animate: this.popupSettings.animate,\n      appendTo: this.popupSettings.appendTo,\n      popupAlign: popupPosition,\n      anchorAlign: anchorPosition,\n      popupClass: 'k-colorpicker-popup',\n      content: this.popupTemplate,\n      positionMode: 'absolute'\n    });\n    this.popupRef.popupAnchorViewportLeave.subscribe(() => {\n      this.toggleWithEvents(false);\n\n      if (!this.isOpen) {\n        this.wrapper.nativeElement.focus({\n          preventScroll: true\n        });\n      }\n    });\n  }\n\n  closePopup() {\n    if (!this.isOpen) {\n      return;\n    }\n\n    this.popupRef.close();\n    this.popupRef = null;\n    this.palette = null;\n  }\n\n};\n\nColorPickerComponent.ɵfac = function ColorPickerComponent_Factory(t) {\n  return new (t || ColorPickerComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc5.PopupService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone));\n};\n\nColorPickerComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: ColorPickerComponent,\n  selectors: [[\"kendo-colorpicker\"]],\n  viewQuery: function ColorPickerComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵviewQuery(_c71, 5, ElementRef);\n      ɵngcc0.ɵɵviewQuery(_c72, 7, ViewContainerRef);\n      ɵngcc0.ɵɵviewQuery(_c20, 7);\n      ɵngcc0.ɵɵviewQuery(_c73, 7);\n      ɵngcc0.ɵɵviewQuery(_c74, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.palette = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.container = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.wrapper = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.popupTemplate = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.colorGradient = _t.first);\n    }\n  },\n  hostVars: 5,\n  hostBindings: function ColorPickerComponent_HostBindings(rf, ctx) {\n    if (rf & 2) {\n      ɵngcc0.ɵɵattribute(\"dir\", ctx.direction);\n      ɵngcc0.ɵɵclassProp(\"k-widget\", ctx.hostClasses)(\"k-colorpicker\", ctx.hostClasses);\n    }\n  },\n  inputs: {\n    focusableId: \"focusableId\",\n    view: \"view\",\n    readonly: \"readonly\",\n    disabled: \"disabled\",\n    format: \"format\",\n    value: \"value\",\n    popupSettings: \"popupSettings\",\n    paletteSettings: \"paletteSettings\",\n    gradientSettings: \"gradientSettings\",\n    tabindex: \"tabindex\",\n    icon: \"icon\",\n    iconClass: \"iconClass\"\n  },\n  outputs: {\n    valueChange: \"valueChange\",\n    open: \"open\",\n    close: \"close\",\n    onFocus: \"focus\",\n    onBlur: \"blur\",\n    activeColorClick: \"activeColorClick\"\n  },\n  features: [ɵngcc0.ɵɵProvidersFeature([{\n    multi: true,\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => ColorPickerComponent_1)\n  }, {\n    provide: KendoInput,\n    useExisting: forwardRef(() => ColorPickerComponent_1)\n  }, ColorPickerLocalizationService, {\n    provide: LocalizationService,\n    useExisting: ColorPickerLocalizationService\n  }, {\n    provide: L10N_PREFIX,\n    useValue: 'kendo.colorpicker'\n  }]), ɵngcc0.ɵɵNgOnChangesFeature],\n  decls: 11,\n  vars: 12,\n  consts: function () {\n    let i18n_75;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The title for the gradient color drag handle chooser.\n       * @meaning kendo.colorpicker.colorGradientHandle\n       */\n      const MSG_EXTERNAL_8067778471922495440$$DIST_FESM2015_INDEX_JS_76 = goog.getMsg(\"Choose color\");\n      i18n_75 = MSG_EXTERNAL_8067778471922495440$$DIST_FESM2015_INDEX_JS_76;\n    } else {\n      i18n_75 = $localize`:kendo.colorpicker.colorGradientHandle|The title for the gradient color drag handle chooser.␟8d537502a437254763c963398484bd362820af61␟8067778471922495440:Choose color`;\n    }\n\n    let i18n_77;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The title for the clear button.\n       * @meaning kendo.colorpicker.clearButton\n       */\n      const MSG_EXTERNAL_935472034136733879$$DIST_FESM2015_INDEX_JS_78 = goog.getMsg(\"Clear value\");\n      i18n_77 = MSG_EXTERNAL_935472034136733879$$DIST_FESM2015_INDEX_JS_78;\n    } else {\n      i18n_77 = $localize`:kendo.colorpicker.clearButton|The title for the clear button.␟aae9caf1dbc689cd51ace5c265cbf45552a580b6␟935472034136733879:Clear value`;\n    }\n\n    let i18n_79;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The title for the hue slider handle.\n       * @meaning kendo.colorpicker.hueSliderHandle\n       */\n      const MSG_EXTERNAL_1739045502529621844$$DIST_FESM2015_INDEX_JS_80 = goog.getMsg(\"Set hue\");\n      i18n_79 = MSG_EXTERNAL_1739045502529621844$$DIST_FESM2015_INDEX_JS_80;\n    } else {\n      i18n_79 = $localize`:kendo.colorpicker.hueSliderHandle|The title for the hue slider handle.␟7af8ad339d09d41bfa8fa5f4e44d16e326cafd54␟1739045502529621844:Set hue`;\n    }\n\n    let i18n_81;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The title for the opacity slider handle.\n       * @meaning kendo.colorpicker.opacitySliderHandle\n       */\n      const MSG_EXTERNAL_1818720388700598438$$DIST_FESM2015_INDEX_JS_82 = goog.getMsg(\"Set opacity\");\n      i18n_81 = MSG_EXTERNAL_1818720388700598438$$DIST_FESM2015_INDEX_JS_82;\n    } else {\n      i18n_81 = $localize`:kendo.colorpicker.opacitySliderHandle|The title for the opacity slider handle.␟21883ee2927bd4cde8071c9cbec41901a0bc4bd2␟1818720388700598438:Set opacity`;\n    }\n\n    let i18n_83;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The placeholder for the HEX color input.\n       * @meaning kendo.colorpicker.hexInputPlaceholder\n       */\n      const MSG_EXTERNAL_67581802130075115$$DIST_FESM2015_INDEX_JS_84 = goog.getMsg(\"HEX Color\");\n      i18n_83 = MSG_EXTERNAL_67581802130075115$$DIST_FESM2015_INDEX_JS_84;\n    } else {\n      i18n_83 = $localize`:kendo.colorpicker.hexInputPlaceholder|The placeholder for the HEX color input.␟88c518588be223639d20666430d42b88990166c9␟67581802130075115:HEX Color`;\n    }\n\n    let i18n_85;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The placeholder for the red color input.\n       * @meaning kendo.colorpicker.redInputPlaceholder\n       */\n      const MSG_EXTERNAL_1242921922786989001$$DIST_FESM2015_INDEX_JS_86 = goog.getMsg(\"Red\");\n      i18n_85 = MSG_EXTERNAL_1242921922786989001$$DIST_FESM2015_INDEX_JS_86;\n    } else {\n      i18n_85 = $localize`:kendo.colorpicker.redInputPlaceholder|The placeholder for the red color input.␟60f46a6db83b89c15885de76451bb26478637d2c␟1242921922786989001:Red`;\n    }\n\n    let i18n_87;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The placeholder for the green color input.\n       * @meaning kendo.colorpicker.greenInputPlaceholder\n       */\n      const MSG_EXTERNAL_564969508273982379$$DIST_FESM2015_INDEX_JS_88 = goog.getMsg(\"Green\");\n      i18n_87 = MSG_EXTERNAL_564969508273982379$$DIST_FESM2015_INDEX_JS_88;\n    } else {\n      i18n_87 = $localize`:kendo.colorpicker.greenInputPlaceholder|The placeholder for the green color input.␟0c1eef35af82330d89cacecb2aa482d9da1e3a4b␟564969508273982379:Green`;\n    }\n\n    let i18n_89;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The placeholder for the blue color input.\n       * @meaning kendo.colorpicker.blueInputPlaceholder\n       */\n      const MSG_EXTERNAL_2815824305218491249$$DIST_FESM2015_INDEX_JS_90 = goog.getMsg(\"Blue\");\n      i18n_89 = MSG_EXTERNAL_2815824305218491249$$DIST_FESM2015_INDEX_JS_90;\n    } else {\n      i18n_89 = $localize`:kendo.colorpicker.blueInputPlaceholder|The placeholder for the blue color input.␟c8f1ad22547f56cec39eb563a9a1bfe5a85cc14a␟2815824305218491249:Blue`;\n    }\n\n    let i18n_91;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The placeholder for the alpha input.\n       * @meaning kendo.colorpicker.alphaInputPlaceholder\n       */\n      const MSG_EXTERNAL_7522085117867122625$$DIST_FESM2015_INDEX_JS_92 = goog.getMsg(\"Alpha\");\n      i18n_91 = MSG_EXTERNAL_7522085117867122625$$DIST_FESM2015_INDEX_JS_92;\n    } else {\n      i18n_91 = $localize`:kendo.colorpicker.alphaInputPlaceholder|The placeholder for the alpha input.␟4e4aed4804d59e87f4f96959d0113c5ca292d98c␟7522085117867122625:Alpha`;\n    }\n\n    return [[\"kendoColorPickerLocalizedMessages\", \"\", \"colorGradientNoColor\", \"Colorgradient no color chosen\", \"colorPaletteNoColor\", \"Colorpalette no color chosen\", \"colorGradientHandle\", i18n_75, \"clearButton\", i18n_77, \"hueSliderHandle\", i18n_79, \"opacitySliderHandle\", i18n_81, \"hexInputPlaceholder\", i18n_83, \"redInputPlaceholder\", i18n_85, \"greenInputPlaceholder\", i18n_87, \"blueInputPlaceholder\", i18n_89, \"alphaInputPlaceholder\", i18n_91], [\"role\", \"listbox\", 3, \"ngClass\", \"id\", \"focus\", \"blur\", \"mousedown\", \"keydown\"], [\"wrapper\", \"\"], [\"class\", \"k-selected-color\", 3, \"background-color\", \"click\", 4, \"ngIf\"], [\"class\", \"k-tool-icon\", 3, \"ngClass\", \"click\", 4, \"ngIf\"], [1, \"k-select\", 3, \"click\"], [1, \"k-icon\", \"k-i-arrow-s\"], [\"popupTemplate\", \"\"], [\"container\", \"\"], [1, \"k-selected-color\", 3, \"click\"], [\"class\", \"k-icon k-i-line\", 4, \"ngIf\"], [1, \"k-icon\", \"k-i-line\"], [1, \"k-tool-icon\", 3, \"ngClass\", \"click\"], [1, \"k-selected-color\"], [3, \"value\", \"format\", \"opacity\", \"clearButton\", \"delay\", \"focusout\", \"valueChange\", \"keydown\", 4, \"ngIf\"], [\"kendoFocusOnDomReady\", \"\", 3, \"palette\", \"columns\", \"tileSize\", \"format\", \"value\", \"blur\", \"cellSelection\", \"mousedown\", \"keydown\", 4, \"ngIf\"], [3, \"value\", \"format\", \"opacity\", \"clearButton\", \"delay\", \"focusout\", \"valueChange\", \"keydown\"], [\"colorGradient\", \"\"], [\"kendoFocusOnDomReady\", \"\", 3, \"palette\", \"columns\", \"tileSize\", \"format\", \"value\", \"blur\", \"cellSelection\", \"mousedown\", \"keydown\"], [\"palette\", \"\"]];\n  },\n  template: function ColorPickerComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵelementContainer(0, 0);\n      ɵngcc0.ɵɵelementStart(1, \"span\", 1, 2);\n      ɵngcc0.ɵɵlistener(\"focus\", function ColorPickerComponent_Template_span_focus_1_listener() {\n        return ctx.handleWrapperFocus();\n      })(\"blur\", function ColorPickerComponent_Template_span_blur_1_listener() {\n        return ctx.handleWrapperBlur();\n      })(\"mousedown\", function ColorPickerComponent_Template_span_mousedown_1_listener($event) {\n        return $event.preventDefault();\n      })(\"keydown\", function ColorPickerComponent_Template_span_keydown_1_listener($event) {\n        return ctx.handleWrapperKeyDown($event);\n      });\n      ɵngcc0.ɵɵtemplate(3, ColorPickerComponent_span_3_Template, 2, 3, \"span\", 3);\n      ɵngcc0.ɵɵtemplate(4, ColorPickerComponent_span_4_Template, 2, 3, \"span\", 4);\n      ɵngcc0.ɵɵelementStart(5, \"span\", 5);\n      ɵngcc0.ɵɵlistener(\"click\", function ColorPickerComponent_Template_span_click_5_listener() {\n        return ctx.handleWrapperClick();\n      });\n      ɵngcc0.ɵɵelement(6, \"span\", 6);\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵtemplate(7, ColorPickerComponent_ng_template_7_Template, 2, 2, \"ng-template\", null, 7, ɵngcc0.ɵɵtemplateRefExtractor);\n      ɵngcc0.ɵɵelementContainer(9, null, 8);\n    }\n\n    if (rf & 2) {\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngClass\", ɵngcc0.ɵɵpureFunction2(9, _c93, ctx.disabled, ctx.isFocused))(\"id\", ctx.focusableId);\n      ɵngcc0.ɵɵattribute(\"aria-expanded\", ctx.isOpen)(\"aria-readonly\", ctx.readonly)(\"aria-disabled\", ctx.disabled)(\"aria-label\", ctx.value)(\"tabindex\", ctx.tabindex);\n      ɵngcc0.ɵɵadvance(2);\n      ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.iconStyles);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngIf\", ctx.iconStyles);\n    }\n  },\n  directives: function () {\n    return [LocalizedColorPickerMessagesDirective, ɵngcc3.NgClass, ɵngcc3.NgIf, ColorGradientComponent, ColorPaletteComponent, FocusOnDomReadyDirective];\n  },\n  encapsulation: 2\n});\n\n__decorate([HostBinding('class.k-widget'), HostBinding('class.k-colorpicker'), __metadata(\"design:type\", Boolean)], ColorPickerComponent.prototype, \"hostClasses\", void 0);\n\n__decorate([HostBinding('attr.dir'), __metadata(\"design:type\", String)], ColorPickerComponent.prototype, \"direction\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], ColorPickerComponent.prototype, \"focusableId\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], ColorPickerComponent.prototype, \"view\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], ColorPickerComponent.prototype, \"readonly\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], ColorPickerComponent.prototype, \"disabled\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], ColorPickerComponent.prototype, \"format\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [String])], ColorPickerComponent.prototype, \"value\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], ColorPickerComponent.prototype, \"popupSettings\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], ColorPickerComponent.prototype, \"paletteSettings\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], ColorPickerComponent.prototype, \"gradientSettings\", null);\n\n__decorate([Input(), __metadata(\"design:type\", String)], ColorPickerComponent.prototype, \"icon\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Object)], ColorPickerComponent.prototype, \"iconClass\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Number), __metadata(\"design:paramtypes\", [Number])], ColorPickerComponent.prototype, \"tabindex\", null);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], ColorPickerComponent.prototype, \"valueChange\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], ColorPickerComponent.prototype, \"open\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], ColorPickerComponent.prototype, \"close\", void 0);\n\n__decorate([Output('focus'), __metadata(\"design:type\", EventEmitter)], ColorPickerComponent.prototype, \"onFocus\", void 0);\n\n__decorate([Output('blur'), __metadata(\"design:type\", EventEmitter)], ColorPickerComponent.prototype, \"onBlur\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], ColorPickerComponent.prototype, \"activeColorClick\", void 0);\n\n__decorate([ViewChild('container', {\n  read: ViewContainerRef,\n  static: true\n}), __metadata(\"design:type\", ViewContainerRef)], ColorPickerComponent.prototype, \"container\", void 0);\n\n__decorate([ViewChild('wrapper', {\n  static: true\n}), __metadata(\"design:type\", ElementRef)], ColorPickerComponent.prototype, \"wrapper\", void 0);\n\n__decorate([ViewChild('popupTemplate', {\n  static: true\n}), __metadata(\"design:type\", TemplateRef)], ColorPickerComponent.prototype, \"popupTemplate\", void 0);\n\n__decorate([ViewChild('palette', {\n  read: ElementRef,\n  static: false\n}), __metadata(\"design:type\", ElementRef)], ColorPickerComponent.prototype, \"palette\", void 0);\n\n__decorate([ViewChild('colorGradient', {\n  static: false\n}), __metadata(\"design:type\", ColorGradientComponent)], ColorPickerComponent.prototype, \"colorGradient\", void 0);\n\nColorPickerComponent = ColorPickerComponent_1 = __decorate([__metadata(\"design:paramtypes\", [PopupService, ChangeDetectorRef, LocalizationService, NgZone])], ColorPickerComponent);\n/**\n * @hidden\n */\n\nlet ColorPaletteService = /*#__PURE__*/(() => {\n  let ColorPaletteService = class ColorPaletteService {\n    /**\n     * @hidden\n     */\n    constructor() {\n      this.colorRows = [];\n    }\n\n    setColorMatrix(palette, columns) {\n      this.colorRows = [];\n\n      if (!(isPresent(palette) && palette.length)) {\n        return;\n      }\n\n      columns = columns || palette.length;\n\n      for (let start = 0; start < palette.length; start += columns) {\n        const row = palette.slice(start, columns + start);\n        this.colorRows.push(row);\n      }\n    }\n\n    getCellCoordsFor(color) {\n      if (!isPresent(color)) {\n        return;\n      }\n\n      for (let row = 0; row < this.colorRows.length; row++) {\n        for (let col = 0; col < this.colorRows[row].length; col++) {\n          if (this.colorRows[row][col] === color) {\n            return {\n              row,\n              col\n            };\n          }\n        }\n      }\n    }\n\n    getColorAt(cellCoords) {\n      if (!(isPresent(cellCoords) && isPresent(this.colorRows[cellCoords.row]))) {\n        return;\n      }\n\n      return this.colorRows[cellCoords.row][cellCoords.col];\n    }\n\n    getNextCell(current, horizontalStep, verticalStep) {\n      if (!(isPresent(current) && isPresent(current.row) && isPresent(current.col))) {\n        return {\n          row: 0,\n          col: 0\n        };\n      }\n\n      const row = this.clampIndex(current.row + verticalStep, this.colorRows.length - 1);\n      const col = this.clampIndex(current.col + horizontalStep, this.colorRows[row].length - 1);\n      return {\n        row,\n        col\n      };\n    }\n\n    clampIndex(index, max) {\n      const minArrayIndex = 0;\n\n      if (index < minArrayIndex) {\n        return minArrayIndex;\n      }\n\n      if (index > max) {\n        return max;\n      }\n\n      return index;\n    }\n\n  };\n\n  ColorPaletteService.ɵfac = function ColorPaletteService_Factory(t) {\n    return new (t || ColorPaletteService)();\n  };\n\n  ColorPaletteService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: ColorPaletteService,\n    factory: function (t) {\n      return ColorPaletteService.ɵfac(t);\n    }\n  });\n  /**\n   * @hidden\n   */\n\n  return ColorPaletteService;\n})();\nlet ColorPaletteLocalizationService = /*#__PURE__*/(() => {\n  let ColorPaletteLocalizationService = class ColorPaletteLocalizationService extends LocalizationService {\n    constructor(prefix, messageService, _rtl, colorPickerLocalization) {\n      super(prefix, messageService, _rtl);\n      this.colorPickerLocalization = colorPickerLocalization;\n    }\n\n    get(shortKey) {\n      if (this.colorPickerLocalization) {\n        return this.colorPickerLocalization.get(shortKey);\n      }\n\n      return super.get(shortKey);\n    }\n\n  };\n\n  ColorPaletteLocalizationService.ɵfac = function ColorPaletteLocalizationService_Factory(t) {\n    return new (t || ColorPaletteLocalizationService)(ɵngcc0.ɵɵinject(L10N_PREFIX), ɵngcc0.ɵɵinject(ɵngcc1.MessageService, 8), ɵngcc0.ɵɵinject(RTL, 8), ɵngcc0.ɵɵinject(ColorPickerLocalizationService, 8));\n  };\n\n  ColorPaletteLocalizationService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: ColorPaletteLocalizationService,\n    factory: function (t) {\n      return ColorPaletteLocalizationService.ɵfac(t);\n    }\n  });\n  ColorPaletteLocalizationService = __decorate([__param(0, Inject(L10N_PREFIX)), __param(1, Optional()), __param(2, Optional()), __param(2, Inject(RTL)), __param(3, Optional()), __param(3, Inject(ColorPickerLocalizationService)), __metadata(\"design:paramtypes\", [String, MessageService, Boolean, ColorPickerLocalizationService])], ColorPaletteLocalizationService);\n  return ColorPaletteLocalizationService;\n})();\nvar ColorPaletteComponent_1;\nconst DEFAULT_TILE_SIZE = 24;\nconst DEFAULT_COLUMNS_COUNT = 10;\nconst DEFAULT_PRESET$1 = 'office';\nconst DEFAULT_ACCESSIBLE_PRESET$1 = 'accessible';\nlet serial$2 = 0;\n/**\n * The ColorPalette component provides a set of predefined palette presets and enables you to implement a custom color palette.\n * The ColorPalette is independently used by `kendo-colorpicker` and can be directly added to the page.\n */\n\nlet ColorPaletteComponent = ColorPaletteComponent_1 = class ColorPaletteComponent {\n  constructor(host, service, cdr, renderer, localizationService) {\n    this.host = host;\n    this.service = service;\n    this.cdr = cdr;\n    this.renderer = renderer;\n    this.localizationService = localizationService;\n    /**\n     * @hidden\n     */\n\n    this.id = `k-colorpalette-${serial$2++}`;\n    /**\n     * Specifies the output format of the ColorPaletteComponent.\n     * The input value may be in a different format. However, it will be parsed into the output `format`\n     * after the component processes it.\n     *\n     * The supported values are:\n     * * (Default) `hex`\n     * * `rgba`\n     * * `name`\n     */\n\n    this.format = 'hex';\n    /**\n     * Sets the disabled state of the ColorPalette.\n     */\n\n    this.disabled = false;\n    /**\n     * Sets the read-only state of the ColorPalette.\n     */\n\n    this.readonly = false;\n    /**\n     * Specifies the size of a color cell.\n     *\n     * The possible values are:\n     * * (Default) `tileSize = 24`\n     * * `{ width: number, height: number }`\n     */\n\n    this.tileSize = {\n      width: DEFAULT_TILE_SIZE,\n      height: DEFAULT_TILE_SIZE\n    };\n    /**\n     * Fires each time the color selection is changed.\n     */\n\n    this.selectionChange = new EventEmitter();\n    /**\n     * Fires each time the value is changed.\n     */\n\n    this.valueChange = new EventEmitter();\n    /**\n     * Fires each time the user selects a cell with the mouse or presses `Enter`.\n     *\n     * @hidden\n     */\n\n    this.cellSelection = new EventEmitter();\n    /**\n     * @hidden\n     */\n\n    this.hostClasses = true;\n    this._tabindex = 0;\n\n    this.notifyNgTouched = () => {};\n\n    this.notifyNgChanged = () => {};\n\n    this.dynamicRTLSubscription = localizationService.changes.subscribe(({\n      rtl\n    }) => {\n      this.direction = rtl ? 'rtl' : 'ltr';\n    });\n  }\n  /**\n   * @hidden\n   */\n\n\n  get paletteId() {\n    return this.id;\n  }\n  /**\n   * Specifies the value of the initially selected color.\n   */\n\n\n  set value(value) {\n    this._value = parseColor$1(value, this.format);\n  }\n\n  get value() {\n    return this._value;\n  }\n  /**\n   * Specifies the number of columns that will be displayed.\n   * Defaults to `10`.\n   */\n\n\n  set columns(value) {\n    const minColumnsCount = 1;\n    this._columns = value > minColumnsCount ? value : minColumnsCount;\n  }\n\n  get columns() {\n    return this._columns;\n  }\n  /**\n   * The color palette that will be displayed.\n   *\n   * The supported values are:\n   * * The name of the predefined palette preset (for example, `office`, `basic`, and `apex`).\n   * * A string with comma-separated colors.\n   * * A string array.\n   */\n\n\n  set palette(value) {\n    if (!isPresent(value)) {\n      value = DEFAULT_PRESET$1;\n    }\n\n    if (typeof value === 'string' && isPresent(PALETTEPRESETS[value])) {\n      this.columns = this.columns || PALETTEPRESETS[value].columns;\n      value = PALETTEPRESETS[value].colors;\n    }\n\n    const colors = typeof value === 'string' ? value.split(',') : value;\n    this._palette = colors.map(color => parseColor$1(color, this.format, false));\n  }\n\n  get palette() {\n    return this._palette;\n  }\n  /**\n   * Specifies the [tabindex](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex) of the component.\n   */\n\n\n  set tabindex(value) {\n    const tabindex = Number(value);\n    const defaultValue = 0;\n    this._tabindex = !isNaN(tabindex) ? tabindex : defaultValue;\n  }\n\n  get tabindex() {\n    return !this.disabled ? this._tabindex : undefined;\n  }\n  /**\n   * @hidden\n   */\n\n\n  get tileLayout() {\n    if (typeof this.tileSize !== 'number') {\n      return this.tileSize;\n    }\n\n    return {\n      width: this.tileSize,\n      height: this.tileSize\n    };\n  }\n  /**\n   * @hidden\n   */\n\n\n  get colorRows() {\n    return this.service.colorRows;\n  }\n  /**\n   * @hidden\n   */\n\n\n  get hostTabindex() {\n    return this.tabindex;\n  }\n  /**\n   * @hidden\n   */\n\n\n  get disabledClass() {\n    return this.disabled;\n  }\n  /**\n   * @hidden\n   */\n\n\n  get readonlyAttribute() {\n    return this.readonly;\n  }\n\n  ngOnInit() {\n    if (this.colorRows.length === 0) {\n      const defaultPreset = this.format !== 'name' ? DEFAULT_PRESET$1 : DEFAULT_ACCESSIBLE_PRESET$1;\n      this.palette = this.palette || defaultPreset;\n      this.setRows();\n      this.focusedCell = this.service.getCellCoordsFor(this.value);\n    }\n  }\n\n  ngAfterViewInit() {\n    this.setHostElementAriaLabel();\n  }\n\n  ngOnDestroy() {\n    if (this.dynamicRTLSubscription) {\n      this.dynamicRTLSubscription.unsubscribe();\n    }\n  }\n\n  ngOnChanges(changes) {\n    if (changes.palette || changes.columns) {\n      this.setRows();\n    }\n\n    if (changes.palette || changes.value || changes.columns) {\n      this.focusedCell = this.service.getCellCoordsFor(this.value);\n      this.setHostElementAriaLabel();\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleKeydown(event) {\n    const isRTL = this.direction === 'rtl';\n\n    switch (event.keyCode) {\n      case Keys.ArrowDown:\n        this.handleCellNavigation(0, 1);\n        break;\n\n      case Keys.ArrowUp:\n        this.handleCellNavigation(0, -1);\n        break;\n\n      case Keys.ArrowRight:\n        this.handleCellNavigation(isRTL ? -1 : 1, 0);\n        break;\n\n      case Keys.ArrowLeft:\n        this.handleCellNavigation(isRTL ? 1 : -1, 0);\n        break;\n\n      case Keys.Enter:\n        this.handleEnter();\n        break;\n\n      default:\n        return;\n    }\n\n    event.preventDefault();\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleHostBlur() {\n    this.notifyNgTouched();\n  }\n  /**\n   * @hidden\n   */\n\n\n  handleCellSelection(value, focusedCell) {\n    if (this.readonly) {\n      return;\n    }\n\n    this.focusedCell = focusedCell;\n    const parsedColor = parseColor$1(value, this.format, false);\n    this.cellSelection.emit(parsedColor);\n\n    if (this.value !== parsedColor) {\n      this.value = parsedColor;\n      this.valueChange.emit(parsedColor);\n      this.notifyNgChanged(parsedColor);\n      this.setHostElementAriaLabel();\n    }\n\n    if (this.selection !== parsedColor) {\n      this.selection = parsedColor;\n      this.selectionChange.emit(parsedColor);\n    }\n\n    if (focusedCell) {\n      this.activeCellId = `${this.focusedCell.row}${this.focusedCell.col}`;\n    }\n  }\n  /**\n   * @hidden\n   */\n\n\n  writeValue(value) {\n    this.value = value;\n    this.focusedCell = this.service.getCellCoordsFor(this.value);\n  }\n  /**\n   * @hidden\n   */\n\n\n  registerOnChange(fn) {\n    this.notifyNgChanged = fn;\n  }\n  /**\n   * @hidden\n   */\n\n\n  registerOnTouched(fn) {\n    this.notifyNgTouched = fn;\n  }\n  /**\n   * @hidden\n   */\n\n\n  setDisabledState(isDisabled) {\n    this.cdr.markForCheck();\n    this.disabled = isDisabled;\n  }\n  /**\n   * @hidden\n   * Used by the TextBoxContainer to determine if the component is empty.\n   */\n\n\n  isEmpty() {\n    return false;\n  }\n  /**\n   * Clears the color value of the ColorPalette.\n   */\n\n\n  reset() {\n    this.focusedCell = null;\n\n    if (isPresent(this.value)) {\n      this._value = undefined;\n      this.notifyNgChanged(undefined);\n    }\n  }\n\n  setRows() {\n    if (!isPresent(this.palette)) {\n      return;\n    }\n\n    this.columns = this.columns || DEFAULT_COLUMNS_COUNT;\n    this.service.setColorMatrix(this.palette, this.columns);\n  }\n\n  handleCellNavigation(horizontalStep, verticalStep) {\n    if (this.readonly) {\n      return;\n    }\n\n    this.focusedCell = this.service.getNextCell(this.focusedCell, horizontalStep, verticalStep);\n    const selection = this.service.getColorAt(this.focusedCell);\n\n    if (this.selection !== selection) {\n      this.selection = selection;\n      this.selectionChange.emit(selection);\n    }\n  }\n\n  setHostElementAriaLabel() {\n    const parsed = parseColor$1(this.value, this.format);\n    this.renderer.setAttribute(this.host.nativeElement, 'aria-label', `${this.value ? parsed : this.localizationService.get('colorPaletteNoColor')}`);\n  }\n\n  handleEnter() {\n    if (!isPresent(this.focusedCell)) {\n      return;\n    }\n\n    const selectedColor = this.service.getColorAt(this.focusedCell);\n    this.handleCellSelection(selectedColor, this.focusedCell);\n  }\n\n};\n\nColorPaletteComponent.ɵfac = function ColorPaletteComponent_Factory(t) {\n  return new (t || ColorPaletteComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ColorPaletteService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService));\n};\n\nColorPaletteComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: ColorPaletteComponent,\n  selectors: [[\"kendo-colorpalette\"]],\n  hostVars: 11,\n  hostBindings: function ColorPaletteComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵlistener(\"keydown\", function ColorPaletteComponent_keydown_HostBindingHandler($event) {\n        return ctx.handleKeydown($event);\n      })(\"blur\", function ColorPaletteComponent_blur_HostBindingHandler() {\n        return ctx.handleHostBlur();\n      });\n    }\n\n    if (rf & 2) {\n      ɵngcc0.ɵɵattribute(\"dir\", ctx.direction)(\"id\", ctx.paletteId)(\"tabindex\", ctx.hostTabindex)(\"aria-disabled\", ctx.disabledClass)(\"aria-readonly\", ctx.readonlyAttribute);\n      ɵngcc0.ɵɵclassProp(\"k-widget\", ctx.hostClasses)(\"k-colorpalette\", ctx.hostClasses)(\"k-state-disabled\", ctx.disabledClass);\n    }\n  },\n  inputs: {\n    id: \"id\",\n    format: \"format\",\n    disabled: \"disabled\",\n    readonly: \"readonly\",\n    tileSize: \"tileSize\",\n    value: \"value\",\n    columns: \"columns\",\n    palette: \"palette\",\n    tabindex: \"tabindex\"\n  },\n  outputs: {\n    selectionChange: \"selectionChange\",\n    valueChange: \"valueChange\",\n    cellSelection: \"cellSelection\"\n  },\n  features: [ɵngcc0.ɵɵProvidersFeature([{\n    multi: true,\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => ColorPaletteComponent_1) // tslint:disable-line:no-forward-ref\n\n  }, {\n    provide: KendoInput,\n    useExisting: forwardRef(() => ColorPaletteComponent_1)\n  }, ColorPaletteService, ColorPaletteLocalizationService, {\n    provide: LocalizationService,\n    useExisting: ColorPaletteLocalizationService\n  }, {\n    provide: L10N_PREFIX,\n    useValue: 'kendo.colorpalette'\n  }]), ɵngcc0.ɵɵNgOnChangesFeature],\n  decls: 5,\n  vars: 2,\n  consts: function () {\n    let i18n_94;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc The aria-label applied to the ColorPalette component when the value is empty.\n       * @meaning kendo.colorpalette.colorPaletteNoColor\n       */\n      const MSG_EXTERNAL_4885193165402402447$$DIST_FESM2015_INDEX_JS_95 = goog.getMsg(\"Colorpalette no color chosen\");\n      i18n_94 = MSG_EXTERNAL_4885193165402402447$$DIST_FESM2015_INDEX_JS_95;\n    } else {\n      i18n_94 = $localize`:kendo.colorpalette.colorPaletteNoColor|The aria-label applied to the ColorPalette component when the value is empty.␟9828bb7d78de6289366052cdc37cf0bc74577313␟4885193165402402447:Colorpalette no color chosen`;\n    }\n\n    return [[\"kendoColorPaletteLocalizedMessages\", \"\", \"colorPaletteNoColor\", i18n_94], [\"role\", \"listbox\"], [1, \"k-palette\", \"k-reset\"], [4, \"ngFor\", \"ngForOf\"], [\"role\", \"option\", \"class\", \"k-item\", 3, \"k-state-selected\", \"id\", \"ngStyle\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"role\", \"option\", 1, \"k-item\", 3, \"id\", \"ngStyle\", \"click\"]];\n  },\n  template: function ColorPaletteComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵelementContainer(0, 0);\n      ɵngcc0.ɵɵelementStart(1, \"div\", 1);\n      ɵngcc0.ɵɵelementStart(2, \"table\", 2);\n      ɵngcc0.ɵɵelementStart(3, \"tbody\");\n      ɵngcc0.ɵɵtemplate(4, ColorPaletteComponent_tr_4_Template, 2, 1, \"tr\", 3);\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵattribute(\"aria-activedescendant\", ctx.activeCellId);\n      ɵngcc0.ɵɵadvance(3);\n      ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.colorRows);\n    }\n  },\n  directives: function () {\n    return [LocalizedColorPickerMessagesDirective, ɵngcc3.NgForOf, ɵngcc3.NgStyle];\n  },\n  encapsulation: 2\n});\n\n__decorate([HostBinding('attr.dir'), __metadata(\"design:type\", String)], ColorPaletteComponent.prototype, \"direction\", void 0);\n\n__decorate([HostBinding('attr.id'), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [])], ColorPaletteComponent.prototype, \"paletteId\", null);\n\n__decorate([Input(), __metadata(\"design:type\", String)], ColorPaletteComponent.prototype, \"id\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String)], ColorPaletteComponent.prototype, \"format\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [String])], ColorPaletteComponent.prototype, \"value\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Number), __metadata(\"design:paramtypes\", [Number])], ColorPaletteComponent.prototype, \"columns\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], ColorPaletteComponent.prototype, \"palette\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Number), __metadata(\"design:paramtypes\", [Number])], ColorPaletteComponent.prototype, \"tabindex\", null);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], ColorPaletteComponent.prototype, \"disabled\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Boolean)], ColorPaletteComponent.prototype, \"readonly\", void 0);\n\n__decorate([Input(), __metadata(\"design:type\", Object)], ColorPaletteComponent.prototype, \"tileSize\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], ColorPaletteComponent.prototype, \"selectionChange\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], ColorPaletteComponent.prototype, \"valueChange\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", EventEmitter)], ColorPaletteComponent.prototype, \"cellSelection\", void 0);\n\n__decorate([HostBinding('attr.tabindex'), __metadata(\"design:type\", Number), __metadata(\"design:paramtypes\", [])], ColorPaletteComponent.prototype, \"hostTabindex\", null);\n\n__decorate([HostBinding('class.k-widget'), HostBinding('class.k-colorpalette'), __metadata(\"design:type\", Boolean)], ColorPaletteComponent.prototype, \"hostClasses\", void 0);\n\n__decorate([HostBinding('attr.aria-disabled'), HostBinding('class.k-state-disabled'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], ColorPaletteComponent.prototype, \"disabledClass\", null);\n\n__decorate([HostBinding('attr.aria-readonly'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], ColorPaletteComponent.prototype, \"readonlyAttribute\", null);\n\n__decorate([HostListener('keydown', ['$event']), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Object]), __metadata(\"design:returntype\", void 0)], ColorPaletteComponent.prototype, \"handleKeydown\", null);\n\n__decorate([HostListener('blur'), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", []), __metadata(\"design:returntype\", void 0)], ColorPaletteComponent.prototype, \"handleHostBlur\", null);\n\nColorPaletteComponent = ColorPaletteComponent_1 = __decorate([__metadata(\"design:paramtypes\", [ElementRef, ColorPaletteService, ChangeDetectorRef, Renderer2, LocalizationService])], ColorPaletteComponent);\n/**\n * @hidden\n */\n\nlet ColorPickerMessages = /*#__PURE__*/(() => {\n  class ColorPickerMessages extends ComponentMessages {}\n\n  ColorPickerMessages.ɵfac = /*@__PURE__*/function () {\n    let ɵColorPickerMessages_BaseFactory;\n    return function ColorPickerMessages_Factory(t) {\n      return (ɵColorPickerMessages_BaseFactory || (ɵColorPickerMessages_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(ColorPickerMessages)))(t || ColorPickerMessages);\n    };\n  }();\n\n  ColorPickerMessages.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: ColorPickerMessages,\n    inputs: {\n      colorPaletteNoColor: \"colorPaletteNoColor\",\n      colorGradientNoColor: \"colorGradientNoColor\",\n      colorGradientHandle: \"colorGradientHandle\",\n      clearButton: \"clearButton\",\n      hueSliderHandle: \"hueSliderHandle\",\n      opacitySliderHandle: \"opacitySliderHandle\",\n      hexInputPlaceholder: \"hexInputPlaceholder\",\n      redInputPlaceholder: \"redInputPlaceholder\",\n      greenInputPlaceholder: \"greenInputPlaceholder\",\n      blueInputPlaceholder: \"blueInputPlaceholder\",\n      alphaInputPlaceholder: \"alphaInputPlaceholder\"\n    },\n    features: [ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", String)], ColorPickerMessages.prototype, \"colorPaletteNoColor\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], ColorPickerMessages.prototype, \"colorGradientNoColor\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], ColorPickerMessages.prototype, \"colorGradientHandle\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], ColorPickerMessages.prototype, \"clearButton\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], ColorPickerMessages.prototype, \"hueSliderHandle\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], ColorPickerMessages.prototype, \"opacitySliderHandle\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], ColorPickerMessages.prototype, \"hexInputPlaceholder\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], ColorPickerMessages.prototype, \"redInputPlaceholder\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], ColorPickerMessages.prototype, \"greenInputPlaceholder\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], ColorPickerMessages.prototype, \"blueInputPlaceholder\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], ColorPickerMessages.prototype, \"alphaInputPlaceholder\", void 0);\n\n  return ColorPickerMessages;\n})();\nvar ColorPickerCustomMessagesComponent_1;\n/**\n * Custom component messages override default component messages.\n */\n\nlet ColorPickerCustomMessagesComponent = ColorPickerCustomMessagesComponent_1 = class ColorPickerCustomMessagesComponent extends ColorPickerMessages {\n  constructor(service) {\n    super();\n    this.service = service;\n  }\n\n  get override() {\n    return true;\n  }\n\n};\n\nColorPickerCustomMessagesComponent.ɵfac = function ColorPickerCustomMessagesComponent_Factory(t) {\n  return new (t || ColorPickerCustomMessagesComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService));\n};\n\nColorPickerCustomMessagesComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: ColorPickerCustomMessagesComponent,\n  selectors: [[\"kendo-colorpicker-messages\"], [\"kendo-colorgradient-messages\"], [\"kendo-colorpalette-messages\"]],\n  features: [ɵngcc0.ɵɵProvidersFeature([{\n    provide: ColorPickerMessages,\n    useExisting: forwardRef(() => ColorPickerCustomMessagesComponent_1) // tslint:disable-line:no-forward-ref\n\n  }]), ɵngcc0.ɵɵInheritDefinitionFeature],\n  decls: 0,\n  vars: 0,\n  template: function ColorPickerCustomMessagesComponent_Template(rf, ctx) {},\n  encapsulation: 2\n});\nColorPickerCustomMessagesComponent = ColorPickerCustomMessagesComponent_1 = __decorate([__metadata(\"design:paramtypes\", [LocalizationService])], ColorPickerCustomMessagesComponent);\nvar LocalizedColorPickerMessagesDirective_1;\n/**\n * @hidden\n */\n\nlet LocalizedColorPickerMessagesDirective = LocalizedColorPickerMessagesDirective_1 = class LocalizedColorPickerMessagesDirective extends ColorPickerMessages {\n  constructor(service) {\n    super();\n    this.service = service;\n  }\n\n};\n\nLocalizedColorPickerMessagesDirective.ɵfac = function LocalizedColorPickerMessagesDirective_Factory(t) {\n  return new (t || LocalizedColorPickerMessagesDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService));\n};\n\nLocalizedColorPickerMessagesDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n  type: LocalizedColorPickerMessagesDirective,\n  selectors: [[\"\", \"kendoColorPickerLocalizedMessages\", \"\"], [\"\", \"kendoColorGradientLocalizedMessages\", \"\"], [\"\", \"kendoColorPaletteLocalizedMessages\", \"\"]],\n  features: [ɵngcc0.ɵɵProvidersFeature([{\n    provide: ColorPickerMessages,\n    useExisting: forwardRef(() => LocalizedColorPickerMessagesDirective_1) // tslint:disable-line:no-forward-ref\n\n  }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n});\nLocalizedColorPickerMessagesDirective = LocalizedColorPickerMessagesDirective_1 = __decorate([__metadata(\"design:paramtypes\", [LocalizationService])], LocalizedColorPickerMessagesDirective);\n/**\n * @hidden\n */\n\nlet FocusOnDomReadyDirective = /*#__PURE__*/(() => {\n  let FocusOnDomReadyDirective = class FocusOnDomReadyDirective {\n    constructor(host, ngZone) {\n      this.host = host;\n      this.ngZone = ngZone;\n    }\n\n    ngAfterContentInit() {\n      this.focusOnNextTick();\n    }\n\n    focusOnNextTick() {\n      this.ngZone.runOutsideAngular(() => setTimeout(() => this.host.nativeElement.focus()));\n    }\n\n  };\n\n  FocusOnDomReadyDirective.ɵfac = function FocusOnDomReadyDirective_Factory(t) {\n    return new (t || FocusOnDomReadyDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone));\n  };\n\n  FocusOnDomReadyDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: FocusOnDomReadyDirective,\n    selectors: [[\"\", \"kendoFocusOnDomReady\", \"\"]]\n  });\n  FocusOnDomReadyDirective = __decorate([__metadata(\"design:paramtypes\", [ElementRef, NgZone])], FocusOnDomReadyDirective);\n  return FocusOnDomReadyDirective;\n})();\nconst PUBLIC_DIRECTIVES = [ColorPickerComponent, ColorPaletteComponent, ColorGradientComponent, LocalizedColorPickerMessagesDirective, ColorPickerCustomMessagesComponent];\nconst INTERNAL_DIRECTIVES = [ColorInputComponent, FocusOnDomReadyDirective];\n/**\n * Represents the [NgModule]({{ site.data.urls.angular['ngmoduleapi'] }})\n * definition for the ColorPicker.\n */\n\nlet ColorPickerModule = /*#__PURE__*/(() => {\n  let ColorPickerModule = class ColorPickerModule {};\n\n  ColorPickerModule.ɵfac = function ColorPickerModule_Factory(t) {\n    return new (t || ColorPickerModule)();\n  };\n\n  ColorPickerModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: ColorPickerModule\n  });\n  ColorPickerModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[SliderModule, NumericTextBoxModule, CommonModule, PopupModule, DraggableModule]]\n  });\n  /**\n   * Represents the directive that renders the [Kendo UI CheckBox]({% slug overview_checkbox %}) input component.\n   * The directive is placed on input type=\"checkbox\" elements.\n   *\n   * @example\n   * ```ts-no-run\n   * <input type=\"checkbox\" kendoCheckBox />\n   * ```\n   */\n\n  return ColorPickerModule;\n})();\nlet CheckBoxDirective = /*#__PURE__*/(() => {\n  let CheckBoxDirective = class CheckBoxDirective {\n    /**\n     * Represents the directive that renders the [Kendo UI CheckBox]({% slug overview_checkbox %}) input component.\n     * The directive is placed on input type=\"checkbox\" elements.\n     *\n     * @example\n     * ```ts-no-run\n     * <input type=\"checkbox\" kendoCheckBox />\n     * ```\n     */\n    constructor() {\n      this.kendoClass = true;\n    }\n\n  };\n\n  CheckBoxDirective.ɵfac = function CheckBoxDirective_Factory(t) {\n    return new (t || CheckBoxDirective)();\n  };\n\n  CheckBoxDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: CheckBoxDirective,\n    selectors: [[\"input\", \"kendoCheckBox\", \"\"]],\n    hostVars: 2,\n    hostBindings: function CheckBoxDirective_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"k-checkbox\", ctx.kendoClass);\n      }\n    }\n  });\n\n  __decorate([HostBinding('class.k-checkbox'), __metadata(\"design:type\", Boolean)], CheckBoxDirective.prototype, \"kendoClass\", void 0);\n  /**\n   * Represents the [NgModule]({{ site.data.urls.angular['ngmoduleapi'] }})\n   * definition for the CheckBox directive.\n   *\n   * @example\n   *\n   * ```ts-no-run\n   * // Import the CheckBox module\n   * import { CheckBoxModule } from '@progress/kendo-angular-inputs';\n   *\n   * // The browser platform with a compiler\n   * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n   *\n   * import { NgModule } from '@angular/core';\n   *\n   * // Import the app component\n   * import { AppComponent } from './app.component';\n   *\n   * // Define the app module\n   * _@NgModule({\n   *     declarations: [AppComponent], // declare app component\n   *     imports:      [BrowserModule, CheckBoxModule], // import CheckBox module\n   *     bootstrap:    [AppComponent]\n   * })\n   * export class AppModule {}\n   *\n   * // Compile and launch the module\n   * platformBrowserDynamic().bootstrapModule(AppModule);\n   *\n   * ```\n   */\n\n\n  return CheckBoxDirective;\n})();\nlet CheckBoxModule = /*#__PURE__*/(() => {\n  let CheckBoxModule = class CheckBoxModule {};\n\n  CheckBoxModule.ɵfac = function CheckBoxModule_Factory(t) {\n    return new (t || CheckBoxModule)();\n  };\n\n  CheckBoxModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: CheckBoxModule\n  });\n  CheckBoxModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule]]\n  });\n  /**\n   * Represents the directive that renders the [Kendo UI RadioButton]({% slug overview_checkbox %}) input component.\n   * The directive is placed on input type=\"radio\" elements.\n   *\n   * @example\n   * ```ts-no-run\n   * <input type=\"radio\" kendoRadioButton />\n   * ```\n   */\n\n  return CheckBoxModule;\n})();\nlet RadioButtonDirective = /*#__PURE__*/(() => {\n  let RadioButtonDirective = class RadioButtonDirective {\n    /**\n     * Represents the directive that renders the [Kendo UI RadioButton]({% slug overview_checkbox %}) input component.\n     * The directive is placed on input type=\"radio\" elements.\n     *\n     * @example\n     * ```ts-no-run\n     * <input type=\"radio\" kendoRadioButton />\n     * ```\n     */\n    constructor() {\n      this.kendoClass = true;\n    }\n\n  };\n\n  RadioButtonDirective.ɵfac = function RadioButtonDirective_Factory(t) {\n    return new (t || RadioButtonDirective)();\n  };\n\n  RadioButtonDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: RadioButtonDirective,\n    selectors: [[\"input\", \"kendoRadioButton\", \"\"]],\n    hostVars: 2,\n    hostBindings: function RadioButtonDirective_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"k-radio\", ctx.kendoClass);\n      }\n    }\n  });\n\n  __decorate([HostBinding('class.k-radio'), __metadata(\"design:type\", Boolean)], RadioButtonDirective.prototype, \"kendoClass\", void 0);\n  /**\n   * Represents the [NgModule]({{ site.data.urls.angular['ngmoduleapi'] }})\n   * definition for the RadioButton directive.\n   *\n   * @example\n   *\n   * ```ts-no-run\n   * // Import the RadioButton module\n   * import { RadioButtonModule } from '@progress/kendo-angular-inputs';\n   *\n   * // The browser platform with a compiler\n   * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n   *\n   * import { NgModule } from '@angular/core';\n   *\n   * // Import the app component\n   * import { AppComponent } from './app.component';\n   *\n   * // Define the app module\n   * _@NgModule({\n   *     declarations: [AppComponent], // declare app component\n   *     imports:      [BrowserModule, RadioButtonModule], // import RadioButton module\n   *     bootstrap:    [AppComponent]\n   * })\n   * export class AppModule {}\n   *\n   * // Compile and launch the module\n   * platformBrowserDynamic().bootstrapModule(AppModule);\n   *\n   * ```\n   */\n\n\n  return RadioButtonDirective;\n})();\nlet RadioButtonModule = /*#__PURE__*/(() => {\n  let RadioButtonModule = class RadioButtonModule {};\n\n  RadioButtonModule.ɵfac = function RadioButtonModule_Factory(t) {\n    return new (t || RadioButtonModule)();\n  };\n\n  RadioButtonModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: RadioButtonModule\n  });\n  RadioButtonModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule]]\n  });\n  return RadioButtonModule;\n})();\nlet serial$3 = 0;\n/**\n * Represents an error message that will be shown underneath\n * a Kendo control or native HTML form-bound component after a validation.\n */\n\nlet ErrorComponent = /*#__PURE__*/(() => {\n  let ErrorComponent = class ErrorComponent {\n    /**\n     * Represents an error message that will be shown underneath\n     * a Kendo control or native HTML form-bound component after a validation.\n     */\n    constructor() {\n      this.hostClass = true;\n      /**\n       * Specifies the alignment of the Error message.\n       *\n       * The possible values are:\n       * * (Default) `start`\n       * * `end`\n       */\n\n      this.align = 'start';\n      /**\n       * @hidden\n       */\n\n      this.id = `kendo-error-${serial$3++}`;\n      this.roleAttribute = 'alert';\n    }\n\n    get startClass() {\n      return this.align === 'start';\n    }\n\n    get endClass() {\n      return this.align === 'end';\n    }\n\n    get idAttribute() {\n      return this.id;\n    }\n\n  };\n\n  ErrorComponent.ɵfac = function ErrorComponent_Factory(t) {\n    return new (t || ErrorComponent)();\n  };\n\n  ErrorComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: ErrorComponent,\n    selectors: [[\"kendo-formerror\"]],\n    hostVars: 8,\n    hostBindings: function ErrorComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"role\", ctx.roleAttribute)(\"id\", ctx.idAttribute);\n        ɵngcc0.ɵɵclassProp(\"k-form-error\", ctx.hostClass)(\"k-text-start\", ctx.startClass)(\"k-text-end\", ctx.endClass);\n      }\n    },\n    inputs: {\n      align: \"align\"\n    },\n    ngContentSelectors: _c26,\n    decls: 1,\n    vars: 0,\n    template: function ErrorComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵprojection(0);\n      }\n    },\n    encapsulation: 2\n  });\n\n  __decorate([HostBinding('class.k-form-error'), __metadata(\"design:type\", Boolean)], ErrorComponent.prototype, \"hostClass\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], ErrorComponent.prototype, \"align\", void 0);\n\n  __decorate([HostBinding('attr.role'), __metadata(\"design:type\", String)], ErrorComponent.prototype, \"roleAttribute\", void 0);\n\n  __decorate([HostBinding('class.k-text-start'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], ErrorComponent.prototype, \"startClass\", null);\n\n  __decorate([HostBinding('class.k-text-end'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], ErrorComponent.prototype, \"endClass\", null);\n\n  __decorate([HostBinding('attr.id'), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [])], ErrorComponent.prototype, \"idAttribute\", null);\n\n  return ErrorComponent;\n})();\nlet serial$4 = 0;\n/**\n * Represents a hint message that will be shown underneath a form-bound component.\n */\n\nlet HintComponent = /*#__PURE__*/(() => {\n  let HintComponent = class HintComponent {\n    /**\n     * Represents a hint message that will be shown underneath a form-bound component.\n     */\n    constructor() {\n      /**\n       * Specifies the alignment of the Hint message.\n       *\n       * The possible values are:\n       * * (Default) `start`\n       * * `end`\n       */\n      this.align = 'start';\n      /**\n       * @hidden\n       */\n\n      this.id = `kendo-hint-${serial$4++}`;\n      this.hostClass = true;\n    }\n\n    get startClass() {\n      return this.align === 'start';\n    }\n\n    get endClass() {\n      return this.align === 'end';\n    }\n\n    get idAttribute() {\n      return this.id;\n    }\n\n  };\n\n  HintComponent.ɵfac = function HintComponent_Factory(t) {\n    return new (t || HintComponent)();\n  };\n\n  HintComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: HintComponent,\n    selectors: [[\"kendo-formhint\"]],\n    hostVars: 7,\n    hostBindings: function HintComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"id\", ctx.idAttribute);\n        ɵngcc0.ɵɵclassProp(\"k-form-hint\", ctx.hostClass)(\"k-text-start\", ctx.startClass)(\"k-text-end\", ctx.endClass);\n      }\n    },\n    inputs: {\n      align: \"align\"\n    },\n    ngContentSelectors: _c26,\n    decls: 1,\n    vars: 0,\n    template: function HintComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵprojection(0);\n      }\n    },\n    encapsulation: 2\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", String)], HintComponent.prototype, \"align\", void 0);\n\n  __decorate([HostBinding('class.k-form-hint'), __metadata(\"design:type\", Boolean)], HintComponent.prototype, \"hostClass\", void 0);\n\n  __decorate([HostBinding('class.k-text-start'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], HintComponent.prototype, \"startClass\", null);\n\n  __decorate([HostBinding('class.k-text-end'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], HintComponent.prototype, \"endClass\", null);\n\n  __decorate([HostBinding('attr.id'), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [])], HintComponent.prototype, \"idAttribute\", null);\n  /**\n   * Specifies a container for form-bound controls (Kendo controls or native HTML controls).\n   * Applies styling and behavior rules.\n   */\n\n\n  return HintComponent;\n})();\nlet FormFieldComponent = /*#__PURE__*/(() => {\n  let FormFieldComponent = class FormFieldComponent {\n    constructor(renderer, localizationService, hostElement) {\n      this.renderer = renderer;\n      this.localizationService = localizationService;\n      this.hostElement = hostElement;\n      this.hostClass = true;\n      /**\n       *\n       * Specifies when the Hint messages will be shown.\n       *\n       * The possible values are:\n       *\n       * * (Default) `initial`&mdash;Allows displaying hints when the form-bound component state is\n       * `valid` or `untouched` and `pristine`.\n       * * `always`&mdash;Allows full control over the visibility of the hints.\n       *\n       */\n\n      this.showHints = 'initial';\n      /**\n       * Specifies the layout orientation of the form field.\n       *\n       * * The possible values are:\n       *\n       * * (Default) `vertical`\n       * * `horizontal`\n       */\n\n      this.orientation = 'vertical';\n      /**\n       * Specifies when the Error messages will be shown.\n       *\n       * The possible values are:\n       *\n       * * (Default) `initial`&mdash;Allows displaying errors when the form-bound component state is\n       * `invalid` and `touched` or `dirty`.\n       * * `always`&mdash;Allows full control over the visibility of the errors.\n       *\n       */\n\n      this.showErrors = 'initial';\n      this.subscriptions = new Subscription();\n      this.rtl = false;\n      validatePackage(packageMetadata);\n      this.subscriptions.add(this.localizationService.changes.subscribe(({\n        rtl\n      }) => {\n        this.rtl = rtl;\n        this.direction = this.rtl ? 'rtl' : 'ltr';\n      }));\n    }\n\n    get errorClass() {\n      if (!this.control) {\n        return false;\n      }\n\n      return this.control.invalid && (this.control.touched || this.control.dirty);\n    }\n\n    get disabledClass() {\n      if (!this.control) {\n        return false;\n      } // radiobutton group\n\n\n      if (this.isRadioControl(this.control)) {\n        return false;\n      }\n\n      return this.disabledControl() || this.disabledElement() || this.disabledKendoInput();\n    }\n\n    set formControls(formControls) {\n      this.validateFormControl(formControls);\n      this.control = formControls.first;\n    }\n    /**\n     * @hidden\n     */\n\n\n    get horizontal() {\n      return this.orientation === 'horizontal';\n    }\n    /**\n     * @hidden\n     */\n\n\n    get hasHints() {\n      return this.showHints === 'always' ? true : this.showHintsInitial();\n    }\n    /**\n     * @hidden\n     */\n\n\n    get hasErrors() {\n      return this.showErrors === 'always' ? true : this.showErrorsInitial();\n    }\n\n    ngAfterViewInit() {\n      this.setDescription();\n    }\n\n    ngOnDestroy() {\n      this.subscriptions.unsubscribe();\n    }\n\n    disabledKendoInput() {\n      return this.kendoInput && this.kendoInput.disabled;\n    }\n\n    disabledControl() {\n      return this.control.disabled;\n    }\n\n    disabledElement() {\n      const elements = this.controlElementRefs.toArray();\n      return elements.every(e => e.nativeElement.hasAttribute('disabled'));\n    }\n\n    validateFormControl(formControls) {\n      if (isDevMode() && formControls.length !== 1 && !this.isControlGroup(formControls)) {\n        throw new Error('The `kendo-formfield` component should contain ' + 'only one control of type NgControl with a formControlName(https://angular.io/api/forms/FormControlName)' + 'or an ngModel(https://angular.io/api/forms/NgModel) binding.');\n      }\n    }\n\n    isControlGroup(formControls) {\n      if (!formControls.length) {\n        return false;\n      }\n\n      const name = formControls.first.name;\n      return formControls.toArray().every(c => c.name === name && this.isRadioControl(c));\n    }\n\n    isRadioControl(control) {\n      return control.valueAccessor instanceof RadioControlValueAccessor;\n    }\n\n    updateDescription() {\n      const controls = this.findControlElements();\n\n      if (!controls) {\n        return;\n      }\n\n      controls.forEach(control => {\n        if (this.errorChildren.length > 0 || this.hintChildren.length > 0) {\n          const ariaIds = this.generateDescriptionIds(control);\n          this.renderer.setAttribute(control, 'aria-describedby', ariaIds);\n        }\n      });\n    }\n\n    findControlElements() {\n      if (!this.controlElementRefs) {\n        return;\n      } // if the control is KendoInput and has focusableId - dropdowns, dateinputs\n\n\n      if (this.kendoInput && this.kendoInput.focusableId && isDocumentAvailable()) {\n        return [this.hostElement.nativeElement.querySelector(`#${this.kendoInput.focusableId}`)];\n      }\n\n      return this.controlElementRefs.map(el => el.nativeElement);\n    }\n\n    generateDescriptionIds(control) {\n      const ids = new Set();\n\n      if (control.hasAttribute('aria-describedby')) {\n        const attributes = control.getAttribute('aria-describedby').split(' ');\n        attributes.forEach(attr => {\n          if (attr.includes('kendo-hint-') || attr.includes('kendo-error-')) {\n            return;\n          }\n\n          ids.add(attr);\n        });\n      }\n\n      this.hintChildren.forEach(hint => {\n        ids.add(hint.id);\n      });\n      this.errorChildren.forEach(error => {\n        ids.add(error.id);\n      });\n      return Array.from(ids).join(' ');\n    }\n\n    showHintsInitial() {\n      if (!this.control) {\n        return true;\n      }\n\n      const {\n        valid,\n        untouched,\n        pristine\n      } = this.control;\n      return valid || untouched && pristine;\n    }\n\n    showErrorsInitial() {\n      if (!this.control) {\n        return false;\n      }\n\n      const {\n        invalid,\n        dirty,\n        touched\n      } = this.control;\n      return invalid && (dirty || touched);\n    }\n\n    setDescription() {\n      this.updateDescription();\n      this.subscriptions.add(this.errorChildren.changes.subscribe(() => this.updateDescription()));\n      this.subscriptions.add(this.hintChildren.changes.subscribe(() => this.updateDescription()));\n    }\n\n  };\n\n  FormFieldComponent.ɵfac = function FormFieldComponent_Factory(t) {\n    return new (t || FormFieldComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef));\n  };\n\n  FormFieldComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: FormFieldComponent,\n    selectors: [[\"kendo-formfield\"]],\n    contentQueries: function FormFieldComponent_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, KendoInput, 7);\n        ɵngcc0.ɵɵcontentQuery(dirIndex, NgControl, 5);\n        ɵngcc0.ɵɵcontentQuery(dirIndex, NgControl, 5, ElementRef);\n        ɵngcc0.ɵɵcontentQuery(dirIndex, ErrorComponent, 5);\n        ɵngcc0.ɵɵcontentQuery(dirIndex, HintComponent, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.kendoInput = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.formControls = _t);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.controlElementRefs = _t);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.errorChildren = _t);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.hintChildren = _t);\n      }\n    },\n    hostVars: 7,\n    hostBindings: function FormFieldComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"dir\", ctx.direction);\n        ɵngcc0.ɵɵclassProp(\"k-form-field\", ctx.hostClass)(\"k-form-field-error\", ctx.errorClass)(\"k-form-field-disabled\", ctx.disabledClass);\n      }\n    },\n    inputs: {\n      showHints: \"showHints\",\n      orientation: \"orientation\",\n      showErrors: \"showErrors\"\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature([LocalizationService, {\n      provide: L10N_PREFIX,\n      useValue: 'kendo.formfield'\n    }])],\n    ngContentSelectors: _c98,\n    decls: 5,\n    vars: 4,\n    consts: [[4, \"ngIf\"]],\n    template: function FormFieldComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c97);\n        ɵngcc0.ɵɵprojection(0);\n        ɵngcc0.ɵɵelementStart(1, \"div\");\n        ɵngcc0.ɵɵprojection(2, 1);\n        ɵngcc0.ɵɵtemplate(3, FormFieldComponent_ng_content_3_Template, 1, 0, \"ng-content\", 0);\n        ɵngcc0.ɵɵtemplate(4, FormFieldComponent_ng_content_4_Template, 1, 0, \"ng-content\", 0);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵclassProp(\"k-form-field-wrap\", ctx.horizontal);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.hasHints);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.hasErrors);\n      }\n    },\n    directives: [ɵngcc3.NgIf],\n    encapsulation: 2\n  });\n\n  __decorate([HostBinding('class.k-form-field'), __metadata(\"design:type\", Boolean)], FormFieldComponent.prototype, \"hostClass\", void 0);\n\n  __decorate([HostBinding('attr.dir'), __metadata(\"design:type\", String)], FormFieldComponent.prototype, \"direction\", void 0);\n\n  __decorate([HostBinding('class.k-form-field-error'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], FormFieldComponent.prototype, \"errorClass\", null);\n\n  __decorate([HostBinding('class.k-form-field-disabled'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], FormFieldComponent.prototype, \"disabledClass\", null);\n\n  __decorate([ContentChildren(NgControl, {\n    descendants: true\n  }), __metadata(\"design:type\", QueryList), __metadata(\"design:paramtypes\", [QueryList])], FormFieldComponent.prototype, \"formControls\", null);\n\n  __decorate([ContentChildren(NgControl, {\n    read: ElementRef,\n    descendants: true\n  }), __metadata(\"design:type\", QueryList)], FormFieldComponent.prototype, \"controlElementRefs\", void 0);\n\n  __decorate([ContentChild(KendoInput, {\n    static: true\n  }), __metadata(\"design:type\", Object)], FormFieldComponent.prototype, \"kendoInput\", void 0);\n\n  __decorate([ContentChildren(ErrorComponent, {\n    descendants: true\n  }), __metadata(\"design:type\", QueryList)], FormFieldComponent.prototype, \"errorChildren\", void 0);\n\n  __decorate([ContentChildren(HintComponent, {\n    descendants: true\n  }), __metadata(\"design:type\", QueryList)], FormFieldComponent.prototype, \"hintChildren\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], FormFieldComponent.prototype, \"showHints\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], FormFieldComponent.prototype, \"orientation\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], FormFieldComponent.prototype, \"showErrors\", void 0);\n\n  FormFieldComponent = __decorate([__metadata(\"design:paramtypes\", [Renderer2, LocalizationService, ElementRef])], FormFieldComponent);\n  /**\n   * Represents the [NgModule]({{ site.data.urls.angular['ngmoduleapi'] }})\n   * definition for the FormField, Error and Hint components.\n   *\n   * @example\n   *\n   * ```ts-no-run\n   * // Import the FormField module\n   * import { FormFieldModule } from '@progress/kendo-angular-inputs';\n   *\n   * // The browser platform with a compiler\n   * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n   *\n   * import { NgModule } from '@angular/core';\n   *\n   * // Import the app component\n   * import { AppComponent } from './app.component';\n   *\n   * // Define the app module\n   * _@NgModule({\n   *     declarations: [AppComponent], // declare app component\n   *     imports:      [BrowserModule, FormFieldModule], // import FormField module\n   *     bootstrap:    [AppComponent]\n   * })\n   * export class AppModule {}\n   *\n   * // Compile and launch the module\n   * platformBrowserDynamic().bootstrapModule(AppModule);\n   *\n   * ```\n   */\n\n  return FormFieldComponent;\n})();\nlet FormFieldModule = /*#__PURE__*/(() => {\n  let FormFieldModule = class FormFieldModule {};\n\n  FormFieldModule.ɵfac = function FormFieldModule_Factory(t) {\n    return new (t || FormFieldModule)();\n  };\n\n  FormFieldModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: FormFieldModule\n  });\n  FormFieldModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule]]\n  });\n  /**\n   * Represents the [NgModule]({{ site.data.urls.angular['ngmoduleapi'] }})\n   * definition for the Inputs components.\n   *\n   * @example\n   *\n   * ```ts-no-run\n   * // Import the Inputs module\n   * import { InputsModule } from '@progress/kendo-angular-inputs';\n   *\n   * // The browser platform with a compiler\n   * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n   * import { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n   *\n   * import { NgModule } from '@angular/core';\n   *\n   * // Import the app component\n   * import { AppComponent } from './app.component';\n   *\n   * // Define the app module\n   * _@NgModule({\n   *     declarations: [AppComponent], // declare app component\n   *     imports:      [BrowserModule, BrowserAnimationsModule, InputsModule], // import Inputs module\n   *     bootstrap:    [AppComponent]\n   * })\n   * export class AppModule {}\n   *\n   * // Compile and launch the module\n   * platformBrowserDynamic().bootstrapModule(AppModule);\n   *\n   * ```\n   */\n\n  return FormFieldModule;\n})();\nlet InputsModule = /*#__PURE__*/(() => {\n  let InputsModule = class InputsModule {};\n\n  InputsModule.ɵfac = function InputsModule_Factory(t) {\n    return new (t || InputsModule)();\n  };\n\n  InputsModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: InputsModule\n  });\n  InputsModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule], TextAreaModule, TextBoxModule, SliderModule, RangeSliderModule, SwitchModule, NumericTextBoxModule, MaskedTextBoxModule, ColorPickerModule, CheckBoxModule, RadioButtonModule, FormFieldModule]\n  });\n  return InputsModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(SlidersCommonModule, {\n    declarations: function () {\n      return [SliderTicksComponent, LabelTemplateDirective];\n    },\n    imports: function () {\n      return [CommonModule, DraggableModule, EventsModule, ResizeSensorModule];\n    },\n    exports: function () {\n      return [LabelTemplateDirective, SliderTicksComponent, DraggableModule, EventsModule, ResizeSensorModule];\n    }\n  });\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(SliderModule, {\n    declarations: function () {\n      return [SliderComponent, SliderCustomMessagesComponent, LocalizedSliderMessagesDirective];\n    },\n    imports: function () {\n      return [CommonModule, SlidersCommonModule];\n    },\n    exports: function () {\n      return [SliderComponent, SliderCustomMessagesComponent, LabelTemplateDirective, LocalizedSliderMessagesDirective];\n    }\n  });\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(RangeSliderModule, {\n    declarations: function () {\n      return [RangeSliderComponent, RangeSliderCustomMessagesComponent, LocalizedRangeSliderMessagesDirective];\n    },\n    imports: function () {\n      return [CommonModule, SlidersCommonModule];\n    },\n    exports: function () {\n      return [RangeSliderComponent, RangeSliderCustomMessagesComponent, LocalizedRangeSliderMessagesDirective, LabelTemplateDirective];\n    }\n  });\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(SwitchModule, {\n    declarations: function () {\n      return [SwitchComponent, SwitchCustomMessagesComponent, LocalizedSwitchMessagesDirective];\n    },\n    imports: function () {\n      return [CommonModule, EventsModule, ResizeSensorModule];\n    },\n    exports: function () {\n      return [SwitchComponent, SwitchCustomMessagesComponent, LocalizedSwitchMessagesDirective];\n    }\n  });\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NumericTextBoxModule, {\n    declarations: function () {\n      return [LocalizedNumericTextBoxMessagesDirective, NumericTextBoxComponent, NumericTextBoxCustomMessagesComponent];\n    },\n    imports: function () {\n      return [CommonModule, EventsModule];\n    },\n    exports: function () {\n      return [NumericTextBoxComponent, NumericTextBoxCustomMessagesComponent];\n    }\n  });\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(MaskedTextBoxModule, {\n    declarations: function () {\n      return [MaskedTextBoxComponent];\n    },\n    imports: function () {\n      return [CommonModule, EventsModule];\n    },\n    exports: function () {\n      return [MaskedTextBoxComponent];\n    }\n  });\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(SharedModule, {\n    declarations: [InputSeparatorComponent, TextAreaDirective],\n    exports: [InputSeparatorComponent, TextAreaDirective]\n  });\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(TextBoxModule, {\n    declarations: function () {\n      return [TextBoxDirective, TextBoxContainerComponent, TextBoxComponent, TextBoxSuffixTemplateDirective, TextBoxPrefixTemplateDirective, TextBoxCustomMessagesComponent, LocalizedTextBoxMessagesDirective];\n    },\n    imports: function () {\n      return [CommonModule, EventsModule, SharedModule];\n    },\n    exports: function () {\n      return [TextBoxDirective, TextBoxContainerComponent, TextBoxComponent, TextBoxSuffixTemplateDirective, TextBoxPrefixTemplateDirective, EventsModule, TextBoxCustomMessagesComponent, LocalizedTextBoxMessagesDirective, InputSeparatorComponent, TextAreaDirective];\n    }\n  });\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(TextAreaModule, {\n    declarations: function () {\n      return [TextAreaComponent, TextAreaSuffixComponent];\n    },\n    imports: function () {\n      return [CommonModule, EventsModule, SharedModule];\n    },\n    exports: function () {\n      return [TextAreaComponent, EventsModule, TextAreaSuffixComponent, InputSeparatorComponent, TextAreaDirective];\n    }\n  });\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(ColorPickerModule, {\n    declarations: function () {\n      return [ColorPickerComponent, ColorPaletteComponent, ColorGradientComponent, LocalizedColorPickerMessagesDirective, ColorPickerCustomMessagesComponent, ColorInputComponent, FocusOnDomReadyDirective];\n    },\n    imports: function () {\n      return [SliderModule, NumericTextBoxModule, CommonModule, PopupModule, DraggableModule];\n    },\n    exports: function () {\n      return [ColorPickerComponent, ColorPaletteComponent, ColorGradientComponent, LocalizedColorPickerMessagesDirective, ColorPickerCustomMessagesComponent];\n    }\n  });\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(CheckBoxModule, {\n    declarations: function () {\n      return [CheckBoxDirective];\n    },\n    imports: function () {\n      return [CommonModule];\n    },\n    exports: function () {\n      return [CheckBoxDirective];\n    }\n  });\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(RadioButtonModule, {\n    declarations: function () {\n      return [RadioButtonDirective];\n    },\n    imports: function () {\n      return [CommonModule];\n    },\n    exports: function () {\n      return [RadioButtonDirective];\n    }\n  });\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(FormFieldModule, {\n    declarations: function () {\n      return [HintComponent, ErrorComponent, FormFieldComponent];\n    },\n    imports: function () {\n      return [CommonModule];\n    },\n    exports: function () {\n      return [HintComponent, ErrorComponent, FormFieldComponent];\n    }\n  });\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(InputsModule, {\n    imports: function () {\n      return [CommonModule];\n    },\n    exports: function () {\n      return [TextAreaModule, TextBoxModule, SliderModule, RangeSliderModule, SwitchModule, NumericTextBoxModule, MaskedTextBoxModule, ColorPickerModule, CheckBoxModule, RadioButtonModule, FormFieldModule];\n    }\n  });\n})();\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { CheckBoxModule, ColorInputComponent, FocusOnDomReadyDirective, ColorGradientLocalizationService, ColorPaletteLocalizationService, ColorPickerLocalizationService, ColorPickerCustomMessagesComponent, ColorPickerMessages, ColorPaletteService, MaskingService, NumericTextBoxMessages, RadioButtonModule, RangeSliderCustomMessagesComponent, RangeSliderMessages, SHARED_DIRECTIVES, SliderCustomMessagesComponent, SliderMessages, SliderBase, SlidersCommonModule, SwitchCustomMessagesComponent, Messages, TextFieldsBase, TextBoxCustomMessagesComponent, TextBoxMessages, SliderComponent, RangeSliderComponent, LabelTemplateDirective, SwitchComponent, TextBoxContainerComponent, TextBoxDirective, TextAreaDirective, NumericTextBoxComponent, NumericTextBoxCustomMessagesComponent, MaskedTextBoxComponent, InputsModule, SliderTicksComponent, SliderModule, RangeSliderModule, SwitchModule, NumericTextBoxModule, MaskedTextBoxModule, TextBoxModule, TextAreaModule, ColorPickerComponent, ColorPaletteComponent, ColorGradientComponent, ColorPickerModule, ActiveColorClickEvent, CheckBoxDirective, RadioButtonDirective, HintComponent, ErrorComponent, FormFieldComponent, FormFieldModule, TextBoxComponent, TextBoxPrefixTemplateDirective, TextBoxSuffixTemplateDirective, TextAreaComponent, TextAreaSuffixComponent, InputSeparatorComponent, SharedModule, LocalizedColorPickerMessagesDirective, LocalizedNumericTextBoxMessagesDirective, LocalizedTextBoxMessagesDirective, LocalizedSliderMessagesDirective, LocalizedRangeSliderMessagesDirective, LocalizedSwitchMessagesDirective }; //# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OzBKQUFFO0FBQ0YscUNBSUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b1ZBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7dU9BQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREE0Rkc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs0T0FBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQW1GRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsySUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQXlDRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O2lEQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBWUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozt3REFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FRRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBUUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztnS0FBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtFQTBFRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztrTkFBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O3VLQUFFO0FBQ0YsOEZBV0c7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O29KQUdtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2lGQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUE0Q0c7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7OzBJQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBdUJHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7K0JBZ0J3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OzROQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztrREFBRTtBQUNGLG9GQVVHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OytKQUFFO0FBQ0YsOEVBV0c7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs4R0FnQmlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Z09BQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztrREFBRTtBQUNGLDhGQVVHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O29LQUFFO0FBQ0Ysd0ZBV0c7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OzttSEFnQnNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7NEpBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztrREFBRTtBQUNGLG9GQVVHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OytKQUFFO0FBQ0YsOEVBV0c7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7MkhBZWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7a0RBQUU7QUFDRixvR0FVRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OzsrR0FjeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs4R0FPd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7NEtBQUU7QUFDRiw2Q0FJRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs0S0FBRTtBQUNGLDZDQUlHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztrTUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFnRUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O29LQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O2dLQUFFO0FBQ0YsZ0ZBV0c7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7a0RBQUU7QUFDRixzRkFVRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O2tIQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsMkRBTTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OERBTWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7b0lBeUJrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OE5BQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7aUdBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBd0NHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7NkJBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSwyREFPNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztxSUFlbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O29NQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OzBNQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2lGQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0F1Rkc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7d0xBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUEySEc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Z05BQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQTJHRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7bUtBR3dCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzt1TUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzBJQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4REF1REc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztvbkJBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztvS0FBRTtBQUNGLHdGQVdHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O2tEQUFFO0FBQ0YsOEZBVUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzswSkFBRTtBQUNGLHVDQUlHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7O2NBZ0JzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7V0FBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLHNEQUtzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OzJGQU9tQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7V0FBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLHlEQUt5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OzhGQU9zQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7NkJBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBUW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs2QkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBUWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozt3REFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQW1CRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7NEZBT29CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBa0JpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyIvKiotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuKiBDb3B5cmlnaHQgwqkgMjAyMSBQcm9ncmVzcyBTb2Z0d2FyZSBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiogTGljZW5zZWQgdW5kZXIgY29tbWVyY2lhbCBsaWNlbnNlLiBTZWUgTElDRU5TRS5tZCBpbiB0aGUgcHJvamVjdCByb290IGZvciBtb3JlIGluZm9ybWF0aW9uXG4qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5pbXBvcnQgeyBfX2RlY29yYXRlLCBfX3BhcmFtLCBfX21ldGFkYXRhIH0gZnJvbSAndHNsaWInO1xuaW1wb3J0IHsgaXNEZXZNb2RlLCBEaXJlY3RpdmUsIE9wdGlvbmFsLCBUZW1wbGF0ZVJlZiwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgT3V0cHV0LCBIb3N0QmluZGluZywgVmlld0NoaWxkLCBFbGVtZW50UmVmLCBDb250ZW50Q2hpbGQsIENvbXBvbmVudCwgZm9yd2FyZFJlZiwgSW5qZWN0b3IsIFJlbmRlcmVyMiwgTmdab25lLCBDaGFuZ2VEZXRlY3RvclJlZiwgSW5qZWN0LCBJbmplY3RhYmxlLCBIb3N0TGlzdGVuZXIsIFZpZXdDaGlsZHJlbiwgUXVlcnlMaXN0LCBOZ01vZHVsZSwgVmlld0NvbnRhaW5lclJlZiwgQ29udGVudENoaWxkcmVuIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBOZ0NvbnRyb2wsIE5HX1ZBTFVFX0FDQ0VTU09SLCBOR19WQUxJREFUT1JTLCBSYWRpb0NvbnRyb2xWYWx1ZUFjY2Vzc29yIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uLCBmcm9tRXZlbnQsIGludGVydmFsLCBtZXJnZSwgT2JzZXJ2YWJsZSwgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgdGFrZSwgZmlsdGVyLCBjb25jYXRNYXAsIHN0YXJ0V2l0aCwgdGFrZVVudGlsLCBza2lwLCBkZWJvdW5jZVRpbWUsIHRocm90dGxlVGltZSB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IExvY2FsaXphdGlvblNlcnZpY2UsIEwxME5fUFJFRklYLCBSVEwsIENvbXBvbmVudE1lc3NhZ2VzLCBNZXNzYWdlU2VydmljZSB9IGZyb20gJ0Bwcm9ncmVzcy9rZW5kby1hbmd1bGFyLWwxMG4nO1xuaW1wb3J0IHsgS2V5cywgZ3VpZCwgaGFzT2JzZXJ2ZXJzLCBhbnlDaGFuZ2VkLCBpc0RvY3VtZW50QXZhaWxhYmxlLCBLZW5kb0lucHV0LCBpc0NoYW5nZWQsIERyYWdnYWJsZU1vZHVsZSwgRXZlbnRzTW9kdWxlLCBSZXNpemVTZW5zb3JNb2R1bGUgfSBmcm9tICdAcHJvZ3Jlc3Mva2VuZG8tYW5ndWxhci1jb21tb24nO1xuaW1wb3J0IHsgdmFsaWRhdGVQYWNrYWdlIH0gZnJvbSAnQHByb2dyZXNzL2tlbmRvLWxpY2Vuc2luZyc7XG5pbXBvcnQgeyBicm93c2VyLCBtb2JpbGVPUyB9IGZyb20gJ0Bwcm9ncmVzcy9rZW5kby1jb21tb24nO1xuaW1wb3J0IHsgSW50bFNlcnZpY2UgfSBmcm9tICdAcHJvZ3Jlc3Mva2VuZG8tYW5ndWxhci1pbnRsJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBQb3B1cFNlcnZpY2UsIFBvcHVwTW9kdWxlIH0gZnJvbSAnQHByb2dyZXNzL2tlbmRvLWFuZ3VsYXItcG9wdXAnO1xuaW1wb3J0IHsgQ29sb3IsIHBhcnNlQ29sb3IsIG5hbWVkQ29sb3JzIH0gZnJvbSAnQHByb2dyZXNzL2tlbmRvLWRyYXdpbmcnO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqXG4gKiBDaGVja3MgaWYgdGhlIHZhbHVlIGlzIGBudWxsYCBvciBgdW5kZWZpbmVkYC4gRmFsc3kgdmFsdWVzIGxpa2UgJycsIDAsIGZhbHNlLCBOYU4sIGV0Yy4gYXJlIHJlZ2FyZGVkIGFzIHByZXNlbnQuXG4gKi9cbmNvbnN0IGlzUHJlc2VudCA9ICh2YWx1ZSkgPT4gdmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHVuZGVmaW5lZDtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBhcmVTYW1lID0gKHZhbHVlMSwgdmFsdWUyKSA9PiB2YWx1ZTEgPT09IHZhbHVlMiB8fCAodmFsdWUxID09PSBudWxsICYmIHZhbHVlMiA9PT0gdW5kZWZpbmVkKSB8fCAodmFsdWUxID09PSB1bmRlZmluZWQgJiYgdmFsdWUyID09PSBudWxsKTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCByZXF1aXJlc1pvbmVPbkJsdXIgPSAobmdDb250cm9sKSA9PiBuZ0NvbnRyb2wgJiZcbiAgICAoIW5nQ29udHJvbC50b3VjaGVkIHx8IChuZ0NvbnRyb2wuY29udHJvbCAmJiBuZ0NvbnRyb2wuY29udHJvbC51cGRhdGVPbiA9PT0gJ2JsdXInKSk7XG4vKipcbiAqIEBoaWRkZW5cbiAqXG4gKiBGaXRzIHRoZSBjb250ZW5kZXIgbnVtYmVyIGludG8gdGhlIHNwZWNpZmllZCBib3VuZHMuIElmIHRoZSBudW1iZXIgaXMgTmFOIG9yIG51bGwsIHRoZSBtaW4gaXMgcmV0dXJuZWQuXG4gKlxuICogQHBhcmFtIGNvbnRlbmRlciBSZXByZXNlbnRzIHRoZSBudW1iZXIgeW91IHdhbnQgdG8gZml0IGludG8gc3BlY2lmaWVkIGJvdW5kcy5cbiAqIEBwYXJhbSBtaW4gVGhlIGluY2x1c2l2ZSBsb3dlciBib3VuZCBudW1iZXIuXG4gKiBAcGFyYW0gbWF4IFRoZSBpbmNsdXNpdmUgdXBwZXIgYm91bmQgbnVtYmVyLlxuICovXG5jb25zdCBmaXRJbnRvQm91bmRzID0gKGNvbnRlbmRlciwgbWluLCBtYXgpID0+IHtcbiAgICBpZiAoIWlzUHJlc2VudChjb250ZW5kZXIpIHx8IGlzTmFOKGNvbnRlbmRlcikpIHtcbiAgICAgICAgcmV0dXJuIG1pbjtcbiAgICB9XG4gICAgcmV0dXJuIGNvbnRlbmRlciA8PSBtaW4gPyBtaW4gOiBjb250ZW5kZXIgPj0gbWF4ID8gbWF4IDogY29udGVuZGVyO1xufTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IE1BWF9QUkVDSVNJT04gPSAyMDtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBsaW1pdFByZWNpc2lvbiA9IChwcmVjaXNpb24pID0+IE1hdGgubWluKHByZWNpc2lvbiwgTUFYX1BSRUNJU0lPTik7XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgZnJhY3Rpb25MZW5ndGggPSAodmFsdWUpID0+IHtcbiAgICByZXR1cm4gKFN0cmluZyh2YWx1ZSkuc3BsaXQoJy4nKVsxXSB8fCBcIlwiKS5sZW5ndGg7XG59O1xuY29uc3QgbWF4RnJhY3Rpb25MZW5ndGggPSAodmFsdWUxLCB2YWx1ZTIpID0+IHtcbiAgICByZXR1cm4gTWF0aC5tYXgoZnJhY3Rpb25MZW5ndGgodmFsdWUxKSwgZnJhY3Rpb25MZW5ndGgodmFsdWUyKSk7XG59O1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IHRvRml4ZWRQcmVjaXNpb24gPSAodmFsdWUsIHByZWNpc2lvbikgPT4ge1xuICAgIGNvbnN0IG1heFByZWNpc2lvbiA9IGxpbWl0UHJlY2lzaW9uKHByZWNpc2lvbik7XG4gICAgcmV0dXJuIHBhcnNlRmxvYXQodmFsdWUudG9GaXhlZChtYXhQcmVjaXNpb24pKTtcbn07XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgYWRkID0gKHZhbHVlMSwgdmFsdWUyKSA9PiB7XG4gICAgY29uc3QgbWF4UHJlY2lzaW9uID0gbWF4RnJhY3Rpb25MZW5ndGgodmFsdWUxLCB2YWx1ZTIpO1xuICAgIHJldHVybiB0b0ZpeGVkUHJlY2lzaW9uKHZhbHVlMSArIHZhbHVlMiwgbWF4UHJlY2lzaW9uKTtcbn07XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3Qgc3VidHJhY3QgPSAodmFsdWUxLCB2YWx1ZTIpID0+IHtcbiAgICByZXR1cm4gYWRkKHZhbHVlMSwgLXZhbHVlMik7XG59O1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IG11bHRpcGx5ID0gKHZhbHVlMSwgdmFsdWUyKSA9PiB7XG4gICAgY29uc3QgbWF4UHJlY2lzaW9uID0gZnJhY3Rpb25MZW5ndGgodmFsdWUxKSArIGZyYWN0aW9uTGVuZ3RoKHZhbHVlMik7XG4gICAgcmV0dXJuIHRvRml4ZWRQcmVjaXNpb24odmFsdWUxICogdmFsdWUyLCBtYXhQcmVjaXNpb24pO1xufTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBkaXZpZGUgPSAoZGl2aWRlbmQsIGRpdmlzb3IpID0+IHtcbiAgICBpZiAoZGl2aXNvciA9PT0gMCkge1xuICAgICAgICByZXR1cm4gTmFOO1xuICAgIH1cbiAgICBjb25zdCBwb3dlciA9IG1heEZyYWN0aW9uTGVuZ3RoKGRpdmlkZW5kLCBkaXZpc29yKTtcbiAgICBjb25zdCBjb3JyZWN0aW9uVmFsdWUgPSBNYXRoLnBvdygxMCwgcG93ZXIpO1xuICAgIHJldHVybiAoKGNvcnJlY3Rpb25WYWx1ZSAqIGRpdmlkZW5kKSAvIChjb3JyZWN0aW9uVmFsdWUgKiBkaXZpc29yKSk7XG59O1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IHJlbWFpbmRlciA9IChkaXZpZGVuZCwgZGl2aXNvcikgPT4ge1xuICAgIHJldHVybiBNYXRoLmFicyhzdWJ0cmFjdChkaXZpZGVuZCwgbXVsdGlwbHkoZGl2aXNvciwgTWF0aC5mbG9vcihkaXZpZGUoZGl2aWRlbmQsIGRpdmlzb3IpKSkpKTtcbn07XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBjYWxjdWxhdGVGaXhlZFRyYWNrU2l6ZSA9ICh7IG1heCwgbWluLCBzbWFsbFN0ZXAsIGZpeGVkVGlja1dpZHRoIH0pID0+ICgobWF4IC0gbWluKSAvIHNtYWxsU3RlcCkgKiBmaXhlZFRpY2tXaWR0aDtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBjYWxjdWxhdGVUcmFja1NpemUgPSAod3JhcHBlcldpZHRoLCBvZmZzZXQsIHNob3dCdXR0b25zID0gdHJ1ZSkgPT4ge1xuICAgIGNvbnN0IEJVVFRPTlNfQ09VTlQgPSAyO1xuICAgIGNvbnN0IHRyYWNrT2Zmc2V0ID0gc2hvd0J1dHRvbnMgPyBwYXJzZUZsb2F0KG9mZnNldCkgKiBCVVRUT05TX0NPVU5UIDogMDtcbiAgICBjb25zdCB0cmFja1dpZHRoID0gd3JhcHBlcldpZHRoIC0gdHJhY2tPZmZzZXQ7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IodHJhY2tXaWR0aCk7XG59O1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IGNhbGN1bGF0ZVRpY2tzQ291bnQgPSAobWluID0gMCwgbWF4ID0gMCwgc21hbGxTdGVwID0gMSkgPT4ge1xuICAgIGlmIChzbWFsbFN0ZXAgPD0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgYXJndW1lbnQ6IHNtYWxsU3RlcCBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7XG4gICAgfVxuICAgIGNvbnN0IGFkanVzdGVkUmFuZ2UgPSBNYXRoLmFicyhzdWJ0cmFjdChtYXgsIG1pbikpO1xuICAgIGNvbnN0IGFkanVzdGVkUmF0aW8gPSBNYXRoLmZsb29yKGRpdmlkZShhZGp1c3RlZFJhbmdlLCBzbWFsbFN0ZXApKTtcbiAgICBjb25zdCByZXN1bHQgPSBhZGQoYWRqdXN0ZWRSYXRpbywgMSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgY2FsY3VsYXRlVmFsdWVGcm9tVGljayA9IChpbmRleCwgeyBtYXgsIG1pbiwgc21hbGxTdGVwLCByZXZlcnNlLCB2ZXJ0aWNhbCB9KSA9PiB7XG4gICAgY29uc3QgdmFsdWUgPSBhZGQobWluLCBtdWx0aXBseShpbmRleCwgc21hbGxTdGVwKSk7XG4gICAgcmV0dXJuIHZlcnRpY2FsIHx8IHJldmVyc2UgPyBNYXRoLmFicyhzdWJ0cmFjdCh2YWx1ZSwgbWF4KSkgOiB2YWx1ZTtcbn07XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgY2FsY3VsYXRlSGFuZGxlUG9zaXRpb24gPSAoeyBoYW5kbGVXaWR0aCwgdHJhY2tXaWR0aCwgbWluLCBtYXgsIHJldmVyc2UsIHZhbHVlIH0pID0+IHtcbiAgICBjb25zdCBoYWxmSGFuZGxlV2lkdGggPSBNYXRoLmZsb29yKGhhbmRsZVdpZHRoIC8gMik7XG4gICAgY29uc3Qgc3RlcCA9IHRyYWNrV2lkdGggLyBNYXRoLmFicyhtYXggLSBtaW4pO1xuICAgIGxldCBwb3MgPSBpc1ByZXNlbnQodmFsdWUpID8gc3RlcCAqICh2YWx1ZSAtIG1pbikgOiBtaW47XG4gICAgaWYgKHJldmVyc2UpIHtcbiAgICAgICAgcG9zID0gdHJhY2tXaWR0aCAtIHBvcztcbiAgICB9XG4gICAgcmV0dXJuIE1hdGguZmxvb3IocG9zIC0gaGFsZkhhbmRsZVdpZHRoKTtcbn07XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgZGVjcmVhc2VWYWx1ZVRvU3RlcCA9ICh2YWx1ZSwgeyBtYXgsIG1pbiwgc21hbGxTdGVwLCBsYXJnZVN0ZXAgfSwgbGFyZ2UgPSBmYWxzZSkgPT4ge1xuICAgIGNvbnN0IHN0ZXAgPSBsYXJnZSAmJiBsYXJnZVN0ZXAgPyBtdWx0aXBseShzbWFsbFN0ZXAsIGxhcmdlU3RlcCkgOiBzbWFsbFN0ZXA7XG4gICAgY29uc3Qgc3RlcFZhbHVlID0gc3VidHJhY3QodmFsdWUsIG1pbik7XG4gICAgbGV0IHJlc3VsdDtcbiAgICBjb25zdCBzdGVwUmVtYWluZGVyID0gcmVtYWluZGVyKHN0ZXBWYWx1ZSwgc3RlcCk7XG4gICAgaWYgKHN0ZXBSZW1haW5kZXIgPT09IDApIHtcbiAgICAgICAgcmVzdWx0ID0gc3VidHJhY3Qoc3RlcFZhbHVlLCBzdGVwKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJlc3VsdCA9IHN1YnRyYWN0KHN0ZXBWYWx1ZSwgc3RlcFJlbWFpbmRlcik7XG4gICAgfVxuICAgIHJldHVybiBsaW1pdFZhbHVlKGFkZChyZXN1bHQsIG1pbiksIG1pbiwgbWF4KTtcbn07XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgaW5jcmVhc2VWYWx1ZVRvU3RlcCA9ICh2YWx1ZSwgeyBtYXgsIG1pbiwgc21hbGxTdGVwLCBsYXJnZVN0ZXAgfSwgbGFyZ2UgPSBmYWxzZSkgPT4ge1xuICAgIGNvbnN0IHN0ZXAgPSBsYXJnZSAmJiBsYXJnZVN0ZXAgPyBtdWx0aXBseShzbWFsbFN0ZXAsIGxhcmdlU3RlcCkgOiBzbWFsbFN0ZXA7XG4gICAgY29uc3Qgc3RlcFZhbHVlID0gc3VidHJhY3QodmFsdWUsIG1pbik7XG4gICAgY29uc3Qgc3RlcFJlbWFpbmRlciA9IHJlbWFpbmRlcihzdGVwVmFsdWUsIHN0ZXApO1xuICAgIGNvbnN0IHJlc3VsdCA9IGFkZChzdWJ0cmFjdChzdGVwVmFsdWUsIHN0ZXBSZW1haW5kZXIpLCBzdGVwKTtcbiAgICByZXR1cm4gbGltaXRWYWx1ZShhZGQocmVzdWx0LCBtaW4pLCBtaW4sIG1heCk7XG59O1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IGlzU3RhcnRIYW5kbGUgPSAoZHJhZ0hhbmRsZSkgPT4gZHJhZ0hhbmRsZS5pZC5pbmRleE9mKCdrLXN0YXJ0LWhhbmRsZScpID4gLTE7XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3Qgc25hcFZhbHVlID0gKHZhbHVlLCBvcHRpb25zKSA9PiB7XG4gICAgY29uc3QgeyBzbWFsbFN0ZXAsIG1pbiwgbWF4IH0gPSBvcHRpb25zO1xuICAgIGNvbnN0IGxpbWl0ZWQgPSBsaW1pdFZhbHVlKHZhbHVlLCBtaW4sIG1heCk7XG4gICAgaWYgKHZhbHVlICE9PSBsaW1pdGVkKSB7XG4gICAgICAgIHJldHVybiBsaW1pdGVkO1xuICAgIH1cbiAgICBjb25zdCBsZWZ0ID0gZGVjcmVhc2VWYWx1ZVRvU3RlcCh2YWx1ZSwgb3B0aW9ucyk7XG4gICAgY29uc3QgcmlnaHQgPSBpbmNyZWFzZVZhbHVlVG9TdGVwKHZhbHVlLCBvcHRpb25zKTtcbiAgICBpZiAoKHZhbHVlIC0gbWluKSAlIHNtYWxsU3RlcCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGlmIChyaWdodCAtIHZhbHVlIDw9IChyaWdodCAtIGxlZnQpIC8gMikge1xuICAgICAgICByZXR1cm4gcmlnaHQ7XG4gICAgfVxuICAgIHJldHVybiBsZWZ0O1xufTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCB0cmltVmFsdWUgPSAobWF4LCBtaW4sIHZhbHVlKSA9PiB7XG4gICAgaWYgKHZhbHVlID4gbWF4KSB7XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxuICAgIGlmICh2YWx1ZSA8IG1pbikge1xuICAgICAgICByZXR1cm4gbWluO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG59O1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IHRyaW1WYWx1ZVJhbmdlID0gKG1heCwgbWluLCB2YWx1ZSkgPT4ge1xuICAgIHJldHVybiB2YWx1ZSA/IFt0cmltVmFsdWUobWF4LCBtaW4sIHZhbHVlWzBdKSwgdHJpbVZhbHVlKG1heCwgbWluLCB2YWx1ZVsxXSldIDogW21pbiwgbWluXTtcbn07XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgaWRlbnRpdHkgPSAodmFsdWUpID0+IHZhbHVlO1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IGlzU2FtZVJhbmdlID0gKHZhbHVlMSwgdmFsdWUyKSA9PiBhcmVTYW1lKHZhbHVlMVswXSwgdmFsdWUyWzBdKSAmJiBhcmVTYW1lKHZhbHVlMVsxXSwgdmFsdWUyWzFdKTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBlbGVtZW50T2Zmc2V0ID0gKGVsZW1lbnQpID0+IHtcbiAgICBjb25zdCBib3ggPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGNvbnN0IGRvY3VtZW50RWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgICByZXR1cm4ge1xuICAgICAgICBsZWZ0OiBib3gubGVmdCArICh3aW5kb3cucGFnZVhPZmZzZXQgfHwgZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQpIC0gKGRvY3VtZW50RWxlbWVudC5jbGllbnRMZWZ0IHx8IDApLFxuICAgICAgICB0b3A6IGJveC50b3AgKyAod2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3ApIC0gKGRvY3VtZW50RWxlbWVudC5jbGllbnRUb3AgfHwgMClcbiAgICB9O1xufTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBsaW1pdFZhbHVlID0gKHZhbHVlLCBtaW4sIG1heCkgPT4ge1xuICAgIHJldHVybiBNYXRoLm1heChNYXRoLm1pbih2YWx1ZSwgbWF4KSwgbWluKTtcbn07XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgZXZlbnRWYWx1ZSA9IChldmVudEFyZ3MsIHNjYWxlRWxlbWVudCwgb3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IHsgbWluLCBtYXgsIHZlcnRpY2FsLCBydGwgfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgdHJhY2tPZmZzZXQgPSBlbGVtZW50T2Zmc2V0KHNjYWxlRWxlbWVudCk7XG4gICAgY29uc3Qgb2Zmc2V0ID0gdmVydGljYWwgPyBldmVudEFyZ3MucGFnZVkgLSB0cmFja09mZnNldC50b3AgOiBldmVudEFyZ3MucGFnZVggLSB0cmFja09mZnNldC5sZWZ0O1xuICAgIGNvbnN0IHNjYWxlID0gKG1heCAtIG1pbikgLyAodmVydGljYWwgPyBzY2FsZUVsZW1lbnQuY2xpZW50SGVpZ2h0IDogc2NhbGVFbGVtZW50LmNsaWVudFdpZHRoKTtcbiAgICBjb25zdCBvZmZzZXRWYWx1ZSA9IG9mZnNldCAqIHNjYWxlO1xuICAgIGxldCB2YWx1ZSA9IHJ0bCB8fCB2ZXJ0aWNhbCA/IG1heCAtIG9mZnNldFZhbHVlIDogbWluICsgb2Zmc2V0VmFsdWU7XG4gICAgY29uc3Qgc3RlcEZyYWN0aW9uTGVuZ3RoID0gZnJhY3Rpb25MZW5ndGgob3B0aW9ucy5zbWFsbFN0ZXApO1xuICAgIHZhbHVlID0gdG9GaXhlZFByZWNpc2lvbih2YWx1ZSwgc3RlcEZyYWN0aW9uTGVuZ3RoICsgMSk7XG4gICAgcmV0dXJuIHNuYXBWYWx1ZSh2YWx1ZSwgb3B0aW9ucyk7XG59O1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IGlzQnV0dG9uID0gKGVsZW1lbnQpID0+IHtcbiAgICByZXR1cm4gZWxlbWVudC5jbGFzc05hbWUuaW5kZXhPZignay1idXR0b24taW5jcmVhc2UnKSA+PSAwIHx8IGVsZW1lbnQuY2xhc3NOYW1lLmluZGV4T2YoJ2stYnV0dG9uLWRlY3JlYXNlJykgPj0gMDtcbn07XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgaW5jcmVtZW50ID0gKG9wdGlvbnMpID0+IHtcbiAgICByZXR1cm4gaW5jcmVhc2VWYWx1ZVRvU3RlcChvcHRpb25zLnZhbHVlLCBvcHRpb25zKTtcbn07XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgZGVjcmVtZW50ID0gKG9wdGlvbnMpID0+IHtcbiAgICByZXR1cm4gZGVjcmVhc2VWYWx1ZVRvU3RlcChvcHRpb25zLnZhbHVlLCBvcHRpb25zKTtcbn07XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgaW5jcmVtZW50TGFyZ2UgPSAob3B0aW9ucykgPT4ge1xuICAgIHJldHVybiBpbmNyZWFzZVZhbHVlVG9TdGVwKG9wdGlvbnMudmFsdWUsIG9wdGlvbnMsIHRydWUpO1xufTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBkZWNyZW1lbnRMYXJnZSA9IChvcHRpb25zKSA9PiB7XG4gICAgcmV0dXJuIGRlY3JlYXNlVmFsdWVUb1N0ZXAob3B0aW9ucy52YWx1ZSwgb3B0aW9ucywgdHJ1ZSk7XG59O1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IHZhbGlkYXRlVmFsdWUgPSAodmFsdWUpID0+IHtcbiAgICBpZiAoaXNEZXZNb2RlICYmIHZhbHVlICYmIHZhbHVlWzBdID4gdmFsdWVbMV0pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdbUmFuZ2VTbGlkZXJdIFRoZSBzdGFydCB2YWx1ZSBzaG91bGQgbm90IGJlIGdyZWF0ZXIgdGhhbiB0aGUgZW5kIHZhbHVlLicpO1xuICAgIH1cbn07XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5jbGFzcyBTbGlkZXJNb2RlbEJhc2Uge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzLCB3cmFwcGVyLCB0cmFjaywgcmVuZGVyZXIpIHtcbiAgICAgICAgdGhpcy5wcm9wcyA9IHByb3BzO1xuICAgICAgICB0aGlzLndyYXBwZXIgPSB3cmFwcGVyO1xuICAgICAgICB0aGlzLnRyYWNrID0gdHJhY2s7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5wcm9wcyA9IHByb3BzO1xuICAgICAgICB0aGlzLndyYXBwZXIgPSB3cmFwcGVyO1xuICAgICAgICB0aGlzLnRyYWNrID0gdHJhY2s7XG4gICAgICAgIHRoaXMudGlja1NpemVzID0gdGhpcy5nZXRUaWNrU2l6ZXMoKTtcbiAgICB9XG4gICAgcmVzaXplVHJhY2soKSB7XG4gICAgICAgIGNvbnN0IG9yaWVudGF0aW9uID0gdGhpcy5wcm9wcy52ZXJ0aWNhbCA/ICdoZWlnaHQnIDogJ3dpZHRoJztcbiAgICAgICAgY29uc3QgdHJhY2tXaWR0aCA9IHRoaXMudHJhY2tXaWR0aCgpO1xuICAgICAgICB0aGlzLnRyYWNrLnN0eWxlW29yaWVudGF0aW9uXSA9IGAke3RyYWNrV2lkdGh9cHhgO1xuICAgIH1cbiAgICByZXNpemVUaWNrcyh0aWNrc0NvbnRhaW5lciwgdGlja3MpIHtcbiAgICAgICAgY29uc3QgZGltZW5zaW9uID0gdGhpcy5wcm9wcy52ZXJ0aWNhbCA/IFwiaGVpZ2h0XCIgOiBcIndpZHRoXCI7XG4gICAgICAgIFsuLi50aWNrc10ubWFwKCh0aWNrLCBpbmRleCkgPT4gdGljay5zdHlsZVtkaW1lbnNpb25dID0gYCR7dGhpcy50aWNrU2l6ZXNbaW5kZXhdfXB4YCk7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLnZlcnRpY2FsKSB7XG4gICAgICAgICAgICB0aGlzLmFkanVzdFBhZGRpbmcodGlja3NDb250YWluZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlc2l6ZVdyYXBwZXIoKSB7XG4gICAgICAgIGNvbnN0IGRpbWVuc2lvbiA9IHRoaXMucHJvcHMudmVydGljYWwgPyBcImhlaWdodFwiIDogXCJ3aWR0aFwiO1xuICAgICAgICBjb25zdCB3cmFwcGVyU2l6ZSA9IHRoaXMuZWxlbWVudFNpemUodGhpcy53cmFwcGVyKTtcbiAgICAgICAgY29uc3QgdHJhY2tXaWR0aCA9IGNhbGN1bGF0ZVRyYWNrU2l6ZSh3cmFwcGVyU2l6ZSwgdGhpcy5lbGVtZW50T2Zmc2V0KHRoaXMudHJhY2spKTtcbiAgICAgICAgY29uc3QgZml4ZWRUcmFja1dpZHRoID0gY2FsY3VsYXRlRml4ZWRUcmFja1NpemUodGhpcy5wcm9wcyk7XG4gICAgICAgIGNvbnN0IHdyYXBwZXJQYXJlbnRFbCA9IHRoaXMud3JhcHBlci5wYXJlbnRFbGVtZW50O1xuICAgICAgICBpZiAodHJhY2tXaWR0aCA+IGZpeGVkVHJhY2tXaWR0aCkge1xuICAgICAgICAgICAgd3JhcHBlclBhcmVudEVsLnN0eWxlW2RpbWVuc2lvbl0gPSBgJHt3cmFwcGVyU2l6ZSAtICh0cmFja1dpZHRoIC0gZml4ZWRUcmFja1dpZHRoKX1weGA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB3cmFwcGVyUGFyZW50RWwuc3R5bGVbZGltZW5zaW9uXSA9IGAke3dyYXBwZXJTaXplICsgKGZpeGVkVHJhY2tXaWR0aCAtIHRyYWNrV2lkdGgpfXB4YDtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0cmFja1dpZHRoKCkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5maXhlZFRpY2tXaWR0aCkge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGN1bGF0ZUZpeGVkVHJhY2tTaXplKHRoaXMucHJvcHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjYWxjdWxhdGVUcmFja1NpemUodGhpcy5lbGVtZW50U2l6ZSh0aGlzLndyYXBwZXIpLCB0aGlzLmVsZW1lbnRPZmZzZXQodGhpcy50cmFjayksIHRoaXMucHJvcHMuYnV0dG9ucyk7XG4gICAgfVxuICAgIGdldFRpY2tTaXplcygpIHtcbiAgICAgICAgY29uc3QgeyBtaW4sIG1heCwgc21hbGxTdGVwIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBjb25zdCBjb3VudCA9IGNhbGN1bGF0ZVRpY2tzQ291bnQobWluLCBtYXgsIHNtYWxsU3RlcCk7XG4gICAgICAgIGNvbnN0IHRyYWNrU2l6ZSA9IHRoaXMudHJhY2tXaWR0aCgpO1xuICAgICAgICBjb25zdCBkaXN0U3RlcCA9IHRyYWNrU2l6ZSAvIHN1YnRyYWN0KG1heCwgbWluKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgICAgIGxldCB1c2VkU3BhY2UgPSAwO1xuICAgICAgICBsZXQgZW5kUG9pbnQgPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICAgICAgICAgIGlmIChpID09PSAwIHx8IGkgPT09IGNvdW50IC0gMSkge1xuICAgICAgICAgICAgICAgIGVuZFBvaW50ICs9IChzbWFsbFN0ZXAgLyAyKSAqIGRpc3RTdGVwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZW5kUG9pbnQgKz0gc21hbGxTdGVwICogZGlzdFN0ZXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBlbnN1cmUgdGhhdCB0aGUgc3VtIG9mIHRoZSB0aWNrIHNpemVzIGRvZXMgbm90IGV4Y2VlZCB0aGUgdHJhY2sgd2lkdGhcbiAgICAgICAgICAgIGVuZFBvaW50ID0gK2VuZFBvaW50LnRvRml4ZWQoMikgLSAwLjAxO1xuICAgICAgICAgICAgY29uc3Qgc2l6ZSA9IE1hdGgucm91bmQoZW5kUG9pbnQgLSB1c2VkU3BhY2UpO1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goc2l6ZSk7XG4gICAgICAgICAgICB1c2VkU3BhY2UgKz0gc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXNlZFNwYWNlID49IHRyYWNrU2l6ZSkge1xuICAgICAgICAgICAgcmVzdWx0W3Jlc3VsdC5sZW5ndGggLSAxXSAtPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGFkanVzdFBhZGRpbmcodGlja3NDb250YWluZXIpIHtcbiAgICAgICAgY29uc3QgdG90YWxUaWNrU2l6ZSA9IHRoaXMudGlja1NpemVzLnJlZHVjZSgocHJldiwgY3VycikgPT4gcHJldiArIGN1cnIsIDApO1xuICAgICAgICBjb25zdCB0cmFja1dpZHRoID0gdGhpcy50cmFja1dpZHRoKCk7XG4gICAgICAgIGNvbnN0IHJlbWluZGVyID0gdHJhY2tXaWR0aCAtIHRvdGFsVGlja1NpemU7XG4gICAgICAgIGlmIChyZW1pbmRlciAhPT0gMCkge1xuICAgICAgICAgICAgY29uc3QgcGFkZGluZyA9IHJlbWluZGVyICsgdGhpcy5lbGVtZW50T2Zmc2V0KHRoaXMudHJhY2spO1xuICAgICAgICAgICAgdGlja3NDb250YWluZXIuc3R5bGUucGFkZGluZ1RvcCA9IGAke3BhZGRpbmd9cHhgO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsZW1lbnRPZmZzZXQoZWxlbWVudCkge1xuICAgICAgICBjb25zdCB7IHZlcnRpY2FsIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBjb25zdCBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG4gICAgICAgIHJldHVybiBwYXJzZUludCh2ZXJ0aWNhbCA/IHN0eWxlLmJvdHRvbSA6IHN0eWxlLmxlZnQsIDEwKTtcbiAgICB9XG4gICAgZWxlbWVudFNpemUoZWxlbWVudCkge1xuICAgICAgICBjb25zdCB7IHZlcnRpY2FsIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICByZXR1cm4gdmVydGljYWwgPyBlbGVtZW50LmNsaWVudEhlaWdodCA6IGVsZW1lbnQuY2xpZW50V2lkdGg7XG4gICAgfVxufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY2xhc3MgU2xpZGVyTW9kZWwgZXh0ZW5kcyBTbGlkZXJNb2RlbEJhc2Uge1xuICAgIHBvc2l0aW9uSGFuZGxlKGRyYWdIYW5kbGUpIHtcbiAgICAgICAgY29uc3QgeyBtYXgsIG1pbiwgcmV2ZXJzZSwgdmVydGljYWwgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0gdmVydGljYWwgPyAnYm90dG9tJyA6ICdsZWZ0JztcbiAgICAgICAgY29uc3QgdHJhY2tXaWR0aCA9IHRoaXMudHJhY2tXaWR0aCgpO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHRyaW1WYWx1ZShtYXgsIG1pbiwgdGhpcy5wcm9wcy52YWx1ZSk7XG4gICAgICAgIHRoaXMuaGFuZGxlUG9zaXRpb24gPSBjYWxjdWxhdGVIYW5kbGVQb3NpdGlvbih7XG4gICAgICAgICAgICBtaW4sXG4gICAgICAgICAgICBtYXgsXG4gICAgICAgICAgICByZXZlcnNlLFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICB0cmFja1dpZHRoLFxuICAgICAgICAgICAgaGFuZGxlV2lkdGg6IGRyYWdIYW5kbGUub2Zmc2V0V2lkdGhcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoZHJhZ0hhbmRsZSwgcG9zaXRpb24sIGAke3RoaXMuaGFuZGxlUG9zaXRpb259cHhgKTtcbiAgICB9XG4gICAgcG9zaXRpb25TZWxlY3Rpb24oZHJhZ0hhbmRsZSwgc2VsZWN0aW9uKSB7XG4gICAgICAgIGNvbnN0IHsgcmV2ZXJzZSwgdmVydGljYWwgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGNvbnN0IGRpbWVuc2lvbiA9IHZlcnRpY2FsID8gJ2hlaWdodCcgOiAnd2lkdGgnO1xuICAgICAgICBjb25zdCBoYW5kbGVXaWR0aCA9IE1hdGguZmxvb3IoZHJhZ0hhbmRsZS5vZmZzZXRXaWR0aCAvIDIpO1xuICAgICAgICBsZXQgc2l6ZSA9IHRoaXMuaGFuZGxlUG9zaXRpb24gKyBoYW5kbGVXaWR0aDtcbiAgICAgICAgaWYgKHJldmVyc2UpIHtcbiAgICAgICAgICAgIHNpemUgPSB0aGlzLnRyYWNrV2lkdGgoKSAtIHNpemU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShzZWxlY3Rpb24sIGRpbWVuc2lvbiwgYCR7c2l6ZX1weGApO1xuICAgIH1cbn1cblxuY29uc3QgVU5UT1VDSEVEID0gJ25nLXVudG91Y2hlZCc7XG5jb25zdCB0b0NsYXNzTGlzdCA9IChjbGFzc05hbWVzKSA9PiBTdHJpbmcoY2xhc3NOYW1lcykudHJpbSgpLnNwbGl0KCcgJyk7XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgaGFzQ2xhc3MgPSAoZWxlbWVudCwgY2xhc3NOYW1lKSA9PiBCb29sZWFuKHRvQ2xhc3NMaXN0KGVsZW1lbnQuY2xhc3NOYW1lKS5maW5kKChuYW1lKSA9PiBuYW1lID09PSBjbGFzc05hbWUpKTtcbi8qKlxuICogQGhpZGRlblxuICovXG5mdW5jdGlvbiBpbnZva2VFbGVtZW50TWV0aG9kKGVsZW1lbnQsIG5hbWUsIC4uLmFyZ3MpIHtcbiAgICBpZiAoZWxlbWVudCAmJiBlbGVtZW50Lm5hdGl2ZUVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQubmF0aXZlRWxlbWVudFtuYW1lXS5hcHBseShlbGVtZW50Lm5hdGl2ZUVsZW1lbnQsIGFyZ3MpO1xuICAgIH1cbn1cbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBpc1VudG91Y2hlZCA9IChlbGVtZW50KSA9PiBlbGVtZW50ICYmIGVsZW1lbnQubmF0aXZlRWxlbWVudCAmJiBoYXNDbGFzcyhlbGVtZW50Lm5hdGl2ZUVsZW1lbnQsIFVOVE9VQ0hFRCk7XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgY29udGFpbnNGb2N1cyA9IChob3N0RWxlbWVudCwgY29udGVuZGVyKSA9PiBob3N0RWxlbWVudCAmJiBjb250ZW5kZXIgJiYgKGhvc3RFbGVtZW50ID09PSBjb250ZW5kZXIgfHwgaG9zdEVsZW1lbnQuY29udGFpbnMoY29udGVuZGVyKSk7XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgY2xvc2VzdCA9IChub2RlLCBwcmVkaWNhdGUpID0+IHtcbiAgICB3aGlsZSAobm9kZSAmJiAhcHJlZGljYXRlKG5vZGUpKSB7XG4gICAgICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgfVxuICAgIHJldHVybiBub2RlO1xufTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IHBhY2thZ2VNZXRhZGF0YSA9IHtcbiAgICBuYW1lOiAnQHByb2dyZXNzL2tlbmRvLWFuZ3VsYXItaW5wdXRzJyxcbiAgICBwcm9kdWN0TmFtZTogJ0tlbmRvIFVJIGZvciBBbmd1bGFyJyxcbiAgICBwcm9kdWN0Q29kZXM6IFsnS0VORE9VSUFOR1VMQVInLCAnS0VORE9VSUNPTVBMRVRFJ10sXG4gICAgcHVibGlzaERhdGU6IDE2MzA1OTg4MTcsXG4gICAgdmVyc2lvbjogJycsXG4gICAgbGljZW5zaW5nRG9jc1VybDogJ2h0dHBzOi8vd3d3LnRlbGVyaWsuY29tL2tlbmRvLWFuZ3VsYXItdWkvbXktbGljZW5zZS8/dXRtX21lZGl1bT1wcm9kdWN0JnV0bV9zb3VyY2U9a2VuZG9hbmd1bGFyJnV0bV9jYW1wYWlnbj1rZW5kby11aS1hbmd1bGFyLXB1cmNoYXNlLWxpY2Vuc2Uta2V5cy13YXJuaW5nJ1xufTtcblxuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSB0ZW1wbGF0ZSBmb3IgdGhlIGxhYmVscyBvZiB0aGUgU2xpZGVyLlxuICogVG8gZGVmaW5lIHRoZSBsYWJlbHMgdGVtcGxhdGUsIG5lc3QgYW4gYDxuZy10ZW1wbGF0ZT5gIHRhZyB3aXRoIHRoZSBga2VuZG9TbGlkZXJMYWJlbFRlbXBsYXRlYCBkaXJlY3RpdmUgaW5zaWRlXG4gKiB0aGUgYDxrZW5kby1zbGlkZXI+YCB0YWcuIFRoZSB0ZW1wbGF0ZSBjb250ZXh0IGlzIHBhc3NlZCB0byB0aGUgYGxhYmVsYCB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHMtbm8tcnVuXG4gKlxuICogX0BDb21wb25lbnQoe1xuICogICAgIHNlbGVjdG9yOiAnbXktYXBwJyxcbiAqICAgICB0ZW1wbGF0ZTogYFxuICogICAgICAgICA8a2VuZG8tc2xpZGVyIFtsYXJnZVN0ZXBdPVwiMlwiPlxuICogICAgICAgICAgIDxuZy10ZW1wbGF0ZSBrZW5kb1NsaWRlckxhYmVsVGVtcGxhdGUgbGV0LXZhbHVlPVwidmFsdWVcIj5cbiAqICAgICAgICAgICAgIDxiPnt7dmFsdWV9fTwvYj5cbiAqICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICogICAgICAgICA8L2tlbmRvLXNsaWRlcj5cbiAqICAgICBgXG4gKiB9KVxuICpcbiAqIGNsYXNzIEFwcENvbXBvbmVudCB7XG4gKiB9XG4gKlxuICogYGBgXG4gKi9cbmxldCBMYWJlbFRlbXBsYXRlRGlyZWN0aXZlID0gY2xhc3MgTGFiZWxUZW1wbGF0ZURpcmVjdGl2ZSB7XG4gICAgY29uc3RydWN0b3IodGVtcGxhdGVSZWYpIHtcbiAgICAgICAgdGhpcy50ZW1wbGF0ZVJlZiA9IHRlbXBsYXRlUmVmO1xuICAgIH1cbn07XG5MYWJlbFRlbXBsYXRlRGlyZWN0aXZlID0gX19kZWNvcmF0ZShbXG4gICAgRGlyZWN0aXZlKHtcbiAgICAgICAgc2VsZWN0b3I6ICdba2VuZG9TbGlkZXJMYWJlbFRlbXBsYXRlXSdcbiAgICB9KSxcbiAgICBfX3BhcmFtKDAsIE9wdGlvbmFsKCkpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbVGVtcGxhdGVSZWZdKVxuXSwgTGFiZWxUZW1wbGF0ZURpcmVjdGl2ZSk7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5jbGFzcyBTbGlkZXJCYXNlIHtcbiAgICBjb25zdHJ1Y3Rvcihsb2NhbGl6YXRpb25TZXJ2aWNlLCBpbmplY3RvciwgcmVuZGVyZXIsIG5nWm9uZSwgY2hhbmdlRGV0ZWN0b3IsIGhvc3RFbGVtZW50KSB7XG4gICAgICAgIHRoaXMubG9jYWxpemF0aW9uU2VydmljZSA9IGxvY2FsaXphdGlvblNlcnZpY2U7XG4gICAgICAgIHRoaXMuaW5qZWN0b3IgPSBpbmplY3RvcjtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLm5nWm9uZSA9IG5nWm9uZTtcbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3RvciA9IGNoYW5nZURldGVjdG9yO1xuICAgICAgICB0aGlzLmhvc3RFbGVtZW50ID0gaG9zdEVsZW1lbnQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWZpbmVzIHRoZSB0aXRsZSBvZiB0aGUgdGlja3MgKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyB0aWNrc19zbGlkZXIgJX0jdG9jLXRpdGxlcykpLiBUaGUgZGVmYXVsdCB0aXRsZVxuICAgICAgICAgKiBmb3IgZWFjaCB0aWNrIGlzIGl0cyBTbGlkZXIgdmFsdWUuIElmIHlvdSB1c2UgYSBjYWxsYmFjayBmdW5jdGlvbiwgdGhlIGZ1bmN0aW9uIGFjY2VwdHMgYW4gYXJndW1lbnRcbiAgICAgICAgICogdGhhdCBob2xkcyB0aGUgdmFsdWUgb2YgdGhlIGNvbXBvbmVudCBhbmQgcmV0dXJucyBhIHN0cmluZyB3aXRoIHRoZSBuZXcgdGl0bGUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRpdGxlID0gaWRlbnRpdHk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZW5vdGVzIHRoZSBsb2NhdGlvbiBvZiB0aGUgdGljayBtYXJrcyBpbiB0aGUgU2xpZGVyIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgdGlja3Nfc2xpZGVyICV9I3RvYy1wbGFjZW1lbnQpKS5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlIGF2YWlsYWJsZSBvcHRpb25zIGFyZTpcbiAgICAgICAgICogKiBgYmVmb3JlYCZtZGFzaDtUaGUgdGljayBtYXJrcyBhcmUgbG9jYXRlZCB0byB0aGUgdG9wIHNpZGUgb2YgdGhlIGhvcml6b250YWwgdHJhY2sgb3IgdG8gdGhlIGxlZnQgc2lkZSBvZiBhIHZlcnRpY2FsIHRyYWNrLlxuICAgICAgICAgKiAqIGBhZnRlcmAmbWRhc2g7VGhlIHRpY2sgbWFya3MgYXJlIGxvY2F0ZWQgdG8gdGhlIGJvdHRvbSBzaWRlIG9mIHRoZSBob3Jpem9udGFsIHRyYWNrIG9yIHRvIHRoZSByaWdodCBzaWRlIG9mIHRoZSB2ZXJ0aWNhbCB0cmFjay5cbiAgICAgICAgICogKiBgYm90aGAmbWRhc2g7IChEZWZhdWx0KSBUaGUgdGljayBtYXJrcyBhcmUgbG9jYXRlZCBvbiBib3RoIHNpZGVzIG9mIHRoZSB0cmFjay5cbiAgICAgICAgICogKiBgbm9uZWAmbWRhc2g7VGhlIHRpY2sgbWFya3MgYXJlIG5vdCB2aXNpYmxlLiBUaGUgYWN0dWFsIGVsZW1lbnRzIGFyZSBub3QgYWRkZWQgdG8gdGhlIERPTSB0cmVlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50aWNrUGxhY2VtZW50ID0gJ2JvdGgnO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgYHZlcnRpY2FsYCBpcyBzZXQgdG8gYHRydWVgLCB0aGUgb3JpZW50YXRpb24gb2YgdGhlIFNsaWRlciBjaGFuZ2VzIGZyb20gaG9yaXpvbnRhbCB0byB2ZXJ0aWNhbFxuICAgICAgICAgKiAoW3NlZSBleGFtcGxlXSh7JSBzbHVnIG9yaWVudGF0aW9uX3NsaWRlciAlfSkpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52ZXJ0aWNhbCA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG1pbmltdW0gdmFsdWUgb2YgdGhlIFNsaWRlciAoW3NlZSBleGFtcGxlXSh7JSBzbHVnIHByZWRlZmluZWRzdGVwc19zbGlkZXIgJX0jdG9jLXNtYWxsLXN0ZXBzKSkuXG4gICAgICAgICAqIFRoZSBhdHRyaWJ1dGUgYWNjZXB0cyBib3RoIGludGVnZXJzIGFuZCBmbG9hdGluZy1wb2ludCBudW1iZXJzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5taW4gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG1heGltdW0gdmFsdWUgb2YgdGhlIFNsaWRlciAoW3NlZSBleGFtcGxlXSh7JSBzbHVnIHByZWRlZmluZWRzdGVwc19zbGlkZXIgJX0jdG9jLXNtYWxsLXN0ZXBzKSkuXG4gICAgICAgICAqIFRoZSBhdHRyaWJ1dGUgYWNjZXB0cyBib3RoIGludGVnZXJzIGFuZCBmbG9hdGluZy1wb2ludCBudW1iZXJzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tYXggPSAxMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBzdGVwIHZhbHVlIG9mIHRoZSBTbGlkZXIgKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBwcmVkZWZpbmVkc3RlcHNfc2xpZGVyICV9I3RvYy1zbWFsbC1zdGVwcykpLlxuICAgICAgICAgKiBBY2NlcHRzIHBvc2l0aXZlIHZhbHVlcyBvbmx5LiBDYW4gYmUgYW4gaW50ZWdlciBvciBhIGZsb2F0aW5nLXBvaW50IG51bWJlci5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc21hbGxTdGVwID0gMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyB0aGF0IGV2ZXJ5IG48c3VwPnRoPC9zdXA+IHRpY2sgd2lsbCBiZSBsYXJnZSBhbmQgd2lsbCBoYXZlIGEgbGFiZWxcbiAgICAgICAgICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBwcmVkZWZpbmVkc3RlcHNfc2xpZGVyICV9I3RvYy1sYXJnZS1zdGVwcykpLlxuICAgICAgICAgKiBBY2NlcHRzIHBvc2l0aXZlIGludGVnZXIgdmFsdWVzIG9ubHkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmxhcmdlU3RlcCA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIFNsaWRlciBpcyBkaXNhYmxlZCAoW3NlZSBleGFtcGxlXSh7JSBzbHVnIGRpc2FibGVkc3RhdGVfc2xpZGVyICV9KSkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIFNsaWRlciBpcyBpbiBpdHMgcmVhZC1vbmx5IHN0YXRlIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgcmVhZG9ubHlfc2xpZGVyICV9KSkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlYWRvbmx5ID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgdGhlIFt0YWJpbmRleF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9HbG9iYWxfYXR0cmlidXRlcy90YWJpbmRleCkgb2YgdGhlIFNsaWRlci5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGFiaW5kZXggPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSB1c2VyIGZvY3VzZXMgdGhlIGNvbXBvbmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25Gb2N1cyA9IG5ldyBFdmVudEVtaXR0ZXIoKTsgLy90c2xpbnQ6ZGlzYWJsZS1saW5lOm5vLW91dHB1dC1yZW5hbWVcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgY29tcG9uZW50IGlzIGJsdXJyZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uQmx1ciA9IG5ldyBFdmVudEVtaXR0ZXIoKTsgLy90c2xpbnQ6ZGlzYWJsZS1saW5lOm5vLW91dHB1dC1yZW5hbWVcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgdXNlciBzZWxlY3RzIGEgbmV3IHZhbHVlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52YWx1ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5zbGlkZXJDbGFzcyA9IHRydWU7XG4gICAgICAgIHRoaXMud2lkZ2V0Q2xhc3MgPSB0cnVlO1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmlmRW5hYmxlZCA9IChjYWxsYmFjaywgZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0Rpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzLCBldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHZhbGlkYXRlUGFja2FnZShwYWNrYWdlTWV0YWRhdGEpO1xuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IGxvY2FsaXphdGlvblNlcnZpY2UucnRsID8gJ3J0bCcgOiAnbHRyJztcbiAgICB9XG4gICAgZ2V0IGhvcml6b250YWxDbGFzcygpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLnZlcnRpY2FsO1xuICAgIH1cbiAgICBnZXQgdmVydGljYWxDbGFzcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmVydGljYWw7XG4gICAgfVxuICAgIGdldCBkaXNhYmxlZENsYXNzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXNhYmxlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqIENhbGxlZCB3aGVuIHRoZSBzdGF0dXMgb2YgdGhlIGNvbXBvbmVudCBjaGFuZ2VzIHRvIG9yIGZyb20gYGRpc2FibGVkYC5cbiAgICAgKiBEZXBlbmRpbmcgb24gdGhlIHZhbHVlLCBpdCBlbmFibGVzIG9yIGRpc2FibGVzIHRoZSBhcHByb3ByaWF0ZSBET00gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpc0Rpc2FibGVkXG4gICAgICovXG4gICAgc2V0RGlzYWJsZWRTdGF0ZShpc0Rpc2FibGVkKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3IubWFya0ZvckNoZWNrKCk7XG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBpc0Rpc2FibGVkO1xuICAgIH1cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmFkZCh0aGlzLmxvY2FsaXphdGlvblNlcnZpY2VcbiAgICAgICAgICAgIC5jaGFuZ2VzXG4gICAgICAgICAgICAuc3Vic2NyaWJlKCh7IHJ0bCB9KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IHJ0bCA/ICdydGwnIDogJ2x0cic7XG4gICAgICAgICAgICB0aGlzLnNpemVDb21wb25lbnQoKTtcbiAgICAgICAgfSkpO1xuICAgICAgICBpZiAodGhpcy5ob3N0RWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5yZW1vdmVBdHRyaWJ1dGUodGhpcy5ob3N0RWxlbWVudC5uYXRpdmVFbGVtZW50LCBcInRhYmluZGV4XCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29udHJvbCA9IHRoaXMuaW5qZWN0b3IuZ2V0KE5nQ29udHJvbCwgbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBnZXQgaXNEaXNhYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzYWJsZWQgfHwgdGhpcy5yZWFkb25seTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqIFVzZWQgYnkgdGhlIEZsb2F0aW5nTGFiZWwgdG8gZGV0ZXJtaW5lIGlmIHRoZSBjb21wb25lbnQgaXMgZW1wdHkuXG4gICAgICovXG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXQgcmV2ZXJzZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxpemF0aW9uU2VydmljZS5ydGwgJiYgIXRoaXMudmVydGljYWw7XG4gICAgfVxuICAgIGdldCBrZXlCaW5kaW5nKCkge1xuICAgICAgICBjb25zdCByZXZlcnNlID0gdGhpcy5yZXZlcnNlO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgW0tleXMuQXJyb3dMZWZ0XTogcmV2ZXJzZSA/IGluY3JlbWVudCA6IGRlY3JlbWVudCxcbiAgICAgICAgICAgIFtLZXlzLkFycm93UmlnaHRdOiByZXZlcnNlID8gZGVjcmVtZW50IDogaW5jcmVtZW50LFxuICAgICAgICAgICAgW0tleXMuQXJyb3dEb3duXTogZGVjcmVtZW50LFxuICAgICAgICAgICAgW0tleXMuQXJyb3dVcF06IGluY3JlbWVudCxcbiAgICAgICAgICAgIFtLZXlzLlBhZ2VVcF06IGluY3JlbWVudExhcmdlLFxuICAgICAgICAgICAgW0tleXMuUGFnZURvd25dOiBkZWNyZW1lbnRMYXJnZSxcbiAgICAgICAgICAgIFtLZXlzLkhvbWVdOiAoeyBtaW4gfSkgPT4gbWluLFxuICAgICAgICAgICAgW0tleXMuRW5kXTogKHsgbWF4IH0pID0+IG1heFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXNldFN0eWxlcyhlbGVtZW50cykge1xuICAgICAgICBlbGVtZW50cy5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgIGlmIChlbCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnZlcnRpY2FsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlU3R5bGUoZWwsICd3aWR0aCcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZVN0eWxlKGVsLCAnbGVmdCcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZVN0eWxlKGVsLCAncmlnaHQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlU3R5bGUoZWwsICdoZWlnaHQnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5yZW1vdmVTdHlsZShlbCwgJ2JvdHRvbScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZVN0eWxlKGVsLCAncGFkZGluZy10b3AnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pXG5dLCBTbGlkZXJCYXNlLnByb3RvdHlwZSwgXCJ0aXRsZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgU2xpZGVyQmFzZS5wcm90b3R5cGUsIFwidGlja1BsYWNlbWVudFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIFNsaWRlckJhc2UucHJvdG90eXBlLCBcInZlcnRpY2FsXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOdW1iZXIpXG5dLCBTbGlkZXJCYXNlLnByb3RvdHlwZSwgXCJtaW5cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlcilcbl0sIFNsaWRlckJhc2UucHJvdG90eXBlLCBcIm1heFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKVxuXSwgU2xpZGVyQmFzZS5wcm90b3R5cGUsIFwic21hbGxTdGVwXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOdW1iZXIpXG5dLCBTbGlkZXJCYXNlLnByb3RvdHlwZSwgXCJsYXJnZVN0ZXBcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlcilcbl0sIFNsaWRlckJhc2UucHJvdG90eXBlLCBcImZpeGVkVGlja1dpZHRoXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgU2xpZGVyQmFzZS5wcm90b3R5cGUsIFwiZGlzYWJsZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBTbGlkZXJCYXNlLnByb3RvdHlwZSwgXCJyZWFkb25seVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKVxuXSwgU2xpZGVyQmFzZS5wcm90b3R5cGUsIFwidGFiaW5kZXhcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgnZm9jdXMnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgU2xpZGVyQmFzZS5wcm90b3R5cGUsIFwib25Gb2N1c1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCdibHVyJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIFNsaWRlckJhc2UucHJvdG90eXBlLCBcIm9uQmx1clwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIFNsaWRlckJhc2UucHJvdG90eXBlLCBcInZhbHVlQ2hhbmdlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnYXR0ci5kaXInKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgU2xpZGVyQmFzZS5wcm90b3R5cGUsIFwiZGlyZWN0aW9uXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay1zbGlkZXItaG9yaXpvbnRhbCcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBTbGlkZXJCYXNlLnByb3RvdHlwZSwgXCJob3Jpem9udGFsQ2xhc3NcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay1zbGlkZXItdmVydGljYWwnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgU2xpZGVyQmFzZS5wcm90b3R5cGUsIFwidmVydGljYWxDbGFzc1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLXNsaWRlcicpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgU2xpZGVyQmFzZS5wcm90b3R5cGUsIFwic2xpZGVyQ2xhc3NcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLXdpZGdldCcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgU2xpZGVyQmFzZS5wcm90b3R5cGUsIFwid2lkZ2V0Q2xhc3NcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLXN0YXRlLWRpc2FibGVkJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIFNsaWRlckJhc2UucHJvdG90eXBlLCBcImRpc2FibGVkQ2xhc3NcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBWaWV3Q2hpbGQoJ3dyYXAnLCB7IHN0YXRpYzogdHJ1ZSB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRWxlbWVudFJlZilcbl0sIFNsaWRlckJhc2UucHJvdG90eXBlLCBcIndyYXBwZXJcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIFZpZXdDaGlsZCgndHJhY2snLCB7IHN0YXRpYzogdHJ1ZSB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRWxlbWVudFJlZilcbl0sIFNsaWRlckJhc2UucHJvdG90eXBlLCBcInRyYWNrXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBWaWV3Q2hpbGQoJ3NsaWRlclNlbGVjdGlvbicsIHsgc3RhdGljOiB0cnVlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFbGVtZW50UmVmKVxuXSwgU2xpZGVyQmFzZS5wcm90b3R5cGUsIFwic2xpZGVyU2VsZWN0aW9uXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBWaWV3Q2hpbGQoJ3RpY2tzJywgeyByZWFkOiBFbGVtZW50UmVmLCBzdGF0aWM6IGZhbHNlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFbGVtZW50UmVmKVxuXSwgU2xpZGVyQmFzZS5wcm90b3R5cGUsIFwidGlja3NDb250YWluZXJcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIFZpZXdDaGlsZCgndGlja3MnLCB7IHN0YXRpYzogZmFsc2UgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbl0sIFNsaWRlckJhc2UucHJvdG90eXBlLCBcInRpY2tzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBDb250ZW50Q2hpbGQoTGFiZWxUZW1wbGF0ZURpcmVjdGl2ZSwgeyBzdGF0aWM6IGZhbHNlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBMYWJlbFRlbXBsYXRlRGlyZWN0aXZlKVxuXSwgU2xpZGVyQmFzZS5wcm90b3R5cGUsIFwibGFiZWxUZW1wbGF0ZVwiLCB2b2lkIDApO1xuXG52YXIgU2xpZGVyQ29tcG9uZW50XzE7XG5jb25zdCBQUkVTU0VEID0gJ2stcHJlc3NlZCc7XG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIFtLZW5kbyBVSSBTbGlkZXIgY29tcG9uZW50IGZvciBBbmd1bGFyXSh7JSBzbHVnIG92ZXJ2aWV3X3NsaWRlciAlfSkuXG4gKi9cbmxldCBTbGlkZXJDb21wb25lbnQgPSBTbGlkZXJDb21wb25lbnRfMSA9IGNsYXNzIFNsaWRlckNvbXBvbmVudCBleHRlbmRzIFNsaWRlckJhc2Uge1xuICAgIGNvbnN0cnVjdG9yKGxvY2FsaXphdGlvbiwgaW5qZWN0b3IsIHJlbmRlcmVyLCBuZ1pvbmUsIGNoYW5nZURldGVjdG9yLCBob3N0RWxlbWVudCkge1xuICAgICAgICBzdXBlcihsb2NhbGl6YXRpb24sIGluamVjdG9yLCByZW5kZXJlciwgbmdab25lLCBjaGFuZ2VEZXRlY3RvciwgaG9zdEVsZW1lbnQpO1xuICAgICAgICB0aGlzLmxvY2FsaXphdGlvbiA9IGxvY2FsaXphdGlvbjtcbiAgICAgICAgdGhpcy5pbmplY3RvciA9IGluamVjdG9yO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMubmdab25lID0gbmdab25lO1xuICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yID0gY2hhbmdlRGV0ZWN0b3I7XG4gICAgICAgIHRoaXMuaG9zdEVsZW1lbnQgPSBob3N0RWxlbWVudDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBoaWRkZW5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZm9jdXNhYmxlSWQgPSBgay0ke2d1aWQoKX1gO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGV0ZXJtaW5lcyBpZiB0aGUgYW5pbWF0aW9uIHdpbGwgYmUgcGxheWVkIG9uIHZhbHVlIGNoYW5nZS5cbiAgICAgICAgICogUmVnYXJkbGVzcyBvZiB0aGlzIHNldHRpbmcsIG5vIGFuaW1hdGlvbiB3aWxsIGJlIHBsYXllZCBkdXJpbmcgdGhlIGluaXRpYWwgcmVuZGVyaW5nLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hbmltYXRlID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlbmRlcnMgdGhlIGFycm93IHNpZGUgYnV0dG9ucyBvZiB0aGUgU2xpZGVyIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgc2lkZWJ1dHRvbnNfc2xpZGVyICV9I3RvYy1oaWRkZW4tc3RhdGUpKS5cbiAgICAgICAgICogV2hlbiBgc2hvd0J1dHRvbnNgIGlzIHNldCB0byBgZmFsc2VgLCB0aGUgYnV0dG9ucyBhcmUgbm90IGRpc3BsYXllZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2hvd0J1dHRvbnMgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIFNsaWRlciB3aGVuIGl0IGlzIGluaXRpYWxseSBkaXNwbGF5ZWQuXG4gICAgICAgICAqIFRoZSBjb21wb25lbnQgY2FuIHVzZSBlaXRoZXIgTmdNb2RlbCBvciB0aGUgYHZhbHVlYCBiaW5kaW5nIGJ1dCBub3QgYm90aCBvZiB0aGVtIGF0IHRoZSBzYW1lIHRpbWUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy5taW47XG4gICAgICAgIHRoaXMuZm9jdXNDaGFuZ2VkUHJvZ3JhbW1hdGljYWxseSA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGhpZGRlblxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vbldyYXBDbGljayA9IChhcmdzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBhcmdzLnRhcmdldDtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0Rpc2FibGVkICYmICEoaXNCdXR0b24odGFyZ2V0KSB8fCBpc0J1dHRvbih0YXJnZXQucGFyZW50Tm9kZSkpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBldmVudFZhbHVlKGFyZ3MsIHRoaXMudHJhY2submF0aXZlRWxlbWVudCwgdGhpcy5nZXRQcm9wcygpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVZhbHVlKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGludm9rZUVsZW1lbnRNZXRob2QodGhpcy5kcmFnaGFuZGxlLCAnZm9jdXMnKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBoaWRkZW5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25LZXlEb3duID0gKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLmdldFByb3BzKCk7XG4gICAgICAgICAgICBjb25zdCB7IG1heCwgbWluIH0gPSBvcHRpb25zO1xuICAgICAgICAgICAgY29uc3QgaGFuZGxlciA9IHRoaXMua2V5QmluZGluZ1tlLmtleUNvZGVdO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNEaXNhYmxlZCB8fCAhaGFuZGxlcikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gaGFuZGxlcihvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlVmFsdWUodHJpbVZhbHVlKG1heCwgbWluLCB2YWx1ZSkpO1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm5nQ2hhbmdlID0gKF8pID0+IHsgfTtcbiAgICAgICAgdGhpcy5uZ1RvdWNoZWQgPSAoKSA9PiB7IH07XG4gICAgICAgIHRoaXMuZGVjcmVhc2VWYWx1ZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlVmFsdWUoZGVjcmVhc2VWYWx1ZVRvU3RlcCh0aGlzLnZhbHVlLCB0aGlzLmdldFByb3BzKCkpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pbmNyZWFzZVZhbHVlID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VWYWx1ZShpbmNyZWFzZVZhbHVlVG9TdGVwKHRoaXMudmFsdWUsIHRoaXMuZ2V0UHJvcHMoKSkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhhbmRsZUJsdXIgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yLm1hcmtGb3JDaGVjaygpO1xuICAgICAgICAgICAgdGhpcy5mb2N1c2VkID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoaGFzT2JzZXJ2ZXJzKHRoaXMub25CbHVyKSB8fCByZXF1aXJlc1pvbmVPbkJsdXIodGhpcy5jb250cm9sKSkge1xuICAgICAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmdUb3VjaGVkKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5mb2N1c0NoYW5nZWRQcm9ncmFtbWF0aWNhbGx5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQmx1ci5lbWl0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHNldCB0YWJJbmRleCh0YWJJbmRleCkge1xuICAgICAgICB0aGlzLnRhYmluZGV4ID0gdGFiSW5kZXg7XG4gICAgfVxuICAgIGdldCB0YWJJbmRleCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGFiaW5kZXg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBnZXQgY3VycmVudFZhbHVlKCkge1xuICAgICAgICByZXR1cm4gaXNQcmVzZW50KHRoaXMudmFsdWUpID8gdGhpcy52YWx1ZS50b1N0cmluZygpIDogJyc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvY3VzZXMgdGhlIFNsaWRlci5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgdHMtbm8tcnVuXG4gICAgICogX0BDb21wb25lbnQoe1xuICAgICAqIHNlbGVjdG9yOiAnbXktYXBwJyxcbiAgICAgKiB0ZW1wbGF0ZTogYFxuICAgICAqICA8YnV0dG9uIChjbGljayk9XCJzbGlkZXIuZm9jdXMoKVwiPkZvY3VzPC9idXR0b24+XG4gICAgICogIDxrZW5kby1zbGlkZXIgI3NsaWRlcj48L2tlbmRvLXNsaWRlcj5cbiAgICAgKiBgXG4gICAgICogfSlcbiAgICAgKiBjbGFzcyBBcHBDb21wb25lbnQgeyB9XG4gICAgICogYGBgXG4gICAgICovXG4gICAgZm9jdXMoKSB7XG4gICAgICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5mb2N1c0NoYW5nZWRQcm9ncmFtbWF0aWNhbGx5ID0gdHJ1ZTtcbiAgICAgICAgICAgIGludm9rZUVsZW1lbnRNZXRob2QodGhpcy5kcmFnaGFuZGxlLCAnZm9jdXMnKTtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNDaGFuZ2VkUHJvZ3JhbW1hdGljYWxseSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJsdXJzIHRoZSBTbGlkZXIuXG4gICAgICovXG4gICAgYmx1cigpIHtcbiAgICAgICAgdGhpcy5mb2N1c0NoYW5nZWRQcm9ncmFtbWF0aWNhbGx5ID0gdHJ1ZTtcbiAgICAgICAgaW52b2tlRWxlbWVudE1ldGhvZCh0aGlzLmRyYWdoYW5kbGUsICdibHVyJyk7XG4gICAgICAgIHRoaXMuaGFuZGxlQmx1cigpO1xuICAgICAgICB0aGlzLmZvY3VzQ2hhbmdlZFByb2dyYW1tYXRpY2FsbHkgPSBmYWxzZTtcbiAgICB9XG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlcykge1xuICAgICAgICBpZiAoYW55Q2hhbmdlZChbJ3ZhbHVlJywgJ2ZpeGVkVGlja1dpZHRoJywgJ3RpY2tQbGFjZW1lbnQnXSwgY2hhbmdlcywgdHJ1ZSkpIHtcbiAgICAgICAgICAgIHRoaXMubmdab25lLm9uU3RhYmxlLmFzT2JzZXJ2YWJsZSgpLnBpcGUodGFrZSgxKSkuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNpemVDb21wb25lbnQoZmFsc2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgICAgICBpZiAoIWlzRG9jdW1lbnRBdmFpbGFibGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnNob3dCdXR0b25zKSB7XG4gICAgICAgICAgICB0aGlzLnNldFZhbHVlQ2hhbmdlSW50ZXJ2YWwodGhpcy5pbmNyZWFzZUJ1dHRvbi5uYXRpdmVFbGVtZW50LCAoKSA9PiB0aGlzLmluY3JlYXNlVmFsdWUoKSk7XG4gICAgICAgICAgICB0aGlzLnNldFZhbHVlQ2hhbmdlSW50ZXJ2YWwodGhpcy5kZWNyZWFzZUJ1dHRvbi5uYXRpdmVFbGVtZW50LCAoKSA9PiB0aGlzLmRlY3JlYXNlVmFsdWUoKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zaXplQ29tcG9uZW50KGZhbHNlKTtcbiAgICAgICAgaWYgKHRoaXMudGlja3MpIHtcbiAgICAgICAgICAgIHRoaXMudGlja3MudGlja0VsZW1lbnRzXG4gICAgICAgICAgICAgICAgLmNoYW5nZXNcbiAgICAgICAgICAgICAgICAuc3Vic2NyaWJlKCgpID0+IHRoaXMuc2l6ZUNvbXBvbmVudChmYWxzZSkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYXR0YWNoRWxlbWVudEV2ZW50SGFuZGxlcnMoKTtcbiAgICB9XG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIGlmICh0aGlzLnN1YnNjcmlwdGlvbnMpIHtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBnZXQgaW5jcmVtZW50TWVzc2FnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5jcmVtZW50VGl0bGUgfHwgdGhpcy5sb2NhbGl6YXRpb25TZXJ2aWNlLmdldCgnaW5jcmVtZW50Jyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBnZXQgZGVjcmVtZW50TWVzc2FnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVjcmVtZW50VGl0bGUgfHwgdGhpcy5sb2NhbGl6YXRpb25TZXJ2aWNlLmdldCgnZGVjcmVtZW50Jyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBnZXQgZHJhZ0hhbmRsZU1lc3NhZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRyYWdIYW5kbGVUaXRsZSB8fCB0aGlzLmxvY2FsaXphdGlvblNlcnZpY2UuZ2V0KCdkcmFnSGFuZGxlJyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBoYW5kbGVEcmFnUHJlc3MoYXJncykge1xuICAgICAgICBpZiAoYXJncy5vcmlnaW5hbEV2ZW50KSB7XG4gICAgICAgICAgICBhcmdzLm9yaWdpbmFsRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUNsYXNzKHRoaXMuaG9zdEVsZW1lbnQubmF0aXZlRWxlbWVudCwgJ2stc2xpZGVyLXRyYW5zaXRpb25zJyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBvbkhhbmRsZURyYWcoYXJncykge1xuICAgICAgICB0aGlzLmRyYWdnaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jaGFuZ2VWYWx1ZShldmVudFZhbHVlKGFyZ3MsIHRoaXMudHJhY2submF0aXZlRWxlbWVudCwgdGhpcy5nZXRQcm9wcygpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBvbkhhbmRsZVJlbGVhc2UoKSB7XG4gICAgICAgIHRoaXMuZHJhZ2dpbmcgPSBmYWxzZTsgLy9uZWVkZWQgZm9yIGFuaW1hdGlvblxuICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuaG9zdEVsZW1lbnQubmF0aXZlRWxlbWVudCwgJ2stc2xpZGVyLXRyYW5zaXRpb25zJyk7XG4gICAgfVxuICAgIC8vbmdNb2RlbCBiaW5kaW5nXG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHdyaXRlVmFsdWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3Rvci5tYXJrRm9yQ2hlY2soKTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLnNpemVDb21wb25lbnQodGhpcy5hbmltYXRlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHJlZ2lzdGVyT25DaGFuZ2UoZm4pIHtcbiAgICAgICAgdGhpcy5uZ0NoYW5nZSA9IGZuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgcmVnaXN0ZXJPblRvdWNoZWQoZm4pIHtcbiAgICAgICAgdGhpcy5uZ1RvdWNoZWQgPSBmbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGNoYW5nZVZhbHVlKHZhbHVlKSB7XG4gICAgICAgIGlmICghYXJlU2FtZSh0aGlzLnZhbHVlLCB2YWx1ZSkpIHtcbiAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIHRoaXMubmdDaGFuZ2UodmFsdWUpO1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWVDaGFuZ2UuZW1pdCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zaXplQ29tcG9uZW50KHRoaXMuYW5pbWF0ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3Rvci5tYXJrRm9yQ2hlY2soKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzaXplQ29tcG9uZW50KGFuaW1hdGUpIHtcbiAgICAgICAgaWYgKCFpc0RvY3VtZW50QXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB3cmFwcGVyID0gdGhpcy53cmFwcGVyLm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IHRyYWNrID0gdGhpcy50cmFjay5uYXRpdmVFbGVtZW50O1xuICAgICAgICBjb25zdCBzZWxlY3Rpb25FbCA9IHRoaXMuc2xpZGVyU2VsZWN0aW9uLm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IGRyYWdIYW5kbGVFbCA9IHRoaXMuZHJhZ2hhbmRsZS5uYXRpdmVFbGVtZW50O1xuICAgICAgICBjb25zdCB0aWNrcyA9IHRoaXMudGlja3MgPyB0aGlzLnRpY2tzQ29udGFpbmVyLm5hdGl2ZUVsZW1lbnQgOiBudWxsO1xuICAgICAgICBpZiAoIWFuaW1hdGUpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3ModGhpcy5ob3N0RWxlbWVudC5uYXRpdmVFbGVtZW50LCAnay1zbGlkZXItdHJhbnNpdGlvbnMnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlc2V0U3R5bGVzKFt0cmFjaywgc2VsZWN0aW9uRWwsIGRyYWdIYW5kbGVFbCwgdGlja3MsIHRoaXMuaG9zdEVsZW1lbnQubmF0aXZlRWxlbWVudF0pO1xuICAgICAgICBjb25zdCBwcm9wcyA9IHRoaXMuZ2V0UHJvcHMoKTtcbiAgICAgICAgY29uc3QgbW9kZWwgPSBuZXcgU2xpZGVyTW9kZWwocHJvcHMsIHdyYXBwZXIsIHRyYWNrLCB0aGlzLnJlbmRlcmVyKTtcbiAgICAgICAgbW9kZWwucmVzaXplVHJhY2soKTtcbiAgICAgICAgaWYgKHRoaXMudGlja3MpIHsgLy9mb3IgY2FzZSB3aGVuIHRpY2tQbGFjZW1lbnQ6IG5vbmVcbiAgICAgICAgICAgIG1vZGVsLnJlc2l6ZVRpY2tzKHRoaXMudGlja3NDb250YWluZXIubmF0aXZlRWxlbWVudCwgdGhpcy50aWNrcy50aWNrRWxlbWVudHMubWFwKGVsZW1lbnQgPT4gZWxlbWVudC5uYXRpdmVFbGVtZW50KSk7XG4gICAgICAgIH1cbiAgICAgICAgbW9kZWwucG9zaXRpb25IYW5kbGUoZHJhZ0hhbmRsZUVsKTtcbiAgICAgICAgbW9kZWwucG9zaXRpb25TZWxlY3Rpb24oZHJhZ0hhbmRsZUVsLCBzZWxlY3Rpb25FbCk7XG4gICAgICAgIGlmICghYW5pbWF0ZSkge1xuICAgICAgICAgICAgdGhpcy5ob3N0RWxlbWVudC5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyh0aGlzLmhvc3RFbGVtZW50Lm5hdGl2ZUVsZW1lbnQsICdrLXNsaWRlci10cmFuc2l0aW9ucycpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmZpeGVkVGlja1dpZHRoKSB7XG4gICAgICAgICAgICBtb2RlbC5yZXNpemVXcmFwcGVyKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0IGZvY3VzZWQodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNGb2N1c2VkICE9PSB2YWx1ZSAmJiB0aGlzLmhvc3RFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmlzRm9jdXNlZCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNldCBkcmFnZ2luZyh2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5pc0RyYWdnZWQgIT09IHZhbHVlICYmIHRoaXMuc2xpZGVyU2VsZWN0aW9uICYmIHRoaXMuZHJhZ2hhbmRsZSkge1xuICAgICAgICAgICAgY29uc3Qgc2xpZGVyU2VsZWN0aW9uID0gdGhpcy5zbGlkZXJTZWxlY3Rpb24ubmF0aXZlRWxlbWVudDtcbiAgICAgICAgICAgIGNvbnN0IGRyYWdoYW5kbGUgPSB0aGlzLmRyYWdoYW5kbGUubmF0aXZlRWxlbWVudDtcbiAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3Moc2xpZGVyU2VsZWN0aW9uLCBQUkVTU0VEKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKGRyYWdoYW5kbGUsIFBSRVNTRUQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5yZW1vdmVDbGFzcyhzbGlkZXJTZWxlY3Rpb24sIFBSRVNTRUQpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3MoZHJhZ2hhbmRsZSwgUFJFU1NFRCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzRHJhZ2dlZCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNldFZhbHVlQ2hhbmdlSW50ZXJ2YWwoZWxlbWVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbW91c2Vkb3duID0gZnJvbUV2ZW50KGVsZW1lbnQsICdtb3VzZWRvd24nKTtcbiAgICAgICAgICAgIGNvbnN0IG1vdXNldXAgPSBmcm9tRXZlbnQoZWxlbWVudCwgJ21vdXNldXAnKTtcbiAgICAgICAgICAgIGNvbnN0IG1vdXNlb3V0ID0gZnJvbUV2ZW50KGVsZW1lbnQsICdtb3VzZW91dCcpO1xuICAgICAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gbW91c2Vkb3duLnBpcGUoZmlsdGVyKChlKSA9PiBlLmJ1dHRvbiA9PT0gMCAmJiAhdGhpcy5pc0Rpc2FibGVkKSwgY29uY2F0TWFwKCgpID0+IGludGVydmFsKDE1MCkucGlwZShzdGFydFdpdGgoLTEpLCB0YWtlVW50aWwobWVyZ2UobW91c2V1cCwgbW91c2VvdXQpKSkpKS5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc0ZvY3VzZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaW52b2tlRWxlbWVudE1ldGhvZCh0aGlzLmRyYWdoYW5kbGUsICdmb2N1cycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuYWRkKHN1YnNjcmlwdGlvbik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXRQcm9wcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJ1dHRvbnM6IHRoaXMuc2hvd0J1dHRvbnMsXG4gICAgICAgICAgICBkaXNhYmxlZDogdGhpcy5kaXNhYmxlZCxcbiAgICAgICAgICAgIGZpeGVkVGlja1dpZHRoOiB0aGlzLmZpeGVkVGlja1dpZHRoLFxuICAgICAgICAgICAgbGFyZ2VTdGVwOiB0aGlzLmxhcmdlU3RlcCxcbiAgICAgICAgICAgIG1heDogdGhpcy5tYXgsXG4gICAgICAgICAgICBtaW46IHRoaXMubWluLFxuICAgICAgICAgICAgcmVhZG9ubHk6IHRoaXMucmVhZG9ubHksXG4gICAgICAgICAgICByZXZlcnNlOiB0aGlzLnJldmVyc2UsXG4gICAgICAgICAgICBydGw6IHRoaXMubG9jYWxpemF0aW9uU2VydmljZS5ydGwsXG4gICAgICAgICAgICBzbWFsbFN0ZXA6IHRoaXMuc21hbGxTdGVwLFxuICAgICAgICAgICAgdmFsdWU6IHRyaW1WYWx1ZSh0aGlzLm1heCwgdGhpcy5taW4sIHRoaXMudmFsdWUpLFxuICAgICAgICAgICAgdmVydGljYWw6IHRoaXMudmVydGljYWxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXR0YWNoRWxlbWVudEV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICAgIGNvbnN0IGhvc3RFbGVtZW50ID0gdGhpcy5ob3N0RWxlbWVudC5uYXRpdmVFbGVtZW50O1xuICAgICAgICBsZXQgdGFiYmluZyA9IGZhbHNlO1xuICAgICAgICBsZXQgY3Vyc29ySW5zaWRlV3JhcHBlciA9IGZhbHNlO1xuICAgICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAgICAgICAvLyBmb2N1c0luIGFuZCBmb2N1c091dCBhcmUgcmVsYXRpdmUgdG8gdGhlIGhvc3QgZWxlbWVudFxuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmFkZCh0aGlzLnJlbmRlcmVyLmxpc3Rlbihob3N0RWxlbWVudCwgJ2ZvY3VzaW4nLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzRm9jdXNlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmZvY3VzQ2hhbmdlZFByb2dyYW1tYXRpY2FsbHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRm9jdXMuZW1pdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2N1c2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmFkZCh0aGlzLnJlbmRlcmVyLmxpc3Rlbihob3N0RWxlbWVudCwgJ2ZvY3Vzb3V0JywgKGFyZ3MpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNGb2N1c2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRhYmJpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3MucmVsYXRlZFRhcmdldCAhPT0gdGhpcy5kcmFnaGFuZGxlLm5hdGl2ZUVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQmx1cigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRhYmJpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY3Vyc29ySW5zaWRlV3JhcHBlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVCbHVyKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuYWRkKHRoaXMucmVuZGVyZXIubGlzdGVuKGhvc3RFbGVtZW50LCAnbW91c2VlbnRlcicsICgpID0+IHtcbiAgICAgICAgICAgICAgICBjdXJzb3JJbnNpZGVXcmFwcGVyID0gdHJ1ZTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5hZGQodGhpcy5yZW5kZXJlci5saXN0ZW4oaG9zdEVsZW1lbnQsICdtb3VzZWxlYXZlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGN1cnNvckluc2lkZVdyYXBwZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5hZGQodGhpcy5yZW5kZXJlci5saXN0ZW4oaG9zdEVsZW1lbnQsICdrZXlkb3duJywgKGFyZ3MpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5rZXlDb2RlID09PSBLZXlzLlRhYikge1xuICAgICAgICAgICAgICAgICAgICB0YWJiaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRhYmJpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn07XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBTbGlkZXJDb21wb25lbnQucHJvdG90eXBlLCBcImZvY3VzYWJsZUlkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBTbGlkZXJDb21wb25lbnQucHJvdG90eXBlLCBcImRyYWdIYW5kbGVUaXRsZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgU2xpZGVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpbmNyZW1lbnRUaXRsZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIFNsaWRlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiYW5pbWF0ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgU2xpZGVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkZWNyZW1lbnRUaXRsZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIFNsaWRlckNvbXBvbmVudC5wcm90b3R5cGUsIFwic2hvd0J1dHRvbnNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlcilcbl0sIFNsaWRlckNvbXBvbmVudC5wcm90b3R5cGUsIFwidmFsdWVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlciksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtOdW1iZXJdKVxuXSwgU2xpZGVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0YWJJbmRleFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIFZpZXdDaGlsZCgnZHJhZ2hhbmRsZScsIHsgc3RhdGljOiB0cnVlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFbGVtZW50UmVmKVxuXSwgU2xpZGVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkcmFnaGFuZGxlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBWaWV3Q2hpbGQoJ2RlY3JlYXNlQnV0dG9uJywgeyBzdGF0aWM6IGZhbHNlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFbGVtZW50UmVmKVxuXSwgU2xpZGVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkZWNyZWFzZUJ1dHRvblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgVmlld0NoaWxkKCdpbmNyZWFzZUJ1dHRvbicsIHsgc3RhdGljOiBmYWxzZSB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRWxlbWVudFJlZilcbl0sIFNsaWRlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiaW5jcmVhc2VCdXR0b25cIiwgdm9pZCAwKTtcblNsaWRlckNvbXBvbmVudCA9IFNsaWRlckNvbXBvbmVudF8xID0gX19kZWNvcmF0ZShbXG4gICAgQ29tcG9uZW50KHtcbiAgICAgICAgZXhwb3J0QXM6ICdrZW5kb1NsaWRlcicsXG4gICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgTG9jYWxpemF0aW9uU2VydmljZSxcbiAgICAgICAgICAgIHsgcHJvdmlkZTogTDEwTl9QUkVGSVgsIHVzZVZhbHVlOiAna2VuZG8uc2xpZGVyJyB9LFxuICAgICAgICAgICAgeyBtdWx0aTogdHJ1ZSwgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IFNsaWRlckNvbXBvbmVudF8xKSB9LFxuICAgICAgICAgICAgeyBwcm92aWRlOiBLZW5kb0lucHV0LCB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBTbGlkZXJDb21wb25lbnRfMSkgfVxuICAgICAgICBdLFxuICAgICAgICBzZWxlY3RvcjogJ2tlbmRvLXNsaWRlcicsXG4gICAgICAgIHRlbXBsYXRlOiBgXG4gICAgICAgIDxuZy1jb250YWluZXIga2VuZG9TbGlkZXJMb2NhbGl6ZWRNZXNzYWdlc1xuICAgICAgICAgICAgaTE4bi1pbmNyZW1lbnQ9XCJrZW5kby5zbGlkZXIuaW5jcmVtZW50fFRoZSB0aXRsZSBvZiB0aGUgKipJbmNyZWFzZSoqIGJ1dHRvbiBvZiB0aGUgU2xpZGVyLlwiXG4gICAgICAgICAgICBpbmNyZW1lbnQ9XCJpbmNyZW1lbnRcIlxuICAgICAgICAgICAgaTE4bi1kZWNyZW1lbnQ9XCJrZW5kby5zbGlkZXIuZGVjcmVtZW50fFRoZSB0aXRsZSBvZiB0aGUgKipEZWNyZWFzZSoqIGJ1dHRvbiBvZiB0aGUgU2xpZGVyLlwiXG4gICAgICAgICAgICBkZWNyZW1lbnQ9XCJkZWNyZW1lbnRcIlxuICAgICAgICAgICAgaTE4bi1kcmFnSGFuZGxlPVwia2VuZG8uc2xpZGVyLmRyYWdIYW5kbGV8VGhlIHRpdGxlIG9mIHRoZSBkcmFnIGhhbmRsZSBvZiB0aGUgU2xpZGVyLlwiXG4gICAgICAgICAgICBkcmFnSGFuZGxlPVwiRHJhZ1wiXG4gICAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzcz1cImstc2xpZGVyLXdyYXBcIiAjd3JhcFxuICAgICAgICAgICAgW2NsYXNzLmstc2xpZGVyLWJ1dHRvbnNdPVwic2hvd0J1dHRvbnNcIlxuICAgICAgICAgICAgW2NsYXNzLmstc2xpZGVyLXRvcGxlZnRdPVwidGlja1BsYWNlbWVudCA9PT0gJ2JlZm9yZSdcIlxuICAgICAgICAgICAgW2NsYXNzLmstc2xpZGVyLWJvdHRvbXJpZ2h0XT1cInRpY2tQbGFjZW1lbnQgPT09ICdhZnRlcidcIlxuICAgICAgICAgICAgW2tlbmRvRXZlbnRzT3V0c2lkZUFuZ3VsYXJdPVwieyBjbGljazogb25XcmFwQ2xpY2ssIGtleWRvd246IG9uS2V5RG93biB9XCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgI2RlY3JlYXNlQnV0dG9uXG4gICAgICAgICAgICAgICAgKm5nSWY9XCJzaG93QnV0dG9uc1wiXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJrLWJ1dHRvbiBrLWJ1dHRvbi1kZWNyZWFzZVwiXG4gICAgICAgICAgICAgICAgW3RpdGxlXT1cImRlY3JlbWVudE1lc3NhZ2VcIlxuICAgICAgICAgICAgICAgIHJvbGU9XCJwcmVzZW50YXRpb25cIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiay1pY29uXCJcbiAgICAgICAgICAgICAgICAgICAgW2NsYXNzLmstaS1hcnJvdy13XT1cIiF2ZXJ0aWNhbFwiXG4gICAgICAgICAgICAgICAgICAgIFtjbGFzcy5rLWktYXJyb3ctc109XCJ2ZXJ0aWNhbFwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgKm5nSWY9XCJzaG93QnV0dG9uc1wiXG4gICAgICAgICAgICAgICAgI2luY3JlYXNlQnV0dG9uXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJrLWJ1dHRvbiBrLWJ1dHRvbi1pbmNyZWFzZVwiXG4gICAgICAgICAgICAgICAgW3RpdGxlXT1cImluY3JlbWVudE1lc3NhZ2VcIlxuICAgICAgICAgICAgICAgIChjbGljayk9XCIkZXZlbnQucHJldmVudERlZmF1bHQoKVwiXG4gICAgICAgICAgICAgICAgW2F0dHIuYXJpYS1sYWJlbF09XCJjdXJyZW50VmFsdWVcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiay1pY29uXCJcbiAgICAgICAgICAgICAgICAgICAgW2NsYXNzLmstaS1hcnJvdy1lXT1cIiF2ZXJ0aWNhbFwiXG4gICAgICAgICAgICAgICAgICAgIFtjbGFzcy5rLWktYXJyb3ctbl09XCJ2ZXJ0aWNhbFwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDx1bCBrZW5kb1NsaWRlclRpY2tzXG4gICAgICAgICAgICAgICAgI3RpY2tzXG4gICAgICAgICAgICAgICAgKm5nSWY9XCJ0aWNrUGxhY2VtZW50ICE9PSAnbm9uZSdcIlxuICAgICAgICAgICAgICAgIFt0aWNrVGl0bGVdPVwidGl0bGVcIlxuICAgICAgICAgICAgICAgIFt2ZXJ0aWNhbF09XCJ2ZXJ0aWNhbFwiXG4gICAgICAgICAgICAgICAgW3N0ZXBdPVwic21hbGxTdGVwXCJcbiAgICAgICAgICAgICAgICBbbGFyZ2VTdGVwXT1cImxhcmdlU3RlcFwiXG4gICAgICAgICAgICAgICAgW21pbl09XCJtaW5cIlxuICAgICAgICAgICAgICAgIFttYXhdPVwibWF4XCJcbiAgICAgICAgICAgICAgICBbbGFiZWxUZW1wbGF0ZV09XCJsYWJlbFRlbXBsYXRlPy50ZW1wbGF0ZVJlZlwiXG4gICAgICAgICAgICAgICAgW2F0dHIuYXJpYS1oaWRkZW5dPVwidHJ1ZVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgPGRpdiAjdHJhY2sgY2xhc3M9XCJrLXNsaWRlci10cmFja1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgI3NsaWRlclNlbGVjdGlvbiBjbGFzcz1cImstc2xpZGVyLXNlbGVjdGlvblwiPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxhICNkcmFnaGFuZGxlXG4gICAgICAgICAgICAgICAgICAgIHJvbGU9XCJzbGlkZXJcIlxuICAgICAgICAgICAgICAgICAgICBbYXR0ci5hcmlhLXZhbHVlbWluXT1cIm1pblwiXG4gICAgICAgICAgICAgICAgICAgIFthdHRyLmFyaWEtdmFsdWVtYXhdPVwibWF4XCJcbiAgICAgICAgICAgICAgICAgICAgW2F0dHIuYXJpYS12YWx1ZW5vd109XCJjdXJyZW50VmFsdWVcIlxuICAgICAgICAgICAgICAgICAgICBbYXR0ci5hcmlhLXZhbHVldGV4dF09XCJjdXJyZW50VmFsdWVcIlxuICAgICAgICAgICAgICAgICAgICBbYXR0ci5hcmlhLWRpc2FibGVkXT1cImRpc2FibGVkID8gdHJ1ZSA6IHVuZGVmaW5lZFwiXG4gICAgICAgICAgICAgICAgICAgIFthdHRyLmFyaWEtcmVhZG9ubHldPVwicmVhZG9ubHkgPyB0cnVlIDogdW5kZWZpbmVkXCJcbiAgICAgICAgICAgICAgICAgICAgW2F0dHIuYXJpYS1vcmllbnRhdGlvbl09XCJ2ZXJ0aWNhbCA/ICd2ZXJ0aWNhbCcgOiAnaG9yaXpvbnRhbCdcIlxuICAgICAgICAgICAgICAgICAgICBbc3R5bGUudG91Y2gtYWN0aW9uXT1cImlzRGlzYWJsZWQgPyAnJyA6ICdub25lJ1wiXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiay1kcmFnaGFuZGxlXCJcbiAgICAgICAgICAgICAgICAgICAgW3RpdGxlXT1cImRyYWdIYW5kbGVNZXNzYWdlXCJcbiAgICAgICAgICAgICAgICAgICAgW2F0dHIudGFiaW5kZXhdPVwiZGlzYWJsZWQgPyAnLTEnIDogdGFiSW5kZXhcIlxuICAgICAgICAgICAgICAgICAgICBbaWRdPVwiZm9jdXNhYmxlSWRcIlxuICAgICAgICAgICAgICAgICAgICBrZW5kb0RyYWdnYWJsZVxuICAgICAgICAgICAgICAgICAgICAoa2VuZG9QcmVzcyk9XCJpZkVuYWJsZWQoaGFuZGxlRHJhZ1ByZXNzLCAkZXZlbnQpXCJcbiAgICAgICAgICAgICAgICAgICAgKGtlbmRvRHJhZyk9XCJpZkVuYWJsZWQob25IYW5kbGVEcmFnLCAkZXZlbnQpXCJcbiAgICAgICAgICAgICAgICAgICAgKGtlbmRvUmVsZWFzZSk9XCJpZkVuYWJsZWQob25IYW5kbGVSZWxlYXNlLCAkZXZlbnQpXCJcbiAgICAgICAgICAgICAgICA+PC9hPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8a2VuZG8tcmVzaXplLXNlbnNvciAocmVzaXplKT1cInNpemVDb21wb25lbnQoZmFsc2UpXCI+PC9rZW5kby1yZXNpemUtc2Vuc29yPlxuICAgICAgICA8L2Rpdj5cbiAgYFxuICAgIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTG9jYWxpemF0aW9uU2VydmljZSxcbiAgICAgICAgSW5qZWN0b3IsXG4gICAgICAgIFJlbmRlcmVyMixcbiAgICAgICAgTmdab25lLFxuICAgICAgICBDaGFuZ2VEZXRlY3RvclJlZixcbiAgICAgICAgRWxlbWVudFJlZl0pXG5dLCBTbGlkZXJDb21wb25lbnQpO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY2xhc3MgUmFuZ2VTbGlkZXJNb2RlbCBleHRlbmRzIFNsaWRlck1vZGVsQmFzZSB7XG4gICAgcG9zaXRpb25IYW5kbGUoZHJhZ0hhbmRsZSkge1xuICAgICAgICBpZiAoIWRyYWdIYW5kbGUuaWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IG1heCwgbWluLCByZXZlcnNlLCB2ZXJ0aWNhbCB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSB2ZXJ0aWNhbCA/ICdib3R0b20nIDogJ2xlZnQnO1xuICAgICAgICBjb25zdCB0cmFja1dpZHRoID0gdGhpcy50cmFja1dpZHRoKCk7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gaXNTdGFydEhhbmRsZShkcmFnSGFuZGxlKSA/IHRyaW1WYWx1ZVJhbmdlKG1heCwgbWluLCB0aGlzLnByb3BzLnZhbHVlKVswXVxuICAgICAgICAgICAgOiB0cmltVmFsdWVSYW5nZShtYXgsIG1pbiwgdGhpcy5wcm9wcy52YWx1ZSlbMV07XG4gICAgICAgIGlmIChpc1N0YXJ0SGFuZGxlKGRyYWdIYW5kbGUpKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0SGFuZGxlUG9zaXRpb24gPSBjYWxjdWxhdGVIYW5kbGVQb3NpdGlvbih7XG4gICAgICAgICAgICAgICAgbWluLFxuICAgICAgICAgICAgICAgIG1heCxcbiAgICAgICAgICAgICAgICByZXZlcnNlLFxuICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgICAgIHRyYWNrV2lkdGgsXG4gICAgICAgICAgICAgICAgaGFuZGxlV2lkdGg6IGRyYWdIYW5kbGUub2Zmc2V0V2lkdGhcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShkcmFnSGFuZGxlLCBwb3NpdGlvbiwgYCR7dGhpcy5zdGFydEhhbmRsZVBvc2l0aW9ufXB4YCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmVuZEhhbmRsZVBvc2l0aW9uID0gY2FsY3VsYXRlSGFuZGxlUG9zaXRpb24oe1xuICAgICAgICAgICAgICAgIG1pbixcbiAgICAgICAgICAgICAgICBtYXgsXG4gICAgICAgICAgICAgICAgcmV2ZXJzZSxcbiAgICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgICAgICB0cmFja1dpZHRoLFxuICAgICAgICAgICAgICAgIGhhbmRsZVdpZHRoOiBkcmFnSGFuZGxlLm9mZnNldFdpZHRoXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoZHJhZ0hhbmRsZSwgcG9zaXRpb24sIGAke3RoaXMuZW5kSGFuZGxlUG9zaXRpb259cHhgKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwb3NpdGlvblNlbGVjdGlvbihkcmFnSGFuZGxlLCBzZWxlY3Rpb24pIHtcbiAgICAgICAgY29uc3QgeyByZXZlcnNlLCB2ZXJ0aWNhbCB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgY29uc3QgZGltZW5zaW9uID0gdmVydGljYWwgPyAnaGVpZ2h0JyA6ICd3aWR0aCc7XG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0gdmVydGljYWwgPyAnYm90dG9tJyA6IHJldmVyc2UgPyAncmlnaHQnIDogJ2xlZnQnO1xuICAgICAgICBjb25zdCBoYW5kbGVXaWR0aCA9IE1hdGguZmxvb3IoZHJhZ0hhbmRsZS5vZmZzZXRXaWR0aCAvIDIpO1xuICAgICAgICBjb25zdCBzaXplID0gTWF0aC5hYnModGhpcy5lbmRIYW5kbGVQb3NpdGlvbiAtIHRoaXMuc3RhcnRIYW5kbGVQb3NpdGlvbik7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRTZWxlY3Rpb25Qb3NpdGlvbiA9IHZlcnRpY2FsID8gZHJhZ0hhbmRsZS5zdHlsZS5ib3R0b20gOiBkcmFnSGFuZGxlLnN0eWxlLmxlZnQ7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoc2VsZWN0aW9uLCBkaW1lbnNpb24sIGAke3NpemV9cHhgKTtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShzZWxlY3Rpb24sIHBvc2l0aW9uLCByZXZlcnNlID8gdGhpcy50cmFja1dpZHRoKCkgLSBwYXJzZUZsb2F0KGN1cnJlbnRTZWxlY3Rpb25Qb3NpdGlvbikgLSBoYW5kbGVXaWR0aCArICdweCdcbiAgICAgICAgICAgIDogcGFyc2VGbG9hdChjdXJyZW50U2VsZWN0aW9uUG9zaXRpb24pICsgaGFuZGxlV2lkdGggKyAncHgnKTtcbiAgICB9XG59XG5cbnZhciBSYW5nZVNsaWRlckNvbXBvbmVudF8xO1xuY29uc3QgUFJFU1NFRCQxID0gJ2stcHJlc3NlZCc7XG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIFtLZW5kbyBVSSBSYW5nZVNsaWRlciBjb21wb25lbnQgZm9yIEFuZ3VsYXJdKHslIHNsdWcgb3ZlcnZpZXdfcmFuZ2VzbGlkZXIgJX0pLlxuICovXG5sZXQgUmFuZ2VTbGlkZXJDb21wb25lbnQgPSBSYW5nZVNsaWRlckNvbXBvbmVudF8xID0gY2xhc3MgUmFuZ2VTbGlkZXJDb21wb25lbnQgZXh0ZW5kcyBTbGlkZXJCYXNlIHtcbiAgICBjb25zdHJ1Y3Rvcihsb2NhbGl6YXRpb24sIGluamVjdG9yLCByZW5kZXJlciwgbmdab25lLCBjaGFuZ2VEZXRlY3RvciwgaG9zdEVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIobG9jYWxpemF0aW9uLCBpbmplY3RvciwgcmVuZGVyZXIsIG5nWm9uZSwgY2hhbmdlRGV0ZWN0b3IsIGhvc3RFbGVtZW50KTtcbiAgICAgICAgdGhpcy5sb2NhbGl6YXRpb24gPSBsb2NhbGl6YXRpb247XG4gICAgICAgIHRoaXMuaW5qZWN0b3IgPSBpbmplY3RvcjtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLm5nWm9uZSA9IG5nWm9uZTtcbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3RvciA9IGNoYW5nZURldGVjdG9yO1xuICAgICAgICB0aGlzLmhvc3RFbGVtZW50ID0gaG9zdEVsZW1lbnQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnN0YXJ0SGFuZGxlSWQgPSBgay1zdGFydC1oYW5kbGUtJHtndWlkKCl9YDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBoaWRkZW5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZW5kSGFuZGxlSWQgPSBgay1lbmQtaGFuZGxlLSR7Z3VpZCgpfWA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZvY3VzYWJsZUlkID0gdGhpcy5zdGFydEhhbmRsZUlkO1xuICAgICAgICB0aGlzLmhhbmRsZVpJbmRleCA9IDA7XG4gICAgICAgIHRoaXMuYWN0aXZlSGFuZGxlID0gJ3N0YXJ0SGFuZGxlJztcbiAgICAgICAgdGhpcy5mb2N1c0NoYW5nZWRQcm9ncmFtbWF0aWNhbGx5ID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uV3JhcENsaWNrID0gKGFyZ3MpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0Rpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWUgfHwgW3RoaXMubWluLCB0aGlzLm1pbl07XG4gICAgICAgICAgICAgICAgY29uc3QgdHJhY2tWYWx1ZSA9IGV2ZW50VmFsdWUoYXJncywgdGhpcy50cmFjay5uYXRpdmVFbGVtZW50LCB0aGlzLmdldFByb3BzKCkpO1xuICAgICAgICAgICAgICAgIGxldCBuZXdSYW5nZVZhbHVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IFtzdGFydFZhbHVlLCBlbmRWYWx1ZV0gPSBuZXdSYW5nZVZhbHVlID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodHJhY2tWYWx1ZSA8PSBzdGFydFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1JhbmdlVmFsdWUgPSBbdHJhY2tWYWx1ZSwgZW5kVmFsdWVdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUhhbmRsZSA9ICdzdGFydEhhbmRsZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHN0YXJ0VmFsdWUgPCB0cmFja1ZhbHVlICYmIHRyYWNrVmFsdWUgPCBlbmRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHJhY2tWYWx1ZSA8IChzdGFydFZhbHVlICsgZW5kVmFsdWUpIC8gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3UmFuZ2VWYWx1ZSA9IFt0cmFja1ZhbHVlLCBlbmRWYWx1ZV07XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUhhbmRsZSA9ICdzdGFydEhhbmRsZSc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdSYW5nZVZhbHVlID0gW3N0YXJ0VmFsdWUsIHRyYWNrVmFsdWVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVIYW5kbGUgPSAnZW5kSGFuZGxlJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0cmFja1ZhbHVlID49IGVuZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1JhbmdlVmFsdWUgPSBbc3RhcnRWYWx1ZSwgdHJhY2tWYWx1ZV07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlSGFuZGxlID0gJ2VuZEhhbmRsZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUhhbmRsZSA9IHRoaXMuYWN0aXZlSGFuZGxlID09PSAnc3RhcnRIYW5kbGUnID8gdGhpcy5kcmFnaGFuZGxlU3RhcnQgOiB0aGlzLmRyYWdoYW5kbGVFbmQ7XG4gICAgICAgICAgICAgICAgaW52b2tlRWxlbWVudE1ldGhvZChhY3RpdmVIYW5kbGUsICdmb2N1cycpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlVmFsdWUobmV3UmFuZ2VWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uS2V5RG93biA9IChlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZSB8fCBbdGhpcy5taW4sIHRoaXMubWluXTtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLmdldFByb3BzKCk7XG4gICAgICAgICAgICBjb25zdCB7IG1heCwgbWluIH0gPSBvcHRpb25zO1xuICAgICAgICAgICAgY29uc3QgaGFuZGxlciA9IHRoaXMua2V5QmluZGluZ1tlLmtleUNvZGVdO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNEaXNhYmxlZCB8fCAhaGFuZGxlcikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoZS50YXJnZXQsICd6SW5kZXgnLCArK3RoaXMuaGFuZGxlWkluZGV4KTtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0SGFuZGxlSXNBY3RpdmUgPSBpc1N0YXJ0SGFuZGxlKGUudGFyZ2V0KTtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gaGFuZGxlcihPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zLCB7IHZhbHVlOiBzdGFydEhhbmRsZUlzQWN0aXZlID8gdGhpcy52YWx1ZVswXSA6IHRoaXMudmFsdWVbMV0gfSkpO1xuICAgICAgICAgICAgaWYgKHN0YXJ0SGFuZGxlSXNBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPiB0aGlzLnZhbHVlWzFdKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWVbMV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPCB0aGlzLnZhbHVlWzBdKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWVbMF0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB0cmltbWVkVmFsdWUgPSB0cmltVmFsdWUobWF4LCBtaW4sIHZhbHVlKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gc3RhcnRIYW5kbGVJc0FjdGl2ZSA/IFt0cmltbWVkVmFsdWUsIHRoaXMudmFsdWVbMV1dXG4gICAgICAgICAgICAgICAgOiBbdGhpcy52YWx1ZVswXSwgdHJpbW1lZFZhbHVlXTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlVmFsdWUobmV3VmFsdWUpO1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm5nQ2hhbmdlID0gKF8pID0+IHsgfTtcbiAgICAgICAgdGhpcy5uZ1RvdWNoZWQgPSAoKSA9PiB7IH07XG4gICAgICAgIHRoaXMuaGFuZGxlQmx1ciA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3IubWFya0ZvckNoZWNrKCk7XG4gICAgICAgICAgICB0aGlzLmZvY3VzZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChoYXNPYnNlcnZlcnModGhpcy5vbkJsdXIpIHx8IHJlcXVpcmVzWm9uZU9uQmx1cih0aGlzLmNvbnRyb2wpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZ1RvdWNoZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmZvY3VzQ2hhbmdlZFByb2dyYW1tYXRpY2FsbHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25CbHVyLmVtaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb2N1c2VzIHRoZSBSYW5nZVNsaWRlci5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgdHMtbm8tcnVuXG4gICAgICogX0BDb21wb25lbnQoe1xuICAgICAqIHNlbGVjdG9yOiAnbXktYXBwJyxcbiAgICAgKiB0ZW1wbGF0ZTogYFxuICAgICAqICAgICA8ZGl2PlxuICAgICAqICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImstYnV0dG9uXCIgKGNsaWNrKT1cInNsaWRlci5mb2N1cygpXCI+Rm9jdXM8L2J1dHRvbj5cbiAgICAgKiAgICAgPC9kaXY+XG4gICAgICogICAgIDxrZW5kby1yYW5nZXNsaWRlciAjc2xpZGVyPjwva2VuZG8tcmFuZ2VzbGlkZXI+XG4gICAgICogYFxuICAgICAqIH0pXG4gICAgICogY2xhc3MgQXBwQ29tcG9uZW50IHsgfVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGZvY3VzKCkge1xuICAgICAgICB0aGlzLmZvY3VzQ2hhbmdlZFByb2dyYW1tYXRpY2FsbHkgPSB0cnVlO1xuICAgICAgICBpbnZva2VFbGVtZW50TWV0aG9kKHRoaXMuZHJhZ2hhbmRsZVN0YXJ0LCAnZm9jdXMnKTtcbiAgICAgICAgdGhpcy5mb2N1c0NoYW5nZWRQcm9ncmFtbWF0aWNhbGx5ID0gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJsdXJzIHRoZSBSYW5nZVNsaWRlci5cbiAgICAgKi9cbiAgICBibHVyKCkge1xuICAgICAgICB0aGlzLmZvY3VzQ2hhbmdlZFByb2dyYW1tYXRpY2FsbHkgPSB0cnVlO1xuICAgICAgICBjb25zdCBhY3RpdmVIYW5kbGUgPSB0aGlzLmFjdGl2ZUhhbmRsZSA9PT0gJ3N0YXJ0SGFuZGxlJyA/IHRoaXMuZHJhZ2hhbmRsZVN0YXJ0IDogdGhpcy5kcmFnaGFuZGxlRW5kO1xuICAgICAgICBpbnZva2VFbGVtZW50TWV0aG9kKGFjdGl2ZUhhbmRsZSwgJ2JsdXInKTtcbiAgICAgICAgdGhpcy5oYW5kbGVCbHVyKCk7XG4gICAgICAgIHRoaXMuZm9jdXNDaGFuZ2VkUHJvZ3JhbW1hdGljYWxseSA9IGZhbHNlO1xuICAgIH1cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gW3RoaXMubWluLCB0aGlzLm1heF07XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIubmdPbkluaXQoKTtcbiAgICB9XG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlcykge1xuICAgICAgICBpZiAoYW55Q2hhbmdlZChbJ3ZhbHVlJywgJ2ZpeGVkVGlja1dpZHRoJywgJ3RpY2tQbGFjZW1lbnQnXSwgY2hhbmdlcywgdHJ1ZSkpIHtcbiAgICAgICAgICAgIGlmIChjaGFuZ2VzLnZhbHVlICYmIGNoYW5nZXMudmFsdWUuY3VycmVudFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdmFsaWRhdGVWYWx1ZShjaGFuZ2VzLnZhbHVlLmN1cnJlbnRWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm5nWm9uZS5vblN0YWJsZS5hc09ic2VydmFibGUoKS5waXBlKHRha2UoMSkpLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaXplQ29tcG9uZW50KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgICAgIGlmICghaXNEb2N1bWVudEF2YWlsYWJsZSgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zaXplQ29tcG9uZW50KCk7XG4gICAgICAgIGlmICh0aGlzLnRpY2tzKSB7XG4gICAgICAgICAgICB0aGlzLnRpY2tzLnRpY2tFbGVtZW50c1xuICAgICAgICAgICAgICAgIC5jaGFuZ2VzXG4gICAgICAgICAgICAgICAgLnN1YnNjcmliZSgoKSA9PiB0aGlzLnNpemVDb21wb25lbnQoKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hdHRhY2hFbGVtZW50RXZlbnRIYW5kbGVycygpO1xuICAgIH1cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3Vic2NyaXB0aW9ucykge1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHRleHRGb3Ioa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsaXphdGlvbi5nZXQoa2V5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGdldCB2YWx1ZVRleHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlID8gYCR7dGhpcy52YWx1ZVswXX0gLSAke3RoaXMudmFsdWVbMV19YCA6ICcnO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgaGFuZGxlRHJhZ1ByZXNzKGFyZ3MpIHtcbiAgICAgICAgaWYgKGFyZ3Mub3JpZ2luYWxFdmVudCkge1xuICAgICAgICAgICAgYXJncy5vcmlnaW5hbEV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gYXJncy5vcmlnaW5hbEV2ZW50LnRhcmdldDtcbiAgICAgICAgdGhpcy5kcmFnZ2VkSGFuZGxlID0gdGFyZ2V0O1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRhcmdldCwgJ3pJbmRleCcsICsrdGhpcy5oYW5kbGVaSW5kZXgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgb25IYW5kbGVEcmFnKGFyZ3MpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWUgfHwgW3RoaXMubWluLCB0aGlzLm1pbl07XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGFyZ3Mub3JpZ2luYWxFdmVudC50YXJnZXQ7XG4gICAgICAgIGNvbnN0IGxhc3RDb29yZHMgPSB0aGlzLmRyYWdnZWRIYW5kbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHRoaXMubGFzdEhhbmRsZVBvc2l0aW9uID0geyB4OiBsYXN0Q29vcmRzLmxlZnQsIHk6IGxhc3RDb29yZHMudG9wIH07XG4gICAgICAgIHRoaXMuZHJhZ2dpbmcgPSB7IHZhbHVlOiB0cnVlLCB0YXJnZXQgfTtcbiAgICAgICAgY29uc3QgbGVmdCA9IGFyZ3MucGFnZVggPCB0aGlzLmxhc3RIYW5kbGVQb3NpdGlvbi54O1xuICAgICAgICBjb25zdCByaWdodCA9IGFyZ3MucGFnZVggPiB0aGlzLmxhc3RIYW5kbGVQb3NpdGlvbi54O1xuICAgICAgICBjb25zdCB1cCA9IGFyZ3MucGFnZVkgPiB0aGlzLmxhc3RIYW5kbGVQb3NpdGlvbi55O1xuICAgICAgICBjb25zdCBtb3ZlU3RhcnRIYW5kbGUgPSAoKSA9PiB0aGlzLmNoYW5nZVZhbHVlKFtldmVudFZhbHVlKGFyZ3MsIHRoaXMudHJhY2submF0aXZlRWxlbWVudCwgdGhpcy5nZXRQcm9wcygpKSwgdGhpcy52YWx1ZVsxXV0pO1xuICAgICAgICBjb25zdCBtb3ZlRW5kSGFuZGxlID0gKCkgPT4gdGhpcy5jaGFuZ2VWYWx1ZShbdGhpcy52YWx1ZVswXSwgZXZlbnRWYWx1ZShhcmdzLCB0aGlzLnRyYWNrLm5hdGl2ZUVsZW1lbnQsIHRoaXMuZ2V0UHJvcHMoKSldKTtcbiAgICAgICAgY29uc3QgbW92ZUJvdGhIYW5kbGVzID0gKCkgPT4gdGhpcy5jaGFuZ2VWYWx1ZShbZXZlbnRWYWx1ZShhcmdzLCB0aGlzLnRyYWNrLm5hdGl2ZUVsZW1lbnQsIHRoaXMuZ2V0UHJvcHMoKSksIGV2ZW50VmFsdWUoYXJncywgdGhpcy50cmFjay5uYXRpdmVFbGVtZW50LCB0aGlzLmdldFByb3BzKCkpXSk7XG4gICAgICAgIGNvbnN0IGFjdGl2ZVN0YXJ0SGFuZGxlID0gaXNTdGFydEhhbmRsZSh0aGlzLmRyYWdnZWRIYW5kbGUpO1xuICAgICAgICBjb25zdCB2ZXJ0aWNhbCA9IHRoaXMudmVydGljYWw7XG4gICAgICAgIGNvbnN0IGhvcml6b250YWwgPSAhdmVydGljYWw7XG4gICAgICAgIGNvbnN0IGZvcndhcmQgPSAodmVydGljYWwgJiYgdXApIHx8ICh0aGlzLnJldmVyc2UgPyBob3Jpem9udGFsICYmIHJpZ2h0IDogaG9yaXpvbnRhbCAmJiBsZWZ0KTtcbiAgICAgICAgLy8gY29uc3QgZm9yd2FyZCA9ICh0aGlzLnJldmVyc2UgPyAoIXRoaXMudmVydGljYWwgJiYgIWxlZnQpIDogKCF0aGlzLnZlcnRpY2FsICYmIGxlZnQpKSB8fCAodGhpcy52ZXJ0aWNhbCAmJiB1cCk7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlWzBdID09PSB0aGlzLnZhbHVlWzFdKSB7XG4gICAgICAgICAgICBpZiAoZm9yd2FyZCkge1xuICAgICAgICAgICAgICAgIGFjdGl2ZVN0YXJ0SGFuZGxlID8gbW92ZVN0YXJ0SGFuZGxlKCkgOiBtb3ZlQm90aEhhbmRsZXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGFjdGl2ZVN0YXJ0SGFuZGxlID8gbW92ZUJvdGhIYW5kbGVzKCkgOiBtb3ZlRW5kSGFuZGxlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhY3RpdmVTdGFydEhhbmRsZSA/IG1vdmVTdGFydEhhbmRsZSgpIDogbW92ZUVuZEhhbmRsZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBvbkhhbmRsZVJlbGVhc2UoYXJncykge1xuICAgICAgICB0aGlzLmRyYWdnaW5nID0geyB2YWx1ZTogZmFsc2UsIHRhcmdldDogYXJncy5vcmlnaW5hbEV2ZW50LnRhcmdldCB9OyAvL25lZWRlZCBmb3IgYW5pbWF0aW9uXG4gICAgICAgIHRoaXMuZHJhZ2dlZEhhbmRsZSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLy9uZ01vZGVsIGJpbmRpbmdcbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgd3JpdGVWYWx1ZSh2YWx1ZSkge1xuICAgICAgICB2YWxpZGF0ZVZhbHVlKHZhbHVlKTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLnNpemVDb21wb25lbnQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHJlZ2lzdGVyT25DaGFuZ2UoZm4pIHtcbiAgICAgICAgdGhpcy5uZ0NoYW5nZSA9IGZuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgcmVnaXN0ZXJPblRvdWNoZWQoZm4pIHtcbiAgICAgICAgdGhpcy5uZ1RvdWNoZWQgPSBmbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGNoYW5nZVZhbHVlKHZhbHVlKSB7XG4gICAgICAgIGlmICghdGhpcy52YWx1ZSB8fCAhaXNTYW1lUmFuZ2UodGhpcy52YWx1ZSwgdmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLm5nQ2hhbmdlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQodmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNpemVDb21wb25lbnQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzaXplQ29tcG9uZW50KCkge1xuICAgICAgICBpZiAoIWlzRG9jdW1lbnRBdmFpbGFibGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHdyYXBwZXIgPSB0aGlzLndyYXBwZXIubmF0aXZlRWxlbWVudDtcbiAgICAgICAgY29uc3QgdHJhY2sgPSB0aGlzLnRyYWNrLm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IHNlbGVjdGlvbkVsID0gdGhpcy5zbGlkZXJTZWxlY3Rpb24ubmF0aXZlRWxlbWVudDtcbiAgICAgICAgY29uc3QgZHJhZ0hhbmRsZVN0YXJ0RWwgPSB0aGlzLmRyYWdoYW5kbGVTdGFydC5uYXRpdmVFbGVtZW50O1xuICAgICAgICBjb25zdCBkcmFnSGFuZGxlRW5kRWwgPSB0aGlzLmRyYWdoYW5kbGVFbmQubmF0aXZlRWxlbWVudDtcbiAgICAgICAgY29uc3QgdGlja3MgPSB0aGlzLnRpY2tzID8gdGhpcy50aWNrc0NvbnRhaW5lci5uYXRpdmVFbGVtZW50IDogbnVsbDtcbiAgICAgICAgdGhpcy5yZXNldFN0eWxlcyhbdHJhY2ssIHNlbGVjdGlvbkVsLCBkcmFnSGFuZGxlU3RhcnRFbCwgZHJhZ0hhbmRsZUVuZEVsLCB0aWNrcywgdGhpcy5ob3N0RWxlbWVudC5uYXRpdmVFbGVtZW50XSk7XG4gICAgICAgIGNvbnN0IHByb3BzID0gdGhpcy5nZXRQcm9wcygpO1xuICAgICAgICBjb25zdCBtb2RlbCA9IG5ldyBSYW5nZVNsaWRlck1vZGVsKHByb3BzLCB3cmFwcGVyLCB0cmFjaywgdGhpcy5yZW5kZXJlcik7XG4gICAgICAgIG1vZGVsLnJlc2l6ZVRyYWNrKCk7XG4gICAgICAgIGlmICh0aGlzLnRpY2tzKSB7IC8vZm9yIGNhc2Ugd2hlbiB0aWNrUGxhY2VtZW50OiBub25lXG4gICAgICAgICAgICBtb2RlbC5yZXNpemVUaWNrcyh0aGlzLnRpY2tzQ29udGFpbmVyLm5hdGl2ZUVsZW1lbnQsIHRoaXMudGlja3MudGlja0VsZW1lbnRzLm1hcChlbGVtZW50ID0+IGVsZW1lbnQubmF0aXZlRWxlbWVudCkpO1xuICAgICAgICB9XG4gICAgICAgIG1vZGVsLnBvc2l0aW9uSGFuZGxlKGRyYWdIYW5kbGVTdGFydEVsKTtcbiAgICAgICAgbW9kZWwucG9zaXRpb25IYW5kbGUoZHJhZ0hhbmRsZUVuZEVsKTtcbiAgICAgICAgbW9kZWwucG9zaXRpb25TZWxlY3Rpb24oZHJhZ0hhbmRsZVN0YXJ0RWwsIHNlbGVjdGlvbkVsKTtcbiAgICAgICAgaWYgKHRoaXMuZml4ZWRUaWNrV2lkdGgpIHtcbiAgICAgICAgICAgIG1vZGVsLnJlc2l6ZVdyYXBwZXIoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgZ2V0IGlzRGlzYWJsZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpc2FibGVkIHx8IHRoaXMucmVhZG9ubHk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKiBVc2VkIGJ5IHRoZSBGbG9hdGluZ0xhYmVsIHRvIGRldGVybWluZSBpZiB0aGUgY29tcG9uZW50IGlzIGVtcHR5LlxuICAgICAqL1xuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgc2V0IGZvY3VzZWQodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNGb2N1c2VkICE9PSB2YWx1ZSAmJiB0aGlzLmhvc3RFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmlzRm9jdXNlZCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNldCBkcmFnZ2luZyhkYXRhKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRHJhZ2dlZCAhPT0gZGF0YS52YWx1ZSAmJiB0aGlzLnNsaWRlclNlbGVjdGlvbiAmJiB0aGlzLmRyYWdoYW5kbGVTdGFydCAmJiB0aGlzLmRyYWdoYW5kbGVFbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHNsaWRlclNlbGVjdGlvbiA9IHRoaXMuc2xpZGVyU2VsZWN0aW9uLm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgICAgICBjb25zdCBkcmFnaGFuZGxlID0gZGF0YS50YXJnZXQ7XG4gICAgICAgICAgICBpZiAoZGF0YS52YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3Moc2xpZGVyU2VsZWN0aW9uLCBQUkVTU0VEJDEpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3MoZHJhZ2hhbmRsZSwgUFJFU1NFRCQxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3Moc2xpZGVyU2VsZWN0aW9uLCBQUkVTU0VEJDEpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3MoZHJhZ2hhbmRsZSwgUFJFU1NFRCQxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNEcmFnZ2VkID0gZGF0YS52YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRQcm9wcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRpc2FibGVkOiB0aGlzLmRpc2FibGVkLFxuICAgICAgICAgICAgZml4ZWRUaWNrV2lkdGg6IHRoaXMuZml4ZWRUaWNrV2lkdGgsXG4gICAgICAgICAgICBsYXJnZVN0ZXA6IHRoaXMubGFyZ2VTdGVwLFxuICAgICAgICAgICAgbWF4OiB0aGlzLm1heCxcbiAgICAgICAgICAgIG1pbjogdGhpcy5taW4sXG4gICAgICAgICAgICByZWFkb25seTogdGhpcy5yZWFkb25seSxcbiAgICAgICAgICAgIHJldmVyc2U6IHRoaXMucmV2ZXJzZSxcbiAgICAgICAgICAgIHJ0bDogdGhpcy5sb2NhbGl6YXRpb25TZXJ2aWNlLnJ0bCxcbiAgICAgICAgICAgIHNtYWxsU3RlcDogdGhpcy5zbWFsbFN0ZXAsXG4gICAgICAgICAgICB2YWx1ZTogdHJpbVZhbHVlUmFuZ2UodGhpcy5tYXgsIHRoaXMubWluLCB0aGlzLnZhbHVlKSxcbiAgICAgICAgICAgIHZlcnRpY2FsOiB0aGlzLnZlcnRpY2FsLFxuICAgICAgICAgICAgYnV0dG9uczogZmFsc2VcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXR0YWNoRWxlbWVudEV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICAgIGNvbnN0IGhvc3RFbGVtZW50ID0gdGhpcy5ob3N0RWxlbWVudC5uYXRpdmVFbGVtZW50O1xuICAgICAgICBsZXQgdGFiYmluZyA9IGZhbHNlO1xuICAgICAgICBsZXQgY3Vyc29ySW5zaWRlV3JhcHBlciA9IGZhbHNlO1xuICAgICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAgICAgICAvLyBmb2N1c0luIGFuZCBmb2N1c091dCBhcmUgcmVsYXRpdmUgdG8gdGhlIGhvc3QgZWxlbWVudFxuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmFkZCh0aGlzLnJlbmRlcmVyLmxpc3Rlbihob3N0RWxlbWVudCwgJ2ZvY3VzaW4nLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzRm9jdXNlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmZvY3VzQ2hhbmdlZFByb2dyYW1tYXRpY2FsbHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRm9jdXMuZW1pdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2N1c2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmFkZCh0aGlzLnJlbmRlcmVyLmxpc3Rlbihob3N0RWxlbWVudCwgJ2ZvY3Vzb3V0JywgKGFyZ3MpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNGb2N1c2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRhYmJpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3MucmVsYXRlZFRhcmdldCAhPT0gdGhpcy5kcmFnaGFuZGxlU3RhcnQubmF0aXZlRWxlbWVudCAmJiBhcmdzLnJlbGF0ZWRUYXJnZXQgIT09IHRoaXMuZHJhZ2hhbmRsZUVuZC5uYXRpdmVFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUJsdXIoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0YWJiaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWN1cnNvckluc2lkZVdyYXBwZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQmx1cigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmFkZCh0aGlzLnJlbmRlcmVyLmxpc3Rlbihob3N0RWxlbWVudCwgJ21vdXNlZW50ZXInLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY3Vyc29ySW5zaWRlV3JhcHBlciA9IHRydWU7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuYWRkKHRoaXMucmVuZGVyZXIubGlzdGVuKGhvc3RFbGVtZW50LCAnbW91c2VsZWF2ZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICBjdXJzb3JJbnNpZGVXcmFwcGVyID0gZmFsc2U7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuYWRkKHRoaXMucmVuZGVyZXIubGlzdGVuKGhvc3RFbGVtZW50LCAna2V5ZG93bicsIChhcmdzKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3Mua2V5Q29kZSA9PT0gS2V5cy5UYWIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFiYmluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0YWJiaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KTtcbiAgICB9XG59O1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQXJyYXkpXG5dLCBSYW5nZVNsaWRlckNvbXBvbmVudC5wcm90b3R5cGUsIFwidmFsdWVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIFZpZXdDaGlsZCgnZHJhZ2hhbmRsZVN0YXJ0JywgeyBzdGF0aWM6IHRydWUgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEVsZW1lbnRSZWYpXG5dLCBSYW5nZVNsaWRlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZHJhZ2hhbmRsZVN0YXJ0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBWaWV3Q2hpbGQoJ2RyYWdoYW5kbGVFbmQnLCB7IHN0YXRpYzogdHJ1ZSB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRWxlbWVudFJlZilcbl0sIFJhbmdlU2xpZGVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkcmFnaGFuZGxlRW5kXCIsIHZvaWQgMCk7XG5SYW5nZVNsaWRlckNvbXBvbmVudCA9IFJhbmdlU2xpZGVyQ29tcG9uZW50XzEgPSBfX2RlY29yYXRlKFtcbiAgICBDb21wb25lbnQoe1xuICAgICAgICBleHBvcnRBczogJ2tlbmRvUmFuZ2VTbGlkZXInLFxuICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgIExvY2FsaXphdGlvblNlcnZpY2UsXG4gICAgICAgICAgICB7IHByb3ZpZGU6IEwxME5fUFJFRklYLCB1c2VWYWx1ZTogJ2tlbmRvLnJhbmdlc2xpZGVyJyB9LFxuICAgICAgICAgICAgeyBtdWx0aTogdHJ1ZSwgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IFJhbmdlU2xpZGVyQ29tcG9uZW50XzEpIH0sXG4gICAgICAgICAgICB7IHByb3ZpZGU6IEtlbmRvSW5wdXQsIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IFJhbmdlU2xpZGVyQ29tcG9uZW50XzEpIH1cbiAgICAgICAgXSxcbiAgICAgICAgc2VsZWN0b3I6ICdrZW5kby1yYW5nZXNsaWRlcicsXG4gICAgICAgIHRlbXBsYXRlOiBgXG4gICAgICAgIDxuZy1jb250YWluZXIga2VuZG9TbGlkZXJMb2NhbGl6ZWRNZXNzYWdlc1xuICAgICAgICAgICAgaTE4bi1kcmFnSGFuZGxlU3RhcnQ9XCJrZW5kby5yYW5nZXNsaWRlci5kcmFnSGFuZGxlU3RhcnR8VGhlIHRpdGxlIG9mIHRoZSAqKlN0YXJ0KiogZHJhZyBoYW5kbGUgb2YgdGhlIFNsaWRlci5cIlxuICAgICAgICAgICAgZHJhZ0hhbmRsZVN0YXJ0PVwiRHJhZ1wiXG4gICAgICAgICAgICBpMThuLWRyYWdIYW5kbGVFbmQ9XCJrZW5kby5yYW5nZXNsaWRlci5kcmFnSGFuZGxlRW5kfFRoZSB0aXRsZSBvZiB0aGUgKipFbmQqKiBkcmFnIGhhbmRsZSBvZiB0aGUgU2xpZGVyLlwiXG4gICAgICAgICAgICBkcmFnSGFuZGxlRW5kPVwiRHJhZ1wiXG4gICAgICAgID5cblxuICAgICAgICA8ZGl2IGNsYXNzPVwiay1zbGlkZXItd3JhcFwiICN3cmFwXG4gICAgICAgICAgICBbY2xhc3Muay1zbGlkZXItdG9wbGVmdF09XCJ0aWNrUGxhY2VtZW50ID09PSAnYmVmb3JlJ1wiXG4gICAgICAgICAgICBbY2xhc3Muay1zbGlkZXItYm90dG9tcmlnaHRdPVwidGlja1BsYWNlbWVudCA9PT0gJ2FmdGVyJ1wiXG4gICAgICAgICAgICBba2VuZG9FdmVudHNPdXRzaWRlQW5ndWxhcl09XCJ7IGNsaWNrOiBvbldyYXBDbGljaywga2V5ZG93bjogb25LZXlEb3duIH1cIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgPHVsIGtlbmRvU2xpZGVyVGlja3NcbiAgICAgICAgICAgICAgICAjdGlja3NcbiAgICAgICAgICAgICAgICAqbmdJZj1cInRpY2tQbGFjZW1lbnQgIT09ICdub25lJ1wiXG4gICAgICAgICAgICAgICAgW3RpY2tUaXRsZV09XCJ0aXRsZVwiXG4gICAgICAgICAgICAgICAgW3ZlcnRpY2FsXT1cInZlcnRpY2FsXCJcbiAgICAgICAgICAgICAgICBbc3RlcF09XCJzbWFsbFN0ZXBcIlxuICAgICAgICAgICAgICAgIFtsYXJnZVN0ZXBdPVwibGFyZ2VTdGVwXCJcbiAgICAgICAgICAgICAgICBbbWluXT1cIm1pblwiXG4gICAgICAgICAgICAgICAgW21heF09XCJtYXhcIlxuICAgICAgICAgICAgICAgIFtsYWJlbFRlbXBsYXRlXT1cImxhYmVsVGVtcGxhdGU/LnRlbXBsYXRlUmVmXCJcbiAgICAgICAgICAgICAgICBbYXR0ci5hcmlhLWhpZGRlbl09XCJ0cnVlXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICA8ZGl2ICN0cmFjayBjbGFzcz1cImstc2xpZGVyLXRyYWNrXCI+XG4gICAgICAgICAgICAgICAgPGRpdiAjc2xpZGVyU2VsZWN0aW9uIGNsYXNzPVwiay1zbGlkZXItc2VsZWN0aW9uXCI+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGEgI2RyYWdoYW5kbGVTdGFydFxuICAgICAgICAgICAgICAgICAgICByb2xlPVwic2xpZGVyXCJcbiAgICAgICAgICAgICAgICAgICAgW2lkXT1cInN0YXJ0SGFuZGxlSWRcIlxuICAgICAgICAgICAgICAgICAgICBbYXR0ci50YWJpbmRleF09XCJkaXNhYmxlZCA/IHVuZGVmaW5lZCA6IHRhYmluZGV4XCJcbiAgICAgICAgICAgICAgICAgICAgW2F0dHIuYXJpYS12YWx1ZW1pbl09XCJtaW5cIlxuICAgICAgICAgICAgICAgICAgICBbYXR0ci5hcmlhLXZhbHVlbWF4XT1cIm1heFwiXG4gICAgICAgICAgICAgICAgICAgIFthdHRyLmFyaWEtdmFsdWVub3ddPVwidmFsdWUgPyB2YWx1ZVswXSA6IG51bGxcIlxuICAgICAgICAgICAgICAgICAgICBbYXR0ci5hcmlhLXZhbHVldGV4dF09XCJ2YWx1ZVRleHRcIlxuICAgICAgICAgICAgICAgICAgICBbYXR0ci5hcmlhLWRpc2FibGVkXT1cImRpc2FibGVkID8gdHJ1ZSA6IHVuZGVmaW5lZFwiXG4gICAgICAgICAgICAgICAgICAgIFthdHRyLmFyaWEtcmVhZG9ubHldPVwicmVhZG9ubHkgPyB0cnVlIDogdW5kZWZpbmVkXCJcbiAgICAgICAgICAgICAgICAgICAgW2F0dHIuYXJpYS1vcmllbnRhdGlvbl09XCJ2ZXJ0aWNhbCA/ICd2ZXJ0aWNhbCcgOiAnaG9yaXpvbnRhbCdcIlxuICAgICAgICAgICAgICAgICAgICBbc3R5bGUudG91Y2gtYWN0aW9uXT1cImlzRGlzYWJsZWQgPyAnJyA6ICdub25lJ1wiXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiay1kcmFnaGFuZGxlXCJcbiAgICAgICAgICAgICAgICAgICAgW3RpdGxlXT1cInRleHRGb3IoJ2RyYWdIYW5kbGVTdGFydCcpXCJcbiAgICAgICAgICAgICAgICAgICAga2VuZG9EcmFnZ2FibGVcbiAgICAgICAgICAgICAgICAgICAgKGtlbmRvUHJlc3MpPVwiaWZFbmFibGVkKGhhbmRsZURyYWdQcmVzcyAsJGV2ZW50KVwiXG4gICAgICAgICAgICAgICAgICAgIChrZW5kb0RyYWcpPVwiaWZFbmFibGVkKG9uSGFuZGxlRHJhZyAsJGV2ZW50KVwiXG4gICAgICAgICAgICAgICAgICAgIChrZW5kb1JlbGVhc2UpPVwiaWZFbmFibGVkKG9uSGFuZGxlUmVsZWFzZSwgJGV2ZW50KVwiXG4gICAgICAgICAgICAgICAgPjwvYT5cbiAgICAgICAgICAgICAgICA8YSAjZHJhZ2hhbmRsZUVuZFxuICAgICAgICAgICAgICAgICAgICByb2xlPVwic2xpZGVyXCJcbiAgICAgICAgICAgICAgICAgICAgW2lkXT1cImVuZEhhbmRsZUlkXCJcbiAgICAgICAgICAgICAgICAgICAgW2F0dHIudGFiaW5kZXhdPVwiZGlzYWJsZWQgPyB1bmRlZmluZWQgOiB0YWJpbmRleFwiXG4gICAgICAgICAgICAgICAgICAgIFthdHRyLmFyaWEtdmFsdWVtaW5dPVwibWluXCJcbiAgICAgICAgICAgICAgICAgICAgW2F0dHIuYXJpYS12YWx1ZW1heF09XCJtYXhcIlxuICAgICAgICAgICAgICAgICAgICBbYXR0ci5hcmlhLXZhbHVlbm93XT1cInZhbHVlID8gdmFsdWVbMV0gOiBudWxsXCJcbiAgICAgICAgICAgICAgICAgICAgW2F0dHIuYXJpYS12YWx1ZXRleHRdPVwidmFsdWVUZXh0XCJcbiAgICAgICAgICAgICAgICAgICAgW2F0dHIuYXJpYS1kaXNhYmxlZF09XCJkaXNhYmxlZCA/IHRydWUgOiB1bmRlZmluZWRcIlxuICAgICAgICAgICAgICAgICAgICBbYXR0ci5hcmlhLXJlYWRvbmx5XT1cInJlYWRvbmx5ID8gdHJ1ZSA6IHVuZGVmaW5lZFwiXG4gICAgICAgICAgICAgICAgICAgIFthdHRyLmFyaWEtb3JpZW50YXRpb25dPVwidmVydGljYWwgPyAndmVydGljYWwnIDogJ2hvcml6b250YWwnXCJcbiAgICAgICAgICAgICAgICAgICAgW3N0eWxlLnRvdWNoLWFjdGlvbl09XCJpc0Rpc2FibGVkID8gJycgOiAnbm9uZSdcIlxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImstZHJhZ2hhbmRsZVwiXG4gICAgICAgICAgICAgICAgICAgIFt0aXRsZV09XCJ0ZXh0Rm9yKCdkcmFnSGFuZGxlRW5kJylcIlxuICAgICAgICAgICAgICAgICAgICBrZW5kb0RyYWdnYWJsZVxuICAgICAgICAgICAgICAgICAgICAoa2VuZG9QcmVzcyk9XCJpZkVuYWJsZWQoaGFuZGxlRHJhZ1ByZXNzICwkZXZlbnQpXCJcbiAgICAgICAgICAgICAgICAgICAgKGtlbmRvRHJhZyk9XCJpZkVuYWJsZWQob25IYW5kbGVEcmFnICwkZXZlbnQpXCJcbiAgICAgICAgICAgICAgICAgICAgKGtlbmRvUmVsZWFzZSk9XCJpZkVuYWJsZWQob25IYW5kbGVSZWxlYXNlLCAkZXZlbnQpXCJcbiAgICAgICAgICAgICAgICA+PC9hPlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxrZW5kby1yZXNpemUtc2Vuc29yIChyZXNpemUpPVwic2l6ZUNvbXBvbmVudCgpXCI+PC9rZW5kby1yZXNpemUtc2Vuc29yPlxuICAgICAgICA8L2Rpdj5cbiAgYFxuICAgIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTG9jYWxpemF0aW9uU2VydmljZSxcbiAgICAgICAgSW5qZWN0b3IsXG4gICAgICAgIFJlbmRlcmVyMixcbiAgICAgICAgTmdab25lLFxuICAgICAgICBDaGFuZ2VEZXRlY3RvclJlZixcbiAgICAgICAgRWxlbWVudFJlZl0pXG5dLCBSYW5nZVNsaWRlckNvbXBvbmVudCk7XG5cbnZhciBTd2l0Y2hDb21wb25lbnRfMTtcbmNvbnN0IEZPQ1VTRUQgPSAnay1zdGF0ZS1mb2N1c2VkJztcbi8qKlxuICogUmVwcmVzZW50cyB0aGUgW0tlbmRvIFVJIFN3aXRjaCBjb21wb25lbnQgZm9yIEFuZ3VsYXJdKHslIHNsdWcgb3ZlcnZpZXdfc3dpdGNoICV9KS5cbiAqL1xubGV0IFN3aXRjaENvbXBvbmVudCA9IFN3aXRjaENvbXBvbmVudF8xID0gY2xhc3MgU3dpdGNoQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihyZW5kZXJlciwgaG9zdEVsZW1lbnQsIGxvY2FsaXphdGlvblNlcnZpY2UsIGluamVjdG9yLCBjaGFuZ2VEZXRlY3Rvciwgbmdab25lKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5ob3N0RWxlbWVudCA9IGhvc3RFbGVtZW50O1xuICAgICAgICB0aGlzLmxvY2FsaXphdGlvblNlcnZpY2UgPSBsb2NhbGl6YXRpb25TZXJ2aWNlO1xuICAgICAgICB0aGlzLmluamVjdG9yID0gaW5qZWN0b3I7XG4gICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3IgPSBjaGFuZ2VEZXRlY3RvcjtcbiAgICAgICAgdGhpcy5uZ1pvbmUgPSBuZ1pvbmU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZvY3VzYWJsZUlkID0gYGstJHtndWlkKCl9YDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERldGVybWluZXMgd2hldGhlciB0aGUgU3dpdGNoIGlzIGRpc2FibGVkIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgZGlzYWJsZWRfc3dpdGNoICV9KSkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIFN3aXRjaCBpcyBpbiBpdHMgcmVhZC1vbmx5IHN0YXRlIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgcmVhZG9ubHlfc3dpdGNoICV9KSkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlYWRvbmx5ID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgdGhlIFt0YWJpbmRleF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9HbG9iYWxfYXR0cmlidXRlcy90YWJpbmRleCkgb2YgdGhlIFN3aXRjaC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGFiaW5kZXggPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSB1c2VyIGZvY3VzZXMgdGhlIGBpbnB1dGAgZWxlbWVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25Gb2N1cyA9IG5ldyBFdmVudEVtaXR0ZXIoKTsgLy90c2xpbnQ6ZGlzYWJsZS1saW5lOm5vLW91dHB1dC1yZW5hbWVcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgYGlucHV0YCBlbGVtZW50IGdldHMgYmx1cnJlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25CbHVyID0gbmV3IEV2ZW50RW1pdHRlcigpOyAvL3RzbGludDpkaXNhYmxlLWxpbmU6bm8tb3V0cHV0LXJlbmFtZVxuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSB1c2VyIHNlbGVjdHMgYSBuZXcgdmFsdWUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLmhvc3RDbGFzc2VzID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBoaWRkZW5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLm5nQ2hhbmdlID0gKF8pID0+IHsgfTtcbiAgICAgICAgdGhpcy5uZ1RvdWNoZWQgPSAoKSA9PiB7IH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhhbmRsZUZvY3VzID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5mb2N1c2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChoYXNPYnNlcnZlcnModGhpcy5vbkZvY3VzKSkge1xuICAgICAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25Gb2N1cy5lbWl0KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhhbmRsZUJsdXIgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yLm1hcmtGb3JDaGVjaygpO1xuICAgICAgICAgICAgdGhpcy5mb2N1c2VkID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoaGFzT2JzZXJ2ZXJzKHRoaXMub25CbHVyKSB8fCByZXF1aXJlc1pvbmVPbkJsdXIodGhpcy5jb250cm9sKSkge1xuICAgICAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmdUb3VjaGVkKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25CbHVyLmVtaXQoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdmFsaWRhdGVQYWNrYWdlKHBhY2thZ2VNZXRhZGF0YSk7XG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gbG9jYWxpemF0aW9uU2VydmljZS5ydGwgPyAncnRsJyA6ICdsdHInO1xuICAgICAgICB0aGlzLmtleURvd25IYW5kbGVyID0gdGhpcy5rZXlEb3duSGFuZGxlci5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmNsaWNrSGFuZGxlciA9IHRoaXMuY2xpY2tIYW5kbGVyLmJpbmQodGhpcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHZhbHVlIG9mIHRoZSBTd2l0Y2ggd2hlbiBpdCBpcyBpbml0aWFsbHkgZGlzcGxheWVkLlxuICAgICAqL1xuICAgIHNldCBjaGVja2VkKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuc2V0SG9zdENsYXNzZXModmFsdWUpO1xuICAgICAgICB0aGlzLl9jaGVja2VkID0gdmFsdWU7XG4gICAgfVxuICAgIGdldCBjaGVja2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2hlY2tlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHNldCB0YWJJbmRleCh0YWJJbmRleCkge1xuICAgICAgICB0aGlzLnRhYmluZGV4ID0gdGFiSW5kZXg7XG4gICAgfVxuICAgIGdldCB0YWJJbmRleCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGFiaW5kZXg7XG4gICAgfVxuICAgIGdldCBpZUNsYXNzKCkge1xuICAgICAgICByZXR1cm4gYnJvd3NlciAmJiBicm93c2VyLm1zaWU7XG4gICAgfVxuICAgIGdldCBhcmlhRGlzYWJsZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpc2FibGVkID8gdHJ1ZSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZ2V0IGFyaWFSZWFkb25seSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVhZG9ubHk7XG4gICAgfVxuICAgIGdldCBkaXNhYmxlZENsYXNzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXNhYmxlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGdldCBvbkxhYmVsTWVzc2FnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub25MYWJlbCB8fCB0aGlzLmxvY2FsaXphdGlvblNlcnZpY2UuZ2V0KCdvbicpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgZ2V0IG9mZkxhYmVsTWVzc2FnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2ZmTGFiZWwgfHwgdGhpcy5sb2NhbGl6YXRpb25TZXJ2aWNlLmdldCgnb2ZmJyk7XG4gICAgfVxuICAgIGdldCBpc0VuYWJsZWQoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5kaXNhYmxlZCAmJiAhdGhpcy5yZWFkb25seTtcbiAgICB9XG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIGlmICh0aGlzLmhvc3RFbGVtZW50KSB7XG4gICAgICAgICAgICBjb25zdCB3cmFwcGVyID0gdGhpcy5ob3N0RWxlbWVudC5uYXRpdmVFbGVtZW50O1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5yZW1vdmVBdHRyaWJ1dGUod3JhcHBlciwgXCJ0YWJpbmRleFwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxvY2FsaXphdGlvbkNoYW5nZVN1YnNjcmlwdGlvbiA9IHRoaXMubG9jYWxpemF0aW9uU2VydmljZVxuICAgICAgICAgICAgLmNoYW5nZXNcbiAgICAgICAgICAgIC5waXBlKHNraXAoMSkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKCh7IHJ0bCB9KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IHJ0bCA/ICdydGwnIDogJ2x0cic7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNvbnRyb2wgPSB0aGlzLmluamVjdG9yLmdldChOZ0NvbnRyb2wsIG51bGwpO1xuICAgICAgICB0aGlzLm5nWm9uZS5vblN0YWJsZS5waXBlKHRha2UoMSkpLnN1YnNjcmliZSgoKSA9PiB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZSk7XG4gICAgfVxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICBpZiAodGhpcy5sb2NhbGl6YXRpb25DaGFuZ2VTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIHRoaXMubG9jYWxpemF0aW9uQ2hhbmdlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9jdXNlcyB0aGUgU3dpdGNoLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGB0cy1uby1ydW5cbiAgICAgKiBfQENvbXBvbmVudCh7XG4gICAgICogc2VsZWN0b3I6ICdteS1hcHAnLFxuICAgICAqIHRlbXBsYXRlOiBgXG4gICAgICogIDxidXR0b24gKGNsaWNrKT1cInN3aXRjaC5mb2N1cygpXCI+Rm9jdXM8L2J1dHRvbj5cbiAgICAgKiAgPGtlbmRvLXN3aXRjaCAjc3dpdGNoPjwva2VuZG8tc3dpdGNoPlxuICAgICAqIGBcbiAgICAgKiB9KVxuICAgICAqIGNsYXNzIEFwcENvbXBvbmVudCB7IH1cbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBmb2N1cygpIHtcbiAgICAgICAgaWYgKCF0aGlzLndyYXBwZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLndyYXBwZXIubmF0aXZlRWxlbWVudC5mb2N1cygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCbHVycyB0aGUgU3dpdGNoLlxuICAgICAqL1xuICAgIGJsdXIoKSB7XG4gICAgICAgIGlmICghdGhpcy53cmFwcGVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53cmFwcGVyLm5hdGl2ZUVsZW1lbnQuYmx1cigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICogQ2FsbGVkIHdoZW4gdGhlIHN0YXR1cyBvZiB0aGUgY29tcG9uZW50IGNoYW5nZXMgdG8gb3IgZnJvbSBgZGlzYWJsZWRgLlxuICAgICAqIERlcGVuZGluZyBvbiB0aGUgdmFsdWUsIGl0IGVuYWJsZXMgb3IgZGlzYWJsZXMgdGhlIGFwcHJvcHJpYXRlIERPTSBlbGVtZW50LlxuICAgICAqL1xuICAgIHNldERpc2FibGVkU3RhdGUoaXNEaXNhYmxlZCkge1xuICAgICAgICB0aGlzLmRpc2FibGVkID0gaXNEaXNhYmxlZDtcbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3Rvci5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHdyaXRlVmFsdWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5jaGVja2VkID0gdmFsdWUgPT09IG51bGwgPyBmYWxzZSA6IHZhbHVlO1xuICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yLm1hcmtGb3JDaGVjaygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgcmVnaXN0ZXJPbkNoYW5nZShmbikge1xuICAgICAgICB0aGlzLm5nQ2hhbmdlID0gZm47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICByZWdpc3Rlck9uVG91Y2hlZChmbikge1xuICAgICAgICB0aGlzLm5nVG91Y2hlZCA9IGZuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAga2V5RG93bkhhbmRsZXIoZSkge1xuICAgICAgICBjb25zdCBrZXlDb2RlID0gZS5rZXlDb2RlO1xuICAgICAgICBpZiAodGhpcy5pc0VuYWJsZWQgJiYgKGtleUNvZGUgPT09IEtleXMuU3BhY2UgfHwga2V5Q29kZSA9PT0gS2V5cy5FbnRlcikpIHtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlVmFsdWUoIXRoaXMuY2hlY2tlZCk7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGNsaWNrSGFuZGxlcigpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNFbmFibGVkKSB7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZVZhbHVlKCF0aGlzLmNoZWNrZWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKiBVc2VkIGJ5IHRoZSBUZXh0Qm94Q29udGFpbmVyIHRvIGRldGVybWluZSBpZiB0aGUgY29tcG9uZW50IGlzIGVtcHR5LlxuICAgICAqL1xuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY2hhbmdlVmFsdWUodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuY2hlY2tlZCAhPT0gdmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgdGhpcy5uZ0NoYW5nZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZUNoYW5nZS5lbWl0KHZhbHVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yLm1hcmtGb3JDaGVjaygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0IGZvY3VzZWQodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNGb2N1c2VkICE9PSB2YWx1ZSAmJiB0aGlzLmhvc3RFbGVtZW50KSB7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5ob3N0RWxlbWVudC5uYXRpdmVFbGVtZW50O1xuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhlbGVtZW50LCBGT0NVU0VEKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3MoZWxlbWVudCwgRk9DVVNFRCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzRm9jdXNlZCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNldEhvc3RDbGFzc2VzKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5yZW1vdmVDbGFzcyh0aGlzLmhvc3RFbGVtZW50Lm5hdGl2ZUVsZW1lbnQsICdrLXN3aXRjaC1vZmYnKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5ob3N0RWxlbWVudC5uYXRpdmVFbGVtZW50LCAnay1zd2l0Y2gtb24nKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3ModGhpcy5ob3N0RWxlbWVudC5uYXRpdmVFbGVtZW50LCAnay1zd2l0Y2gtb24nKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5ob3N0RWxlbWVudC5uYXRpdmVFbGVtZW50LCAnay1zd2l0Y2gtb2ZmJyk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgU3dpdGNoQ29tcG9uZW50LnByb3RvdHlwZSwgXCJmb2N1c2FibGVJZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgU3dpdGNoQ29tcG9uZW50LnByb3RvdHlwZSwgXCJvbkxhYmVsXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBTd2l0Y2hDb21wb25lbnQucHJvdG90eXBlLCBcIm9mZkxhYmVsXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0Jvb2xlYW5dKVxuXSwgU3dpdGNoQ29tcG9uZW50LnByb3RvdHlwZSwgXCJjaGVja2VkXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIFN3aXRjaENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGlzYWJsZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBTd2l0Y2hDb21wb25lbnQucHJvdG90eXBlLCBcInJlYWRvbmx5XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOdW1iZXIpXG5dLCBTd2l0Y2hDb21wb25lbnQucHJvdG90eXBlLCBcInRhYmluZGV4XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOdW1iZXIpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTnVtYmVyXSlcbl0sIFN3aXRjaENvbXBvbmVudC5wcm90b3R5cGUsIFwidGFiSW5kZXhcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoJ2ZvY3VzJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIFN3aXRjaENvbXBvbmVudC5wcm90b3R5cGUsIFwib25Gb2N1c1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCdibHVyJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIFN3aXRjaENvbXBvbmVudC5wcm90b3R5cGUsIFwib25CbHVyXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgU3dpdGNoQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ2YWx1ZUNoYW5nZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgVmlld0NoaWxkKCd3cmFwcGVyJywgeyBzdGF0aWM6IHRydWUgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbl0sIFN3aXRjaENvbXBvbmVudC5wcm90b3R5cGUsIFwid3JhcHBlclwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2F0dHIuZGlyJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIFN3aXRjaENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGlyZWN0aW9uXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay1pZScpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBTd2l0Y2hDb21wb25lbnQucHJvdG90eXBlLCBcImllQ2xhc3NcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnYXR0ci5hcmlhLWRpc2FibGVkJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIFN3aXRjaENvbXBvbmVudC5wcm90b3R5cGUsIFwiYXJpYURpc2FibGVkXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2F0dHIuYXJpYS1yZWFkb25seScpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBTd2l0Y2hDb21wb25lbnQucHJvdG90eXBlLCBcImFyaWFSZWFkb25seVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLXN3aXRjaCcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgU3dpdGNoQ29tcG9uZW50LnByb3RvdHlwZSwgXCJob3N0Q2xhc3Nlc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmstc3RhdGUtZGlzYWJsZWQnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgU3dpdGNoQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXNhYmxlZENsYXNzXCIsIG51bGwpO1xuU3dpdGNoQ29tcG9uZW50ID0gU3dpdGNoQ29tcG9uZW50XzEgPSBfX2RlY29yYXRlKFtcbiAgICBDb21wb25lbnQoe1xuICAgICAgICBleHBvcnRBczogJ2tlbmRvU3dpdGNoJyxcbiAgICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgICAgICBMb2NhbGl6YXRpb25TZXJ2aWNlLFxuICAgICAgICAgICAgeyBwcm92aWRlOiBMMTBOX1BSRUZJWCwgdXNlVmFsdWU6ICdrZW5kby5zd2l0Y2gnIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbXVsdGk6IHRydWUsXG4gICAgICAgICAgICAgICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXG4gICAgICAgICAgICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gU3dpdGNoQ29tcG9uZW50XzEpIC8qIHRzbGludDpkaXNhYmxlLWxpbmUgKi9cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZTogS2VuZG9JbnB1dCxcbiAgICAgICAgICAgICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBTd2l0Y2hDb21wb25lbnRfMSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgc2VsZWN0b3I6ICdrZW5kby1zd2l0Y2gnLFxuICAgICAgICB0ZW1wbGF0ZTogYFxuICAgICAgICA8bmctY29udGFpbmVyIGtlbmRvU3dpdGNoTG9jYWxpemVkTWVzc2FnZXNcbiAgICAgICAgICAgIGkxOG4tb249XCJrZW5kby5zd2l0Y2gub258VGhlICoqT24qKiBsYWJlbCBvZiB0aGUgU3dpdGNoLlwiXG4gICAgICAgICAgICBvbj1cIk9OXCJcbiAgICAgICAgICAgIGkxOG4tb2ZmPVwia2VuZG8uc3dpdGNoLm9mZnxUaGUgKipPZmYqKiBsYWJlbCBvZiB0aGUgU3dpdGNoLlwiXG4gICAgICAgICAgICBvZmY9XCJPRkZcIlxuICAgICAgICA+XG5cbiAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICN3cmFwcGVyXG4gICAgICAgICAgICBjbGFzcz1cImstc3dpdGNoLWNvbnRhaW5lclwiXG4gICAgICAgICAgICBbaWRdPVwiZm9jdXNhYmxlSWRcIlxuICAgICAgICAgICAgcm9sZT1cInN3aXRjaFwiXG4gICAgICAgICAgICBbc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uXT1cImluaXRpYWxpemVkID8gJzIwMG1zJyA6ICcwbXMnXCJcbiAgICAgICAgICAgIFthdHRyLmFyaWEtY2hlY2tlZF09XCJjaGVja2VkXCJcbiAgICAgICAgICAgIFthdHRyLnRhYmluZGV4XT1cIihkaXNhYmxlZCA/IHVuZGVmaW5lZCA6IHRhYkluZGV4KVwiXG4gICAgICAgICAgICBba2VuZG9FdmVudHNPdXRzaWRlQW5ndWxhcl09XCJ7IGNsaWNrOiBjbGlja0hhbmRsZXIsIGtleWRvd246IGtleURvd25IYW5kbGVyLCBmb2N1czogaGFuZGxlRm9jdXMsIGJsdXI6IGhhbmRsZUJsdXIgfVwiXG4gICAgICAgID5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiay1zd2l0Y2gtbGFiZWwtb25cIiBbYXR0ci5hcmlhLWhpZGRlbl09XCJ0cnVlXCIgPnt7b25MYWJlbE1lc3NhZ2V9fTwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiay1zd2l0Y2gtbGFiZWwtb2ZmXCIgW2F0dHIuYXJpYS1oaWRkZW5dPVwidHJ1ZVwiPnt7b2ZmTGFiZWxNZXNzYWdlfX08L3NwYW4+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImstc3dpdGNoLWhhbmRsZVwiIFtzdHlsZS50cmFuc2l0aW9uRHVyYXRpb25dPVwiaW5pdGlhbGl6ZWQgPyAnMjAwbXMnIDogJzBtcydcIj48L3NwYW4+XG4gICAgICAgIDwvc3Bhbj5cbiAgYFxuICAgIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbUmVuZGVyZXIyLFxuICAgICAgICBFbGVtZW50UmVmLFxuICAgICAgICBMb2NhbGl6YXRpb25TZXJ2aWNlLFxuICAgICAgICBJbmplY3RvcixcbiAgICAgICAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgICAgIE5nWm9uZV0pXG5dLCBTd2l0Y2hDb21wb25lbnQpO1xuXG52YXIgVGV4dEFyZWFEaXJlY3RpdmVfMTtcbi8qKlxuICogUmVwcmVzZW50cyB0aGUgW0tlbmRvIFVJIFRleHRBcmVhIGRpcmVjdGl2ZSBmb3IgdGhlIElucHV0cyBjb21wb25lbnRzIGZvciBBbmd1bGFyXSh7JSBzbHVnIG92ZXJ2aWV3X3RleHRhcmVhICV9KS5cbiAqIFByb3ZpZGVzIGZsb2F0aW5nIGxhYmVscyB0byBgdGV4dGFyZWFgIGVsZW1lbnRzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0cy1uby1ydW5cbiAqIDx0ZXh0YXJlYSBrZW5kb1RleHRBcmVhPjwvdGV4dGFyZWE+XG4gKiBgYGBcbiAqL1xubGV0IFRleHRBcmVhRGlyZWN0aXZlID0gVGV4dEFyZWFEaXJlY3RpdmVfMSA9IGNsYXNzIFRleHRBcmVhRGlyZWN0aXZlIHtcbiAgICBjb25zdHJ1Y3RvcihyZW5kZXJlciwgZWxlbWVudCwgem9uZSwgY2hhbmdlRGV0ZWN0b3IsIGluamVjdG9yLCBydGwpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICB0aGlzLnpvbmUgPSB6b25lO1xuICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yID0gY2hhbmdlRGV0ZWN0b3I7XG4gICAgICAgIHRoaXMuaW5qZWN0b3IgPSBpbmplY3RvcjtcbiAgICAgICAgdGhpcy5lbGVtZW50Q2xhc3MgPSB0cnVlO1xuICAgICAgICB0aGlzLmF1dG9maWxsQ2xhc3MgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSB0ZXh0YXJlYSB2YWx1ZSBpcyBjaGFuZ2VkLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52YWx1ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyBpZiB0aGUgYHRleHRhcmVhYCBlbGVtZW50IHdpbGwgcmVzaXplIGl0cyBoZWlnaHQgYXV0b21hdGljYWxseVxuICAgICAgICAgKiAoW3NlZSBleGFtcGxlXSh7JSBzbHVnIG92ZXJ2aWV3X3RleHRhcmVhICV9I3RvYy1hdXRvLXJlc2l6aW5nKSkuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBkZWZhdWx0IGZhbHNlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmF1dG9TaXplID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uRm9jdXMgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uQmx1ciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBoaWRkZW5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25WYWx1ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBoaWRkZW5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYXV0b0ZpbGxTdGFydCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBoaWRkZW5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYXV0b0ZpbGxFbmQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0gW107XG4gICAgICAgIHRoaXMubmdDaGFuZ2UgPSAoXykgPT4geyB9O1xuICAgICAgICB0aGlzLm5nVG91Y2hlZCA9ICgpID0+IHsgfTtcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBydGwgPyAncnRsJyA6ICdsdHInO1xuICAgIH1cbiAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudC5pZDtcbiAgICB9XG4gICAgc2V0IGlkKGlkKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0QXR0cmlidXRlKHRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50LCAnaWQnLCBpZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICB3cml0ZVZhbHVlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudFZhbHVlID0gdmFsdWU7XG4gICAgICAgIHRoaXMucmVzaXplKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICByZWdpc3Rlck9uQ2hhbmdlKGZuKSB7XG4gICAgICAgIHRoaXMubmdDaGFuZ2UgPSBmbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHJlZ2lzdGVyT25Ub3VjaGVkKGZuKSB7XG4gICAgICAgIHRoaXMubmdUb3VjaGVkID0gZm47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzZXREaXNhYmxlZFN0YXRlKGlzRGlzYWJsZWQpIHtcbiAgICAgICAgdGhpcy5zZXRFbGVtZW50UHJvcGVydHkoJ2Rpc2FibGVkJywgaXNEaXNhYmxlZCk7XG4gICAgfVxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgIHRoaXMuem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVycyA9IFtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmxpc3RlbihlbGVtZW50LCAnZm9jdXMnLCB0aGlzLmhhbmRsZUZvY3VzLmJpbmQodGhpcykpLFxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIubGlzdGVuKGVsZW1lbnQsICdibHVyJywgdGhpcy5oYW5kbGVCbHVyLmJpbmQodGhpcykpLFxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIubGlzdGVuKGVsZW1lbnQsICdhbmltYXRpb25zdGFydCcsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlLmFuaW1hdGlvbk5hbWUgPT09ICdhdXRvRmlsbFN0YXJ0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hdXRvRmlsbFN0YXJ0LmVtaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChlLmFuaW1hdGlvbk5hbWUgPT09ICdhdXRvRmlsbEVuZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXV0b0ZpbGxFbmQuZW1pdCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBpZiAoaXNEb2N1bWVudEF2YWlsYWJsZSgpICYmIHRoaXMuYXV0b1NpemUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2l6ZVN1YnNjcmlwdGlvbiA9IGZyb21FdmVudCh3aW5kb3csICdyZXNpemUnKVxuICAgICAgICAgICAgICAgICAgICAucGlwZSgoZGVib3VuY2VUaW1lKDUwKSkpXG4gICAgICAgICAgICAgICAgICAgIC5zdWJzY3JpYmUoKCkgPT4gdGhpcy5yZXNpemUoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlucHV0U3Vic2NyaXB0aW9uID0gZnJvbUV2ZW50KGVsZW1lbnQsICdpbnB1dCcpXG4gICAgICAgICAgICAgICAgLnN1YnNjcmliZSh0aGlzLmhhbmRsZUlucHV0LmJpbmQodGhpcykpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jb250cm9sID0gdGhpcy5pbmplY3Rvci5nZXQoTmdDb250cm9sLCBudWxsKTtcbiAgICB9XG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlcykge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgIGlmIChjaGFuZ2VzLnZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRWYWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoYW5nZXMuYXV0b1NpemUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmF1dG9TaXplKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsSGVpZ2h0ID0gZWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShlbGVtZW50LCAncmVzaXplJywgJ25vbmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoZWxlbWVudCwgJ292ZXJmbG93LXknLCAnYXV0bycpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoZWxlbWVudCwgJ3Jlc2l6ZScsICdib3RoJyk7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5oZWlnaHQgPSBgJHt0aGlzLmluaXRpYWxIZWlnaHR9cHhgO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVzaXplKCk7XG4gICAgfVxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLmxpc3RlbmVycy5mb3JFYWNoKGxpc3RlbmVyID0+IGxpc3RlbmVyKCkpO1xuICAgICAgICBpZiAodGhpcy5pbnB1dFN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgdGhpcy5pbnB1dFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnJlc2l6ZVN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgdGhpcy5yZXNpemVTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgZWxlbWVudFZhbHVlKCkge1xuICAgICAgICBpZiAodGhpcy5lbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQudmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICBzZXQgZWxlbWVudFZhbHVlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuc2V0RWxlbWVudFByb3BlcnR5KCd2YWx1ZScsICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSBudWxsKSA/ICcnIDogdmFsdWUpO1xuICAgIH1cbiAgICBzZXRFbGVtZW50UHJvcGVydHkobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRQcm9wZXJ0eSh0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudCwgbmFtZSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlc2l6ZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmF1dG9TaXplKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50O1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKGVsZW1lbnQsICdvdmVyZmxvdy15JywgJ2hpZGRlbicpO1xuICAgICAgICBlbGVtZW50LnN0eWxlLmhlaWdodCA9IGAke3RoaXMuaW5pdGlhbEhlaWdodH1weGA7XG4gICAgICAgIGNvbnN0IHNjcm9sbEhlaWdodCA9IGVsZW1lbnQuc2Nyb2xsSGVpZ2h0O1xuICAgICAgICBpZiAoc2Nyb2xsSGVpZ2h0ID4gdGhpcy5pbml0aWFsSGVpZ2h0KSB7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmhlaWdodCA9IGAke3Njcm9sbEhlaWdodH1weGA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlSW5wdXQoKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5lbGVtZW50VmFsdWU7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgaWYgKHRoaXMuY29udHJvbCB8fCBoYXNPYnNlcnZlcnModGhpcy5vblZhbHVlQ2hhbmdlKSB8fCBoYXNPYnNlcnZlcnModGhpcy52YWx1ZUNoYW5nZSkpIHtcbiAgICAgICAgICAgIHRoaXMuem9uZS5ydW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubmdDaGFuZ2UodmFsdWUpO1xuICAgICAgICAgICAgICAgIHRoaXMub25WYWx1ZUNoYW5nZS5lbWl0KHZhbHVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQodmFsdWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3IubWFya0ZvckNoZWNrKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlc2l6ZSgpO1xuICAgIH1cbiAgICBoYW5kbGVGb2N1cygpIHtcbiAgICAgICAgaWYgKGhhc09ic2VydmVycyh0aGlzLm9uRm9jdXMpKSB7XG4gICAgICAgICAgICB0aGlzLnpvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uRm9jdXMuZW1pdCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlQmx1cigpIHtcbiAgICAgICAgaWYgKGhhc09ic2VydmVycyh0aGlzLm9uQmx1cikgfHwgcmVxdWlyZXNab25lT25CbHVyKHRoaXMuY29udHJvbCkpIHtcbiAgICAgICAgICAgIHRoaXMuem9uZS5ydW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubmdUb3VjaGVkKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkJsdXIuZW1pdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3IubWFya0ZvckNoZWNrKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay10ZXh0YXJlYScpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgVGV4dEFyZWFEaXJlY3RpdmUucHJvdG90eXBlLCBcImVsZW1lbnRDbGFzc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmstYXV0b2ZpbGwnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIFRleHRBcmVhRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJhdXRvZmlsbENsYXNzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnYXR0ci5kaXInKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgVGV4dEFyZWFEaXJlY3RpdmUucHJvdG90eXBlLCBcImRpcmVjdGlvblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIFRleHRBcmVhRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJ2YWx1ZUNoYW5nZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIFRleHRBcmVhRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJhdXRvU2l6ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgVGV4dEFyZWFEaXJlY3RpdmUucHJvdG90eXBlLCBcInZhbHVlXCIsIHZvaWQgMCk7XG5UZXh0QXJlYURpcmVjdGl2ZSA9IFRleHRBcmVhRGlyZWN0aXZlXzEgPSBfX2RlY29yYXRlKFtcbiAgICBEaXJlY3RpdmUoe1xuICAgICAgICBwcm92aWRlcnM6IFt7XG4gICAgICAgICAgICAgICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXG4gICAgICAgICAgICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gVGV4dEFyZWFEaXJlY3RpdmVfMSksXG4gICAgICAgICAgICAgICAgbXVsdGk6IHRydWVcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBwcm92aWRlOiBLZW5kb0lucHV0LFxuICAgICAgICAgICAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IFRleHRBcmVhRGlyZWN0aXZlXzEpXG4gICAgICAgICAgICB9XSxcbiAgICAgICAgc2VsZWN0b3I6ICd0ZXh0YXJlYVtrZW5kb1RleHRBcmVhXSdcbiAgICB9KSxcbiAgICBfX3BhcmFtKDUsIE9wdGlvbmFsKCkpLCBfX3BhcmFtKDUsIEluamVjdChSVEwpKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW1JlbmRlcmVyMixcbiAgICAgICAgRWxlbWVudFJlZixcbiAgICAgICAgTmdab25lLFxuICAgICAgICBDaGFuZ2VEZXRlY3RvclJlZixcbiAgICAgICAgSW5qZWN0b3IsIEJvb2xlYW5dKVxuXSwgVGV4dEFyZWFEaXJlY3RpdmUpO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY2xhc3MgRmxvYXRpbmdMYWJlbElucHV0QWRhcHRlciB7XG4gICAgY29uc3RydWN0b3IoY29tcG9uZW50LCBmb3JtQ29udHJvbCkge1xuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IGNvbXBvbmVudDtcbiAgICAgICAgY29uc3QgaXNPYnNlcnZhYmxlT3JFdmVudEVtaXR0ZXIgPSAoZXZlbnQpID0+IGV2ZW50IGluc3RhbmNlb2YgT2JzZXJ2YWJsZSB8fCBldmVudCBpbnN0YW5jZW9mIEV2ZW50RW1pdHRlcjtcbiAgICAgICAgaWYgKGlzT2JzZXJ2YWJsZU9yRXZlbnRFbWl0dGVyKGNvbXBvbmVudC5vbkZvY3VzKSkge1xuICAgICAgICAgICAgdGhpcy5vbkZvY3VzID0gY29tcG9uZW50Lm9uRm9jdXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzT2JzZXJ2YWJsZU9yRXZlbnRFbWl0dGVyKGNvbXBvbmVudC5hdXRvRmlsbFN0YXJ0KSkge1xuICAgICAgICAgICAgdGhpcy5hdXRvRmlsbFN0YXJ0ID0gY29tcG9uZW50LmF1dG9GaWxsU3RhcnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzT2JzZXJ2YWJsZU9yRXZlbnRFbWl0dGVyKGNvbXBvbmVudC5hdXRvRmlsbEVuZCkpIHtcbiAgICAgICAgICAgIHRoaXMuYXV0b0ZpbGxFbmQgPSBjb21wb25lbnQuYXV0b0ZpbGxFbmQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzT2JzZXJ2YWJsZU9yRXZlbnRFbWl0dGVyKGNvbXBvbmVudC5vbkJsdXIpKSB7XG4gICAgICAgICAgICB0aGlzLm9uQmx1ciA9IGNvbXBvbmVudC5vbkJsdXI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZvcm1Db250cm9sKSB7XG4gICAgICAgICAgICB0aGlzLm9uVmFsdWVDaGFuZ2UgPSBmb3JtQ29udHJvbC52YWx1ZUNoYW5nZXM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY29tcG9uZW50Lm9uVmFsdWVDaGFuZ2UpIHtcbiAgICAgICAgICAgIHRoaXMub25WYWx1ZUNoYW5nZSA9IGNvbXBvbmVudC5vblZhbHVlQ2hhbmdlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBmb2N1c2FibGVJZCgpIHtcbiAgICAgICAgY29uc3QgY29tcG9uZW50ID0gdGhpcy5jb21wb25lbnQ7XG4gICAgICAgIGlmICgnZm9jdXNhYmxlSWQnIGluIGNvbXBvbmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbXBvbmVudC5mb2N1c2FibGVJZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgnaWQnIGluIGNvbXBvbmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbXBvbmVudC5pZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG4gICAgc2V0IGZvY3VzYWJsZUlkKHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IHRoaXMuY29tcG9uZW50O1xuICAgICAgICBpZiAoJ2ZvY3VzYWJsZUlkJyBpbiBjb21wb25lbnQpIHtcbiAgICAgICAgICAgIGNvbXBvbmVudC5mb2N1c2FibGVJZCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCdpZCcgaW4gY29tcG9uZW50KSB7XG4gICAgICAgICAgICBjb21wb25lbnQuaWQgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY29uc3QgaXNGdW5jdGlvbiA9ICh4KSA9PiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeCkgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xubGV0IFRleHRCb3hDb250YWluZXJDb21wb25lbnQgPSBjbGFzcyBUZXh0Qm94Q29udGFpbmVyQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50UmVmLCByZW5kZXJlciwgY2hhbmdlRGV0ZWN0b3JSZWYsIHJ0bCkge1xuICAgICAgICB0aGlzLmVsZW1lbnRSZWYgPSBlbGVtZW50UmVmO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3JSZWYgPSBjaGFuZ2VEZXRlY3RvclJlZjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBoaWRkZW5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZm9jdXNlZCA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGhpZGRlblxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5lbXB0eSA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmludmFsaWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fc3Vic2NyaXB0aW9ucyA9IFtdO1xuICAgICAgICB0aGlzLmF1dG9GaWxsU3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IHJ0bCA/ICdydGwnIDogJ2x0cic7XG4gICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQXR0cmlidXRlKHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LCBcImlkXCIpO1xuICAgIH1cbiAgICBnZXQgaG9zdENsYXNzZXMoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBnZXQgdGV4dGFyZWFFbGVtZW50Q2xhc3MoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMudGV4dGFyZWE7XG4gICAgfVxuICAgIGdldCBmb2N1c2VkQ2xhc3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZvY3VzZWQ7XG4gICAgfVxuICAgIGdldCBpbnZhbGlkQ2xhc3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmludmFsaWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBuZ0FmdGVyQ29udGVudEluaXQoKSB7XG4gICAgICAgIGlmICghdGhpcy5mb3JtQ29udHJvbCAmJiAhdGhpcy5rZW5kb0lucHV0KSB7XG4gICAgICAgICAgICBpZiAoaXNEZXZNb2RlKCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgVGV4dEJveENvbnRhaW5lciByZXF1aXJlcyBhIEtlbmRvIElucHV0IGNvbXBvbmVudFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCIgb3IgYSBmb3Jtcy1ib3VuZCBjb21wb25lbnQgdG8gZnVuY3Rpb24gcHJvcGVybHkuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGFkZCBmb2N1cy9ibHVyL3ZhbHVlQ2hhbmdlIGhhbmRsZXJzXG4gICAgICAgIGNvbnN0IGNvbnRyb2wgPSBuZXcgRmxvYXRpbmdMYWJlbElucHV0QWRhcHRlcih0aGlzLmtlbmRvSW5wdXQgfHwgdGhpcy5mb3JtQ29udHJvbC52YWx1ZUFjY2Vzc29yLCB0aGlzLmZvcm1Db250cm9sKTtcbiAgICAgICAgY29uc3Qgc2V0Rm9jdXMgPSAoaXNGb2N1c2VkKSA9PiAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmZvY3VzZWQgPSBpc0ZvY3VzZWQ7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlKGNvbnRyb2wsICdvbkZvY3VzJywgc2V0Rm9jdXModHJ1ZSkpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZShjb250cm9sLCAnb25CbHVyJywgc2V0Rm9jdXMoZmFsc2UpKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmUoY29udHJvbCwgJ2F1dG9GaWxsU3RhcnQnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmF1dG9GaWxsU3RhcnRlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUNsYXNzKHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LCAnay1zdGF0ZS1lbXB0eScpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmUoY29udHJvbCwgJ2F1dG9GaWxsRW5kJywgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuYXV0b0ZpbGxTdGFydGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hdXRvRmlsbFN0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5lbXB0eSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LCAnay1zdGF0ZS1lbXB0eScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHVwZGF0ZVN0YXRlID0gKCkgPT4gdGhpcy51cGRhdGVTdGF0ZSgpO1xuICAgICAgICB1cGRhdGVTdGF0ZSgpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZShjb250cm9sLCAnb25WYWx1ZUNoYW5nZScsIHVwZGF0ZVN0YXRlKTtcbiAgICAgICAgLy8gc2V0IGxhYmVsIGlkIGZvciBmbG9hdGluZyBsYWJlbFxuICAgICAgICBpZiAodGhpcy5pZCAmJiBjb250cm9sLmZvY3VzYWJsZUlkKSB7XG4gICAgICAgICAgICAvLyBpbnB1dCB3aW5zXG4gICAgICAgICAgICB0aGlzLmlkID0gY29udHJvbC5mb2N1c2FibGVJZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmlkKSB7XG4gICAgICAgICAgICBjb250cm9sLmZvY3VzYWJsZUlkID0gdGhpcy5pZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjb250cm9sLmZvY3VzYWJsZUlkKSB7XG4gICAgICAgICAgICB0aGlzLmlkID0gY29udHJvbC5mb2N1c2FibGVJZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gXCJfXCIgKyBndWlkKCk7XG4gICAgICAgICAgICBjb250cm9sLmZvY3VzYWJsZUlkID0gaWQ7XG4gICAgICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLl9zdWJzY3JpcHRpb25zLmZvckVhY2gocyA9PiBzLnVuc3Vic2NyaWJlKCkpO1xuICAgICAgICB0aGlzLl9zdWJzY3JpcHRpb25zID0gW107XG4gICAgfVxuICAgIHN1YnNjcmliZShjb250cm9sLCBldmVudE5hbWUsIGhhbmRsZXIpIHtcbiAgICAgICAgaWYgKGNvbnRyb2xbZXZlbnROYW1lXSBpbnN0YW5jZW9mIEV2ZW50RW1pdHRlcikge1xuICAgICAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gY29udHJvbFtldmVudE5hbWVdLnN1YnNjcmliZShoYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMuX3N1YnNjcmlwdGlvbnMucHVzaChzdWJzY3JpcHRpb24pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZVN0YXRlKCkge1xuICAgICAgICBjb25zdCBlbXB0eSA9IHZhbHVlID0+IHtcbiAgICAgICAgICAgIC8vIHplcm8gaXMgbm90IGFuIGVtcHR5IHZhbHVlIChlLmcuLCBOdW1lcmljVGV4dEJveClcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gMCB8fCB2YWx1ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBlbXB0eSBhcnJheXMgYXJlIGFuIGVtcHR5IHZhbHVlIChlLmcuLCBNdWx0aVNlbGVjdClcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSAmJiAhdmFsdWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gIXZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBmb3JtQ29udHJvbCA9IHRoaXMuZm9ybUNvbnRyb2w7XG4gICAgICAgIGlmIChmb3JtQ29udHJvbCkge1xuICAgICAgICAgICAgY29uc3QgdmFsdWVBY2Nlc3NvciA9IGZvcm1Db250cm9sLnZhbHVlQWNjZXNzb3I7XG4gICAgICAgICAgICBpZiAoaXNGdW5jdGlvbih2YWx1ZUFjY2Vzc29yLmlzRW1wdHkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbXB0eSA9IHZhbHVlQWNjZXNzb3IuaXNFbXB0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbXB0eSA9IGVtcHR5KGZvcm1Db250cm9sLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaW52YWxpZCA9IGZvcm1Db250cm9sLmludmFsaWQgJiYgKGZvcm1Db250cm9sLnRvdWNoZWQgfHwgZm9ybUNvbnRyb2wuZGlydHkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5lbXB0eSA9IGlzRnVuY3Rpb24odGhpcy5rZW5kb0lucHV0LmlzRW1wdHkpID9cbiAgICAgICAgICAgICAgICB0aGlzLmtlbmRvSW5wdXQuaXNFbXB0eSgpIDogZW1wdHkodGhpcy5rZW5kb0lucHV0LnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5lbXB0eSkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyh0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgJ2stc3RhdGUtZW1wdHknKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3ModGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQsICdrLXN0YXRlLWVtcHR5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG59O1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmstdGV4dGJveC1jb250YWluZXInKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgVGV4dEJveENvbnRhaW5lckNvbXBvbmVudC5wcm90b3R5cGUsIFwiaG9zdENsYXNzZXNcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay10ZXh0YXJlYS13cmFwcGVyJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIFRleHRCb3hDb250YWluZXJDb21wb25lbnQucHJvdG90eXBlLCBcInRleHRhcmVhRWxlbWVudENsYXNzXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmstc3RhdGUtZm9jdXNlZCcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBUZXh0Qm94Q29udGFpbmVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJmb2N1c2VkQ2xhc3NcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay1zdGF0ZS1pbnZhbGlkJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIFRleHRCb3hDb250YWluZXJDb21wb25lbnQucHJvdG90eXBlLCBcImludmFsaWRDbGFzc1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdhdHRyLmRpcicpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBUZXh0Qm94Q29udGFpbmVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXJlY3Rpb25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIFRleHRCb3hDb250YWluZXJDb21wb25lbnQucHJvdG90eXBlLCBcImlkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBUZXh0Qm94Q29udGFpbmVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJmbG9hdGluZ0xhYmVsXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBDb250ZW50Q2hpbGQoS2VuZG9JbnB1dCwgeyBzdGF0aWM6IGZhbHNlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG5dLCBUZXh0Qm94Q29udGFpbmVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJrZW5kb0lucHV0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBDb250ZW50Q2hpbGQoVGV4dEFyZWFEaXJlY3RpdmUsIHsgc3RhdGljOiBmYWxzZSB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgVGV4dEFyZWFEaXJlY3RpdmUpXG5dLCBUZXh0Qm94Q29udGFpbmVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0ZXh0YXJlYVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgQ29udGVudENoaWxkKE5nQ29udHJvbCwgeyBzdGF0aWM6IGZhbHNlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOZ0NvbnRyb2wpXG5dLCBUZXh0Qm94Q29udGFpbmVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJmb3JtQ29udHJvbFwiLCB2b2lkIDApO1xuVGV4dEJveENvbnRhaW5lckNvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgIENvbXBvbmVudCh7XG4gICAgICAgIHNlbGVjdG9yOiAna2VuZG8tdGV4dGJveC1jb250YWluZXInLFxuICAgICAgICB0ZW1wbGF0ZTogYFxuICAgICAgICA8bmctY29udGVudD48L25nLWNvbnRlbnQ+XG4gICAgICAgIDxsYWJlbCAqbmdJZj1cImZsb2F0aW5nTGFiZWxcIiBbZm9yXT1cImlkXCIgY2xhc3M9XCJrLWxhYmVsXCI+e3sgZmxvYXRpbmdMYWJlbCB9fTwvbGFiZWw+XG4gICAgYFxuICAgIH0pLFxuICAgIF9fcGFyYW0oMywgT3B0aW9uYWwoKSksIF9fcGFyYW0oMywgSW5qZWN0KFJUTCkpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbRWxlbWVudFJlZixcbiAgICAgICAgUmVuZGVyZXIyLFxuICAgICAgICBDaGFuZ2VEZXRlY3RvclJlZiwgQm9vbGVhbl0pXG5dLCBUZXh0Qm94Q29udGFpbmVyQ29tcG9uZW50KTtcblxudmFyIFRleHRCb3hEaXJlY3RpdmVfMTtcbi8qKlxuICogUmVwcmVzZW50cyB0aGUgW0tlbmRvIFVJIFRleHRCb3ggZGlyZWN0aXZlXSh7JSBzbHVnIG92ZXJ2aWV3X3RleHRib3ggJX0pIGZvciB0aGUgSW5wdXRzIGNvbXBvbmVudHMgZm9yIEFuZ3VsYXIuXG4gKiBVc2VkIHRvIHN0eWxlIHRoZSB0ZXh0Ym94IG9mIGFueSBgaW5wdXRgIGVsZW1lbnQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzLW5vLXJ1blxuICogPGlucHV0IGtlbmRvVGV4dEJveCAvPlxuICogPGlucHV0IGtlbmRvVGV4dEJveCB0eXBlPVwiZW1haWxcIiAvPlxuICogPGlucHV0IGtlbmRvVGV4dEJveCB0eXBlPVwicGFzc3dvcmRcIiAvPlxuICogYGBgXG4gKi9cbmxldCBUZXh0Qm94RGlyZWN0aXZlID0gVGV4dEJveERpcmVjdGl2ZV8xID0gY2xhc3MgVGV4dEJveERpcmVjdGl2ZSB7XG4gICAgY29uc3RydWN0b3IocmVuZGVyZXIsIGlucHV0RWxlbWVudCwgbmdab25lKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQgPSBpbnB1dEVsZW1lbnQ7XG4gICAgICAgIHRoaXMubmdab25lID0gbmdab25lO1xuICAgICAgICB0aGlzLmhvc3RDbGFzcyA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uRm9jdXMgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uQmx1ciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBoaWRkZW5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25WYWx1ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBoaWRkZW5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYXV0b0ZpbGxTdGFydCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBoaWRkZW5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYXV0b0ZpbGxFbmQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0gW107XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzZXQgdmFsdWUodGV4dCkge1xuICAgICAgICBpZiAoIXRoaXMuaW5wdXRFbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQubmF0aXZlRWxlbWVudC52YWx1ZSA9ICh0ZXh0ID09PSB1bmRlZmluZWQgfHwgdGV4dCA9PT0gbnVsbCkgPyAnJyA6IHRleHQ7XG4gICAgICAgIHRoaXMub25WYWx1ZUNoYW5nZS5lbWl0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlucHV0RWxlbWVudC5uYXRpdmVFbGVtZW50LnZhbHVlO1xuICAgIH1cbiAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlucHV0RWxlbWVudC5uYXRpdmVFbGVtZW50LmlkO1xuICAgIH1cbiAgICBzZXQgaWQoaWQpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRBdHRyaWJ1dGUodGhpcy5pbnB1dEVsZW1lbnQubmF0aXZlRWxlbWVudCwgJ2lkJywgaWQpO1xuICAgIH1cbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gdGhpcy5pbnB1dEVsZW1lbnQubmF0aXZlRWxlbWVudDtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSBbXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmxpc3RlbihpbnB1dCwgJ2ZvY3VzJywgKCkgPT4gdGhpcy5vbkZvY3VzLmVtaXQoKSksXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmxpc3RlbihpbnB1dCwgJ2JsdXInLCAoKSA9PiB0aGlzLm9uQmx1ci5lbWl0KCkpXG4gICAgICAgIF07XG4gICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIubGlzdGVuKGlucHV0LCAnYW5pbWF0aW9uc3RhcnQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlLmFuaW1hdGlvbk5hbWUgPT09ICdhdXRvRmlsbFN0YXJ0Jykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmF1dG9GaWxsU3RhcnQuZW1pdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChlLmFuaW1hdGlvbk5hbWUgPT09ICdhdXRvRmlsbEVuZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdXRvRmlsbEVuZC5lbWl0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMuZm9yRWFjaChsaXN0ZW5lciA9PiBsaXN0ZW5lcigpKTtcbiAgICB9XG59O1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmstdGV4dGJveCcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgVGV4dEJveERpcmVjdGl2ZS5wcm90b3R5cGUsIFwiaG9zdENsYXNzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbU3RyaW5nXSlcbl0sIFRleHRCb3hEaXJlY3RpdmUucHJvdG90eXBlLCBcInZhbHVlXCIsIG51bGwpO1xuVGV4dEJveERpcmVjdGl2ZSA9IFRleHRCb3hEaXJlY3RpdmVfMSA9IF9fZGVjb3JhdGUoW1xuICAgIERpcmVjdGl2ZSh7XG4gICAgICAgIHNlbGVjdG9yOiAnaW5wdXRba2VuZG9UZXh0Qm94XScsXG4gICAgICAgIHByb3ZpZGVyczogW3tcbiAgICAgICAgICAgICAgICBwcm92aWRlOiBLZW5kb0lucHV0LFxuICAgICAgICAgICAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IFRleHRCb3hEaXJlY3RpdmVfMSlcbiAgICAgICAgICAgIH1dXG4gICAgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtSZW5kZXJlcjIsXG4gICAgICAgIEVsZW1lbnRSZWYsXG4gICAgICAgIE5nWm9uZV0pXG5dLCBUZXh0Qm94RGlyZWN0aXZlKTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IGNyZWF0ZU1heFZhbGlkYXRvciA9IChtYXhWYWx1ZSkgPT4ge1xuICAgIHJldHVybiAoYykgPT4ge1xuICAgICAgICBpZiAoIWlzUHJlc2VudChtYXhWYWx1ZSkgfHwgIWlzUHJlc2VudChjLnZhbHVlKSB8fCBjLnZhbHVlIDw9IG1heFZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWF4RXJyb3I6IHtcbiAgICAgICAgICAgICAgICBtYXhWYWx1ZTogbWF4VmFsdWUsXG4gICAgICAgICAgICAgICAgdmFsdWU6IGMudmFsdWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9O1xufTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IGNyZWF0ZU1pblZhbGlkYXRvciA9IChtaW5WYWx1ZSkgPT4ge1xuICAgIHJldHVybiAoYykgPT4ge1xuICAgICAgICBpZiAoIWlzUHJlc2VudChtaW5WYWx1ZSkgfHwgIWlzUHJlc2VudChjLnZhbHVlKSB8fCBjLnZhbHVlID49IG1pblZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWluRXJyb3I6IHtcbiAgICAgICAgICAgICAgICBtaW5WYWx1ZTogbWluVmFsdWUsXG4gICAgICAgICAgICAgICAgdmFsdWU6IGMudmFsdWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9O1xufTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IE1JTl9ET0NfTElOSyA9ICdodHRwOi8vd3d3LnRlbGVyaWsuY29tL2tlbmRvLWFuZ3VsYXItdWkvY29tcG9uZW50cy9pbnB1dHMvYXBpL051bWVyaWNUZXh0Qm94Q29tcG9uZW50LyN0b2MtbWluJztcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBNQVhfRE9DX0xJTksgPSAnaHR0cDovL3d3dy50ZWxlcmlrLmNvbS9rZW5kby1hbmd1bGFyLXVpL2NvbXBvbmVudHMvaW5wdXRzL2FwaS9OdW1lcmljVGV4dEJveENvbXBvbmVudC8jdG9jLW1heCc7XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgUE9JTlQgPSBcIi5cIjtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBJTklUSUFMX1NQSU5fREVMQVkgPSA1MDA7XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgU1BJTl9ERUxBWSA9IDUwO1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IEVYUE9ORU5UX1JFR0VYID0gL1tlRV1bXFwtK10/KFswLTldKykvO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgbnVtZXJpY1JlZ2V4ID0gKG9wdGlvbnMpID0+IHtcbiAgICBjb25zdCB7IGF1dG9Db3JyZWN0LCBkZWNpbWFscywgbWluIH0gPSBvcHRpb25zO1xuICAgIGxldCBzZXBhcmF0b3IgPSBvcHRpb25zLnNlcGFyYXRvcjtcbiAgICBpZiAoc2VwYXJhdG9yID09PSBQT0lOVCkge1xuICAgICAgICBzZXBhcmF0b3IgPSAnXFxcXCcgKyBzZXBhcmF0b3I7XG4gICAgfVxuICAgIGNvbnN0IHNpZ25QYXR0ZXJuID0gYXV0b0NvcnJlY3QgJiYgbWluICE9PSBudWxsICYmIG1pbiA+PSAwID8gJycgOiAnLT8nO1xuICAgIGxldCBudW1iZXJQYXR0ZXJuO1xuICAgIGlmIChkZWNpbWFscyA9PT0gMCkge1xuICAgICAgICBudW1iZXJQYXR0ZXJuID0gJ1xcXFxkKic7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBudW1iZXJQYXR0ZXJuID0gYCg/Oig/OlxcXFxkKygke3NlcGFyYXRvcn1cXFxcZCopPyl8KD86JHtzZXBhcmF0b3J9XFxcXGQqKSk/YDtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYF4ke3NpZ25QYXR0ZXJufSR7bnVtYmVyUGF0dGVybn0kYCk7XG59O1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IGRlY2ltYWxQYXJ0ID0gKHZhbHVlKSA9PiB7XG4gICAgcmV0dXJuIHZhbHVlID49IDAgPyBNYXRoLmZsb29yKHZhbHVlKSA6IE1hdGguY2VpbCh2YWx1ZSk7XG59O1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IG5vb3AgPSAoXykgPT4geyB9OyAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lOm5vLWVtcHR5XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgZGVmaW5lZCA9ICh2YWx1ZSkgPT4ge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgIT09ICd1bmRlZmluZWQnO1xufTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBpc051bWJlciA9ICh2YWx1ZSkgPT4ge1xuICAgIHJldHVybiAhaXNOYU4odmFsdWUpICYmIHZhbHVlICE9PSBudWxsO1xufTtcbi8qKlxuICogQGhpZGRlblxuICovXG5mdW5jdGlvbiBwYWQodmFsdWUsIGRpZ2l0cykge1xuICAgIGNvbnN0IGNvdW50ID0gZGlnaXRzIC0gU3RyaW5nKHZhbHVlKS5sZW5ndGg7XG4gICAgbGV0IHJlc3VsdCA9IHZhbHVlO1xuICAgIGlmIChjb3VudCA+IDApIHtcbiAgICAgICAgY29uc3QgcGFkU3RyaW5nID0gbmV3IEFycmF5KGNvdW50ICsgMSkuam9pbihcIjBcIik7XG4gICAgICAgIHJlc3VsdCA9IHBhcnNlRmxvYXQodmFsdWUgKyBwYWRTdHJpbmcpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IGdldERlbHRhRnJvbU1vdXNlV2hlZWwgPSAoZSkgPT4ge1xuICAgIGxldCBkZWx0YSA9IDA7XG4gICAgaWYgKGUud2hlZWxEZWx0YSkge1xuICAgICAgICBkZWx0YSA9IGUud2hlZWxEZWx0YSAvIDEyMDtcbiAgICAgICAgZGVsdGEgPSBkZWx0YSA+IDAgPyBNYXRoLmNlaWwoZGVsdGEpIDogTWF0aC5mbG9vcihkZWx0YSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGUuZGV0YWlsKSB7XG4gICAgICAgIGRlbHRhID0gTWF0aC5yb3VuZCgtZS5kZXRhaWwgLyAzKTtcbiAgICB9XG4gICAgcmV0dXJuIGRlbHRhO1xufTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBnZXRDYXJldFBvc2l0aW9uID0gKGVsZW1lbnQpID0+IGVsZW1lbnQuc2VsZWN0aW9uU3RhcnQ7XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgZXh0cmFjdFNpZ25pZmljYW50TnVtZXJpY0NoYXJzID0gKGZvcm1hdHRlZFN0cmluZywgc2VwYXJhdG9yKSA9PiB7XG4gICAgY29uc3Qgc2lnbmlmaWNhbnRDaGFyYWN0ZXJzID0gYCR7c2VwYXJhdG9yfTAxMjM0NTY3ODktYDtcbiAgICByZXR1cm4gZm9ybWF0dGVkU3RyaW5nLnNwbGl0KCcnKS5yZWR1Y2UoKGFjYywgY3VycikgPT4gc2lnbmlmaWNhbnRDaGFyYWN0ZXJzLmluY2x1ZGVzKGN1cnIpID8gKythY2MgOiBhY2MsIDApO1xufTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbnZhciBBcnJvd0RpcmVjdGlvbjtcbihmdW5jdGlvbiAoQXJyb3dEaXJlY3Rpb24pIHtcbiAgICBBcnJvd0RpcmVjdGlvbltBcnJvd0RpcmVjdGlvbltcIkRvd25cIl0gPSAtMV0gPSBcIkRvd25cIjtcbiAgICBBcnJvd0RpcmVjdGlvbltBcnJvd0RpcmVjdGlvbltcIk5vbmVcIl0gPSAwXSA9IFwiTm9uZVwiO1xuICAgIEFycm93RGlyZWN0aW9uW0Fycm93RGlyZWN0aW9uW1wiVXBcIl0gPSAxXSA9IFwiVXBcIjtcbn0pKEFycm93RGlyZWN0aW9uIHx8IChBcnJvd0RpcmVjdGlvbiA9IHt9KSk7XG5cbnZhciBOdW1lcmljVGV4dEJveENvbXBvbmVudF8xO1xuY29uc3QgUEFSU0FCTEVfT1BUSU9OUyA9IFsnbWluJywgJ21heCcsICdzdGVwJywgJ2RlY2ltYWxzJ107XG5jb25zdCBQQVJTQUJMRV9ERUZBVUxUUyA9IHtcbiAgICBkZWNpbWFsczogbnVsbCxcbiAgICBtYXg6IG51bGwsXG4gICAgbWluOiBudWxsLFxuICAgIHN0ZXA6IDFcbn07XG5jb25zdCBGT0NVU0VEJDEgPSAnay1zdGF0ZS1mb2N1c2VkJztcbmNvbnN0IEZPUk1BVFRFRF9WQUxVRSA9ICdrLWZvcm1hdHRlZC12YWx1ZSc7XG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIFtLZW5kbyBVSSBOdW1lcmljVGV4dEJveCBjb21wb25lbnQgZm9yIEFuZ3VsYXJdKHslIHNsdWcgb3ZlcnZpZXdfbnVtZXJpY3RleHRib3ggJX0pLlxuICovXG5sZXQgTnVtZXJpY1RleHRCb3hDb21wb25lbnQgPSBOdW1lcmljVGV4dEJveENvbXBvbmVudF8xID0gY2xhc3MgTnVtZXJpY1RleHRCb3hDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKGludGwsIHJlbmRlcmVyLCBsb2NhbGl6YXRpb25TZXJ2aWNlLCBpbmplY3Rvciwgbmdab25lLCBjaGFuZ2VEZXRlY3RvciwgaG9zdEVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5pbnRsID0gaW50bDtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLmxvY2FsaXphdGlvblNlcnZpY2UgPSBsb2NhbGl6YXRpb25TZXJ2aWNlO1xuICAgICAgICB0aGlzLmluamVjdG9yID0gaW5qZWN0b3I7XG4gICAgICAgIHRoaXMubmdab25lID0gbmdab25lO1xuICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yID0gY2hhbmdlRGV0ZWN0b3I7XG4gICAgICAgIHRoaXMuaG9zdEVsZW1lbnQgPSBob3N0RWxlbWVudDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBoaWRkZW5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZm9jdXNhYmxlSWQgPSBgay0ke2d1aWQoKX1gO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBOdW1lcmljVGV4dEJveCBpcyBkaXNhYmxlZCAoW3NlZSBleGFtcGxlXSh7JSBzbHVnIGRpc2FibGVkX251bWVyaWN0ZXh0Ym94ICV9KSkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIE51bWVyaWNUZXh0Qm94IGlzIGluIGl0cyByZWFkLW9ubHkgc3RhdGUgKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyByZWFkb25seV9udW1lcmljdGV4dGJveCAlfSkpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZWFkb25seSA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyB0aGUgdGl0bGUgb2YgdGhlIGBpbnB1dGAgZWxlbWVudCBvZiB0aGUgTnVtZXJpY1RleHRCb3guXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRpdGxlID0gJyc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgd2hldGhlciB0aGUgdmFsdWUgd2lsbCBiZSBhdXRvLWNvcnJlY3RlZCBiYXNlZCBvbiB0aGUgbWluaW11bSBhbmQgbWF4aW11bSB2YWx1ZXNcbiAgICAgICAgICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBwcmVjaXNpb25fbnVtZXJpY3RleHRib3ggJX0pKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYXV0b0NvcnJlY3QgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyB0aGUgbnVtYmVyIG9mIGRlY2ltYWxzIHRoYXQgdGhlIHVzZXIgY2FuIGVudGVyIHdoZW4gdGhlIGlucHV0IGlzIGZvY3VzZWRcbiAgICAgICAgICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBwcmVjaXNpb25fbnVtZXJpY3RleHRib3ggJX0pKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGVjaW1hbHMgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIHRoZSB2YWx1ZSB0aGF0IGlzIHVzZWQgdG8gaW5jcmVtZW50IG9yIGRlY3JlbWVudCB0aGUgY29tcG9uZW50IHZhbHVlXG4gICAgICAgICAqIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgcHJlZGVmaW5lZHN0ZXBzX251bWVyaWN0ZXh0Ym94ICV9KSkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnN0ZXAgPSAxO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIHdoZXRoZXIgdGhlICoqVXAqKiBhbmQgKipEb3duKiogc3BpbiBidXR0b25zIHdpbGwgYmUgcmVuZGVyZWRcbiAgICAgICAgICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBzcGluYnV0dG9uc19udW1lcmljdGV4dGJveCAlfSkpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zcGlubmVycyA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIGJ1aWx0LWluIG1pbmltdW0gb3IgbWF4aW11bSB2YWxpZGF0b3JzIGFyZSBlbmZvcmNlZCB3aGVuIGEgZm9ybSBpcyB2YWxpZGF0ZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqID4gVGhlIDQuMi4wIEFuZ3VsYXIgdmVyc2lvbiBpbnRyb2R1Y2VzIHRoZSBgbWluYCBhbmQgYG1heGAgdmFsaWRhdGlvbiBkaXJlY3RpdmVzLiBBcyBhIHJlc3VsdCwgZXZlbiBpZiB5b3Ugc2V0IGByYW5nZVZhbGlkYXRpb25gXG4gICAgICAgICAqIHRvIGBmYWxzZWAsIHRoZSBidWlsdC1pbiBBbmd1bGFyIHZhbGlkYXRvcnMgd2lsbCBiZSBleGVjdXRlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmFuZ2VWYWxpZGF0aW9uID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyB0aGUgW3RhYmluZGV4XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0dsb2JhbF9hdHRyaWJ1dGVzL3RhYmluZGV4KSBvZiB0aGUgY29tcG9uZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50YWJpbmRleCA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIHZhbHVlIG9mIHRoZSBOdW1lcmljVGV4dEJveCB3aWxsIGJlIGNoYW5nZWQgdmlhIHNjcm9sbGluZy4gRGVmYXVsdHMgdG8gYHRydWVgLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVmYXVsdCB0cnVlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNoYW5nZVZhbHVlT25TY3JvbGwgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSB3aG9sZSB2YWx1ZSB3aWxsIGJlIHNlbGVjdGVkIHdoZW4gdGhlIE51bWVyaWNUZXh0Qm94IGlzIGNsaWNrZWQuIERlZmF1bHRzIHRvIGB0cnVlYC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2VsZWN0T25Gb2N1cyA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgdGhlIHZhbHVlIG9mIHRoZSBOdW1lcmljVGV4dEJveFxuICAgICAgICAgKiAoW3NlZSBleGFtcGxlXSh7JSBzbHVnIGZvcm1hdHNfbnVtZXJpY3RleHRib3ggJX0pKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudmFsdWUgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSB1c2VyIHNlbGVjdHMgYSBuZXcgdmFsdWUgKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBvdmVydmlld19udW1lcmljdGV4dGJveCAlfSN0b2MtZXZlbnRzKSkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSB1c2VyIGZvY3VzZXMgdGhlIGBpbnB1dGAgZWxlbWVudCAoW3NlZSBleGFtcGxlXSh7JSBzbHVnIG92ZXJ2aWV3X251bWVyaWN0ZXh0Ym94ICV9I3RvYy1ldmVudHMpKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25Gb2N1cyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgYGlucHV0YCBlbGVtZW50IGdldHMgYmx1cnJlZCAoW3NlZSBleGFtcGxlXSh7JSBzbHVnIG92ZXJ2aWV3X251bWVyaWN0ZXh0Ym94ICV9I3RvYy1ldmVudHMpKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25CbHVyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGhpZGRlblxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5BcnJvd0RpcmVjdGlvbiA9IEFycm93RGlyZWN0aW9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGhpZGRlblxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hcnJvd0RpcmVjdGlvbiA9IEFycm93RGlyZWN0aW9uLk5vbmU7XG4gICAgICAgIHRoaXMuaW5wdXRWYWx1ZSA9ICcnO1xuICAgICAgICB0aGlzLm1pblZhbGlkYXRlRm4gPSBub29wO1xuICAgICAgICB0aGlzLm1heFZhbGlkYXRlRm4gPSBub29wO1xuICAgICAgICB0aGlzLl9mb3JtYXQgPSBcIm4yXCI7XG4gICAgICAgIHRoaXMuaXNQYXN0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tb3VzZURvd24gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5uZ0NoYW5nZSA9IG5vb3A7XG4gICAgICAgIHRoaXMubmdUb3VjaGVkID0gbm9vcDtcbiAgICAgICAgdGhpcy5uZ1ZhbGlkYXRvckNoYW5nZSA9IG5vb3A7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmluY3JlYXNlUHJlc3MgPSAoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hcnJvd1ByZXNzKEFycm93RGlyZWN0aW9uLlVwLCBlKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBoaWRkZW5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGVjcmVhc2VQcmVzcyA9IChlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFycm93UHJlc3MoQXJyb3dEaXJlY3Rpb24uRG93biwgZSk7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlbGVhc2VBcnJvdyA9ICgpID0+IHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnNwaW5UaW1lb3V0KTtcbiAgICAgICAgICAgIGlmICh0aGlzLmFycm93RGlyZWN0aW9uICE9PSBBcnJvd0RpcmVjdGlvbi5Ob25lKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcnJvd0RpcmVjdGlvbiA9IEFycm93RGlyZWN0aW9uLk5vbmU7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3Rvci5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhhbmRsZVBhc3RlID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc1Bhc3RlZCA9IHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhhbmRsZUlucHV0ID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSB0aGlzLm51bWVyaWNJbnB1dC5uYXRpdmVFbGVtZW50O1xuICAgICAgICAgICAgbGV0IHsgc2VsZWN0aW9uU3RhcnQsIHNlbGVjdGlvbkVuZCwgdmFsdWU6IGlucHV0VmFsdWUgfSA9IGlucHV0O1xuICAgICAgICAgICAgaWYgKHRoaXMucHJlc3NlZEtleSA9PT0gS2V5cy5OdW1wYWREZWNpbWFsKSB7XG4gICAgICAgICAgICAgICAgaW5wdXRWYWx1ZSA9IHRoaXMucmVwbGFjZU51bXBhZERvdFZhbHVlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc1Bhc3RlZCkge1xuICAgICAgICAgICAgICAgIGlucHV0VmFsdWUgPSB0aGlzLmZvcm1hdElucHV0VmFsdWUodGhpcy5pbnRsLnBhcnNlTnVtYmVyKGlucHV0VmFsdWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5pc1ZhbGlkKGlucHV0VmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQudmFsdWUgPSB0aGlzLmlucHV0VmFsdWU7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3Rpb24oc2VsZWN0aW9uU3RhcnQgLSAxLCBzZWxlY3Rpb25FbmQgLSAxKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwYXJzZWRWYWx1ZSA9IHRoaXMuaW50bC5wYXJzZU51bWJlcihpbnB1dFZhbHVlKTtcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IHRoaXMucmVzdHJpY3REZWNpbWFscyhwYXJzZWRWYWx1ZSk7XG4gICAgICAgICAgICBpZiAodGhpcy5hdXRvQ29ycmVjdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbWl0ZWQgPSB0aGlzLmxpbWl0SW5wdXRWYWx1ZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBsaW1pdGVkLnZhbHVlO1xuICAgICAgICAgICAgICAgIHNlbGVjdGlvblN0YXJ0ID0gbGltaXRlZC5zZWxlY3Rpb25TdGFydDtcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25FbmQgPSBsaW1pdGVkLnNlbGVjdGlvbkVuZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYXJzZWRWYWx1ZSAhPT0gdmFsdWUgfHwgdGhpcy5oYXNUcmFpbGluZ1plcm9zKGlucHV0VmFsdWUpIHx8ICF0aGlzLmZvY3VzZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldElucHV0VmFsdWUodmFsdWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0aW9uKHNlbGVjdGlvblN0YXJ0LCBzZWxlY3Rpb25FbmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dFZhbHVlID0gaW5wdXRWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzUGFzdGVkKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQudmFsdWUgPSB0aGlzLmlucHV0VmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlKHZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNTZWxlY3Rpb24gPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5pc1Bhc3RlZCA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQGhpZGRlblxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oYW5kbGVEcmFnRW50ZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZm9jdXNlZCAmJiAhdGhpcy5pc0Rpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRJbnB1dFZhbHVlKHRoaXMudmFsdWUsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQGhpZGRlblxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oYW5kbGVNb3VzZURvd24gPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm1vdXNlRG93biA9IHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhhbmRsZUZvY3VzID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmZvY3VzZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc0Rpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNob3VsZFNlbGVjdEFsbCA9IHRoaXMuc2VsZWN0T25Gb2N1cyB8fCAhdGhpcy5tb3VzZURvd247XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaG91bGRTZWxlY3RBbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RBbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2FyZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tb3VzZURvd24gPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChoYXNPYnNlcnZlcnModGhpcy5vbkZvY3VzKSkge1xuICAgICAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25Gb2N1cy5lbWl0KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhhbmRsZUJsdXIgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yLm1hcmtGb3JDaGVjaygpO1xuICAgICAgICAgICAgdGhpcy5mb2N1c2VkID0gZmFsc2U7XG4gICAgICAgICAgICAvL2JsdXIgaXMgdGhyb3duIGJlZm9yZSBpbnB1dCB3aGVuIGRyYWdnaW5nIHRoZSBpbnB1dCB0ZXh0IGluIElFXG4gICAgICAgICAgICBpZiAodGhpcy5pbnB1dFZhbHVlICE9PSB0aGlzLmVsZW1lbnRWYWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlSW5wdXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2V0SW5wdXRWYWx1ZSgpO1xuICAgICAgICAgICAgaWYgKGhhc09ic2VydmVycyh0aGlzLm9uQmx1cikgfHwgcmVxdWlyZXNab25lT25CbHVyKHRoaXMuY29udHJvbCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5nVG91Y2hlZCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQmx1ci5lbWl0KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhhbmRsZUtleURvd24gPSAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNEaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBzdGVwO1xuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gS2V5cy5BcnJvd0Rvd24pIHtcbiAgICAgICAgICAgICAgICBzdGVwID0gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlLmtleUNvZGUgPT09IEtleXMuQXJyb3dVcCkge1xuICAgICAgICAgICAgICAgIHN0ZXAgPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0ZXAgJiYgdGhpcy5zdGVwKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkU3RlcChzdGVwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gdGhpcy5udW1lcmljSW5wdXQubmF0aXZlRWxlbWVudDtcbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNTZWxlY3Rpb24gPSB7XG4gICAgICAgICAgICAgICAgZW5kOiBpbnB1dC5zZWxlY3Rpb25FbmQsXG4gICAgICAgICAgICAgICAgc3RhcnQ6IGlucHV0LnNlbGVjdGlvblN0YXJ0XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5wcmVzc2VkS2V5ID0gZS5rZXlDb2RlO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQGhpZGRlblxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oYW5kbGVXaGVlbCA9IChlKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5mb2N1c2VkICYmICF0aGlzLmlzRGlzYWJsZWQgJiYgdGhpcy5jaGFuZ2VWYWx1ZU9uU2Nyb2xsKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlbHRhID0gZ2V0RGVsdGFGcm9tTW91c2VXaGVlbChlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFN0ZXAoZGVsdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB2YWxpZGF0ZVBhY2thZ2UocGFja2FnZU1ldGFkYXRhKTtcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBsb2NhbGl6YXRpb25TZXJ2aWNlLnJ0bCA/ICdydGwnIDogJ2x0cic7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB0aGUgbnVtYmVyIGZvcm1hdCB3aGljaCBpcyB1c2VkIHdoZW4gdGhlIE51bWVyaWNUZXh0Qm94IGlzIG5vdCBmb2N1c2VkXG4gICAgICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBmb3JtYXRzX251bWVyaWN0ZXh0Ym94ICV9KSkuXG4gICAgICogSWYgYGZvcm1hdGAgaXMgc2V0IHRvIGBudWxsYCBvciBgdW5kZWZpbmVkYCwgdGhlIGRlZmF1bHQgZm9ybWF0IHdpbGwgYmUgdXNlZC5cbiAgICAgKi9cbiAgICBnZXQgZm9ybWF0KCkge1xuICAgICAgICBjb25zdCBmb3JtYXQgPSB0aGlzLl9mb3JtYXQ7XG4gICAgICAgIHJldHVybiBmb3JtYXQgIT09IG51bGwgJiYgZm9ybWF0ICE9PSB1bmRlZmluZWQgPyBmb3JtYXQgOiAnbjInO1xuICAgIH1cbiAgICBzZXQgZm9ybWF0KHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2Zvcm1hdCA9IHZhbHVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgc2V0IHRhYkluZGV4KHRhYkluZGV4KSB7XG4gICAgICAgIHRoaXMudGFiaW5kZXggPSB0YWJJbmRleDtcbiAgICB9XG4gICAgZ2V0IHRhYkluZGV4KCkge1xuICAgICAgICByZXR1cm4gdGhpcy50YWJpbmRleDtcbiAgICB9XG4gICAgZ2V0IHdpZGdldENsYXNzZXMoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gdGhpcy5sb2NhbGl6YXRpb25TZXJ2aWNlXG4gICAgICAgICAgICAuY2hhbmdlc1xuICAgICAgICAgICAgLnN1YnNjcmliZSgoeyBydGwgfSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBydGwgPyAncnRsJyA6ICdsdHInO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmFkZCh0aGlzLmludGwuY2hhbmdlcy5zdWJzY3JpYmUodGhpcy5pbnRsQ2hhbmdlLmJpbmQodGhpcykpKTtcbiAgICAgICAgaWYgKHRoaXMuaG9zdEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQXR0cmlidXRlKHRoaXMuaG9zdEVsZW1lbnQubmF0aXZlRWxlbWVudCwgXCJ0YWJpbmRleFwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbnRyb2wgPSB0aGlzLmluamVjdG9yLmdldChOZ0NvbnRyb2wsIG51bGwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlcykge1xuICAgICAgICBpZiAoYW55Q2hhbmdlZChQQVJTQUJMRV9PUFRJT05TLCBjaGFuZ2VzLCBmYWxzZSkpIHtcbiAgICAgICAgICAgIHRoaXMucGFyc2VPcHRpb25zKFBBUlNBQkxFX09QVElPTlMuZmlsdGVyKG9wdGlvbiA9PiBjaGFuZ2VzW29wdGlvbl0pKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZlcmlmeVNldHRpbmdzKCk7XG4gICAgICAgIGlmIChhbnlDaGFuZ2VkKFsnbWluJywgJ21heCcsICdyYW5nZVZhbGlkYXRpb24nXSwgY2hhbmdlcywgZmFsc2UpKSB7XG4gICAgICAgICAgICB0aGlzLm1pblZhbGlkYXRlRm4gPSB0aGlzLnJhbmdlVmFsaWRhdGlvbiA/IGNyZWF0ZU1pblZhbGlkYXRvcih0aGlzLm1pbikgOiBub29wO1xuICAgICAgICAgICAgdGhpcy5tYXhWYWxpZGF0ZUZuID0gdGhpcy5yYW5nZVZhbGlkYXRpb24gPyBjcmVhdGVNYXhWYWxpZGF0b3IodGhpcy5tYXgpIDogbm9vcDtcbiAgICAgICAgICAgIHRoaXMubmdWYWxpZGF0b3JDaGFuZ2UoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYW55Q2hhbmdlZChbJ2F1dG9Db3JyZWN0JywgJ2RlY2ltYWxzJywgJ21pbiddLCBjaGFuZ2VzKSkge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMubnVtZXJpY1JlZ2V4O1xuICAgICAgICB9XG4gICAgICAgIGlmIChhbnlDaGFuZ2VkKFsndmFsdWUnLCAnZm9ybWF0J10sIGNoYW5nZXMsIGZhbHNlKSkge1xuICAgICAgICAgICAgdGhpcy52ZXJpZnlWYWx1ZSh0aGlzLnZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnJlc3RyaWN0TW9kZWxWYWx1ZSh0aGlzLnZhbHVlKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5mb2N1c2VkIHx8ICh0aGlzLmludGwucGFyc2VOdW1iZXIodGhpcy5lbGVtZW50VmFsdWUpICE9PSB0aGlzLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0SW5wdXRWYWx1ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3Vic2NyaXB0aW9ucykge1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuc3BpblRpbWVvdXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgdmFsaWRhdGUoY29udHJvbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW5WYWxpZGF0ZUZuKGNvbnRyb2wpIHx8IHRoaXMubWF4VmFsaWRhdGVGbihjb250cm9sKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHJlZ2lzdGVyT25WYWxpZGF0b3JDaGFuZ2UoZm4pIHtcbiAgICAgICAgdGhpcy5uZ1ZhbGlkYXRvckNoYW5nZSA9IGZuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgd3JpdGVWYWx1ZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnZlcmlmeVZhbHVlKHZhbHVlKTtcbiAgICAgICAgbGV0IHJlc3RyaWN0ZWRWYWx1ZSA9IHRoaXMucmVzdHJpY3RNb2RlbFZhbHVlKHZhbHVlKTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHJlc3RyaWN0ZWRWYWx1ZTtcbiAgICAgICAgdGhpcy5zZXRJbnB1dFZhbHVlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICByZWdpc3Rlck9uQ2hhbmdlKGZuKSB7XG4gICAgICAgIHRoaXMubmdDaGFuZ2UgPSBmbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHJlZ2lzdGVyT25Ub3VjaGVkKGZuKSB7XG4gICAgICAgIHRoaXMubmdUb3VjaGVkID0gZm47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKiBDYWxsZWQgd2hlbiB0aGUgc3RhdHVzIG9mIHRoZSBjb21wb25lbnQgY2hhbmdlcyB0byBvciBmcm9tIGBkaXNhYmxlZGAuXG4gICAgICogRGVwZW5kaW5nIG9uIHRoZSB2YWx1ZSwgaXQgZW5hYmxlcyBvciBkaXNhYmxlcyB0aGUgYXBwcm9wcmlhdGUgRE9NIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaXNEaXNhYmxlZFxuICAgICAqL1xuICAgIHNldERpc2FibGVkU3RhdGUoaXNEaXNhYmxlZCkge1xuICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yLm1hcmtGb3JDaGVjaygpO1xuICAgICAgICB0aGlzLmRpc2FibGVkID0gaXNEaXNhYmxlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9jdXNlcyB0aGUgTnVtZXJpY1RleHRCb3guXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYHRzLW5vLXJ1blxuICAgICAqIF9AQ29tcG9uZW50KHtcbiAgICAgKiBzZWxlY3RvcjogJ215LWFwcCcsXG4gICAgICogdGVtcGxhdGU6IGBcbiAgICAgKiAgPGJ1dHRvbiAoY2xpY2spPVwibnVtZXJpY3RleHRib3guZm9jdXMoKVwiPkZvY3VzIE51bWVyaWNUZXh0Qm94PC9idXR0b24+XG4gICAgICogIDxrZW5kby1udW1lcmljdGV4dGJveCAjbnVtZXJpY3RleHRib3g+PC9rZW5kby1udW1lcmljdGV4dGJveD5cbiAgICAgKiBgXG4gICAgICogfSlcbiAgICAgKiBjbGFzcyBBcHBDb21wb25lbnQgeyB9XG4gICAgICogYGBgXG4gICAgICovXG4gICAgZm9jdXMoKSB7XG4gICAgICAgIGludm9rZUVsZW1lbnRNZXRob2QodGhpcy5udW1lcmljSW5wdXQsICdmb2N1cycpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCbHVycyB0aGUgTnVtZXJpY1RleHRCb3guXG4gICAgICovXG4gICAgYmx1cigpIHtcbiAgICAgICAgaW52b2tlRWxlbWVudE1ldGhvZCh0aGlzLm51bWVyaWNJbnB1dCwgJ2JsdXInKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTm90aWZpZXMgdGhlIGBOdW1lcmljVGV4dEJveENvbXBvbmVudGAgdGhhdCB0aGUgaW5wdXQgdmFsdWUgc2hvdWxkIGJlIGNoYW5nZWQuXG4gICAgICogQ2FuIGJlIHVzZWQgdG8gdXBkYXRlIHRoZSBpbnB1dCBhZnRlciBzZXR0aW5nIHRoZSBjb21wb25lbnQgcHJvcGVydGllcyBkaXJlY3RseS5cbiAgICAgKi9cbiAgICBub3RpZnlWYWx1ZUNoYW5nZSgpIHtcbiAgICAgICAgdGhpcy5zZXRJbnB1dFZhbHVlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBnZXQgaW5jcmVtZW50VGl0bGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsaXphdGlvblNlcnZpY2UuZ2V0KCdpbmNyZW1lbnQnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGdldCBkZWNyZW1lbnRUaXRsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxpemF0aW9uU2VydmljZS5nZXQoJ2RlY3JlbWVudCcpO1xuICAgIH1cbiAgICBnZXQgZGVjaW1hbFNlcGFyYXRvcigpIHtcbiAgICAgICAgY29uc3QgbnVtYmVyU3ltYm9scyA9IHRoaXMuaW50bC5udW1iZXJTeW1ib2xzKCk7XG4gICAgICAgIHJldHVybiBudW1iZXJTeW1ib2xzLmRlY2ltYWw7XG4gICAgfVxuICAgIGdldCBlbGVtZW50VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm51bWVyaWNJbnB1dC5uYXRpdmVFbGVtZW50LnZhbHVlO1xuICAgIH1cbiAgICBzZXQgZWxlbWVudFZhbHVlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0UHJvcGVydHkodGhpcy5udW1lcmljSW5wdXQubmF0aXZlRWxlbWVudCwgJ3ZhbHVlJywgdmFsdWUpO1xuICAgIH1cbiAgICBnZXQgZm9jdXNlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNGb2N1c2VkO1xuICAgIH1cbiAgICBnZXQgaGFzRGVjaW1hbHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlY2ltYWxzICE9PSBudWxsICYmIHRoaXMuZGVjaW1hbHMgPj0gMDtcbiAgICB9XG4gICAgc2V0IGZvY3VzZWQodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNGb2N1c2VkICE9PSB2YWx1ZSAmJiB0aGlzLm51bWVyaWNXcmFwKSB7XG4gICAgICAgICAgICBjb25zdCB3cmFwID0gdGhpcy5udW1lcmljV3JhcC5uYXRpdmVFbGVtZW50O1xuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSB0aGlzLm51bWVyaWNJbnB1dC5uYXRpdmVFbGVtZW50O1xuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyh3cmFwLCBGT0NVU0VEJDEpO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc0Rpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3MoaW5wdXQsIEZPUk1BVFRFRF9WQUxVRSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5yZW1vdmVDbGFzcyh3cmFwLCBGT0NVU0VEJDEpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3MoaW5wdXQsIEZPUk1BVFRFRF9WQUxVRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzRm9jdXNlZCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBpc0Rpc2FibGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXNhYmxlZCB8fCB0aGlzLnJlYWRvbmx5O1xuICAgIH1cbiAgICBhcnJvd1ByZXNzKGRpcmVjdGlvbiwgZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmICh0aGlzLmlzRGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW1vYmlsZU9TKSB7XG4gICAgICAgICAgICB0aGlzLmZvY3VzZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmFycm93RGlyZWN0aW9uICE9PSBkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMuYXJyb3dEaXJlY3Rpb24gPSBkaXJlY3Rpb247XG4gICAgICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yLmRldGVjdENoYW5nZXMoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zdGVwKSB7XG4gICAgICAgICAgICB0aGlzLnNwaW4oZGlyZWN0aW9uLCBJTklUSUFMX1NQSU5fREVMQVkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZXRJbnB1dFZhbHVlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlVmFsdWUodmFsdWUpIHtcbiAgICAgICAgaWYgKCFhcmVTYW1lKHRoaXMudmFsdWUsIHZhbHVlKSkge1xuICAgICAgICAgICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgdGhpcy5uZ0NoYW5nZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZUNoYW5nZS5lbWl0KHZhbHVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yLm1hcmtGb3JDaGVjaygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVwbGFjZU51bXBhZERvdFZhbHVlKCkge1xuICAgICAgICBsZXQgdmFsdWUgPSB0aGlzLmlucHV0VmFsdWUgfHwgXCJcIjtcbiAgICAgICAgaWYgKHRoaXMucHJldmlvdXNTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gdGhpcy5udW1lcmljSW5wdXQubmF0aXZlRWxlbWVudDtcbiAgICAgICAgICAgIGNvbnN0IHsgc2VsZWN0aW9uU3RhcnQsIHNlbGVjdGlvbkVuZCB9ID0gaW5wdXQ7XG4gICAgICAgICAgICBjb25zdCB7IHN0YXJ0LCBlbmQgfSA9IHRoaXMucHJldmlvdXNTZWxlY3Rpb247XG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9IHZhbHVlID0gdmFsdWUuc3Vic3RyaW5nKDAsIHN0YXJ0KSArIHRoaXMuZGVjaW1hbFNlcGFyYXRvciArIHZhbHVlLnN1YnN0cmluZyhlbmQpO1xuICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3Rpb24oc2VsZWN0aW9uU3RhcnQsIHNlbGVjdGlvbkVuZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBpc1ZhbGlkKHZhbHVlKSB7XG4gICAgICAgIGlmICghdGhpcy5udW1lcmljUmVnZXgpIHtcbiAgICAgICAgICAgIHRoaXMubnVtZXJpY1JlZ2V4ID0gbnVtZXJpY1JlZ2V4KHtcbiAgICAgICAgICAgICAgICBhdXRvQ29ycmVjdDogdGhpcy5hdXRvQ29ycmVjdCxcbiAgICAgICAgICAgICAgICBkZWNpbWFsczogdGhpcy5kZWNpbWFscyxcbiAgICAgICAgICAgICAgICBtaW46IHRoaXMubWluLFxuICAgICAgICAgICAgICAgIHNlcGFyYXRvcjogdGhpcy5kZWNpbWFsU2VwYXJhdG9yXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5udW1lcmljUmVnZXgudGVzdCh2YWx1ZSk7XG4gICAgfVxuICAgIHNwaW4oc3RlcCwgdGltZW91dCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5zcGluVGltZW91dCk7XG4gICAgICAgIHRoaXMuc3BpblRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNwaW4oc3RlcCwgU1BJTl9ERUxBWSk7XG4gICAgICAgIH0sIHRpbWVvdXQpO1xuICAgICAgICB0aGlzLmFkZFN0ZXAoc3RlcCk7XG4gICAgfVxuICAgIGFkZFN0ZXAoc3RlcCkge1xuICAgICAgICBsZXQgdmFsdWUgPSBhZGQodGhpcy52YWx1ZSB8fCAwLCB0aGlzLnN0ZXAgKiBzdGVwKTtcbiAgICAgICAgdmFsdWUgPSB0aGlzLmxpbWl0VmFsdWUodmFsdWUpO1xuICAgICAgICB2YWx1ZSA9IHRoaXMucmVzdHJpY3REZWNpbWFscyh2YWx1ZSk7XG4gICAgICAgIHRoaXMuc2V0SW5wdXRWYWx1ZSh2YWx1ZSk7XG4gICAgICAgIHRoaXMudXBkYXRlVmFsdWUodmFsdWUpO1xuICAgIH1cbiAgICBzZXRTZWxlY3Rpb24oc3RhcnQsIGVuZCkge1xuICAgICAgICBpZiAodGhpcy5mb2N1c2VkKSB7XG4gICAgICAgICAgICBpbnZva2VFbGVtZW50TWV0aG9kKHRoaXMubnVtZXJpY0lucHV0LCAnc2V0U2VsZWN0aW9uUmFuZ2UnLCBzdGFydCwgZW5kKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsaW1pdFZhbHVlKHZhbHVlKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgaWYgKCF0aGlzLmlzSW5SYW5nZSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIGlmIChpc051bWJlcih0aGlzLm1heCkgJiYgdmFsdWUgPiB0aGlzLm1heCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMubWF4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzTnVtYmVyKHRoaXMubWluKSAmJiB2YWx1ZSA8IHRoaXMubWluKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5taW47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgbGltaXRJbnB1dFZhbHVlKHZhbHVlKSB7XG4gICAgICAgIGxldCB7IHNlbGVjdGlvblN0YXJ0LCBzZWxlY3Rpb25FbmQsIHZhbHVlOiBlbnRlcmVkVmFsdWUgfSA9IHRoaXMubnVtZXJpY0lucHV0Lm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgIGxldCBsaW1pdGVkVmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgbGV0IHNlbGVjdFRvRW5kID0gZmFsc2U7XG4gICAgICAgIGlmICghdGhpcy5pc0luUmFuZ2UodmFsdWUpKSB7XG4gICAgICAgICAgICBjb25zdCBsZW5ndGhDaGFuZ2UgPSBlbnRlcmVkVmFsdWUubGVuZ3RoIC0gU3RyaW5nKHRoaXMuaW5wdXRWYWx1ZSkubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgeyBtaW4sIG1heCB9ID0gdGhpcztcbiAgICAgICAgICAgIGNvbnN0IGhhc01heCA9IGlzTnVtYmVyKG1heCk7XG4gICAgICAgICAgICBjb25zdCBoYXNNaW4gPSBpc051bWJlcihtaW4pO1xuICAgICAgICAgICAgbGV0IHBhZExpbWl0LCByZXBsYWNlTmV4dDtcbiAgICAgICAgICAgIGxldCBjb3JyZWN0ZWRWYWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgaWYgKHNlbGVjdGlvblN0YXJ0ID09PSAwICYmIHRoaXMuaW5wdXRWYWx1ZS5zdWJzdHIoMSkgPT09IGVudGVyZWRWYWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbkVuZDogc2VsZWN0aW9uRW5kLFxuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25TdGFydDogc2VsZWN0aW9uU3RhcnQsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBudWxsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChoYXNNYXggJiYgdmFsdWUgPiBtYXgpIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcGxhY2VOZXh0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBhZExpbWl0ID0gbWF4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGhhc01pbiAmJiB2YWx1ZSA8IG1pbikge1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcGFkTGltaXQgPSBtaW47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXBsYWNlTmV4dCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBhZExpbWl0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFkZGVkVmFsdWUgPSB0aGlzLnRyeVBhZFZhbHVlKHZhbHVlLCBwYWRMaW1pdCk7XG4gICAgICAgICAgICAgICAgaWYgKHBhZGRlZFZhbHVlICYmIGRlY2ltYWxQYXJ0KHZhbHVlKSAhPT0gZGVjaW1hbFBhcnQocGFkTGltaXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvcnJlY3RlZFZhbHVlID0gcGFkZGVkVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdFRvRW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChyZXBsYWNlTmV4dCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlucHV0VmFsdWUgJiYgc2VsZWN0aW9uU3RhcnQgIT09IGVudGVyZWRWYWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29ycmVjdGVkVmFsdWUgPSBwYXJzZUZsb2F0KGVudGVyZWRWYWx1ZS5zdWJzdHIoMCwgc2VsZWN0aW9uU3RhcnQpICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudGVyZWRWYWx1ZS5zdWJzdHIoc2VsZWN0aW9uU3RhcnQgKyBsZW5ndGhDaGFuZ2UpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsaW1pdGVkVmFsdWUgPSB0aGlzLmxpbWl0VmFsdWUoY29ycmVjdGVkVmFsdWUpO1xuICAgICAgICAgICAgc2VsZWN0VG9FbmQgPSAoc2VsZWN0VG9FbmQgfHwgbGltaXRlZFZhbHVlICE9PSBjb3JyZWN0ZWRWYWx1ZSkgJiYgdGhpcy5wcmV2aW91c1NlbGVjdGlvbiAmJlxuICAgICAgICAgICAgICAgICh0aGlzLnByZXZpb3VzU2VsZWN0aW9uLmVuZCAtIHRoaXMucHJldmlvdXNTZWxlY3Rpb24uc3RhcnQgKyBsZW5ndGhDaGFuZ2UpID4gMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2VsZWN0aW9uRW5kOiBzZWxlY3RUb0VuZCA/IFN0cmluZyhsaW1pdGVkVmFsdWUpLmxlbmd0aCA6IHNlbGVjdGlvbkVuZCxcbiAgICAgICAgICAgIHNlbGVjdGlvblN0YXJ0OiBzZWxlY3Rpb25TdGFydCxcbiAgICAgICAgICAgIHZhbHVlOiBsaW1pdGVkVmFsdWVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgdHJ5UGFkVmFsdWUodmFsdWUsIGxpbWl0KSB7XG4gICAgICAgIGNvbnN0IGxpbWl0TGVuZ3RoID0gU3RyaW5nKE1hdGguZmxvb3IobGltaXQpKS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHplcm9QYWRkZWQgPSBwYWQodmFsdWUsIGxpbWl0TGVuZ3RoKTtcbiAgICAgICAgY29uc3QgemVyb1BhZGRlZE5leHQgPSBwYWQodmFsdWUsIGxpbWl0TGVuZ3RoICsgMSk7XG4gICAgICAgIGxldCByZXN1bHQ7XG4gICAgICAgIGlmICh0aGlzLmlzSW5SYW5nZSh6ZXJvUGFkZGVkKSkge1xuICAgICAgICAgICAgcmVzdWx0ID0gemVyb1BhZGRlZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmlzSW5SYW5nZSh6ZXJvUGFkZGVkTmV4dCkpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHplcm9QYWRkZWROZXh0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGlzSW5SYW5nZSh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gIWlzTnVtYmVyKHZhbHVlKSB8fCAoKCFpc051bWJlcih0aGlzLm1pbikgfHwgdGhpcy5taW4gPD0gdmFsdWUpICYmICghaXNOdW1iZXIodGhpcy5tYXgpIHx8IHZhbHVlIDw9IHRoaXMubWF4KSk7XG4gICAgfVxuICAgIHJlc3RyaWN0TW9kZWxWYWx1ZSh2YWx1ZSkge1xuICAgICAgICBsZXQgcmVzdWx0ID0gdGhpcy5yZXN0cmljdERlY2ltYWxzKHZhbHVlLCB0cnVlKTtcbiAgICAgICAgaWYgKHRoaXMuYXV0b0NvcnJlY3QgJiYgdGhpcy5saW1pdFZhbHVlKHJlc3VsdCkgIT09IHJlc3VsdCkge1xuICAgICAgICAgICAgcmVzdWx0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICByZXN0cmljdERlY2ltYWxzKHZhbHVlLCByb3VuZCkge1xuICAgICAgICBsZXQgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgIGlmICh2YWx1ZSAmJiB0aGlzLmhhc0RlY2ltYWxzKSB7XG4gICAgICAgICAgICBjb25zdCBkZWNpbWFscyA9IHRoaXMuZGVjaW1hbHM7XG4gICAgICAgICAgICBjb25zdCBzdHJpbmdWYWx1ZSA9IFN0cmluZyh2YWx1ZSk7XG4gICAgICAgICAgICBpZiAocm91bmQgfHwgRVhQT05FTlRfUkVHRVgudGVzdChzdHJpbmdWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB0b0ZpeGVkUHJlY2lzaW9uKHZhbHVlLCBkZWNpbWFscyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IHN0cmluZ1ZhbHVlLnNwbGl0KFBPSU5UKTtcbiAgICAgICAgICAgICAgICBsZXQgZnJhY3Rpb24gPSBwYXJ0c1sxXTtcbiAgICAgICAgICAgICAgICBpZiAoZnJhY3Rpb24gJiYgZnJhY3Rpb24ubGVuZ3RoID4gZGVjaW1hbHMpIHtcbiAgICAgICAgICAgICAgICAgICAgZnJhY3Rpb24gPSBmcmFjdGlvbi5zdWJzdHIoMCwgZGVjaW1hbHMpO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBwYXJzZUZsb2F0KGAke3BhcnRzWzBdfSR7UE9JTlR9JHtmcmFjdGlvbn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgZm9ybWF0SW5wdXRWYWx1ZSh2YWx1ZSkge1xuICAgICAgICBsZXQgc3RyaW5nVmFsdWUgPSBTdHJpbmcodmFsdWUpO1xuICAgICAgICBjb25zdCBleHBvbmVudE1hdGNoID0gRVhQT05FTlRfUkVHRVguZXhlYyhzdHJpbmdWYWx1ZSk7XG4gICAgICAgIGlmIChleHBvbmVudE1hdGNoKSB7XG4gICAgICAgICAgICBzdHJpbmdWYWx1ZSA9IHZhbHVlLnRvRml4ZWQobGltaXRQcmVjaXNpb24ocGFyc2VJbnQoZXhwb25lbnRNYXRjaFsxXSwgMTApKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cmluZ1ZhbHVlLnJlcGxhY2UoUE9JTlQsIHRoaXMuZGVjaW1hbFNlcGFyYXRvcik7XG4gICAgfVxuICAgIGZvcm1hdFZhbHVlKHZhbHVlLCBmb2N1c2VkKSB7XG4gICAgICAgIGxldCBmb3JtYXR0ZWRWYWx1ZTtcbiAgICAgICAgaWYgKHZhbHVlID09PSBudWxsIHx8ICFkZWZpbmVkKHZhbHVlKSB8fCB2YWx1ZSA9PT0gJycpIHtcbiAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZm9jdXNlZCAmJiAhdGhpcy5yZWFkb25seSkge1xuICAgICAgICAgICAgZm9ybWF0dGVkVmFsdWUgPSB0aGlzLmZvcm1hdElucHV0VmFsdWUodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9ybWF0dGVkVmFsdWUgPSB0aGlzLmludGwuZm9ybWF0TnVtYmVyKHZhbHVlLCB0aGlzLmZvcm1hdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZvcm1hdHRlZFZhbHVlO1xuICAgIH1cbiAgICBzZXRJbnB1dFZhbHVlKHZhbHVlID0gdGhpcy52YWx1ZSwgZm9jdXNlZCA9IHRoaXMuZm9jdXNlZCkge1xuICAgICAgICBjb25zdCBmb3JtYXR0ZWRWYWx1ZSA9IHRoaXMuZm9ybWF0VmFsdWUodmFsdWUsIGZvY3VzZWQpO1xuICAgICAgICB0aGlzLmVsZW1lbnRWYWx1ZSA9IGZvcm1hdHRlZFZhbHVlO1xuICAgICAgICB0aGlzLmlucHV0VmFsdWUgPSBmb3JtYXR0ZWRWYWx1ZTtcbiAgICB9XG4gICAgdmVyaWZ5U2V0dGluZ3MoKSB7XG4gICAgICAgIGlmICghaXNEZXZNb2RlKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5taW4gIT09IG51bGwgJiYgdGhpcy5tYXggIT09IG51bGwgJiYgdGhpcy5taW4gPiB0aGlzLm1heCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgbWF4IHZhbHVlIHNob3VsZCBiZSBiaWdnZXIgdGhhbiB0aGUgbWluLiBTZWUgJHtNSU5fRE9DX0xJTkt9IGFuZCAke01BWF9ET0NfTElOS30uYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmVyaWZ5VmFsdWUodmFsdWUpIHtcbiAgICAgICAgaWYgKGlzRGV2TW9kZSgpICYmIHZhbHVlICYmIHR5cGVvZiB2YWx1ZSAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlIE51bWVyaWNUZXh0Qm94IGNvbXBvbmVudCByZXF1aXJlcyB2YWx1ZSBvZiB0eXBlIE51bWJlciBhbmQgJHtKU09OLnN0cmluZ2lmeSh2YWx1ZSl9IHdhcyBzZXQuYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcGFyc2VPcHRpb25zKG9wdGlvbnMpIHtcbiAgICAgICAgZm9yIChsZXQgaWR4ID0gMDsgaWR4IDwgb3B0aW9ucy5sZW5ndGg7IGlkeCsrKSB7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gb3B0aW9uc1tpZHhdO1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzW25hbWVdO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWQgPSBwYXJzZUZsb2F0KHZhbHVlKTtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWxpZCA9ICFpc05hTihwYXJzZWQpO1xuICAgICAgICAgICAgICAgIGlmIChpc0Rldk1vZGUoKSAmJiAhdmFsaWQgJiYgdmFsdWUgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIE51bWVyaWNUZXh0Qm94IGNvbXBvbmVudCByZXF1aXJlcyB2YWx1ZSBvZiB0eXBlIE51bWJlciBvciBhIFN0cmluZyByZXByZXNlbnRpbmcgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICBgYSBudW1iZXIgZm9yIHRoZSAke25hbWV9IHByb3BlcnR5IGFuZCAke0pTT04uc3RyaW5naWZ5KHZhbHVlKX0gd2FzIHNldC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpc1tuYW1lXSA9IHZhbGlkID8gcGFyc2VkIDogUEFSU0FCTEVfREVGQVVMVFNbbmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW50bENoYW5nZSgpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMubnVtZXJpY1JlZ2V4O1xuICAgICAgICBpZiAodGhpcy5udW1lcmljSW5wdXQgJiYgKCF0aGlzLmZvY3VzZWQgfHwgIXRoaXMuaXNWYWxpZCh0aGlzLmVsZW1lbnRWYWx1ZSkpKSB7XG4gICAgICAgICAgICB0aGlzLnNldElucHV0VmFsdWUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYXNUcmFpbGluZ1plcm9zKGlucHV0VmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzRGVjaW1hbHMgJiYgdGhpcy5mb2N1c2VkKSB7XG4gICAgICAgICAgICBjb25zdCBmcmFjdGlvbiA9IGlucHV0VmFsdWUuc3BsaXQodGhpcy5kZWNpbWFsU2VwYXJhdG9yKVsxXTtcbiAgICAgICAgICAgIHJldHVybiBmcmFjdGlvbiAmJiBmcmFjdGlvbi5sZW5ndGggPiB0aGlzLmRlY2ltYWxzICYmIGZyYWN0aW9uLmxhc3RJbmRleE9mKCcwJykgPT09IGZyYWN0aW9uLmxlbmd0aCAtIDE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2VsZWN0QWxsKCkge1xuICAgICAgICB0aGlzLnNldElucHV0VmFsdWUoKTtcbiAgICAgICAgdGhpcy5zZXRTZWxlY3Rpb24oMCwgdGhpcy5pbnB1dFZhbHVlLmxlbmd0aCk7XG4gICAgfVxuICAgIHNlbGVjdENhcmV0KCkge1xuICAgICAgICBjb25zdCBjYXJldFBvc2l0aW9uID0gZ2V0Q2FyZXRQb3NpdGlvbih0aGlzLm51bWVyaWNJbnB1dC5uYXRpdmVFbGVtZW50KTtcbiAgICAgICAgY29uc3QgZm9ybWF0dGVkVmFsdWUgPSB0aGlzLmVsZW1lbnRWYWx1ZTtcbiAgICAgICAgY29uc3QgcGFydGlhbFZhbHVlID0gZm9ybWF0dGVkVmFsdWUuc3Vic3RyaW5nKDAsIGNhcmV0UG9zaXRpb24pO1xuICAgICAgICB0aGlzLnNldElucHV0VmFsdWUoKTtcbiAgICAgICAgaWYgKHBhcnRpYWxWYWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IHNpZ25pZmljYW50Q2hhcnNJbkZvcm1hdHRlZFZhbHVlID0gZXh0cmFjdFNpZ25pZmljYW50TnVtZXJpY0NoYXJzKHBhcnRpYWxWYWx1ZSwgdGhpcy5kZWNpbWFsU2VwYXJhdG9yKTtcbiAgICAgICAgICAgIGNvbnN0IGFkanVzdGVkU2lnbmlmaWNhbnRDaGFycyA9IHRoaXMuYWRqdXN0U2lnbmlmaWNhbnRDaGFycyhmb3JtYXR0ZWRWYWx1ZSwgc2lnbmlmaWNhbnRDaGFyc0luRm9ybWF0dGVkVmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3Rpb24oYWRqdXN0ZWRTaWduaWZpY2FudENoYXJzLCBhZGp1c3RlZFNpZ25pZmljYW50Q2hhcnMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3Rpb24oMCwgMCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbnVtYmVyT2ZMZWFkaW5nWmVyb2VzKGZvcm1hdHRlZFZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHNlcGFyYXRvckluZGV4ID0gZm9ybWF0dGVkVmFsdWUuaW5kZXhPZih0aGlzLmRlY2ltYWxTZXBhcmF0b3IpO1xuICAgICAgICBjb25zdCBtYXRjaGVkTGVhZGluZ1plcm9lcyA9IGZvcm1hdHRlZFZhbHVlLm1hdGNoKC9eW14xLTldKj8oMCspLyk7XG4gICAgICAgIGlmIChtYXRjaGVkTGVhZGluZ1plcm9lcykge1xuICAgICAgICAgICAgY29uc3QgbGVuZ3RoT2ZNYXRjaCA9IG1hdGNoZWRMZWFkaW5nWmVyb2VzWzBdLmxlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IGxlbmd0aE9mTGVhZGluZ1plcm9lc01hdGNoID0gbWF0Y2hlZExlYWRpbmdaZXJvZXNbMV0ubGVuZ3RoO1xuICAgICAgICAgICAgcmV0dXJuIGxlbmd0aE9mTWF0Y2ggPT09IHNlcGFyYXRvckluZGV4ID8gbGVuZ3RoT2ZMZWFkaW5nWmVyb2VzTWF0Y2ggLSAxIDogbGVuZ3RoT2ZMZWFkaW5nWmVyb2VzTWF0Y2g7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGFkanVzdFNpZ25pZmljYW50Q2hhcnMoZm9ybWF0dGVkVmFsdWUsIHNpZ25pZmljYW50Q2hhcnMpIHtcbiAgICAgICAgY29uc3QgbGVhZGluZ1plcm9lcyA9IHRoaXMubnVtYmVyT2ZMZWFkaW5nWmVyb2VzKGZvcm1hdHRlZFZhbHVlKTtcbiAgICAgICAgaWYgKGxlYWRpbmdaZXJvZXMgPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5tYXgoMCwgc2lnbmlmaWNhbnRDaGFycyAtIGxlYWRpbmdaZXJvZXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzaWduaWZpY2FudENoYXJzO1xuICAgIH1cbn07XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBOdW1lcmljVGV4dEJveENvbXBvbmVudC5wcm90b3R5cGUsIFwiZm9jdXNhYmxlSWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBOdW1lcmljVGV4dEJveENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGlzYWJsZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBOdW1lcmljVGV4dEJveENvbXBvbmVudC5wcm90b3R5cGUsIFwicmVhZG9ubHlcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIE51bWVyaWNUZXh0Qm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ0aXRsZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIE51bWVyaWNUZXh0Qm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJhdXRvQ29ycmVjdFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pXG5dLCBOdW1lcmljVGV4dEJveENvbXBvbmVudC5wcm90b3R5cGUsIFwiZm9ybWF0XCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKVxuXSwgTnVtZXJpY1RleHRCb3hDb21wb25lbnQucHJvdG90eXBlLCBcIm1heFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKVxuXSwgTnVtZXJpY1RleHRCb3hDb21wb25lbnQucHJvdG90eXBlLCBcIm1pblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKVxuXSwgTnVtZXJpY1RleHRCb3hDb21wb25lbnQucHJvdG90eXBlLCBcImRlY2ltYWxzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBOdW1lcmljVGV4dEJveENvbXBvbmVudC5wcm90b3R5cGUsIFwicGxhY2Vob2xkZXJcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlcilcbl0sIE51bWVyaWNUZXh0Qm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJzdGVwXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgTnVtZXJpY1RleHRCb3hDb21wb25lbnQucHJvdG90eXBlLCBcInNwaW5uZXJzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgTnVtZXJpY1RleHRCb3hDb21wb25lbnQucHJvdG90eXBlLCBcInJhbmdlVmFsaWRhdGlvblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKVxuXSwgTnVtZXJpY1RleHRCb3hDb21wb25lbnQucHJvdG90eXBlLCBcInRhYmluZGV4XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOdW1iZXIpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTnVtYmVyXSlcbl0sIE51bWVyaWNUZXh0Qm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ0YWJJbmRleFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBOdW1lcmljVGV4dEJveENvbXBvbmVudC5wcm90b3R5cGUsIFwiY2hhbmdlVmFsdWVPblNjcm9sbFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIE51bWVyaWNUZXh0Qm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJzZWxlY3RPbkZvY3VzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOdW1iZXIpXG5dLCBOdW1lcmljVGV4dEJveENvbXBvbmVudC5wcm90b3R5cGUsIFwidmFsdWVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlcilcbl0sIE51bWVyaWNUZXh0Qm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJtYXhsZW5ndGhcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBOdW1lcmljVGV4dEJveENvbXBvbmVudC5wcm90b3R5cGUsIFwidmFsdWVDaGFuZ2VcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgnZm9jdXMnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgTnVtZXJpY1RleHRCb3hDb21wb25lbnQucHJvdG90eXBlLCBcIm9uRm9jdXNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgnYmx1cicpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBOdW1lcmljVGV4dEJveENvbXBvbmVudC5wcm90b3R5cGUsIFwib25CbHVyXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBWaWV3Q2hpbGQoJ251bWVyaWNJbnB1dCcsIHsgc3RhdGljOiB0cnVlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFbGVtZW50UmVmKVxuXSwgTnVtZXJpY1RleHRCb3hDb21wb25lbnQucHJvdG90eXBlLCBcIm51bWVyaWNJbnB1dFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgVmlld0NoaWxkKCdudW1lcmljV3JhcCcsIHsgc3RhdGljOiB0cnVlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFbGVtZW50UmVmKVxuXSwgTnVtZXJpY1RleHRCb3hDb21wb25lbnQucHJvdG90eXBlLCBcIm51bWVyaWNXcmFwXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnYXR0ci5kaXInKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgTnVtZXJpY1RleHRCb3hDb21wb25lbnQucHJvdG90eXBlLCBcImRpcmVjdGlvblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmstd2lkZ2V0JyksXG4gICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmstbnVtZXJpY3RleHRib3gnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgTnVtZXJpY1RleHRCb3hDb21wb25lbnQucHJvdG90eXBlLCBcIndpZGdldENsYXNzZXNcIiwgbnVsbCk7XG5OdW1lcmljVGV4dEJveENvbXBvbmVudCA9IE51bWVyaWNUZXh0Qm94Q29tcG9uZW50XzEgPSBfX2RlY29yYXRlKFtcbiAgICBDb21wb25lbnQoe1xuICAgICAgICBleHBvcnRBczogJ2tlbmRvTnVtZXJpY1RleHRCb3gnLFxuICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgIExvY2FsaXphdGlvblNlcnZpY2UsXG4gICAgICAgICAgICB7IHByb3ZpZGU6IEwxME5fUFJFRklYLCB1c2VWYWx1ZTogJ2tlbmRvLm51bWVyaWN0ZXh0Ym94JyB9LFxuICAgICAgICAgICAgeyBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUiwgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gTnVtZXJpY1RleHRCb3hDb21wb25lbnRfMSksIG11bHRpOiB0cnVlIH0sXG4gICAgICAgICAgICB7IHByb3ZpZGU6IE5HX1ZBTElEQVRPUlMsIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IE51bWVyaWNUZXh0Qm94Q29tcG9uZW50XzEpLCBtdWx0aTogdHJ1ZSB9LFxuICAgICAgICAgICAgeyBwcm92aWRlOiBLZW5kb0lucHV0LCB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBOdW1lcmljVGV4dEJveENvbXBvbmVudF8xKSB9XG4gICAgICAgIF0sXG4gICAgICAgIHNlbGVjdG9yOiAna2VuZG8tbnVtZXJpY3RleHRib3gnLFxuICAgICAgICB0ZW1wbGF0ZTogYFxuICAgICAgICA8bmctY29udGFpbmVyIGtlbmRvTnVtZXJpY1RleHRCb3hMb2NhbGl6ZWRNZXNzYWdlc1xuICAgICAgICAgICAgaTE4bi1pbmNyZW1lbnQ9XCJrZW5kby5udW1lcmljdGV4dGJveC5pbmNyZW1lbnR8VGhlIHRpdGxlIGZvciB0aGUgKipJbmNyZW1lbnQqKiBidXR0b24gaW4gdGhlIE51bWVyaWNUZXh0Qm94XCJcbiAgICAgICAgICAgIGluY3JlbWVudD1cIkluY3JlYXNlIHZhbHVlXCJcbiAgICAgICAgICAgIGkxOG4tZGVjcmVtZW50PVwia2VuZG8ubnVtZXJpY3RleHRib3guZGVjcmVtZW50fFRoZSB0aXRsZSBmb3IgdGhlICoqRGVjcmVtZW50KiogYnV0dG9uIGluIHRoZSBOdW1lcmljVGV4dEJveFwiXG4gICAgICAgICAgICBkZWNyZW1lbnQ9XCJEZWNyZWFzZSB2YWx1ZVwiXG4gICAgICAgID5cbiAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgIDxzcGFuXG4gICAgICAgICAgICBjbGFzcz1cImstbnVtZXJpYy13cmFwXCJcbiAgICAgICAgICAgIFtjbGFzcy5rLXN0YXRlLWRpc2FibGVkXT1cImRpc2FibGVkXCJcbiAgICAgICAgICAgIFtrZW5kb0V2ZW50c091dHNpZGVBbmd1bGFyXT1cInsgbW91c2V3aGVlbDogaGFuZGxlV2hlZWwsIERPTU1vdXNlU2Nyb2xsOiBoYW5kbGVXaGVlbCB9XCJcbiAgICAgICAgICAgICNudW1lcmljV3JhcD5cbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgcm9sZT1cInNwaW5idXR0b25cIlxuICAgICAgICAgICAgY2xhc3M9XCJrLWlucHV0IGstZm9ybWF0dGVkLXZhbHVlXCJcbiAgICAgICAgICAgIGF1dG9jb21wbGV0ZT1cIm9mZlwiXG4gICAgICAgICAgICBhdXRvY29ycmVjdD1cIm9mZlwiXG4gICAgICAgICAgICBbaWRdPVwiZm9jdXNhYmxlSWRcIlxuICAgICAgICAgICAgW2F0dHIuYXJpYS12YWx1ZW1pbl09XCJtaW5cIlxuICAgICAgICAgICAgW2F0dHIuYXJpYS12YWx1ZW1heF09XCJtYXhcIlxuICAgICAgICAgICAgW2F0dHIuYXJpYS12YWx1ZW5vd109XCJ2YWx1ZVwiXG4gICAgICAgICAgICBbYXR0ci50aXRsZV09XCJ0aXRsZVwiXG4gICAgICAgICAgICBbYXR0ci5wbGFjZWhvbGRlcl09XCJwbGFjZWhvbGRlclwiXG4gICAgICAgICAgICBbYXR0ci5tYXhMZW5ndGhdPVwibWF4bGVuZ3RoXCJcbiAgICAgICAgICAgIFt0YWJpbmRleF09XCJ0YWJJbmRleFwiXG4gICAgICAgICAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWRcIlxuICAgICAgICAgICAgW3JlYWRvbmx5XT1cInJlYWRvbmx5XCJcbiAgICAgICAgICAgIFtrZW5kb0V2ZW50c091dHNpZGVBbmd1bGFyXT1cIntcbiAgICAgICAgICAgICAgICBtb3VzZWRvd246IGhhbmRsZU1vdXNlRG93bixcbiAgICAgICAgICAgICAgICBkcmFnZW50ZXI6IGhhbmRsZURyYWdFbnRlcixcbiAgICAgICAgICAgICAgICBrZXlkb3duOiBoYW5kbGVLZXlEb3duLFxuICAgICAgICAgICAgICAgIGlucHV0OiBoYW5kbGVJbnB1dCxcbiAgICAgICAgICAgICAgICBmb2N1czogaGFuZGxlRm9jdXMsXG4gICAgICAgICAgICAgICAgYmx1cjogaGFuZGxlQmx1cixcbiAgICAgICAgICAgICAgICBwYXN0ZTogaGFuZGxlUGFzdGVcbiAgICAgICAgICAgIH1cIlxuICAgICAgICAgICAgI251bWVyaWNJbnB1dCAvPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJrLXNlbGVjdFwiICpuZ0lmPVwic3Bpbm5lcnNcIiBba2VuZG9FdmVudHNPdXRzaWRlQW5ndWxhcl09XCJ7IG1vdXNldXA6IHJlbGVhc2VBcnJvdywgbW91c2VsZWF2ZTogcmVsZWFzZUFycm93IH1cIj5cbiAgICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICAgICByb2xlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgW2tlbmRvRXZlbnRzT3V0c2lkZUFuZ3VsYXJdPVwieyBtb3VzZWRvd246IGluY3JlYXNlUHJlc3MgfVwiXG4gICAgICAgICAgICAgICAgICAgIFthdHRyLmFyaWEtbGFiZWxdPVwiaW5jcmVtZW50VGl0bGVcIlxuICAgICAgICAgICAgICAgICAgICBbdGl0bGVdPVwiaW5jcmVtZW50VGl0bGVcIlxuICAgICAgICAgICAgICAgICAgICBbY2xhc3Muay1zdGF0ZS1hY3RpdmVdPVwiYXJyb3dEaXJlY3Rpb24gPT09IEFycm93RGlyZWN0aW9uLlVwXCJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJrLWxpbmsgay1saW5rLWluY3JlYXNlXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1hcnJvdy1uXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICAgICByb2xlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgW2tlbmRvRXZlbnRzT3V0c2lkZUFuZ3VsYXJdPVwieyBtb3VzZWRvd246IGRlY3JlYXNlUHJlc3MgfVwiXG4gICAgICAgICAgICAgICAgICAgIFthdHRyLmFyaWEtbGFiZWxdPVwiZGVjcmVtZW50VGl0bGVcIlxuICAgICAgICAgICAgICAgICAgICBbdGl0bGVdPVwiZGVjcmVtZW50VGl0bGVcIlxuICAgICAgICAgICAgICAgICAgICBbY2xhc3Muay1zdGF0ZS1hY3RpdmVdPVwiYXJyb3dEaXJlY3Rpb24gPT09IEFycm93RGlyZWN0aW9uLkRvd25cIlxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImstbGluayBrLWxpbmstZGVjcmVhc2VcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWFycm93LXNcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICA8L3NwYW4+XG4gICAgICBgXG4gICAgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtJbnRsU2VydmljZSxcbiAgICAgICAgUmVuZGVyZXIyLFxuICAgICAgICBMb2NhbGl6YXRpb25TZXJ2aWNlLFxuICAgICAgICBJbmplY3RvcixcbiAgICAgICAgTmdab25lLFxuICAgICAgICBDaGFuZ2VEZXRlY3RvclJlZixcbiAgICAgICAgRWxlbWVudFJlZl0pXG5dLCBOdW1lcmljVGV4dEJveENvbXBvbmVudCk7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5jbGFzcyBOdW1lcmljVGV4dEJveE1lc3NhZ2VzIGV4dGVuZHMgQ29tcG9uZW50TWVzc2FnZXMge1xufVxuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgTnVtZXJpY1RleHRCb3hNZXNzYWdlcy5wcm90b3R5cGUsIFwiZGVjcmVtZW50XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBOdW1lcmljVGV4dEJveE1lc3NhZ2VzLnByb3RvdHlwZSwgXCJpbmNyZW1lbnRcIiwgdm9pZCAwKTtcblxudmFyIE51bWVyaWNUZXh0Qm94Q3VzdG9tTWVzc2FnZXNDb21wb25lbnRfMTtcbi8qKlxuICogQ3VzdG9tIGNvbXBvbmVudCBtZXNzYWdlcyBvdmVycmlkZSBkZWZhdWx0IGNvbXBvbmVudCBtZXNzYWdlcy5cbiAqL1xubGV0IE51bWVyaWNUZXh0Qm94Q3VzdG9tTWVzc2FnZXNDb21wb25lbnQgPSBOdW1lcmljVGV4dEJveEN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50XzEgPSBjbGFzcyBOdW1lcmljVGV4dEJveEN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50IGV4dGVuZHMgTnVtZXJpY1RleHRCb3hNZXNzYWdlcyB7XG4gICAgY29uc3RydWN0b3Ioc2VydmljZSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnNlcnZpY2UgPSBzZXJ2aWNlO1xuICAgIH1cbiAgICBnZXQgb3ZlcnJpZGUoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn07XG5OdW1lcmljVGV4dEJveEN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50ID0gTnVtZXJpY1RleHRCb3hDdXN0b21NZXNzYWdlc0NvbXBvbmVudF8xID0gX19kZWNvcmF0ZShbXG4gICAgQ29tcG9uZW50KHtcbiAgICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZTogTnVtZXJpY1RleHRCb3hNZXNzYWdlcyxcbiAgICAgICAgICAgICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBOdW1lcmljVGV4dEJveEN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50XzEpIC8vIHRzbGludDpkaXNhYmxlLWxpbmU6bm8tZm9yd2FyZC1yZWZcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgc2VsZWN0b3I6ICdrZW5kby1udW1lcmljdGV4dGJveC1tZXNzYWdlcycsXG4gICAgICAgIHRlbXBsYXRlOiBgYFxuICAgIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTG9jYWxpemF0aW9uU2VydmljZV0pXG5dLCBOdW1lcmljVGV4dEJveEN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50KTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbnZhciBSZXN1bHRUeXBlO1xuKGZ1bmN0aW9uIChSZXN1bHRUeXBlKSB7XG4gICAgUmVzdWx0VHlwZVtSZXN1bHRUeXBlW1wiTGl0ZXJhbFwiXSA9IDBdID0gXCJMaXRlcmFsXCI7XG4gICAgUmVzdWx0VHlwZVtSZXN1bHRUeXBlW1wiTWFza1wiXSA9IDFdID0gXCJNYXNrXCI7XG4gICAgUmVzdWx0VHlwZVtSZXN1bHRUeXBlW1wiVW5kZWZpbmVkXCJdID0gMl0gPSBcIlVuZGVmaW5lZFwiO1xufSkoUmVzdWx0VHlwZSB8fCAoUmVzdWx0VHlwZSA9IHt9KSk7XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY2xhc3MgUmVzdWx0IHtcbiAgICBjb25zdHJ1Y3Rvcih2YWx1ZSwgcmVzdCwgdHlwZSA9IFJlc3VsdFR5cGUuVW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5yZXN0ID0gcmVzdDtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICB9XG4gICAgLy9tYXAgOjogRnVuY3RvciBmID0+IGYgYSB+PiAoYSAtPiBiKSAtPiBmIGJcbiAgICBtYXAoZm4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXN1bHQoZm4odGhpcy52YWx1ZSksIHRoaXMucmVzdCk7XG4gICAgfVxuICAgIC8vY2hhaW4gOjogQ2hhaW4gbSA9PiBtIGEgfj4gKGEgLT4gbSBiKSAtPiBtIGJcbiAgICBjaGFpbihmbikge1xuICAgICAgICByZXR1cm4gZm4odGhpcy52YWx1ZSwgdGhpcy5yZXN0KTtcbiAgICB9XG4gICAgZm9sZChzLCBfIC8qd2UgZG9uJ3QgbmVlZCBpdCovKSB7XG4gICAgICAgIHJldHVybiBzKHRoaXMudmFsdWUsIHRoaXMucmVzdCk7XG4gICAgfVxuICAgIGNvbmNhdChyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcCgodnMsIF8pID0+IHIuY2hhaW4oKHYsIF9fKSA9PiB2cy5jb25jYXQoW3ZdKSkpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIGBSZXN1bHQoeyB2YWx1ZTogJyR7dGhpcy52YWx1ZX0nLCByZXN0OiAke3RoaXMucmVzdH0gfSlgO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNsYXNzIFN0cmVhbSB7XG4gICAgY29uc3RydWN0b3IoaW5wdXQgPSBbXSwgY29udHJvbCA9IFtdKSB7XG4gICAgICAgIHRoaXMuaW5wdXQgPSBpbnB1dDtcbiAgICAgICAgdGhpcy5jb250cm9sID0gY29udHJvbDtcbiAgICAgICAgdGhpcy5pbnB1dEN1cnNvciA9IDA7XG4gICAgICAgIHRoaXMuY29udHJvbEN1cnNvciA9IDA7XG4gICAgfVxuICAgIGVvZigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5wdXRDdXJzb3IgPj0gdGhpcy5pbnB1dC5sZW5ndGg7XG4gICAgfVxuICAgIC8vIEdldCB0aGUgZmlyc3QgdmFsdWUgZnJvbSB0aGUgaW5wdXQuXG4gICAgbmV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNoYXI6IHRoaXMuaW5wdXRbdGhpcy5pbnB1dEN1cnNvcisrXSxcbiAgICAgICAgICAgIGNvbnRyb2w6IHRoaXMuY29udHJvbFt0aGlzLmNvbnRyb2xDdXJzb3IrK11cbiAgICAgICAgfTtcbiAgICB9XG4gICAgcGVlaygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNoYXI6IHRoaXMuaW5wdXRbdGhpcy5pbnB1dEN1cnNvcl0sXG4gICAgICAgICAgICBjb250cm9sOiB0aGlzLmNvbnRyb2xbdGhpcy5jb250cm9sQ3Vyc29yXVxuICAgICAgICB9O1xuICAgIH1cbiAgICBlYXRfaW5wdXQoKSB7XG4gICAgICAgIHRoaXMuaW5wdXRDdXJzb3IrKztcbiAgICB9XG4gICAgZWF0X2NvbnRyb2woKSB7XG4gICAgICAgIHRoaXMuY29udHJvbEN1cnNvcisrO1xuICAgIH1cbiAgICBlYXQoKSB7XG4gICAgICAgIHRoaXMuaW5wdXRDdXJzb3IrKztcbiAgICAgICAgdGhpcy5jb250cm9sQ3Vyc29yKys7XG4gICAgfVxufVxuXG5jb25zdCB0b0FycmF5ID0gKHZhbHVlKSA9PiAodmFsdWUgfHwgJycpLnNwbGl0KCcnKTtcbmNvbnN0IEVTQ0FQRV9DSEFSQUNURVIgPSAnXFxcXCc7XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY2xhc3MgUGFyc2VyIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJzZSkge1xuICAgICAgICB0aGlzLnBhcnNlID0gcGFyc2U7XG4gICAgfVxuICAgIHJ1bihpbnB1dCwgY29udHJvbCA9ICcnKSB7XG4gICAgICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIFN0cmVhbSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2UoaW5wdXQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2UobmV3IFN0cmVhbSh0b0FycmF5KGlucHV0KSwgdG9BcnJheShjb250cm9sKSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vbWFwIDo6IEZ1bmN0b3IgZiA9PiBmIGEgfj4gKGEgLT4gYikgLT4gZiBiXG4gICAgbWFwKGYpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQYXJzZXIoc3RyZWFtID0+IHRoaXMucGFyc2Uoc3RyZWFtKS5tYXAoZikpO1xuICAgIH1cbiAgICAvL2NoYWluIDo6IENoYWluIG0gPT4gbSBhIH4+IChhIC0+IG0gYikgLT4gbSBiXG4gICAgY2hhaW4oZikge1xuICAgICAgICByZXR1cm4gbmV3IFBhcnNlcihzdHJlYW0gPT4gdGhpcy5wYXJzZShzdHJlYW0pLmNoYWluKCh2LCBzKSA9PiBmKHYpLnJ1bihzKSkpO1xuICAgIH1cbiAgICBpc0xpdGVyYWwoYykge1xuICAgICAgICByZXR1cm4gdGhpcy5ydW4oYykudHlwZSA9PT0gUmVzdWx0VHlwZS5MaXRlcmFsO1xuICAgIH1cbn1cbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBtYXNrID0gKHsgcHJvbXB0LCBwcm9tcHRQbGFjZWhvbGRlciB9KSA9PiBydWxlID0+IG5ldyBQYXJzZXIoc3RyZWFtID0+IHtcbiAgICB3aGlsZSAoIXN0cmVhbS5lb2YoKSkge1xuICAgICAgICBjb25zdCB7IGNoYXIsIGNvbnRyb2wgfSA9IHN0cmVhbS5wZWVrKCk7XG4gICAgICAgIGlmIChjaGFyID09PSBjb250cm9sICYmIGNvbnRyb2wgPT09IHByb21wdCkge1xuICAgICAgICAgICAgc3RyZWFtLmVhdCgpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXN1bHQocHJvbXB0LCBzdHJlYW0sIFJlc3VsdFR5cGUuTWFzayk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJ1bGUudGVzdChjaGFyKSkge1xuICAgICAgICAgICAgc3RyZWFtLmVhdCgpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXN1bHQoY2hhciwgc3RyZWFtLCBSZXN1bHRUeXBlLk1hc2spO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjaGFyID09PSBwcm9tcHRQbGFjZWhvbGRlcikge1xuICAgICAgICAgICAgc3RyZWFtLmVhdCgpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXN1bHQocHJvbXB0LCBzdHJlYW0sIFJlc3VsdFR5cGUuTWFzayk7XG4gICAgICAgIH1cbiAgICAgICAgc3RyZWFtLmVhdF9pbnB1dCgpO1xuICAgIH1cbiAgICBzdHJlYW0uZWF0KCk7XG4gICAgcmV0dXJuIG5ldyBSZXN1bHQocHJvbXB0LCBzdHJlYW0sIFJlc3VsdFR5cGUuTWFzayk7XG59KTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBsaXRlcmFsID0gX3Rva2VuID0+IG5ldyBQYXJzZXIoc3RyZWFtID0+IHtcbiAgICAvLyAgICBsZXQge2NoYXIsIGNvbnRyb2x9ID0gc3RyZWFtLnBlZWsoKTtcbiAgICBsZXQgY2hhciA9IHN0cmVhbS5wZWVrKCkuY2hhcjtcbiAgICBpZiAoY2hhciA9PT0gX3Rva2VuKSB7XG4gICAgICAgIHN0cmVhbS5lYXQoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXN1bHQoX3Rva2VuLCBzdHJlYW0sIFJlc3VsdFR5cGUuTGl0ZXJhbCk7XG4gICAgfVxuICAgIC8vICAgIGlmIChjb250cm9sID09PSBfdG9rZW4pIHtcbiAgICAvLyAgICAgICAgd2hpbGUgKCFzdHJlYW0uZW9mKCkgJiYgY2hhciAhPT0gX3Rva2VuKSB7XG4gICAgLy8gICAgICAgICAgICBzdHJlYW0uZWF0X2lucHV0KCk7XG4gICAgLy8gICAgICAgICAgICBjaGFyID0gc3RyZWFtLnBlZWsoKS5jaGFyO1xuICAgIC8vICAgICAgICB9XG4gICAgLy8gICAgfVxuICAgIC8vXG4gICAgLy8gICAgaWYgKGNvbnRyb2wgIT09IHVuZGVmaW5lZCkge1xuICAgIC8vICAgICAgICBzdHJlYW0uZWF0KCk7XG4gICAgLy8gICAgfVxuICAgIHJldHVybiBuZXcgUmVzdWx0KF90b2tlbiwgc3RyZWFtLCBSZXN1bHRUeXBlLkxpdGVyYWwpO1xufSk7XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgdW5tYXNrID0gcHJvbXB0ID0+IHJ1bGUgPT4gbmV3IFBhcnNlcihzdHJlYW0gPT4ge1xuICAgIHdoaWxlICghc3RyZWFtLmVvZigpKSB7XG4gICAgICAgIGNvbnN0IHsgY2hhciwgY29udHJvbCB9ID0gc3RyZWFtLnBlZWsoKTtcbiAgICAgICAgaWYgKGNoYXIgPT09IHByb21wdCAmJiBjb250cm9sID09PSBwcm9tcHQpIHtcbiAgICAgICAgICAgIHN0cmVhbS5lYXQoKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVzdWx0KGNoYXIsIHN0cmVhbSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJ1bGUudGVzdChjaGFyKSkge1xuICAgICAgICAgICAgc3RyZWFtLmVhdCgpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXN1bHQoY2hhciwgc3RyZWFtKTtcbiAgICAgICAgfVxuICAgICAgICBzdHJlYW0uZWF0X2lucHV0KCk7XG4gICAgfVxuICAgIHN0cmVhbS5lYXQoKTtcbiAgICByZXR1cm4gbmV3IFJlc3VsdCgnJywgc3RyZWFtKTtcbn0pO1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IHVubGl0ZXJhbCA9IF90b2tlbiA9PiBuZXcgUGFyc2VyKHN0cmVhbSA9PiB7XG4gICAgaWYgKHN0cmVhbS5lb2YoKSkge1xuICAgICAgICByZXR1cm4gbmV3IFJlc3VsdCgnJywgc3RyZWFtKTtcbiAgICB9XG4gICAgY29uc3QgeyBjaGFyIH0gPSBzdHJlYW0ucGVlaygpO1xuICAgIGlmIChjaGFyID09PSBfdG9rZW4pIHtcbiAgICAgICAgc3RyZWFtLmVhdCgpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFJlc3VsdChfdG9rZW4sIHN0cmVhbSk7XG59KTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCB0b2tlbiA9IChydWxlcywgY3JlYXRvcikgPT4gbmV3IFBhcnNlcihzdHJlYW0gPT4ge1xuICAgIGxldCB7IGNoYXIgfSA9IHN0cmVhbS5uZXh0KCk7XG4gICAgY29uc3QgcnVsZSA9IHJ1bGVzW2NoYXJdO1xuICAgIGlmIChjaGFyID09PSBFU0NBUEVfQ0hBUkFDVEVSKSB7XG4gICAgICAgIGNoYXIgPSBzdHJlYW0ubmV4dCgpLmNoYXI7XG4gICAgICAgIHJldHVybiBuZXcgUmVzdWx0KGNyZWF0b3IubGl0ZXJhbChjaGFyKSwgc3RyZWFtKTtcbiAgICB9XG4gICAgaWYgKCFydWxlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVzdWx0KGNyZWF0b3IubGl0ZXJhbChjaGFyKSwgc3RyZWFtKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBSZXN1bHQoY3JlYXRvci5tYXNrKHJ1bGUpLCBzdHJlYW0pO1xufSk7XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgcmF3TWFzayA9ICh7IHByb21wdCwgcHJvbXB0UGxhY2Vob2xkZXIgfSkgPT4gbmV3IFBhcnNlcihzdHJlYW0gPT4ge1xuICAgIGxldCB7IGNoYXIgfSA9IHN0cmVhbS5uZXh0KCk7XG4gICAgaWYgKGNoYXIgPT09IHByb21wdCkge1xuICAgICAgICByZXR1cm4gbmV3IFJlc3VsdChwcm9tcHRQbGFjZWhvbGRlciwgc3RyZWFtKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBSZXN1bHQoY2hhciwgc3RyZWFtKTtcbn0pO1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IHJhd0xpdGVyYWwgPSBpbmNsdWRlTGl0ZXJhbHMgPT4gbmV3IFBhcnNlcihzdHJlYW0gPT4ge1xuICAgIGxldCB7IGNoYXIgfSA9IHN0cmVhbS5uZXh0KCk7XG4gICAgaWYgKGluY2x1ZGVMaXRlcmFscykge1xuICAgICAgICByZXR1cm4gbmV3IFJlc3VsdChjaGFyLCBzdHJlYW0pO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFJlc3VsdCgnJywgc3RyZWFtKTtcbn0pO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgYWx3YXlzID0gdmFsdWUgPT4gbmV3IFBhcnNlcihzdHJlYW0gPT4gbmV3IFJlc3VsdCh2YWx1ZSwgc3RyZWFtKSk7XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgYXBwZW5kID0gKHAxLCBwMikgPT4gcDEuY2hhaW4odnMgPT4gcDIubWFwKHYgPT4gdnMuY29uY2F0KFt2XSkpKTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBzZXF1ZW5jZSA9IGxpc3QgPT4gbGlzdC5yZWR1Y2UoKGFjYywgcGFyc2VyKSA9PiBhcHBlbmQoYWNjLCBwYXJzZXIpLCBhbHdheXMoW10pKTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBncmVlZHkgPSBwYXJzZXIgPT4gbmV3IFBhcnNlcihzdHJlYW0gPT4ge1xuICAgIGxldCByZXN1bHQgPSBuZXcgUmVzdWx0KFtdLCBzdHJlYW0pO1xuICAgIHdoaWxlICghc3RyZWFtLmVvZigpKSB7XG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdC5jb25jYXQocGFyc2VyLnJ1bihzdHJlYW0pKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn0pO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xubGV0IE1hc2tpbmdTZXJ2aWNlID0gY2xhc3MgTWFza2luZ1NlcnZpY2Uge1xuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5ydWxlcyA9IHt9O1xuICAgICAgICB0aGlzLnByb21wdCA9IFwiX1wiO1xuICAgICAgICB0aGlzLm1hc2sgPSBcIlwiO1xuICAgICAgICB0aGlzLnByb21wdFBsYWNlaG9sZGVyID0gXCIgXCI7XG4gICAgICAgIHRoaXMuaW5jbHVkZUxpdGVyYWxzID0gZmFsc2U7XG4gICAgICAgIHRoaXMubWFza1Rva2VucyA9IFtdO1xuICAgICAgICB0aGlzLnVubWFza1Rva2VucyA9IFtdO1xuICAgICAgICB0aGlzLnJhd1Rva2VucyA9IFtdO1xuICAgICAgICB0aGlzLnZhbGlkYXRpb25Ub2tlbnMgPSBbXTtcbiAgICB9XG4gICAgdXBkYXRlKHsgbWFzazogbWFzayQkMSA9ICcnLCBwcm9tcHQgPSAnJywgcHJvbXB0UGxhY2Vob2xkZXIgPSAnICcsIHJ1bGVzID0ge30sIGluY2x1ZGVMaXRlcmFscyA9IGZhbHNlIH0pIHtcbiAgICAgICAgdGhpcy5tYXNrID0gbWFzayQkMTtcbiAgICAgICAgdGhpcy5wcm9tcHQgPSBwcm9tcHQ7XG4gICAgICAgIHRoaXMucHJvbXB0UGxhY2Vob2xkZXIgPSBwcm9tcHRQbGFjZWhvbGRlcjtcbiAgICAgICAgdGhpcy5ydWxlcyA9IHJ1bGVzO1xuICAgICAgICB0aGlzLmluY2x1ZGVMaXRlcmFscyA9IGluY2x1ZGVMaXRlcmFscztcbiAgICAgICAgdGhpcy50b2tlbml6ZSgpO1xuICAgIH1cbiAgICB2YWxpZGF0aW9uVmFsdWUobWFza2VkVmFsdWUgPSAnJykge1xuICAgICAgICBsZXQgdmFsdWUgPSBtYXNrZWRWYWx1ZTtcbiAgICAgICAgc2VxdWVuY2UodGhpcy52YWxpZGF0aW9uVG9rZW5zKVxuICAgICAgICAgICAgLnJ1bihtYXNrZWRWYWx1ZSlcbiAgICAgICAgICAgIC5mb2xkKHVubWFza2VkID0+IHtcbiAgICAgICAgICAgIHZhbHVlID0gdW5tYXNrZWQuam9pbignJyk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIHJhd1ZhbHVlKG1hc2tlZFZhbHVlID0gJycpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gbWFza2VkVmFsdWU7XG4gICAgICAgIGlmICghdGhpcy5yYXdUb2tlbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgc2VxdWVuY2UodGhpcy5yYXdUb2tlbnMpXG4gICAgICAgICAgICAucnVuKG1hc2tlZFZhbHVlKVxuICAgICAgICAgICAgLmZvbGQodW5tYXNrZWQgPT4ge1xuICAgICAgICAgICAgdmFsdWUgPSB1bm1hc2tlZC5qb2luKCcnKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIG1hc2tSYXcocmF3VmFsdWUgPSAnJykge1xuICAgICAgICBsZXQgdmFsdWUgPSByYXdWYWx1ZTtcbiAgICAgICAgaWYgKCF0aGlzLm1hc2tUb2tlbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgc2VxdWVuY2UodGhpcy5tYXNrVG9rZW5zKVxuICAgICAgICAgICAgLnJ1bihyYXdWYWx1ZSlcbiAgICAgICAgICAgIC5mb2xkKG1hc2tlZCA9PiB7XG4gICAgICAgICAgICB2YWx1ZSA9IG1hc2tlZC5qb2luKCcnKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgbWFza0lucHV0KGlucHV0LCBjb250cm9sLCBzcGxpdFBvaW50KSB7XG4gICAgICAgIGlmIChpbnB1dC5sZW5ndGggPCBjb250cm9sLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWFza1JlbW92ZWQoaW5wdXQsIGNvbnRyb2wsIHNwbGl0UG9pbnQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm1hc2tJbnNlcnRlZChpbnB1dCwgY29udHJvbCwgc3BsaXRQb2ludCk7XG4gICAgfVxuICAgIG1hc2tJblJhbmdlKHBhc3RlZCwgb2xkVmFsdWUsIHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gJyc7XG4gICAgICAgIGxldCBzZWxlY3Rpb24gPSBlbmQ7XG4gICAgICAgIGNvbnN0IGJlZm9yZUNoYW5nZSA9IG9sZFZhbHVlLnNwbGl0KCcnKS5zbGljZSgwLCBzdGFydCk7XG4gICAgICAgIGNvbnN0IGFmdGVyQ2hhbmdlID0gb2xkVmFsdWUuc3BsaXQoJycpLnNsaWNlKGVuZCk7XG4gICAgICAgIHNlcXVlbmNlKHRoaXMubWFza1Rva2Vucy5zbGljZShzdGFydCwgZW5kKSlcbiAgICAgICAgICAgIC5ydW4ocGFzdGVkKVxuICAgICAgICAgICAgLmZvbGQobWFza2VkID0+IHtcbiAgICAgICAgICAgIHZhbHVlID0gYmVmb3JlQ2hhbmdlXG4gICAgICAgICAgICAgICAgLmNvbmNhdChtYXNrZWQpXG4gICAgICAgICAgICAgICAgLmNvbmNhdChhZnRlckNoYW5nZSlcbiAgICAgICAgICAgICAgICAuam9pbignJyk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2VsZWN0aW9uLFxuICAgICAgICAgICAgdmFsdWVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgbWFza1JlbW92ZWQoaW5wdXQsIGNvbnRyb2wsIHNwbGl0UG9pbnQpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gJyc7XG4gICAgICAgIGxldCBzZWxlY3Rpb24gPSBzcGxpdFBvaW50O1xuICAgICAgICBjb25zdCB1bmNoYW5nZWQgPSBpbnB1dC5zcGxpdCgnJykuc2xpY2Uoc3BsaXRQb2ludCk7XG4gICAgICAgIGNvbnN0IGNoYW5nZWQgPSBpbnB1dC5zcGxpdCgnJykuc2xpY2UoMCwgc3BsaXRQb2ludCkuam9pbignJyk7XG4gICAgICAgIGNvbnN0IHRha2UkJDEgPSB0aGlzLm1hc2tUb2tlbnMubGVuZ3RoIC0gKGlucHV0Lmxlbmd0aCAtIHNwbGl0UG9pbnQpO1xuICAgICAgICBzZXF1ZW5jZSh0aGlzLm1hc2tUb2tlbnMuc2xpY2UoMCwgdGFrZSQkMSkpXG4gICAgICAgICAgICAucnVuKGNoYW5nZWQsIGNvbnRyb2wpXG4gICAgICAgICAgICAuZm9sZChtYXNrZWQgPT4ge1xuICAgICAgICAgICAgc2VsZWN0aW9uID0gdGhpcy5hZGp1c3RQb3NpdGlvbihtYXNrZWQsIHNlbGVjdGlvbik7XG4gICAgICAgICAgICB2YWx1ZSA9IG1hc2tlZC5jb25jYXQodW5jaGFuZ2VkKS5qb2luKCcnKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzZWxlY3Rpb24sXG4gICAgICAgICAgICB2YWx1ZVxuICAgICAgICB9O1xuICAgIH1cbiAgICBhZGp1c3RQb3NpdGlvbihpbnB1dCwgc2VsZWN0aW9uKSB7XG4gICAgICAgIGNvbnN0IGNhcmV0Q2hhciA9IGlucHV0W3NlbGVjdGlvbl07XG4gICAgICAgIGNvbnN0IGlzTGl0ZXJhbCA9IHRoaXMubWFza1Rva2Vuc1tzZWxlY3Rpb25dLmlzTGl0ZXJhbChjYXJldENoYXIpO1xuICAgICAgICBpZiAoIWlzTGl0ZXJhbCAmJiBjYXJldENoYXIgIT09IHRoaXMucHJvbXB0KSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0aW9uICsgMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2VsZWN0aW9uO1xuICAgIH1cbiAgICBtYXNrSW5zZXJ0ZWQoaW5wdXQsIGNvbnRyb2wsIHNwbGl0UG9pbnQpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gJyc7XG4gICAgICAgIGxldCBzZWxlY3Rpb24gPSBzcGxpdFBvaW50O1xuICAgICAgICBjb25zdCBjaGFuZ2VkID0gaW5wdXQuc2xpY2UoMCwgc3BsaXRQb2ludCk7XG4gICAgICAgIHNlcXVlbmNlKHRoaXMudW5tYXNrVG9rZW5zKVxuICAgICAgICAgICAgLnJ1bihjaGFuZ2VkLCBjb250cm9sKVxuICAgICAgICAgICAgLmNoYWluKHVubWFza2VkID0+IHtcbiAgICAgICAgICAgIHNlbGVjdGlvbiA9IHVubWFza2VkLmpvaW4oJycpLmxlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IHVuY2hhbmdlZCA9IGNvbnRyb2wuc2xpY2Uoc2VsZWN0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiBzZXF1ZW5jZSh0aGlzLm1hc2tUb2tlbnMpXG4gICAgICAgICAgICAgICAgLnJ1bih1bm1hc2tlZC5qb2luKCcnKSArIHVuY2hhbmdlZCwgY29udHJvbCk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuZm9sZChtYXNrZWQgPT4ge1xuICAgICAgICAgICAgdmFsdWUgPSBtYXNrZWQuam9pbignJyk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2VsZWN0aW9uLFxuICAgICAgICAgICAgdmFsdWVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZ2V0IG1hc2tUb2tlbkNyZWF0b3IoKSB7XG4gICAgICAgIGNvbnN0IHsgcHJvbXB0LCBwcm9tcHRQbGFjZWhvbGRlciB9ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxpdGVyYWw6IHJ1bGUgPT4gbGl0ZXJhbChydWxlKSxcbiAgICAgICAgICAgIG1hc2s6IHJ1bGUgPT4gbWFzayh7IHByb21wdCwgcHJvbXB0UGxhY2Vob2xkZXIgfSkocnVsZSlcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZ2V0IHVubWFza1Rva2VuQ3JlYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxpdGVyYWw6IHJ1bGUgPT4gdW5saXRlcmFsKHJ1bGUpLFxuICAgICAgICAgICAgbWFzazogcnVsZSA9PiB1bm1hc2sodGhpcy5wcm9tcHQpKHJ1bGUpXG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldCByYXdUb2tlbkNyZWF0b3IoKSB7XG4gICAgICAgIGNvbnN0IHsgcHJvbXB0LCBwcm9tcHRQbGFjZWhvbGRlciwgaW5jbHVkZUxpdGVyYWxzIH0gPSB0aGlzO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbGl0ZXJhbDogXyA9PiByYXdMaXRlcmFsKGluY2x1ZGVMaXRlcmFscyksXG4gICAgICAgICAgICBtYXNrOiBfID0+IHJhd01hc2soeyBwcm9tcHQsIHByb21wdFBsYWNlaG9sZGVyIH0pXG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldCB2YWxpZGF0aW9uVG9rZW5DcmVhdG9yKCkge1xuICAgICAgICBjb25zdCB7IHByb21wdCB9ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxpdGVyYWw6IF8gPT4gcmF3TGl0ZXJhbChmYWxzZSksXG4gICAgICAgICAgICBtYXNrOiBfID0+IHJhd01hc2soeyBwcm9tcHQsIHByb21wdFBsYWNlaG9sZGVyOiAnJyB9KVxuICAgICAgICB9O1xuICAgIH1cbiAgICB0b2tlbml6ZSgpIHtcbiAgICAgICAgZ3JlZWR5KHRva2VuKHRoaXMucnVsZXMsIHRoaXMubWFza1Rva2VuQ3JlYXRvcikpXG4gICAgICAgICAgICAucnVuKHRoaXMubWFzaylcbiAgICAgICAgICAgIC5mb2xkKCh0b2tlbnMsIF8pID0+IHtcbiAgICAgICAgICAgIHRoaXMubWFza1Rva2VucyA9IHRva2VucztcbiAgICAgICAgfSk7XG4gICAgICAgIGdyZWVkeSh0b2tlbih0aGlzLnJ1bGVzLCB0aGlzLnVubWFza1Rva2VuQ3JlYXRvcikpXG4gICAgICAgICAgICAucnVuKHRoaXMubWFzaylcbiAgICAgICAgICAgIC5mb2xkKCh0b2tlbnMsIF8pID0+IHtcbiAgICAgICAgICAgIHRoaXMudW5tYXNrVG9rZW5zID0gdG9rZW5zO1xuICAgICAgICB9KTtcbiAgICAgICAgZ3JlZWR5KHRva2VuKHRoaXMucnVsZXMsIHRoaXMucmF3VG9rZW5DcmVhdG9yKSlcbiAgICAgICAgICAgIC5ydW4odGhpcy5tYXNrKVxuICAgICAgICAgICAgLmZvbGQoKHRva2VucywgXykgPT4ge1xuICAgICAgICAgICAgdGhpcy5yYXdUb2tlbnMgPSB0b2tlbnM7XG4gICAgICAgIH0pO1xuICAgICAgICBncmVlZHkodG9rZW4odGhpcy5ydWxlcywgdGhpcy52YWxpZGF0aW9uVG9rZW5DcmVhdG9yKSlcbiAgICAgICAgICAgIC5ydW4odGhpcy5tYXNrKVxuICAgICAgICAgICAgLmZvbGQoKHRva2VucywgXykgPT4ge1xuICAgICAgICAgICAgdGhpcy52YWxpZGF0aW9uVG9rZW5zID0gdG9rZW5zO1xuICAgICAgICB9KTtcbiAgICB9XG59O1xuTWFza2luZ1NlcnZpY2UgPSBfX2RlY29yYXRlKFtcbiAgICBJbmplY3RhYmxlKClcbl0sIE1hc2tpbmdTZXJ2aWNlKTtcblxudmFyIE1hc2tlZFRleHRCb3hDb21wb25lbnRfMTtcbmNvbnN0IHJlc29sdmVkUHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZShudWxsKTtcbmNvbnN0IEZPQ1VTRUQkMiA9ICdrLXN0YXRlLWZvY3VzZWQnO1xuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBbS2VuZG8gVUkgTWFza2VkVGV4dEJveCBjb21wb25lbnQgZm9yIEFuZ3VsYXJdKHslIHNsdWcgb3ZlcnZpZXdfbWFza2VkdGV4dGJveCAlfSkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzLW5vLXJ1blxuICpcbiAqIF9AQ29tcG9uZW50KHtcbiAqICAgICBzZWxlY3RvcjogJ215LWFwcCcsXG4gKiAgICAgdGVtcGxhdGU6IGBcbiAqICAgICAgPGtlbmRvLW1hc2tlZHRleHRib3hcbiAqICAgICAgICAgIFttYXNrXT1cIm1hc2tcIlxuICogICAgICAgICAgW3ZhbHVlXT1cInZhbHVlXCI+XG4gKiAgICAgIDwva2VuZG8tbWFza2VkdGV4dGJveD5cbiAqICAgICBgXG4gKiB9KVxuICpcbiAqIGNsYXNzIEFwcENvbXBvbmVudCB7XG4gKiAgcHVibGljIHZhbHVlOiBzdHJpbmcgPSBcIjk1ODAxMjgwNTU4MDc3OTJcIjtcbiAqICBwdWJsaWMgbWFzazogc3RyaW5nID0gXCIwMDAwLTAwMDAtMDAwMC0wMDAwXCI7XG4gKiB9XG4gKiBgYGBcbiAqL1xubGV0IE1hc2tlZFRleHRCb3hDb21wb25lbnQgPSBNYXNrZWRUZXh0Qm94Q29tcG9uZW50XzEgPSBjbGFzcyBNYXNrZWRUZXh0Qm94Q29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihzZXJ2aWNlLCByZW5kZXJlciwgaG9zdEVsZW1lbnQsIG5nWm9uZSwgaW5qZWN0b3IsIGNoYW5nZURldGVjdG9yLCBydGwpIHtcbiAgICAgICAgdGhpcy5zZXJ2aWNlID0gc2VydmljZTtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLmhvc3RFbGVtZW50ID0gaG9zdEVsZW1lbnQ7XG4gICAgICAgIHRoaXMubmdab25lID0gbmdab25lO1xuICAgICAgICB0aGlzLmluamVjdG9yID0gaW5qZWN0b3I7XG4gICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3IgPSBjaGFuZ2VEZXRlY3RvcjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBoaWRkZW5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZm9jdXNhYmxlSWQgPSBgay0ke2d1aWQoKX1gO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBNYXNrZWRUZXh0Qm94IGlzIGRpc2FibGVkIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgZGlzYWJsZWRfbWFza2VkdGV4dGJveCAlfSkpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBNYXNrZWRUZXh0Qm94IGlzIGluIGl0cyByZWFkLW9ubHkgc3RhdGUgKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyByZWFkb25seV9tYXNrZWR0ZXh0Ym94ICV9KSkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlYWRvbmx5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaG9zdENsYXNzZXMgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogUmVwcmVzZW50cyBhIHByb21wdCBjaGFyYWN0ZXIgZm9yIHRoZSBtYXNrZWQgdmFsdWUuXG4gICAgICAgICAqIEBkZWZhdWx0IGBfYFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wcm9tcHQgPSAnXyc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbmRpY2F0ZXMgYSBjaGFyYWN0ZXIgd2hpY2ggcmVwcmVzZW50cyBhbiBlbXB0eSBwb3NpdGlvbiBpbiB0aGUgcmF3IHZhbHVlLlxuICAgICAgICAgKiBAZGVmYXVsdCAnICdcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucHJvbXB0UGxhY2Vob2xkZXIgPSAnICc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbmRpY2F0ZXMgd2hldGhlciB0byBpbmNsdWRlIGxpdGVyYWxzIGluIHRoZSByYXcgdmFsdWUgIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgdmFsdWVfbWFza2VkdGV4dGJveCAlfSkpLlxuICAgICAgICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pbmNsdWRlTGl0ZXJhbHMgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyBpZiB0aGUgbWFzayBzaG91bGQgYmUgc2hvd24gb24gZm9jdXMgZm9yIGVtcHR5IHZhbHVlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tYXNrT25Gb2N1cyA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBidWlsdC1pbiBtYXNrIHZhbGlkYXRvciBpcyBlbmZvcmNlZCB3aGVuIGEgZm9ybSBpcyB2YWxpZGF0ZWRcbiAgICAgICAgICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyB2YWxpZGF0aW9uX21hc2tlZHRleHRib3ggJX0pKS5cbiAgICAgICAgICogQGRlZmF1bHQgdHJ1ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tYXNrVmFsaWRhdGlvbiA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgdGhlIFt0YWJpbmRleF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9HbG9iYWxfYXR0cmlidXRlcy90YWJpbmRleCkgb2YgdGhlIGNvbXBvbmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGFiaW5kZXggPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSB1c2VyIGZvY3VzZXMgdGhlIGBpbnB1dGAgZWxlbWVudC5cbiAgICAgICAgICpcbiAgICAgICAgICogPiBUbyB3aXJlIHRoZSBldmVudCBwcm9ncmFtbWF0aWNhbGx5LCB1c2UgdGhlIGBvbkZvY3VzYCBwcm9wZXJ0eS5cbiAgICAgICAgICpcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogYGBgdHMtbm8tcnVuXG4gICAgICAgICAqIF9AQ29tcG9uZW50KHtcbiAgICAgICAgICogc2VsZWN0b3I6ICdteS1hcHAnLFxuICAgICAgICAgKiB0ZW1wbGF0ZTogYFxuICAgICAgICAgKiAgPGtlbmRvLW1hc2tlZHRleHRib3ggKGZvY3VzKT1cImhhbmRsZUZvY3VzKClcIj48L2tlbmRvLW1hc2tlZHRleHRib3g+XG4gICAgICAgICAqIGBcbiAgICAgICAgICogfSlcbiAgICAgICAgICogY2xhc3MgQXBwQ29tcG9uZW50IHtcbiAgICAgICAgICogICBwdWJsaWMgaGFuZGxlRm9jdXMoKTogdm9pZCB7XG4gICAgICAgICAqICAgICAgY29uc29sZS5sb2coXCJDb21wb25lbnQgaXMgZm9jdXNlZFwiKTtcbiAgICAgICAgICogICB9XG4gICAgICAgICAqIH1cbiAgICAgICAgICogYGBgXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uRm9jdXMgPSBuZXcgRXZlbnRFbWl0dGVyKCk7IC8vdHNsaW50OmRpc2FibGUtbGluZTpuby1vdXRwdXQtcmVuYW1lXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgdGhlIGBpbnB1dGAgZWxlbWVudCBnZXRzIGJsdXJyZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqID4gVG8gd2lyZSB0aGUgZXZlbnQgcHJvZ3JhbW1hdGljYWxseSwgdXNlIHRoZSBgb25CbHVyYCBwcm9wZXJ0eS5cbiAgICAgICAgICpcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogYGBgdHMtbm8tcnVuXG4gICAgICAgICAqIF9AQ29tcG9uZW50KHtcbiAgICAgICAgICogc2VsZWN0b3I6ICdteS1hcHAnLFxuICAgICAgICAgKiB0ZW1wbGF0ZTogYFxuICAgICAgICAgKiAgPGtlbmRvLW1hc2tlZHRleHRib3ggKGJsdXIpPVwiaGFuZGxlQmx1cigpXCI+PC9rZW5kby1tYXNrZWR0ZXh0Ym94PlxuICAgICAgICAgKiBgXG4gICAgICAgICAqIH0pXG4gICAgICAgICAqIGNsYXNzIEFwcENvbXBvbmVudCB7XG4gICAgICAgICAqICAgcHVibGljIGhhbmRsZUJsdXIoKTogdm9pZCB7XG4gICAgICAgICAqICAgICAgY29uc29sZS5sb2coXCJDb21wb25lbnQgaXMgYmx1cnJlZFwiKTtcbiAgICAgICAgICogICB9XG4gICAgICAgICAqIH1cbiAgICAgICAgICogYGBgXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uQmx1ciA9IG5ldyBFdmVudEVtaXR0ZXIoKTsgLy90c2xpbnQ6ZGlzYWJsZS1saW5lOm5vLW91dHB1dC1yZW5hbWVcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgdmFsdWUgY2hhbmdlcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudmFsdWVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMuZm9jdXNDbGljayA9IGZhbHNlO1xuICAgICAgICB0aGlzLmRlZmF1bHRSdWxlcyA9IHtcbiAgICAgICAgICAgIFwiI1wiOiAvW1xcZFxcc1xcK1xcLV0vLFxuICAgICAgICAgICAgXCImXCI6IC9bXFxTXS8sXG4gICAgICAgICAgICBcIjBcIjogL1tcXGRdLyxcbiAgICAgICAgICAgIFwiOVwiOiAvW1xcZFxcc10vLFxuICAgICAgICAgICAgXCI/XCI6IC9bYS16QS1aXFxzXS8sXG4gICAgICAgICAgICBcIkFcIjogL1thLXpBLVowLTldLyxcbiAgICAgICAgICAgIFwiQ1wiOiAvLi8sXG4gICAgICAgICAgICBcIkxcIjogL1thLXpBLVpdLyxcbiAgICAgICAgICAgIFwiYVwiOiAvW2EtekEtWjAtOVxcc10vXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaXNQYXN0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb24gPSBbMCwgMF07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhhbmRsZUZvY3VzID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5mb2N1c2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLm1hc2tPbkZvY3VzICYmIHRoaXMuZW1wdHlNYXNrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVJbnB1dCh0aGlzLnNlcnZpY2UubWFza1Jhdyh0aGlzLnZhbHVlKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgdGhpcy5zZXRTZWxlY3Rpb24oMCwgMCk7IH0sIDApO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhhc09ic2VydmVycyh0aGlzLm9uRm9jdXMpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkZvY3VzLmVtaXQoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBoaWRkZW5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGFuZGxlQ2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5mb2N1c2VkICYmICF0aGlzLmZvY3VzQ2xpY2spIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzQ2xpY2sgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgc2VsZWN0aW9uU3RhcnQsIHNlbGVjdGlvbkVuZCB9ID0gdGhpcy5pbnB1dC5uYXRpdmVFbGVtZW50O1xuICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rpb25TdGFydCA9PT0gc2VsZWN0aW9uRW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Rm9jdXNTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhhbmRsZUJsdXIgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yLm1hcmtGb3JDaGVjaygpO1xuICAgICAgICAgICAgdGhpcy5mb2N1c2VkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmZvY3VzQ2xpY2sgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICh0aGlzLm1hc2tPbkZvY3VzICYmIHRoaXMuZW1wdHlNYXNrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVJbnB1dCh0aGlzLm1hc2tlZFZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChoYXNPYnNlcnZlcnModGhpcy5vbkJsdXIpIHx8IHJlcXVpcmVzWm9uZU9uQmx1cih0aGlzLmNvbnRyb2wpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vblRvdWNoZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkJsdXIuZW1pdCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uQ2hhbmdlID0gKF8pID0+IHsgfTtcbiAgICAgICAgdGhpcy5vblRvdWNoZWQgPSAoKSA9PiB7IH07XG4gICAgICAgIHZhbGlkYXRlUGFja2FnZShwYWNrYWdlTWV0YWRhdGEpO1xuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IHJ0bCA/ICdydGwnIDogJ2x0cic7XG4gICAgICAgIHRoaXMudXBkYXRlU2VydmljZSgpO1xuICAgIH1cbiAgICBnZXQgaG9zdERpc2FibGVkQ2xhc3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpc2FibGVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFeHBvc2VzIHRoZSBSZWdFeHAtYmFzZWQgbWFzayB2YWxpZGF0aW9uIGFycmF5IChbc2VlIGV4YW1wbGVdKHslIHNsdWcgbWFza3NfbWFza2VkdGV4dGJveCAlfSkpLlxuICAgICAqL1xuICAgIGdldCBydWxlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3J1bGVzIHx8IHRoaXMuZGVmYXVsdFJ1bGVzO1xuICAgIH1cbiAgICBzZXQgcnVsZXModmFsdWUpIHtcbiAgICAgICAgdGhpcy5fcnVsZXMgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRSdWxlcywgdmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgc2V0IHRhYkluZGV4KHRhYkluZGV4KSB7XG4gICAgICAgIHRoaXMudGFiaW5kZXggPSB0YWJJbmRleDtcbiAgICB9XG4gICAgZ2V0IHRhYkluZGV4KCkge1xuICAgICAgICByZXR1cm4gdGhpcy50YWJpbmRleDtcbiAgICB9XG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIGlmICh0aGlzLmhvc3RFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUF0dHJpYnV0ZSh0aGlzLmhvc3RFbGVtZW50Lm5hdGl2ZUVsZW1lbnQsIFwidGFiaW5kZXhcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb250cm9sID0gdGhpcy5pbmplY3Rvci5nZXQoTmdDb250cm9sLCBudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqIFVzZWQgYnkgdGhlIFRleHRCb3hDb250YWluZXIgdG8gZGV0ZXJtaW5lIGlmIHRoZSBNYXNrZWRUZXh0Qm94IGlzIGVtcHR5LlxuICAgICAqL1xuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIGlmICh0aGlzLmlucHV0KSB7XG4gICAgICAgICAgICByZXR1cm4gIUJvb2xlYW4odGhpcy5pbnB1dC5uYXRpdmVFbGVtZW50LnZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgaGFuZGxlRHJhZ0Ryb3AoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9jdXNlcyB0aGUgTWFza2VkVGV4dEJveC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgdHMtbm8tcnVuXG4gICAgICogX0BDb21wb25lbnQoe1xuICAgICAqIHNlbGVjdG9yOiAnbXktYXBwJyxcbiAgICAgKiB0ZW1wbGF0ZTogYFxuICAgICAqICA8YnV0dG9uIChjbGljayk9XCJtYXNrZWRpbnB1dC5mb2N1cygpXCI+Rm9jdXMgdGhlIGlucHV0PC9idXR0b24+XG4gICAgICogIDxrZW5kby1tYXNrZWR0ZXh0Ym94ICNtYXNrZWRpbnB1dD48L2tlbmRvLW1hc2tlZHRleHRib3g+XG4gICAgICogYFxuICAgICAqIH0pXG4gICAgICogY2xhc3MgQXBwQ29tcG9uZW50IHsgfVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGZvY3VzKCkge1xuICAgICAgICBpZiAoIXRoaXMuaW5wdXQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlucHV0Lm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgdGhpcy5zZXRGb2N1c1NlbGVjdGlvbigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCbHVycyB0aGUgTWFza2VkVGV4dEJveC5cbiAgICAgKi9cbiAgICBibHVyKCkge1xuICAgICAgICBpZiAoIXRoaXMuaW5wdXQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlucHV0Lm5hdGl2ZUVsZW1lbnQuYmx1cigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgcGFzdGVIYW5kbGVyKGUpIHtcbiAgICAgICAgY29uc3QgeyBzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uRW5kIH0gPSBlLnRhcmdldDtcbiAgICAgICAgaWYgKHNlbGVjdGlvbkVuZCA9PT0gc2VsZWN0aW9uU3RhcnQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzUGFzdGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb24gPSBbc2VsZWN0aW9uU3RhcnQsIHNlbGVjdGlvbkVuZF07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBpbnB1dEhhbmRsZXIoZSkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICBjb25zdCBbc3RhcnQsIGVuZF0gPSB0aGlzLnNlbGVjdGlvbjtcbiAgICAgICAgaWYgKCF0aGlzLm1hc2spIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVmFsdWUodmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5pc1Bhc3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxldCByZXN1bHQ7XG4gICAgICAgIGlmICh0aGlzLmlzUGFzdGVkKSB7XG4gICAgICAgICAgICB0aGlzLmlzUGFzdGVkID0gZmFsc2U7XG4gICAgICAgICAgICBjb25zdCByaWdodFBhcnQgPSB0aGlzLm1hc2tlZFZhbHVlLmxlbmd0aCAtIGVuZDtcbiAgICAgICAgICAgIGNvbnN0IHRvID0gdmFsdWUubGVuZ3RoIC0gcmlnaHRQYXJ0O1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5zZXJ2aWNlLm1hc2tJblJhbmdlKHZhbHVlLnNsaWNlKHN0YXJ0LCB0byksIHRoaXMubWFza2VkVmFsdWUsIHN0YXJ0LCBlbmQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5zZXJ2aWNlLm1hc2tJbnB1dCh2YWx1ZSwgdGhpcy5tYXNrZWRWYWx1ZSwgZS50YXJnZXQuc2VsZWN0aW9uU3RhcnQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlSW5wdXQocmVzdWx0LnZhbHVlLCByZXN1bHQuc2VsZWN0aW9uKTtcbiAgICAgICAgdGhpcy51cGRhdGVWYWx1ZShyZXN1bHQudmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlcykge1xuICAgICAgICBpZiAoY2hhbmdlcy52YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMubm9ybWFsaXplVmFsdWUoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMubWFzaykge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVJbnB1dCh0aGlzLnZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXh0ID0gdGhpcy5leHRyYWN0Q2hhbmdlcyhjaGFuZ2VzKTtcbiAgICAgICAgdGhpcy51cGRhdGVTZXJ2aWNlKG5leHQpO1xuICAgICAgICBpZiAoaXNDaGFuZ2VkKCd2YWx1ZScsIGNoYW5nZXMpKSB7XG4gICAgICAgICAgICBjb25zdCBtYXNrZWRWYWx1ZSA9IHRoaXMuc2VydmljZS5tYXNrUmF3KHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgaWYgKG1hc2tlZFZhbHVlICE9PSB0aGlzLm1hc2tlZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVJbnB1dChtYXNrZWRWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYW55Q2hhbmdlZChbJ3Byb21wdFBsYWNlaG9sZGVyJywgJ2luY2x1ZGVMaXRlcmFscyddLCBjaGFuZ2VzKSkge1xuICAgICAgICAgICAgcmVzb2x2ZWRQcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVmFsdWUodGhpcy5tYXNrZWRWYWx1ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlSW5wdXQodGhpcy5zZXJ2aWNlLm1hc2tSYXcodGhpcy52YWx1ZSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKiBXcml0ZXMgYSBuZXcgdmFsdWUgdG8gdGhlIGVsZW1lbnQuXG4gICAgICovXG4gICAgd3JpdGVWYWx1ZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy5ub3JtYWxpemVWYWx1ZSh2YWx1ZSk7XG4gICAgICAgIHRoaXMudXBkYXRlSW5wdXQodGhpcy5zZXJ2aWNlLm1hc2tSYXcodGhpcy52YWx1ZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICogU2V0cyB0aGUgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCB3aGVuIGEgYGNoYW5nZWAgZXZlbnQgaXMgdHJpZ2dlcmVkLlxuICAgICAqL1xuICAgIHJlZ2lzdGVyT25DaGFuZ2UoZm4pIHtcbiAgICAgICAgdGhpcy5vbkNoYW5nZSA9IGZuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICogU2V0cyB0aGUgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCB3aGVuIGEgYHRvdWNoYCBldmVudCBpcyB0cmlnZ2VyZWQuXG4gICAgICovXG4gICAgcmVnaXN0ZXJPblRvdWNoZWQoZm4pIHtcbiAgICAgICAgdGhpcy5vblRvdWNoZWQgPSBmbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqIENhbGxlZCB3aGVuIHRoZSBzdGF0dXMgb2YgdGhlIGNvbXBvbmVudCBjaGFuZ2VzIHRvIG9yIGZyb20gYGRpc2FibGVkYC5cbiAgICAgKiBEZXBlbmRpbmcgb24gdGhlIHZhbHVlLCBpdCBlbmFibGVzIG9yIGRpc2FibGVzIHRoZSBhcHByb3ByaWF0ZSBET00gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpc0Rpc2FibGVkXG4gICAgICovXG4gICAgc2V0RGlzYWJsZWRTdGF0ZShpc0Rpc2FibGVkKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3IubWFya0ZvckNoZWNrKCk7XG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBpc0Rpc2FibGVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgdmFsaWRhdGUoXykge1xuICAgICAgICBpZiAodGhpcy5tYXNrVmFsaWRhdGlvbiA9PT0gZmFsc2UgfHwgIXRoaXMubWFzaykge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLnNlcnZpY2UudmFsaWRhdGlvblZhbHVlKHRoaXMubWFza2VkVmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tYXNrZWRWYWx1ZS5pbmRleE9mKHRoaXMucHJvbXB0KSAhPT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcGF0dGVybkVycm9yOiB7XG4gICAgICAgICAgICAgICAgICAgIG1hc2s6IHRoaXMubWFzayxcbiAgICAgICAgICAgICAgICAgICAgbWFza2VkVmFsdWU6IHRoaXMubWFza2VkVmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnZhbHVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHVwZGF0ZVZhbHVlKG1hc2tlZFZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLm1hc2sgJiYgIXRoaXMuc2VydmljZS52YWxpZGF0aW9uVmFsdWUobWFza2VkVmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy5zZXJ2aWNlLnJhd1ZhbHVlKG1hc2tlZFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9uQ2hhbmdlKHRoaXMudmFsdWUpO1xuICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQodGhpcy52YWx1ZSk7XG4gICAgfVxuICAgIHVwZGF0ZUlucHV0KG1hc2tlZFZhbHVlID0gJycsIHNlbGVjdGlvbikge1xuICAgICAgICB0aGlzLm1hc2tlZFZhbHVlID0gbWFza2VkVmFsdWU7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5tYXNrT25Gb2N1cyAmJiAhdGhpcy5mb2N1c2VkICYmIHRoaXMuZW1wdHlNYXNrID8gJycgOiBtYXNrZWRWYWx1ZTtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRQcm9wZXJ0eSh0aGlzLmlucHV0Lm5hdGl2ZUVsZW1lbnQsIFwidmFsdWVcIiwgdmFsdWUpO1xuICAgICAgICBpZiAoc2VsZWN0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0aW9uKHNlbGVjdGlvbiwgc2VsZWN0aW9uKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBleHRyYWN0Q2hhbmdlcyhjaGFuZ2VzKSB7XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhjaGFuZ2VzKS5maWx0ZXIoa2V5ID0+IGtleSAhPT0gJ3J1bGVzJykucmVkdWNlKChvYmosIGtleSkgPT4ge1xuICAgICAgICAgICAgb2JqW2tleV0gPSBjaGFuZ2VzW2tleV0uY3VycmVudFZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgfSwge30pOyAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lOmFsaWduXG4gICAgfVxuICAgIHVwZGF0ZVNlcnZpY2UoZXh0cmEpIHtcbiAgICAgICAgY29uc3QgY29uZmlnID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICBpbmNsdWRlTGl0ZXJhbHM6IHRoaXMuaW5jbHVkZUxpdGVyYWxzLFxuICAgICAgICAgICAgbWFzazogdGhpcy5tYXNrLFxuICAgICAgICAgICAgcHJvbXB0OiB0aGlzLnByb21wdCxcbiAgICAgICAgICAgIHByb21wdFBsYWNlaG9sZGVyOiB0aGlzLnByb21wdFBsYWNlaG9sZGVyLFxuICAgICAgICAgICAgcnVsZXM6IHRoaXMucnVsZXNcbiAgICAgICAgfSwgZXh0cmEpOyAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lOmFsaWduXG4gICAgICAgIHRoaXMuc2VydmljZS51cGRhdGUoY29uZmlnKTtcbiAgICB9XG4gICAgc2V0U2VsZWN0aW9uKHN0YXJ0ID0gdGhpcy5zZWxlY3Rpb25bMF0sIGVuZCA9IHRoaXMuc2VsZWN0aW9uWzFdKSB7XG4gICAgICAgIGlmICh0aGlzLmZvY3VzZWQpIHtcbiAgICAgICAgICAgIGludm9rZUVsZW1lbnRNZXRob2QodGhpcy5pbnB1dCwgJ3NldFNlbGVjdGlvblJhbmdlJywgc3RhcnQsIGVuZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGVtcHR5TWFzaygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VydmljZS5tYXNrUmF3KCkgPT09IHRoaXMubWFza2VkVmFsdWU7XG4gICAgfVxuICAgIHNldEZvY3VzU2VsZWN0aW9uKCkge1xuICAgICAgICBjb25zdCBzZWxlY3Rpb25TdGFydCA9IHRoaXMuaW5wdXQubmF0aXZlRWxlbWVudC5zZWxlY3Rpb25TdGFydDtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLm1hc2tlZFZhbHVlID8gdGhpcy5tYXNrZWRWYWx1ZS5pbmRleE9mKHRoaXMucHJvbXB0KSA6IDA7XG4gICAgICAgIGlmIChpbmRleCA+PSAwICYmIGluZGV4IDwgc2VsZWN0aW9uU3RhcnQpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uID0gW2luZGV4LCBpbmRleF07XG4gICAgICAgICAgICB0aGlzLnNldFNlbGVjdGlvbigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBmb2N1c2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0ZvY3VzZWQ7XG4gICAgfVxuICAgIHNldCBmb2N1c2VkKHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRm9jdXNlZCAhPT0gdmFsdWUgJiYgdGhpcy5ob3N0RWxlbWVudCkge1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuaG9zdEVsZW1lbnQubmF0aXZlRWxlbWVudDtcbiAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3MoZWxlbWVudCwgRk9DVVNFRCQyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3MoZWxlbWVudCwgRk9DVVNFRCQyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNGb2N1c2VkID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbm9ybWFsaXplVmFsdWUodmFsdWUgPSB0aGlzLnZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHByZXNlbnQgPSBpc1ByZXNlbnQodmFsdWUpO1xuICAgICAgICBpZiAocHJlc2VudCAmJiB0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpZiAoaXNEZXZNb2RlKCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBNYXNrZWRUZXh0Qm94IGNvbXBvbmVudCBzdXBwb3J0cyBvbmx5IHN0cmluZyB2YWx1ZXMuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gU3RyaW5nKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJlc2VudCA/IHZhbHVlIDogJyc7XG4gICAgfVxufTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIE1hc2tlZFRleHRCb3hDb21wb25lbnQucHJvdG90eXBlLCBcImZvY3VzYWJsZUlkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgTWFza2VkVGV4dEJveENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGlzYWJsZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBNYXNrZWRUZXh0Qm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJyZWFkb25seVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgTWFza2VkVGV4dEJveENvbXBvbmVudC5wcm90b3R5cGUsIFwidGl0bGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdhdHRyLmRpcicpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBNYXNrZWRUZXh0Qm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXJlY3Rpb25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLXdpZGdldCcpLFxuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLW1hc2tlZHRleHRib3gnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIE1hc2tlZFRleHRCb3hDb21wb25lbnQucHJvdG90eXBlLCBcImhvc3RDbGFzc2VzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay1zdGF0ZS1kaXNhYmxlZCcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBNYXNrZWRUZXh0Qm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJob3N0RGlzYWJsZWRDbGFzc1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIE1hc2tlZFRleHRCb3hDb21wb25lbnQucHJvdG90eXBlLCBcIm1hc2tcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIE1hc2tlZFRleHRCb3hDb21wb25lbnQucHJvdG90eXBlLCBcInZhbHVlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSlcbl0sIE1hc2tlZFRleHRCb3hDb21wb25lbnQucHJvdG90eXBlLCBcInJ1bGVzXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgTWFza2VkVGV4dEJveENvbXBvbmVudC5wcm90b3R5cGUsIFwicHJvbXB0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBNYXNrZWRUZXh0Qm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJwcm9tcHRQbGFjZWhvbGRlclwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIE1hc2tlZFRleHRCb3hDb21wb25lbnQucHJvdG90eXBlLCBcImluY2x1ZGVMaXRlcmFsc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIE1hc2tlZFRleHRCb3hDb21wb25lbnQucHJvdG90eXBlLCBcIm1hc2tPbkZvY3VzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgTWFza2VkVGV4dEJveENvbXBvbmVudC5wcm90b3R5cGUsIFwibWFza1ZhbGlkYXRpb25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlcilcbl0sIE1hc2tlZFRleHRCb3hDb21wb25lbnQucHJvdG90eXBlLCBcInRhYmluZGV4XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOdW1iZXIpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTnVtYmVyXSlcbl0sIE1hc2tlZFRleHRCb3hDb21wb25lbnQucHJvdG90eXBlLCBcInRhYkluZGV4XCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCdmb2N1cycpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBNYXNrZWRUZXh0Qm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJvbkZvY3VzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoJ2JsdXInKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgTWFza2VkVGV4dEJveENvbXBvbmVudC5wcm90b3R5cGUsIFwib25CbHVyXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgTWFza2VkVGV4dEJveENvbXBvbmVudC5wcm90b3R5cGUsIFwidmFsdWVDaGFuZ2VcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIFZpZXdDaGlsZCgnaW5wdXQnLCB7IHN0YXRpYzogdHJ1ZSB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRWxlbWVudFJlZilcbl0sIE1hc2tlZFRleHRCb3hDb21wb25lbnQucHJvdG90eXBlLCBcImlucHV0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0TGlzdGVuZXIoJ3Bhc3RlJywgWyckZXZlbnQnXSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZ1bmN0aW9uKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cmV0dXJudHlwZVwiLCB2b2lkIDApXG5dLCBNYXNrZWRUZXh0Qm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJwYXN0ZUhhbmRsZXJcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0TGlzdGVuZXIoJ2lucHV0JywgWyckZXZlbnQnXSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZ1bmN0aW9uKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cmV0dXJudHlwZVwiLCB2b2lkIDApXG5dLCBNYXNrZWRUZXh0Qm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJpbnB1dEhhbmRsZXJcIiwgbnVsbCk7XG5NYXNrZWRUZXh0Qm94Q29tcG9uZW50ID0gTWFza2VkVGV4dEJveENvbXBvbmVudF8xID0gX19kZWNvcmF0ZShbXG4gICAgQ29tcG9uZW50KHtcbiAgICAgICAgZXhwb3J0QXM6ICdrZW5kb01hc2tlZFRleHRCb3gnLFxuICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgIE1hc2tpbmdTZXJ2aWNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG11bHRpOiB0cnVlLFxuICAgICAgICAgICAgICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxuICAgICAgICAgICAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IE1hc2tlZFRleHRCb3hDb21wb25lbnRfMSkgLyogdHNsaW50OmRpc2FibGUtbGluZSAqL1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBtdWx0aTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBwcm92aWRlOiBOR19WQUxJREFUT1JTLFxuICAgICAgICAgICAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IE1hc2tlZFRleHRCb3hDb21wb25lbnRfMSkgLyogdHNsaW50OmRpc2FibGUtbGluZSAqL1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwcm92aWRlOiBLZW5kb0lucHV0LFxuICAgICAgICAgICAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IE1hc2tlZFRleHRCb3hDb21wb25lbnRfMSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgc2VsZWN0b3I6ICdrZW5kby1tYXNrZWR0ZXh0Ym94JyxcbiAgICAgICAgdGVtcGxhdGU6IGBcbiAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICNpbnB1dFxuICAgICAgICAgICAgYXV0b2NvbXBsZXRlPVwib2ZmXCJcbiAgICAgICAgICAgIGF1dG9jb3JyZWN0PVwib2ZmXCJcbiAgICAgICAgICAgIGF1dG9jYXBpdGFsaXplPVwib2ZmXCJcbiAgICAgICAgICAgIHNwZWxsY2hlY2s9XCJmYWxzZVwiXG4gICAgICAgICAgICBjbGFzcz1cImstdGV4dGJveFwiXG4gICAgICAgICAgICBbaWRdPVwiZm9jdXNhYmxlSWRcIlxuICAgICAgICAgICAgW3RhYmluZGV4XT1cInRhYkluZGV4XCJcbiAgICAgICAgICAgIFthdHRyLnRpdGxlXT1cInRpdGxlXCJcbiAgICAgICAgICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiXG4gICAgICAgICAgICBbcmVhZG9ubHldPVwicmVhZG9ubHlcIlxuICAgICAgICAgICAgW2tlbmRvRXZlbnRzT3V0c2lkZUFuZ3VsYXJdPVwie1xuICAgICAgICAgICAgICAgIGZvY3VzOiBoYW5kbGVGb2N1cyxcbiAgICAgICAgICAgICAgICBibHVyOiBoYW5kbGVCbHVyLFxuICAgICAgICAgICAgICAgIGNsaWNrOiBoYW5kbGVDbGljayxcbiAgICAgICAgICAgICAgICBkcmFnc3RhcnQ6IGhhbmRsZURyYWdEcm9wLFxuICAgICAgICAgICAgICAgIGRyb3A6IGhhbmRsZURyYWdEcm9wXG4gICAgICAgICAgICB9XCJcbiAgICAgICAgLz5cbiAgICBgXG4gICAgfSksXG4gICAgX19wYXJhbSg2LCBPcHRpb25hbCgpKSwgX19wYXJhbSg2LCBJbmplY3QoUlRMKSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtNYXNraW5nU2VydmljZSxcbiAgICAgICAgUmVuZGVyZXIyLFxuICAgICAgICBFbGVtZW50UmVmLFxuICAgICAgICBOZ1pvbmUsXG4gICAgICAgIEluamVjdG9yLFxuICAgICAgICBDaGFuZ2VEZXRlY3RvclJlZiwgQm9vbGVhbl0pXG5dLCBNYXNrZWRUZXh0Qm94Q29tcG9uZW50KTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNsYXNzIFNsaWRlclRpY2sge1xuICAgIGNvbnN0cnVjdG9yKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5jbGFzc2VzID0ge1xuICAgICAgICAgICAgJ2stdGljayc6IHRydWVcbiAgICAgICAgfTtcbiAgICB9XG59XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xubGV0IFNsaWRlclRpY2tzQ29tcG9uZW50ID0gY2xhc3MgU2xpZGVyVGlja3NDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHJ0bCkge1xuICAgICAgICB0aGlzLnJ0bCA9IHJ0bDtcbiAgICAgICAgdGhpcy53cmFwcGVyQ2xhc3NlcyA9ICdrLXJlc2V0IGstc2xpZGVyLWl0ZW1zJztcbiAgICAgICAgdGhpcy50aWNrcyA9IFtdO1xuICAgIH1cbiAgICBuZ09uQ2hhbmdlcyhfKSB7XG4gICAgICAgIHRoaXMuY3JlYXRlVGlja3MoKTtcbiAgICB9XG4gICAgY3JlYXRlVGlja3MoKSB7XG4gICAgICAgIGNvbnN0IGNvdW50ID0gY2FsY3VsYXRlVGlja3NDb3VudCh0aGlzLm1pbiwgdGhpcy5tYXgsIHRoaXMuc3RlcCk7XG4gICAgICAgIGNvbnN0IGxhcmdlU3RlcCA9IHRoaXMubGFyZ2VTdGVwO1xuICAgICAgICBjb25zdCB0aWNrVmFsdWVQcm9wcyA9IHtcbiAgICAgICAgICAgIG1heDogdGhpcy5tYXgsXG4gICAgICAgICAgICBtaW46IHRoaXMubWluLFxuICAgICAgICAgICAgc21hbGxTdGVwOiB0aGlzLnN0ZXBcbiAgICAgICAgfTtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKG5ldyBTbGlkZXJUaWNrKGNhbGN1bGF0ZVZhbHVlRnJvbVRpY2soaSwgdGlja1ZhbHVlUHJvcHMpKSk7XG4gICAgICAgICAgICBpZiAobGFyZ2VTdGVwICYmIGkgJSBsYXJnZVN0ZXAgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXN1bHRbaV0ubGFyZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJlc3VsdFtpXS5jbGFzc2VzWydrLXRpY2stbGFyZ2UnXSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucnRsIHx8IHRoaXMudmVydGljYWwpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5yZXZlcnNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHJlc3VsdFswXS5jbGFzc2VzLCB0aGlzLmVuZFRpY2tDbGFzc2VzKHRydWUpKTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ocmVzdWx0W3Jlc3VsdC5sZW5ndGggLSAxXS5jbGFzc2VzLCB0aGlzLmVuZFRpY2tDbGFzc2VzKGZhbHNlKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50aWNrcyA9IHJlc3VsdDtcbiAgICB9XG4gICAgZW5kVGlja0NsYXNzZXMoZmlyc3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICdrLWZpcnN0JzogKGZpcnN0ICYmICF0aGlzLnZlcnRpY2FsKSB8fCAoIWZpcnN0ICYmIHRoaXMudmVydGljYWwpLFxuICAgICAgICAgICAgJ2stbGFzdCc6ICghZmlyc3QgJiYgIXRoaXMudmVydGljYWwpIHx8IChmaXJzdCAmJiB0aGlzLnZlcnRpY2FsKVxuICAgICAgICB9O1xuICAgIH1cbn07XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3MnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgU2xpZGVyVGlja3NDb21wb25lbnQucHJvdG90eXBlLCBcIndyYXBwZXJDbGFzc2VzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBGdW5jdGlvbilcbl0sIFNsaWRlclRpY2tzQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0aWNrVGl0bGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBTbGlkZXJUaWNrc0NvbXBvbmVudC5wcm90b3R5cGUsIFwidmVydGljYWxcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlcilcbl0sIFNsaWRlclRpY2tzQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzdGVwXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOdW1iZXIpXG5dLCBTbGlkZXJUaWNrc0NvbXBvbmVudC5wcm90b3R5cGUsIFwibGFyZ2VTdGVwXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOdW1iZXIpXG5dLCBTbGlkZXJUaWNrc0NvbXBvbmVudC5wcm90b3R5cGUsIFwibWluXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOdW1iZXIpXG5dLCBTbGlkZXJUaWNrc0NvbXBvbmVudC5wcm90b3R5cGUsIFwibWF4XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBUZW1wbGF0ZVJlZilcbl0sIFNsaWRlclRpY2tzQ29tcG9uZW50LnByb3RvdHlwZSwgXCJsYWJlbFRlbXBsYXRlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBWaWV3Q2hpbGRyZW4oJ3RpY2tFbGVtZW50JyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFF1ZXJ5TGlzdClcbl0sIFNsaWRlclRpY2tzQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0aWNrRWxlbWVudHNcIiwgdm9pZCAwKTtcblNsaWRlclRpY2tzQ29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgQ29tcG9uZW50KHtcbiAgICAgICAgc2VsZWN0b3I6ICdba2VuZG9TbGlkZXJUaWNrc10nLFxuICAgICAgICB0ZW1wbGF0ZTogYFxuICAgIDxsaSAjdGlja0VsZW1lbnQgKm5nRm9yPVwibGV0IHRpY2sgb2YgdGlja3M7XCJcbiAgICAgICAgW25nQ2xhc3NdPVwidGljay5jbGFzc2VzXCJcbiAgICAgICAgdGl0bGU9XCJ7eyB0aWNrVGl0bGUodGljay52YWx1ZSkgfX1cIlxuICAgICAgICByb2xlPVwicHJlc2VudGF0aW9uXCJcbiAgICAgPlxuICAgICAgICAgPG5nLWNvbnRhaW5lciBbbmdTd2l0Y2hdPVwidGljay5sYXJnZVwiPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJrLWxhYmVsXCIgKm5nU3dpdGNoQ2FzZT1cInRydWVcIj5cbiAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyIFtuZ1RlbXBsYXRlT3V0bGV0XT1cImxhYmVsVGVtcGxhdGUgfHwgZGVmYXVsdExhYmVsXCIgW25nVGVtcGxhdGVPdXRsZXRDb250ZXh0XT1cInRpY2tcIj5cbiAgICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nU3dpdGNoQ2FzZT1cImZhbHNlXCI+Jm5ic3A7PC9uZy1jb250YWluZXI+XG4gICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgPC9saT5cblxuICAgICA8bmctdGVtcGxhdGUgI2RlZmF1bHRMYWJlbCBsZXQtdmFsdWU9XCJ2YWx1ZVwiPlxuICAgICAgICB7eyB0aWNrVGl0bGUodmFsdWUpIH19XG4gICAgIDwvbmctdGVtcGxhdGU+XG4gIGBcbiAgICB9KSxcbiAgICBfX3BhcmFtKDAsIE9wdGlvbmFsKCkpLCBfX3BhcmFtKDAsIEluamVjdChSVEwpKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0Jvb2xlYW5dKVxuXSwgU2xpZGVyVGlja3NDb21wb25lbnQpO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xubGV0IFNsaWRlcnNDb21tb25Nb2R1bGUgPSBjbGFzcyBTbGlkZXJzQ29tbW9uTW9kdWxlIHtcbn07XG5TbGlkZXJzQ29tbW9uTW9kdWxlID0gX19kZWNvcmF0ZShbXG4gICAgTmdNb2R1bGUoe1xuICAgICAgICBkZWNsYXJhdGlvbnM6IFtcbiAgICAgICAgICAgIFNsaWRlclRpY2tzQ29tcG9uZW50LFxuICAgICAgICAgICAgTGFiZWxUZW1wbGF0ZURpcmVjdGl2ZVxuICAgICAgICBdLFxuICAgICAgICBleHBvcnRzOiBbXG4gICAgICAgICAgICBMYWJlbFRlbXBsYXRlRGlyZWN0aXZlLFxuICAgICAgICAgICAgU2xpZGVyVGlja3NDb21wb25lbnQsXG4gICAgICAgICAgICBEcmFnZ2FibGVNb2R1bGUsXG4gICAgICAgICAgICBFdmVudHNNb2R1bGUsXG4gICAgICAgICAgICBSZXNpemVTZW5zb3JNb2R1bGVcbiAgICAgICAgXSxcbiAgICAgICAgaW1wb3J0czogW0NvbW1vbk1vZHVsZSwgRHJhZ2dhYmxlTW9kdWxlLCBFdmVudHNNb2R1bGUsIFJlc2l6ZVNlbnNvck1vZHVsZV1cbiAgICB9KVxuXSwgU2xpZGVyc0NvbW1vbk1vZHVsZSk7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5jbGFzcyBTbGlkZXJNZXNzYWdlcyBleHRlbmRzIENvbXBvbmVudE1lc3NhZ2VzIHtcbn1cbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIFNsaWRlck1lc3NhZ2VzLnByb3RvdHlwZSwgXCJkZWNyZW1lbnRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIFNsaWRlck1lc3NhZ2VzLnByb3RvdHlwZSwgXCJpbmNyZW1lbnRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIFNsaWRlck1lc3NhZ2VzLnByb3RvdHlwZSwgXCJkcmFnSGFuZGxlXCIsIHZvaWQgMCk7XG5cbnZhciBMb2NhbGl6ZWRTbGlkZXJNZXNzYWdlc0RpcmVjdGl2ZV8xO1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmxldCBMb2NhbGl6ZWRTbGlkZXJNZXNzYWdlc0RpcmVjdGl2ZSA9IExvY2FsaXplZFNsaWRlck1lc3NhZ2VzRGlyZWN0aXZlXzEgPSBjbGFzcyBMb2NhbGl6ZWRTbGlkZXJNZXNzYWdlc0RpcmVjdGl2ZSBleHRlbmRzIFNsaWRlck1lc3NhZ2VzIHtcbiAgICBjb25zdHJ1Y3RvcihzZXJ2aWNlKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc2VydmljZSA9IHNlcnZpY2U7XG4gICAgfVxufTtcbkxvY2FsaXplZFNsaWRlck1lc3NhZ2VzRGlyZWN0aXZlID0gTG9jYWxpemVkU2xpZGVyTWVzc2FnZXNEaXJlY3RpdmVfMSA9IF9fZGVjb3JhdGUoW1xuICAgIERpcmVjdGl2ZSh7XG4gICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHByb3ZpZGU6IFNsaWRlck1lc3NhZ2VzLFxuICAgICAgICAgICAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IExvY2FsaXplZFNsaWRlck1lc3NhZ2VzRGlyZWN0aXZlXzEpIC8vIHRzbGludDpkaXNhYmxlLWxpbmU6bm8tZm9yd2FyZC1yZWZcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgc2VsZWN0b3I6ICdba2VuZG9TbGlkZXJMb2NhbGl6ZWRNZXNzYWdlc10nXG4gICAgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtMb2NhbGl6YXRpb25TZXJ2aWNlXSlcbl0sIExvY2FsaXplZFNsaWRlck1lc3NhZ2VzRGlyZWN0aXZlKTtcblxudmFyIFNsaWRlckN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50XzE7XG4vKipcbiAqIEN1c3RvbSBjb21wb25lbnQgbWVzc2FnZXMgb3ZlcnJpZGUgZGVmYXVsdCBjb21wb25lbnQgbWVzc2FnZXMuXG4gKi9cbmxldCBTbGlkZXJDdXN0b21NZXNzYWdlc0NvbXBvbmVudCA9IFNsaWRlckN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50XzEgPSBjbGFzcyBTbGlkZXJDdXN0b21NZXNzYWdlc0NvbXBvbmVudCBleHRlbmRzIFNsaWRlck1lc3NhZ2VzIHtcbiAgICBjb25zdHJ1Y3RvcihzZXJ2aWNlKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc2VydmljZSA9IHNlcnZpY2U7XG4gICAgfVxuICAgIGdldCBvdmVycmlkZSgpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufTtcblNsaWRlckN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50ID0gU2xpZGVyQ3VzdG9tTWVzc2FnZXNDb21wb25lbnRfMSA9IF9fZGVjb3JhdGUoW1xuICAgIENvbXBvbmVudCh7XG4gICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHByb3ZpZGU6IFNsaWRlck1lc3NhZ2VzLFxuICAgICAgICAgICAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IFNsaWRlckN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50XzEpIC8vIHRzbGludDpkaXNhYmxlLWxpbmU6bm8tZm9yd2FyZC1yZWZcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgc2VsZWN0b3I6ICdrZW5kby1zbGlkZXItbWVzc2FnZXMnLFxuICAgICAgICB0ZW1wbGF0ZTogYGBcbiAgICB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0xvY2FsaXphdGlvblNlcnZpY2VdKVxuXSwgU2xpZGVyQ3VzdG9tTWVzc2FnZXNDb21wb25lbnQpO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIFtOZ01vZHVsZV0oe3sgc2l0ZS5kYXRhLnVybHMuYW5ndWxhclsnbmdtb2R1bGVhcGknXSB9fSlcbiAqIGRlZmluaXRpb24gZm9yIHRoZSBTbGlkZXIgY29tcG9uZW50LlxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogYGBgdHMtbm8tcnVuXG4gKiAvLyBJbXBvcnQgdGhlIElucHV0cyBtb2R1bGVcbiAqIGltcG9ydCB7IFNsaWRlck1vZHVsZSB9IGZyb20gJ0Bwcm9ncmVzcy9rZW5kby1hbmd1bGFyLWlucHV0cyc7XG4gKlxuICogLy8gVGhlIGJyb3dzZXIgcGxhdGZvcm0gd2l0aCBhIGNvbXBpbGVyXG4gKiBpbXBvcnQgeyBwbGF0Zm9ybUJyb3dzZXJEeW5hbWljIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlci1keW5hbWljJztcbiAqIGltcG9ydCB7IEJyb3dzZXJBbmltYXRpb25zTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlci9hbmltYXRpb25zJztcbiAqXG4gKiBpbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuICpcbiAqIC8vIEltcG9ydCB0aGUgYXBwIGNvbXBvbmVudFxuICogaW1wb3J0IHsgQXBwQ29tcG9uZW50IH0gZnJvbSAnLi9hcHAuY29tcG9uZW50JztcbiAqXG4gKiAvLyBEZWZpbmUgdGhlIGFwcCBtb2R1bGVcbiAqIF9ATmdNb2R1bGUoe1xuICogICAgIGRlY2xhcmF0aW9uczogW0FwcENvbXBvbmVudF0sIC8vIGRlY2xhcmUgYXBwIGNvbXBvbmVudFxuICogICAgIGltcG9ydHM6ICAgICAgW0Jyb3dzZXJNb2R1bGUsIEJyb3dzZXJBbmltYXRpb25zTW9kdWxlLCBTbGlkZXJNb2R1bGVdLCAvLyBpbXBvcnQgU2xpZGVyIG1vZHVsZVxuICogICAgIGJvb3RzdHJhcDogICAgW0FwcENvbXBvbmVudF1cbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgQXBwTW9kdWxlIHt9XG4gKlxuICogLy8gQ29tcGlsZSBhbmQgbGF1bmNoIHRoZSBtb2R1bGVcbiAqIHBsYXRmb3JtQnJvd3NlckR5bmFtaWMoKS5ib290c3RyYXBNb2R1bGUoQXBwTW9kdWxlKTtcbiAqXG4gKiBgYGBcbiAqL1xubGV0IFNsaWRlck1vZHVsZSA9IGNsYXNzIFNsaWRlck1vZHVsZSB7XG59O1xuU2xpZGVyTW9kdWxlID0gX19kZWNvcmF0ZShbXG4gICAgTmdNb2R1bGUoe1xuICAgICAgICBkZWNsYXJhdGlvbnM6IFtcbiAgICAgICAgICAgIFNsaWRlckNvbXBvbmVudCxcbiAgICAgICAgICAgIFNsaWRlckN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50LFxuICAgICAgICAgICAgTG9jYWxpemVkU2xpZGVyTWVzc2FnZXNEaXJlY3RpdmVcbiAgICAgICAgXSxcbiAgICAgICAgZXhwb3J0czogW1xuICAgICAgICAgICAgU2xpZGVyQ29tcG9uZW50LFxuICAgICAgICAgICAgU2xpZGVyQ3VzdG9tTWVzc2FnZXNDb21wb25lbnQsXG4gICAgICAgICAgICBMYWJlbFRlbXBsYXRlRGlyZWN0aXZlLFxuICAgICAgICAgICAgTG9jYWxpemVkU2xpZGVyTWVzc2FnZXNEaXJlY3RpdmVcbiAgICAgICAgXSxcbiAgICAgICAgaW1wb3J0czogW0NvbW1vbk1vZHVsZSwgU2xpZGVyc0NvbW1vbk1vZHVsZV1cbiAgICB9KVxuXSwgU2xpZGVyTW9kdWxlKTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNsYXNzIFJhbmdlU2xpZGVyTWVzc2FnZXMgZXh0ZW5kcyBDb21wb25lbnRNZXNzYWdlcyB7XG59XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBSYW5nZVNsaWRlck1lc3NhZ2VzLnByb3RvdHlwZSwgXCJkcmFnSGFuZGxlU3RhcnRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIFJhbmdlU2xpZGVyTWVzc2FnZXMucHJvdG90eXBlLCBcImRyYWdIYW5kbGVFbmRcIiwgdm9pZCAwKTtcblxudmFyIExvY2FsaXplZFJhbmdlU2xpZGVyTWVzc2FnZXNEaXJlY3RpdmVfMTtcbi8qKlxuICogQGhpZGRlblxuICovXG5sZXQgTG9jYWxpemVkUmFuZ2VTbGlkZXJNZXNzYWdlc0RpcmVjdGl2ZSA9IExvY2FsaXplZFJhbmdlU2xpZGVyTWVzc2FnZXNEaXJlY3RpdmVfMSA9IGNsYXNzIExvY2FsaXplZFJhbmdlU2xpZGVyTWVzc2FnZXNEaXJlY3RpdmUgZXh0ZW5kcyBSYW5nZVNsaWRlck1lc3NhZ2VzIHtcbiAgICBjb25zdHJ1Y3RvcihzZXJ2aWNlKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc2VydmljZSA9IHNlcnZpY2U7XG4gICAgfVxufTtcbkxvY2FsaXplZFJhbmdlU2xpZGVyTWVzc2FnZXNEaXJlY3RpdmUgPSBMb2NhbGl6ZWRSYW5nZVNsaWRlck1lc3NhZ2VzRGlyZWN0aXZlXzEgPSBfX2RlY29yYXRlKFtcbiAgICBEaXJlY3RpdmUoe1xuICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwcm92aWRlOiBSYW5nZVNsaWRlck1lc3NhZ2VzLFxuICAgICAgICAgICAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IExvY2FsaXplZFJhbmdlU2xpZGVyTWVzc2FnZXNEaXJlY3RpdmVfMSkgLy8gdHNsaW50OmRpc2FibGUtbGluZTpuby1mb3J3YXJkLXJlZlxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBzZWxlY3RvcjogJ1trZW5kb1NsaWRlckxvY2FsaXplZE1lc3NhZ2VzXSdcbiAgICB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0xvY2FsaXphdGlvblNlcnZpY2VdKVxuXSwgTG9jYWxpemVkUmFuZ2VTbGlkZXJNZXNzYWdlc0RpcmVjdGl2ZSk7XG5cbnZhciBSYW5nZVNsaWRlckN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50XzE7XG4vKipcbiAqIEN1c3RvbSBjb21wb25lbnQgbWVzc2FnZXMgb3ZlcnJpZGUgZGVmYXVsdCBjb21wb25lbnQgbWVzc2FnZXMuXG4gKi9cbmxldCBSYW5nZVNsaWRlckN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50ID0gUmFuZ2VTbGlkZXJDdXN0b21NZXNzYWdlc0NvbXBvbmVudF8xID0gY2xhc3MgUmFuZ2VTbGlkZXJDdXN0b21NZXNzYWdlc0NvbXBvbmVudCBleHRlbmRzIFJhbmdlU2xpZGVyTWVzc2FnZXMge1xuICAgIGNvbnN0cnVjdG9yKHNlcnZpY2UpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5zZXJ2aWNlID0gc2VydmljZTtcbiAgICB9XG4gICAgZ2V0IG92ZXJyaWRlKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59O1xuUmFuZ2VTbGlkZXJDdXN0b21NZXNzYWdlc0NvbXBvbmVudCA9IFJhbmdlU2xpZGVyQ3VzdG9tTWVzc2FnZXNDb21wb25lbnRfMSA9IF9fZGVjb3JhdGUoW1xuICAgIENvbXBvbmVudCh7XG4gICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHByb3ZpZGU6IFJhbmdlU2xpZGVyTWVzc2FnZXMsXG4gICAgICAgICAgICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gUmFuZ2VTbGlkZXJDdXN0b21NZXNzYWdlc0NvbXBvbmVudF8xKSAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lOm5vLWZvcndhcmQtcmVmXG4gICAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIHNlbGVjdG9yOiAna2VuZG8tcmFuZ2VzbGlkZXItbWVzc2FnZXMnLFxuICAgICAgICB0ZW1wbGF0ZTogYGBcbiAgICB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0xvY2FsaXphdGlvblNlcnZpY2VdKVxuXSwgUmFuZ2VTbGlkZXJDdXN0b21NZXNzYWdlc0NvbXBvbmVudCk7XG5cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgW05nTW9kdWxlXSh7eyBzaXRlLmRhdGEudXJscy5hbmd1bGFyWyduZ21vZHVsZWFwaSddIH19KVxuICogZGVmaW5pdGlvbiBmb3IgdGhlIFJhbmdlU2xpZGVyIGNvbXBvbmVudC5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIGBgYHRzLW5vLXJ1blxuICogLy8gSW1wb3J0IHRoZSBJbnB1dHMgbW9kdWxlXG4gKiBpbXBvcnQgeyBSYW5nZVNsaWRlck1vZHVsZSB9IGZyb20gJ0Bwcm9ncmVzcy9rZW5kby1hbmd1bGFyLWlucHV0cyc7XG4gKlxuICogLy8gVGhlIGJyb3dzZXIgcGxhdGZvcm0gd2l0aCBhIGNvbXBpbGVyXG4gKiBpbXBvcnQgeyBwbGF0Zm9ybUJyb3dzZXJEeW5hbWljIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlci1keW5hbWljJztcbiAqIGltcG9ydCB7IEJyb3dzZXJBbmltYXRpb25zTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlci9hbmltYXRpb25zJztcbiAqXG4gKiBpbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuICpcbiAqIC8vIEltcG9ydCB0aGUgYXBwIGNvbXBvbmVudFxuICogaW1wb3J0IHsgQXBwQ29tcG9uZW50IH0gZnJvbSAnLi9hcHAuY29tcG9uZW50JztcbiAqXG4gKiAvLyBEZWZpbmUgdGhlIGFwcCBtb2R1bGVcbiAqIF9ATmdNb2R1bGUoe1xuICogICAgIGRlY2xhcmF0aW9uczogW0FwcENvbXBvbmVudF0sIC8vIGRlY2xhcmUgYXBwIGNvbXBvbmVudFxuICogICAgIGltcG9ydHM6ICAgICAgW0Jyb3dzZXJNb2R1bGUsIEJyb3dzZXJBbmltYXRpb25zTW9kdWxlLCBSYW5nZVNsaWRlck1vZHVsZV0sIC8vIGltcG9ydCBSYW5nZVNsaWRlciBtb2R1bGVcbiAqICAgICBib290c3RyYXA6ICAgIFtBcHBDb21wb25lbnRdXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIEFwcE1vZHVsZSB7fVxuICpcbiAqIC8vIENvbXBpbGUgYW5kIGxhdW5jaCB0aGUgbW9kdWxlXG4gKiBwbGF0Zm9ybUJyb3dzZXJEeW5hbWljKCkuYm9vdHN0cmFwTW9kdWxlKEFwcE1vZHVsZSk7XG4gKlxuICogYGBgXG4gKi9cbmxldCBSYW5nZVNsaWRlck1vZHVsZSA9IGNsYXNzIFJhbmdlU2xpZGVyTW9kdWxlIHtcbn07XG5SYW5nZVNsaWRlck1vZHVsZSA9IF9fZGVjb3JhdGUoW1xuICAgIE5nTW9kdWxlKHtcbiAgICAgICAgZGVjbGFyYXRpb25zOiBbXG4gICAgICAgICAgICBSYW5nZVNsaWRlckNvbXBvbmVudCxcbiAgICAgICAgICAgIFJhbmdlU2xpZGVyQ3VzdG9tTWVzc2FnZXNDb21wb25lbnQsXG4gICAgICAgICAgICBMb2NhbGl6ZWRSYW5nZVNsaWRlck1lc3NhZ2VzRGlyZWN0aXZlXG4gICAgICAgIF0sXG4gICAgICAgIGV4cG9ydHM6IFtcbiAgICAgICAgICAgIFJhbmdlU2xpZGVyQ29tcG9uZW50LFxuICAgICAgICAgICAgUmFuZ2VTbGlkZXJDdXN0b21NZXNzYWdlc0NvbXBvbmVudCxcbiAgICAgICAgICAgIExvY2FsaXplZFJhbmdlU2xpZGVyTWVzc2FnZXNEaXJlY3RpdmUsXG4gICAgICAgICAgICBMYWJlbFRlbXBsYXRlRGlyZWN0aXZlXG4gICAgICAgIF0sXG4gICAgICAgIGltcG9ydHM6IFtDb21tb25Nb2R1bGUsIFNsaWRlcnNDb21tb25Nb2R1bGVdXG4gICAgfSlcbl0sIFJhbmdlU2xpZGVyTW9kdWxlKTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNsYXNzIE1lc3NhZ2VzIGV4dGVuZHMgQ29tcG9uZW50TWVzc2FnZXMge1xufVxuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgTWVzc2FnZXMucHJvdG90eXBlLCBcIm9uXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBNZXNzYWdlcy5wcm90b3R5cGUsIFwib2ZmXCIsIHZvaWQgMCk7XG5cbnZhciBMb2NhbGl6ZWRTd2l0Y2hNZXNzYWdlc0RpcmVjdGl2ZV8xO1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmxldCBMb2NhbGl6ZWRTd2l0Y2hNZXNzYWdlc0RpcmVjdGl2ZSA9IExvY2FsaXplZFN3aXRjaE1lc3NhZ2VzRGlyZWN0aXZlXzEgPSBjbGFzcyBMb2NhbGl6ZWRTd2l0Y2hNZXNzYWdlc0RpcmVjdGl2ZSBleHRlbmRzIE1lc3NhZ2VzIHtcbiAgICBjb25zdHJ1Y3RvcihzZXJ2aWNlKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc2VydmljZSA9IHNlcnZpY2U7XG4gICAgfVxufTtcbkxvY2FsaXplZFN3aXRjaE1lc3NhZ2VzRGlyZWN0aXZlID0gTG9jYWxpemVkU3dpdGNoTWVzc2FnZXNEaXJlY3RpdmVfMSA9IF9fZGVjb3JhdGUoW1xuICAgIERpcmVjdGl2ZSh7XG4gICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHByb3ZpZGU6IE1lc3NhZ2VzLFxuICAgICAgICAgICAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IExvY2FsaXplZFN3aXRjaE1lc3NhZ2VzRGlyZWN0aXZlXzEpIC8vIHRzbGludDpkaXNhYmxlLWxpbmU6bm8tZm9yd2FyZC1yZWZcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgc2VsZWN0b3I6ICdba2VuZG9Td2l0Y2hMb2NhbGl6ZWRNZXNzYWdlc10nXG4gICAgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtMb2NhbGl6YXRpb25TZXJ2aWNlXSlcbl0sIExvY2FsaXplZFN3aXRjaE1lc3NhZ2VzRGlyZWN0aXZlKTtcblxudmFyIFN3aXRjaEN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50XzE7XG4vKipcbiAqIEN1c3RvbSBjb21wb25lbnQgbWVzc2FnZXMgb3ZlcnJpZGUgZGVmYXVsdCBjb21wb25lbnQgbWVzc2FnZXMuXG4gKi9cbmxldCBTd2l0Y2hDdXN0b21NZXNzYWdlc0NvbXBvbmVudCA9IFN3aXRjaEN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50XzEgPSBjbGFzcyBTd2l0Y2hDdXN0b21NZXNzYWdlc0NvbXBvbmVudCBleHRlbmRzIE1lc3NhZ2VzIHtcbiAgICBjb25zdHJ1Y3RvcihzZXJ2aWNlKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc2VydmljZSA9IHNlcnZpY2U7XG4gICAgfVxuICAgIGdldCBvdmVycmlkZSgpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufTtcblN3aXRjaEN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50ID0gU3dpdGNoQ3VzdG9tTWVzc2FnZXNDb21wb25lbnRfMSA9IF9fZGVjb3JhdGUoW1xuICAgIENvbXBvbmVudCh7XG4gICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHByb3ZpZGU6IE1lc3NhZ2VzLFxuICAgICAgICAgICAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IFN3aXRjaEN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50XzEpIC8vIHRzbGludDpkaXNhYmxlLWxpbmU6bm8tZm9yd2FyZC1yZWZcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgc2VsZWN0b3I6ICdrZW5kby1zd2l0Y2gtbWVzc2FnZXMnLFxuICAgICAgICB0ZW1wbGF0ZTogYGBcbiAgICB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0xvY2FsaXphdGlvblNlcnZpY2VdKVxuXSwgU3dpdGNoQ3VzdG9tTWVzc2FnZXNDb21wb25lbnQpO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIFtOZ01vZHVsZV0oe3sgc2l0ZS5kYXRhLnVybHMuYW5ndWxhclsnbmdtb2R1bGVhcGknXSB9fSlcbiAqIGRlZmluaXRpb24gZm9yIHRoZSBTd2l0Y2ggY29tcG9uZW50LlxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogYGBgdHMtbm8tcnVuXG4gKiAvLyBJbXBvcnQgdGhlIFN3aXRjaCBtb2R1bGVcbiAqIGltcG9ydCB7IFN3aXRjaE1vZHVsZSB9IGZyb20gJ0Bwcm9ncmVzcy9rZW5kby1hbmd1bGFyLWlucHV0cyc7XG4gKlxuICogLy8gVGhlIGJyb3dzZXIgcGxhdGZvcm0gd2l0aCBhIGNvbXBpbGVyXG4gKiBpbXBvcnQgeyBwbGF0Zm9ybUJyb3dzZXJEeW5hbWljIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlci1keW5hbWljJztcbiAqXG4gKiBpbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuICpcbiAqIC8vIEltcG9ydCB0aGUgYXBwIGNvbXBvbmVudFxuICogaW1wb3J0IHsgQXBwQ29tcG9uZW50IH0gZnJvbSAnLi9hcHAuY29tcG9uZW50JztcbiAqXG4gKiAvLyBEZWZpbmUgdGhlIGFwcCBtb2R1bGVcbiAqIF9ATmdNb2R1bGUoe1xuICogICAgIGRlY2xhcmF0aW9uczogW0FwcENvbXBvbmVudF0sIC8vIGRlY2xhcmUgYXBwIGNvbXBvbmVudFxuICogICAgIGltcG9ydHM6ICAgICAgW0Jyb3dzZXJNb2R1bGUsIFN3aXRjaE1vZHVsZV0sIC8vIGltcG9ydCBTd2l0Y2ggbW9kdWxlXG4gKiAgICAgYm9vdHN0cmFwOiAgICBbQXBwQ29tcG9uZW50XVxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBBcHBNb2R1bGUge31cbiAqXG4gKiAvLyBDb21waWxlIGFuZCBsYXVuY2ggdGhlIG1vZHVsZVxuICogcGxhdGZvcm1Ccm93c2VyRHluYW1pYygpLmJvb3RzdHJhcE1vZHVsZShBcHBNb2R1bGUpO1xuICpcbiAqIGBgYFxuICovXG5sZXQgU3dpdGNoTW9kdWxlID0gY2xhc3MgU3dpdGNoTW9kdWxlIHtcbn07XG5Td2l0Y2hNb2R1bGUgPSBfX2RlY29yYXRlKFtcbiAgICBOZ01vZHVsZSh7XG4gICAgICAgIGRlY2xhcmF0aW9uczogW1xuICAgICAgICAgICAgU3dpdGNoQ29tcG9uZW50LFxuICAgICAgICAgICAgU3dpdGNoQ3VzdG9tTWVzc2FnZXNDb21wb25lbnQsXG4gICAgICAgICAgICBMb2NhbGl6ZWRTd2l0Y2hNZXNzYWdlc0RpcmVjdGl2ZVxuICAgICAgICBdLFxuICAgICAgICBleHBvcnRzOiBbXG4gICAgICAgICAgICBTd2l0Y2hDb21wb25lbnQsXG4gICAgICAgICAgICBTd2l0Y2hDdXN0b21NZXNzYWdlc0NvbXBvbmVudCxcbiAgICAgICAgICAgIExvY2FsaXplZFN3aXRjaE1lc3NhZ2VzRGlyZWN0aXZlXG4gICAgICAgIF0sXG4gICAgICAgIGltcG9ydHM6IFtDb21tb25Nb2R1bGUsIEV2ZW50c01vZHVsZSwgUmVzaXplU2Vuc29yTW9kdWxlXVxuICAgIH0pXG5dLCBTd2l0Y2hNb2R1bGUpO1xuXG52YXIgTG9jYWxpemVkTnVtZXJpY1RleHRCb3hNZXNzYWdlc0RpcmVjdGl2ZV8xO1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmxldCBMb2NhbGl6ZWROdW1lcmljVGV4dEJveE1lc3NhZ2VzRGlyZWN0aXZlID0gTG9jYWxpemVkTnVtZXJpY1RleHRCb3hNZXNzYWdlc0RpcmVjdGl2ZV8xID0gY2xhc3MgTG9jYWxpemVkTnVtZXJpY1RleHRCb3hNZXNzYWdlc0RpcmVjdGl2ZSBleHRlbmRzIE51bWVyaWNUZXh0Qm94TWVzc2FnZXMge1xuICAgIGNvbnN0cnVjdG9yKHNlcnZpY2UpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5zZXJ2aWNlID0gc2VydmljZTtcbiAgICB9XG59O1xuTG9jYWxpemVkTnVtZXJpY1RleHRCb3hNZXNzYWdlc0RpcmVjdGl2ZSA9IExvY2FsaXplZE51bWVyaWNUZXh0Qm94TWVzc2FnZXNEaXJlY3RpdmVfMSA9IF9fZGVjb3JhdGUoW1xuICAgIERpcmVjdGl2ZSh7XG4gICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHByb3ZpZGU6IE51bWVyaWNUZXh0Qm94TWVzc2FnZXMsXG4gICAgICAgICAgICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gTG9jYWxpemVkTnVtZXJpY1RleHRCb3hNZXNzYWdlc0RpcmVjdGl2ZV8xKSAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lOm5vLWZvcndhcmQtcmVmXG4gICAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIHNlbGVjdG9yOiAnW2tlbmRvTnVtZXJpY1RleHRCb3hMb2NhbGl6ZWRNZXNzYWdlc10nXG4gICAgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtMb2NhbGl6YXRpb25TZXJ2aWNlXSlcbl0sIExvY2FsaXplZE51bWVyaWNUZXh0Qm94TWVzc2FnZXNEaXJlY3RpdmUpO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIFtOZ01vZHVsZV0oe3sgc2l0ZS5kYXRhLnVybHMuYW5ndWxhclsnbmdtb2R1bGVhcGknXSB9fSlcbiAqIGRlZmluaXRpb24gZm9yIHRoZSBOdW1lcmljVGV4dEJveCBjb21wb25lbnQuXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBgYGB0cy1uby1ydW5cbiAqIC8vIEltcG9ydCB0aGUgTnVtZXJpY1RleHRCb3ggbW9kdWxlXG4gKiBpbXBvcnQgeyBOdW1lcmljVGV4dEJveE1vZHVsZSB9IGZyb20gJ0Bwcm9ncmVzcy9rZW5kby1hbmd1bGFyLWlucHV0cyc7XG4gKlxuICogLy8gVGhlIGJyb3dzZXIgcGxhdGZvcm0gd2l0aCBhIGNvbXBpbGVyXG4gKiBpbXBvcnQgeyBwbGF0Zm9ybUJyb3dzZXJEeW5hbWljIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlci1keW5hbWljJztcbiAqXG4gKiBpbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuICpcbiAqIC8vIEltcG9ydCB0aGUgYXBwIGNvbXBvbmVudFxuICogaW1wb3J0IHsgQXBwQ29tcG9uZW50IH0gZnJvbSAnLi9hcHAuY29tcG9uZW50JztcbiAqXG4gKiAvLyBEZWZpbmUgdGhlIGFwcCBtb2R1bGVcbiAqIF9ATmdNb2R1bGUoe1xuICogICAgIGRlY2xhcmF0aW9uczogW0FwcENvbXBvbmVudF0sIC8vIGRlY2xhcmUgYXBwIGNvbXBvbmVudFxuICogICAgIGltcG9ydHM6ICAgICAgW0Jyb3dzZXJNb2R1bGUsIE51bWVyaWNUZXh0Qm94TW9kdWxlXSwgLy8gaW1wb3J0IE51bWVyaWNUZXh0Qm94IG1vZHVsZVxuICogICAgIGJvb3RzdHJhcDogICAgW0FwcENvbXBvbmVudF1cbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgQXBwTW9kdWxlIHt9XG4gKlxuICogLy8gQ29tcGlsZSBhbmQgbGF1bmNoIHRoZSBtb2R1bGVcbiAqIHBsYXRmb3JtQnJvd3NlckR5bmFtaWMoKS5ib290c3RyYXBNb2R1bGUoQXBwTW9kdWxlKTtcbiAqXG4gKiBgYGBcbiAqL1xubGV0IE51bWVyaWNUZXh0Qm94TW9kdWxlID0gY2xhc3MgTnVtZXJpY1RleHRCb3hNb2R1bGUge1xufTtcbk51bWVyaWNUZXh0Qm94TW9kdWxlID0gX19kZWNvcmF0ZShbXG4gICAgTmdNb2R1bGUoe1xuICAgICAgICBkZWNsYXJhdGlvbnM6IFtcbiAgICAgICAgICAgIExvY2FsaXplZE51bWVyaWNUZXh0Qm94TWVzc2FnZXNEaXJlY3RpdmUsXG4gICAgICAgICAgICBOdW1lcmljVGV4dEJveENvbXBvbmVudCxcbiAgICAgICAgICAgIE51bWVyaWNUZXh0Qm94Q3VzdG9tTWVzc2FnZXNDb21wb25lbnRcbiAgICAgICAgXSxcbiAgICAgICAgZXhwb3J0czogW1xuICAgICAgICAgICAgTnVtZXJpY1RleHRCb3hDb21wb25lbnQsXG4gICAgICAgICAgICBOdW1lcmljVGV4dEJveEN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50XG4gICAgICAgIF0sXG4gICAgICAgIGltcG9ydHM6IFtDb21tb25Nb2R1bGUsIEV2ZW50c01vZHVsZV1cbiAgICB9KVxuXSwgTnVtZXJpY1RleHRCb3hNb2R1bGUpO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIFtOZ01vZHVsZV0oe3sgc2l0ZS5kYXRhLnVybHMuYW5ndWxhclsnbmdtb2R1bGVhcGknXSB9fSlcbiAqIGRlZmluaXRpb24gZm9yIHRoZSBNYXNrZWRUZXh0Qm94IGNvbXBvbmVudC5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIGBgYHRzLW5vLXJ1blxuICogLy8gSW1wb3J0IHRoZSBNYXNrZWRUZXh0Qm94IG1vZHVsZVxuICogaW1wb3J0IHsgTWFza2VkVGV4dEJveE1vZHVsZSB9IGZyb20gJ0Bwcm9ncmVzcy9rZW5kby1hbmd1bGFyLWlucHV0cyc7XG4gKlxuICogLy8gVGhlIGJyb3dzZXIgcGxhdGZvcm0gd2l0aCBhIGNvbXBpbGVyXG4gKiBpbXBvcnQgeyBwbGF0Zm9ybUJyb3dzZXJEeW5hbWljIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlci1keW5hbWljJztcbiAqXG4gKiBpbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuICpcbiAqIC8vIEltcG9ydCB0aGUgYXBwIGNvbXBvbmVudFxuICogaW1wb3J0IHsgQXBwQ29tcG9uZW50IH0gZnJvbSAnLi9hcHAuY29tcG9uZW50JztcbiAqXG4gKiAvLyBEZWZpbmUgdGhlIGFwcCBtb2R1bGVcbiAqIF9ATmdNb2R1bGUoe1xuICogICAgIGRlY2xhcmF0aW9uczogW0FwcENvbXBvbmVudF0sIC8vIGRlY2xhcmUgYXBwIGNvbXBvbmVudFxuICogICAgIGltcG9ydHM6ICAgICAgW0Jyb3dzZXJNb2R1bGUsIE1hc2tlZFRleHRCb3hNb2R1bGVdLCAvLyBpbXBvcnQgTWFza2VkVGV4dEJveCBtb2R1bGVcbiAqICAgICBib290c3RyYXA6ICAgIFtBcHBDb21wb25lbnRdXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIEFwcE1vZHVsZSB7fVxuICpcbiAqIC8vIENvbXBpbGUgYW5kIGxhdW5jaCB0aGUgbW9kdWxlXG4gKiBwbGF0Zm9ybUJyb3dzZXJEeW5hbWljKCkuYm9vdHN0cmFwTW9kdWxlKEFwcE1vZHVsZSk7XG4gKlxuICogYGBgXG4gKi9cbmxldCBNYXNrZWRUZXh0Qm94TW9kdWxlID0gY2xhc3MgTWFza2VkVGV4dEJveE1vZHVsZSB7XG59O1xuTWFza2VkVGV4dEJveE1vZHVsZSA9IF9fZGVjb3JhdGUoW1xuICAgIE5nTW9kdWxlKHtcbiAgICAgICAgZGVjbGFyYXRpb25zOiBbTWFza2VkVGV4dEJveENvbXBvbmVudF0sXG4gICAgICAgIGV4cG9ydHM6IFtNYXNrZWRUZXh0Qm94Q29tcG9uZW50XSxcbiAgICAgICAgaW1wb3J0czogW0NvbW1vbk1vZHVsZSwgRXZlbnRzTW9kdWxlXVxuICAgIH0pXG5dLCBNYXNrZWRUZXh0Qm94TW9kdWxlKTtcblxuLyoqXG4gKiBTcGVjaWZpZXMgdGhlIGFkb3JubWVudHMgaW4gdGhlIHN1ZmZpeCBjb250YWluZXIgKFtzZWUgZXhhbXBsZXNdKHslIHNsdWcgYWRvcm5tZW50c190ZXh0Ym94ICV9I3RvYy1zdWZmaXhhZG9ybm1lbnRzKSkuXG4gKiAgQGV4YW1wbGVcbiAqIGBgYHRzLW5vLXJ1blxuICogX0BDb21wb25lbnQoe1xuICogc2VsZWN0b3I6ICdteS1hcHAnLFxuICogdGVtcGxhdGU6IGBcbiAqICA8a2VuZG8tdGV4dGJveD5cbiAqICAgIDxuZy10ZW1wbGF0ZSBrZW5kb1RleHRCb3hTdWZmaXhUZW1wbGF0ZT5cbiAqICAgICAgICA8YnV0dG9uIGtlbmRvQnV0dG9uIGxvb2s9XCJjbGVhclwiIGljb249XCJpbWFnZVwiPjwvYnV0dG9uPlxuICogICAgPC9uZy10ZW1wbGF0ZT5cbiAqICA8L2tlbmRvLXRleHRib3g+XG4gKiBgXG4gKiB9KVxuICogY2xhc3MgQXBwQ29tcG9uZW50IHt9XG4gKiBgYGBcbiAqL1xubGV0IFRleHRCb3hTdWZmaXhUZW1wbGF0ZURpcmVjdGl2ZSA9IGNsYXNzIFRleHRCb3hTdWZmaXhUZW1wbGF0ZURpcmVjdGl2ZSB7XG4gICAgY29uc3RydWN0b3IodGVtcGxhdGVSZWYpIHtcbiAgICAgICAgdGhpcy50ZW1wbGF0ZVJlZiA9IHRlbXBsYXRlUmVmO1xuICAgIH1cbn07XG5UZXh0Qm94U3VmZml4VGVtcGxhdGVEaXJlY3RpdmUgPSBfX2RlY29yYXRlKFtcbiAgICBEaXJlY3RpdmUoe1xuICAgICAgICBzZWxlY3RvcjogJ1trZW5kb1RleHRCb3hTdWZmaXhUZW1wbGF0ZV0nXG4gICAgfSksXG4gICAgX19wYXJhbSgwLCBPcHRpb25hbCgpKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW1RlbXBsYXRlUmVmXSlcbl0sIFRleHRCb3hTdWZmaXhUZW1wbGF0ZURpcmVjdGl2ZSk7XG5cbi8qKlxuICogU3BlY2lmaWVzIHRoZSBhZG9ybm1lbnRzIGluIHRoZSBwcmVmaXggY29udGFpbmVyIChbc2VlIGV4YW1wbGVzXSh7JSBzbHVnIGFkb3JubWVudHNfdGV4dGJveCAlfSN0b2MtcHJlZml4YWRvcm5tZW50cykpLlxuICogQGV4YW1wbGVcbiAqIGBgYHRzLW5vLXJ1blxuICogX0BDb21wb25lbnQoe1xuICogc2VsZWN0b3I6ICdteS1hcHAnLFxuICogdGVtcGxhdGU6IGBcbiAqICA8a2VuZG8tdGV4dGJveD5cbiAqICAgIDxuZy10ZW1wbGF0ZSBrZW5kb1RleHRCb3hQcmVmaXhUZW1wbGF0ZT5cbiAqICAgICAgICA8YnV0dG9uIGtlbmRvQnV0dG9uIGxvb2s9XCJjbGVhclwiIGljb249XCJpbWFnZVwiPjwvYnV0dG9uPlxuICogICAgPC9uZy10ZW1wbGF0ZT5cbiAqICA8L2tlbmRvLXRleHRib3g+XG4gKiBgXG4gKiB9KVxuICogY2xhc3MgQXBwQ29tcG9uZW50IHt9XG4gKiBgYGBcbiAqL1xubGV0IFRleHRCb3hQcmVmaXhUZW1wbGF0ZURpcmVjdGl2ZSA9IGNsYXNzIFRleHRCb3hQcmVmaXhUZW1wbGF0ZURpcmVjdGl2ZSB7XG4gICAgY29uc3RydWN0b3IodGVtcGxhdGVSZWYpIHtcbiAgICAgICAgdGhpcy50ZW1wbGF0ZVJlZiA9IHRlbXBsYXRlUmVmO1xuICAgIH1cbn07XG5UZXh0Qm94UHJlZml4VGVtcGxhdGVEaXJlY3RpdmUgPSBfX2RlY29yYXRlKFtcbiAgICBEaXJlY3RpdmUoe1xuICAgICAgICBzZWxlY3RvcjogJ1trZW5kb1RleHRCb3hQcmVmaXhUZW1wbGF0ZV0nXG4gICAgfSksXG4gICAgX19wYXJhbSgwLCBPcHRpb25hbCgpKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW1RlbXBsYXRlUmVmXSlcbl0sIFRleHRCb3hQcmVmaXhUZW1wbGF0ZURpcmVjdGl2ZSk7XG5cbnZhciBUZXh0Qm94Q29tcG9uZW50XzE7XG5jb25zdCBGT0NVU0VEJDMgPSAnay1zdGF0ZS1mb2N1c2VkJztcbmxldCBUZXh0Qm94Q29tcG9uZW50ID0gVGV4dEJveENvbXBvbmVudF8xID0gY2xhc3MgVGV4dEJveENvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IobG9jYWxpemF0aW9uU2VydmljZSwgbmdab25lLCBjaGFuZ2VEZXRlY3RvciwgcmVuZGVyZXIsIGluamVjdG9yLCBob3N0RWxlbWVudCkge1xuICAgICAgICB0aGlzLmxvY2FsaXphdGlvblNlcnZpY2UgPSBsb2NhbGl6YXRpb25TZXJ2aWNlO1xuICAgICAgICB0aGlzLm5nWm9uZSA9IG5nWm9uZTtcbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3RvciA9IGNoYW5nZURldGVjdG9yO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuaW5qZWN0b3IgPSBpbmplY3RvcjtcbiAgICAgICAgdGhpcy5ob3N0RWxlbWVudCA9IGhvc3RFbGVtZW50O1xuICAgICAgICAvKipcbiAgICAgICAgICogQGhpZGRlblxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5mb2N1c2FibGVJZCA9IGBrLSR7Z3VpZCgpfWA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIHRoZSBgdGl0bGVgIGF0dHJpYnV0ZSBvZiB0aGUgYGlucHV0YCBlbGVtZW50IG9mIHRoZSBUZXh0Qm94LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50aXRsZSA9ICcnO1xuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyB0aGUgZGlzYWJsZWQgc3RhdGUgb2YgdGhlIGNvbXBvbmVudC5cbiAgICAgICAgICpcbiAgICAgICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgdGhlIHJlYWQtb25seSBzdGF0ZSBvZiB0aGUgY29tcG9uZW50LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZWFkb25seSA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIHRoZSBgdGFiaW5kZXhgIG9mIHRoZSBUZXh0Qm94LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVmYXVsdCAwXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRhYmluZGV4ID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFByb3ZpZGVzIGEgdmFsdWUgZm9yIHRoZSBUZXh0Qm94LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52YWx1ZSA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIHdob2xlIHZhbHVlIHdpbGwgYmUgc2VsZWN0ZWQgd2hlbiB0aGUgVGV4dEJveCBpcyBjbGlja2VkLiBEZWZhdWx0cyB0byBgZmFsc2VgLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zZWxlY3RPbkZvY3VzID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgd2hlbiB0aGUgU3VjY2VzcyBpY29uIHdpbGwgYmUgc2hvd24gKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyB2YWxpZGF0aW9uX3RleHRib3ggJX0pKS5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlIHBvc3NpYmxlIHZhbHVlcyBhcmU6XG4gICAgICAgICAqXG4gICAgICAgICAqIGBib29sZWFuYCZtZGFzaDtUaGUgU3VjY2VzcyBpY29uIGlzIGRpc3BsYXllZCwgaWYgdGhlIGNvbmRpdGlvbiBnaXZlbiBieSB0aGUgZGV2ZWxvcGVyIGlzIG1ldC5cbiAgICAgICAgICpcbiAgICAgICAgICogYGluaXRpYWxgJm1kYXNoO1RoZSBTdWNjZXNzIGljb24gd2lsbCBiZSBkaXNwbGF5ZWQgd2hlbiB0aGUgY29tcG9uZW50IHN0YXRlIGlzIG5laXRoZXIgYGludmFsaWRgIG5vciBgdG91Y2hlZGAgb3IgYGRpcnR5YC5cbiAgICAgICAgICpcbiAgICAgICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2hvd1N1Y2Nlc3NJY29uID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgd2hlbiB0aGUgRXJyb3IgaWNvbiB3aWxsIGJlIHNob3duIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgdmFsaWRhdGlvbl90ZXh0Ym94ICV9KSkuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSBwb3NzaWJsZSB2YWx1ZXMgYXJlOlxuICAgICAgICAgKlxuICAgICAgICAgKiAqIGBpbml0aWFsYCZtZGFzaDtUaGUgRXJyb3IgaWNvbiB3aWxsIGJlIGRpc3BsYXllZCB3aGVuIHRoZSBjb21wb25lbnQgc3RhdGUgaXNcbiAgICAgICAgICogYGludmFsaWRgIGFuZCBgdG91Y2hlZGAgb3IgYGRpcnR5YC5cbiAgICAgICAgICogKiBgYm9vbGVhbmAmbWRhc2g7VGhlIEVycm9yIGljb24gaXMgZGlzcGxheWVkLCBpZiB0aGUgY29uZGl0aW9uIGdpdmVuIGJ5IHRoZSBkZXZlbG9wZXIgaXMgbWV0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zaG93RXJyb3JJY29uID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgd2hldGhlciBhIENsZWFyIGJ1dHRvbiB3aWxsIGJlIHJlbmRlcmVkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jbGVhckJ1dHRvbiA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSB2YWx1ZSBpcyBjaGFuZ2VkJm1kYXNoO1xuICAgICAgICAgKiB3aGVuIHRoZSBjb21wb25lbnQgaXMgYmx1cnJlZCBvciB0aGUgdmFsdWUgaXMgY2xlYXJlZCB0aHJvdWdoIHRoZSAqKkNsZWFyKiogYnV0dG9uXG4gICAgICAgICAqIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgb3ZlcnZpZXdfdGV4dGJveCAlfSN0b2MtZXZlbnRzKSkuXG4gICAgICAgICAqIFdoZW4gdGhlIHZhbHVlIG9mIHRoZSBjb21wb25lbnQgaXMgcHJvZ3JhbW1hdGljYWxseSBjaGFuZ2VkIHRvIGBuZ01vZGVsYCBvciBgZm9ybUNvbnRyb2xgXG4gICAgICAgICAqIHRocm91Z2ggaXRzIEFQSSBvciBmb3JtIGJpbmRpbmcsIHRoZSBgdmFsdWVDaGFuZ2VgIGV2ZW50IGlzIG5vdCB0cmlnZ2VyZWQgYmVjYXVzZSBpdFxuICAgICAgICAgKiBtaWdodCBjYXVzZSBhIG1peC11cCB3aXRoIHRoZSBidWlsdC1pbiBgdmFsdWVDaGFuZ2VgIG1lY2hhbmlzbXMgb2YgdGhlIGBuZ01vZGVsYCBvciBgZm9ybUNvbnRyb2xgIGJpbmRpbmdzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52YWx1ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgdXNlciBmb2N1c2VzIHRoZSBgaW5wdXRgIGVsZW1lbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmlucHV0Rm9jdXMgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgdGhlIGBpbnB1dGAgZWxlbWVudCBnZXRzIGJsdXJyZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmlucHV0Qmx1ciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgdXNlciBmb2N1c2VzIHRoZSBUZXh0Qm94IGNvbXBvbmVudC5cbiAgICAgICAgICpcbiAgICAgICAgICogPiBUbyB3aXJlIHRoZSBldmVudCBwcm9ncmFtbWF0aWNhbGx5LCB1c2UgdGhlIGBvbkZvY3VzYCBwcm9wZXJ0eS5cbiAgICAgICAgICpcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogYGBgdHMtbm8tcnVuXG4gICAgICAgICAqIF9AQ29tcG9uZW50KHtcbiAgICAgICAgICogc2VsZWN0b3I6ICdteS1hcHAnLFxuICAgICAgICAgKiB0ZW1wbGF0ZTogYFxuICAgICAgICAgKiAgPGtlbmRvLXRleHRib3ggKGZvY3VzKT1cImhhbmRsZUZvY3VzKClcIj48L2tlbmRvLXRleHRib3g+XG4gICAgICAgICAqIGBcbiAgICAgICAgICogfSlcbiAgICAgICAgICogY2xhc3MgQXBwQ29tcG9uZW50IHtcbiAgICAgICAgICogICBwdWJsaWMgaGFuZGxlRm9jdXMoKTogdm9pZCB7XG4gICAgICAgICAqICAgICAgY29uc29sZS5sb2coJ0NvbXBvbmVudCBpcyBpc0ZvY3VzZWQnKTtcbiAgICAgICAgICogICB9XG4gICAgICAgICAqIH1cbiAgICAgICAgICogYGBgXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uRm9jdXMgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgdGhlIFRleHRCb3ggY29tcG9uZW50IGdldHMgYmx1cnJlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogPiBUbyB3aXJlIHRoZSBldmVudCBwcm9ncmFtbWF0aWNhbGx5LCB1c2UgdGhlIGBvbkJsdXJgIHByb3BlcnR5LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgKiBgYGB0cy1uby1ydW5cbiAgICAgICAgICogX0BDb21wb25lbnQoe1xuICAgICAgICAgKiBzZWxlY3RvcjogJ215LWFwcCcsXG4gICAgICAgICAqIHRlbXBsYXRlOiBgXG4gICAgICAgICAqICA8a2VuZG8tdGV4dGJveCAoYmx1cik9XCJoYW5kbGVCbHVyKClcIj48L2tlbmRvLXRleHRib3g+XG4gICAgICAgICAqIGBcbiAgICAgICAgICogfSlcbiAgICAgICAgICogY2xhc3MgQXBwQ29tcG9uZW50IHtcbiAgICAgICAgICogICBwdWJsaWMgaGFuZGxlQmx1cigpOiB2b2lkIHtcbiAgICAgICAgICogICAgICBjb25zb2xlLmxvZygnQ29tcG9uZW50IGlzIGJsdXJyZWQnKTtcbiAgICAgICAgICogICB9XG4gICAgICAgICAqIH1cbiAgICAgICAgICogYGBgXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uQmx1ciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5ob3N0Q2xhc3MgPSB0cnVlO1xuICAgICAgICB0aGlzLl9pc0ZvY3VzZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5mb2N1c0NoYW5nZWRQcm9ncmFtbWF0aWNhbGx5ID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhhbmRsZUlucHV0Rm9jdXMgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RPbkZvY3VzICYmIHRoaXMudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4geyB0aGlzLnNlbGVjdEFsbCgpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChoYXNPYnNlcnZlcnModGhpcy5vbkZvY3VzKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNGb2N1c2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25Gb2N1cy5lbWl0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaGFzT2JzZXJ2ZXJzKHRoaXMuaW5wdXRGb2N1cykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmZvY3VzQ2hhbmdlZFByb2dyYW1tYXRpY2FsbHkgfHwgKHRoaXMuZm9jdXNDaGFuZ2VkUHJvZ3JhbW1hdGljYWxseSAmJiB0aGlzLmNsZWFyQnV0dG9uQ2xpY2tlZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dEZvY3VzLmVtaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNGb2N1c2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBoaWRkZW5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGFuZGxlSW5wdXRCbHVyID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3Rvci5tYXJrRm9yQ2hlY2soKTtcbiAgICAgICAgICAgIGlmIChoYXNPYnNlcnZlcnModGhpcy5pbnB1dEJsdXIpIHx8IHJlcXVpcmVzWm9uZU9uQmx1cih0aGlzLmNvbnRyb2wpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZ1RvdWNoZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dEJsdXIuZW1pdCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQGhpZGRlblxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oYW5kbGVJbnB1dCA9IChldikgPT4ge1xuICAgICAgICAgICAgbGV0IGluY29taW5nVmFsdWUgPSBldi50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlKGluY29taW5nVmFsdWUpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm5nQ2hhbmdlID0gKF8pID0+IHsgfTtcbiAgICAgICAgdGhpcy5uZ1RvdWNoZWQgPSAoKSA9PiB7IH07XG4gICAgICAgIHZhbGlkYXRlUGFja2FnZShwYWNrYWdlTWV0YWRhdGEpO1xuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IGxvY2FsaXphdGlvblNlcnZpY2UucnRsID8gJ3J0bCcgOiAnbHRyJztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHNldCB0YWJJbmRleCh0YWJJbmRleCkge1xuICAgICAgICB0aGlzLnRhYmluZGV4ID0gdGFiSW5kZXg7XG4gICAgfVxuICAgIGdldCB0YWJJbmRleCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGFiaW5kZXg7XG4gICAgfVxuICAgIGdldCBkaXNhYmxlZENsYXNzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXNhYmxlZDtcbiAgICB9XG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMuY29udHJvbCA9IHRoaXMuaW5qZWN0b3IuZ2V0KE5nQ29udHJvbCwgbnVsbCk7XG4gICAgICAgIHRoaXMuY2hlY2tDbGVhckJ1dHRvbigpO1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSB0aGlzLmxvY2FsaXphdGlvblNlcnZpY2UuY2hhbmdlcy5zdWJzY3JpYmUoKHsgcnRsIH0pID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gcnRsID8gJ3J0bCcgOiAnbHRyJztcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICAgICAgY29uc3QgaG9zdEVsZW1lbnQgPSB0aGlzLmhvc3RFbGVtZW50Lm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgIGxldCBjdXJzb3JJbnNpZGVXcmFwcGVyID0gZmFsc2U7XG4gICAgICAgIGxldCB0YWJiaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgICAgICAgIC8vIGZvY3VzSW4gYW5kIGZvY3VzT3V0IGFyZSByZWxhdGl2ZSB0byB0aGUgaG9zdCBlbGVtZW50XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuYWRkKHRoaXMucmVuZGVyZXIubGlzdGVuKGhvc3RFbGVtZW50LCAnZm9jdXNpbicsICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNGb2N1c2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRm9jdXMuZW1pdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0ZvY3VzZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuYWRkKHRoaXMucmVuZGVyZXIubGlzdGVuKGhvc3RFbGVtZW50LCAnZm9jdXNvdXQnLCAoYXJncykgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc0ZvY3VzZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGFiYmluZykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjbG9zZXN0VGV4dGJveCA9IGNsb3Nlc3QoYXJncy5yZWxhdGVkVGFyZ2V0LCAoZWxlbWVudCkgPT4gZWxlbWVudCA9PT0gdGhpcy5ob3N0RWxlbWVudC5uYXRpdmVFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjbG9zZXN0VGV4dGJveCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVCbHVyKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGFiYmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjdXJzb3JJbnNpZGVXcmFwcGVyICYmICF0aGlzLmNsZWFyQnV0dG9uQ2xpY2tlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVCbHVyKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuYWRkKHRoaXMucmVuZGVyZXIubGlzdGVuKGhvc3RFbGVtZW50LCAnbW91c2VlbnRlcicsICgpID0+IHtcbiAgICAgICAgICAgICAgICBjdXJzb3JJbnNpZGVXcmFwcGVyID0gdHJ1ZTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5hZGQodGhpcy5yZW5kZXJlci5saXN0ZW4oaG9zdEVsZW1lbnQsICdtb3VzZWxlYXZlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGN1cnNvckluc2lkZVdyYXBwZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5hZGQodGhpcy5yZW5kZXJlci5saXN0ZW4oaG9zdEVsZW1lbnQsICdrZXlkb3duJywgKGFyZ3MpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5rZXlDb2RlID09PSBLZXlzLlRhYikge1xuICAgICAgICAgICAgICAgICAgICB0YWJiaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRhYmJpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzKSB7XG4gICAgICAgIGlmIChjaGFuZ2VzLmRpc2FibGVkIHx8IGNoYW5nZXMucmVhZG9ubHkgfHwgY2hhbmdlcy52YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5jaGVja0NsZWFyQnV0dG9uKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIGlmICh0aGlzLnN1YnNjcmlwdGlvbnMpIHtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvY3VzZXMgdGhlIFRleHRCb3guXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYHRzLW5vLXJ1blxuICAgICAqIF9AQ29tcG9uZW50KHtcbiAgICAgKiBzZWxlY3RvcjogJ215LWFwcCcsXG4gICAgICogdGVtcGxhdGU6IGBcbiAgICAgKiAgPGJ1dHRvbiAoY2xpY2spPVwiaW5wdXQuZm9jdXMoKVwiPkZvY3VzIHRoZSBpbnB1dDwvYnV0dG9uPlxuICAgICAqICA8a2VuZG8tdGV4dGJveCAjaW5wdXQ+PC9rZW5kby10ZXh0Ym94PlxuICAgICAqIGBcbiAgICAgKiB9KVxuICAgICAqIGNsYXNzIEFwcENvbXBvbmVudCB7IH1cbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBmb2N1cygpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlucHV0KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mb2N1c0NoYW5nZWRQcm9ncmFtbWF0aWNhbGx5ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5pc0ZvY3VzZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmlucHV0Lm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgdGhpcy5mb2N1c0NoYW5nZWRQcm9ncmFtbWF0aWNhbGx5ID0gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJsdXJzIHRoZSBUZXh0Qm94LlxuICAgICAqL1xuICAgIGJsdXIoKSB7XG4gICAgICAgIHRoaXMuZm9jdXNDaGFuZ2VkUHJvZ3JhbW1hdGljYWxseSA9IHRydWU7XG4gICAgICAgIGNvbnN0IGlzRm9jdXNlZEVsZW1lbnQgPSB0aGlzLmhvc3RFbGVtZW50Lm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignOmZvY3VzJyk7XG4gICAgICAgIGlmIChpc0ZvY3VzZWRFbGVtZW50KSB7XG4gICAgICAgICAgICBpc0ZvY3VzZWRFbGVtZW50LmJsdXIoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzRm9jdXNlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmZvY3VzQ2hhbmdlZFByb2dyYW1tYXRpY2FsbHkgPSBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGNsZWFyVGl0bGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsaXphdGlvblNlcnZpY2UuZ2V0KCdjbGVhcicpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgY2hlY2tDbGVhckJ1dHRvbigpIHtcbiAgICAgICAgdGhpcy5zaG93Q2xlYXJCdXR0b24gPVxuICAgICAgICAgICAgIXRoaXMuZGlzYWJsZWQgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy5yZWFkb25seSAmJlxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJCdXR0b24gJiZcbiAgICAgICAgICAgICAgICAhIXRoaXMudmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBjbGVhclZhbHVlKGV2KSB7XG4gICAgICAgIGlmIChldikge1xuICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsZWFyQnV0dG9uQ2xpY2tlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuaW5wdXQubmF0aXZlRWxlbWVudC52YWx1ZSA9ICcnO1xuICAgICAgICB0aGlzLmlucHV0Lm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgdGhpcy51cGRhdGVWYWx1ZSgnJyk7XG4gICAgICAgIHRoaXMuY2hlY2tDbGVhckJ1dHRvbigpO1xuICAgICAgICB0aGlzLmNsZWFyQnV0dG9uQ2xpY2tlZCA9IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgd3JpdGVWYWx1ZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIHRoaXMuY2hlY2tDbGVhckJ1dHRvbigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgcmVnaXN0ZXJPbkNoYW5nZShmbikge1xuICAgICAgICB0aGlzLm5nQ2hhbmdlID0gZm47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICByZWdpc3Rlck9uVG91Y2hlZChmbikge1xuICAgICAgICB0aGlzLm5nVG91Y2hlZCA9IGZuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICogQ2FsbGVkIHdoZW4gdGhlIHN0YXR1cyBvZiB0aGUgY29tcG9uZW50IGNoYW5nZXMgdG8gb3IgZnJvbSBgZGlzYWJsZWRgLlxuICAgICAqIERlcGVuZGluZyBvbiB0aGUgdmFsdWUsIGl0IGVuYWJsZXMgb3IgZGlzYWJsZXMgdGhlIGFwcHJvcHJpYXRlIERPTSBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIGlzRGlzYWJsZWRcbiAgICAgKi9cbiAgICBzZXREaXNhYmxlZFN0YXRlKGlzRGlzYWJsZWQpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3Rvci5tYXJrRm9yQ2hlY2soKTtcbiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGlzRGlzYWJsZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzaG93RXJyb3JzSW5pdGlhbCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRyb2wpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IGludmFsaWQsIGRpcnR5LCB0b3VjaGVkIH0gPSB0aGlzLmNvbnRyb2w7XG4gICAgICAgIHJldHVybiBpbnZhbGlkICYmIChkaXJ0eSB8fCB0b3VjaGVkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHNob3dTdWNjZXNzSW5pdGlhbCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRyb2wpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHZhbGlkLCBkaXJ0eSwgdG91Y2hlZCB9ID0gdGhpcy5jb250cm9sO1xuICAgICAgICByZXR1cm4gdmFsaWQgJiYgKGRpcnR5IHx8IHRvdWNoZWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgZ2V0IHN1Y2Nlc3NJY29uQ2xhc3NlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3VjY2Vzc0ljb25cbiAgICAgICAgICAgID8gYGstdGV4dC1zdWNjZXNzICR7dGhpcy5zdWNjZXNzSWNvbn1gXG4gICAgICAgICAgICA6IGBrLXRleHQtc3VjY2VzcyBrLWljb24gay1pLWNoZWNrLW91dGxpbmVgO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgZ2V0IGVycm9ySWNvbkNsYXNzZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVycm9ySWNvblxuICAgICAgICAgICAgPyBgay10ZXh0LWVycm9yICR7dGhpcy5lcnJvckljb259YFxuICAgICAgICAgICAgOiBgay10ZXh0LWVycm9yIGstaWNvbiBrLWktd2FybmluZ2A7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBnZXQgY2xlYXJCdXR0b25DbGFzc2VzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jbGVhckJ1dHRvbkljb25cbiAgICAgICAgICAgID8gdGhpcy5jbGVhckJ1dHRvbkljb25cbiAgICAgICAgICAgIDogYGstaWNvbiBrLWktY2xvc2UtY2lyY2xlYDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGdldCBoYXNFcnJvcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNob3dFcnJvckljb24gPT09ICdpbml0aWFsJ1xuICAgICAgICAgICAgPyB0aGlzLnNob3dFcnJvcnNJbml0aWFsKClcbiAgICAgICAgICAgIDogdGhpcy5zaG93RXJyb3JJY29uO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgZ2V0IGlzU3VjY2Vzc2Z1bCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hvd1N1Y2Nlc3NJY29uID09PSAnaW5pdGlhbCdcbiAgICAgICAgICAgID8gdGhpcy5zaG93U3VjY2Vzc0luaXRpYWwoKVxuICAgICAgICAgICAgOiB0aGlzLnNob3dTdWNjZXNzSWNvbjtcbiAgICB9XG4gICAgc2V0U2VsZWN0aW9uKHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNGb2N1c2VkKSB7XG4gICAgICAgICAgICBpbnZva2VFbGVtZW50TWV0aG9kKHRoaXMuaW5wdXQsICdzZXRTZWxlY3Rpb25SYW5nZScsIHN0YXJ0LCBlbmQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNlbGVjdEFsbCgpIHtcbiAgICAgICAgaWYgKHRoaXMudmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0aW9uKDAsIHRoaXMudmFsdWUubGVuZ3RoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVWYWx1ZSh2YWx1ZSkge1xuICAgICAgICBpZiAoIWFyZVNhbWUodGhpcy52YWx1ZSwgdmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLm5nQ2hhbmdlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQodmFsdWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tDbGVhckJ1dHRvbigpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3IubWFya0ZvckNoZWNrKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgaXNGb2N1c2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNGb2N1c2VkO1xuICAgIH1cbiAgICBzZXQgaXNGb2N1c2VkKHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLl9pc0ZvY3VzZWQgIT09IHZhbHVlICYmIHRoaXMuaG9zdEVsZW1lbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmhvc3RFbGVtZW50Lm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAodmFsdWUgJiYgIXRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKGVsZW1lbnQsIEZPQ1VTRUQkMyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUNsYXNzKGVsZW1lbnQsIEZPQ1VTRUQkMyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9pc0ZvY3VzZWQgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVCbHVyKCkge1xuICAgICAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmZvY3VzQ2hhbmdlZFByb2dyYW1tYXRpY2FsbHkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQmx1ci5lbWl0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzRm9jdXNlZCA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9XG59O1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgVGV4dEJveENvbXBvbmVudC5wcm90b3R5cGUsIFwiZm9jdXNhYmxlSWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIFRleHRCb3hDb21wb25lbnQucHJvdG90eXBlLCBcInRpdGxlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgVGV4dEJveENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGlzYWJsZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBUZXh0Qm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJyZWFkb25seVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKVxuXSwgVGV4dEJveENvbXBvbmVudC5wcm90b3R5cGUsIFwidGFiaW5kZXhcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIFRleHRCb3hDb21wb25lbnQucHJvdG90eXBlLCBcInZhbHVlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgVGV4dEJveENvbXBvbmVudC5wcm90b3R5cGUsIFwic2VsZWN0T25Gb2N1c1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuXSwgVGV4dEJveENvbXBvbmVudC5wcm90b3R5cGUsIFwic2hvd1N1Y2Nlc3NJY29uXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG5dLCBUZXh0Qm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJzaG93RXJyb3JJY29uXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgVGV4dEJveENvbXBvbmVudC5wcm90b3R5cGUsIFwiY2xlYXJCdXR0b25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIFRleHRCb3hDb21wb25lbnQucHJvdG90eXBlLCBcInN1Y2Nlc3NJY29uXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBUZXh0Qm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJlcnJvckljb25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIFRleHRCb3hDb21wb25lbnQucHJvdG90eXBlLCBcImNsZWFyQnV0dG9uSWNvblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW051bWJlcl0pXG5dLCBUZXh0Qm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ0YWJJbmRleFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIFRleHRCb3hDb21wb25lbnQucHJvdG90eXBlLCBcInBsYWNlaG9sZGVyXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOdW1iZXIpXG5dLCBUZXh0Qm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJtYXhsZW5ndGhcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBUZXh0Qm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ2YWx1ZUNoYW5nZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIFRleHRCb3hDb21wb25lbnQucHJvdG90eXBlLCBcImlucHV0Rm9jdXNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBUZXh0Qm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJpbnB1dEJsdXJcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgnZm9jdXMnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgVGV4dEJveENvbXBvbmVudC5wcm90b3R5cGUsIFwib25Gb2N1c1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCdibHVyJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIFRleHRCb3hDb21wb25lbnQucHJvdG90eXBlLCBcIm9uQmx1clwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgVmlld0NoaWxkKCdpbnB1dCcsIHsgc3RhdGljOiB0cnVlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFbGVtZW50UmVmKVxuXSwgVGV4dEJveENvbXBvbmVudC5wcm90b3R5cGUsIFwiaW5wdXRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIENvbnRlbnRDaGlsZChUZXh0Qm94U3VmZml4VGVtcGxhdGVEaXJlY3RpdmUsIHsgc3RhdGljOiBmYWxzZSB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgVGV4dEJveFN1ZmZpeFRlbXBsYXRlRGlyZWN0aXZlKVxuXSwgVGV4dEJveENvbXBvbmVudC5wcm90b3R5cGUsIFwic3VmZml4VGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIENvbnRlbnRDaGlsZChUZXh0Qm94UHJlZml4VGVtcGxhdGVEaXJlY3RpdmUsIHsgc3RhdGljOiBmYWxzZSB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgVGV4dEJveFByZWZpeFRlbXBsYXRlRGlyZWN0aXZlKVxuXSwgVGV4dEJveENvbXBvbmVudC5wcm90b3R5cGUsIFwicHJlZml4VGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLXN0YXRlLWRpc2FibGVkJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIFRleHRCb3hDb21wb25lbnQucHJvdG90eXBlLCBcImRpc2FibGVkQ2xhc3NcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay10ZXh0Ym94JyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBUZXh0Qm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJob3N0Q2xhc3NcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdhdHRyLmRpcicpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBUZXh0Qm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXJlY3Rpb25cIiwgdm9pZCAwKTtcblRleHRCb3hDb21wb25lbnQgPSBUZXh0Qm94Q29tcG9uZW50XzEgPSBfX2RlY29yYXRlKFtcbiAgICBDb21wb25lbnQoe1xuICAgICAgICBleHBvcnRBczogJ2tlbmRvVGV4dEJveCcsXG4gICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgTG9jYWxpemF0aW9uU2VydmljZSxcbiAgICAgICAgICAgIHsgcHJvdmlkZTogTDEwTl9QUkVGSVgsIHVzZVZhbHVlOiAna2VuZG8udGV4dGJveCcgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcbiAgICAgICAgICAgICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBUZXh0Qm94Q29tcG9uZW50XzEpLFxuICAgICAgICAgICAgICAgIG11bHRpOiB0cnVlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgeyBwcm92aWRlOiBLZW5kb0lucHV0LCB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBUZXh0Qm94Q29tcG9uZW50XzEpIH1cbiAgICAgICAgXSxcbiAgICAgICAgc2VsZWN0b3I6ICdrZW5kby10ZXh0Ym94JyxcbiAgICAgICAgdGVtcGxhdGU6IGBcbiAgICAgICAgPG5nLWNvbnRhaW5lciBrZW5kb1RleHRCb3hMb2NhbGl6ZWRNZXNzYWdlc1xuICAgICAgICAgICAgaTE4bi1jbGVhcj1cImtlbmRvLnRleHRib3guY2xlYXJ8VGhlIHRpdGxlIGZvciB0aGUgKipDbGVhcioqIGJ1dHRvbiBpbiB0aGUgVGV4dEJveC5cIlxuICAgICAgICAgICAgY2xlYXI9XCJDbGVhclwiPlxuICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJrLWlucHV0LXByZWZpeFwiPlxuICAgICAgICAgICAgPG5nLXRlbXBsYXRlXG4gICAgICAgICAgICAgICAgKm5nSWY9XCJwcmVmaXhUZW1wbGF0ZVwiXG4gICAgICAgICAgICAgICAgW25nVGVtcGxhdGVPdXRsZXRdPVwicHJlZml4VGVtcGxhdGU/LnRlbXBsYXRlUmVmXCI+XG4gICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICA8L3NwYW4+XG4gICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgY2xhc3M9XCJrLWlucHV0XCJcbiAgICAgICAgICAgICNpbnB1dFxuICAgICAgICAgICAgW2lkXT1cImZvY3VzYWJsZUlkXCJcbiAgICAgICAgICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiXG4gICAgICAgICAgICBbcmVhZG9ubHldPVwicmVhZG9ubHlcIlxuICAgICAgICAgICAgW2F0dHIudGFiaW5kZXhdPVwiZGlzYWJsZWQgPyB1bmRlZmluZWQgOiB0YWJpbmRleFwiXG4gICAgICAgICAgICBbdmFsdWVdPVwidmFsdWVcIlxuICAgICAgICAgICAgW2F0dHIucGxhY2Vob2xkZXJdPVwicGxhY2Vob2xkZXJcIlxuICAgICAgICAgICAgW2F0dHIudGl0bGVdPVwidGl0bGVcIlxuICAgICAgICAgICAgW2F0dHIubWF4bGVuZ3RoXT1cIm1heGxlbmd0aFwiXG4gICAgICAgICAgICBba2VuZG9FdmVudHNPdXRzaWRlQW5ndWxhcl09XCJ7XG4gICAgICAgICAgICAgICAgZm9jdXM6IGhhbmRsZUlucHV0Rm9jdXMsXG4gICAgICAgICAgICAgICAgYmx1cjogaGFuZGxlSW5wdXRCbHVyLFxuICAgICAgICAgICAgICAgIGlucHV0OiBoYW5kbGVJbnB1dH1cIi8+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwiay1pbnB1dC1zdWZmaXhcIj5cbiAgICAgICAgICAgIDxzcGFuICpuZ0lmPVwiaGFzRXJyb3JzXCIgW25nQ2xhc3NdPVwiZXJyb3JJY29uQ2xhc3Nlc1wiPjwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuICpuZ0lmPVwiaXNTdWNjZXNzZnVsXCIgW25nQ2xhc3NdPVwic3VjY2Vzc0ljb25DbGFzc2VzXCI+PC9zcGFuPlxuICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICByb2xlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICBjbGFzcz1cImstY2xlYXItdmFsdWVcIlxuICAgICAgICAgICAgICAgICpuZ0lmPVwic2hvd0NsZWFyQnV0dG9uXCJcbiAgICAgICAgICAgICAgICAoY2xpY2spPVwiY2xlYXJWYWx1ZSgpXCJcbiAgICAgICAgICAgICAgICAobW91c2Vkb3duKT1cIiRldmVudC5wcmV2ZW50RGVmYXVsdCgpXCJcbiAgICAgICAgICAgICAgICBbdGFiaW5kZXhdPVwidGFiSW5kZXhcIlxuICAgICAgICAgICAgICAgIFthdHRyLmFyaWEtbGFiZWxdPVwiY2xlYXJUaXRsZSgpXCJcbiAgICAgICAgICAgICAgICBbdGl0bGVdPVwiY2xlYXJUaXRsZSgpXCJcbiAgICAgICAgICAgICAgICAoa2V5ZG93bi5lbnRlcik9XCJjbGVhclZhbHVlKCRldmVudClcIlxuICAgICAgICAgICAgICAgIChrZXlkb3duLnNwYWNlKT1cImNsZWFyVmFsdWUoJGV2ZW50KVwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxzcGFuIFtuZ0NsYXNzXT1cImNsZWFyQnV0dG9uQ2xhc3Nlc1wiPjwvc3Bhbj5cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDxuZy10ZW1wbGF0ZVxuICAgICAgICAgICAgICAgICpuZ0lmPVwic3VmZml4VGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0XT1cInN1ZmZpeFRlbXBsYXRlPy50ZW1wbGF0ZVJlZlwiPlxuICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgPC9zcGFuPlxuICAgIGBcbiAgICB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0xvY2FsaXphdGlvblNlcnZpY2UsXG4gICAgICAgIE5nWm9uZSxcbiAgICAgICAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgICAgIFJlbmRlcmVyMixcbiAgICAgICAgSW5qZWN0b3IsXG4gICAgICAgIEVsZW1lbnRSZWZdKVxuXSwgVGV4dEJveENvbXBvbmVudCk7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5jbGFzcyBUZXh0Qm94TWVzc2FnZXMgZXh0ZW5kcyBDb21wb25lbnRNZXNzYWdlcyB7XG59XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBUZXh0Qm94TWVzc2FnZXMucHJvdG90eXBlLCBcImNsZWFyXCIsIHZvaWQgMCk7XG5cbnZhciBUZXh0Qm94Q3VzdG9tTWVzc2FnZXNDb21wb25lbnRfMTtcbi8qKlxuICogQ3VzdG9tIGNvbXBvbmVudCBtZXNzYWdlcyBvdmVycmlkZSBkZWZhdWx0IGNvbXBvbmVudCBtZXNzYWdlcy5cbiAqL1xubGV0IFRleHRCb3hDdXN0b21NZXNzYWdlc0NvbXBvbmVudCA9IFRleHRCb3hDdXN0b21NZXNzYWdlc0NvbXBvbmVudF8xID0gY2xhc3MgVGV4dEJveEN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50IGV4dGVuZHMgVGV4dEJveE1lc3NhZ2VzIHtcbiAgICBjb25zdHJ1Y3RvcihzZXJ2aWNlKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc2VydmljZSA9IHNlcnZpY2U7XG4gICAgfVxuICAgIGdldCBvdmVycmlkZSgpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufTtcblRleHRCb3hDdXN0b21NZXNzYWdlc0NvbXBvbmVudCA9IFRleHRCb3hDdXN0b21NZXNzYWdlc0NvbXBvbmVudF8xID0gX19kZWNvcmF0ZShbXG4gICAgQ29tcG9uZW50KHtcbiAgICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZTogVGV4dEJveE1lc3NhZ2VzLFxuICAgICAgICAgICAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IFRleHRCb3hDdXN0b21NZXNzYWdlc0NvbXBvbmVudF8xKSAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lOm5vLWZvcndhcmQtcmVmXG4gICAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIHNlbGVjdG9yOiAna2VuZG8tdGV4dGJveC1tZXNzYWdlcycsXG4gICAgICAgIHRlbXBsYXRlOiBgYFxuICAgIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTG9jYWxpemF0aW9uU2VydmljZV0pXG5dLCBUZXh0Qm94Q3VzdG9tTWVzc2FnZXNDb21wb25lbnQpO1xuXG52YXIgTG9jYWxpemVkVGV4dEJveE1lc3NhZ2VzRGlyZWN0aXZlXzE7XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xubGV0IExvY2FsaXplZFRleHRCb3hNZXNzYWdlc0RpcmVjdGl2ZSA9IExvY2FsaXplZFRleHRCb3hNZXNzYWdlc0RpcmVjdGl2ZV8xID0gY2xhc3MgTG9jYWxpemVkVGV4dEJveE1lc3NhZ2VzRGlyZWN0aXZlIGV4dGVuZHMgVGV4dEJveE1lc3NhZ2VzIHtcbiAgICBjb25zdHJ1Y3RvcihzZXJ2aWNlKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc2VydmljZSA9IHNlcnZpY2U7XG4gICAgfVxufTtcbkxvY2FsaXplZFRleHRCb3hNZXNzYWdlc0RpcmVjdGl2ZSA9IExvY2FsaXplZFRleHRCb3hNZXNzYWdlc0RpcmVjdGl2ZV8xID0gX19kZWNvcmF0ZShbXG4gICAgRGlyZWN0aXZlKHtcbiAgICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZTogVGV4dEJveE1lc3NhZ2VzLFxuICAgICAgICAgICAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IExvY2FsaXplZFRleHRCb3hNZXNzYWdlc0RpcmVjdGl2ZV8xKSAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lOm5vLWZvcndhcmQtcmVmXG4gICAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIHNlbGVjdG9yOiAnW2tlbmRvVGV4dEJveExvY2FsaXplZE1lc3NhZ2VzXSdcbiAgICB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0xvY2FsaXphdGlvblNlcnZpY2VdKVxuXSwgTG9jYWxpemVkVGV4dEJveE1lc3NhZ2VzRGlyZWN0aXZlKTtcblxuLyoqXG4gKiBTcGVjaWZpZXMgYSBzZXBhcmF0b3IgaW4gdGhlIGNvbnRlbnQgb2YgY29tcG9uZW50cyBsaWtlIHRoZSBUZXh0QXJlYSBhbmQgdGhlIFRleHRCb3guIChbc2VlIGV4YW1wbGVzXSh7JSBzbHVnIGFkb3JubWVudHNfdGV4dGJveCAlfSN0b2Mtc2VwYXJhdG9yKSkuXG4gKiBAZXhhbXBsZVxuICogYGBgdHMtbm8tcnVuXG4gKiBfQENvbXBvbmVudCh7XG4gKiBzZWxlY3RvcjogJ215LWFwcCcsXG4gKiB0ZW1wbGF0ZTogYFxuICogIDxrZW5kby10ZXh0Ym94PlxuICogICAgPG5nLXRlbXBsYXRlIGtlbmRvVGV4dEJveFN1ZmZpeFRlbXBsYXRlPlxuICogICAgICAgIDxrZW5kby1pbnB1dC1zZXBhcmF0b3I+PC9rZW5kby1pbnB1dC1zZXBhcmF0b3I+XG4gKiAgICAgICAgPGJ1dHRvbiBrZW5kb0J1dHRvbiBsb29rPVwiY2xlYXJcIiBpY29uPVwiaW1hZ2VcIj48L2J1dHRvbj5cbiAqICAgIDwvbmctdGVtcGxhdGU+XG4gKiAgPC9rZW5kby10ZXh0Ym94PlxuICogYFxuICogfSlcbiAqIGNsYXNzIEFwcENvbXBvbmVudCB7fVxuICogYGBgXG4gKi9cbmxldCBJbnB1dFNlcGFyYXRvckNvbXBvbmVudCA9IGNsYXNzIElucHV0U2VwYXJhdG9yQ29tcG9uZW50IHtcbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgYSBzZXBhcmF0b3IgaW4gdGhlIGNvbnRlbnQgb2YgY29tcG9uZW50cyBsaWtlIHRoZSBUZXh0QXJlYSBhbmQgdGhlIFRleHRCb3guIChbc2VlIGV4YW1wbGVzXSh7JSBzbHVnIGFkb3JubWVudHNfdGV4dGJveCAlfSN0b2Mtc2VwYXJhdG9yKSkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGB0cy1uby1ydW5cbiAgICAgKiBfQENvbXBvbmVudCh7XG4gICAgICogc2VsZWN0b3I6ICdteS1hcHAnLFxuICAgICAqIHRlbXBsYXRlOiBgXG4gICAgICogIDxrZW5kby10ZXh0Ym94PlxuICAgICAqICAgIDxuZy10ZW1wbGF0ZSBrZW5kb1RleHRCb3hTdWZmaXhUZW1wbGF0ZT5cbiAgICAgKiAgICAgICAgPGtlbmRvLWlucHV0LXNlcGFyYXRvcj48L2tlbmRvLWlucHV0LXNlcGFyYXRvcj5cbiAgICAgKiAgICAgICAgPGJ1dHRvbiBrZW5kb0J1dHRvbiBsb29rPVwiY2xlYXJcIiBpY29uPVwiaW1hZ2VcIj48L2J1dHRvbj5cbiAgICAgKiAgICA8L25nLXRlbXBsYXRlPlxuICAgICAqICA8L2tlbmRvLXRleHRib3g+XG4gICAgICogYFxuICAgICAqIH0pXG4gICAgICogY2xhc3MgQXBwQ29tcG9uZW50IHt9XG4gICAgICogYGBgXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuaG9zdENsYXNzID0gdHJ1ZTtcbiAgICB9XG59O1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmstaW5wdXQtc2VwYXJhdG9yJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBJbnB1dFNlcGFyYXRvckNvbXBvbmVudC5wcm90b3R5cGUsIFwiaG9zdENsYXNzXCIsIHZvaWQgMCk7XG5JbnB1dFNlcGFyYXRvckNvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgIENvbXBvbmVudCh7XG4gICAgICAgIHNlbGVjdG9yOiAna2VuZG8taW5wdXQtc2VwYXJhdG9yLCBrZW5kby10ZXh0Ym94LXNlcGFyYXRvcicsXG4gICAgICAgIHRlbXBsYXRlOiBgYFxuICAgIH0pXG5dLCBJbnB1dFNlcGFyYXRvckNvbXBvbmVudCk7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBTSEFSRURfRElSRUNUSVZFUyA9IFtcbiAgICBJbnB1dFNlcGFyYXRvckNvbXBvbmVudCxcbiAgICBUZXh0QXJlYURpcmVjdGl2ZVxuXTtcbi8qKlxuICogQGhpZGRlblxuICovXG5sZXQgU2hhcmVkTW9kdWxlID0gY2xhc3MgU2hhcmVkTW9kdWxlIHtcbn07XG5TaGFyZWRNb2R1bGUgPSBfX2RlY29yYXRlKFtcbiAgICBOZ01vZHVsZSh7XG4gICAgICAgIGRlY2xhcmF0aW9uczogW1NIQVJFRF9ESVJFQ1RJVkVTXSxcbiAgICAgICAgZXhwb3J0czogW1NIQVJFRF9ESVJFQ1RJVkVTXVxuICAgIH0pXG5dLCBTaGFyZWRNb2R1bGUpO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIFtOZ01vZHVsZV0oe3sgc2l0ZS5kYXRhLnVybHMuYW5ndWxhclsnbmdtb2R1bGVhcGknXSB9fSlcbiAqIGRlZmluaXRpb24gZm9yIHRoZSBUZXh0Qm94IGRpcmVjdGl2ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIGBgYHRzLW5vLXJ1blxuICogLy8gSW1wb3J0IHRoZSBUZXh0Qm94IG1vZHVsZVxuICogaW1wb3J0IHsgVGV4dEJveE1vZHVsZSB9IGZyb20gJ0Bwcm9ncmVzcy9rZW5kby1hbmd1bGFyLWlucHV0cyc7XG4gKlxuICogLy8gVGhlIGJyb3dzZXIgcGxhdGZvcm0gd2l0aCBhIGNvbXBpbGVyXG4gKiBpbXBvcnQgeyBwbGF0Zm9ybUJyb3dzZXJEeW5hbWljIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlci1keW5hbWljJztcbiAqXG4gKiBpbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuICpcbiAqIC8vIEltcG9ydCB0aGUgYXBwIGNvbXBvbmVudFxuICogaW1wb3J0IHsgQXBwQ29tcG9uZW50IH0gZnJvbSAnLi9hcHAuY29tcG9uZW50JztcbiAqXG4gKiAvLyBEZWZpbmUgdGhlIGFwcCBtb2R1bGVcbiAqIF9ATmdNb2R1bGUoe1xuICogICAgIGRlY2xhcmF0aW9uczogW0FwcENvbXBvbmVudF0sIC8vIGRlY2xhcmUgYXBwIGNvbXBvbmVudFxuICogICAgIGltcG9ydHM6ICAgICAgW0Jyb3dzZXJNb2R1bGUsIFRleHRCb3hNb2R1bGVdLCAvLyBpbXBvcnQgVGV4dEJveCBtb2R1bGVcbiAqICAgICBib290c3RyYXA6ICAgIFtBcHBDb21wb25lbnRdXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIEFwcE1vZHVsZSB7fVxuICpcbiAqIC8vIENvbXBpbGUgYW5kIGxhdW5jaCB0aGUgbW9kdWxlXG4gKiBwbGF0Zm9ybUJyb3dzZXJEeW5hbWljKCkuYm9vdHN0cmFwTW9kdWxlKEFwcE1vZHVsZSk7XG4gKlxuICogYGBgXG4gKi9cbmxldCBUZXh0Qm94TW9kdWxlID0gY2xhc3MgVGV4dEJveE1vZHVsZSB7XG59O1xuVGV4dEJveE1vZHVsZSA9IF9fZGVjb3JhdGUoW1xuICAgIE5nTW9kdWxlKHtcbiAgICAgICAgZGVjbGFyYXRpb25zOiBbXG4gICAgICAgICAgICBUZXh0Qm94RGlyZWN0aXZlLFxuICAgICAgICAgICAgVGV4dEJveENvbnRhaW5lckNvbXBvbmVudCxcbiAgICAgICAgICAgIFRleHRCb3hDb21wb25lbnQsXG4gICAgICAgICAgICBUZXh0Qm94U3VmZml4VGVtcGxhdGVEaXJlY3RpdmUsXG4gICAgICAgICAgICBUZXh0Qm94UHJlZml4VGVtcGxhdGVEaXJlY3RpdmUsXG4gICAgICAgICAgICBUZXh0Qm94Q3VzdG9tTWVzc2FnZXNDb21wb25lbnQsXG4gICAgICAgICAgICBMb2NhbGl6ZWRUZXh0Qm94TWVzc2FnZXNEaXJlY3RpdmVcbiAgICAgICAgXSxcbiAgICAgICAgZXhwb3J0czogW1xuICAgICAgICAgICAgVGV4dEJveERpcmVjdGl2ZSxcbiAgICAgICAgICAgIFRleHRCb3hDb250YWluZXJDb21wb25lbnQsXG4gICAgICAgICAgICBUZXh0Qm94Q29tcG9uZW50LFxuICAgICAgICAgICAgVGV4dEJveFN1ZmZpeFRlbXBsYXRlRGlyZWN0aXZlLFxuICAgICAgICAgICAgVGV4dEJveFByZWZpeFRlbXBsYXRlRGlyZWN0aXZlLFxuICAgICAgICAgICAgRXZlbnRzTW9kdWxlLFxuICAgICAgICAgICAgVGV4dEJveEN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50LFxuICAgICAgICAgICAgTG9jYWxpemVkVGV4dEJveE1lc3NhZ2VzRGlyZWN0aXZlLFxuICAgICAgICAgICAgU0hBUkVEX0RJUkVDVElWRVNcbiAgICAgICAgXSxcbiAgICAgICAgaW1wb3J0czogW0NvbW1vbk1vZHVsZSwgRXZlbnRzTW9kdWxlLCBTaGFyZWRNb2R1bGVdXG4gICAgfSlcbl0sIFRleHRCb3hNb2R1bGUpO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY2xhc3MgVGV4dEZpZWxkc0Jhc2Uge1xuICAgIGNvbnN0cnVjdG9yKGxvY2FsaXphdGlvblNlcnZpY2UsIG5nWm9uZSwgY2hhbmdlRGV0ZWN0b3IsIHJlbmRlcmVyLCBpbmplY3RvciwgaG9zdEVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5sb2NhbGl6YXRpb25TZXJ2aWNlID0gbG9jYWxpemF0aW9uU2VydmljZTtcbiAgICAgICAgdGhpcy5uZ1pvbmUgPSBuZ1pvbmU7XG4gICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3IgPSBjaGFuZ2VEZXRlY3RvcjtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLmluamVjdG9yID0gaW5qZWN0b3I7XG4gICAgICAgIHRoaXMuaG9zdEVsZW1lbnQgPSBob3N0RWxlbWVudDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgdGhlIGB0aXRsZWAgYXR0cmlidXRlIG9mIHRoZSBpbnRlcm5hbCB0ZXh0YXJlYSBpbnB1dCBlbGVtZW50IG9mIHRoZSBjb21wb25lbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRpdGxlID0gJyc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIHRoZSBkaXNhYmxlZCBzdGF0ZSBvZiB0aGUgVGV4dEFyZWEgY29tcG9uZW50LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyB0aGUgcmVhZC1vbmx5IHN0YXRlIG9mIHRoZSBUZXh0QXJlYSBjb21wb25lbnQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBkZWZhdWx0IGZhbHNlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlYWRvbmx5ID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQcm92aWRlcyBhIHZhbHVlIGZvciB0aGUgVGV4dEFyZWEgY29tcG9uZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52YWx1ZSA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIHdob2xlIHZhbHVlIHdpbGwgYmUgc2VsZWN0ZWQgd2hlbiB0aGUgVGV4dEFyZWEgaXMgY2xpY2tlZC4gRGVmYXVsdHMgdG8gYGZhbHNlYC5cbiAgICAgICAgICpcbiAgICAgICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2VsZWN0T25Gb2N1cyA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSB1c2VyIGZvY3VzZXMgdGhlIGludGVybmFsIHRleHRhcmVhIGVsZW1lbnQgb2YgdGhlIGNvbXBvbmVudC5cbiAgICAgICAgICogVGhpcyBldmVudCBpcyB1c2VmdWwgd2hlbiB5b3UgbmVlZCB0byBkaXN0aW5ndWlzaCBiZXR3ZWVuIGZvY3VzaW5nIHRoZSB0ZXh0YXJlYSBlbGVtZW50IGFuZCBmb2N1c2luZyBvbmUgb2YgaXRzIGFkb3JubWVudHMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmlucHV0Rm9jdXMgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgdGhlIGludGVybmFsIHRleHRhcmVhIGVsZW1lbnQgZ2V0cyBibHVycmVkLlxuICAgICAgICAgKiBUaGlzIGV2ZW50IGlzIHVzZWZ1bCB3aGVuIGFkb3JubWVudHMgYXJlIHVzZWQsIGluIG9yZGVyIHRvIGRpc3Rpbmd1aXNoIGJldHdlZW4gYmx1cnJpbmcgdGhlIHRleHRhcmVhIGVsZW1lbnQgYW5kIGJsdXJyaW5nIHRoZSB3aG9sZSBUZXh0QXJlYSBjb21wb25lbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmlucHV0Qmx1ciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gbmV3IFN1YnNjcmlwdGlvbigpO1xuICAgICAgICB0aGlzLl9pc0ZvY3VzZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5mb2N1c0NoYW5nZWRQcm9ncmFtbWF0aWNhbGx5ID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhhbmRsZUlucHV0Qmx1ciA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3IubWFya0ZvckNoZWNrKCk7XG4gICAgICAgICAgICBpZiAoaGFzT2JzZXJ2ZXJzKHRoaXMuaW5wdXRCbHVyKSB8fCByZXF1aXJlc1pvbmVPbkJsdXIodGhpcy5jb250cm9sKSkge1xuICAgICAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmdUb3VjaGVkKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRCbHVyLmVtaXQoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5uZ0NoYW5nZSA9IChfKSA9PiB7IH07XG4gICAgICAgIHRoaXMubmdUb3VjaGVkID0gKCkgPT4geyB9O1xuICAgIH1cbiAgICBnZXQgZGlzYWJsZWRDbGFzcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzYWJsZWQ7XG4gICAgfVxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMudW5zdWJzY3JpYmUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqIENhbGxlZCB3aGVuIHRoZSBzdGF0dXMgb2YgdGhlIGNvbXBvbmVudCBjaGFuZ2VzIHRvIG9yIGZyb20gYGRpc2FibGVkYC5cbiAgICAgKiBEZXBlbmRpbmcgb24gdGhlIHZhbHVlLCBpdCBlbmFibGVzIG9yIGRpc2FibGVzIHRoZSBhcHByb3ByaWF0ZSBET00gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpc0Rpc2FibGVkXG4gICAgICovXG4gICAgc2V0RGlzYWJsZWRTdGF0ZShpc0Rpc2FibGVkKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3IubWFya0ZvckNoZWNrKCk7XG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBpc0Rpc2FibGVkO1xuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIFRleHRGaWVsZHNCYXNlLnByb3RvdHlwZSwgXCJ0aXRsZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIFRleHRGaWVsZHNCYXNlLnByb3RvdHlwZSwgXCJkaXNhYmxlZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIFRleHRGaWVsZHNCYXNlLnByb3RvdHlwZSwgXCJyZWFkb25seVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgVGV4dEZpZWxkc0Jhc2UucHJvdG90eXBlLCBcInZhbHVlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgVGV4dEZpZWxkc0Jhc2UucHJvdG90eXBlLCBcInNlbGVjdE9uRm9jdXNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIFRleHRGaWVsZHNCYXNlLnByb3RvdHlwZSwgXCJwbGFjZWhvbGRlclwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIFRleHRGaWVsZHNCYXNlLnByb3RvdHlwZSwgXCJpbnB1dEZvY3VzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgVGV4dEZpZWxkc0Jhc2UucHJvdG90eXBlLCBcImlucHV0Qmx1clwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgVmlld0NoaWxkKCdpbnB1dCcsIHsgc3RhdGljOiB0cnVlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFbGVtZW50UmVmKVxuXSwgVGV4dEZpZWxkc0Jhc2UucHJvdG90eXBlLCBcImlucHV0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay1zdGF0ZS1kaXNhYmxlZCcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBUZXh0RmllbGRzQmFzZS5wcm90b3R5cGUsIFwiZGlzYWJsZWRDbGFzc1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdhdHRyLmRpcicpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBUZXh0RmllbGRzQmFzZS5wcm90b3R5cGUsIFwiZGlyZWN0aW9uXCIsIHZvaWQgMCk7XG5cbnZhciBUZXh0QXJlYUNvbXBvbmVudF8xO1xuY29uc3QgcmVzaXplQ2xhc3NlcyA9IHtcbiAgICAndmVydGljYWwnOiAnay1yZXNpemUtdmVydGljYWwnLFxuICAgICdob3Jpem9udGFsJzogJ2stcmVzaXplLWhvcml6b250YWwnLFxuICAgICdib3RoJzogJ2stcmVzaXplLWJvdGgnLFxuICAgICdub25lJzogJ2stcmVzaXplLW5vbmUnLFxuICAgICdhdXRvJzogJ2stcmVzaXplLW5vbmUnXG59O1xuY29uc3QgRk9DVVNFRCQ0ID0gJ2stc3RhdGUtZm9jdXMnO1xuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBbS2VuZG8gVUkgVGV4dEFyZWEgY29tcG9uZW50IGZvciBBbmd1bGFyXSh7JSBzbHVnIG92ZXJ2aWV3X3RleHRhcmVhICV9KS5cbiAqL1xubGV0IFRleHRBcmVhQ29tcG9uZW50ID0gVGV4dEFyZWFDb21wb25lbnRfMSA9IGNsYXNzIFRleHRBcmVhQ29tcG9uZW50IGV4dGVuZHMgVGV4dEZpZWxkc0Jhc2Uge1xuICAgIGNvbnN0cnVjdG9yKGxvY2FsaXphdGlvblNlcnZpY2UsIG5nWm9uZSwgY2hhbmdlRGV0ZWN0b3IsIHJlbmRlcmVyLCBpbmplY3RvciwgaG9zdEVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIobG9jYWxpemF0aW9uU2VydmljZSwgbmdab25lLCBjaGFuZ2VEZXRlY3RvciwgcmVuZGVyZXIsIGluamVjdG9yLCBob3N0RWxlbWVudCk7XG4gICAgICAgIHRoaXMubG9jYWxpemF0aW9uU2VydmljZSA9IGxvY2FsaXphdGlvblNlcnZpY2U7XG4gICAgICAgIHRoaXMubmdab25lID0gbmdab25lO1xuICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yID0gY2hhbmdlRGV0ZWN0b3I7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5pbmplY3RvciA9IGluamVjdG9yO1xuICAgICAgICB0aGlzLmhvc3RFbGVtZW50ID0gaG9zdEVsZW1lbnQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZvY3VzYWJsZUlkID0gYGstJHtndWlkKCl9YDtcbiAgICAgICAgdGhpcy5ob3N0Q2xhc3MgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIHRoZSBmbG93IGRpcmVjdGlvbiBvZiB0aGUgVGV4dEFyZWEgc2VjdGlvbnMuIFRoaXMgcHJvcGVydHkgaXMgdXNlZnVsIHdoZW4gYWRvcm5tZW50cyBhcmUgdXNlZCwgaW4gb3JkZXIgdG8gc3BlY2lmeVxuICAgICAgICAgKiB0aGVpciBwb3NpdGlvbiBpbiByZWxhdGlvbiB0byB0aGUgdGV4dGFyZWEgZWxlbWVudC5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlIHBvc3NpYmxlIHZhbHVlcyBhcmU6XG4gICAgICAgICAqICogYHZlcnRpY2FsYChEZWZhdWx0KSAmbWRhc2g7VGV4dEFyZWEgc2VjdGlvbnMgYXJlIHBsYWNlZCBmcm9tIHRvcCB0byBib3R0b20uXG4gICAgICAgICAqICogYGhvcml6b250YWxgJm1kYXNoO1RleHRBcmVhIHNlY3Rpb25zIGFyZSBwbGFjZWQgZnJvbSBsZWZ0IHRvIHJpZ2h0IGluIGBsdHJgLCBhbmQgZnJvbSByaWdodCB0byBsZWZ0IGluIGBydGxgIG1vZGUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZsb3cgPSAndmVydGljYWwnO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIHRoZSBbdGFiaW5kZXhdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUTUwvR2xvYmFsX2F0dHJpYnV0ZXMvdGFiaW5kZXgpIG9mIHRoZSBjb21wb25lbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRhYmluZGV4ID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbmZpZ3VyZXMgdGhlIHJlc2l6ZSBiZWhhdmlvciBvZiB0aGUgVGV4dEFyZWEuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSBwb3NzaWJsZSB2YWx1ZXMgYXJlOlxuICAgICAgICAgKiAqIGB2ZXJ0aWNhbGAoRGVmYXVsdCkmbWRhc2g7VGhlIFRleHRBcmVhIGNvbXBvbmVudCBjYW4gYmUgcmVzaXplZCBvbmx5IHZlcnRpY2FsbHkuXG4gICAgICAgICAqICogYGhvcml6b250YWxgJm1kYXNoO1RoZSBUZXh0QXJlYSBjb21wb25lbnQgY2FuIGJlIHJlc2l6ZWQgb25seSBob3Jpem9udGFsbHkuXG4gICAgICAgICAqICogYGJvdGhgJm1kYXNoO1RoZSBUZXh0QXJlYSBjb21wb25lbnQgY2FuIGJlIHJlc2l6ZWQgaW4gYm90aCAoaG9yaXpvbnRhbCBhbmQgdmVydGljYWwpIGRpcmVjdGlvbnMuXG4gICAgICAgICAqICogYGF1dG9gJm1kYXNoO1NwZWNpZmllcyB3aGV0aGVyIHRoZSBUZXh0QXJlYSBjb21wb25lbnQgd2lsbCBhZGp1c3QgaXRzIGhlaWdodCBhdXRvbWF0aWNhbGx5LCBiYXNlZCBvbiB0aGUgY29udGVudC5cbiAgICAgICAgICogKiBgbm9uZWAmbWRhc2g7VGhlIFRleHRBcmVhIGNhbm5vdCBiZSByZXNpemVkLlxuICAgICAgICAgKlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZXNpemFibGUgPSAndmVydGljYWwnO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSB1c2VyIGZvY3VzZXMgdGhlIFRleHRBcmVhIGNvbXBvbmVudC5cbiAgICAgICAgICpcbiAgICAgICAgICogPiBUbyB3aXJlIHRoZSBldmVudCBwcm9ncmFtbWF0aWNhbGx5LCB1c2UgdGhlIGBvbkZvY3VzYCBwcm9wZXJ0eS5cbiAgICAgICAgICpcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogYGBgdHNcbiAgICAgICAgICogX0BDb21wb25lbnQoe1xuICAgICAgICAgKiBzZWxlY3RvcjogJ215LWFwcCcsXG4gICAgICAgICAqIHRlbXBsYXRlOiBgXG4gICAgICAgICAqICA8a2VuZG8tdGV4dGFyZWEgKGZvY3VzKT1cImhhbmRsZUZvY3VzKClcIj48L2tlbmRvLXRleHRhcmVhPlxuICAgICAgICAgKiBgXG4gICAgICAgICAqIH0pXG4gICAgICAgICAqIGNsYXNzIEFwcENvbXBvbmVudCB7XG4gICAgICAgICAqICAgcHVibGljIGhhbmRsZUZvY3VzKCk6IHZvaWQge1xuICAgICAgICAgKiAgICAgIGNvbnNvbGUubG9nKCdDb21wb25lbnQgaXMgZm9jdXNlZCcpO1xuICAgICAgICAgKiAgIH1cbiAgICAgICAgICogfVxuICAgICAgICAgKiBgYGBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25Gb2N1cyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgVGV4dEFyZWEgY29tcG9uZW50IGdldHMgYmx1cnJlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogPiBUbyB3aXJlIHRoZSBldmVudCBwcm9ncmFtbWF0aWNhbGx5LCB1c2UgdGhlIGBvbkJsdXJgIHByb3BlcnR5LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgKiBgYGB0c1xuICAgICAgICAgKiBfQENvbXBvbmVudCh7XG4gICAgICAgICAqIHNlbGVjdG9yOiAnbXktYXBwJyxcbiAgICAgICAgICogdGVtcGxhdGU6IGBcbiAgICAgICAgICogIDxrZW5kby10ZXh0YXJlYSAoYmx1cik9XCJoYW5kbGVCbHVyKClcIj48L2tlbmRvLXRleHRhcmVhPlxuICAgICAgICAgKiBgXG4gICAgICAgICAqIH0pXG4gICAgICAgICAqIGNsYXNzIEFwcENvbXBvbmVudCB7XG4gICAgICAgICAqICAgcHVibGljIGhhbmRsZUJsdXIoKTogdm9pZCB7XG4gICAgICAgICAqICAgICAgY29uc29sZS5sb2coJ0NvbXBvbmVudCBpcyBibHVycmVkJyk7XG4gICAgICAgICAqICAgfVxuICAgICAgICAgKiB9XG4gICAgICAgICAqIGBgYFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vbkJsdXIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgdGhlIHZhbHVlIGlzIGNoYW5nZWQgb3IgdGhlIGNvbXBvbmVudCBpcyBibHVycmVkXG4gICAgICAgICAqIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgb3ZlcnZpZXdfdGV4dGFyZWEgJX0jdG9jLWV2ZW50cykpLlxuICAgICAgICAgKiBXaGVuIHRoZSBjb21wb25lbnQgdmFsdWUgaXMgY2hhbmdlZCBwcm9ncmFtbWF0aWNhbGx5IG9yIHZpYSBpdHMgZm9ybSBjb250cm9sIGJpbmRpbmcsIHRoZSB2YWx1ZUNoYW5nZSBldmVudCBpcyBub3QgZW1pdHRlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudmFsdWVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhhbmRsZUlucHV0ID0gKGV2KSA9PiB7XG4gICAgICAgICAgICBsZXQgaW5jb21pbmdWYWx1ZSA9IGV2LnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVmFsdWUoaW5jb21pbmdWYWx1ZSk7XG4gICAgICAgICAgICB0aGlzLnJlc2l6ZSgpO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQGhpZGRlblxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oYW5kbGVJbnB1dEZvY3VzID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmRpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0T25Gb2N1cyAmJiB0aGlzLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgdGhpcy5zZWxlY3RBbGwoKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaGFzT2JzZXJ2ZXJzKHRoaXMub25Gb2N1cykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzRm9jdXNlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRm9jdXMuZW1pdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGhhc09ic2VydmVycyh0aGlzLmlucHV0Rm9jdXMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5mb2N1c0NoYW5nZWRQcm9ncmFtbWF0aWNhbGx5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRGb2N1cy5lbWl0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRm9jdXNlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHZhbGlkYXRlUGFja2FnZShwYWNrYWdlTWV0YWRhdGEpO1xuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IGxvY2FsaXphdGlvblNlcnZpY2UucnRsID8gJ3J0bCcgOiAnbHRyJztcbiAgICB9XG4gICAgZ2V0IGZsb3dDb2woKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZsb3cgPT09ICd2ZXJ0aWNhbCc7XG4gICAgfVxuICAgIGdldCBmbG93Um93KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mbG93ID09PSAnaG9yaXpvbnRhbCc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzZXQgdGFiSW5kZXgodGFiSW5kZXgpIHtcbiAgICAgICAgdGhpcy50YWJpbmRleCA9IHRhYkluZGV4O1xuICAgIH1cbiAgICBnZXQgdGFiSW5kZXgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRhYmluZGV4O1xuICAgIH1cbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgICAgIGNvbnN0IGhvc3RFbGVtZW50ID0gdGhpcy5ob3N0RWxlbWVudC5uYXRpdmVFbGVtZW50O1xuICAgICAgICBsZXQgY3Vyc29ySW5zaWRlV3JhcHBlciA9IGZhbHNlO1xuICAgICAgICBsZXQgdGFiYmluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAgICAgICAvLyBmb2N1c0luIGFuZCBmb2N1c091dCBhcmUgcmVsYXRpdmUgdG8gdGhlIGhvc3QgZWxlbWVudFxuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmFkZCh0aGlzLnJlbmRlcmVyLmxpc3Rlbihob3N0RWxlbWVudCwgJ2ZvY3VzaW4nLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzRm9jdXNlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkZvY3VzLmVtaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNGb2N1c2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmFkZCh0aGlzLnJlbmRlcmVyLmxpc3Rlbihob3N0RWxlbWVudCwgJ2ZvY3Vzb3V0JywgKGFyZ3MpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNGb2N1c2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRhYmJpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2xvc2VzdFRleHRib3ggPSBjbG9zZXN0KGFyZ3MucmVsYXRlZFRhcmdldCwgKGVsZW1lbnQpID0+IGVsZW1lbnQgPT09IHRoaXMuaG9zdEVsZW1lbnQubmF0aXZlRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY2xvc2VzdFRleHRib3gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQmx1cigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRhYmJpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY3Vyc29ySW5zaWRlV3JhcHBlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVCbHVyKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuYWRkKHRoaXMucmVuZGVyZXIubGlzdGVuKGhvc3RFbGVtZW50LCAnbW91c2VlbnRlcicsICgpID0+IHtcbiAgICAgICAgICAgICAgICBjdXJzb3JJbnNpZGVXcmFwcGVyID0gdHJ1ZTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5hZGQodGhpcy5yZW5kZXJlci5saXN0ZW4oaG9zdEVsZW1lbnQsICdtb3VzZWxlYXZlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGN1cnNvckluc2lkZVdyYXBwZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5hZGQodGhpcy5yZW5kZXJlci5saXN0ZW4oaG9zdEVsZW1lbnQsICdrZXlkb3duJywgKGFyZ3MpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5rZXlDb2RlID09PSBLZXlzLlRhYikge1xuICAgICAgICAgICAgICAgICAgICB0YWJiaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRhYmJpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgdGhpcy5jb250cm9sID0gdGhpcy5pbmplY3Rvci5nZXQoTmdDb250cm9sLCBudWxsKTtcbiAgICAgICAgaWYgKGlzRG9jdW1lbnRBdmFpbGFibGUoKSAmJiB0aGlzLnJlc2l6YWJsZSA9PT0gJ2F1dG8nKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2l6ZVN1YnNjcmlwdGlvbiA9IGZyb21FdmVudCh3aW5kb3csICdyZXNpemUnKVxuICAgICAgICAgICAgICAgIC5waXBlKChkZWJvdW5jZVRpbWUoNTApKSlcbiAgICAgICAgICAgICAgICAuc3Vic2NyaWJlKCgpID0+IHRoaXMucmVzaXplKCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmhvc3RFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUF0dHJpYnV0ZSh0aGlzLmhvc3RFbGVtZW50Lm5hdGl2ZUVsZW1lbnQsIFwidGFiaW5kZXhcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gdGhpcy5sb2NhbGl6YXRpb25TZXJ2aWNlLmNoYW5nZXMuc3Vic2NyaWJlKCh7IHJ0bCB9KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IHJ0bCA/ICdydGwnIDogJ2x0cic7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzKSB7XG4gICAgICAgIGNvbnN0IGhvc3RFbGVtZW50ID0gdGhpcy5ob3N0RWxlbWVudC5uYXRpdmVFbGVtZW50O1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5pbnB1dC5uYXRpdmVFbGVtZW50O1xuICAgICAgICBpZiAoY2hhbmdlcy5yZXNpemFibGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlc2l6YWJsZSA9PT0gJ2F1dG8nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsSGVpZ2h0ID0gZWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKGVsZW1lbnQsICdvdmVyZmxvdy15JywgJ2F1dG8nKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKGVsZW1lbnQsICdyZXNpemUnLCAnYm90aCcpO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5pbml0aWFsSGVpZ2h0fXB4YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hhbmdlcy5jb2xzKSB7XG4gICAgICAgICAgICBpZiAoaXNQcmVzZW50KGNoYW5nZXMuY29scy5jdXJyZW50VmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShob3N0RWxlbWVudCwgJ3dpZHRoJywgJ2F1dG8nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlU3R5bGUoaG9zdEVsZW1lbnQsICd3aWR0aCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIG5nQWZ0ZXJWaWV3Q2hlY2tlZCgpIHtcbiAgICAgICAgdGhpcy5yZXNpemUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHdyaXRlVmFsdWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgcmVnaXN0ZXJPbkNoYW5nZShmbikge1xuICAgICAgICB0aGlzLm5nQ2hhbmdlID0gZm47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICByZWdpc3Rlck9uVG91Y2hlZChmbikge1xuICAgICAgICB0aGlzLm5nVG91Y2hlZCA9IGZuO1xuICAgIH1cbiAgICB1cGRhdGVWYWx1ZSh2YWx1ZSkge1xuICAgICAgICBpZiAoIWFyZVNhbWUodGhpcy52YWx1ZSwgdmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLm5nQ2hhbmdlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQodmFsdWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3IubWFya0ZvckNoZWNrKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgc3VwZXIubmdPbkRlc3Ryb3koKTtcbiAgICAgICAgaWYgKHRoaXMucmVzaXplU3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2l6ZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBnZXQgcmVzaXphYmxlQ2xhc3MoKSB7XG4gICAgICAgIHJldHVybiByZXNpemVDbGFzc2VzW3RoaXMucmVzaXphYmxlXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9jdXNlcyB0aGUgVGV4dEFyZWEgY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGB0c1xuICAgICAqIF9AQ29tcG9uZW50KHtcbiAgICAgKiBzZWxlY3RvcjogJ215LWFwcCcsXG4gICAgICogdGVtcGxhdGU6IGBcbiAgICAgKiAgPGJ1dHRvbiAoY2xpY2spPVwidGV4dGFyZWEuZm9jdXMoKVwiPkZvY3VzIHRoZSB0ZXh0YXJlYTwvYnV0dG9uPlxuICAgICAqICA8a2VuZG8tdGV4dGFyZWEgI3RleHRhcmVhPjwva2VuZG8tdGV4dGFyZWE+XG4gICAgICogYFxuICAgICAqIH0pXG4gICAgICogY2xhc3MgQXBwQ29tcG9uZW50IHsgfVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGZvY3VzKCkge1xuICAgICAgICBpZiAoIXRoaXMuaW5wdXQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZvY3VzQ2hhbmdlZFByb2dyYW1tYXRpY2FsbHkgPSB0cnVlO1xuICAgICAgICB0aGlzLmlzRm9jdXNlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuaW5wdXQubmF0aXZlRWxlbWVudC5mb2N1cygpO1xuICAgICAgICB0aGlzLmZvY3VzQ2hhbmdlZFByb2dyYW1tYXRpY2FsbHkgPSBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQmx1cnMgdGhlIFRleHRBcmVhIGNvbXBvbmVudC5cbiAgICAgKi9cbiAgICBibHVyKCkge1xuICAgICAgICB0aGlzLmZvY3VzQ2hhbmdlZFByb2dyYW1tYXRpY2FsbHkgPSB0cnVlO1xuICAgICAgICBjb25zdCBpc0ZvY3VzZWRFbGVtZW50ID0gdGhpcy5ob3N0RWxlbWVudC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJzpmb2N1cycpO1xuICAgICAgICBpZiAoaXNGb2N1c2VkRWxlbWVudCkge1xuICAgICAgICAgICAgaXNGb2N1c2VkRWxlbWVudC5ibHVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc0ZvY3VzZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5mb2N1c0NoYW5nZWRQcm9ncmFtbWF0aWNhbGx5ID0gZmFsc2U7XG4gICAgfVxuICAgIHJlc2l6ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMucmVzaXphYmxlICE9PSAnYXV0bycpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5pbnB1dC5uYXRpdmVFbGVtZW50O1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKGVsZW1lbnQsICdvdmVyZmxvdy15JywgJ2hpZGRlbicpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKGVsZW1lbnQsICdoZWlnaHQnLCBgJHt0aGlzLmluaXRpYWxIZWlnaHR9cHhgKTtcbiAgICAgICAgY29uc3Qgc2Nyb2xsSGVpZ2h0ID0gZWxlbWVudC5zY3JvbGxIZWlnaHQ7XG4gICAgICAgIGlmIChzY3JvbGxIZWlnaHQgPiB0aGlzLmluaXRpYWxIZWlnaHQpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gYCR7c2Nyb2xsSGVpZ2h0fXB4YDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgaXNGb2N1c2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNGb2N1c2VkO1xuICAgIH1cbiAgICBzZXQgaXNGb2N1c2VkKHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLl9pc0ZvY3VzZWQgIT09IHZhbHVlICYmIHRoaXMuaG9zdEVsZW1lbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmhvc3RFbGVtZW50Lm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAodmFsdWUgJiYgIXRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKGVsZW1lbnQsIEZPQ1VTRUQkNCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUNsYXNzKGVsZW1lbnQsIEZPQ1VTRUQkNCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9pc0ZvY3VzZWQgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVCbHVyKCkge1xuICAgICAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmZvY3VzQ2hhbmdlZFByb2dyYW1tYXRpY2FsbHkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQmx1ci5lbWl0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzRm9jdXNlZCA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2V0U2VsZWN0aW9uKHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNGb2N1c2VkKSB7XG4gICAgICAgICAgICBpbnZva2VFbGVtZW50TWV0aG9kKHRoaXMuaW5wdXQsICdzZXRTZWxlY3Rpb25SYW5nZScsIHN0YXJ0LCBlbmQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNlbGVjdEFsbCgpIHtcbiAgICAgICAgaWYgKHRoaXMudmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0aW9uKDAsIHRoaXMudmFsdWUubGVuZ3RoKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBUZXh0QXJlYUNvbXBvbmVudC5wcm90b3R5cGUsIFwiZm9jdXNhYmxlSWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLXRleHRhcmVhJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBUZXh0QXJlYUNvbXBvbmVudC5wcm90b3R5cGUsIFwiaG9zdENsYXNzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay1mbGV4LWNvbCcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBUZXh0QXJlYUNvbXBvbmVudC5wcm90b3R5cGUsIFwiZmxvd0NvbFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLWZsZXgtcm93JyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIFRleHRBcmVhQ29tcG9uZW50LnByb3RvdHlwZSwgXCJmbG93Um93XCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgVGV4dEFyZWFDb21wb25lbnQucHJvdG90eXBlLCBcImZsb3dcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlcilcbl0sIFRleHRBcmVhQ29tcG9uZW50LnByb3RvdHlwZSwgXCJyb3dzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOdW1iZXIpXG5dLCBUZXh0QXJlYUNvbXBvbmVudC5wcm90b3R5cGUsIFwiY29sc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKVxuXSwgVGV4dEFyZWFDb21wb25lbnQucHJvdG90eXBlLCBcIm1heGxlbmd0aFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKVxuXSwgVGV4dEFyZWFDb21wb25lbnQucHJvdG90eXBlLCBcInRhYmluZGV4XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOdW1iZXIpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTnVtYmVyXSlcbl0sIFRleHRBcmVhQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0YWJJbmRleFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIFRleHRBcmVhQ29tcG9uZW50LnByb3RvdHlwZSwgXCJyZXNpemFibGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgnZm9jdXMnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgVGV4dEFyZWFDb21wb25lbnQucHJvdG90eXBlLCBcIm9uRm9jdXNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgnYmx1cicpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBUZXh0QXJlYUNvbXBvbmVudC5wcm90b3R5cGUsIFwib25CbHVyXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgVGV4dEFyZWFDb21wb25lbnQucHJvdG90eXBlLCBcInZhbHVlQ2hhbmdlXCIsIHZvaWQgMCk7XG5UZXh0QXJlYUNvbXBvbmVudCA9IFRleHRBcmVhQ29tcG9uZW50XzEgPSBfX2RlY29yYXRlKFtcbiAgICBDb21wb25lbnQoe1xuICAgICAgICBleHBvcnRBczogJ2tlbmRvVGV4dEFyZWEnLFxuICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgIExvY2FsaXphdGlvblNlcnZpY2UsXG4gICAgICAgICAgICB7IHByb3ZpZGU6IEwxME5fUFJFRklYLCB1c2VWYWx1ZTogJ2tlbmRvLnRleHRhcmVhJyB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxuICAgICAgICAgICAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IFRleHRBcmVhQ29tcG9uZW50XzEpLFxuICAgICAgICAgICAgICAgIG11bHRpOiB0cnVlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgeyBwcm92aWRlOiBLZW5kb0lucHV0LCB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBUZXh0QXJlYUNvbXBvbmVudF8xKSB9XG4gICAgICAgIF0sXG4gICAgICAgIHNlbGVjdG9yOiAna2VuZG8tdGV4dGFyZWEnLFxuICAgICAgICB0ZW1wbGF0ZTogYFxuICAgICAgICA8dGV4dGFyZWFcbiAgICAgICAgICAgICNpbnB1dFxuICAgICAgICAgICAgW2F0dHIuYXJpYS1tdWx0aWxpbmVdPVwidHJ1ZVwiXG4gICAgICAgICAgICBbYXR0ci5hcmlhLWRpc2FibGVkXT1cImRpc2FibGVkID8gdHJ1ZSA6IHVuZGVmaW5lZFwiXG4gICAgICAgICAgICBbYXR0ci5hcmlhLXJlYWRvbmx5XT1cInJlYWRvbmx5ID8gdHJ1ZSA6IHVuZGVmaW5lZFwiXG4gICAgICAgICAgICBjbGFzcz1cImstaW5wdXRcIlxuICAgICAgICAgICAgW25nQ2xhc3NdPVwicmVzaXphYmxlQ2xhc3NcIlxuICAgICAgICAgICAgW2lkXT1cImZvY3VzYWJsZUlkXCJcbiAgICAgICAgICAgIFt2YWx1ZV09XCJ2YWx1ZVwiXG4gICAgICAgICAgICBbYXR0ci5wbGFjZWhvbGRlcl09XCJwbGFjZWhvbGRlclwiXG4gICAgICAgICAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWRcIlxuICAgICAgICAgICAgW3JlYWRvbmx5XT1cInJlYWRvbmx5XCJcbiAgICAgICAgICAgIFthdHRyLnJvd3NdPVwicm93c1wiXG4gICAgICAgICAgICBbYXR0ci5jb2xzXT1cImNvbHNcIlxuICAgICAgICAgICAgW2F0dHIudGFiaW5kZXhdPVwidGFiSW5kZXhcIlxuICAgICAgICAgICAgW2F0dHIudGl0bGVdPVwidGl0bGVcIlxuICAgICAgICAgICAgW2F0dHIubWF4bGVuZ3RoXT1cIm1heGxlbmd0aFwiXG4gICAgICAgICAgICBba2VuZG9FdmVudHNPdXRzaWRlQW5ndWxhcl09XCJ7XG4gICAgICAgICAgICAgICAgZm9jdXM6IGhhbmRsZUlucHV0Rm9jdXMsXG4gICAgICAgICAgICAgICAgYmx1cjogaGFuZGxlSW5wdXRCbHVyLFxuICAgICAgICAgICAgICAgIGlucHV0OiBoYW5kbGVJbnB1dH1cIj5cbiAgICAgICAgICAgIDwvdGV4dGFyZWE+XG4gICAgICAgICAgICA8bmctY29udGVudCBzZWxlY3Q9XCJrZW5kby10ZXh0YXJlYS1zdWZmaXhcIj48L25nLWNvbnRlbnQ+XG4gICAgYFxuICAgIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTG9jYWxpemF0aW9uU2VydmljZSxcbiAgICAgICAgTmdab25lLFxuICAgICAgICBDaGFuZ2VEZXRlY3RvclJlZixcbiAgICAgICAgUmVuZGVyZXIyLFxuICAgICAgICBJbmplY3RvcixcbiAgICAgICAgRWxlbWVudFJlZl0pXG5dLCBUZXh0QXJlYUNvbXBvbmVudCk7XG5cbi8qKlxuICogU3BlY2lmaWVzIHRoZSBhZG9ybm1lbnRzIGluIHRoZSBzdWZmaXggY29udGFpbmVyIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgdGV4dGFyZWFfYWRvcm5tZW50cyAlfSkuXG4gKiAgQGV4YW1wbGVcbiAqIGBgYHRzLW5vLXJ1blxuICogX0BDb21wb25lbnQoe1xuICogc2VsZWN0b3I6ICdteS1hcHAnLFxuICogdGVtcGxhdGU6IGBcbiAqICA8a2VuZG8tdGV4dGFyZWE+XG4gKiAgICA8a2VuZG8tdGV4dGFyZWEtc3VmZml4PlxuICogICAgICAgIDxidXR0b24ga2VuZG9CdXR0b24gbG9vaz1cImNsZWFyXCIgaWNvbj1cImltYWdlXCI+PC9idXR0b24+XG4gKiAgICA8L2tlbmRvLXRleHRhcmVhLXN1ZmZpeD5cbiAqICA8L2tlbmRvLXRleHRhcmVhPlxuICogYFxuICogfSlcbiAqIGNsYXNzIEFwcENvbXBvbmVudCB7fVxuICogYGBgXG4gKi9cbmxldCBUZXh0QXJlYVN1ZmZpeENvbXBvbmVudCA9IGNsYXNzIFRleHRBcmVhU3VmZml4Q29tcG9uZW50IHtcbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgdGhlIGFkb3JubWVudHMgaW4gdGhlIHN1ZmZpeCBjb250YWluZXIgKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyB0ZXh0YXJlYV9hZG9ybm1lbnRzICV9KS5cbiAgICAgKiAgQGV4YW1wbGVcbiAgICAgKiBgYGB0cy1uby1ydW5cbiAgICAgKiBfQENvbXBvbmVudCh7XG4gICAgICogc2VsZWN0b3I6ICdteS1hcHAnLFxuICAgICAqIHRlbXBsYXRlOiBgXG4gICAgICogIDxrZW5kby10ZXh0YXJlYT5cbiAgICAgKiAgICA8a2VuZG8tdGV4dGFyZWEtc3VmZml4PlxuICAgICAqICAgICAgICA8YnV0dG9uIGtlbmRvQnV0dG9uIGxvb2s9XCJjbGVhclwiIGljb249XCJpbWFnZVwiPjwvYnV0dG9uPlxuICAgICAqICAgIDwva2VuZG8tdGV4dGFyZWEtc3VmZml4PlxuICAgICAqICA8L2tlbmRvLXRleHRhcmVhPlxuICAgICAqIGBcbiAgICAgKiB9KVxuICAgICAqIGNsYXNzIEFwcENvbXBvbmVudCB7fVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmhvc3RDbGFzcyA9IHRydWU7XG4gICAgfVxufTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLXRleHRhcmVhLXN1ZmZpeCcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgVGV4dEFyZWFTdWZmaXhDb21wb25lbnQucHJvdG90eXBlLCBcImhvc3RDbGFzc1wiLCB2b2lkIDApO1xuVGV4dEFyZWFTdWZmaXhDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICBDb21wb25lbnQoe1xuICAgICAgICBleHBvcnRBczogJ2tlbmRvVGV4dEFyZWFTdWZmaXgnLFxuICAgICAgICBzZWxlY3RvcjogJ2tlbmRvLXRleHRhcmVhLXN1ZmZpeCcsXG4gICAgICAgIHRlbXBsYXRlOiBgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PmBcbiAgICB9KVxuXSwgVGV4dEFyZWFTdWZmaXhDb21wb25lbnQpO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIFtOZ01vZHVsZV0oe3sgc2l0ZS5kYXRhLnVybHMuYW5ndWxhclsnbmdtb2R1bGVhcGknXSB9fSlcbiAqIGRlZmluaXRpb24gZm9yIHRoZSBUZXh0QXJlYSBjb21wb25lbnQuXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBgYGB0cy1uby1ydW5cbiAqIC8vIEltcG9ydCB0aGUgVGV4dEFyZWEgbW9kdWxlXG4gKiBpbXBvcnQgeyBUZXh0QXJlYU1vZHVsZSB9IGZyb20gJ0Bwcm9ncmVzcy9rZW5kby1hbmd1bGFyLWlucHV0cyc7XG4gKlxuICogLy8gVGhlIGJyb3dzZXIgcGxhdGZvcm0gd2l0aCBhIGNvbXBpbGVyXG4gKiBpbXBvcnQgeyBwbGF0Zm9ybUJyb3dzZXJEeW5hbWljIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlci1keW5hbWljJztcbiAqXG4gKiBpbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuICpcbiAqIC8vIEltcG9ydCB0aGUgYXBwIGNvbXBvbmVudFxuICogaW1wb3J0IHsgQXBwQ29tcG9uZW50IH0gZnJvbSAnLi9hcHAuY29tcG9uZW50JztcbiAqXG4gKiAvLyBEZWZpbmUgdGhlIGFwcCBtb2R1bGVcbiAqIF9ATmdNb2R1bGUoe1xuICogICAgIGRlY2xhcmF0aW9uczogW0FwcENvbXBvbmVudF0sIC8vIGRlY2xhcmUgYXBwIGNvbXBvbmVudFxuICogICAgIGltcG9ydHM6ICAgICAgW0Jyb3dzZXJNb2R1bGUsIFRleHRBcmVhTW9kdWxlXSwgLy8gaW1wb3J0IFRleHRBcmVhIG1vZHVsZVxuICogICAgIGJvb3RzdHJhcDogICAgW0FwcENvbXBvbmVudF1cbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgQXBwTW9kdWxlIHt9XG4gKlxuICogLy8gQ29tcGlsZSBhbmQgbGF1bmNoIHRoZSBtb2R1bGVcbiAqIHBsYXRmb3JtQnJvd3NlckR5bmFtaWMoKS5ib290c3RyYXBNb2R1bGUoQXBwTW9kdWxlKTtcbiAqXG4gKiBgYGBcbiAqL1xubGV0IFRleHRBcmVhTW9kdWxlID0gY2xhc3MgVGV4dEFyZWFNb2R1bGUge1xufTtcblRleHRBcmVhTW9kdWxlID0gX19kZWNvcmF0ZShbXG4gICAgTmdNb2R1bGUoe1xuICAgICAgICBkZWNsYXJhdGlvbnM6IFtcbiAgICAgICAgICAgIFRleHRBcmVhQ29tcG9uZW50LFxuICAgICAgICAgICAgVGV4dEFyZWFTdWZmaXhDb21wb25lbnRcbiAgICAgICAgXSxcbiAgICAgICAgZXhwb3J0czogW1xuICAgICAgICAgICAgVGV4dEFyZWFDb21wb25lbnQsXG4gICAgICAgICAgICBFdmVudHNNb2R1bGUsXG4gICAgICAgICAgICBUZXh0QXJlYVN1ZmZpeENvbXBvbmVudCxcbiAgICAgICAgICAgIFNIQVJFRF9ESVJFQ1RJVkVTXG4gICAgICAgIF0sXG4gICAgICAgIGltcG9ydHM6IFtDb21tb25Nb2R1bGUsIEV2ZW50c01vZHVsZSwgU2hhcmVkTW9kdWxlXVxuICAgIH0pXG5dLCBUZXh0QXJlYU1vZHVsZSk7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5jbGFzcyBQcmV2ZW50YWJsZUV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5wcmV2ZW50ZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJldmVudHMgdGhlIGRlZmF1bHQgYWN0aW9uIGZvciBhIHNwZWNpZmllZCBldmVudC5cbiAgICAgKiBJbiB0aGlzIHdheSwgdGhlIHNvdXJjZSBjb21wb25lbnQgc3VwcHJlc3NlcyB0aGUgYnVpbHQtaW4gYmVoYXZpb3IgdGhhdCBmb2xsb3dzIHRoZSBldmVudC5cbiAgICAgKi9cbiAgICBwcmV2ZW50RGVmYXVsdCgpIHtcbiAgICAgICAgdGhpcy5wcmV2ZW50ZWQgPSB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJZiB0aGUgZXZlbnQgaXMgcHJldmVudGVkIGJ5IGFueSBvZiBpdHMgc3Vic2NyaWJlcnMsIHJldHVybnMgYHRydWVgLlxuICAgICAqXG4gICAgICogQHJldHVybnMgLSBgdHJ1ZWAgaWYgdGhlIGRlZmF1bHQgYWN0aW9uIHdhcyBwcmV2ZW50ZWQuIE90aGVyd2lzZSwgcmV0dXJucyBgZmFsc2VgLlxuICAgICAqL1xuICAgIGlzRGVmYXVsdFByZXZlbnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJldmVudGVkO1xuICAgIH1cbn1cblxuLyoqXG4gKiBGaXJlcyBlYWNoIHRpbWUgdGhlIGxlZnQgc2lkZSBvZiB0aGUgQ29sb3JQaWNrZXIgd3JhcHBlciBpcyBjbGlja2VkLlxuICogVGhlIGV2ZW50IGlzIHRyaWdnZXJlZCByZWdhcmRsZXNzIG9mIHdoZXRoZXIgYSBDb2xvclBpY2tlciBpY29uIGlzIHNldCBvciBub3QuXG4gKlxuICogUHJvdmlkZXMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGN1cnJlbnQgYWN0aXZlIGNvbG9yIGFuZCBnaXZlcyB0aGUgb3B0aW9uIHRvIHByZXZlbnQgdGhlIG9wZW5pbmcgb2YgdGhlIHBvcHVwLlxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogYGBgdHMtbm8tcnVuXG4gKiBfQENvbXBvbmVudCh7XG4gKiAgIHNlbGVjdG9yOiAnbXktYXBwJyxcbiAqICAgdGVtcGxhdGU6IGBcbiAqICAgICAgIDxrZW5kby1jb2xvcnBpY2tlclxuICogICAgICAgICAgIFtpY29uXT1cIidlZGl0LXRvb2xzJ1wiXG4gKiAgICAgICAgICAgW3ZhbHVlXT1cIicjOTAwJ1wiXG4gKiAgICAgICAgICAgKGFjdGl2ZUNvbG9yQ2xpY2spPVwiaGFuZGxlQWN0aXZlQ29sb3JDbGljaygkZXZlbnQpXCJcbiAqICAgICAgID5cbiAqICAgICAgIDwva2VuZG8tY29sb3JwaWNrZXI+XG4gKiAgIGBcbiAqIH0pXG4gKiBjbGFzcyBBcHBDb21wb25lbnQge1xuICogICAgIHB1YmxpYyBoYW5kbGVBY3RpdmVDb2xvckNsaWNrKGV2ZW50OiBBY3RpdmVDb2xvckNsaWNrRXZlbnQpOiB2b2lkIHtcbiAqICAgICAgICAgZXZlbnQucHJldmVudE9wZW4oKTtcbiAqXG4gKiAgICAgICAgIGNvbnNvbGUubG9nKCdPcGVuIHByZXZlbnRlZDonLCBldmVudC5pc09wZW5QcmV2ZW50ZWQoKSk7XG4gKiAgICAgICAgIGNvbnNvbGUubG9nKCdDdXJyZW50IGNvbG9yOicsIGV2ZW50LmNvbG9yKTtcbiAqICAgICB9XG4gKiAgfVxuICogYGBgXG4gKi9cbmNsYXNzIEFjdGl2ZUNvbG9yQ2xpY2tFdmVudCB7XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqIEBwYXJhbSBjb2xvciBSZXByZXNlbnRzIHRoZSBjdXJyZW50IHZhbHVlIG9mIHRoZSBDb2xvclBpY2tlci5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihjb2xvcikge1xuICAgICAgICB0aGlzLmNvbG9yID0gY29sb3I7XG4gICAgICAgIHRoaXMub3BlblByZXZlbnRlZCA9IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcmV2ZW50cyB0aGUgb3BlbmluZyBvZiB0aGUgcG9wdXAuXG4gICAgICovXG4gICAgcHJldmVudE9wZW4oKSB7XG4gICAgICAgIHRoaXMub3BlblByZXZlbnRlZCA9IHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBwb3B1cCBvcGVuaW5nIGlzIHByZXZlbnRlZCBieSBhbnkgb2YgaXRzIHN1YnNjcmliZXJzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgLSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb3BlbiBhY3Rpb24gd2FzIHByZXZlbnRlZC4gT3RoZXJ3aXNlLCByZXR1cm5zIGBmYWxzZWAuXG4gICAgICovXG4gICAgaXNPcGVuUHJldmVudGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcGVuUHJldmVudGVkO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAaGlkZGVuXG4gKlxuICogUmV0dXJucyB0aGUgaGV4IG9yIHJnYmEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjb2xvci5cbiAqL1xuY29uc3QgcGFyc2VDb2xvciQxID0gKHZhbHVlLCBmb3JtYXQsIHNhZmUgPSB0cnVlKSA9PiB7XG4gICAgY29uc3QgYWxsb3dlZEZvcm1hdHMgPSBbJ2hleCcsICdyZ2JhJywgJ25hbWUnXTtcbiAgICBpZiAoYWxsb3dlZEZvcm1hdHMuaW5kZXhPZihmb3JtYXQpID09PSAtMSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIGNvbG9yIG91dHB1dCBmb3JtYXQgJyR7Zm9ybWF0fScuIFRoZSBhdmFpbGFibGUgb3B0aW9ucyBhcmUgJ2hleCcsICdyZ2JhJyBvciAnbmFtZScuYCk7XG4gICAgfVxuICAgIGlmICghaXNQcmVzZW50KHZhbHVlKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChmb3JtYXQgPT09ICduYW1lJykge1xuICAgICAgICByZXR1cm4gbmFtZUZvcm1hdCh2YWx1ZSwgc2FmZSk7XG4gICAgfVxuICAgIGNvbnN0IHBhcnNlZENvbG9yID0gcGFyc2VDb2xvcih2YWx1ZS50cmltKCksIHNhZmUpO1xuICAgIGlmICghaXNQcmVzZW50KHBhcnNlZENvbG9yKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHJldHVybiBmb3JtYXQgPT09ICdoZXgnID8gcGFyc2VkQ29sb3IudG9Dc3MoKSA6IHBhcnNlZENvbG9yLnRvQ3NzUmdiYSgpO1xufTtcbi8qKlxuICogQGhpZGRlblxuICpcbiAqIFJldHVybnMgYW4gSFNWIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGUgY29sb3Igc3RyaW5nLlxuICovXG5jb25zdCBnZXRIU1YgPSAodmFsdWUsIHNhZmUgPSB0cnVlKSA9PiB7XG4gICAgY29uc3QgcGFyc2VkID0gcGFyc2VDb2xvcih2YWx1ZSwgc2FmZSk7XG4gICAgaWYgKCFpc1ByZXNlbnQocGFyc2VkKSkge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIHJldHVybiBwYXJzZWQudG9IU1YoKTtcbn07XG4vKipcbiAqIEBoaWRkZW5cbiAqXG4gKiBSZXR1cm5zIGFuIFJHQkEgb2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjb2xvciBzdHJpbmcuXG4gKi9cbmNvbnN0IGdldFJHQkEgPSAodmFsdWUsIHNhZmUgPSB0cnVlKSA9PiB7XG4gICAgY29uc3QgcGFyc2VkID0gcGFyc2VDb2xvcih2YWx1ZSwgc2FmZSk7XG4gICAgaWYgKCFpc1ByZXNlbnQocGFyc2VkKSkge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIHJldHVybiBwYXJzZWQudG9CeXRlcygpO1xufTtcbi8qKlxuICogQGhpZGRlblxuICpcbiAqIFJldHVybnMgdGhlIFJHQkEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjb2xvci5cbiAqL1xuY29uc3QgZ2V0Q29sb3JGcm9tSFNWID0gKGhzdmEpID0+IHtcbiAgICBjb25zdCBodWUgPSBmaXRJbnRvQm91bmRzKGhzdmEuaCwgMCwgMzU5LjkpO1xuICAgIGNvbnN0IHNhdHVyYXRpb24gPSBmaXRJbnRvQm91bmRzKGhzdmEucywgMCwgMSk7XG4gICAgY29uc3QgdmFsdWUgPSBmaXRJbnRvQm91bmRzKGhzdmEudiwgMCwgMSk7XG4gICAgY29uc3QgYWxwaGEgPSBmaXRJbnRvQm91bmRzKGhzdmEuYSwgMCwgMSk7XG4gICAgcmV0dXJuIENvbG9yLmZyb21IU1YoaHVlLCBzYXR1cmF0aW9uLCB2YWx1ZSwgYWxwaGEpLnRvQ3NzUmdiYSgpO1xufTtcbi8qKlxuICogQGhpZGRlblxuICpcbiAqIFJldHVybnMgdGhlIFJHQkEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjb2xvciBiYXNlZCBvbiB0aGUgYGh1ZWAsIGFzc3VtaW5nIHRoZSBgdmFsdWVgLCBgc2F0dXJhdGlvbmAgYW5kIGBhbHBoYWAgaGF2ZSB2YWx1ZSBvZiBgMWAuXG4gKi9cbmNvbnN0IGdldENvbG9yRnJvbUh1ZSA9IChodWUpID0+IHtcbiAgICByZXR1cm4gZ2V0Q29sb3JGcm9tSFNWKHsgaDogaHVlLCBzOiAxLCB2OiAxLCBhOiAxIH0pO1xufTtcbi8qKlxuICogQGhpZGRlblxuICpcbiAqIFJldHVybnMgdGhlIFJHQkEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjb2xvci5cbiAqL1xuY29uc3QgZ2V0Q29sb3JGcm9tUkdCQSA9IChyZ2JhKSA9PiB7XG4gICAgY29uc3QgcmVkID0gZml0SW50b0JvdW5kcyhyZ2JhLnIsIDAsIDI1NSk7XG4gICAgY29uc3QgZ3JlZW4gPSBmaXRJbnRvQm91bmRzKHJnYmEuZywgMCwgMjU1KTtcbiAgICBjb25zdCBibHVlID0gZml0SW50b0JvdW5kcyhyZ2JhLmIsIDAsIDI1NSk7XG4gICAgY29uc3QgYWxwaGEgPSBmaXRJbnRvQm91bmRzKHJnYmEuYSwgMCwgMSk7XG4gICAgcmV0dXJuIENvbG9yLmZyb21CeXRlcyhyZWQsIGdyZWVuLCBibHVlLCBhbHBoYSkudG9Dc3NSZ2JhKCk7XG59O1xuLyoqXG4gKlxuICogQGhpZGRlblxuICovXG5mdW5jdGlvbiBuYW1lRm9ybWF0KHZhbHVlLCBzYWZlKSB7XG4gICAgdmFsdWUgPSB2YWx1ZS50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgICBpZiAoaXNQcmVzZW50KG5hbWVkQ29sb3JzW3ZhbHVlXSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBpZiAocGFyc2VDb2xvcih2YWx1ZSwgc2FmZSkpIHtcbiAgICAgICAgdmFsdWUgPSBwYXJzZUNvbG9yKHZhbHVlLCBzYWZlKS50b0hleCgpO1xuICAgIH1cbiAgICBjb25zdCBrZXkgPSBPYmplY3Qua2V5cyhuYW1lZENvbG9ycykuZmluZChrZXkgPT4gbmFtZWRDb2xvcnNba2V5XSA9PT0gdmFsdWUpO1xuICAgIGlmICgha2V5ICYmICFzYWZlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlIHByb3ZpZGVkIGNvbG9yICR7dmFsdWV9IGlzIG5vdCBzdXBwb3J0ZWQgZm9yICdmb3JtYXQ9XCJuYW1lXCInIHByb3BlcnR5LlRvIGRpc3BsYXkgJHt2YWx1ZX0gY29sb3IsIHRoZSBjb21wb25lbnQgJ2Zvcm1hdCcgcHJvcGVydHkgc2hvdWQgYmUgc2V0IHRvICdoZXgnIG9yICdyZ2JhJyBgKTtcbiAgICB9XG4gICAgcmV0dXJuIGtleTtcbn1cblxuLy8gdHNsaW50OmRpc2FibGU6bWF4LWxpbmUtbGVuZ3RoXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgUEFMRVRURVBSRVNFVFMgPSB7XG4gICAgYmFzaWM6IHtcbiAgICAgICAgY29sb3JzOiAnMDAwMDAwLDdmN2Y3Ziw4ODAwMTUsZWQxYzI0LGZmN2YyNyxmZmYyMDAsMjJiMTRjLDAwYTJlOCwzZjQ4Y2MsYTM0OWE0LGZmZmZmZixjM2MzYzMsYjk3YTU3LGZmYWVjOSxmZmM5MGUsZWZlNGIwLGI1ZTYxZCw5OWQ5ZWEsNzA5MmJlLGM4YmZlNycsXG4gICAgICAgIGNvbHVtbnM6IDEwXG4gICAgfSxcbiAgICBvZmZpY2U6IHtcbiAgICAgICAgY29sb3JzOiAnZmZmZmZmLCAwMDAwMDAsIGU2ZTZlNiwgNDM1NTY5LCA0MzcxYzQsIGVkN2UzMiwgYTVhNGE1LCBmZWJmMDQsIDVhOWJkNSwgNzFhZTQ4LCBmMmYyZjMsIDdmN2Y3ZiwgZDFjZWNlLCBkNWRkZTMsIGRhZTFmNCwgZmNlNWQ0LCBkZWVkZWQsIGZmZjJjYywgZGVlYWY2LCBlMWVmZDksIGQ3ZDhkOCwgNTg1OTU5LCBhZWFiYWIsIGFkYmFjYSwgYjRjNWU3LCBmNmNhYWMsIGRiZGJkYiwgZmZlNDk4LCBiY2Q2ZWUsIGM1ZTBiMiwgYmZiZmMwLCAzZjNmM2YsIDc2NzA3MCwgODU5NWIxLCA4ZmFiZGIsIGY1YjE4MywgYzljOGM5LCBmZWQ5NjUsIDliYzRlNSwgYThkMDhkLCBhNWE1YTYsIDI2MjYyNSwgMzkzOTM5LCAzMzQwNTAsIDJlNTQ5NiwgYzQ1YTExLCA3YjdiN2EsIGJmOTAwMCwgMmY3NWI1LCA1NDgyMzUsIDdmN2Y3ZiwgMGIwYzBjLCAxNjE2MTYsIDIyMmEzNCwgMjAzNzY0LCA4NDNkMGIsIDUyNTI1MiwgN2Y2MDAwLCAxZDRkNzksIDM3NTYyMycsXG4gICAgICAgIGNvbHVtbnM6IDEwXG4gICAgfSxcbiAgICBhcGV4OiB7XG4gICAgICAgIGNvbG9yczogJ2ZmZmZmZiwgMDAwMDAwLCBjOWMyZDEsIDY5Njc2ZCwgY2ViOTY2LCA5Y2IwODQsIDZiYjFjOSwgNjU4NWNmLCA3ZTZiYzksIGEzNzliYiwgZjJmMmYyLCA3ZjdmN2YsIGY0ZjJmNSwgZTBlMGUyLCBmNWYxZTAsIGViZWZlNiwgZTFlZmY0LCBlMGU2ZjUsIGU1ZTFmNCwgZWNlNGYxLCBkOGQ4ZDgsIDU5NTk1OSwgZTllNmVjLCBjMmMxYzUsIGViZTNjMSwgZDdkZmNkLCBjM2RmZTksIGMxY2VlYiwgY2JjM2U5LCBkYWM5ZTMsIGJmYmZiZiwgM2YzZjNmLCBkZWRhZTMsIGE0YTNhOCwgZTFkNWEzLCBjM2NmYjUsIGE2ZDBkZSwgYTJiNWUyLCBiMWE2ZGUsIGM3YWVkNiwgYTVhNWE1LCAyNjI2MjYsIDk2ODhhNSwgNGU0ZDUxLCBhZTk2MzgsIDc1OGM1YSwgM2Q4ZGE5LCAzNjViYjAsIDUzM2RhOSwgN2Q0ZDk5LCA3ZjdmN2YsIDBjMGMwYywgNjM1NjcyLCAzNDMzMzYsIDc0NjQyNSwgNGU1ZDNjLCAyOTVlNzAsIDI0M2M3NSwgMzcyOTcwLCA1MzMzNjYnLFxuICAgICAgICBjb2x1bW5zOiAxMFxuICAgIH0sXG4gICAgYXVzdGluOiB7XG4gICAgICAgIGNvbG9yczogJ2ZmZmZmZiwgMDAwMDAwLCBjYWYyNzgsIDNlM2QyZCwgOTRjNjAwLCA3MTY4NWEsIGZmNjcwMCwgOTA5NDY1LCA5NTZiNDMsIGZlYTAyMiwgZjJmMmYyLCA3ZjdmN2YsIGY0ZmNlNCwgZGRkY2QwLCBlZmZmYzAsIGUzZTFkYywgZmZlMGNiLCBlOGU5ZGYsIGVjZTFkNiwgZmVlY2QyLCBkOGQ4ZDgsIDU5NTk1OSwgZTlmOWM5LCBiYmI5YTEsIGRmZmY4MiwgYzhjM2JhLCBmZmMyOTksIGQyZDRjMCwgZGFjM2FkLCBmZWQ5YTYsIGJmYmZiZiwgM2YzZjNmLCBkZmY3YWUsIGFkYTU5OCwgY2ZmZjQzLCBhZGE1OTgsIGZmYTM2NSwgYmNiZmExLCBjOGE1ODUsIGZlYzY3YSwgYTVhNWE1LCAyNjI2MjYsIGE5ZWEyNSwgMmUyZDIxLCA2Zjk0MDAsIDU0NGU0MywgYmY0ZDAwLCA2YzZmNGIsIDZmNTAzMiwgZDc3YjAwLCA3ZjdmN2YsIDBjMGMwYywgNzRhNTBmLCAxZjFlMTYsIDRhNjMwMCwgMzgzNDJkLCA3ZjMzMDAsIDQ4NGEzMiwgNGEzNTIxLCA4ZjUyMDAnLFxuICAgICAgICBjb2x1bW5zOiAxMFxuICAgIH0sXG4gICAgY2xhcml0eToge1xuICAgICAgICBjb2xvcnM6ICdmZmZmZmYsIDI5MjkzNCwgZjNmMmRjLCBkMjUzM2MsIDkzYTI5OSwgYWQ4ZjY3LCA3MjYwNTYsIDRjNWE2YSwgODA4ZGEwLCA3OTQ2M2QsIGYyZjJmMiwgZTdlN2VjLCBlN2U1YjksIGY2ZGNkOCwgZTllY2VhLCBlZWU4ZTAsIGU0ZGVkYiwgZDhkZGUzLCBlNWU4ZWMsIGU5ZDZkMywgZDhkOGQ4LCBjNGM0ZDEsIGQ1ZDE4NSwgZWRiYWIxLCBkM2Q5ZDYsIGRlZDJjMiwgYzliZWI4LCBiMmJjYzgsIGNjZDFkOSwgZDNhZWE3LCBiZmJmYmYsIDhhOGFhMywgYWNhNzNiLCBlNDk3OGEsIGJlYzdjMSwgY2RiYmEzLCBhZjllOTQsIDhjOWJhYywgYjJiYWM2LCBiZDg1N2MsIGE1YTVhNSwgNTY1NjZlLCA1NjUzMWQsIGE0MzkyNSwgNmI3YzcyLCA4NjZiNDgsIDU1NDg0MCwgMzk0MzRmLCA1YzY5N2IsIDVhMzQyZCwgN2Y3ZjdmLCAzYjNiNGIsIDIyMjEwYiwgNmQyNjE5LCA0NzUzNGMsIDU5NDczMCwgMzkzMDJiLCAyNjJkMzUsIDNkNDY1MiwgM2MyMzFlJyxcbiAgICAgICAgY29sdW1uczogMTBcbiAgICB9LFxuICAgIHNsaXBzdHJlYW06IHtcbiAgICAgICAgY29sb3JzOiAnZmZmZmZmLCAwMDAwMDAsIGI0ZGNmYSwgMjEyNzQ1LCA0ZTY3YzgsIDVlY2NmMywgYTdlYTUyLCA1ZGNlYWYsIGZmODAyMSwgZjE0MTI0LCBmMmYyZjIsIDdmN2Y3ZiwgOGJjOWY3LCBjN2NjZTQsIGRiZTBmNCwgZGVmNGZjLCBlZGZhZGMsIGRlZjVlZiwgZmZlNWQyLCBmY2Q5ZDMsIGQ4ZDhkOCwgNTk1OTU5LCA0ZmFjZjMsIDkwOWFjYSwgYjhjMmU5LCBiZWVhZmEsIGRiZjZiOSwgYmVlYmRmLCBmZmNjYTYsIGY5YjNhNywgYmZiZmJmLCAzZjNmM2YsIDBkNzhjOSwgNTk2N2FmLCA5NGEzZGUsIDllZTBmNywgY2FmMjk3LCA5ZGUxY2YsIGZmYjI3OSwgZjY4ZDdiLCBhNWE1YTUsIDI2MjYyNiwgMDYzYzY0LCAxODFkMzMsIDMxNDc5ZiwgMTFiMmViLCA4MWQzMTksIDM0YWM4YiwgZDg1YzAwLCBjMzI2MGMsIDdmN2Y3ZiwgMGMwYzBjLCAwMjE4MjgsIDEwMTMyMiwgMjAyZjZhLCAwYjc2OWMsIDU2OGMxMSwgMjI3MjVjLCA5MDNkMDAsIDgyMTkwOCcsXG4gICAgICAgIGNvbHVtbnM6IDEwXG4gICAgfSxcbiAgICBtZXRybzoge1xuICAgICAgICBjb2xvcnM6ICdmZmZmZmYsIDAwMDAwMCwgZDZlY2ZmLCA0ZTViNmYsIDdmZDEzYiwgZWExNTdhLCBmZWI4MGEsIDAwYWRkYywgNzM4YWM4LCAxYWIzOWYsIGYyZjJmMiwgN2Y3ZjdmLCBhN2Q2ZmYsIGQ5ZGRlNCwgZTVmNWQ3LCBmYWQwZTQsIGZlZjBjZCwgYzVmMmZmLCBlMmU3ZjQsIGM5ZjdmMSwgZDhkOGQ4LCA1OTU5NTksIDYwYjVmZiwgYjNiY2NhLCBjYmVjYjAsIGY2YTFjOSwgZmVlMjljLCA4YmU2ZmYsIGM3ZDBlOSwgOTRlZmUzLCBiZmJmYmYsIDNmM2YzZiwgMDA3ZGVhLCA4ZDliYWYsIGIyZTM4OSwgZjI3MmFmLCBmZWQ0NmIsIDUxZDlmZiwgYWFiOGRlLCA1ZmU3ZDUsIGE1YTVhNSwgMjYyNjI2LCAwMDNlNzUsIDNhNDQ1MywgNWVhMjI2LCBhZjBmNWIsIGM1OGMwMCwgMDA4MWE1LCA0MjVlYTksIDEzODY3NywgN2Y3ZjdmLCAwYzBjMGMsIDAwMTkyZSwgMjcyZDM3LCAzZjZjMTksIDc1MGEzZCwgODM1ZDAwLCAwMDU2NmUsIDJjM2Y3MSwgMGM1OTRmJyxcbiAgICAgICAgY29sdW1uczogMTBcbiAgICB9LFxuICAgIGZsb3c6IHtcbiAgICAgICAgY29sb3JzOiAnZmZmZmZmLCAwMDAwMDAsIGRiZjVmOSwgMDQ2MTdiLCAwZjZmYzYsIDAwOWRkOSwgMGJkMGQ5LCAxMGNmOWIsIDdjY2E2MiwgYTVjMjQ5LCBmMmYyZjIsIDdmN2Y3ZiwgYjJlOWYyLCBiNGVjZmMsIGM3ZTJmYSwgYzRlZWZmLCBjOWZhZmMsIGM5ZmFlZCwgZTRmNGRmLCBlZGYyZGEsIGQ4ZDhkOCwgNTk1OTU5LCA3NmQ5ZTgsIDZhZGFmYSwgOTBjNmY2LCA4OWRlZmYsIDkzZjVmOSwgOTRmNmRiLCBjYWU5YzAsIGRiZTZiNiwgYmZiZmJmLCAzZjNmM2YsIDIxYjJjOCwgMjBjOGY3LCA1OWE5ZjIsIDRmY2VmZiwgNWRmMGY2LCA1ZmYyY2EsIGIwZGZhMCwgYzlkYTkxLCBhNWE1YTUsIDI2MjYyNiwgMTA1OTY0LCAwMjQ4NWMsIDBiNTM5NCwgMDA3NWEyLCAwODljYTIsIDBiOWI3NCwgNTRhODM4LCA3ZTk1MzIsIDdmN2Y3ZiwgMGMwYzBjLCAwNjIzMjgsIDAxMzAzZCwgMDczNzYzLCAwMDRlNmMsIDA1Njg2YywgMDc2NzRkLCAzODcwMjUsIDU0NjMyMScsXG4gICAgICAgIGNvbHVtbnM6IDEwXG4gICAgfSxcbiAgICBoYXJkY292ZXI6IHtcbiAgICAgICAgY29sb3JzOiAnZmZmZmZmLCAwMDAwMDAsIGVjZTljNiwgODk1ZDFkLCA4NzM2MjQsIGQ2ODYyZCwgZDBiZTQwLCA4NzdmNmMsIDk3MjEwOSwgYWViNzk1LCBmMmYyZjIsIDdmN2Y3ZiwgZTFkY2E1LCBmMmUwYzYsIGYwZDBjOSwgZjZlNmQ1LCBmNWYyZDgsIGU3ZTVlMSwgZmJjN2JjLCBlZWYwZTksIGQ4ZDhkOCwgNTk1OTU5LCBkMGM5NzQsIGU2YzI4ZCwgZTJhMjkzLCBlZWNlYWEsIGVjZTViMiwgY2ZjY2MzLCBmNzhmN2EsIGRlZTJkNCwgYmZiZmJmLCAzZjNmM2YsIGEyOWEzNiwgZGFhNDU0LCBkNDczNWUsIGU2YjY4MSwgZTJkODhjLCBiN2IyYTUsIGYzNTgzOCwgY2VkM2JmLCBhNWE1YTUsIDI2MjYyNiwgNTE0ZDFiLCA2NjQ1MTUsIDY1MjgxYSwgYTI2NDFmLCBhMzk0MjgsIDY1NWY1MCwgNzExODA2LCA4Nzk0NjQsIDdmN2Y3ZiwgMGMwYzBjLCAyMDFlMGEsIDQ0MmUwZSwgNDMxYjExLCA2YzQzMTUsIDZkNjIxYSwgNDMzZjM1LCA0YjEwMDQsIDVhNjI0MycsXG4gICAgICAgIGNvbHVtbnM6IDEwXG4gICAgfSxcbiAgICB0cmVrOiB7XG4gICAgICAgIGNvbG9yczogJ2ZmZmZmZiwgMDAwMDAwLCBmYmVlYzksIDRlM2IzMCwgZjBhMjJlLCBhNTY0NGUsIGI1OGI4MCwgYzM5ODZkLCBhMTk1NzQsIGMxNzUyOSwgZjJmMmYyLCA3ZjdmN2YsIGY3ZTA5ZSwgZTFkNmNmLCBmY2VjZDUsIGVkZGZkYSwgZjBlN2U1LCBmM2VhZTEsIGVjZTllMywgZjVlM2QxLCBkOGQ4ZDgsIDU5NTk1OSwgZjNjYzVmLCBjNGFkOWYsIGY5ZDlhYiwgZGNjMGI2LCBlMWQwY2MsIGU3ZDVjNCwgZDlkNGM3LCBlYmM3YTMsIGJmYmZiZiwgM2YzZjNmLCBkMjlmMGYsIGE3ODQ3MCwgZjZjNzgxLCBjYmEwOTIsIGQyYjliMiwgZGJjMWE3LCBjNmJmYWIsIGUxYWM3NiwgYTVhNWE1LCAyNjI2MjYsIDY5NGYwNywgM2EyYzI0LCBjODdkMGUsIDdiNGIzYSwgOTI2MjU1LCBhMTcyNDIsIDdiNzE1MywgOTA1NzFlLCA3ZjdmN2YsIDBjMGMwYywgMmExZjAzLCAyNzFkMTgsIDg1NTMwOSwgNTIzMjI2LCA2MTQxMzgsIDZiNGMyYywgNTI0YjM3LCA2MDNhMTQnLFxuICAgICAgICBjb2x1bW5zOiAxMFxuICAgIH0sXG4gICAgdmVydmU6IHtcbiAgICAgICAgY29sb3JzOiAnZmZmZmZmLCAwMDAwMDAsIGQyZDJkMiwgNjY2NjY2LCBmZjM4OGMsIGU0MDA1OSwgOWMwMDdmLCA2ODAwN2YsIDAwNWJkMywgMDAzNDllLCBmMmYyZjIsIDdmN2Y3ZiwgYmRiZGJkLCBlMGUwZTAsIGZmZDdlOCwgZmZjNmRjLCBmZmI4ZjEsIGYxYjJmZiwgYzNkY2ZmLCBiOGNmZmYsIGQ4ZDhkOCwgNTk1OTU5LCA5ZDlkOWQsIGMxYzFjMSwgZmZhZmQxLCBmZjhlYmEsIGZmNzFlNCwgZTM2NWZmLCA4N2JhZmYsIDcyYTBmZiwgYmZiZmJmLCAzZjNmM2YsIDY5Njk2OSwgYTNhM2EzLCBmZjg3YmEsIGZmNTU5NywgZmYyYWQ3LCBkNTE5ZmYsIDRiOThmZiwgMmI3MWZmLCBhNWE1YTUsIDI2MjYyNiwgMzQzNDM0LCA0YzRjNGMsIGU5MDA2MiwgYWIwMDQyLCA3NTAwNWYsIDRlMDA1ZiwgMDA0NDllLCAwMDI2NzYsIDdmN2Y3ZiwgMGMwYzBjLCAxNTE1MTUsIDMzMzMzMywgOWIwMDQxLCA3MjAwMmMsIDRlMDAzZiwgMzQwMDNmLCAwMDJkNjksIDAwMTk0ZicsXG4gICAgICAgIGNvbHVtbnM6IDEwXG4gICAgfSxcbiAgICBtb25vY2hyb21lOiB7XG4gICAgICAgIGNvbG9yczogJzAwMDAwMCwgMWExYTFhLCAzMzMzMzMsIDRkNGQ0ZCwgNjY2NjY2LCA4MDgwODAsIDk5OTk5OSwgYjNiM2IzLCBjY2NjY2MsIGU2ZTZlNiwgZjJmMmYyLCBmZmZmZmYnLFxuICAgICAgICBjb2x1bW5zOiAxMlxuICAgIH0sXG4gICAgYWNjZXNzaWJsZToge1xuICAgICAgICBjb2xvcnM6ICdibGFjaywgZ3JleSwgZGFya3JlZCwgcmVkLCBkYXJrb3JhbmdlLCBnb2xkLCBncmVlbiwgYmx1ZSwgZGFya2JsdWUsIHB1cnBsZSwgd2hpdGUsIGRhcmtncmV5LCBzYWRkbGVicm93biwgcGluaywgb3JhbmdlLCB5ZWxsb3csIGxpZ2h0Z3JlZW4sIGxpZ2h0c2t5Ymx1ZSwgbGlnaHRibHVlLCBtZWRpdW1wdXJwbGUnLFxuICAgICAgICBjb2x1bW5zOiAxMFxuICAgIH1cbn07XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5sZXQgQ29sb3JQaWNrZXJMb2NhbGl6YXRpb25TZXJ2aWNlID0gY2xhc3MgQ29sb3JQaWNrZXJMb2NhbGl6YXRpb25TZXJ2aWNlIGV4dGVuZHMgTG9jYWxpemF0aW9uU2VydmljZSB7XG4gICAgY29uc3RydWN0b3IocHJlZml4LCBtZXNzYWdlU2VydmljZSwgX3J0bCkge1xuICAgICAgICBzdXBlcihwcmVmaXgsIG1lc3NhZ2VTZXJ2aWNlLCBfcnRsKTtcbiAgICB9XG59O1xuQ29sb3JQaWNrZXJMb2NhbGl6YXRpb25TZXJ2aWNlID0gX19kZWNvcmF0ZShbXG4gICAgX19wYXJhbSgwLCBJbmplY3QoTDEwTl9QUkVGSVgpKSxcbiAgICBfX3BhcmFtKDEsIE9wdGlvbmFsKCkpLFxuICAgIF9fcGFyYW0oMiwgT3B0aW9uYWwoKSksIF9fcGFyYW0oMiwgSW5qZWN0KFJUTCkpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbU3RyaW5nLCBNZXNzYWdlU2VydmljZSwgQm9vbGVhbl0pXG5dLCBDb2xvclBpY2tlckxvY2FsaXphdGlvblNlcnZpY2UpO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xubGV0IENvbG9yR3JhZGllbnRMb2NhbGl6YXRpb25TZXJ2aWNlID0gY2xhc3MgQ29sb3JHcmFkaWVudExvY2FsaXphdGlvblNlcnZpY2UgZXh0ZW5kcyBMb2NhbGl6YXRpb25TZXJ2aWNlIHtcbiAgICBjb25zdHJ1Y3RvcihwcmVmaXgsIG1lc3NhZ2VTZXJ2aWNlLCBfcnRsLCBjb2xvclBpY2tlckxvY2FsaXphdGlvbikge1xuICAgICAgICBzdXBlcihwcmVmaXgsIG1lc3NhZ2VTZXJ2aWNlLCBfcnRsKTtcbiAgICAgICAgdGhpcy5jb2xvclBpY2tlckxvY2FsaXphdGlvbiA9IGNvbG9yUGlja2VyTG9jYWxpemF0aW9uO1xuICAgIH1cbiAgICBnZXQoc2hvcnRLZXkpIHtcbiAgICAgICAgaWYgKHRoaXMuY29sb3JQaWNrZXJMb2NhbGl6YXRpb24pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbG9yUGlja2VyTG9jYWxpemF0aW9uLmdldChzaG9ydEtleSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN1cGVyLmdldChzaG9ydEtleSk7XG4gICAgfVxufTtcbkNvbG9yR3JhZGllbnRMb2NhbGl6YXRpb25TZXJ2aWNlID0gX19kZWNvcmF0ZShbXG4gICAgX19wYXJhbSgwLCBJbmplY3QoTDEwTl9QUkVGSVgpKSxcbiAgICBfX3BhcmFtKDEsIE9wdGlvbmFsKCkpLFxuICAgIF9fcGFyYW0oMiwgT3B0aW9uYWwoKSksIF9fcGFyYW0oMiwgSW5qZWN0KFJUTCkpLFxuICAgIF9fcGFyYW0oMywgT3B0aW9uYWwoKSksIF9fcGFyYW0oMywgSW5qZWN0KENvbG9yUGlja2VyTG9jYWxpemF0aW9uU2VydmljZSkpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbU3RyaW5nLCBNZXNzYWdlU2VydmljZSwgQm9vbGVhbiwgQ29sb3JQaWNrZXJMb2NhbGl6YXRpb25TZXJ2aWNlXSlcbl0sIENvbG9yR3JhZGllbnRMb2NhbGl6YXRpb25TZXJ2aWNlKTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmxldCBDb2xvcklucHV0Q29tcG9uZW50ID0gY2xhc3MgQ29sb3JJbnB1dENvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IobG9jYWxpemF0aW9uLCBob3N0KSB7XG4gICAgICAgIHRoaXMubG9jYWxpemF0aW9uID0gbG9jYWxpemF0aW9uO1xuICAgICAgICB0aGlzLmhvc3QgPSBob3N0O1xuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyB3aGV0aGVyIHRoZSBhbHBoYSBzbGlkZXIgd2lsbCBiZSBzaG93bi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub3BhY2l0eSA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIHRoZSBkaXNhYmxlZCBzdGF0ZSBvZiB0aGUgQ29sb3JJbnB1dC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgdGhlIHJlYWQtb25seSBzdGF0ZSBvZiB0aGUgQ29sb3JJbnB1dC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmVhZG9ubHkgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVtaXRzIGEgcGFyc2VkIHJnYmEgc3RyaW5nIGNvbG9yLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52YWx1ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5jb2xvcklucHV0Q2xhc3MgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHJnYmEgaW5wdXRzIHZhbHVlcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmdiYSA9IHt9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgd2hldGhlciBhbnkgb2YgdGhlIGlucHV0cyBhcmUgZm9jdXNlZC5cbiAgICAgKi9cbiAgICBnZXQgaXNGb2N1c2VkKCkge1xuICAgICAgICBpZiAoIShpc0RvY3VtZW50QXZhaWxhYmxlKCkgJiYgaXNQcmVzZW50KHRoaXMuaG9zdCkpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWN0aXZlRWxlbWVudCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgICAgIHJldHVybiB0aGlzLmhvc3QubmF0aXZlRWxlbWVudC5jb250YWlucyhhY3RpdmVFbGVtZW50KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHdoZXRoZXIgYW55IG9mIHRoZSByZ2JhIGlucHV0cyBoYXZlIHZhbHVlLlxuICAgICAqL1xuICAgIGdldCByZ2JhSW5wdXRWYWxpZCgpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMucmdiYSkuZXZlcnkoa2V5ID0+IGlzUHJlc2VudCh0aGlzLnJnYmFba2V5XSkpO1xuICAgIH1cbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzKSB7XG4gICAgICAgIGlmIChpc1ByZXNlbnQoY2hhbmdlcy52YWx1ZSkgJiYgIXRoaXMuaXNGb2N1c2VkKSB7XG4gICAgICAgICAgICB0aGlzLmhleCA9IHBhcnNlQ29sb3IkMSh0aGlzLnZhbHVlLCAnaGV4Jyk7XG4gICAgICAgICAgICB0aGlzLnJnYmEgPSBnZXRSR0JBKHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5yZ2JhLmEgPSBwYXJzZUNvbG9yJDEodGhpcy52YWx1ZSwgJ3JnYmEnKSA/IHRoaXMucmdiYS5hIDogMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVSZ2JhVmFsdWVDaGFuZ2UoKSB7XG4gICAgICAgIGNvbnN0IGNvbG9yID0gZ2V0Q29sb3JGcm9tUkdCQSh0aGlzLnJnYmEpO1xuICAgICAgICBpZiAoIXRoaXMucmdiYUlucHV0VmFsaWQgfHwgY29sb3IgPT09IHRoaXMudmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZhbHVlID0gY29sb3I7XG4gICAgICAgIHRoaXMucmdiYSA9IGdldFJHQkEodGhpcy52YWx1ZSk7XG4gICAgICAgIHRoaXMuaGV4ID0gcGFyc2VDb2xvciQxKGNvbG9yLCAnaGV4Jyk7XG4gICAgICAgIHRoaXMudmFsdWVDaGFuZ2UuZW1pdChjb2xvcik7XG4gICAgfVxuICAgIGhhbmRsZUhleFZhbHVlQ2hhbmdlKGhleCkge1xuICAgICAgICB0aGlzLmhleCA9IGhleDtcbiAgICAgICAgY29uc3QgY29sb3IgPSBwYXJzZUNvbG9yJDEoaGV4LCAncmdiYScpO1xuICAgICAgICBpZiAoIWlzUHJlc2VudChjb2xvcikgfHwgY29sb3IgPT09IHRoaXMudmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZhbHVlID0gY29sb3I7XG4gICAgICAgIHRoaXMucmdiYSA9IGdldFJHQkEoY29sb3IpO1xuICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQoY29sb3IpO1xuICAgIH1cbiAgICBoYW5kbGVSZ2JhSW5wdXRCbHVyKCkge1xuICAgICAgICBpZiAoIXRoaXMucmdiYUlucHV0VmFsaWQpIHtcbiAgICAgICAgICAgIHRoaXMucmdiYSA9IGdldFJHQkEodGhpcy52YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlSGV4SW5wdXRCbHVyKCkge1xuICAgICAgICB0aGlzLmhleCA9IHBhcnNlQ29sb3IkMSh0aGlzLnZhbHVlLCAnaGV4Jyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICB0ZXh0Rm9yKGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2NhbGl6YXRpb24uZ2V0KGtleSk7XG4gICAgfVxufTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIENvbG9ySW5wdXRDb21wb25lbnQucHJvdG90eXBlLCBcInZhbHVlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgQ29sb3JJbnB1dENvbXBvbmVudC5wcm90b3R5cGUsIFwib3BhY2l0eVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIENvbG9ySW5wdXRDb21wb25lbnQucHJvdG90eXBlLCBcImRpc2FibGVkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgQ29sb3JJbnB1dENvbXBvbmVudC5wcm90b3R5cGUsIFwicmVhZG9ubHlcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBDb2xvcklucHV0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ2YWx1ZUNoYW5nZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmstY29sb3JpbnB1dHMnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIENvbG9ySW5wdXRDb21wb25lbnQucHJvdG90eXBlLCBcImNvbG9ySW5wdXRDbGFzc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgVmlld0NoaWxkKCdvcGFjaXR5SW5wdXQnLCB7IHJlYWQ6IEVsZW1lbnRSZWYsIHN0YXRpYzogZmFsc2UgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEVsZW1lbnRSZWYpXG5dLCBDb2xvcklucHV0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJvcGFjaXR5SW5wdXRcIiwgdm9pZCAwKTtcbkNvbG9ySW5wdXRDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICBDb21wb25lbnQoe1xuICAgICAgICBzZWxlY3RvcjogJ2tlbmRvLWNvbG9yaW5wdXQnLFxuICAgICAgICB0ZW1wbGF0ZTogYFxuICAgICAgICA8ZGl2IGNsYXNzPVwiay1oYm94IGstZ3JhZGllbnQtdmFsdWVzXCI+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAjaGV4SW5wdXRcbiAgICAgICAgICAgICAgICBjbGFzcz1cImstdGV4dGJveCBrLWhleC12YWx1ZVwiXG4gICAgICAgICAgICAgICAgW2Rpc2FibGVkXT1cImRpc2FibGVkXCJcbiAgICAgICAgICAgICAgICBbcmVhZG9ubHldPVwicmVhZG9ubHlcIlxuICAgICAgICAgICAgICAgIFt2YWx1ZV09XCJoZXggfHwgJydcIlxuICAgICAgICAgICAgICAgIFtwbGFjZWhvbGRlcl09XCJ0ZXh0Rm9yKCdoZXhJbnB1dFBsYWNlaG9sZGVyJylcIlxuICAgICAgICAgICAgICAgIChibHVyKT1cImhhbmRsZUhleElucHV0Qmx1cigpXCJcbiAgICAgICAgICAgICAgICAoaW5wdXQpPVwiaGFuZGxlSGV4VmFsdWVDaGFuZ2UoaGV4SW5wdXQudmFsdWUpXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8a2VuZG8tbnVtZXJpY3RleHRib3hcbiAgICAgICAgICAgICAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWRcIlxuICAgICAgICAgICAgICAgIFtyZWFkb25seV09XCJyZWFkb25seVwiXG4gICAgICAgICAgICAgICAgW21pbl09XCIwXCJcbiAgICAgICAgICAgICAgICBbbWF4XT1cIjI1NVwiXG4gICAgICAgICAgICAgICAgW3BsYWNlaG9sZGVyXT1cInRleHRGb3IoJ3JlZElucHV0UGxhY2Vob2xkZXInKVwiXG4gICAgICAgICAgICAgICAgWyh2YWx1ZSldPVwicmdiYS5yXCJcbiAgICAgICAgICAgICAgICBbYXV0b0NvcnJlY3RdPVwidHJ1ZVwiXG4gICAgICAgICAgICAgICAgW3NwaW5uZXJzXT1cImZhbHNlXCJcbiAgICAgICAgICAgICAgICBbZm9ybWF0XT1cIiduJ1wiXG4gICAgICAgICAgICAgICAgW2RlY2ltYWxzXT1cIjBcIlxuICAgICAgICAgICAgICAgIChibHVyKT1cImhhbmRsZVJnYmFJbnB1dEJsdXIoKVwiXG4gICAgICAgICAgICAgICAgKHZhbHVlQ2hhbmdlKT1cImhhbmRsZVJnYmFWYWx1ZUNoYW5nZSgpXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgIDwva2VuZG8tbnVtZXJpY3RleHRib3g+XG4gICAgICAgICAgICA8a2VuZG8tbnVtZXJpY3RleHRib3hcbiAgICAgICAgICAgICAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWRcIlxuICAgICAgICAgICAgICAgIFtyZWFkb25seV09XCJyZWFkb25seVwiXG4gICAgICAgICAgICAgICAgW21pbl09XCIwXCJcbiAgICAgICAgICAgICAgICBbbWF4XT1cIjI1NVwiXG4gICAgICAgICAgICAgICAgW3BsYWNlaG9sZGVyXT1cInRleHRGb3IoJ2dyZWVuSW5wdXRQbGFjZWhvbGRlcicpXCJcbiAgICAgICAgICAgICAgICBbKHZhbHVlKV09XCJyZ2JhLmdcIlxuICAgICAgICAgICAgICAgIFthdXRvQ29ycmVjdF09XCJ0cnVlXCJcbiAgICAgICAgICAgICAgICBbc3Bpbm5lcnNdPVwiZmFsc2VcIlxuICAgICAgICAgICAgICAgIFtmb3JtYXRdPVwiJ24nXCJcbiAgICAgICAgICAgICAgICBbZGVjaW1hbHNdPVwiMFwiXG4gICAgICAgICAgICAgICAgKGJsdXIpPVwiaGFuZGxlUmdiYUlucHV0Qmx1cigpXCJcbiAgICAgICAgICAgICAgICAodmFsdWVDaGFuZ2UpPVwiaGFuZGxlUmdiYVZhbHVlQ2hhbmdlKClcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgPC9rZW5kby1udW1lcmljdGV4dGJveD5cbiAgICAgICAgICAgIDxrZW5kby1udW1lcmljdGV4dGJveFxuICAgICAgICAgICAgICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiXG4gICAgICAgICAgICAgICAgW3JlYWRvbmx5XT1cInJlYWRvbmx5XCJcbiAgICAgICAgICAgICAgICBbbWluXT1cIjBcIlxuICAgICAgICAgICAgICAgIFttYXhdPVwiMjU1XCJcbiAgICAgICAgICAgICAgICBbcGxhY2Vob2xkZXJdPVwidGV4dEZvcignYmx1ZUlucHV0UGxhY2Vob2xkZXInKVwiXG4gICAgICAgICAgICAgICAgWyh2YWx1ZSldPVwicmdiYS5iXCJcbiAgICAgICAgICAgICAgICBbYXV0b0NvcnJlY3RdPVwidHJ1ZVwiXG4gICAgICAgICAgICAgICAgW3NwaW5uZXJzXT1cImZhbHNlXCJcbiAgICAgICAgICAgICAgICBbZm9ybWF0XT1cIiduJ1wiXG4gICAgICAgICAgICAgICAgW2RlY2ltYWxzXT1cIjBcIlxuICAgICAgICAgICAgICAgIChibHVyKT1cImhhbmRsZVJnYmFJbnB1dEJsdXIoKVwiXG4gICAgICAgICAgICAgICAgKHZhbHVlQ2hhbmdlKT1cImhhbmRsZVJnYmFWYWx1ZUNoYW5nZSgpXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgIDwva2VuZG8tbnVtZXJpY3RleHRib3g+XG4gICAgICAgICAgICA8a2VuZG8tbnVtZXJpY3RleHRib3ggICNvcGFjaXR5SW5wdXRcbiAgICAgICAgICAgICAgICAqbmdJZj1cIm9wYWNpdHlcIlxuICAgICAgICAgICAgICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiXG4gICAgICAgICAgICAgICAgW3JlYWRvbmx5XT1cInJlYWRvbmx5XCJcbiAgICAgICAgICAgICAgICBbbWluXT1cIjBcIlxuICAgICAgICAgICAgICAgIFttYXhdPVwiMVwiXG4gICAgICAgICAgICAgICAgW3BsYWNlaG9sZGVyXT1cInRleHRGb3IoJ2FscGhhSW5wdXRQbGFjZWhvbGRlcicpXCJcbiAgICAgICAgICAgICAgICBbKHZhbHVlKV09XCJyZ2JhLmFcIlxuICAgICAgICAgICAgICAgIFthdXRvQ29ycmVjdF09XCJ0cnVlXCJcbiAgICAgICAgICAgICAgICBbc3Bpbm5lcnNdPVwiZmFsc2VcIlxuICAgICAgICAgICAgICAgIFtzdGVwXT1cIjAuMDFcIlxuICAgICAgICAgICAgICAgIFtmb3JtYXRdPVwiJ24yJ1wiXG4gICAgICAgICAgICAgICAgW2RlY2ltYWxzXT1cIjJcIlxuICAgICAgICAgICAgICAgIChibHVyKT1cImhhbmRsZVJnYmFJbnB1dEJsdXIoKVwiXG4gICAgICAgICAgICAgICAgKHZhbHVlQ2hhbmdlKT1cImhhbmRsZVJnYmFWYWx1ZUNoYW5nZSgpXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgIDwva2VuZG8tbnVtZXJpY3RleHRib3g+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiay1oYm94IGstZ3JhZGllbnQtdmFsdWVzXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiay1oZXgtdmFsdWVcIj5oZXg8L2Rpdj5cbiAgICAgICAgICAgIDxkaXY+cjwvZGl2PlxuICAgICAgICAgICAgPGRpdj5nPC9kaXY+XG4gICAgICAgICAgICA8ZGl2PmI8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgKm5nSWY9XCJvcGFjaXR5XCI+YTwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICBgXG4gICAgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtMb2NhbGl6YXRpb25TZXJ2aWNlLFxuICAgICAgICBFbGVtZW50UmVmXSlcbl0sIENvbG9ySW5wdXRDb21wb25lbnQpO1xuXG52YXIgQ29sb3JHcmFkaWVudENvbXBvbmVudF8xO1xuY29uc3QgREVGQVVMVF9PVVRQVVRfRk9STUFUID0gJ3JnYmEnO1xuY29uc3QgREVGQVVMVF9CQUNLR1JPVU5EX0NPTE9SID0gJ3JnYmEoMjU1LCAwLCAwLCAxKSc7XG5sZXQgc2VyaWFsID0gMDtcbmNvbnN0IERSQUdIQU5ETEVfTU9WRV9TUEVFRCA9IDU7XG4vKipcbiAqIFRoZSBDb2xvckdyYWRpZW50IGNvbXBvbmVudCBlbmFibGVzIHNtb290aCBjb2xvciB0cmFuc2l0aW9ucyBhbmQgcHJvdmlkZXMgb3B0aW9ucyBmb3Igc2VsZWN0aW5nIHNwZWNpZmljIGNvbG9ycyBvdmVyIHRoZSBkcmFnIGhhbmRsZS5cbiAqIFRoZSBDb2xvckdyYWRpZW50IGlzIGluZGVwZW5kZW50bHkgdXNlZCBieSBga2VuZG8tY29sb3JwaWNrZXJgIGFuZCBjYW4gYmUgZGlyZWN0bHkgYWRkZWQgdG8gdGhlIHBhZ2UuXG4gKi9cbmxldCBDb2xvckdyYWRpZW50Q29tcG9uZW50ID0gQ29sb3JHcmFkaWVudENvbXBvbmVudF8xID0gY2xhc3MgQ29sb3JHcmFkaWVudENvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoaG9zdCwgbmdab25lLCByZW5kZXJlciwgY2RyLCBsb2NhbGl6YXRpb25TZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuaG9zdCA9IGhvc3Q7XG4gICAgICAgIHRoaXMubmdab25lID0gbmdab25lO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuY2RyID0gY2RyO1xuICAgICAgICB0aGlzLmxvY2FsaXphdGlvblNlcnZpY2UgPSBsb2NhbGl6YXRpb25TZXJ2aWNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGhpZGRlblxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5ob3N0Q2xhc3NlcyA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmlkID0gYGstY29sb3JncmFkaWVudC0ke3NlcmlhbCsrfWA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWZpbmVzIHdoZXRoZXIgdGhlIGFscGhhIHNsaWRlciB3aWxsIGJlIGRpc3BsYXllZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub3BhY2l0eSA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIHRoZSBkaXNhYmxlZCBzdGF0ZSBvZiB0aGUgQ29sb3JHcmFkaWVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgdGhlIHJlYWQtb25seSBzdGF0ZSBvZiB0aGUgQ29sb3JHcmFkaWVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmVhZG9ubHkgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyB3aGV0aGVyIHRoZSBDb2xvckdyYWRpZW50IHNob3VsZCBkaXNwbGF5IGEgJ0NsZWFyIGNvbG9yJyBidXR0b24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNsZWFyQnV0dG9uID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXRlcm1pbmVzIHRoZSBkZWxheSB0aW1lIChpbiBtaWxsaXNlY29uZHMpIGJlZm9yZSB0aGUgdmFsdWUgaXMgY2hhbmdlZCBvbiBoYW5kbGUgZHJhZy4gQSB2YWx1ZSBvZiAwIGluZGljYXRlcyBubyBkZWxheS5cbiAgICAgICAgICpcbiAgICAgICAgICogQGRlZmF1bHQgMFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kZWxheSA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgdGhlIHVzZXIgc2VsZWN0cyBhIG5ldyBjb2xvci5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudmFsdWVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmJhY2tncm91bmRDb2xvciA9IERFRkFVTFRfQkFDS0dST1VORF9DT0xPUjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBoaWRkZW5cbiAgICAgICAgICpcbiAgICAgICAgICogUmVwcmVzZW50cyB0aGUgY3VycmVudGx5IHNlbGVjdGVkIGBodWVgLCBgc2F0dXJhdGlvbmAsIGB2YWx1ZWAsIGFuZCBgYWxwaGFgIHZhbHVlcy5cbiAgICAgICAgICogVGhlIHZhbHVlcyBhcmUgaW5pdGlhbGx5IHNldCBpbiBgbmdPbkluaXRgIG9yIGluIGBuZ09uQ2hhbmdlc2AgYW5kIGFyZVxuICAgICAgICAgKiB1cGRhdGVkIG9uIG1vdmluZyB0aGUgZHJhZyBoYW5kbGUgb3IgdGhlIHNsaWRlcnMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhzdmEgPSB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyB0aGUgb3V0cHV0IGZvcm1hdCBvZiB0aGUgQ29sb3JHcmFkaWVudENvbXBvbmVudC5cbiAgICAgICAgICogVGhlIGlucHV0IHZhbHVlIG1heSBiZSBpbiBhIGRpZmZlcmVudCBmb3JtYXQuIEhvd2V2ZXIsIGl0IHdpbGwgYmUgcGFyc2VkIGludG8gdGhlIG91dHB1dCBgZm9ybWF0YFxuICAgICAgICAgKiBhZnRlciB0aGUgY29tcG9uZW50IHByb2Nlc3NlcyBpdC5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlIHN1cHBvcnRlZCB2YWx1ZXMgYXJlOlxuICAgICAgICAgKiAqIChEZWZhdWx0KSBgcmdiYWBcbiAgICAgICAgICogKiBgaGV4YFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5mb3JtYXQgPSBERUZBVUxUX09VVFBVVF9GT1JNQVQ7XG4gICAgICAgIHRoaXMuX3RhYmluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgdGhpcy51cGRhdGVWYWx1ZXMgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICB0aGlzLm5vdGlmeU5nQ2hhbmdlZCA9ICgpID0+IHsgfTtcbiAgICAgICAgdGhpcy5ub3RpZnlOZ1RvdWNoZWQgPSAoKSA9PiB7IH07XG4gICAgICAgIHRoaXMuZHluYW1pY1JUTFN1YnNjcmlwdGlvbiA9IGxvY2FsaXphdGlvblNlcnZpY2UuY2hhbmdlcy5zdWJzY3JpYmUoKHsgcnRsIH0pID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gcnRsID8gJ3J0bCcgOiAnbHRyJztcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBnZXQgcmVhZG9ubHlBdHRyaWJ1dGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlYWRvbmx5O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgZ2V0IGRpc2FibGVkQ2xhc3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpc2FibGVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgZ2V0IGhvc3RUYWJpbmRleCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGFiaW5kZXg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBnZXQgZ3JhZGllbnRJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB0aGUgdmFsdWUgb2YgdGhlIGluaXRpYWxseSBzZWxlY3RlZCBjb2xvci5cbiAgICAgKi9cbiAgICBzZXQgdmFsdWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fdmFsdWUgPSBwYXJzZUNvbG9yJDEodmFsdWUsIHRoaXMuZm9ybWF0KTtcbiAgICB9XG4gICAgZ2V0IHZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB0aGUgW3RhYmluZGV4XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0dsb2JhbF9hdHRyaWJ1dGVzL3RhYmluZGV4KSBvZiB0aGUgY29tcG9uZW50LlxuICAgICAqL1xuICAgIHNldCB0YWJpbmRleCh2YWx1ZSkge1xuICAgICAgICBjb25zdCB0YWJpbmRleCA9IE51bWJlcih2YWx1ZSk7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZSA9IDA7XG4gICAgICAgIHRoaXMuX3RhYmluZGV4ID0gIWlzTmFOKHRhYmluZGV4KSA/IHRhYmluZGV4IDogZGVmYXVsdFZhbHVlO1xuICAgIH1cbiAgICBnZXQgdGFiaW5kZXgoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5kaXNhYmxlZCA/IHRoaXMuX3RhYmluZGV4IDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgd2hldGhlciB0aGUgQ29sb3JHcmFkaWVudCBvciBhbnkgb2YgaXRzIGNvbnRlbnQgaXMgZm9jdXNlZC5cbiAgICAgKi9cbiAgICBnZXQgaXNGb2N1c2VkKCkge1xuICAgICAgICBpZiAoIShpc0RvY3VtZW50QXZhaWxhYmxlKCkgJiYgaXNQcmVzZW50KHRoaXMuaG9zdCkpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuaG9zdC5uYXRpdmVFbGVtZW50ID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50IHx8IHRoaXMuaG9zdC5uYXRpdmVFbGVtZW50LmNvbnRhaW5zKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgZ2V0IGFscGhhU2xpZGVyVmFsdWUoKSB7XG4gICAgICAgIC8vIHNldHRpbmcgdGhlIGluaXRpYWwgdmFsdWUgdG8gdW5kZWZpbmVkIHRvIGZvcmNlIHRoZSBzbGlkZXIgdG8gcmVjYWxjdWxhdGUgdGhlIGhlaWdodCBvZiB0aGUgc2xpZGVyIHRyYWNrIG9uIHRoZSBuZXh0IGNkciBydW5cbiAgICAgICAgaWYgKCEoaXNQcmVzZW50KHRoaXMuaHN2YSkgJiYgaXNQcmVzZW50KHRoaXMuaHN2YS5hKSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5oc3ZhLmEgKiAxMDA7XG4gICAgfVxuICAgIGdldCBncmFkaWVudFJlY3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdyYWRpZW50V3JhcHBlci5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIH1cbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgICAgIHRoaXMudXBkYXRlVUkoKTtcbiAgICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlQ2hhbmdlcygpO1xuICAgIH1cbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzKSB7XG4gICAgICAgIGlmIChpc0NoYW5nZWQoJ3ZhbHVlJywgY2hhbmdlcykgJiYgIXRoaXMuaXNGb2N1c2VkKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVVJKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzQ2hhbmdlZCgnZGVsYXknLCBjaGFuZ2VzKSkge1xuICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZUNoYW5nZXMoKTtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaWJlQ2hhbmdlcygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLmxpc3RlbmVycy5mb3JFYWNoKHJlbW92ZUxpc3RlbmVyID0+IHJlbW92ZUxpc3RlbmVyKCkpO1xuICAgICAgICBpZiAodGhpcy5keW5hbWljUlRMU3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmR5bmFtaWNSVExTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlQ2hhbmdlcygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb2N1c2VzIHRoZSBjb21wb25lbnQuXG4gICAgICovXG4gICAgZm9jdXMoKSB7XG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ob3N0Lm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLmhhbmRsZVZhbHVlQ2hhbmdlKHVuZGVmaW5lZCk7XG4gICAgICAgIHRoaXMudXBkYXRlVUkoKTtcbiAgICAgICAgdGhpcy5ob3N0Lm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGhhbmRsZURyYWdQcmVzcyhhcmdzKSB7XG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkIHx8IHRoaXMucmVhZG9ubHkgfHwgIWlzUHJlc2VudChhcmdzLm9yaWdpbmFsRXZlbnQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgICBhcmdzLm9yaWdpbmFsRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIG9uSGFuZGxlRHJhZyhhcmdzKSB7XG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkIHx8IHRoaXMucmVhZG9ubHkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuZ3JhZGllbnRXcmFwcGVyLm5hdGl2ZUVsZW1lbnQsICdrLWRyYWdnaW5nJyk7XG4gICAgICAgIHRoaXMuY2hhbmdlUG9zaXRpb24oYXJncyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBvbkhhbmRsZVJlbGVhc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkIHx8IHRoaXMucmVhZG9ubHkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUNsYXNzKHRoaXMuZ3JhZGllbnRXcmFwcGVyLm5hdGl2ZUVsZW1lbnQsICdrLWRyYWdnaW5nJyk7XG4gICAgICAgIHRoaXMuaGFuZGxlVmFsdWVDaGFuZ2UoZ2V0Q29sb3JGcm9tSFNWKHRoaXMuaHN2YSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgb25LZXlib2FyZEFjdGlvbihhcmdzKSB7XG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkIHx8IHRoaXMucmVhZG9ubHkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXJncy5rZXkgJiYgYXJncy5rZXkuaW5kZXhPZignQXJyb3cnKSAhPT0gLTEpIHtcbiAgICAgICAgICAgIGFyZ3MucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGNvbnN0IGRyYWdIYW5kbGVFbGVtZW50ID0gdGhpcy5ncmFkaWVudERyYWdIYW5kbGUubmF0aXZlRWxlbWVudDtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5ncmFkaWVudFdyYXBwZXIubmF0aXZlRWxlbWVudCwgJ2stZHJhZ2dpbmcnKTtcbiAgICAgICAgICAgIGxldCBrZXlib2FyZE1vdmVYID0gMDtcbiAgICAgICAgICAgIGxldCBrZXlib2FyZE1vdmVZID0gMDtcbiAgICAgICAgICAgIHN3aXRjaCAoYXJncy5rZXkpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdBcnJvd1JpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAga2V5Ym9hcmRNb3ZlWCA9IERSQUdIQU5ETEVfTU9WRV9TUEVFRDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnQXJyb3dMZWZ0JzpcbiAgICAgICAgICAgICAgICAgICAga2V5Ym9hcmRNb3ZlWCA9IC1EUkFHSEFORExFX01PVkVfU1BFRUQ7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0Fycm93VXAnOlxuICAgICAgICAgICAgICAgICAgICBrZXlib2FyZE1vdmVZID0gLURSQUdIQU5ETEVfTU9WRV9TUEVFRDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnQXJyb3dEb3duJzpcbiAgICAgICAgICAgICAgICAgICAga2V5Ym9hcmRNb3ZlWSA9IERSQUdIQU5ETEVfTU9WRV9TUEVFRDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDogYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBuZXdZID0gcGFyc2VJbnQoZHJhZ0hhbmRsZUVsZW1lbnQuc3R5bGUudG9wLCAxMCkgKyBrZXlib2FyZE1vdmVZO1xuICAgICAgICAgICAgY29uc3QgbmV3WCA9IHBhcnNlSW50KGRyYWdIYW5kbGVFbGVtZW50LnN0eWxlLmxlZnQsIDEwKSArIGtleWJvYXJkTW92ZVg7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKGRyYWdIYW5kbGVFbGVtZW50LCAndG9wJywgYCR7bmV3WX1weGApO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShkcmFnSGFuZGxlRWxlbWVudCwgJ2xlZnQnLCBgJHtuZXdYfXB4YCk7XG4gICAgICAgICAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4gdGhpcy5tb3ZlRHJhZ0hhbmRsZShuZXdYLCBuZXdZKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGNoYW5nZVBvc2l0aW9uKHBvc2l0aW9uKSB7XG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkIHx8IHRoaXMucmVhZG9ubHkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmdyYWRpZW50RHJhZ0hhbmRsZS5uYXRpdmVFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgIGNvbnN0IG5ld1ggPSBwb3NpdGlvbi5jbGllbnRYIC0gdGhpcy5ncmFkaWVudFJlY3QubGVmdDtcbiAgICAgICAgY29uc3QgbmV3WSA9IHBvc2l0aW9uLmNsaWVudFkgLSB0aGlzLmdyYWRpZW50UmVjdC50b3A7XG4gICAgICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB0aGlzLm1vdmVEcmFnSGFuZGxlKG5ld1gsIG5ld1kpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGhhbmRsZUh1ZVNsaWRlckNoYW5nZShodWUpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVWYWx1ZUNoYW5nZShnZXRDb2xvckZyb21IU1YodGhpcy5oc3ZhKSk7XG4gICAgICAgIHRoaXMuYmFja2dyb3VuZENvbG9yID0gZ2V0Q29sb3JGcm9tSHVlKGh1ZSk7XG4gICAgICAgIHRoaXMuc2V0QWxwaGFTbGlkZXJCYWNrZ3JvdW5kKHRoaXMuYmFja2dyb3VuZENvbG9yKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGhhbmRsZUFscGhhU2xpZGVyQ2hhbmdlKGFscGhhKSB7XG4gICAgICAgIHRoaXMuaHN2YS5hID0gYWxwaGEgLyAxMDA7XG4gICAgICAgIHRoaXMuaGFuZGxlVmFsdWVDaGFuZ2UoZ2V0Q29sb3JGcm9tSFNWKHRoaXMuaHN2YSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgaGFuZGxlSW5wdXRzVmFsdWVDaGFuZ2UoY29sb3IpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkID0gcGFyc2VDb2xvciQxKGNvbG9yLCB0aGlzLmZvcm1hdCk7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlICE9PSBwYXJzZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlVmFsdWVDaGFuZ2UocGFyc2VkKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVUkoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgd3JpdGVWYWx1ZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIGlmIChpc1ByZXNlbnQodGhpcy5ncmFkaWVudFdyYXBwZXIpKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVVJKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHJlZ2lzdGVyT25DaGFuZ2UoZm4pIHtcbiAgICAgICAgdGhpcy5ub3RpZnlOZ0NoYW5nZWQgPSBmbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHJlZ2lzdGVyT25Ub3VjaGVkKGZuKSB7XG4gICAgICAgIHRoaXMubm90aWZ5TmdUb3VjaGVkID0gZm47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzZXREaXNhYmxlZFN0YXRlKGlzRGlzYWJsZWQpIHtcbiAgICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBpc0Rpc2FibGVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgZ2V0IGNvbG9yR3JhZGllbnRIYW5kbGVUaXRsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxpemF0aW9uU2VydmljZS5nZXQoJ2NvbG9yR3JhZGllbnRIYW5kbGUnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGdldCBjb2xvckdyYWRpZW50SGFuZGxlQXJpYUxhYmVsKCkge1xuICAgICAgICBjb25zdCBwYXJzZWQgPSBwYXJzZUNvbG9yJDEodGhpcy52YWx1ZSwgdGhpcy5mb3JtYXQpO1xuICAgICAgICByZXR1cm4gYCR7dGhpcy52YWx1ZSA/IHBhcnNlZCA6IHRoaXMubG9jYWxpemF0aW9uU2VydmljZS5nZXQoJ2NvbG9yR3JhZGllbnRIYW5kbGUnKX1gO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgZ2V0IGh1ZVNsaWRlclRpdGxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2NhbGl6YXRpb25TZXJ2aWNlLmdldCgnaHVlU2xpZGVySGFuZGxlJyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBnZXQgb3BhY2l0eVNsaWRlclRpdGxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2NhbGl6YXRpb25TZXJ2aWNlLmdldCgnb3BhY2l0eVNsaWRlckhhbmRsZScpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgZ2V0IGNsZWFyQnV0dG9uVGl0bGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsaXphdGlvblNlcnZpY2UuZ2V0KCdjbGVhckJ1dHRvbicpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICogVXNlZCBieSB0aGUgVGV4dEJveENvbnRhaW5lciB0byBkZXRlcm1pbmUgaWYgdGhlIGNvbXBvbmVudCBpcyBlbXB0eS5cbiAgICAgKi9cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIG1vdmVEcmFnSGFuZGxlKHBvc2l0aW9uWCwgcG9zaXRpb25ZKSB7XG4gICAgICAgIGNvbnN0IHRvcCA9IGZpdEludG9Cb3VuZHMocG9zaXRpb25ZLCAwLCB0aGlzLmdyYWRpZW50UmVjdC5oZWlnaHQpO1xuICAgICAgICBjb25zdCBsZWZ0ID0gZml0SW50b0JvdW5kcyhwb3NpdGlvblgsIDAsIHRoaXMuZ3JhZGllbnRSZWN0LndpZHRoKTtcbiAgICAgICAgdGhpcy5zZXREcmFnSGFuZGxlRWxlbWVudFBvc2l0aW9uKHRvcCwgbGVmdCk7XG4gICAgICAgIHRoaXMuaHN2YS5zID0gbGVmdCAvIHRoaXMuZ3JhZGllbnRSZWN0LndpZHRoO1xuICAgICAgICB0aGlzLmhzdmEudiA9IDEgLSB0b3AgLyB0aGlzLmdyYWRpZW50UmVjdC5oZWlnaHQ7XG4gICAgICAgIHRoaXMudXBkYXRlVmFsdWVzLm5leHQoZ2V0Q29sb3JGcm9tSFNWKHRoaXMuaHN2YSkpO1xuICAgICAgICB0aGlzLnNldEFscGhhU2xpZGVyQmFja2dyb3VuZChnZXRDb2xvckZyb21IU1YoT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5oc3ZhLCB7IGE6IDEgfSkpKTtcbiAgICB9XG4gICAgdXBkYXRlVUkoKSB7XG4gICAgICAgIGlmICghaXNEb2N1bWVudEF2YWlsYWJsZSgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oc3ZhID0gdGhpcy52YWx1ZSA/IGdldEhTVih0aGlzLnZhbHVlKSA6IHsgaDogMCwgczogMCwgdjogMSwgYTogMSB9O1xuICAgICAgICBjb25zdCB0b3AgPSAoMSAtIHRoaXMuaHN2YS52KSAqIHRoaXMuZ3JhZGllbnRSZWN0LmhlaWdodDtcbiAgICAgICAgY29uc3QgbGVmdCA9IHRoaXMuaHN2YS5zICogdGhpcy5ncmFkaWVudFJlY3Qud2lkdGg7XG4gICAgICAgIHRoaXMuc2V0RHJhZ0hhbmRsZUVsZW1lbnRQb3NpdGlvbih0b3AsIGxlZnQpO1xuICAgICAgICB0aGlzLmJhY2tncm91bmRDb2xvciA9IGdldENvbG9yRnJvbUh1ZSh0aGlzLmhzdmEuaCk7XG4gICAgICAgIHRoaXMuc2V0QWxwaGFTbGlkZXJCYWNrZ3JvdW5kKHRoaXMuYmFja2dyb3VuZENvbG9yKTtcbiAgICAgICAgdGhpcy5zZXRIb3N0RWxlbWVudEFyaWFMYWJlbCgpO1xuICAgIH1cbiAgICBoYW5kbGVWYWx1ZUNoYW5nZShjb2xvcikge1xuICAgICAgICBpZiAodGhpcy52YWx1ZSA9PT0gY29sb3IpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZhbHVlID0gY29sb3I7XG4gICAgICAgIHRoaXMudmFsdWVDaGFuZ2UuZW1pdChjb2xvcik7XG4gICAgICAgIHRoaXMubm90aWZ5TmdDaGFuZ2VkKGNvbG9yKTtcbiAgICAgICAgdGhpcy5zZXRIb3N0RWxlbWVudEFyaWFMYWJlbCgpO1xuICAgIH1cbiAgICBzZXREcmFnSGFuZGxlRWxlbWVudFBvc2l0aW9uKHRvcCwgbGVmdCkge1xuICAgICAgICBjb25zdCBkcmFnSGFuZGxlID0gdGhpcy5ncmFkaWVudERyYWdIYW5kbGUubmF0aXZlRWxlbWVudDtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShkcmFnSGFuZGxlLCAndG9wJywgYCR7dG9wfXB4YCk7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoZHJhZ0hhbmRsZSwgJ2xlZnQnLCBgJHtsZWZ0fXB4YCk7XG4gICAgfVxuICAgIHNldEFscGhhU2xpZGVyQmFja2dyb3VuZChiYWNrZ3JvdW5kQ29sb3IpIHtcbiAgICAgICAgaWYgKCFpc1ByZXNlbnQodGhpcy5hbHBoYVNsaWRlcikpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzbGlkZXJUcmFjayA9IHRoaXMuYWxwaGFTbGlkZXIudHJhY2submF0aXZlRWxlbWVudDtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShzbGlkZXJUcmFjaywgJ2JhY2tncm91bmQnLCBgbGluZWFyLWdyYWRpZW50KHRvIHRvcCwgdHJhbnNwYXJlbnQsICR7YmFja2dyb3VuZENvbG9yfSlgKTtcbiAgICB9XG4gICAgc2V0SG9zdEVsZW1lbnRBcmlhTGFiZWwoKSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlQ29sb3IkMSh0aGlzLnZhbHVlLCB0aGlzLmZvcm1hdCk7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0QXR0cmlidXRlKHRoaXMuaG9zdC5uYXRpdmVFbGVtZW50LCAnYXJpYS1sYWJlbCcsIGAke3RoaXMudmFsdWUgPyBwYXJzZWQgOiB0aGlzLmxvY2FsaXphdGlvblNlcnZpY2UuZ2V0KCdjb2xvckdyYWRpZW50Tm9Db2xvcicpfWApO1xuICAgIH1cbiAgICBhZGRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZm9jdXNPdXRMaXN0ZW5lciA9IHRoaXMucmVuZGVyZXIubGlzdGVuKHRoaXMuaG9zdC5uYXRpdmVFbGVtZW50LCAnZm9jdXNvdXQnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWNvbnRhaW5zRm9jdXModGhpcy5ob3N0Lm5hdGl2ZUVsZW1lbnQsIGV2ZW50LnJlbGF0ZWRUYXJnZXQpICYmIGlzVW50b3VjaGVkKHRoaXMuaG9zdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHRoaXMubm90aWZ5TmdUb3VjaGVkKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3Qga2V5ZG93bkxpc3RlbmVyID0gdGhpcy5yZW5kZXJlci5saXN0ZW4odGhpcy5ncmFkaWVudERyYWdIYW5kbGUubmF0aXZlRWxlbWVudCwgJ2tleWRvd24nLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uS2V5Ym9hcmRBY3Rpb24oZXZlbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBrZXl1cExpc3RlbmVyID0gdGhpcy5yZW5kZXJlci5saXN0ZW4odGhpcy5ncmFkaWVudERyYWdIYW5kbGUubmF0aXZlRWxlbWVudCwgJ2tleXVwJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3ModGhpcy5ncmFkaWVudFdyYXBwZXIubmF0aXZlRWxlbWVudCwgJ2stZHJhZ2dpbmcnKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucmVhZG9ubHkgJiYgIXRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHRoaXMuaGFuZGxlVmFsdWVDaGFuZ2UoZ2V0Q29sb3JGcm9tSFNWKHRoaXMuaHN2YSkpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGRyYWdIYW5kbGVGb2N1c0luTGlzdGVuZXIgPSB0aGlzLnJlbmRlcmVyLmxpc3Rlbih0aGlzLmdyYWRpZW50RHJhZ0hhbmRsZS5uYXRpdmVFbGVtZW50LCAnZm9jdXNpbicsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuZ3JhZGllbnREcmFnSGFuZGxlLm5hdGl2ZUVsZW1lbnQsICdrLXN0YXRlLWZvY3VzJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGRyYWdIYW5kbGVGb2N1c091dExpc3RlbmVyID0gdGhpcy5yZW5kZXJlci5saXN0ZW4odGhpcy5ncmFkaWVudERyYWdIYW5kbGUubmF0aXZlRWxlbWVudCwgJ2ZvY3Vzb3V0JywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3ModGhpcy5ncmFkaWVudERyYWdIYW5kbGUubmF0aXZlRWxlbWVudCwgJ2stc3RhdGUtZm9jdXMnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnMucHVzaChmb2N1c091dExpc3RlbmVyLCBrZXlkb3duTGlzdGVuZXIsIGtleXVwTGlzdGVuZXIsIGRyYWdIYW5kbGVGb2N1c0luTGlzdGVuZXIsIGRyYWdIYW5kbGVGb2N1c091dExpc3RlbmVyKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN1YnNjcmliZUNoYW5nZXMoKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlUmVxdWVzdHNTdWJzY3JpcHRpb24gPSB0aGlzLnVwZGF0ZVZhbHVlcy5waXBlKHRocm90dGxlVGltZSh0aGlzLmRlbGF5KSkuc3Vic2NyaWJlKHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlVmFsdWVDaGFuZ2UodmFsdWUpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgdW5zdWJzY3JpYmVDaGFuZ2VzKCkge1xuICAgICAgICBpZiAodGhpcy5jaGFuZ2VSZXF1ZXN0c1N1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VSZXF1ZXN0c1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgfVxufTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLXdpZGdldCcpLFxuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLWZsYXRjb2xvcnBpY2tlcicpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgQ29sb3JHcmFkaWVudENvbXBvbmVudC5wcm90b3R5cGUsIFwiaG9zdENsYXNzZXNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdhdHRyLmFyaWEtcmVhZG9ubHknKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgQ29sb3JHcmFkaWVudENvbXBvbmVudC5wcm90b3R5cGUsIFwicmVhZG9ubHlBdHRyaWJ1dGVcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay1zdGF0ZS1kaXNhYmxlZCcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBDb2xvckdyYWRpZW50Q29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXNhYmxlZENsYXNzXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2F0dHIudGFiaW5kZXgnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBDb2xvckdyYWRpZW50Q29tcG9uZW50LnByb3RvdHlwZSwgXCJob3N0VGFiaW5kZXhcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnYXR0ci5pZCcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIENvbG9yR3JhZGllbnRDb21wb25lbnQucHJvdG90eXBlLCBcImdyYWRpZW50SWRcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBDb2xvckdyYWRpZW50Q29tcG9uZW50LnByb3RvdHlwZSwgXCJpZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2F0dHIuZGlyJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIENvbG9yR3JhZGllbnRDb21wb25lbnQucHJvdG90eXBlLCBcImRpcmVjdGlvblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIENvbG9yR3JhZGllbnRDb21wb25lbnQucHJvdG90eXBlLCBcIm9wYWNpdHlcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBDb2xvckdyYWRpZW50Q29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXNhYmxlZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIENvbG9yR3JhZGllbnRDb21wb25lbnQucHJvdG90eXBlLCBcInJlYWRvbmx5XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgQ29sb3JHcmFkaWVudENvbXBvbmVudC5wcm90b3R5cGUsIFwiY2xlYXJCdXR0b25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlcilcbl0sIENvbG9yR3JhZGllbnRDb21wb25lbnQucHJvdG90eXBlLCBcImRlbGF5XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbU3RyaW5nXSlcbl0sIENvbG9yR3JhZGllbnRDb21wb25lbnQucHJvdG90eXBlLCBcInZhbHVlXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW051bWJlcl0pXG5dLCBDb2xvckdyYWRpZW50Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ0YWJpbmRleFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBDb2xvckdyYWRpZW50Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ2YWx1ZUNoYW5nZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgQ29sb3JHcmFkaWVudENvbXBvbmVudC5wcm90b3R5cGUsIFwiZm9ybWF0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBWaWV3Q2hpbGQoJ2dyYWRpZW50RHJhZ0hhbmRsZScsIHsgcmVhZDogRWxlbWVudFJlZiwgc3RhdGljOiBmYWxzZSB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRWxlbWVudFJlZilcbl0sIENvbG9yR3JhZGllbnRDb21wb25lbnQucHJvdG90eXBlLCBcImdyYWRpZW50RHJhZ0hhbmRsZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgVmlld0NoaWxkKCdpbnB1dHMnLCB7IHN0YXRpYzogZmFsc2UgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIENvbG9ySW5wdXRDb21wb25lbnQpXG5dLCBDb2xvckdyYWRpZW50Q29tcG9uZW50LnByb3RvdHlwZSwgXCJpbnB1dHNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIFZpZXdDaGlsZCgnYWxwaGFTbGlkZXInLCB7IHN0YXRpYzogZmFsc2UgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFNsaWRlckNvbXBvbmVudClcbl0sIENvbG9yR3JhZGllbnRDb21wb25lbnQucHJvdG90eXBlLCBcImFscGhhU2xpZGVyXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBWaWV3Q2hpbGQoJ2dyYWRpZW50V3JhcHBlcicsIHsgc3RhdGljOiBmYWxzZSB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRWxlbWVudFJlZilcbl0sIENvbG9yR3JhZGllbnRDb21wb25lbnQucHJvdG90eXBlLCBcImdyYWRpZW50V3JhcHBlclwiLCB2b2lkIDApO1xuQ29sb3JHcmFkaWVudENvbXBvbmVudCA9IENvbG9yR3JhZGllbnRDb21wb25lbnRfMSA9IF9fZGVjb3JhdGUoW1xuICAgIENvbXBvbmVudCh7XG4gICAgICAgIHNlbGVjdG9yOiAna2VuZG8tY29sb3JncmFkaWVudCcsXG4gICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG11bHRpOiB0cnVlLFxuICAgICAgICAgICAgICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxuICAgICAgICAgICAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IENvbG9yR3JhZGllbnRDb21wb25lbnRfMSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZTogS2VuZG9JbnB1dCxcbiAgICAgICAgICAgICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBDb2xvckdyYWRpZW50Q29tcG9uZW50XzEpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgQ29sb3JHcmFkaWVudExvY2FsaXphdGlvblNlcnZpY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZTogTG9jYWxpemF0aW9uU2VydmljZSxcbiAgICAgICAgICAgICAgICB1c2VFeGlzdGluZzogQ29sb3JHcmFkaWVudExvY2FsaXphdGlvblNlcnZpY2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZTogTDEwTl9QUkVGSVgsXG4gICAgICAgICAgICAgICAgdXNlVmFsdWU6ICdrZW5kby5jb2xvcmdyYWRpZW50J1xuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICB0ZW1wbGF0ZTogYFxuICAgICAgICA8bmctY29udGFpbmVyIGtlbmRvQ29sb3JHcmFkaWVudExvY2FsaXplZE1lc3NhZ2VzXG4gICAgICAgICAgICBpMThuLWNvbG9yR3JhZGllbnROb0NvbG9yPVwia2VuZG8uY29sb3JncmFkaWVudC5jb2xvckdyYWRpZW50Tm9Db2xvcnxUaGUgYXJpYS1sYWJlbCBhcHBsaWVkIHRvIHRoZSBDb2xvckdyYWRpZW50IGNvbXBvbmVudCB3aGVuIHRoZSB2YWx1ZSBpcyBlbXB0eS5cIlxuICAgICAgICAgICAgY29sb3JHcmFkaWVudE5vQ29sb3I9XCJDb2xvcmdyYWRpZW50IG5vIGNvbG9yIGNob3NlblwiXG4gICAgICAgICAgICBpMThuLWNvbG9yR3JhZGllbnRIYW5kbGU9XCJrZW5kby5jb2xvcmdyYWRpZW50LmNvbG9yR3JhZGllbnRIYW5kbGV8VGhlIHRpdGxlIGZvciB0aGUgZ3JhZGllbnQgY29sb3IgZHJhZyBoYW5kbGUgY2hvb3Nlci5cIlxuICAgICAgICAgICAgY29sb3JHcmFkaWVudEhhbmRsZT1cIkNob29zZSBjb2xvclwiXG4gICAgICAgICAgICBpMThuLWNsZWFyQnV0dG9uPVwia2VuZG8uY29sb3JncmFkaWVudC5jbGVhckJ1dHRvbnxUaGUgdGl0bGUgZm9yIHRoZSBjbGVhciBidXR0b24uXCJcbiAgICAgICAgICAgIGNsZWFyQnV0dG9uPVwiQ2xlYXIgdmFsdWVcIlxuICAgICAgICAgICAgaTE4bi1odWVTbGlkZXJIYW5kbGU9XCJrZW5kby5jb2xvcmdyYWRpZW50Lmh1ZVNsaWRlckhhbmRsZXxUaGUgdGl0bGUgZm9yIHRoZSBodWUgc2xpZGVyIGhhbmRsZS5cIlxuICAgICAgICAgICAgaHVlU2xpZGVySGFuZGxlPVwiU2V0IGh1ZVwiXG4gICAgICAgICAgICBpMThuLW9wYWNpdHlTbGlkZXJIYW5kbGU9XCJrZW5kby5jb2xvcmdyYWRpZW50Lm9wYWNpdHlTbGlkZXJIYW5kbGV8VGhlIHRpdGxlIGZvciB0aGUgb3BhY2l0eSBzbGlkZXIgaGFuZGxlLlwiXG4gICAgICAgICAgICBvcGFjaXR5U2xpZGVySGFuZGxlPVwiU2V0IG9wYWNpdHlcIlxuICAgICAgICAgICAgaTE4bi1oZXhJbnB1dFBsYWNlaG9sZGVyPVwia2VuZG8uY29sb3JncmFkaWVudC5oZXhJbnB1dFBsYWNlaG9sZGVyfFRoZSBwbGFjZWhvbGRlciBmb3IgdGhlIEhFWCBjb2xvciBpbnB1dC5cIlxuICAgICAgICAgICAgaGV4SW5wdXRQbGFjZWhvbGRlcj1cIkhFWCBDb2xvclwiXG4gICAgICAgICAgICBpMThuLXJlZElucHV0UGxhY2Vob2xkZXI9XCJrZW5kby5jb2xvcmdyYWRpZW50LnJlZElucHV0UGxhY2Vob2xkZXJ8VGhlIHBsYWNlaG9sZGVyIGZvciB0aGUgcmVkIGNvbG9yIGlucHV0LlwiXG4gICAgICAgICAgICByZWRJbnB1dFBsYWNlaG9sZGVyPVwiUmVkXCJcbiAgICAgICAgICAgIGkxOG4tZ3JlZW5JbnB1dFBsYWNlaG9sZGVyPVwia2VuZG8uY29sb3JncmFkaWVudC5ncmVlbklucHV0UGxhY2Vob2xkZXJ8VGhlIHBsYWNlaG9sZGVyIGZvciB0aGUgZ3JlZW4gY29sb3IgaW5wdXQuXCJcbiAgICAgICAgICAgIGdyZWVuSW5wdXRQbGFjZWhvbGRlcj1cIkdyZWVuXCJcbiAgICAgICAgICAgIGkxOG4tYmx1ZUlucHV0UGxhY2Vob2xkZXI9XCJrZW5kby5jb2xvcmdyYWRpZW50LmJsdWVJbnB1dFBsYWNlaG9sZGVyfFRoZSBwbGFjZWhvbGRlciBmb3IgdGhlIGJsdWUgY29sb3IgaW5wdXQuXCJcbiAgICAgICAgICAgIGJsdWVJbnB1dFBsYWNlaG9sZGVyPVwiQmx1ZVwiXG4gICAgICAgICAgICBpMThuLWFscGhhSW5wdXRQbGFjZWhvbGRlcj1cImtlbmRvLmNvbG9yZ3JhZGllbnQuYWxwaGFJbnB1dFBsYWNlaG9sZGVyfFRoZSBwbGFjZWhvbGRlciBmb3IgdGhlIGFscGhhIGlucHV0LlwiXG4gICAgICAgICAgICBhbHBoYUlucHV0UGxhY2Vob2xkZXI9XCJBbHBoYVwiPlxuICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImstaGJveCBrLWhzdi13cmFwXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiay1oc3YtcmVjdGFuZ2xlXCIgW3N0eWxlLmJhY2tncm91bmQtY29sb3JdPVwiYmFja2dyb3VuZENvbG9yXCI+XG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAjZ3JhZGllbnRXcmFwcGVyXG4gICAgICAgICAgICAgICAgICAgIGtlbmRvRHJhZ2dhYmxlXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiay1oc3YtZ3JhZGllbnRcIlxuICAgICAgICAgICAgICAgICAgICAoY2xpY2spPVwiY2hhbmdlUG9zaXRpb24oJGV2ZW50KVwiXG4gICAgICAgICAgICAgICAgICAgIChrZW5kb1ByZXNzKT1cImhhbmRsZURyYWdQcmVzcygkZXZlbnQpXCJcbiAgICAgICAgICAgICAgICAgICAgKGtlbmRvRHJhZyk9XCJvbkhhbmRsZURyYWcoJGV2ZW50KVwiXG4gICAgICAgICAgICAgICAgICAgIChrZW5kb1JlbGVhc2UpPVwib25IYW5kbGVSZWxlYXNlKClcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgI2dyYWRpZW50RHJhZ0hhbmRsZVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJrLWRyYWdoYW5kbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgdGFiaW5kZXg9XCIwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIFthdHRyLnRpdGxlXT1cImNvbG9yR3JhZGllbnRIYW5kbGVUaXRsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBbYXR0ci5hcmlhLWxhYmVsXT1cImNvbG9yR3JhZGllbnRIYW5kbGVBcmlhTGFiZWxcIlxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiay1oYm94IGstc2xpZGVycy13cmFwIHt7IGNsZWFyQnV0dG9uID8gJ2stc2xpZGVycy13cmFwLWNsZWFyYWJsZScgOiAnJyB9fVwiPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiay1jbGVhci1jb2xvciBrLWJ1dHRvbiBrLWJhcmUgay1idXR0b24taWNvblwiXG4gICAgICAgICAgICAgICAgICAgICpuZ0lmPVwiY2xlYXJCdXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAoY2xpY2spPVwicmVzZXQoKVwiXG4gICAgICAgICAgICAgICAgICAgIChrZXlkb3duLmVudGVyKT1cInJlc2V0KClcIlxuICAgICAgICAgICAgICAgICAgICAoa2V5ZG93bi5zcGFjZSk9XCJyZXNldCgpXCJcbiAgICAgICAgICAgICAgICAgICAgW2F0dHIuYXJpYS1sYWJlbF09XCJjbGVhckJ1dHRvblRpdGxlXCJcbiAgICAgICAgICAgICAgICAgICAgW2F0dHIudGl0bGVdPVwiY2xlYXJCdXR0b25UaXRsZVwiXG4gICAgICAgICAgICAgICAgICAgIHRhYmluZGV4PVwiMFwiPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktcmVzZXQtY29sb3JcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgIDxrZW5kby1zbGlkZXJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJrLWh1ZS1zbGlkZXJcIlxuICAgICAgICAgICAgICAgICAgICBbZHJhZ0hhbmRsZVRpdGxlXT1cImh1ZVNsaWRlclRpdGxlXCJcbiAgICAgICAgICAgICAgICAgICAgW2Rpc2FibGVkXT1cImRpc2FibGVkXCJcbiAgICAgICAgICAgICAgICAgICAgW3JlYWRvbmx5XT1cInJlYWRvbmx5XCJcbiAgICAgICAgICAgICAgICAgICAgW3Nob3dCdXR0b25zXT1cImZhbHNlXCJcbiAgICAgICAgICAgICAgICAgICAgW3RpY2tQbGFjZW1lbnRdPVwiJ25vbmUnXCJcbiAgICAgICAgICAgICAgICAgICAgW3ZlcnRpY2FsXT1cInRydWVcIlxuICAgICAgICAgICAgICAgICAgICBbbWluXT1cIjBcIlxuICAgICAgICAgICAgICAgICAgICBbbWF4XT1cIjM2MFwiXG4gICAgICAgICAgICAgICAgICAgIFtzbWFsbFN0ZXBdPVwiNVwiXG4gICAgICAgICAgICAgICAgICAgIFtsYXJnZVN0ZXBdPVwiMTBcIlxuICAgICAgICAgICAgICAgICAgICBbKHZhbHVlKV09XCJoc3ZhLmhcIlxuICAgICAgICAgICAgICAgICAgICAodmFsdWVDaGFuZ2UpPVwiaGFuZGxlSHVlU2xpZGVyQ2hhbmdlKCRldmVudClcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8L2tlbmRvLXNsaWRlcj5cbiAgICAgICAgICAgICAgICA8a2VuZG8tc2xpZGVyXG4gICAgICAgICAgICAgICAgICAgICpuZ0lmPVwib3BhY2l0eSAmJiBmb3JtYXQgPT09ICdyZ2JhJ1wiXG4gICAgICAgICAgICAgICAgICAgICNhbHBoYVNsaWRlclxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImstYWxwaGEtc2xpZGVyXCJcbiAgICAgICAgICAgICAgICAgICAgW2RyYWdIYW5kbGVUaXRsZV09XCJvcGFjaXR5U2xpZGVyVGl0bGVcIlxuICAgICAgICAgICAgICAgICAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWRcIlxuICAgICAgICAgICAgICAgICAgICBbcmVhZG9ubHldPVwicmVhZG9ubHlcIlxuICAgICAgICAgICAgICAgICAgICBbc2hvd0J1dHRvbnNdPVwiZmFsc2VcIlxuICAgICAgICAgICAgICAgICAgICBbdGlja1BsYWNlbWVudF09XCInbm9uZSdcIlxuICAgICAgICAgICAgICAgICAgICBbdmVydGljYWxdPVwidHJ1ZVwiXG4gICAgICAgICAgICAgICAgICAgIFttaW5dPVwiMFwiXG4gICAgICAgICAgICAgICAgICAgIFttYXhdPVwiMTAwXCJcbiAgICAgICAgICAgICAgICAgICAgW3NtYWxsU3RlcF09XCIxXCJcbiAgICAgICAgICAgICAgICAgICAgW2xhcmdlU3RlcF09XCIxMFwiXG4gICAgICAgICAgICAgICAgICAgIFt2YWx1ZV09XCJhbHBoYVNsaWRlclZhbHVlXCJcbiAgICAgICAgICAgICAgICAgICAgKHZhbHVlQ2hhbmdlKT1cImhhbmRsZUFscGhhU2xpZGVyQ2hhbmdlKCRldmVudClcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8L2tlbmRvLXNsaWRlcj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGtlbmRvLWNvbG9yaW5wdXQgICNpbnB1dHNcbiAgICAgICAgICAgIFtvcGFjaXR5XT1cIm9wYWNpdHlcIlxuICAgICAgICAgICAgW3ZhbHVlXT1cInZhbHVlXCJcbiAgICAgICAgICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiXG4gICAgICAgICAgICBbcmVhZG9ubHldPVwicmVhZG9ubHlcIlxuICAgICAgICAgICAgKHZhbHVlQ2hhbmdlKT1cImhhbmRsZUlucHV0c1ZhbHVlQ2hhbmdlKCRldmVudClcIlxuICAgICAgICA+XG4gICAgICAgIDwva2VuZG8tY29sb3JpbnB1dD5cbmBcbiAgICB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0VsZW1lbnRSZWYsXG4gICAgICAgIE5nWm9uZSxcbiAgICAgICAgUmVuZGVyZXIyLFxuICAgICAgICBDaGFuZ2VEZXRlY3RvclJlZixcbiAgICAgICAgTG9jYWxpemF0aW9uU2VydmljZV0pXG5dLCBDb2xvckdyYWRpZW50Q29tcG9uZW50KTtcblxudmFyIENvbG9yUGlja2VyQ29tcG9uZW50XzE7XG5jb25zdCBERUZBVUxUX1BSRVNFVCA9ICdvZmZpY2UnO1xuY29uc3QgREVGQVVMVF9BQ0NFU1NJQkxFX1BSRVNFVCA9ICdhY2Nlc3NpYmxlJztcbmxldCBzZXJpYWwkMSA9IDA7XG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIFtLZW5kbyBVSSBDb2xvclBpY2tlciBjb21wb25lbnQgZm9yIEFuZ3VsYXJdKHslIHNsdWcgb3ZlcnZpZXdfY29sb3JwaWNrZXIgJX0pLlxuICogRGVzaWduZWQgdG8gcmVwbGFjZSB0aGUgYDxpbnB1dCB0eXBlPVwiY29sb3JcIj5gIEhUTUw1IHRhZyB3aGljaCBpcyBub3Qgd2lkZWx5IHN1cHBvcnRlZCBpbiBicm93c2Vycy5cbiAqL1xubGV0IENvbG9yUGlja2VyQ29tcG9uZW50ID0gQ29sb3JQaWNrZXJDb21wb25lbnRfMSA9IGNsYXNzIENvbG9yUGlja2VyQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlcnZpY2UsIGNkciwgbG9jYWxpemF0aW9uU2VydmljZSwgbmdab25lKSB7XG4gICAgICAgIHRoaXMucG9wdXBTZXJ2aWNlID0gcG9wdXBTZXJ2aWNlO1xuICAgICAgICB0aGlzLmNkciA9IGNkcjtcbiAgICAgICAgdGhpcy5sb2NhbGl6YXRpb25TZXJ2aWNlID0gbG9jYWxpemF0aW9uU2VydmljZTtcbiAgICAgICAgdGhpcy5uZ1pvbmUgPSBuZ1pvbmU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhvc3RDbGFzc2VzID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBoaWRkZW5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZm9jdXNhYmxlSWQgPSBgay1jb2xvcnBpY2tlci0ke3NlcmlhbCQxKyt9YDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgd2hhdCB2aWV3IHRoZSBDb2xvclBpY2tlciB3aWxsIHJlbmRlciBpbiB0aGUgcG9wdXAuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnZpZXcgPSAnZ3JhZGllbnQnO1xuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyB0aGUgcmVhZC1vbmx5IHN0YXRlIG9mIHRoZSBDb2xvclBpY2tlci5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmVhZG9ubHkgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgdGhlIGRpc2FibGVkIHN0YXRlIG9mIHRoZSBDb2xvclBpY2tlci5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyB0aGUgb3V0cHV0IGZvcm1hdCBvZiB0aGUgQ29sb3JQaWNrZXIuXG4gICAgICAgICAqIFRoZSBpbnB1dCB2YWx1ZSBtYXkgYmUgaW4gYSBkaWZmZXJlbnQgZm9ybWF0LiBIb3dldmVyLCBpdCB3aWxsIGJlIHBhcnNlZCBpbnRvIHRoZSBvdXRwdXQgYGZvcm1hdGBcbiAgICAgICAgICogYWZ0ZXIgdGhlIGNvbXBvbmVudCBwcm9jZXNzZXMgaXQuXG4gICAgICAgICAqXG4gICAgICAgICAqIElmIHRoZSBgZ3JhZGllbnRgIHZpZXcgaXMgdXNlZCB3aXRoIHRoZSBgb3BhY2l0eWAgb3B0aW9uIHNldCB0byB0cnVlLCB0aGlzIHNldHRpbmcgd2lsbCBiZSBpZ25vcmVkIGFuZCBgcmdiYWAgd2lsbCBiZSB1c2VkIGluc3RlYWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSBzdXBwb3J0ZWQgdmFsdWVzIGFyZTpcbiAgICAgICAgICogKiBgcmdiYWAgKGRlZmF1bHQpXG4gICAgICAgICAqICogYGhleGBcbiAgICAgICAgICogKiBbbmFtZV0oaHR0cHM6Ly93d3cudzMub3JnL3dpa2kvQ1NTL1Byb3BlcnRpZXMvY29sb3Iva2V5d29yZHMpXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZvcm1hdCA9ICdyZ2JhJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgdmFsdWUgaXMgY2hhbmdlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudmFsdWVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgdGhlIHBvcHVwIGlzIGFib3V0IHRvIG9wZW4uXG4gICAgICAgICAqIFRoaXMgZXZlbnQgaXMgcHJldmVudGFibGUuIElmIHlvdSBjYW5jZWwgaXQsIHRoZSBwb3B1cCB3aWxsIHJlbWFpbiBjbG9zZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9wZW4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgdGhlIHBvcHVwIGlzIGFib3V0IHRvIGNsb3NlLlxuICAgICAgICAgKiBUaGlzIGV2ZW50IGlzIHByZXZlbnRhYmxlLiBJZiB5b3UgY2FuY2VsIGl0LCB0aGUgcG9wdXAgd2lsbCByZW1haW4gb3Blbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2xvc2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgQ29sb3JQaWNrZXIgaXMgZm9jdXNlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25Gb2N1cyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgQ29sb3JQaWNrZXIgaXMgYmx1cnJlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25CbHVyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSBsZWZ0IHNpZGUgb2YgdGhlIENvbG9yUGlja2VyIHdyYXBwZXIgaXMgY2xpY2tlZC5cbiAgICAgICAgICogVGhlIGV2ZW50IGlzIHRyaWdnZXJlZCByZWdhcmRsZXNzIG9mIHdoZXRoZXIgYSBDb2xvclBpY2tlciBpY29uIGlzIHNldCBvciBub3QuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSBbQWN0aXZlQ29sb3JDbGlja0V2ZW50XSh7JSBzbHVnIGFwaV9pbnB1dHNfYWN0aXZlY29sb3JjbGlja2V2ZW50ICV9KSBldmVudCBwcm92aWRlcyB0aGUgb3B0aW9uIHRvIHByZXZlbnQgdGhlIHBvcHVwIG9wZW5pbmcuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmFjdGl2ZUNvbG9yQ2xpY2sgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMuX3RhYmluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5fcG9wdXBTZXR0aW5ncyA9IHsgYW5pbWF0ZTogdHJ1ZSB9O1xuICAgICAgICB0aGlzLl9wYWxldHRlU2V0dGluZ3MgPSB7fTtcbiAgICAgICAgdGhpcy5fZ3JhZGllbnRTZXR0aW5ncyA9IHsgb3BhY2l0eTogdHJ1ZSwgY2xlYXJCdXR0b246IGZhbHNlLCBkZWxheTogMCB9O1xuICAgICAgICB0aGlzLm5vdGlmeU5nVG91Y2hlZCA9ICgpID0+IHsgfTtcbiAgICAgICAgdGhpcy5ub3RpZnlOZ0NoYW5nZWQgPSAoKSA9PiB7IH07XG4gICAgICAgIHZhbGlkYXRlUGFja2FnZShwYWNrYWdlTWV0YWRhdGEpO1xuICAgICAgICB0aGlzLmR5bmFtaWNSVExTdWJzY3JpcHRpb24gPSB0aGlzLmxvY2FsaXphdGlvblNlcnZpY2UuY2hhbmdlcy5zdWJzY3JpYmUoKHsgcnRsIH0pID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gcnRsID8gJ3J0bCcgOiAnbHRyJztcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB0aGUgdmFsdWUgb2YgdGhlIGluaXRpYWxseSBzZWxlY3RlZCBjb2xvci5cbiAgICAgKi9cbiAgICBzZXQgdmFsdWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fdmFsdWUgPSBwYXJzZUNvbG9yJDEodmFsdWUsIHRoaXMuZm9ybWF0KTtcbiAgICB9XG4gICAgZ2V0IHZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbmZpZ3VyZXMgdGhlIHBvcHVwIG9mIHRoZSBDb2xvclBpY2tlci5cbiAgICAgKi9cbiAgICBzZXQgcG9wdXBTZXR0aW5ncyh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9wb3B1cFNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih0aGlzLl9wb3B1cFNldHRpbmdzLCB2YWx1ZSk7XG4gICAgfVxuICAgIGdldCBwb3B1cFNldHRpbmdzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcG9wdXBTZXR0aW5ncztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29uZmlndXJlcyB0aGUgcGFsZXR0ZSB0aGF0IGlzIGRpc3BsYXllZCBpbiB0aGUgQ29sb3JQaWNrZXIgcG9wdXAuXG4gICAgICovXG4gICAgc2V0IHBhbGV0dGVTZXR0aW5ncyh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9wYWxldHRlU2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHRoaXMuX3BhbGV0dGVTZXR0aW5ncywgdmFsdWUpO1xuICAgIH1cbiAgICBnZXQgcGFsZXR0ZVNldHRpbmdzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGFsZXR0ZVNldHRpbmdzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb25maWd1cmVzIHRoZSBncmFkaWVudCB0aGF0IGlzIGRpc3BsYXllZCBpbiB0aGUgQ29sb3JQaWNrZXIgcG9wdXAuXG4gICAgICovXG4gICAgc2V0IGdyYWRpZW50U2V0dGluZ3ModmFsdWUpIHtcbiAgICAgICAgdGhpcy5fZ3JhZGllbnRTZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24odGhpcy5fZ3JhZGllbnRTZXR0aW5ncywgdmFsdWUpO1xuICAgIH1cbiAgICBnZXQgZ3JhZGllbnRTZXR0aW5ncygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dyYWRpZW50U2V0dGluZ3M7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB0aGUgW3RhYmluZGV4XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0dsb2JhbF9hdHRyaWJ1dGVzL3RhYmluZGV4KSBvZiB0aGUgY29tcG9uZW50LlxuICAgICAqL1xuICAgIHNldCB0YWJpbmRleCh2YWx1ZSkge1xuICAgICAgICBjb25zdCB0YWJpbmRleCA9IE51bWJlcih2YWx1ZSk7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZSA9IDA7XG4gICAgICAgIHRoaXMuX3RhYmluZGV4ID0gIWlzTmFOKHRhYmluZGV4KSA/IHRhYmluZGV4IDogZGVmYXVsdFZhbHVlO1xuICAgIH1cbiAgICBnZXQgdGFiaW5kZXgoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5kaXNhYmxlZCA/IHRoaXMuX3RhYmluZGV4IDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgd2hldGhlciB0aGUgQ29sb3JQaWNrZXIgcG9wdXAgaXMgb3Blbi5cbiAgICAgKi9cbiAgICBnZXQgaXNPcGVuKCkge1xuICAgICAgICByZXR1cm4gaXNQcmVzZW50KHRoaXMucG9wdXBSZWYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgZ2V0IGljb25TdHlsZXMoKSB7XG4gICAgICAgIGlmICh0aGlzLmljb25DbGFzcykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaWNvbkNsYXNzO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmljb24pIHtcbiAgICAgICAgICAgIHJldHVybiBgay1pY29uIGstaS0ke3RoaXMuaWNvbn1gO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICBjb25zdCBkZWZhdWx0UHJlc2V0ID0gKHRoaXMuZm9ybWF0ICE9PSAnbmFtZScpID8gREVGQVVMVF9QUkVTRVQgOiBERUZBVUxUX0FDQ0VTU0lCTEVfUFJFU0VUO1xuICAgICAgICBjb25zdCBzZXR0aW5nc1BhbGV0dGUgPSB0aGlzLl9wYWxldHRlU2V0dGluZ3MucGFsZXR0ZTtcbiAgICAgICAgY29uc3QgcHJlc2V0Q29sdW1ucyA9IHR5cGVvZiBzZXR0aW5nc1BhbGV0dGUgPT09ICdzdHJpbmcnICYmIFBBTEVUVEVQUkVTRVRTW3NldHRpbmdzUGFsZXR0ZV0gP1xuICAgICAgICAgICAgUEFMRVRURVBSRVNFVFNbc2V0dGluZ3NQYWxldHRlXS5jb2x1bW5zIDpcbiAgICAgICAgICAgIHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fcGFsZXR0ZVNldHRpbmdzID0ge1xuICAgICAgICAgICAgcGFsZXR0ZTogc2V0dGluZ3NQYWxldHRlIHx8IGRlZmF1bHRQcmVzZXQsXG4gICAgICAgICAgICB0aWxlU2l6ZTogdGhpcy5fcGFsZXR0ZVNldHRpbmdzLnRpbGVTaXplIHx8IDI0LFxuICAgICAgICAgICAgY29sdW1uczogdGhpcy5fcGFsZXR0ZVNldHRpbmdzLmNvbHVtbnMgfHwgcHJlc2V0Q29sdW1ucyB8fCAxMFxuICAgICAgICB9O1xuICAgIH1cbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzKSB7XG4gICAgICAgIGlmIChjaGFuZ2VzLmZvcm1hdCAmJiBjaGFuZ2VzLmZvcm1hdC5jdXJyZW50VmFsdWUgPT09ICduYW1lJykge1xuICAgICAgICAgICAgdGhpcy52aWV3ID0gJ3BhbGV0dGUnO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnZpZXcgPT09ICdncmFkaWVudCcgJiYgdGhpcy5ncmFkaWVudFNldHRpbmdzLm9wYWNpdHkpIHtcbiAgICAgICAgICAgIHRoaXMuZm9ybWF0ID0gJ3JnYmEnO1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHBhcnNlQ29sb3IkMSh0aGlzLnZhbHVlLCB0aGlzLmZvcm1hdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuY2xvc2VQb3B1cCgpO1xuICAgICAgICBpZiAodGhpcy5keW5hbWljUlRMU3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmR5bmFtaWNSVExTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgaGFuZGxlV3JhcHBlckNsaWNrKCkge1xuICAgICAgICB0aGlzLnRvZ2dsZVdpdGhFdmVudHMoIXRoaXMuaXNPcGVuKTtcbiAgICAgICAgdGhpcy5mb2N1cygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgaGFuZGxlQWN0aXZlQ29sb3JDbGljaygpIHtcbiAgICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgICBjb25zdCBldmVudCA9IG5ldyBBY3RpdmVDb2xvckNsaWNrRXZlbnQodGhpcy52YWx1ZSk7XG4gICAgICAgIHRoaXMuYWN0aXZlQ29sb3JDbGljay5lbWl0KGV2ZW50KTtcbiAgICAgICAgaWYgKCFldmVudC5pc09wZW5QcmV2ZW50ZWQoKSB8fCB0aGlzLmlzT3Blbikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVXcmFwcGVyQ2xpY2soKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb2N1c2VzIHRoZSB3cmFwcGVyIG9mIHRoZSBDb2xvclBpY2tlci5cbiAgICAgKi9cbiAgICBmb2N1cygpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLndyYXBwZXIubmF0aXZlRWxlbWVudC5mb2N1cygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgaGFuZGxlV3JhcHBlckZvY3VzKCkge1xuICAgICAgICBpZiAoaXNQcmVzZW50KHRoaXMucGFsZXR0ZSkpIHtcbiAgICAgICAgICAgIHRoaXMucGFsZXR0ZS5uYXRpdmVFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaXNGb2N1c2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc0ZvY3VzZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLm9uRm9jdXMuZW1pdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCbHVycyB0aGUgQ29sb3JQaWNrZXIuXG4gICAgICovXG4gICAgYmx1cigpIHtcbiAgICAgICAgdGhpcy53cmFwcGVyLm5hdGl2ZUVsZW1lbnQuYmx1cigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgaGFuZGxlV3JhcHBlckJsdXIoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzT3Blbikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXNGb2N1c2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMub25CbHVyLmVtaXQoKTtcbiAgICAgICAgdGhpcy5ub3RpZnlOZ1RvdWNoZWQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYXJzIHRoZSBjb2xvciB2YWx1ZSBvZiB0aGUgQ29sb3JQaWNrZXIuXG4gICAgICovXG4gICAgcmVzZXQoKSB7XG4gICAgICAgIGlmICghaXNQcmVzZW50KHRoaXMudmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fdmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMubm90aWZ5TmdDaGFuZ2VkKHVuZGVmaW5lZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRvZ2dsZXMgdGhlIHBvcHVwIG9mIHRoZSBDb2xvclBpY2tlci5cbiAgICAgKiBEb2VzIG5vdCB0cmlnZ2VyIHRoZSBgb3BlbmAgYW5kIGBjbG9zZWAgZXZlbnRzIG9mIHRoZSBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3BlbiBBbiBvcHRpb25hbCBwYXJhbWV0ZXIuIFNwZWNpZmllcyB3aGV0aGVyIHRoZSBwb3B1cCB3aWxsIGJlIG9wZW5lZCBvciBjbG9zZWQuXG4gICAgICovXG4gICAgdG9nZ2xlKG9wZW4pIHtcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQgfHwgdGhpcy5yZWFkb25seSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2xvc2VQb3B1cCgpO1xuICAgICAgICBvcGVuID0gaXNQcmVzZW50KG9wZW4pID8gb3BlbiA6ICF0aGlzLmlzT3BlbjtcbiAgICAgICAgaWYgKG9wZW4pIHtcbiAgICAgICAgICAgIHRoaXMub3BlblBvcHVwKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGhhbmRsZVZhbHVlQ2hhbmdlKGNvbG9yLCBjbG9zZVBvcHVwKSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZENvbG9yID0gcGFyc2VDb2xvciQxKGNvbG9yLCB0aGlzLmZvcm1hdCk7XG4gICAgICAgIGNvbnN0IHZhbHVlQ2hhbmdlID0gcGFyc2VkQ29sb3IgIT09IHRoaXMudmFsdWU7XG4gICAgICAgIGlmIChjbG9zZVBvcHVwKSB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVdpdGhFdmVudHMoZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YWx1ZUNoYW5nZSkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHBhcnNlZENvbG9yO1xuICAgICAgICAgICAgdGhpcy52YWx1ZUNoYW5nZS5lbWl0KHBhcnNlZENvbG9yKTtcbiAgICAgICAgICAgIHRoaXMubm90aWZ5TmdDaGFuZ2VkKHBhcnNlZENvbG9yKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgaGFuZGxlUG9wdXBCbHVyKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IGZvY3VzSW5Qb3B1cEVsZW1lbnQgPSB0aGlzLnBvcHVwUmVmLnBvcHVwRWxlbWVudC5jb250YWlucyhldmVudC5yZWxhdGVkVGFyZ2V0KTtcbiAgICAgICAgY29uc3Qgd3JhcHBlckNsaWNrZWQgPSBldmVudC5yZWxhdGVkVGFyZ2V0ID09PSB0aGlzLndyYXBwZXIubmF0aXZlRWxlbWVudDtcbiAgICAgICAgaWYgKCF0aGlzLmlzRm9jdXNlZCB8fCB3cmFwcGVyQ2xpY2tlZCB8fCBmb2N1c0luUG9wdXBFbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc0ZvY3VzZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5vbkJsdXIuZW1pdCgpO1xuICAgICAgICB0aGlzLm5vdGlmeU5nVG91Y2hlZCgpO1xuICAgICAgICB0aGlzLnRvZ2dsZVdpdGhFdmVudHMoZmFsc2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgd3JpdGVWYWx1ZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICByZWdpc3Rlck9uQ2hhbmdlKGZuKSB7XG4gICAgICAgIHRoaXMubm90aWZ5TmdDaGFuZ2VkID0gZm47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICByZWdpc3Rlck9uVG91Y2hlZChmbikge1xuICAgICAgICB0aGlzLm5vdGlmeU5nVG91Y2hlZCA9IGZuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgc2V0RGlzYWJsZWRTdGF0ZShpc0Rpc2FibGVkKSB7XG4gICAgICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xuICAgICAgICB0aGlzLmRpc2FibGVkID0gaXNEaXNhYmxlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGhhbmRsZVdyYXBwZXJLZXlEb3duKGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSBLZXlzLkFycm93RG93biB8fCBldmVudC5rZXlDb2RlID09PSBLZXlzLkVudGVyKSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy50b2dnbGVXaXRoRXZlbnRzKHRydWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBoYW5kbGVQb3B1cEtleURvd24oZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IEtleXMuRXNjYXBlKSB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVdpdGhFdmVudHMoZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy53cmFwcGVyLm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gS2V5cy5UYWIpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0RWxlbWVudCA9IHRoaXMuY29sb3JHcmFkaWVudCA/IHRoaXMuY29sb3JHcmFkaWVudC5ncmFkaWVudERyYWdIYW5kbGUubmF0aXZlRWxlbWVudCA6IHRoaXMucGFsZXR0ZS5uYXRpdmVFbGVtZW50O1xuICAgICAgICAgICAgY29uc3QgbGFzdEVsZW1lbnQgPSB0aGlzLnBhbGV0dGUgPyB0aGlzLnBhbGV0dGUubmF0aXZlRWxlbWVudCA6XG4gICAgICAgICAgICAgICAgdGhpcy5jb2xvckdyYWRpZW50LmlucHV0cy5vcGFjaXR5SW5wdXQubmF0aXZlRWxlbWVudC5jaGlsZE5vZGVzWzFdLmNoaWxkcmVuWzBdO1xuICAgICAgICAgICAgaWYgKGV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gZmlyc3RFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGxhc3RFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSBsYXN0RWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICBmaXJzdEVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICogVXNlZCBieSB0aGUgVGV4dEJveENvbnRhaW5lciB0byBkZXRlcm1pbmUgaWYgdGhlIGNvbXBvbmVudCBpcyBlbXB0eS5cbiAgICAgKi9cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHRvZ2dsZVdpdGhFdmVudHMob3Blbikge1xuICAgICAgICBjb25zdCBzYW1lU3RhdGUgPSB0aGlzLmlzT3BlbiA9PT0gb3BlbjtcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQgfHwgdGhpcy5yZWFkb25seSB8fCBzYW1lU3RhdGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBldmVudEFyZ3MgPSBuZXcgUHJldmVudGFibGVFdmVudCgpO1xuICAgICAgICBvcGVuID8gdGhpcy5vcGVuLmVtaXQoZXZlbnRBcmdzKSA6IHRoaXMuY2xvc2UuZW1pdChldmVudEFyZ3MpO1xuICAgICAgICBpZiAoIWV2ZW50QXJncy5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgICAgICAgdGhpcy50b2dnbGUob3Blbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wZW4pIHtcbiAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29sb3JHcmFkaWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xvckdyYWRpZW50LmdyYWRpZW50RHJhZ0hhbmRsZS5uYXRpdmVFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9wZW5Qb3B1cCgpIHtcbiAgICAgICAgY29uc3QgaG9yaXpvbnRhbEFsaWduID0gdGhpcy5kaXJlY3Rpb24gPT09IFwicnRsXCIgPyBcInJpZ2h0XCIgOiBcImxlZnRcIjtcbiAgICAgICAgY29uc3QgYW5jaG9yUG9zaXRpb24gPSB7IGhvcml6b250YWw6IGhvcml6b250YWxBbGlnbiwgdmVydGljYWw6IFwiYm90dG9tXCIgfTtcbiAgICAgICAgY29uc3QgcG9wdXBQb3NpdGlvbiA9IHsgaG9yaXpvbnRhbDogaG9yaXpvbnRhbEFsaWduLCB2ZXJ0aWNhbDogXCJ0b3BcIiB9O1xuICAgICAgICB0aGlzLnBvcHVwUmVmID0gdGhpcy5wb3B1cFNlcnZpY2Uub3Blbih7XG4gICAgICAgICAgICBhbmNob3I6IHRoaXMud3JhcHBlcixcbiAgICAgICAgICAgIGFuaW1hdGU6IHRoaXMucG9wdXBTZXR0aW5ncy5hbmltYXRlLFxuICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMucG9wdXBTZXR0aW5ncy5hcHBlbmRUbyxcbiAgICAgICAgICAgIHBvcHVwQWxpZ246IHBvcHVwUG9zaXRpb24sXG4gICAgICAgICAgICBhbmNob3JBbGlnbjogYW5jaG9yUG9zaXRpb24sXG4gICAgICAgICAgICBwb3B1cENsYXNzOiAnay1jb2xvcnBpY2tlci1wb3B1cCcsXG4gICAgICAgICAgICBjb250ZW50OiB0aGlzLnBvcHVwVGVtcGxhdGUsXG4gICAgICAgICAgICBwb3NpdGlvbk1vZGU6ICdhYnNvbHV0ZSdcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucG9wdXBSZWYucG9wdXBBbmNob3JWaWV3cG9ydExlYXZlLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVdpdGhFdmVudHMoZmFsc2UpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzT3Blbikge1xuICAgICAgICAgICAgICAgIHRoaXMud3JhcHBlci5uYXRpdmVFbGVtZW50LmZvY3VzKHtcbiAgICAgICAgICAgICAgICAgICAgcHJldmVudFNjcm9sbDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2xvc2VQb3B1cCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzT3Blbikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucG9wdXBSZWYuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5wb3B1cFJlZiA9IG51bGw7XG4gICAgICAgIHRoaXMucGFsZXR0ZSA9IG51bGw7XG4gICAgfVxufTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLXdpZGdldCcpLFxuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLWNvbG9ycGlja2VyJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBDb2xvclBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiaG9zdENsYXNzZXNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdhdHRyLmRpcicpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBDb2xvclBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZGlyZWN0aW9uXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBDb2xvclBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZm9jdXNhYmxlSWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIENvbG9yUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ2aWV3XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgQ29sb3JQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcInJlYWRvbmx5XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgQ29sb3JQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcImRpc2FibGVkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBDb2xvclBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZm9ybWF0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbU3RyaW5nXSlcbl0sIENvbG9yUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKVxuXSwgQ29sb3JQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcInBvcHVwU2V0dGluZ3NcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSlcbl0sIENvbG9yUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJwYWxldHRlU2V0dGluZ3NcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSlcbl0sIENvbG9yUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJncmFkaWVudFNldHRpbmdzXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgQ29sb3JQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcImljb25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbl0sIENvbG9yUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpY29uQ2xhc3NcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlciksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtOdW1iZXJdKVxuXSwgQ29sb3JQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcInRhYmluZGV4XCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIENvbG9yUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ2YWx1ZUNoYW5nZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIENvbG9yUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJvcGVuXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgQ29sb3JQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcImNsb3NlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoJ2ZvY3VzJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIENvbG9yUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJvbkZvY3VzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoJ2JsdXInKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgQ29sb3JQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcIm9uQmx1clwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIENvbG9yUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJhY3RpdmVDb2xvckNsaWNrXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBWaWV3Q2hpbGQoJ2NvbnRhaW5lcicsIHsgcmVhZDogVmlld0NvbnRhaW5lclJlZiwgc3RhdGljOiB0cnVlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBWaWV3Q29udGFpbmVyUmVmKVxuXSwgQ29sb3JQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcImNvbnRhaW5lclwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgVmlld0NoaWxkKCd3cmFwcGVyJywgeyBzdGF0aWM6IHRydWUgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEVsZW1lbnRSZWYpXG5dLCBDb2xvclBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwid3JhcHBlclwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgVmlld0NoaWxkKCdwb3B1cFRlbXBsYXRlJywgeyBzdGF0aWM6IHRydWUgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFRlbXBsYXRlUmVmKVxuXSwgQ29sb3JQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcInBvcHVwVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIFZpZXdDaGlsZCgncGFsZXR0ZScsIHsgcmVhZDogRWxlbWVudFJlZiwgc3RhdGljOiBmYWxzZSB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRWxlbWVudFJlZilcbl0sIENvbG9yUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJwYWxldHRlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBWaWV3Q2hpbGQoJ2NvbG9yR3JhZGllbnQnLCB7IHN0YXRpYzogZmFsc2UgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIENvbG9yR3JhZGllbnRDb21wb25lbnQpXG5dLCBDb2xvclBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiY29sb3JHcmFkaWVudFwiLCB2b2lkIDApO1xuQ29sb3JQaWNrZXJDb21wb25lbnQgPSBDb2xvclBpY2tlckNvbXBvbmVudF8xID0gX19kZWNvcmF0ZShbXG4gICAgQ29tcG9uZW50KHtcbiAgICAgICAgc2VsZWN0b3I6ICdrZW5kby1jb2xvcnBpY2tlcicsXG4gICAgICAgIHByb3ZpZGVyczogW3tcbiAgICAgICAgICAgICAgICBtdWx0aTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcbiAgICAgICAgICAgICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBDb2xvclBpY2tlckNvbXBvbmVudF8xKVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHByb3ZpZGU6IEtlbmRvSW5wdXQsXG4gICAgICAgICAgICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gQ29sb3JQaWNrZXJDb21wb25lbnRfMSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBDb2xvclBpY2tlckxvY2FsaXphdGlvblNlcnZpY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZTogTG9jYWxpemF0aW9uU2VydmljZSxcbiAgICAgICAgICAgICAgICB1c2VFeGlzdGluZzogQ29sb3JQaWNrZXJMb2NhbGl6YXRpb25TZXJ2aWNlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHByb3ZpZGU6IEwxME5fUFJFRklYLFxuICAgICAgICAgICAgICAgIHVzZVZhbHVlOiAna2VuZG8uY29sb3JwaWNrZXInXG4gICAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIHRlbXBsYXRlOiBgXG4gICAgICAgIDxuZy1jb250YWluZXIga2VuZG9Db2xvclBpY2tlckxvY2FsaXplZE1lc3NhZ2VzXG4gICAgICAgICAgICBpMThuLWNvbG9yR3JhZGllbnQ9XCJrZW5kby5jb2xvcnBpY2tlci5jb2xvckdyYWRpZW50Tm9Db2xvcnxUaGUgYXJpYS1sYWJlbCBhcHBsaWVkIHRvIHRoZSBDb2xvckdyYWRpZW50IGNvbXBvbmVudCB3aGVuIHRoZSB2YWx1ZSBpcyBlbXB0eS5cIlxuICAgICAgICAgICAgY29sb3JHcmFkaWVudE5vQ29sb3I9XCJDb2xvcmdyYWRpZW50IG5vIGNvbG9yIGNob3NlblwiXG4gICAgICAgICAgICBpMThuLWNvbG9yR3JhZGllbnQ9XCJrZW5kby5jb2xvcnBhbGV0dGUuY29sb3JQYWxldHRlTm9Db2xvcnxUaGUgYXJpYS1sYWJlbCBhcHBsaWVkIHRvIHRoZSBDb2xvclBhbGV0dGUgY29tcG9uZW50IHdoZW4gdGhlIHZhbHVlIGlzIGVtcHR5LlwiXG4gICAgICAgICAgICBjb2xvclBhbGV0dGVOb0NvbG9yPVwiQ29sb3JwYWxldHRlIG5vIGNvbG9yIGNob3NlblwiXG4gICAgICAgICAgICBpMThuLWNvbG9yR3JhZGllbnRIYW5kbGU9XCJrZW5kby5jb2xvcnBpY2tlci5jb2xvckdyYWRpZW50SGFuZGxlfFRoZSB0aXRsZSBmb3IgdGhlIGdyYWRpZW50IGNvbG9yIGRyYWcgaGFuZGxlIGNob29zZXIuXCJcbiAgICAgICAgICAgIGNvbG9yR3JhZGllbnRIYW5kbGU9XCJDaG9vc2UgY29sb3JcIlxuICAgICAgICAgICAgaTE4bi1jbGVhckJ1dHRvbj1cImtlbmRvLmNvbG9ycGlja2VyLmNsZWFyQnV0dG9ufFRoZSB0aXRsZSBmb3IgdGhlIGNsZWFyIGJ1dHRvbi5cIlxuICAgICAgICAgICAgY2xlYXJCdXR0b249XCJDbGVhciB2YWx1ZVwiXG4gICAgICAgICAgICBpMThuLWh1ZVNsaWRlckhhbmRsZT1cImtlbmRvLmNvbG9ycGlja2VyLmh1ZVNsaWRlckhhbmRsZXxUaGUgdGl0bGUgZm9yIHRoZSBodWUgc2xpZGVyIGhhbmRsZS5cIlxuICAgICAgICAgICAgaHVlU2xpZGVySGFuZGxlPVwiU2V0IGh1ZVwiXG4gICAgICAgICAgICBpMThuLW9wYWNpdHlTbGlkZXJIYW5kbGU9XCJrZW5kby5jb2xvcnBpY2tlci5vcGFjaXR5U2xpZGVySGFuZGxlfFRoZSB0aXRsZSBmb3IgdGhlIG9wYWNpdHkgc2xpZGVyIGhhbmRsZS5cIlxuICAgICAgICAgICAgb3BhY2l0eVNsaWRlckhhbmRsZT1cIlNldCBvcGFjaXR5XCJcbiAgICAgICAgICAgIGkxOG4taGV4SW5wdXRQbGFjZWhvbGRlcj1cImtlbmRvLmNvbG9ycGlja2VyLmhleElucHV0UGxhY2Vob2xkZXJ8VGhlIHBsYWNlaG9sZGVyIGZvciB0aGUgSEVYIGNvbG9yIGlucHV0LlwiXG4gICAgICAgICAgICBoZXhJbnB1dFBsYWNlaG9sZGVyPVwiSEVYIENvbG9yXCJcbiAgICAgICAgICAgIGkxOG4tcmVkSW5wdXRQbGFjZWhvbGRlcj1cImtlbmRvLmNvbG9ycGlja2VyLnJlZElucHV0UGxhY2Vob2xkZXJ8VGhlIHBsYWNlaG9sZGVyIGZvciB0aGUgcmVkIGNvbG9yIGlucHV0LlwiXG4gICAgICAgICAgICByZWRJbnB1dFBsYWNlaG9sZGVyPVwiUmVkXCJcbiAgICAgICAgICAgIGkxOG4tZ3JlZW5JbnB1dFBsYWNlaG9sZGVyPVwia2VuZG8uY29sb3JwaWNrZXIuZ3JlZW5JbnB1dFBsYWNlaG9sZGVyfFRoZSBwbGFjZWhvbGRlciBmb3IgdGhlIGdyZWVuIGNvbG9yIGlucHV0LlwiXG4gICAgICAgICAgICBncmVlbklucHV0UGxhY2Vob2xkZXI9XCJHcmVlblwiXG4gICAgICAgICAgICBpMThuLWJsdWVJbnB1dFBsYWNlaG9sZGVyPVwia2VuZG8uY29sb3JwaWNrZXIuYmx1ZUlucHV0UGxhY2Vob2xkZXJ8VGhlIHBsYWNlaG9sZGVyIGZvciB0aGUgYmx1ZSBjb2xvciBpbnB1dC5cIlxuICAgICAgICAgICAgYmx1ZUlucHV0UGxhY2Vob2xkZXI9XCJCbHVlXCJcbiAgICAgICAgICAgIGkxOG4tYWxwaGFJbnB1dFBsYWNlaG9sZGVyPVwia2VuZG8uY29sb3JwaWNrZXIuYWxwaGFJbnB1dFBsYWNlaG9sZGVyfFRoZSBwbGFjZWhvbGRlciBmb3IgdGhlIGFscGhhIGlucHV0LlwiXG4gICAgICAgICAgICBhbHBoYUlucHV0UGxhY2Vob2xkZXI9XCJBbHBoYVwiPlxuICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICN3cmFwcGVyXG4gICAgICAgICAgICBbbmdDbGFzc109XCJ7XG4gICAgICAgICAgICAgICAgJ2stcGlja2VyLXdyYXAnOiB0cnVlLFxuICAgICAgICAgICAgICAgICdrLXN0YXRlLWRpc2FibGVkJzogdGhpcy5kaXNhYmxlZCxcbiAgICAgICAgICAgICAgICAnay1zdGF0ZS1mb2N1c2VkJzogdGhpcy5pc0ZvY3VzZWRcbiAgICAgICAgICAgIH1cIlxuICAgICAgICAgICAgcm9sZT1cImxpc3Rib3hcIlxuICAgICAgICAgICAgW2F0dHIuYXJpYS1leHBhbmRlZF09XCJpc09wZW5cIlxuICAgICAgICAgICAgW2F0dHIuYXJpYS1yZWFkb25seV09XCJyZWFkb25seVwiXG4gICAgICAgICAgICBbYXR0ci5hcmlhLWRpc2FibGVkXT1cImRpc2FibGVkXCJcbiAgICAgICAgICAgIFthdHRyLmFyaWEtbGFiZWxdPVwidmFsdWVcIlxuICAgICAgICAgICAgW2lkXT1cImZvY3VzYWJsZUlkXCJcbiAgICAgICAgICAgIFthdHRyLnRhYmluZGV4XT1cInRhYmluZGV4XCJcbiAgICAgICAgICAgIChmb2N1cyk9XCJoYW5kbGVXcmFwcGVyRm9jdXMoKVwiXG4gICAgICAgICAgICAoYmx1cik9XCJoYW5kbGVXcmFwcGVyQmx1cigpXCJcbiAgICAgICAgICAgIChtb3VzZWRvd24pPVwiJGV2ZW50LnByZXZlbnREZWZhdWx0KClcIlxuICAgICAgICAgICAgKGtleWRvd24pPVwiaGFuZGxlV3JhcHBlcktleURvd24oJGV2ZW50KVwiXG4gICAgICAgID5cbiAgICAgICAgICAgIDxzcGFuICpuZ0lmPVwiIWljb25TdHlsZXNcIiBjbGFzcz1cImstc2VsZWN0ZWQtY29sb3JcIiBbc3R5bGUuYmFja2dyb3VuZC1jb2xvcl09XCJ2YWx1ZVwiIChjbGljayk9XCJoYW5kbGVBY3RpdmVDb2xvckNsaWNrKClcIj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktbGluZVwiICpuZ0lmPVwiIXZhbHVlXCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4gKm5nSWY9XCJpY29uU3R5bGVzXCIgY2xhc3M9XCJrLXRvb2wtaWNvblwiIFtuZ0NsYXNzXT1cImljb25TdHlsZXNcIiAoY2xpY2spPVwiaGFuZGxlQWN0aXZlQ29sb3JDbGljaygpXCI+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJrLXNlbGVjdGVkLWNvbG9yXCIgW3N0eWxlLmJhY2tncm91bmQtY29sb3JdPVwidmFsdWVcIj48L3NwYW4+XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImstc2VsZWN0XCIgKGNsaWNrKT1cImhhbmRsZVdyYXBwZXJDbGljaygpXCI+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWFycm93LXNcIj48L3NwYW4+XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgICAgPG5nLXRlbXBsYXRlICNwb3B1cFRlbXBsYXRlPlxuICAgICAgICAgICAgPGtlbmRvLWNvbG9yZ3JhZGllbnQgICNjb2xvckdyYWRpZW50XG4gICAgICAgICAgICAgICAgKm5nSWY9XCJ2aWV3ID09PSAnZ3JhZGllbnQnIHx8IHZpZXcgPT09ICdjb21ibydcIlxuICAgICAgICAgICAgICAgIFt2YWx1ZV09XCJ2YWx1ZVwiXG4gICAgICAgICAgICAgICAgW2Zvcm1hdF09XCJmb3JtYXRcIlxuICAgICAgICAgICAgICAgIFtvcGFjaXR5XT1cImdyYWRpZW50U2V0dGluZ3Mub3BhY2l0eVwiXG4gICAgICAgICAgICAgICAgW2NsZWFyQnV0dG9uXT1cImdyYWRpZW50U2V0dGluZ3MuY2xlYXJCdXR0b25cIlxuICAgICAgICAgICAgICAgIFtkZWxheV09XCJncmFkaWVudFNldHRpbmdzLmRlbGF5XCJcbiAgICAgICAgICAgICAgICAoZm9jdXNvdXQpPVwiaGFuZGxlUG9wdXBCbHVyKCRldmVudClcIlxuICAgICAgICAgICAgICAgICh2YWx1ZUNoYW5nZSk9XCJoYW5kbGVWYWx1ZUNoYW5nZSgkZXZlbnQsIGZhbHNlKVwiXG4gICAgICAgICAgICAgICAgKGtleWRvd24pPVwiaGFuZGxlUG9wdXBLZXlEb3duKCRldmVudClcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgPC9rZW5kby1jb2xvcmdyYWRpZW50PlxuICAgICAgICAgICAgPGtlbmRvLWNvbG9ycGFsZXR0ZVxuICAgICAgICAgICAgICAgICNwYWxldHRlXG4gICAgICAgICAgICAgICAgKm5nSWY9XCJ2aWV3ID09PSAncGFsZXR0ZScgfHwgdmlldyA9PT0gJ2NvbWJvJ1wiXG4gICAgICAgICAgICAgICAga2VuZG9Gb2N1c09uRG9tUmVhZHlcbiAgICAgICAgICAgICAgICBbcGFsZXR0ZV09XCJwYWxldHRlU2V0dGluZ3MucGFsZXR0ZVwiXG4gICAgICAgICAgICAgICAgW2NvbHVtbnNdPVwicGFsZXR0ZVNldHRpbmdzLmNvbHVtbnNcIlxuICAgICAgICAgICAgICAgIFt0aWxlU2l6ZV09XCJwYWxldHRlU2V0dGluZ3MudGlsZVNpemVcIlxuICAgICAgICAgICAgICAgIFtmb3JtYXRdPVwiZm9ybWF0XCJcbiAgICAgICAgICAgICAgICBbdmFsdWVdPVwidmFsdWVcIlxuICAgICAgICAgICAgICAgIChibHVyKT1cImhhbmRsZVBvcHVwQmx1cigkZXZlbnQpXCJcbiAgICAgICAgICAgICAgICAoY2VsbFNlbGVjdGlvbik9XCJoYW5kbGVWYWx1ZUNoYW5nZSgkZXZlbnQsIHRydWUpXCJcbiAgICAgICAgICAgICAgICAobW91c2Vkb3duKT1cIiRldmVudC5wcmV2ZW50RGVmYXVsdCgpXCJcbiAgICAgICAgICAgICAgICAoa2V5ZG93bik9XCJoYW5kbGVQb3B1cEtleURvd24oJGV2ZW50KVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICA8L2tlbmRvLWNvbG9ycGFsZXR0ZT5cbiAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgPG5nLWNvbnRhaW5lciAjY29udGFpbmVyPjwvbmctY29udGFpbmVyPlxuICAgIGBcbiAgICB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW1BvcHVwU2VydmljZSxcbiAgICAgICAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgICAgIExvY2FsaXphdGlvblNlcnZpY2UsXG4gICAgICAgIE5nWm9uZV0pXG5dLCBDb2xvclBpY2tlckNvbXBvbmVudCk7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5sZXQgQ29sb3JQYWxldHRlU2VydmljZSA9IGNsYXNzIENvbG9yUGFsZXR0ZVNlcnZpY2Uge1xuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5jb2xvclJvd3MgPSBbXTtcbiAgICB9XG4gICAgc2V0Q29sb3JNYXRyaXgocGFsZXR0ZSwgY29sdW1ucykge1xuICAgICAgICB0aGlzLmNvbG9yUm93cyA9IFtdO1xuICAgICAgICBpZiAoIShpc1ByZXNlbnQocGFsZXR0ZSkgJiYgcGFsZXR0ZS5sZW5ndGgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29sdW1ucyA9IGNvbHVtbnMgfHwgcGFsZXR0ZS5sZW5ndGg7XG4gICAgICAgIGZvciAobGV0IHN0YXJ0ID0gMDsgc3RhcnQgPCBwYWxldHRlLmxlbmd0aDsgc3RhcnQgKz0gY29sdW1ucykge1xuICAgICAgICAgICAgY29uc3Qgcm93ID0gcGFsZXR0ZS5zbGljZShzdGFydCwgY29sdW1ucyArIHN0YXJ0KTtcbiAgICAgICAgICAgIHRoaXMuY29sb3JSb3dzLnB1c2gocm93KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRDZWxsQ29vcmRzRm9yKGNvbG9yKSB7XG4gICAgICAgIGlmICghaXNQcmVzZW50KGNvbG9yKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IHRoaXMuY29sb3JSb3dzLmxlbmd0aDsgcm93KyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IGNvbCA9IDA7IGNvbCA8IHRoaXMuY29sb3JSb3dzW3Jvd10ubGVuZ3RoOyBjb2wrKykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbG9yUm93c1tyb3ddW2NvbF0gPT09IGNvbG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHJvdywgY29sIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGdldENvbG9yQXQoY2VsbENvb3Jkcykge1xuICAgICAgICBpZiAoIShpc1ByZXNlbnQoY2VsbENvb3JkcykgJiYgaXNQcmVzZW50KHRoaXMuY29sb3JSb3dzW2NlbGxDb29yZHMucm93XSkpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuY29sb3JSb3dzW2NlbGxDb29yZHMucm93XVtjZWxsQ29vcmRzLmNvbF07XG4gICAgfVxuICAgIGdldE5leHRDZWxsKGN1cnJlbnQsIGhvcml6b250YWxTdGVwLCB2ZXJ0aWNhbFN0ZXApIHtcbiAgICAgICAgaWYgKCEoaXNQcmVzZW50KGN1cnJlbnQpICYmIGlzUHJlc2VudChjdXJyZW50LnJvdykgJiYgaXNQcmVzZW50KGN1cnJlbnQuY29sKSkpIHtcbiAgICAgICAgICAgIHJldHVybiB7IHJvdzogMCwgY29sOiAwIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgcm93ID0gdGhpcy5jbGFtcEluZGV4KGN1cnJlbnQucm93ICsgdmVydGljYWxTdGVwLCB0aGlzLmNvbG9yUm93cy5sZW5ndGggLSAxKTtcbiAgICAgICAgY29uc3QgY29sID0gdGhpcy5jbGFtcEluZGV4KGN1cnJlbnQuY29sICsgaG9yaXpvbnRhbFN0ZXAsIHRoaXMuY29sb3JSb3dzW3Jvd10ubGVuZ3RoIC0gMSk7XG4gICAgICAgIHJldHVybiB7IHJvdywgY29sIH07XG4gICAgfVxuICAgIGNsYW1wSW5kZXgoaW5kZXgsIG1heCkge1xuICAgICAgICBjb25zdCBtaW5BcnJheUluZGV4ID0gMDtcbiAgICAgICAgaWYgKGluZGV4IDwgbWluQXJyYXlJbmRleCkge1xuICAgICAgICAgICAgcmV0dXJuIG1pbkFycmF5SW5kZXg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluZGV4ID4gbWF4KSB7XG4gICAgICAgICAgICByZXR1cm4gbWF4O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbmRleDtcbiAgICB9XG59O1xuQ29sb3JQYWxldHRlU2VydmljZSA9IF9fZGVjb3JhdGUoW1xuICAgIEluamVjdGFibGUoKVxuXSwgQ29sb3JQYWxldHRlU2VydmljZSk7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5sZXQgQ29sb3JQYWxldHRlTG9jYWxpemF0aW9uU2VydmljZSA9IGNsYXNzIENvbG9yUGFsZXR0ZUxvY2FsaXphdGlvblNlcnZpY2UgZXh0ZW5kcyBMb2NhbGl6YXRpb25TZXJ2aWNlIHtcbiAgICBjb25zdHJ1Y3RvcihwcmVmaXgsIG1lc3NhZ2VTZXJ2aWNlLCBfcnRsLCBjb2xvclBpY2tlckxvY2FsaXphdGlvbikge1xuICAgICAgICBzdXBlcihwcmVmaXgsIG1lc3NhZ2VTZXJ2aWNlLCBfcnRsKTtcbiAgICAgICAgdGhpcy5jb2xvclBpY2tlckxvY2FsaXphdGlvbiA9IGNvbG9yUGlja2VyTG9jYWxpemF0aW9uO1xuICAgIH1cbiAgICBnZXQoc2hvcnRLZXkpIHtcbiAgICAgICAgaWYgKHRoaXMuY29sb3JQaWNrZXJMb2NhbGl6YXRpb24pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbG9yUGlja2VyTG9jYWxpemF0aW9uLmdldChzaG9ydEtleSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN1cGVyLmdldChzaG9ydEtleSk7XG4gICAgfVxufTtcbkNvbG9yUGFsZXR0ZUxvY2FsaXphdGlvblNlcnZpY2UgPSBfX2RlY29yYXRlKFtcbiAgICBfX3BhcmFtKDAsIEluamVjdChMMTBOX1BSRUZJWCkpLFxuICAgIF9fcGFyYW0oMSwgT3B0aW9uYWwoKSksXG4gICAgX19wYXJhbSgyLCBPcHRpb25hbCgpKSwgX19wYXJhbSgyLCBJbmplY3QoUlRMKSksXG4gICAgX19wYXJhbSgzLCBPcHRpb25hbCgpKSwgX19wYXJhbSgzLCBJbmplY3QoQ29sb3JQaWNrZXJMb2NhbGl6YXRpb25TZXJ2aWNlKSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtTdHJpbmcsIE1lc3NhZ2VTZXJ2aWNlLCBCb29sZWFuLCBDb2xvclBpY2tlckxvY2FsaXphdGlvblNlcnZpY2VdKVxuXSwgQ29sb3JQYWxldHRlTG9jYWxpemF0aW9uU2VydmljZSk7XG5cbnZhciBDb2xvclBhbGV0dGVDb21wb25lbnRfMTtcbmNvbnN0IERFRkFVTFRfVElMRV9TSVpFID0gMjQ7XG5jb25zdCBERUZBVUxUX0NPTFVNTlNfQ09VTlQgPSAxMDtcbmNvbnN0IERFRkFVTFRfUFJFU0VUJDEgPSAnb2ZmaWNlJztcbmNvbnN0IERFRkFVTFRfQUNDRVNTSUJMRV9QUkVTRVQkMSA9ICdhY2Nlc3NpYmxlJztcbmxldCBzZXJpYWwkMiA9IDA7XG4vKipcbiAqIFRoZSBDb2xvclBhbGV0dGUgY29tcG9uZW50IHByb3ZpZGVzIGEgc2V0IG9mIHByZWRlZmluZWQgcGFsZXR0ZSBwcmVzZXRzIGFuZCBlbmFibGVzIHlvdSB0byBpbXBsZW1lbnQgYSBjdXN0b20gY29sb3IgcGFsZXR0ZS5cbiAqIFRoZSBDb2xvclBhbGV0dGUgaXMgaW5kZXBlbmRlbnRseSB1c2VkIGJ5IGBrZW5kby1jb2xvcnBpY2tlcmAgYW5kIGNhbiBiZSBkaXJlY3RseSBhZGRlZCB0byB0aGUgcGFnZS5cbiAqL1xubGV0IENvbG9yUGFsZXR0ZUNvbXBvbmVudCA9IENvbG9yUGFsZXR0ZUNvbXBvbmVudF8xID0gY2xhc3MgQ29sb3JQYWxldHRlQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihob3N0LCBzZXJ2aWNlLCBjZHIsIHJlbmRlcmVyLCBsb2NhbGl6YXRpb25TZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuaG9zdCA9IGhvc3Q7XG4gICAgICAgIHRoaXMuc2VydmljZSA9IHNlcnZpY2U7XG4gICAgICAgIHRoaXMuY2RyID0gY2RyO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMubG9jYWxpemF0aW9uU2VydmljZSA9IGxvY2FsaXphdGlvblNlcnZpY2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmlkID0gYGstY29sb3JwYWxldHRlLSR7c2VyaWFsJDIrK31gO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIHRoZSBvdXRwdXQgZm9ybWF0IG9mIHRoZSBDb2xvclBhbGV0dGVDb21wb25lbnQuXG4gICAgICAgICAqIFRoZSBpbnB1dCB2YWx1ZSBtYXkgYmUgaW4gYSBkaWZmZXJlbnQgZm9ybWF0LiBIb3dldmVyLCBpdCB3aWxsIGJlIHBhcnNlZCBpbnRvIHRoZSBvdXRwdXQgYGZvcm1hdGBcbiAgICAgICAgICogYWZ0ZXIgdGhlIGNvbXBvbmVudCBwcm9jZXNzZXMgaXQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSBzdXBwb3J0ZWQgdmFsdWVzIGFyZTpcbiAgICAgICAgICogKiAoRGVmYXVsdCkgYGhleGBcbiAgICAgICAgICogKiBgcmdiYWBcbiAgICAgICAgICogKiBgbmFtZWBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZm9ybWF0ID0gJ2hleCc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIHRoZSBkaXNhYmxlZCBzdGF0ZSBvZiB0aGUgQ29sb3JQYWxldHRlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyB0aGUgcmVhZC1vbmx5IHN0YXRlIG9mIHRoZSBDb2xvclBhbGV0dGUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlYWRvbmx5ID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgdGhlIHNpemUgb2YgYSBjb2xvciBjZWxsLlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGUgcG9zc2libGUgdmFsdWVzIGFyZTpcbiAgICAgICAgICogKiAoRGVmYXVsdCkgYHRpbGVTaXplID0gMjRgXG4gICAgICAgICAqICogYHsgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIgfWBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGlsZVNpemUgPSB7IHdpZHRoOiBERUZBVUxUX1RJTEVfU0laRSwgaGVpZ2h0OiBERUZBVUxUX1RJTEVfU0laRSB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSBjb2xvciBzZWxlY3Rpb24gaXMgY2hhbmdlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2VsZWN0aW9uQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSB2YWx1ZSBpcyBjaGFuZ2VkLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52YWx1ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgdXNlciBzZWxlY3RzIGEgY2VsbCB3aXRoIHRoZSBtb3VzZSBvciBwcmVzc2VzIGBFbnRlcmAuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBoaWRkZW5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2VsbFNlbGVjdGlvbiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBoaWRkZW5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaG9zdENsYXNzZXMgPSB0cnVlO1xuICAgICAgICB0aGlzLl90YWJpbmRleCA9IDA7XG4gICAgICAgIHRoaXMubm90aWZ5TmdUb3VjaGVkID0gKCkgPT4geyB9O1xuICAgICAgICB0aGlzLm5vdGlmeU5nQ2hhbmdlZCA9ICgpID0+IHsgfTtcbiAgICAgICAgdGhpcy5keW5hbWljUlRMU3Vic2NyaXB0aW9uID0gbG9jYWxpemF0aW9uU2VydmljZS5jaGFuZ2VzLnN1YnNjcmliZSgoeyBydGwgfSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBydGwgPyAncnRsJyA6ICdsdHInO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGdldCBwYWxldHRlSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgdGhlIHZhbHVlIG9mIHRoZSBpbml0aWFsbHkgc2VsZWN0ZWQgY29sb3IuXG4gICAgICovXG4gICAgc2V0IHZhbHVlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3ZhbHVlID0gcGFyc2VDb2xvciQxKHZhbHVlLCB0aGlzLmZvcm1hdCk7XG4gICAgfVxuICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgdGhlIG51bWJlciBvZiBjb2x1bW5zIHRoYXQgd2lsbCBiZSBkaXNwbGF5ZWQuXG4gICAgICogRGVmYXVsdHMgdG8gYDEwYC5cbiAgICAgKi9cbiAgICBzZXQgY29sdW1ucyh2YWx1ZSkge1xuICAgICAgICBjb25zdCBtaW5Db2x1bW5zQ291bnQgPSAxO1xuICAgICAgICB0aGlzLl9jb2x1bW5zID0gdmFsdWUgPiBtaW5Db2x1bW5zQ291bnQgPyB2YWx1ZSA6IG1pbkNvbHVtbnNDb3VudDtcbiAgICB9XG4gICAgZ2V0IGNvbHVtbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb2x1bW5zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY29sb3IgcGFsZXR0ZSB0aGF0IHdpbGwgYmUgZGlzcGxheWVkLlxuICAgICAqXG4gICAgICogVGhlIHN1cHBvcnRlZCB2YWx1ZXMgYXJlOlxuICAgICAqICogVGhlIG5hbWUgb2YgdGhlIHByZWRlZmluZWQgcGFsZXR0ZSBwcmVzZXQgKGZvciBleGFtcGxlLCBgb2ZmaWNlYCwgYGJhc2ljYCwgYW5kIGBhcGV4YCkuXG4gICAgICogKiBBIHN0cmluZyB3aXRoIGNvbW1hLXNlcGFyYXRlZCBjb2xvcnMuXG4gICAgICogKiBBIHN0cmluZyBhcnJheS5cbiAgICAgKi9cbiAgICBzZXQgcGFsZXR0ZSh2YWx1ZSkge1xuICAgICAgICBpZiAoIWlzUHJlc2VudCh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHZhbHVlID0gREVGQVVMVF9QUkVTRVQkMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyAmJiBpc1ByZXNlbnQoUEFMRVRURVBSRVNFVFNbdmFsdWVdKSkge1xuICAgICAgICAgICAgdGhpcy5jb2x1bW5zID0gdGhpcy5jb2x1bW5zIHx8IFBBTEVUVEVQUkVTRVRTW3ZhbHVlXS5jb2x1bW5zO1xuICAgICAgICAgICAgdmFsdWUgPSBQQUxFVFRFUFJFU0VUU1t2YWx1ZV0uY29sb3JzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbG9ycyA9ICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSA/IHZhbHVlLnNwbGl0KCcsJykgOiB2YWx1ZTtcbiAgICAgICAgdGhpcy5fcGFsZXR0ZSA9IGNvbG9ycy5tYXAoY29sb3IgPT4gcGFyc2VDb2xvciQxKGNvbG9yLCB0aGlzLmZvcm1hdCwgZmFsc2UpKTtcbiAgICB9XG4gICAgZ2V0IHBhbGV0dGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wYWxldHRlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgdGhlIFt0YWJpbmRleF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9HbG9iYWxfYXR0cmlidXRlcy90YWJpbmRleCkgb2YgdGhlIGNvbXBvbmVudC5cbiAgICAgKi9cbiAgICBzZXQgdGFiaW5kZXgodmFsdWUpIHtcbiAgICAgICAgY29uc3QgdGFiaW5kZXggPSBOdW1iZXIodmFsdWUpO1xuICAgICAgICBjb25zdCBkZWZhdWx0VmFsdWUgPSAwO1xuICAgICAgICB0aGlzLl90YWJpbmRleCA9ICFpc05hTih0YWJpbmRleCkgPyB0YWJpbmRleCA6IGRlZmF1bHRWYWx1ZTtcbiAgICB9XG4gICAgZ2V0IHRhYmluZGV4KCkge1xuICAgICAgICByZXR1cm4gIXRoaXMuZGlzYWJsZWQgPyB0aGlzLl90YWJpbmRleCA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGdldCB0aWxlTGF5b3V0KCkge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMudGlsZVNpemUgIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50aWxlU2l6ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyB3aWR0aDogdGhpcy50aWxlU2l6ZSwgaGVpZ2h0OiB0aGlzLnRpbGVTaXplIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBnZXQgY29sb3JSb3dzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXJ2aWNlLmNvbG9yUm93cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGdldCBob3N0VGFiaW5kZXgoKSB7IHJldHVybiB0aGlzLnRhYmluZGV4OyB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGdldCBkaXNhYmxlZENsYXNzKCkgeyByZXR1cm4gdGhpcy5kaXNhYmxlZDsgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBnZXQgcmVhZG9ubHlBdHRyaWJ1dGUoKSB7IHJldHVybiB0aGlzLnJlYWRvbmx5OyB9XG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbG9yUm93cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRQcmVzZXQgPSAodGhpcy5mb3JtYXQgIT09ICduYW1lJykgPyBERUZBVUxUX1BSRVNFVCQxIDogREVGQVVMVF9BQ0NFU1NJQkxFX1BSRVNFVCQxO1xuICAgICAgICAgICAgdGhpcy5wYWxldHRlID0gdGhpcy5wYWxldHRlIHx8IGRlZmF1bHRQcmVzZXQ7XG4gICAgICAgICAgICB0aGlzLnNldFJvd3MoKTtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNlZENlbGwgPSB0aGlzLnNlcnZpY2UuZ2V0Q2VsbENvb3Jkc0Zvcih0aGlzLnZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgICAgIHRoaXMuc2V0SG9zdEVsZW1lbnRBcmlhTGFiZWwoKTtcbiAgICB9XG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIGlmICh0aGlzLmR5bmFtaWNSVExTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuZHluYW1pY1JUTFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXMpIHtcbiAgICAgICAgaWYgKGNoYW5nZXMucGFsZXR0ZSB8fCBjaGFuZ2VzLmNvbHVtbnMpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Um93cygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjaGFuZ2VzLnBhbGV0dGUgfHwgY2hhbmdlcy52YWx1ZSB8fCBjaGFuZ2VzLmNvbHVtbnMpIHtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNlZENlbGwgPSB0aGlzLnNlcnZpY2UuZ2V0Q2VsbENvb3Jkc0Zvcih0aGlzLnZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMuc2V0SG9zdEVsZW1lbnRBcmlhTGFiZWwoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgaGFuZGxlS2V5ZG93bihldmVudCkge1xuICAgICAgICBjb25zdCBpc1JUTCA9IHRoaXMuZGlyZWN0aW9uID09PSAncnRsJztcbiAgICAgICAgc3dpdGNoIChldmVudC5rZXlDb2RlKSB7XG4gICAgICAgICAgICBjYXNlIEtleXMuQXJyb3dEb3duOlxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2VsbE5hdmlnYXRpb24oMCwgMSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEtleXMuQXJyb3dVcDpcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUNlbGxOYXZpZ2F0aW9uKDAsIC0xKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgS2V5cy5BcnJvd1JpZ2h0OlxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2VsbE5hdmlnYXRpb24oaXNSVEwgPyAtMSA6IDEsIDApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBLZXlzLkFycm93TGVmdDpcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUNlbGxOYXZpZ2F0aW9uKGlzUlRMID8gMSA6IC0xLCAwKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgS2V5cy5FbnRlcjpcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVudGVyKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OiByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGhhbmRsZUhvc3RCbHVyKCkge1xuICAgICAgICB0aGlzLm5vdGlmeU5nVG91Y2hlZCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgaGFuZGxlQ2VsbFNlbGVjdGlvbih2YWx1ZSwgZm9jdXNlZENlbGwpIHtcbiAgICAgICAgaWYgKHRoaXMucmVhZG9ubHkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZvY3VzZWRDZWxsID0gZm9jdXNlZENlbGw7XG4gICAgICAgIGNvbnN0IHBhcnNlZENvbG9yID0gcGFyc2VDb2xvciQxKHZhbHVlLCB0aGlzLmZvcm1hdCwgZmFsc2UpO1xuICAgICAgICB0aGlzLmNlbGxTZWxlY3Rpb24uZW1pdChwYXJzZWRDb2xvcik7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlICE9PSBwYXJzZWRDb2xvcikge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHBhcnNlZENvbG9yO1xuICAgICAgICAgICAgdGhpcy52YWx1ZUNoYW5nZS5lbWl0KHBhcnNlZENvbG9yKTtcbiAgICAgICAgICAgIHRoaXMubm90aWZ5TmdDaGFuZ2VkKHBhcnNlZENvbG9yKTtcbiAgICAgICAgICAgIHRoaXMuc2V0SG9zdEVsZW1lbnRBcmlhTGFiZWwoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb24gIT09IHBhcnNlZENvbG9yKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbiA9IHBhcnNlZENvbG9yO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25DaGFuZ2UuZW1pdChwYXJzZWRDb2xvcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZvY3VzZWRDZWxsKSB7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZUNlbGxJZCA9IGAke3RoaXMuZm9jdXNlZENlbGwucm93fSR7dGhpcy5mb2N1c2VkQ2VsbC5jb2x9YDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgd3JpdGVWYWx1ZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIHRoaXMuZm9jdXNlZENlbGwgPSB0aGlzLnNlcnZpY2UuZ2V0Q2VsbENvb3Jkc0Zvcih0aGlzLnZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHJlZ2lzdGVyT25DaGFuZ2UoZm4pIHtcbiAgICAgICAgdGhpcy5ub3RpZnlOZ0NoYW5nZWQgPSBmbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHJlZ2lzdGVyT25Ub3VjaGVkKGZuKSB7XG4gICAgICAgIHRoaXMubm90aWZ5TmdUb3VjaGVkID0gZm47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzZXREaXNhYmxlZFN0YXRlKGlzRGlzYWJsZWQpIHtcbiAgICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBpc0Rpc2FibGVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICogVXNlZCBieSB0aGUgVGV4dEJveENvbnRhaW5lciB0byBkZXRlcm1pbmUgaWYgdGhlIGNvbXBvbmVudCBpcyBlbXB0eS5cbiAgICAgKi9cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFycyB0aGUgY29sb3IgdmFsdWUgb2YgdGhlIENvbG9yUGFsZXR0ZS5cbiAgICAgKi9cbiAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy5mb2N1c2VkQ2VsbCA9IG51bGw7XG4gICAgICAgIGlmIChpc1ByZXNlbnQodGhpcy52YWx1ZSkpIHtcbiAgICAgICAgICAgIHRoaXMuX3ZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5ub3RpZnlOZ0NoYW5nZWQodW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRSb3dzKCkge1xuICAgICAgICBpZiAoIWlzUHJlc2VudCh0aGlzLnBhbGV0dGUpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb2x1bW5zID0gdGhpcy5jb2x1bW5zIHx8IERFRkFVTFRfQ09MVU1OU19DT1VOVDtcbiAgICAgICAgdGhpcy5zZXJ2aWNlLnNldENvbG9yTWF0cml4KHRoaXMucGFsZXR0ZSwgdGhpcy5jb2x1bW5zKTtcbiAgICB9XG4gICAgaGFuZGxlQ2VsbE5hdmlnYXRpb24oaG9yaXpvbnRhbFN0ZXAsIHZlcnRpY2FsU3RlcCkge1xuICAgICAgICBpZiAodGhpcy5yZWFkb25seSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZm9jdXNlZENlbGwgPSB0aGlzLnNlcnZpY2UuZ2V0TmV4dENlbGwodGhpcy5mb2N1c2VkQ2VsbCwgaG9yaXpvbnRhbFN0ZXAsIHZlcnRpY2FsU3RlcCk7XG4gICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IHRoaXMuc2VydmljZS5nZXRDb2xvckF0KHRoaXMuZm9jdXNlZENlbGwpO1xuICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb24gIT09IHNlbGVjdGlvbikge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24gPSBzZWxlY3Rpb247XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbkNoYW5nZS5lbWl0KHNlbGVjdGlvbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0SG9zdEVsZW1lbnRBcmlhTGFiZWwoKSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlQ29sb3IkMSh0aGlzLnZhbHVlLCB0aGlzLmZvcm1hdCk7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0QXR0cmlidXRlKHRoaXMuaG9zdC5uYXRpdmVFbGVtZW50LCAnYXJpYS1sYWJlbCcsIGAke3RoaXMudmFsdWUgPyBwYXJzZWQgOiB0aGlzLmxvY2FsaXphdGlvblNlcnZpY2UuZ2V0KCdjb2xvclBhbGV0dGVOb0NvbG9yJyl9YCk7XG4gICAgfVxuICAgIGhhbmRsZUVudGVyKCkge1xuICAgICAgICBpZiAoIWlzUHJlc2VudCh0aGlzLmZvY3VzZWRDZWxsKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNlbGVjdGVkQ29sb3IgPSB0aGlzLnNlcnZpY2UuZ2V0Q29sb3JBdCh0aGlzLmZvY3VzZWRDZWxsKTtcbiAgICAgICAgdGhpcy5oYW5kbGVDZWxsU2VsZWN0aW9uKHNlbGVjdGVkQ29sb3IsIHRoaXMuZm9jdXNlZENlbGwpO1xuICAgIH1cbn07XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnYXR0ci5kaXInKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgQ29sb3JQYWxldHRlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXJlY3Rpb25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdhdHRyLmlkJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgQ29sb3JQYWxldHRlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJwYWxldHRlSWRcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBDb2xvclBhbGV0dGVDb21wb25lbnQucHJvdG90eXBlLCBcImlkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBDb2xvclBhbGV0dGVDb21wb25lbnQucHJvdG90eXBlLCBcImZvcm1hdFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW1N0cmluZ10pXG5dLCBDb2xvclBhbGV0dGVDb21wb25lbnQucHJvdG90eXBlLCBcInZhbHVlXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW051bWJlcl0pXG5dLCBDb2xvclBhbGV0dGVDb21wb25lbnQucHJvdG90eXBlLCBcImNvbHVtbnNcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSlcbl0sIENvbG9yUGFsZXR0ZUNvbXBvbmVudC5wcm90b3R5cGUsIFwicGFsZXR0ZVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlciksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtOdW1iZXJdKVxuXSwgQ29sb3JQYWxldHRlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0YWJpbmRleFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBDb2xvclBhbGV0dGVDb21wb25lbnQucHJvdG90eXBlLCBcImRpc2FibGVkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgQ29sb3JQYWxldHRlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJyZWFkb25seVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuXSwgQ29sb3JQYWxldHRlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0aWxlU2l6ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIENvbG9yUGFsZXR0ZUNvbXBvbmVudC5wcm90b3R5cGUsIFwic2VsZWN0aW9uQ2hhbmdlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgQ29sb3JQYWxldHRlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ2YWx1ZUNoYW5nZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIENvbG9yUGFsZXR0ZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiY2VsbFNlbGVjdGlvblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2F0dHIudGFiaW5kZXgnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBDb2xvclBhbGV0dGVDb21wb25lbnQucHJvdG90eXBlLCBcImhvc3RUYWJpbmRleFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLXdpZGdldCcpLFxuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLWNvbG9ycGFsZXR0ZScpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgQ29sb3JQYWxldHRlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJob3N0Q2xhc3Nlc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2F0dHIuYXJpYS1kaXNhYmxlZCcpLFxuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLXN0YXRlLWRpc2FibGVkJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIENvbG9yUGFsZXR0ZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiZGlzYWJsZWRDbGFzc1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdhdHRyLmFyaWEtcmVhZG9ubHknKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgQ29sb3JQYWxldHRlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJyZWFkb25seUF0dHJpYnV0ZVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RMaXN0ZW5lcigna2V5ZG93bicsIFsnJGV2ZW50J10pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBGdW5jdGlvbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnJldHVybnR5cGVcIiwgdm9pZCAwKVxuXSwgQ29sb3JQYWxldHRlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJoYW5kbGVLZXlkb3duXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdExpc3RlbmVyKCdibHVyJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZ1bmN0aW9uKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cmV0dXJudHlwZVwiLCB2b2lkIDApXG5dLCBDb2xvclBhbGV0dGVDb21wb25lbnQucHJvdG90eXBlLCBcImhhbmRsZUhvc3RCbHVyXCIsIG51bGwpO1xuQ29sb3JQYWxldHRlQ29tcG9uZW50ID0gQ29sb3JQYWxldHRlQ29tcG9uZW50XzEgPSBfX2RlY29yYXRlKFtcbiAgICBDb21wb25lbnQoe1xuICAgICAgICBzZWxlY3RvcjogJ2tlbmRvLWNvbG9ycGFsZXR0ZScsXG4gICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG11bHRpOiB0cnVlLFxuICAgICAgICAgICAgICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxuICAgICAgICAgICAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IENvbG9yUGFsZXR0ZUNvbXBvbmVudF8xKSAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lOm5vLWZvcndhcmQtcmVmXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZTogS2VuZG9JbnB1dCxcbiAgICAgICAgICAgICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBDb2xvclBhbGV0dGVDb21wb25lbnRfMSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBDb2xvclBhbGV0dGVTZXJ2aWNlLFxuICAgICAgICAgICAgQ29sb3JQYWxldHRlTG9jYWxpemF0aW9uU2VydmljZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwcm92aWRlOiBMb2NhbGl6YXRpb25TZXJ2aWNlLFxuICAgICAgICAgICAgICAgIHVzZUV4aXN0aW5nOiBDb2xvclBhbGV0dGVMb2NhbGl6YXRpb25TZXJ2aWNlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHByb3ZpZGU6IEwxME5fUFJFRklYLFxuICAgICAgICAgICAgICAgIHVzZVZhbHVlOiAna2VuZG8uY29sb3JwYWxldHRlJ1xuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICB0ZW1wbGF0ZTogYFxuICAgICAgICA8bmctY29udGFpbmVyIGtlbmRvQ29sb3JQYWxldHRlTG9jYWxpemVkTWVzc2FnZXNcbiAgICAgICAgICAgIGkxOG4tY29sb3JQYWxldHRlTm9Db2xvcj1cImtlbmRvLmNvbG9ycGFsZXR0ZS5jb2xvclBhbGV0dGVOb0NvbG9yfFRoZSBhcmlhLWxhYmVsIGFwcGxpZWQgdG8gdGhlIENvbG9yUGFsZXR0ZSBjb21wb25lbnQgd2hlbiB0aGUgdmFsdWUgaXMgZW1wdHkuXCJcbiAgICAgICAgICAgIGNvbG9yUGFsZXR0ZU5vQ29sb3I9XCJDb2xvcnBhbGV0dGUgbm8gY29sb3IgY2hvc2VuXCI+XG4gICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICA8ZGl2IHJvbGU9XCJsaXN0Ym94XCJcbiAgICAgICAgICAgIFthdHRyLmFyaWEtYWN0aXZlZGVzY2VuZGFudF09XCJhY3RpdmVDZWxsSWRcIj5cbiAgICAgICAgICAgIDx0YWJsZSBjbGFzcz1cImstcGFsZXR0ZSBrLXJlc2V0XCI+XG4gICAgICAgICAgICAgICAgPHRib2R5PlxuICAgICAgICAgICAgICAgICAgICA8dHIgKm5nRm9yPVwibGV0IHJvdyBvZiBjb2xvclJvd3M7IGxldCByb3dJbmRleCA9IGluZGV4XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQgKm5nRm9yPVwibGV0IGNvbG9yIG9mIHJvdzsgbGV0IGNvbEluZGV4ID0gaW5kZXhcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU9XCJvcHRpb25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtjbGFzcy5rLXN0YXRlLXNlbGVjdGVkXT1cImZvY3VzZWRDZWxsPy5yb3cgPT09IHJvd0luZGV4ICYmIGZvY3VzZWRDZWxsPy5jb2wgPT09IGNvbEluZGV4XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbYXR0ci5hcmlhLXNlbGVjdGVkXT1cImZvY3VzZWRDZWxsPy5yb3cgPT09IHJvd0luZGV4ICYmIGZvY3VzZWRDZWxsPy5jb2wgPT09IGNvbEluZGV4XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbYXR0ci5hcmlhLWxhYmVsXT1cImNvbG9yXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImstaXRlbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW2lkXT1cInJvd0luZGV4ICsgJycgKyBjb2xJbmRleFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW2F0dHIudmFsdWVdPVwiY29sb3JcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChjbGljayk9XCJoYW5kbGVDZWxsU2VsZWN0aW9uKGNvbG9yLCB7IHJvdzogcm93SW5kZXgsIGNvbDogY29sSW5kZXggfSlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtuZ1N0eWxlXT1cIntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBjb2xvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHRpbGVMYXlvdXQud2lkdGggKyAncHgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHRpbGVMYXlvdXQuaGVpZ2h0ICsgJ3B4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluV2lkdGg6IHRpbGVMYXlvdXQud2lkdGggKyAncHgnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgPC9kaXY+XG4gICAgYFxuICAgIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbRWxlbWVudFJlZixcbiAgICAgICAgQ29sb3JQYWxldHRlU2VydmljZSxcbiAgICAgICAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgICAgIFJlbmRlcmVyMixcbiAgICAgICAgTG9jYWxpemF0aW9uU2VydmljZV0pXG5dLCBDb2xvclBhbGV0dGVDb21wb25lbnQpO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY2xhc3MgQ29sb3JQaWNrZXJNZXNzYWdlcyBleHRlbmRzIENvbXBvbmVudE1lc3NhZ2VzIHtcbn1cbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIENvbG9yUGlja2VyTWVzc2FnZXMucHJvdG90eXBlLCBcImNvbG9yUGFsZXR0ZU5vQ29sb3JcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIENvbG9yUGlja2VyTWVzc2FnZXMucHJvdG90eXBlLCBcImNvbG9yR3JhZGllbnROb0NvbG9yXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBDb2xvclBpY2tlck1lc3NhZ2VzLnByb3RvdHlwZSwgXCJjb2xvckdyYWRpZW50SGFuZGxlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBDb2xvclBpY2tlck1lc3NhZ2VzLnByb3RvdHlwZSwgXCJjbGVhckJ1dHRvblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgQ29sb3JQaWNrZXJNZXNzYWdlcy5wcm90b3R5cGUsIFwiaHVlU2xpZGVySGFuZGxlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBDb2xvclBpY2tlck1lc3NhZ2VzLnByb3RvdHlwZSwgXCJvcGFjaXR5U2xpZGVySGFuZGxlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBDb2xvclBpY2tlck1lc3NhZ2VzLnByb3RvdHlwZSwgXCJoZXhJbnB1dFBsYWNlaG9sZGVyXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBDb2xvclBpY2tlck1lc3NhZ2VzLnByb3RvdHlwZSwgXCJyZWRJbnB1dFBsYWNlaG9sZGVyXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBDb2xvclBpY2tlck1lc3NhZ2VzLnByb3RvdHlwZSwgXCJncmVlbklucHV0UGxhY2Vob2xkZXJcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIENvbG9yUGlja2VyTWVzc2FnZXMucHJvdG90eXBlLCBcImJsdWVJbnB1dFBsYWNlaG9sZGVyXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBDb2xvclBpY2tlck1lc3NhZ2VzLnByb3RvdHlwZSwgXCJhbHBoYUlucHV0UGxhY2Vob2xkZXJcIiwgdm9pZCAwKTtcblxudmFyIENvbG9yUGlja2VyQ3VzdG9tTWVzc2FnZXNDb21wb25lbnRfMTtcbi8qKlxuICogQ3VzdG9tIGNvbXBvbmVudCBtZXNzYWdlcyBvdmVycmlkZSBkZWZhdWx0IGNvbXBvbmVudCBtZXNzYWdlcy5cbiAqL1xubGV0IENvbG9yUGlja2VyQ3VzdG9tTWVzc2FnZXNDb21wb25lbnQgPSBDb2xvclBpY2tlckN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50XzEgPSBjbGFzcyBDb2xvclBpY2tlckN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50IGV4dGVuZHMgQ29sb3JQaWNrZXJNZXNzYWdlcyB7XG4gICAgY29uc3RydWN0b3Ioc2VydmljZSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnNlcnZpY2UgPSBzZXJ2aWNlO1xuICAgIH1cbiAgICBnZXQgb3ZlcnJpZGUoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn07XG5Db2xvclBpY2tlckN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50ID0gQ29sb3JQaWNrZXJDdXN0b21NZXNzYWdlc0NvbXBvbmVudF8xID0gX19kZWNvcmF0ZShbXG4gICAgQ29tcG9uZW50KHtcbiAgICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZTogQ29sb3JQaWNrZXJNZXNzYWdlcyxcbiAgICAgICAgICAgICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBDb2xvclBpY2tlckN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50XzEpIC8vIHRzbGludDpkaXNhYmxlLWxpbmU6bm8tZm9yd2FyZC1yZWZcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgc2VsZWN0b3I6ICdrZW5kby1jb2xvcnBpY2tlci1tZXNzYWdlcywga2VuZG8tY29sb3JncmFkaWVudC1tZXNzYWdlcywga2VuZG8tY29sb3JwYWxldHRlLW1lc3NhZ2VzJyxcbiAgICAgICAgdGVtcGxhdGU6IGBgXG4gICAgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtMb2NhbGl6YXRpb25TZXJ2aWNlXSlcbl0sIENvbG9yUGlja2VyQ3VzdG9tTWVzc2FnZXNDb21wb25lbnQpO1xuXG52YXIgTG9jYWxpemVkQ29sb3JQaWNrZXJNZXNzYWdlc0RpcmVjdGl2ZV8xO1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmxldCBMb2NhbGl6ZWRDb2xvclBpY2tlck1lc3NhZ2VzRGlyZWN0aXZlID0gTG9jYWxpemVkQ29sb3JQaWNrZXJNZXNzYWdlc0RpcmVjdGl2ZV8xID0gY2xhc3MgTG9jYWxpemVkQ29sb3JQaWNrZXJNZXNzYWdlc0RpcmVjdGl2ZSBleHRlbmRzIENvbG9yUGlja2VyTWVzc2FnZXMge1xuICAgIGNvbnN0cnVjdG9yKHNlcnZpY2UpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5zZXJ2aWNlID0gc2VydmljZTtcbiAgICB9XG59O1xuTG9jYWxpemVkQ29sb3JQaWNrZXJNZXNzYWdlc0RpcmVjdGl2ZSA9IExvY2FsaXplZENvbG9yUGlja2VyTWVzc2FnZXNEaXJlY3RpdmVfMSA9IF9fZGVjb3JhdGUoW1xuICAgIERpcmVjdGl2ZSh7XG4gICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHByb3ZpZGU6IENvbG9yUGlja2VyTWVzc2FnZXMsXG4gICAgICAgICAgICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gTG9jYWxpemVkQ29sb3JQaWNrZXJNZXNzYWdlc0RpcmVjdGl2ZV8xKSAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lOm5vLWZvcndhcmQtcmVmXG4gICAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIHNlbGVjdG9yOiAnW2tlbmRvQ29sb3JQaWNrZXJMb2NhbGl6ZWRNZXNzYWdlc10sIFtrZW5kb0NvbG9yR3JhZGllbnRMb2NhbGl6ZWRNZXNzYWdlc10sIFtrZW5kb0NvbG9yUGFsZXR0ZUxvY2FsaXplZE1lc3NhZ2VzXSdcbiAgICB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0xvY2FsaXphdGlvblNlcnZpY2VdKVxuXSwgTG9jYWxpemVkQ29sb3JQaWNrZXJNZXNzYWdlc0RpcmVjdGl2ZSk7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5sZXQgRm9jdXNPbkRvbVJlYWR5RGlyZWN0aXZlID0gY2xhc3MgRm9jdXNPbkRvbVJlYWR5RGlyZWN0aXZlIHtcbiAgICBjb25zdHJ1Y3Rvcihob3N0LCBuZ1pvbmUpIHtcbiAgICAgICAgdGhpcy5ob3N0ID0gaG9zdDtcbiAgICAgICAgdGhpcy5uZ1pvbmUgPSBuZ1pvbmU7XG4gICAgfVxuICAgIG5nQWZ0ZXJDb250ZW50SW5pdCgpIHtcbiAgICAgICAgdGhpcy5mb2N1c09uTmV4dFRpY2soKTtcbiAgICB9XG4gICAgZm9jdXNPbk5leHRUaWNrKCkge1xuICAgICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiBzZXRUaW1lb3V0KCgpID0+IHRoaXMuaG9zdC5uYXRpdmVFbGVtZW50LmZvY3VzKCkpKTtcbiAgICB9XG59O1xuRm9jdXNPbkRvbVJlYWR5RGlyZWN0aXZlID0gX19kZWNvcmF0ZShbXG4gICAgRGlyZWN0aXZlKHtcbiAgICAgICAgc2VsZWN0b3I6ICdba2VuZG9Gb2N1c09uRG9tUmVhZHldJ1xuICAgIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbRWxlbWVudFJlZixcbiAgICAgICAgTmdab25lXSlcbl0sIEZvY3VzT25Eb21SZWFkeURpcmVjdGl2ZSk7XG5cbmNvbnN0IFBVQkxJQ19ESVJFQ1RJVkVTID0gW1xuICAgIENvbG9yUGlja2VyQ29tcG9uZW50LFxuICAgIENvbG9yUGFsZXR0ZUNvbXBvbmVudCxcbiAgICBDb2xvckdyYWRpZW50Q29tcG9uZW50LFxuICAgIExvY2FsaXplZENvbG9yUGlja2VyTWVzc2FnZXNEaXJlY3RpdmUsXG4gICAgQ29sb3JQaWNrZXJDdXN0b21NZXNzYWdlc0NvbXBvbmVudFxuXTtcbmNvbnN0IElOVEVSTkFMX0RJUkVDVElWRVMgPSBbXG4gICAgQ29sb3JJbnB1dENvbXBvbmVudCxcbiAgICBGb2N1c09uRG9tUmVhZHlEaXJlY3RpdmVcbl07XG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIFtOZ01vZHVsZV0oe3sgc2l0ZS5kYXRhLnVybHMuYW5ndWxhclsnbmdtb2R1bGVhcGknXSB9fSlcbiAqIGRlZmluaXRpb24gZm9yIHRoZSBDb2xvclBpY2tlci5cbiAqL1xubGV0IENvbG9yUGlja2VyTW9kdWxlID0gY2xhc3MgQ29sb3JQaWNrZXJNb2R1bGUge1xufTtcbkNvbG9yUGlja2VyTW9kdWxlID0gX19kZWNvcmF0ZShbXG4gICAgTmdNb2R1bGUoe1xuICAgICAgICBkZWNsYXJhdGlvbnM6IFtcbiAgICAgICAgICAgIFBVQkxJQ19ESVJFQ1RJVkVTLFxuICAgICAgICAgICAgSU5URVJOQUxfRElSRUNUSVZFU1xuICAgICAgICBdLFxuICAgICAgICBleHBvcnRzOiBbUFVCTElDX0RJUkVDVElWRVNdLFxuICAgICAgICBpbXBvcnRzOiBbXG4gICAgICAgICAgICBTbGlkZXJNb2R1bGUsXG4gICAgICAgICAgICBOdW1lcmljVGV4dEJveE1vZHVsZSxcbiAgICAgICAgICAgIENvbW1vbk1vZHVsZSxcbiAgICAgICAgICAgIFBvcHVwTW9kdWxlLFxuICAgICAgICAgICAgRHJhZ2dhYmxlTW9kdWxlXG4gICAgICAgIF1cbiAgICB9KVxuXSwgQ29sb3JQaWNrZXJNb2R1bGUpO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIGRpcmVjdGl2ZSB0aGF0IHJlbmRlcnMgdGhlIFtLZW5kbyBVSSBDaGVja0JveF0oeyUgc2x1ZyBvdmVydmlld19jaGVja2JveCAlfSkgaW5wdXQgY29tcG9uZW50LlxuICogVGhlIGRpcmVjdGl2ZSBpcyBwbGFjZWQgb24gaW5wdXQgdHlwZT1cImNoZWNrYm94XCIgZWxlbWVudHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzLW5vLXJ1blxuICogPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGtlbmRvQ2hlY2tCb3ggLz5cbiAqIGBgYFxuICovXG5sZXQgQ2hlY2tCb3hEaXJlY3RpdmUgPSBjbGFzcyBDaGVja0JveERpcmVjdGl2ZSB7XG4gICAgLyoqXG4gICAgICogUmVwcmVzZW50cyB0aGUgZGlyZWN0aXZlIHRoYXQgcmVuZGVycyB0aGUgW0tlbmRvIFVJIENoZWNrQm94XSh7JSBzbHVnIG92ZXJ2aWV3X2NoZWNrYm94ICV9KSBpbnB1dCBjb21wb25lbnQuXG4gICAgICogVGhlIGRpcmVjdGl2ZSBpcyBwbGFjZWQgb24gaW5wdXQgdHlwZT1cImNoZWNrYm94XCIgZWxlbWVudHMuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYHRzLW5vLXJ1blxuICAgICAqIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBrZW5kb0NoZWNrQm94IC8+XG4gICAgICogYGBgXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMua2VuZG9DbGFzcyA9IHRydWU7XG4gICAgfVxufTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLWNoZWNrYm94JyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBDaGVja0JveERpcmVjdGl2ZS5wcm90b3R5cGUsIFwia2VuZG9DbGFzc1wiLCB2b2lkIDApO1xuQ2hlY2tCb3hEaXJlY3RpdmUgPSBfX2RlY29yYXRlKFtcbiAgICBEaXJlY3RpdmUoe1xuICAgICAgICBzZWxlY3RvcjogJ2lucHV0W2tlbmRvQ2hlY2tCb3hdJ1xuICAgIH0pXG5dLCBDaGVja0JveERpcmVjdGl2ZSk7XG5cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgW05nTW9kdWxlXSh7eyBzaXRlLmRhdGEudXJscy5hbmd1bGFyWyduZ21vZHVsZWFwaSddIH19KVxuICogZGVmaW5pdGlvbiBmb3IgdGhlIENoZWNrQm94IGRpcmVjdGl2ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIGBgYHRzLW5vLXJ1blxuICogLy8gSW1wb3J0IHRoZSBDaGVja0JveCBtb2R1bGVcbiAqIGltcG9ydCB7IENoZWNrQm94TW9kdWxlIH0gZnJvbSAnQHByb2dyZXNzL2tlbmRvLWFuZ3VsYXItaW5wdXRzJztcbiAqXG4gKiAvLyBUaGUgYnJvd3NlciBwbGF0Zm9ybSB3aXRoIGEgY29tcGlsZXJcbiAqIGltcG9ydCB7IHBsYXRmb3JtQnJvd3NlckR5bmFtaWMgfSBmcm9tICdAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyLWR5bmFtaWMnO1xuICpcbiAqIGltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG4gKlxuICogLy8gSW1wb3J0IHRoZSBhcHAgY29tcG9uZW50XG4gKiBpbXBvcnQgeyBBcHBDb21wb25lbnQgfSBmcm9tICcuL2FwcC5jb21wb25lbnQnO1xuICpcbiAqIC8vIERlZmluZSB0aGUgYXBwIG1vZHVsZVxuICogX0BOZ01vZHVsZSh7XG4gKiAgICAgZGVjbGFyYXRpb25zOiBbQXBwQ29tcG9uZW50XSwgLy8gZGVjbGFyZSBhcHAgY29tcG9uZW50XG4gKiAgICAgaW1wb3J0czogICAgICBbQnJvd3Nlck1vZHVsZSwgQ2hlY2tCb3hNb2R1bGVdLCAvLyBpbXBvcnQgQ2hlY2tCb3ggbW9kdWxlXG4gKiAgICAgYm9vdHN0cmFwOiAgICBbQXBwQ29tcG9uZW50XVxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBBcHBNb2R1bGUge31cbiAqXG4gKiAvLyBDb21waWxlIGFuZCBsYXVuY2ggdGhlIG1vZHVsZVxuICogcGxhdGZvcm1Ccm93c2VyRHluYW1pYygpLmJvb3RzdHJhcE1vZHVsZShBcHBNb2R1bGUpO1xuICpcbiAqIGBgYFxuICovXG5sZXQgQ2hlY2tCb3hNb2R1bGUgPSBjbGFzcyBDaGVja0JveE1vZHVsZSB7XG59O1xuQ2hlY2tCb3hNb2R1bGUgPSBfX2RlY29yYXRlKFtcbiAgICBOZ01vZHVsZSh7XG4gICAgICAgIGRlY2xhcmF0aW9uczogW0NoZWNrQm94RGlyZWN0aXZlXSxcbiAgICAgICAgZXhwb3J0czogW0NoZWNrQm94RGlyZWN0aXZlXSxcbiAgICAgICAgaW1wb3J0czogW0NvbW1vbk1vZHVsZV1cbiAgICB9KVxuXSwgQ2hlY2tCb3hNb2R1bGUpO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIGRpcmVjdGl2ZSB0aGF0IHJlbmRlcnMgdGhlIFtLZW5kbyBVSSBSYWRpb0J1dHRvbl0oeyUgc2x1ZyBvdmVydmlld19jaGVja2JveCAlfSkgaW5wdXQgY29tcG9uZW50LlxuICogVGhlIGRpcmVjdGl2ZSBpcyBwbGFjZWQgb24gaW5wdXQgdHlwZT1cInJhZGlvXCIgZWxlbWVudHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzLW5vLXJ1blxuICogPGlucHV0IHR5cGU9XCJyYWRpb1wiIGtlbmRvUmFkaW9CdXR0b24gLz5cbiAqIGBgYFxuICovXG5sZXQgUmFkaW9CdXR0b25EaXJlY3RpdmUgPSBjbGFzcyBSYWRpb0J1dHRvbkRpcmVjdGl2ZSB7XG4gICAgLyoqXG4gICAgICogUmVwcmVzZW50cyB0aGUgZGlyZWN0aXZlIHRoYXQgcmVuZGVycyB0aGUgW0tlbmRvIFVJIFJhZGlvQnV0dG9uXSh7JSBzbHVnIG92ZXJ2aWV3X2NoZWNrYm94ICV9KSBpbnB1dCBjb21wb25lbnQuXG4gICAgICogVGhlIGRpcmVjdGl2ZSBpcyBwbGFjZWQgb24gaW5wdXQgdHlwZT1cInJhZGlvXCIgZWxlbWVudHMuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYHRzLW5vLXJ1blxuICAgICAqIDxpbnB1dCB0eXBlPVwicmFkaW9cIiBrZW5kb1JhZGlvQnV0dG9uIC8+XG4gICAgICogYGBgXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMua2VuZG9DbGFzcyA9IHRydWU7XG4gICAgfVxufTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLXJhZGlvJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBSYWRpb0J1dHRvbkRpcmVjdGl2ZS5wcm90b3R5cGUsIFwia2VuZG9DbGFzc1wiLCB2b2lkIDApO1xuUmFkaW9CdXR0b25EaXJlY3RpdmUgPSBfX2RlY29yYXRlKFtcbiAgICBEaXJlY3RpdmUoe1xuICAgICAgICBzZWxlY3RvcjogJ2lucHV0W2tlbmRvUmFkaW9CdXR0b25dJ1xuICAgIH0pXG5dLCBSYWRpb0J1dHRvbkRpcmVjdGl2ZSk7XG5cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgW05nTW9kdWxlXSh7eyBzaXRlLmRhdGEudXJscy5hbmd1bGFyWyduZ21vZHVsZWFwaSddIH19KVxuICogZGVmaW5pdGlvbiBmb3IgdGhlIFJhZGlvQnV0dG9uIGRpcmVjdGl2ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIGBgYHRzLW5vLXJ1blxuICogLy8gSW1wb3J0IHRoZSBSYWRpb0J1dHRvbiBtb2R1bGVcbiAqIGltcG9ydCB7IFJhZGlvQnV0dG9uTW9kdWxlIH0gZnJvbSAnQHByb2dyZXNzL2tlbmRvLWFuZ3VsYXItaW5wdXRzJztcbiAqXG4gKiAvLyBUaGUgYnJvd3NlciBwbGF0Zm9ybSB3aXRoIGEgY29tcGlsZXJcbiAqIGltcG9ydCB7IHBsYXRmb3JtQnJvd3NlckR5bmFtaWMgfSBmcm9tICdAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyLWR5bmFtaWMnO1xuICpcbiAqIGltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG4gKlxuICogLy8gSW1wb3J0IHRoZSBhcHAgY29tcG9uZW50XG4gKiBpbXBvcnQgeyBBcHBDb21wb25lbnQgfSBmcm9tICcuL2FwcC5jb21wb25lbnQnO1xuICpcbiAqIC8vIERlZmluZSB0aGUgYXBwIG1vZHVsZVxuICogX0BOZ01vZHVsZSh7XG4gKiAgICAgZGVjbGFyYXRpb25zOiBbQXBwQ29tcG9uZW50XSwgLy8gZGVjbGFyZSBhcHAgY29tcG9uZW50XG4gKiAgICAgaW1wb3J0czogICAgICBbQnJvd3Nlck1vZHVsZSwgUmFkaW9CdXR0b25Nb2R1bGVdLCAvLyBpbXBvcnQgUmFkaW9CdXR0b24gbW9kdWxlXG4gKiAgICAgYm9vdHN0cmFwOiAgICBbQXBwQ29tcG9uZW50XVxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBBcHBNb2R1bGUge31cbiAqXG4gKiAvLyBDb21waWxlIGFuZCBsYXVuY2ggdGhlIG1vZHVsZVxuICogcGxhdGZvcm1Ccm93c2VyRHluYW1pYygpLmJvb3RzdHJhcE1vZHVsZShBcHBNb2R1bGUpO1xuICpcbiAqIGBgYFxuICovXG5sZXQgUmFkaW9CdXR0b25Nb2R1bGUgPSBjbGFzcyBSYWRpb0J1dHRvbk1vZHVsZSB7XG59O1xuUmFkaW9CdXR0b25Nb2R1bGUgPSBfX2RlY29yYXRlKFtcbiAgICBOZ01vZHVsZSh7XG4gICAgICAgIGRlY2xhcmF0aW9uczogW1JhZGlvQnV0dG9uRGlyZWN0aXZlXSxcbiAgICAgICAgZXhwb3J0czogW1JhZGlvQnV0dG9uRGlyZWN0aXZlXSxcbiAgICAgICAgaW1wb3J0czogW0NvbW1vbk1vZHVsZV1cbiAgICB9KVxuXSwgUmFkaW9CdXR0b25Nb2R1bGUpO1xuXG5sZXQgc2VyaWFsJDMgPSAwO1xuLyoqXG4gKiBSZXByZXNlbnRzIGFuIGVycm9yIG1lc3NhZ2UgdGhhdCB3aWxsIGJlIHNob3duIHVuZGVybmVhdGhcbiAqIGEgS2VuZG8gY29udHJvbCBvciBuYXRpdmUgSFRNTCBmb3JtLWJvdW5kIGNvbXBvbmVudCBhZnRlciBhIHZhbGlkYXRpb24uXG4gKi9cbmxldCBFcnJvckNvbXBvbmVudCA9IGNsYXNzIEVycm9yQ29tcG9uZW50IHtcbiAgICAvKipcbiAgICAgKiBSZXByZXNlbnRzIGFuIGVycm9yIG1lc3NhZ2UgdGhhdCB3aWxsIGJlIHNob3duIHVuZGVybmVhdGhcbiAgICAgKiBhIEtlbmRvIGNvbnRyb2wgb3IgbmF0aXZlIEhUTUwgZm9ybS1ib3VuZCBjb21wb25lbnQgYWZ0ZXIgYSB2YWxpZGF0aW9uLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmhvc3RDbGFzcyA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgdGhlIGFsaWdubWVudCBvZiB0aGUgRXJyb3IgbWVzc2FnZS5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlIHBvc3NpYmxlIHZhbHVlcyBhcmU6XG4gICAgICAgICAqICogKERlZmF1bHQpIGBzdGFydGBcbiAgICAgICAgICogKiBgZW5kYFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hbGlnbiA9ICdzdGFydCc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmlkID0gYGtlbmRvLWVycm9yLSR7c2VyaWFsJDMrK31gO1xuICAgICAgICB0aGlzLnJvbGVBdHRyaWJ1dGUgPSAnYWxlcnQnO1xuICAgIH1cbiAgICBnZXQgc3RhcnRDbGFzcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWxpZ24gPT09ICdzdGFydCc7XG4gICAgfVxuICAgIGdldCBlbmRDbGFzcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWxpZ24gPT09ICdlbmQnO1xuICAgIH1cbiAgICBnZXQgaWRBdHRyaWJ1dGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlkO1xuICAgIH1cbn07XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay1mb3JtLWVycm9yJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBFcnJvckNvbXBvbmVudC5wcm90b3R5cGUsIFwiaG9zdENsYXNzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBFcnJvckNvbXBvbmVudC5wcm90b3R5cGUsIFwiYWxpZ25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdhdHRyLnJvbGUnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgRXJyb3JDb21wb25lbnQucHJvdG90eXBlLCBcInJvbGVBdHRyaWJ1dGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLXRleHQtc3RhcnQnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgRXJyb3JDb21wb25lbnQucHJvdG90eXBlLCBcInN0YXJ0Q2xhc3NcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay10ZXh0LWVuZCcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBFcnJvckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZW5kQ2xhc3NcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnYXR0ci5pZCcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIEVycm9yQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpZEF0dHJpYnV0ZVwiLCBudWxsKTtcbkVycm9yQ29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgQ29tcG9uZW50KHtcbiAgICAgICAgc2VsZWN0b3I6ICdrZW5kby1mb3JtZXJyb3InLFxuICAgICAgICB0ZW1wbGF0ZTogYFxuICAgICAgICA8bmctY29udGVudD48L25nLWNvbnRlbnQ+XG4gICAgYFxuICAgIH0pXG5dLCBFcnJvckNvbXBvbmVudCk7XG5cbmxldCBzZXJpYWwkNCA9IDA7XG4vKipcbiAqIFJlcHJlc2VudHMgYSBoaW50IG1lc3NhZ2UgdGhhdCB3aWxsIGJlIHNob3duIHVuZGVybmVhdGggYSBmb3JtLWJvdW5kIGNvbXBvbmVudC5cbiAqL1xubGV0IEhpbnRDb21wb25lbnQgPSBjbGFzcyBIaW50Q29tcG9uZW50IHtcbiAgICAvKipcbiAgICAgKiBSZXByZXNlbnRzIGEgaGludCBtZXNzYWdlIHRoYXQgd2lsbCBiZSBzaG93biB1bmRlcm5lYXRoIGEgZm9ybS1ib3VuZCBjb21wb25lbnQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgdGhlIGFsaWdubWVudCBvZiB0aGUgSGludCBtZXNzYWdlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGUgcG9zc2libGUgdmFsdWVzIGFyZTpcbiAgICAgICAgICogKiAoRGVmYXVsdCkgYHN0YXJ0YFxuICAgICAgICAgKiAqIGBlbmRgXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmFsaWduID0gJ3N0YXJ0JztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBoaWRkZW5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaWQgPSBga2VuZG8taGludC0ke3NlcmlhbCQ0Kyt9YDtcbiAgICAgICAgdGhpcy5ob3N0Q2xhc3MgPSB0cnVlO1xuICAgIH1cbiAgICBnZXQgc3RhcnRDbGFzcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWxpZ24gPT09ICdzdGFydCc7XG4gICAgfVxuICAgIGdldCBlbmRDbGFzcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWxpZ24gPT09ICdlbmQnO1xuICAgIH1cbiAgICBnZXQgaWRBdHRyaWJ1dGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlkO1xuICAgIH1cbn07XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBIaW50Q29tcG9uZW50LnByb3RvdHlwZSwgXCJhbGlnblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmstZm9ybS1oaW50JyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBIaW50Q29tcG9uZW50LnByb3RvdHlwZSwgXCJob3N0Q2xhc3NcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLXRleHQtc3RhcnQnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgSGludENvbXBvbmVudC5wcm90b3R5cGUsIFwic3RhcnRDbGFzc1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLXRleHQtZW5kJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIEhpbnRDb21wb25lbnQucHJvdG90eXBlLCBcImVuZENsYXNzXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2F0dHIuaWQnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBIaW50Q29tcG9uZW50LnByb3RvdHlwZSwgXCJpZEF0dHJpYnV0ZVwiLCBudWxsKTtcbkhpbnRDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICBDb21wb25lbnQoe1xuICAgICAgICBzZWxlY3RvcjogJ2tlbmRvLWZvcm1oaW50JyxcbiAgICAgICAgdGVtcGxhdGU6IGBcbiAgICAgICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxuICAgIGBcbiAgICB9KVxuXSwgSGludENvbXBvbmVudCk7XG5cbi8qKlxuICogU3BlY2lmaWVzIGEgY29udGFpbmVyIGZvciBmb3JtLWJvdW5kIGNvbnRyb2xzIChLZW5kbyBjb250cm9scyBvciBuYXRpdmUgSFRNTCBjb250cm9scykuXG4gKiBBcHBsaWVzIHN0eWxpbmcgYW5kIGJlaGF2aW9yIHJ1bGVzLlxuICovXG5sZXQgRm9ybUZpZWxkQ29tcG9uZW50ID0gY2xhc3MgRm9ybUZpZWxkQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihyZW5kZXJlciwgbG9jYWxpemF0aW9uU2VydmljZSwgaG9zdEVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLmxvY2FsaXphdGlvblNlcnZpY2UgPSBsb2NhbGl6YXRpb25TZXJ2aWNlO1xuICAgICAgICB0aGlzLmhvc3RFbGVtZW50ID0gaG9zdEVsZW1lbnQ7XG4gICAgICAgIHRoaXMuaG9zdENsYXNzID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIFNwZWNpZmllcyB3aGVuIHRoZSBIaW50IG1lc3NhZ2VzIHdpbGwgYmUgc2hvd24uXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSBwb3NzaWJsZSB2YWx1ZXMgYXJlOlxuICAgICAgICAgKlxuICAgICAgICAgKiAqIChEZWZhdWx0KSBgaW5pdGlhbGAmbWRhc2g7QWxsb3dzIGRpc3BsYXlpbmcgaGludHMgd2hlbiB0aGUgZm9ybS1ib3VuZCBjb21wb25lbnQgc3RhdGUgaXNcbiAgICAgICAgICogYHZhbGlkYCBvciBgdW50b3VjaGVkYCBhbmQgYHByaXN0aW5lYC5cbiAgICAgICAgICogKiBgYWx3YXlzYCZtZGFzaDtBbGxvd3MgZnVsbCBjb250cm9sIG92ZXIgdGhlIHZpc2liaWxpdHkgb2YgdGhlIGhpbnRzLlxuICAgICAgICAgKlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zaG93SGludHMgPSAnaW5pdGlhbCc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgdGhlIGxheW91dCBvcmllbnRhdGlvbiBvZiB0aGUgZm9ybSBmaWVsZC5cbiAgICAgICAgICpcbiAgICAgICAgICogKiBUaGUgcG9zc2libGUgdmFsdWVzIGFyZTpcbiAgICAgICAgICpcbiAgICAgICAgICogKiAoRGVmYXVsdCkgYHZlcnRpY2FsYFxuICAgICAgICAgKiAqIGBob3Jpem9udGFsYFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vcmllbnRhdGlvbiA9ICd2ZXJ0aWNhbCc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgd2hlbiB0aGUgRXJyb3IgbWVzc2FnZXMgd2lsbCBiZSBzaG93bi5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlIHBvc3NpYmxlIHZhbHVlcyBhcmU6XG4gICAgICAgICAqXG4gICAgICAgICAqICogKERlZmF1bHQpIGBpbml0aWFsYCZtZGFzaDtBbGxvd3MgZGlzcGxheWluZyBlcnJvcnMgd2hlbiB0aGUgZm9ybS1ib3VuZCBjb21wb25lbnQgc3RhdGUgaXNcbiAgICAgICAgICogYGludmFsaWRgIGFuZCBgdG91Y2hlZGAgb3IgYGRpcnR5YC5cbiAgICAgICAgICogKiBgYWx3YXlzYCZtZGFzaDtBbGxvd3MgZnVsbCBjb250cm9sIG92ZXIgdGhlIHZpc2liaWxpdHkgb2YgdGhlIGVycm9ycy5cbiAgICAgICAgICpcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2hvd0Vycm9ycyA9ICdpbml0aWFsJztcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gbmV3IFN1YnNjcmlwdGlvbigpO1xuICAgICAgICB0aGlzLnJ0bCA9IGZhbHNlO1xuICAgICAgICB2YWxpZGF0ZVBhY2thZ2UocGFja2FnZU1ldGFkYXRhKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmFkZCh0aGlzLmxvY2FsaXphdGlvblNlcnZpY2UuY2hhbmdlcy5zdWJzY3JpYmUoKHsgcnRsIH0pID0+IHtcbiAgICAgICAgICAgIHRoaXMucnRsID0gcnRsO1xuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSB0aGlzLnJ0bCA/ICdydGwnIDogJ2x0cic7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0IGVycm9yQ2xhc3MoKSB7XG4gICAgICAgIGlmICghdGhpcy5jb250cm9sKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuY29udHJvbC5pbnZhbGlkICYmICh0aGlzLmNvbnRyb2wudG91Y2hlZCB8fCB0aGlzLmNvbnRyb2wuZGlydHkpO1xuICAgIH1cbiAgICBnZXQgZGlzYWJsZWRDbGFzcygpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRyb2wpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAvLyByYWRpb2J1dHRvbiBncm91cFxuICAgICAgICBpZiAodGhpcy5pc1JhZGlvQ29udHJvbCh0aGlzLmNvbnRyb2wpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzYWJsZWRDb250cm9sKCkgfHxcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZWRFbGVtZW50KCkgfHxcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZWRLZW5kb0lucHV0KCk7XG4gICAgfVxuICAgIHNldCBmb3JtQ29udHJvbHMoZm9ybUNvbnRyb2xzKSB7XG4gICAgICAgIHRoaXMudmFsaWRhdGVGb3JtQ29udHJvbChmb3JtQ29udHJvbHMpO1xuICAgICAgICB0aGlzLmNvbnRyb2wgPSBmb3JtQ29udHJvbHMuZmlyc3Q7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBnZXQgaG9yaXpvbnRhbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3JpZW50YXRpb24gPT09ICdob3Jpem9udGFsJztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGdldCBoYXNIaW50cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hvd0hpbnRzID09PSAnYWx3YXlzJyA/IHRydWUgOiB0aGlzLnNob3dIaW50c0luaXRpYWwoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGdldCBoYXNFcnJvcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNob3dFcnJvcnMgPT09ICdhbHdheXMnID8gdHJ1ZSA6IHRoaXMuc2hvd0Vycm9yc0luaXRpYWwoKTtcbiAgICB9XG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgICAgICB0aGlzLnNldERlc2NyaXB0aW9uKCk7XG4gICAgfVxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMudW5zdWJzY3JpYmUoKTtcbiAgICB9XG4gICAgZGlzYWJsZWRLZW5kb0lucHV0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5rZW5kb0lucHV0ICYmIHRoaXMua2VuZG9JbnB1dC5kaXNhYmxlZDtcbiAgICB9XG4gICAgZGlzYWJsZWRDb250cm9sKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250cm9sLmRpc2FibGVkO1xuICAgIH1cbiAgICBkaXNhYmxlZEVsZW1lbnQoKSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID0gdGhpcy5jb250cm9sRWxlbWVudFJlZnMudG9BcnJheSgpO1xuICAgICAgICByZXR1cm4gZWxlbWVudHMuZXZlcnkoZSA9PiBlLm5hdGl2ZUVsZW1lbnQuaGFzQXR0cmlidXRlKCdkaXNhYmxlZCcpKTtcbiAgICB9XG4gICAgdmFsaWRhdGVGb3JtQ29udHJvbChmb3JtQ29udHJvbHMpIHtcbiAgICAgICAgaWYgKGlzRGV2TW9kZSgpICYmIGZvcm1Db250cm9scy5sZW5ndGggIT09IDEgJiYgIXRoaXMuaXNDb250cm9sR3JvdXAoZm9ybUNvbnRyb2xzKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgYGtlbmRvLWZvcm1maWVsZGAgY29tcG9uZW50IHNob3VsZCBjb250YWluICcgK1xuICAgICAgICAgICAgICAgICdvbmx5IG9uZSBjb250cm9sIG9mIHR5cGUgTmdDb250cm9sIHdpdGggYSBmb3JtQ29udHJvbE5hbWUoaHR0cHM6Ly9hbmd1bGFyLmlvL2FwaS9mb3Jtcy9Gb3JtQ29udHJvbE5hbWUpJyArXG4gICAgICAgICAgICAgICAgJ29yIGFuIG5nTW9kZWwoaHR0cHM6Ly9hbmd1bGFyLmlvL2FwaS9mb3Jtcy9OZ01vZGVsKSBiaW5kaW5nLicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlzQ29udHJvbEdyb3VwKGZvcm1Db250cm9scykge1xuICAgICAgICBpZiAoIWZvcm1Db250cm9scy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuYW1lID0gZm9ybUNvbnRyb2xzLmZpcnN0Lm5hbWU7XG4gICAgICAgIHJldHVybiBmb3JtQ29udHJvbHMudG9BcnJheSgpLmV2ZXJ5KGMgPT4gYy5uYW1lID09PSBuYW1lICYmICh0aGlzLmlzUmFkaW9Db250cm9sKGMpKSk7XG4gICAgfVxuICAgIGlzUmFkaW9Db250cm9sKGNvbnRyb2wpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRyb2wudmFsdWVBY2Nlc3NvciBpbnN0YW5jZW9mIFJhZGlvQ29udHJvbFZhbHVlQWNjZXNzb3I7XG4gICAgfVxuICAgIHVwZGF0ZURlc2NyaXB0aW9uKCkge1xuICAgICAgICBjb25zdCBjb250cm9scyA9IHRoaXMuZmluZENvbnRyb2xFbGVtZW50cygpO1xuICAgICAgICBpZiAoIWNvbnRyb2xzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29udHJvbHMuZm9yRWFjaCgoY29udHJvbCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuZXJyb3JDaGlsZHJlbi5sZW5ndGggPiAwIHx8IHRoaXMuaGludENoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhcmlhSWRzID0gdGhpcy5nZW5lcmF0ZURlc2NyaXB0aW9uSWRzKGNvbnRyb2wpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0QXR0cmlidXRlKGNvbnRyb2wsICdhcmlhLWRlc2NyaWJlZGJ5JywgYXJpYUlkcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmaW5kQ29udHJvbEVsZW1lbnRzKCkge1xuICAgICAgICBpZiAoIXRoaXMuY29udHJvbEVsZW1lbnRSZWZzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gaWYgdGhlIGNvbnRyb2wgaXMgS2VuZG9JbnB1dCBhbmQgaGFzIGZvY3VzYWJsZUlkIC0gZHJvcGRvd25zLCBkYXRlaW5wdXRzXG4gICAgICAgIGlmICh0aGlzLmtlbmRvSW5wdXQgJiYgdGhpcy5rZW5kb0lucHV0LmZvY3VzYWJsZUlkICYmIGlzRG9jdW1lbnRBdmFpbGFibGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuIFt0aGlzLmhvc3RFbGVtZW50Lm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7dGhpcy5rZW5kb0lucHV0LmZvY3VzYWJsZUlkfWApXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5jb250cm9sRWxlbWVudFJlZnMubWFwKGVsID0+IGVsLm5hdGl2ZUVsZW1lbnQpO1xuICAgIH1cbiAgICBnZW5lcmF0ZURlc2NyaXB0aW9uSWRzKGNvbnRyb2wpIHtcbiAgICAgICAgY29uc3QgaWRzID0gbmV3IFNldCgpO1xuICAgICAgICBpZiAoY29udHJvbC5oYXNBdHRyaWJ1dGUoJ2FyaWEtZGVzY3JpYmVkYnknKSkge1xuICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IGNvbnRyb2wuZ2V0QXR0cmlidXRlKCdhcmlhLWRlc2NyaWJlZGJ5Jykuc3BsaXQoJyAnKTtcbiAgICAgICAgICAgIGF0dHJpYnV0ZXMuZm9yRWFjaCgoYXR0cikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChhdHRyLmluY2x1ZGVzKCdrZW5kby1oaW50LScpIHx8IGF0dHIuaW5jbHVkZXMoJ2tlbmRvLWVycm9yLScpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWRzLmFkZChhdHRyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaGludENoaWxkcmVuLmZvckVhY2goKGhpbnQpID0+IHtcbiAgICAgICAgICAgIGlkcy5hZGQoaGludC5pZCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVycm9yQ2hpbGRyZW4uZm9yRWFjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIGlkcy5hZGQoZXJyb3IuaWQpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oaWRzKS5qb2luKCcgJyk7XG4gICAgfVxuICAgIHNob3dIaW50c0luaXRpYWwoKSB7XG4gICAgICAgIGlmICghdGhpcy5jb250cm9sKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHZhbGlkLCB1bnRvdWNoZWQsIHByaXN0aW5lIH0gPSB0aGlzLmNvbnRyb2w7XG4gICAgICAgIHJldHVybiB2YWxpZCB8fCAodW50b3VjaGVkICYmIHByaXN0aW5lKTtcbiAgICB9XG4gICAgc2hvd0Vycm9yc0luaXRpYWwoKSB7XG4gICAgICAgIGlmICghdGhpcy5jb250cm9sKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBpbnZhbGlkLCBkaXJ0eSwgdG91Y2hlZCB9ID0gdGhpcy5jb250cm9sO1xuICAgICAgICByZXR1cm4gaW52YWxpZCAmJiAoZGlydHkgfHwgdG91Y2hlZCk7XG4gICAgfVxuICAgIHNldERlc2NyaXB0aW9uKCkge1xuICAgICAgICB0aGlzLnVwZGF0ZURlc2NyaXB0aW9uKCk7XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5hZGQodGhpcy5lcnJvckNoaWxkcmVuLmNoYW5nZXMuc3Vic2NyaWJlKCgpID0+IHRoaXMudXBkYXRlRGVzY3JpcHRpb24oKSkpO1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuYWRkKHRoaXMuaGludENoaWxkcmVuLmNoYW5nZXMuc3Vic2NyaWJlKCgpID0+IHRoaXMudXBkYXRlRGVzY3JpcHRpb24oKSkpO1xuICAgIH1cbn07XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay1mb3JtLWZpZWxkJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBGb3JtRmllbGRDb21wb25lbnQucHJvdG90eXBlLCBcImhvc3RDbGFzc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2F0dHIuZGlyJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIEZvcm1GaWVsZENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGlyZWN0aW9uXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay1mb3JtLWZpZWxkLWVycm9yJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIEZvcm1GaWVsZENvbXBvbmVudC5wcm90b3R5cGUsIFwiZXJyb3JDbGFzc1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLWZvcm0tZmllbGQtZGlzYWJsZWQnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgRm9ybUZpZWxkQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXNhYmxlZENsYXNzXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgQ29udGVudENoaWxkcmVuKE5nQ29udHJvbCwgeyBkZXNjZW5kYW50czogdHJ1ZSB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgUXVlcnlMaXN0KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW1F1ZXJ5TGlzdF0pXG5dLCBGb3JtRmllbGRDb21wb25lbnQucHJvdG90eXBlLCBcImZvcm1Db250cm9sc1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIENvbnRlbnRDaGlsZHJlbihOZ0NvbnRyb2wsIHsgcmVhZDogRWxlbWVudFJlZiwgZGVzY2VuZGFudHM6IHRydWUgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFF1ZXJ5TGlzdClcbl0sIEZvcm1GaWVsZENvbXBvbmVudC5wcm90b3R5cGUsIFwiY29udHJvbEVsZW1lbnRSZWZzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBDb250ZW50Q2hpbGQoS2VuZG9JbnB1dCwgeyBzdGF0aWM6IHRydWUgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbl0sIEZvcm1GaWVsZENvbXBvbmVudC5wcm90b3R5cGUsIFwia2VuZG9JbnB1dFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgQ29udGVudENoaWxkcmVuKEVycm9yQ29tcG9uZW50LCB7IGRlc2NlbmRhbnRzOiB0cnVlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBRdWVyeUxpc3QpXG5dLCBGb3JtRmllbGRDb21wb25lbnQucHJvdG90eXBlLCBcImVycm9yQ2hpbGRyZW5cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIENvbnRlbnRDaGlsZHJlbihIaW50Q29tcG9uZW50LCB7IGRlc2NlbmRhbnRzOiB0cnVlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBRdWVyeUxpc3QpXG5dLCBGb3JtRmllbGRDb21wb25lbnQucHJvdG90eXBlLCBcImhpbnRDaGlsZHJlblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgRm9ybUZpZWxkQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzaG93SGludHNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIEZvcm1GaWVsZENvbXBvbmVudC5wcm90b3R5cGUsIFwib3JpZW50YXRpb25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIEZvcm1GaWVsZENvbXBvbmVudC5wcm90b3R5cGUsIFwic2hvd0Vycm9yc1wiLCB2b2lkIDApO1xuRm9ybUZpZWxkQ29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgQ29tcG9uZW50KHtcbiAgICAgICAgc2VsZWN0b3I6ICdrZW5kby1mb3JtZmllbGQnLFxuICAgICAgICB0ZW1wbGF0ZTogYFxuICAgICAgICA8bmctY29udGVudCBzZWxlY3Q9XCJsYWJlbCwga2VuZG8tbGFiZWxcIj48L25nLWNvbnRlbnQ+XG4gICAgICAgIDxkaXYgW2NsYXNzLmstZm9ybS1maWVsZC13cmFwXT1cImhvcml6b250YWxcIj5cbiAgICAgICAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cbiAgICAgICAgICAgIDxuZy1jb250ZW50IHNlbGVjdD1cImtlbmRvLWZvcm1oaW50XCIgKm5nSWY9XCJoYXNIaW50c1wiPjwvbmctY29udGVudD5cbiAgICAgICAgICAgIDxuZy1jb250ZW50IHNlbGVjdD1cImtlbmRvLWZvcm1lcnJvclwiICpuZ0lmPVwiaGFzRXJyb3JzXCI+PC9uZy1jb250ZW50PlxuICAgICAgICA8L2Rpdj5cbiAgICBgLFxuICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgIExvY2FsaXphdGlvblNlcnZpY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZTogTDEwTl9QUkVGSVgsXG4gICAgICAgICAgICAgICAgdXNlVmFsdWU6ICdrZW5kby5mb3JtZmllbGQnXG4gICAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW1JlbmRlcmVyMixcbiAgICAgICAgTG9jYWxpemF0aW9uU2VydmljZSxcbiAgICAgICAgRWxlbWVudFJlZl0pXG5dLCBGb3JtRmllbGRDb21wb25lbnQpO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIFtOZ01vZHVsZV0oe3sgc2l0ZS5kYXRhLnVybHMuYW5ndWxhclsnbmdtb2R1bGVhcGknXSB9fSlcbiAqIGRlZmluaXRpb24gZm9yIHRoZSBGb3JtRmllbGQsIEVycm9yIGFuZCBIaW50IGNvbXBvbmVudHMuXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBgYGB0cy1uby1ydW5cbiAqIC8vIEltcG9ydCB0aGUgRm9ybUZpZWxkIG1vZHVsZVxuICogaW1wb3J0IHsgRm9ybUZpZWxkTW9kdWxlIH0gZnJvbSAnQHByb2dyZXNzL2tlbmRvLWFuZ3VsYXItaW5wdXRzJztcbiAqXG4gKiAvLyBUaGUgYnJvd3NlciBwbGF0Zm9ybSB3aXRoIGEgY29tcGlsZXJcbiAqIGltcG9ydCB7IHBsYXRmb3JtQnJvd3NlckR5bmFtaWMgfSBmcm9tICdAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyLWR5bmFtaWMnO1xuICpcbiAqIGltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG4gKlxuICogLy8gSW1wb3J0IHRoZSBhcHAgY29tcG9uZW50XG4gKiBpbXBvcnQgeyBBcHBDb21wb25lbnQgfSBmcm9tICcuL2FwcC5jb21wb25lbnQnO1xuICpcbiAqIC8vIERlZmluZSB0aGUgYXBwIG1vZHVsZVxuICogX0BOZ01vZHVsZSh7XG4gKiAgICAgZGVjbGFyYXRpb25zOiBbQXBwQ29tcG9uZW50XSwgLy8gZGVjbGFyZSBhcHAgY29tcG9uZW50XG4gKiAgICAgaW1wb3J0czogICAgICBbQnJvd3Nlck1vZHVsZSwgRm9ybUZpZWxkTW9kdWxlXSwgLy8gaW1wb3J0IEZvcm1GaWVsZCBtb2R1bGVcbiAqICAgICBib290c3RyYXA6ICAgIFtBcHBDb21wb25lbnRdXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIEFwcE1vZHVsZSB7fVxuICpcbiAqIC8vIENvbXBpbGUgYW5kIGxhdW5jaCB0aGUgbW9kdWxlXG4gKiBwbGF0Zm9ybUJyb3dzZXJEeW5hbWljKCkuYm9vdHN0cmFwTW9kdWxlKEFwcE1vZHVsZSk7XG4gKlxuICogYGBgXG4gKi9cbmxldCBGb3JtRmllbGRNb2R1bGUgPSBjbGFzcyBGb3JtRmllbGRNb2R1bGUge1xufTtcbkZvcm1GaWVsZE1vZHVsZSA9IF9fZGVjb3JhdGUoW1xuICAgIE5nTW9kdWxlKHtcbiAgICAgICAgZGVjbGFyYXRpb25zOiBbSGludENvbXBvbmVudCwgRXJyb3JDb21wb25lbnQsIEZvcm1GaWVsZENvbXBvbmVudF0sXG4gICAgICAgIGV4cG9ydHM6IFtIaW50Q29tcG9uZW50LCBFcnJvckNvbXBvbmVudCwgRm9ybUZpZWxkQ29tcG9uZW50XSxcbiAgICAgICAgaW1wb3J0czogW0NvbW1vbk1vZHVsZV1cbiAgICB9KVxuXSwgRm9ybUZpZWxkTW9kdWxlKTtcblxuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBbTmdNb2R1bGVdKHt7IHNpdGUuZGF0YS51cmxzLmFuZ3VsYXJbJ25nbW9kdWxlYXBpJ10gfX0pXG4gKiBkZWZpbml0aW9uIGZvciB0aGUgSW5wdXRzIGNvbXBvbmVudHMuXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBgYGB0cy1uby1ydW5cbiAqIC8vIEltcG9ydCB0aGUgSW5wdXRzIG1vZHVsZVxuICogaW1wb3J0IHsgSW5wdXRzTW9kdWxlIH0gZnJvbSAnQHByb2dyZXNzL2tlbmRvLWFuZ3VsYXItaW5wdXRzJztcbiAqXG4gKiAvLyBUaGUgYnJvd3NlciBwbGF0Zm9ybSB3aXRoIGEgY29tcGlsZXJcbiAqIGltcG9ydCB7IHBsYXRmb3JtQnJvd3NlckR5bmFtaWMgfSBmcm9tICdAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyLWR5bmFtaWMnO1xuICogaW1wb3J0IHsgQnJvd3NlckFuaW1hdGlvbnNNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyL2FuaW1hdGlvbnMnO1xuICpcbiAqIGltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG4gKlxuICogLy8gSW1wb3J0IHRoZSBhcHAgY29tcG9uZW50XG4gKiBpbXBvcnQgeyBBcHBDb21wb25lbnQgfSBmcm9tICcuL2FwcC5jb21wb25lbnQnO1xuICpcbiAqIC8vIERlZmluZSB0aGUgYXBwIG1vZHVsZVxuICogX0BOZ01vZHVsZSh7XG4gKiAgICAgZGVjbGFyYXRpb25zOiBbQXBwQ29tcG9uZW50XSwgLy8gZGVjbGFyZSBhcHAgY29tcG9uZW50XG4gKiAgICAgaW1wb3J0czogICAgICBbQnJvd3Nlck1vZHVsZSwgQnJvd3NlckFuaW1hdGlvbnNNb2R1bGUsIElucHV0c01vZHVsZV0sIC8vIGltcG9ydCBJbnB1dHMgbW9kdWxlXG4gKiAgICAgYm9vdHN0cmFwOiAgICBbQXBwQ29tcG9uZW50XVxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBBcHBNb2R1bGUge31cbiAqXG4gKiAvLyBDb21waWxlIGFuZCBsYXVuY2ggdGhlIG1vZHVsZVxuICogcGxhdGZvcm1Ccm93c2VyRHluYW1pYygpLmJvb3RzdHJhcE1vZHVsZShBcHBNb2R1bGUpO1xuICpcbiAqIGBgYFxuICovXG5sZXQgSW5wdXRzTW9kdWxlID0gY2xhc3MgSW5wdXRzTW9kdWxlIHtcbn07XG5JbnB1dHNNb2R1bGUgPSBfX2RlY29yYXRlKFtcbiAgICBOZ01vZHVsZSh7XG4gICAgICAgIGV4cG9ydHM6IFtcbiAgICAgICAgICAgIFRleHRBcmVhTW9kdWxlLFxuICAgICAgICAgICAgVGV4dEJveE1vZHVsZSxcbiAgICAgICAgICAgIFNsaWRlck1vZHVsZSxcbiAgICAgICAgICAgIFJhbmdlU2xpZGVyTW9kdWxlLFxuICAgICAgICAgICAgU3dpdGNoTW9kdWxlLFxuICAgICAgICAgICAgTnVtZXJpY1RleHRCb3hNb2R1bGUsXG4gICAgICAgICAgICBNYXNrZWRUZXh0Qm94TW9kdWxlLFxuICAgICAgICAgICAgQ29sb3JQaWNrZXJNb2R1bGUsXG4gICAgICAgICAgICBDaGVja0JveE1vZHVsZSxcbiAgICAgICAgICAgIFJhZGlvQnV0dG9uTW9kdWxlLFxuICAgICAgICAgICAgRm9ybUZpZWxkTW9kdWxlXG4gICAgICAgIF0sXG4gICAgICAgIGltcG9ydHM6IFtDb21tb25Nb2R1bGVdXG4gICAgfSlcbl0sIElucHV0c01vZHVsZSk7XG5cbi8qKlxuICogR2VuZXJhdGVkIGJ1bmRsZSBpbmRleC4gRG8gbm90IGVkaXQuXG4gKi9cblxuZXhwb3J0IHsgQ2hlY2tCb3hNb2R1bGUsIENvbG9ySW5wdXRDb21wb25lbnQsIEZvY3VzT25Eb21SZWFkeURpcmVjdGl2ZSwgQ29sb3JHcmFkaWVudExvY2FsaXphdGlvblNlcnZpY2UsIENvbG9yUGFsZXR0ZUxvY2FsaXphdGlvblNlcnZpY2UsIENvbG9yUGlja2VyTG9jYWxpemF0aW9uU2VydmljZSwgQ29sb3JQaWNrZXJDdXN0b21NZXNzYWdlc0NvbXBvbmVudCwgQ29sb3JQaWNrZXJNZXNzYWdlcywgQ29sb3JQYWxldHRlU2VydmljZSwgTWFza2luZ1NlcnZpY2UsIE51bWVyaWNUZXh0Qm94TWVzc2FnZXMsIFJhZGlvQnV0dG9uTW9kdWxlLCBSYW5nZVNsaWRlckN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50LCBSYW5nZVNsaWRlck1lc3NhZ2VzLCBTSEFSRURfRElSRUNUSVZFUywgU2xpZGVyQ3VzdG9tTWVzc2FnZXNDb21wb25lbnQsIFNsaWRlck1lc3NhZ2VzLCBTbGlkZXJCYXNlLCBTbGlkZXJzQ29tbW9uTW9kdWxlLCBTd2l0Y2hDdXN0b21NZXNzYWdlc0NvbXBvbmVudCwgTWVzc2FnZXMsIFRleHRGaWVsZHNCYXNlLCBUZXh0Qm94Q3VzdG9tTWVzc2FnZXNDb21wb25lbnQsIFRleHRCb3hNZXNzYWdlcywgU2xpZGVyQ29tcG9uZW50LCBSYW5nZVNsaWRlckNvbXBvbmVudCwgTGFiZWxUZW1wbGF0ZURpcmVjdGl2ZSwgU3dpdGNoQ29tcG9uZW50LCBUZXh0Qm94Q29udGFpbmVyQ29tcG9uZW50LCBUZXh0Qm94RGlyZWN0aXZlLCBUZXh0QXJlYURpcmVjdGl2ZSwgTnVtZXJpY1RleHRCb3hDb21wb25lbnQsIE51bWVyaWNUZXh0Qm94Q3VzdG9tTWVzc2FnZXNDb21wb25lbnQsIE1hc2tlZFRleHRCb3hDb21wb25lbnQsIElucHV0c01vZHVsZSwgU2xpZGVyVGlja3NDb21wb25lbnQsIFNsaWRlck1vZHVsZSwgUmFuZ2VTbGlkZXJNb2R1bGUsIFN3aXRjaE1vZHVsZSwgTnVtZXJpY1RleHRCb3hNb2R1bGUsIE1hc2tlZFRleHRCb3hNb2R1bGUsIFRleHRCb3hNb2R1bGUsIFRleHRBcmVhTW9kdWxlLCBDb2xvclBpY2tlckNvbXBvbmVudCwgQ29sb3JQYWxldHRlQ29tcG9uZW50LCBDb2xvckdyYWRpZW50Q29tcG9uZW50LCBDb2xvclBpY2tlck1vZHVsZSwgQWN0aXZlQ29sb3JDbGlja0V2ZW50LCBDaGVja0JveERpcmVjdGl2ZSwgUmFkaW9CdXR0b25EaXJlY3RpdmUsIEhpbnRDb21wb25lbnQsIEVycm9yQ29tcG9uZW50LCBGb3JtRmllbGRDb21wb25lbnQsIEZvcm1GaWVsZE1vZHVsZSwgVGV4dEJveENvbXBvbmVudCwgVGV4dEJveFByZWZpeFRlbXBsYXRlRGlyZWN0aXZlLCBUZXh0Qm94U3VmZml4VGVtcGxhdGVEaXJlY3RpdmUsIFRleHRBcmVhQ29tcG9uZW50LCBUZXh0QXJlYVN1ZmZpeENvbXBvbmVudCwgSW5wdXRTZXBhcmF0b3JDb21wb25lbnQsIFNoYXJlZE1vZHVsZSwgTG9jYWxpemVkQ29sb3JQaWNrZXJNZXNzYWdlc0RpcmVjdGl2ZSwgTG9jYWxpemVkTnVtZXJpY1RleHRCb3hNZXNzYWdlc0RpcmVjdGl2ZSwgTG9jYWxpemVkVGV4dEJveE1lc3NhZ2VzRGlyZWN0aXZlLCBMb2NhbGl6ZWRTbGlkZXJNZXNzYWdlc0RpcmVjdGl2ZSwgTG9jYWxpemVkUmFuZ2VTbGlkZXJNZXNzYWdlc0RpcmVjdGl2ZSwgTG9jYWxpemVkU3dpdGNoTWVzc2FnZXNEaXJlY3RpdmUgfTtcbiJdfQ==","map":null,"metadata":{},"sourceType":"module"}