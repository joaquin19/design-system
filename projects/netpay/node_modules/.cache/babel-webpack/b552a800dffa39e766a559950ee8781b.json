{"ast":null,"code":"import Surface from './surface';\nimport { transform } from '../geometry';\nimport Group from '../shapes/group';\nexport default function exportImage(group, options) {\n  const defaults = {\n    width: \"800px\",\n    height: \"600px\",\n    cors: \"Anonymous\"\n  };\n  let exportRoot = group;\n  const bbox = group.clippedBBox();\n\n  if (bbox) {\n    const origin = bbox.getOrigin();\n    exportRoot = new Group();\n    exportRoot.transform(transform().translate(-origin.x, -origin.y));\n    exportRoot.children.push(group);\n    const size = bbox.getSize();\n    defaults.width = size.width + \"px\";\n    defaults.height = size.height + \"px\";\n  }\n\n  const surfaceOptions = Object.assign(defaults, options);\n  const container = document.createElement(\"div\");\n  const style = container.style;\n  style.display = \"none\";\n  style.width = surfaceOptions.width;\n  style.height = surfaceOptions.height;\n  document.body.appendChild(container);\n  const surface = new Surface(container, surfaceOptions);\n  surface.suspendTracking();\n  surface.draw(exportRoot);\n  const promise = surface.image();\n\n  const destroy = () => {\n    surface.destroy();\n    document.body.removeChild(container);\n  };\n\n  promise.then(destroy, destroy);\n  return promise;\n}","map":null,"metadata":{},"sourceType":"module"}